function $B(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function XE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jM={exports:{}},By={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zD;function ez(){if(zD)return By;zD=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,s){var o=null;if(s!==void 0&&(o=""+s),r.key!==void 0&&(o=""+r.key),"key"in r){s={};for(var c in r)c!=="key"&&(s[c]=r[c])}else s=r;return r=s.ref,{$$typeof:i,type:n,key:o,ref:r!==void 0?r:null,props:s}}return By.Fragment=e,By.jsx=t,By.jsxs=t,By}var FD;function tz(){return FD||(FD=1,jM.exports=ez()),jM.exports}var B=tz(),qM={exports:{}},pn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HD;function nz(){if(HD)return pn;HD=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),_=Symbol.iterator;function S(Z){return Z===null||typeof Z!="object"?null:(Z=_&&Z[_]||Z["@@iterator"],typeof Z=="function"?Z:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,w={};function T(Z,le,Ce){this.props=Z,this.context=le,this.refs=w,this.updater=Ce||M}T.prototype.isReactComponent={},T.prototype.setState=function(Z,le){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,le,"setState")},T.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function D(){}D.prototype=T.prototype;function I(Z,le,Ce){this.props=Z,this.context=le,this.refs=w,this.updater=Ce||M}var L=I.prototype=new D;L.constructor=I,C(L,T.prototype),L.isPureReactComponent=!0;var j=Array.isArray;function Y(){}var k={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function N(Z,le,Ce){var Te=Ce.ref;return{$$typeof:i,type:Z,key:le,ref:Te!==void 0?Te:null,props:Ce}}function O(Z,le){return N(Z.type,le,Z.props)}function z(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===i}function W(Z){var le={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(Ce){return le[Ce]})}var q=/\/+/g;function he(Z,le){return typeof Z=="object"&&Z!==null&&Z.key!=null?W(""+Z.key):le.toString(36)}function fe(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(Y,Y):(Z.status="pending",Z.then(function(le){Z.status==="pending"&&(Z.status="fulfilled",Z.value=le)},function(le){Z.status==="pending"&&(Z.status="rejected",Z.reason=le)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function H(Z,le,Ce,Te,Ye){var xe=typeof Z;(xe==="undefined"||xe==="boolean")&&(Z=null);var Oe=!1;if(Z===null)Oe=!0;else switch(xe){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(Z.$$typeof){case i:case e:Oe=!0;break;case m:return Oe=Z._init,H(Oe(Z._payload),le,Ce,Te,Ye)}}if(Oe)return Ye=Ye(Z),Oe=Te===""?"."+he(Z,0):Te,j(Ye)?(Ce="",Oe!=null&&(Ce=Oe.replace(q,"$&/")+"/"),H(Ye,le,Ce,"",function(bt){return bt})):Ye!=null&&(z(Ye)&&(Ye=O(Ye,Ce+(Ye.key==null||Z&&Z.key===Ye.key?"":(""+Ye.key).replace(q,"$&/")+"/")+Oe)),le.push(Ye)),1;Oe=0;var rt=Te===""?".":Te+":";if(j(Z))for(var ft=0;ft<Z.length;ft++)Te=Z[ft],xe=rt+he(Te,ft),Oe+=H(Te,le,Ce,xe,Ye);else if(ft=S(Z),typeof ft=="function")for(Z=ft.call(Z),ft=0;!(Te=Z.next()).done;)Te=Te.value,xe=rt+he(Te,ft++),Oe+=H(Te,le,Ce,xe,Ye);else if(xe==="object"){if(typeof Z.then=="function")return H(fe(Z),le,Ce,Te,Ye);throw le=String(Z),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function K(Z,le,Ce){if(Z==null)return Z;var Te=[],Ye=0;return H(Z,Te,"","",function(xe){return le.call(Ce,xe,Ye++)}),Te}function J(Z){if(Z._status===-1){var le=Z._result;le=le(),le.then(function(Ce){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=Ce)},function(Ce){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=Ce)}),Z._status===-1&&(Z._status=0,Z._result=le)}if(Z._status===1)return Z._result.default;throw Z._result}var oe=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)},se={map:K,forEach:function(Z,le,Ce){K(Z,function(){le.apply(this,arguments)},Ce)},count:function(Z){var le=0;return K(Z,function(){le++}),le},toArray:function(Z){return K(Z,function(le){return le})||[]},only:function(Z){if(!z(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}};return pn.Activity=g,pn.Children=se,pn.Component=T,pn.Fragment=t,pn.Profiler=r,pn.PureComponent=I,pn.StrictMode=n,pn.Suspense=h,pn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,pn.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return k.H.useMemoCache(Z)}},pn.cache=function(Z){return function(){return Z.apply(null,arguments)}},pn.cacheSignal=function(){return null},pn.cloneElement=function(Z,le,Ce){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var Te=C({},Z.props),Ye=Z.key;if(le!=null)for(xe in le.key!==void 0&&(Ye=""+le.key),le)!V.call(le,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&le.ref===void 0||(Te[xe]=le[xe]);var xe=arguments.length-2;if(xe===1)Te.children=Ce;else if(1<xe){for(var Oe=Array(xe),rt=0;rt<xe;rt++)Oe[rt]=arguments[rt+2];Te.children=Oe}return N(Z.type,Ye,Te)},pn.createContext=function(Z){return Z={$$typeof:o,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:s,_context:Z},Z},pn.createElement=function(Z,le,Ce){var Te,Ye={},xe=null;if(le!=null)for(Te in le.key!==void 0&&(xe=""+le.key),le)V.call(le,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(Ye[Te]=le[Te]);var Oe=arguments.length-2;if(Oe===1)Ye.children=Ce;else if(1<Oe){for(var rt=Array(Oe),ft=0;ft<Oe;ft++)rt[ft]=arguments[ft+2];Ye.children=rt}if(Z&&Z.defaultProps)for(Te in Oe=Z.defaultProps,Oe)Ye[Te]===void 0&&(Ye[Te]=Oe[Te]);return N(Z,xe,Ye)},pn.createRef=function(){return{current:null}},pn.forwardRef=function(Z){return{$$typeof:c,render:Z}},pn.isValidElement=z,pn.lazy=function(Z){return{$$typeof:m,_payload:{_status:-1,_result:Z},_init:J}},pn.memo=function(Z,le){return{$$typeof:d,type:Z,compare:le===void 0?null:le}},pn.startTransition=function(Z){var le=k.T,Ce={};k.T=Ce;try{var Te=Z(),Ye=k.S;Ye!==null&&Ye(Ce,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(Y,oe)}catch(xe){oe(xe)}finally{le!==null&&Ce.types!==null&&(le.types=Ce.types),k.T=le}},pn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},pn.use=function(Z){return k.H.use(Z)},pn.useActionState=function(Z,le,Ce){return k.H.useActionState(Z,le,Ce)},pn.useCallback=function(Z,le){return k.H.useCallback(Z,le)},pn.useContext=function(Z){return k.H.useContext(Z)},pn.useDebugValue=function(){},pn.useDeferredValue=function(Z,le){return k.H.useDeferredValue(Z,le)},pn.useEffect=function(Z,le){return k.H.useEffect(Z,le)},pn.useEffectEvent=function(Z){return k.H.useEffectEvent(Z)},pn.useId=function(){return k.H.useId()},pn.useImperativeHandle=function(Z,le,Ce){return k.H.useImperativeHandle(Z,le,Ce)},pn.useInsertionEffect=function(Z,le){return k.H.useInsertionEffect(Z,le)},pn.useLayoutEffect=function(Z,le){return k.H.useLayoutEffect(Z,le)},pn.useMemo=function(Z,le){return k.H.useMemo(Z,le)},pn.useOptimistic=function(Z,le){return k.H.useOptimistic(Z,le)},pn.useReducer=function(Z,le,Ce){return k.H.useReducer(Z,le,Ce)},pn.useRef=function(Z){return k.H.useRef(Z)},pn.useState=function(Z){return k.H.useState(Z)},pn.useSyncExternalStore=function(Z,le,Ce){return k.H.useSyncExternalStore(Z,le,Ce)},pn.useTransition=function(){return k.H.useTransition()},pn.version="19.2.0",pn}var GD;function cv(){return GD||(GD=1,qM.exports=nz()),qM.exports}var ne=cv();const Ue=XE(ne),RP=$B({__proto__:null,default:Ue},[ne]);var YM={exports:{}},zy={},WM={exports:{}},XM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jD;function iz(){return jD||(jD=1,(function(i){function e(H,K){var J=H.length;H.push(K);e:for(;0<J;){var oe=J-1>>>1,se=H[oe];if(0<r(se,K))H[oe]=K,H[J]=se,J=oe;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var K=H[0],J=H.pop();if(J!==K){H[0]=J;e:for(var oe=0,se=H.length,Z=se>>>1;oe<Z;){var le=2*(oe+1)-1,Ce=H[le],Te=le+1,Ye=H[Te];if(0>r(Ce,J))Te<se&&0>r(Ye,Ce)?(H[oe]=Ye,H[Te]=J,oe=Te):(H[oe]=Ce,H[le]=J,oe=le);else if(Te<se&&0>r(Ye,J))H[oe]=Ye,H[Te]=J,oe=Te;else break e}}return K}function r(H,K){var J=H.sortIndex-K.sortIndex;return J!==0?J:H.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var h=[],d=[],m=1,g=null,_=3,S=!1,M=!1,C=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function L(H){for(var K=t(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=H)n(d),K.sortIndex=K.expirationTime,e(h,K);else break;K=t(d)}}function j(H){if(C=!1,L(H),!M)if(t(h)!==null)M=!0,Y||(Y=!0,W());else{var K=t(d);K!==null&&fe(j,K.startTime-H)}}var Y=!1,k=-1,V=5,N=-1;function O(){return w?!0:!(i.unstable_now()-N<V)}function z(){if(w=!1,Y){var H=i.unstable_now();N=H;var K=!0;try{e:{M=!1,C&&(C=!1,D(k),k=-1),S=!0;var J=_;try{t:{for(L(H),g=t(h);g!==null&&!(g.expirationTime>H&&O());){var oe=g.callback;if(typeof oe=="function"){g.callback=null,_=g.priorityLevel;var se=oe(g.expirationTime<=H);if(H=i.unstable_now(),typeof se=="function"){g.callback=se,L(H),K=!0;break t}g===t(h)&&n(h),L(H)}else n(h);g=t(h)}if(g!==null)K=!0;else{var Z=t(d);Z!==null&&fe(j,Z.startTime-H),K=!1}}break e}finally{g=null,_=J,S=!1}K=void 0}}finally{K?W():Y=!1}}}var W;if(typeof I=="function")W=function(){I(z)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,he=q.port2;q.port1.onmessage=z,W=function(){he.postMessage(null)}}else W=function(){T(z,0)};function fe(H,K){k=T(function(){H(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_next=function(H){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var J=_;_=K;try{return H()}finally{_=J}},i.unstable_requestPaint=function(){w=!0},i.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var J=_;_=H;try{return K()}finally{_=J}},i.unstable_scheduleCallback=function(H,K,J){var oe=i.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?oe+J:oe):J=oe,H){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=J+se,H={id:m++,callback:K,priorityLevel:H,startTime:J,expirationTime:se,sortIndex:-1},J>oe?(H.sortIndex=J,e(d,H),t(h)===null&&H===t(d)&&(C?(D(k),k=-1):C=!0,fe(j,J-oe))):(H.sortIndex=se,e(h,H),M||S||(M=!0,Y||(Y=!0,W()))),H},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(H){var K=_;return function(){var J=_;_=K;try{return H.apply(this,arguments)}finally{_=J}}}})(XM)),XM}var qD;function rz(){return qD||(qD=1,WM.exports=iz()),WM.exports}var KM={exports:{}},Hs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YD;function sz(){if(YD)return Hs;YD=1;var i=cv();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(h,d,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:h,containerInfo:d,implementation:m}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Hs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Hs.createPortal=function(h,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(h,d,null,m)},Hs.flushSync=function(h){var d=o.T,m=n.p;try{if(o.T=null,n.p=2,h)return h()}finally{o.T=d,n.p=m,n.d.f()}},Hs.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(h,d))},Hs.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},Hs.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var m=d.as,g=c(m,d.crossOrigin),_=typeof d.integrity=="string"?d.integrity:void 0,S=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?n.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:S}):m==="script"&&n.d.X(h,{crossOrigin:g,integrity:_,fetchPriority:S,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Hs.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);n.d.M(h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(h)},Hs.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,g=c(m,d.crossOrigin);n.d.L(h,m,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Hs.preloadModule=function(h,d){if(typeof h=="string")if(d){var m=c(d.as,d.crossOrigin);n.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(h)},Hs.requestFormReset=function(h){n.d.r(h)},Hs.unstable_batchedUpdates=function(h,d){return h(d)},Hs.useFormState=function(h,d,m){return o.H.useFormState(h,d,m)},Hs.useFormStatus=function(){return o.H.useHostTransitionStatus()},Hs.version="19.2.0",Hs}var WD;function DP(){if(WD)return KM.exports;WD=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),KM.exports=sz(),KM.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XD;function az(){if(XD)return zy;XD=1;var i=rz(),e=cv(),t=DP();function n(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var l=a,p=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(p=l.return),a=l.return;while(a)}return l.tag===3?p:null}function o(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function c(a){if(a.tag===31){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function h(a){if(s(a)!==a)throw Error(n(188))}function d(a){var l=a.alternate;if(!l){if(l=s(a),l===null)throw Error(n(188));return l!==a?null:a}for(var p=a,v=l;;){var x=p.return;if(x===null)break;var A=x.alternate;if(A===null){if(v=x.return,v!==null){p=v;continue}break}if(x.child===A.child){for(A=x.child;A;){if(A===p)return h(x),a;if(A===v)return h(x),l;A=A.sibling}throw Error(n(188))}if(p.return!==v.return)p=x,v=A;else{for(var F=!1,Q=x.child;Q;){if(Q===p){F=!0,p=x,v=A;break}if(Q===v){F=!0,v=x,p=A;break}Q=Q.sibling}if(!F){for(Q=A.child;Q;){if(Q===p){F=!0,p=A,v=x;break}if(Q===v){F=!0,v=A,p=x;break}Q=Q.sibling}if(!F)throw Error(n(189))}}if(p.alternate!==v)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?a:l}function m(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=m(a),l!==null)return l;a=a.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),I=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function W(a){return a===null||typeof a!="object"?null:(a=z&&a[z]||a["@@iterator"],typeof a=="function"?a:null)}var q=Symbol.for("react.client.reference");function he(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===q?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case C:return"Fragment";case T:return"Profiler";case w:return"StrictMode";case j:return"Suspense";case Y:return"SuspenseList";case N:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case M:return"Portal";case I:return a.displayName||"Context";case D:return(a._context.displayName||"Context")+".Consumer";case L:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case k:return l=a.displayName||null,l!==null?l:he(a.type)||"Memo";case V:l=a._payload,a=a._init;try{return he(a(l))}catch{}}return null}var fe=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},oe=[],se=-1;function Z(a){return{current:a}}function le(a){0>se||(a.current=oe[se],oe[se]=null,se--)}function Ce(a,l){se++,oe[se]=a.current,a.current=l}var Te=Z(null),Ye=Z(null),xe=Z(null),Oe=Z(null);function rt(a,l){switch(Ce(xe,l),Ce(Ye,a),Ce(Te,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?cD(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=cD(l),a=uD(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}le(Te),Ce(Te,a)}function ft(){le(Te),le(Ye),le(xe)}function bt(a){a.memoizedState!==null&&Ce(Oe,a);var l=Te.current,p=uD(l,a.type);l!==p&&(Ce(Ye,a),Ce(Te,p))}function en(a){Ye.current===a&&(le(Te),le(Ye)),Oe.current===a&&(le(Oe),Ly._currentValue=J)}var Cn,ae;function We(a){if(Cn===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);Cn=l&&l[1]||"",ae=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cn+a+ae}var Ge=!1;function ze(a,l){if(!a||Ge)return"";Ge=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(l){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(Le){var Ne=Le}Reflect.construct(a,[],Qe)}else{try{Qe.call()}catch(Le){Ne=Le}a.call(Qe.prototype)}}else{try{throw Error()}catch(Le){Ne=Le}(Qe=a())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(Le){if(Le&&Ne&&typeof Le.stack=="string")return[Le.stack,Ne.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=v.DetermineComponentFrameRoot(),F=A[0],Q=A[1];if(F&&Q){var ue=F.split(`
`),Ae=Q.split(`
`);for(x=v=0;v<ue.length&&!ue[v].includes("DetermineComponentFrameRoot");)v++;for(;x<Ae.length&&!Ae[x].includes("DetermineComponentFrameRoot");)x++;if(v===ue.length||x===Ae.length)for(v=ue.length-1,x=Ae.length-1;1<=v&&0<=x&&ue[v]!==Ae[x];)x--;for(;1<=v&&0<=x;v--,x--)if(ue[v]!==Ae[x]){if(v!==1||x!==1)do if(v--,x--,0>x||ue[v]!==Ae[x]){var Be=`
`+ue[v].replace(" at new "," at ");return a.displayName&&Be.includes("<anonymous>")&&(Be=Be.replace("<anonymous>",a.displayName)),Be}while(1<=v&&0<=x);break}}}finally{Ge=!1,Error.prepareStackTrace=p}return(p=a?a.displayName||a.name:"")?We(p):""}function Ve(a,l){switch(a.tag){case 26:case 27:case 5:return We(a.type);case 16:return We("Lazy");case 13:return a.child!==l&&l!==null?We("Suspense Fallback"):We("Suspense");case 19:return We("SuspenseList");case 0:case 15:return ze(a.type,!1);case 11:return ze(a.type.render,!1);case 1:return ze(a.type,!0);case 31:return We("Activity");default:return""}}function ht(a){try{var l="",p=null;do l+=Ve(a,p),p=a,a=a.return;while(a);return l}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var qe=Object.prototype.hasOwnProperty,Je=i.unstable_scheduleCallback,zt=i.unstable_cancelCallback,Qt=i.unstable_shouldYield,ie=i.unstable_requestPaint,X=i.unstable_now,Se=i.unstable_getCurrentPriorityLevel,Pe=i.unstable_ImmediatePriority,$e=i.unstable_UserBlockingPriority,ke=i.unstable_NormalPriority,It=i.unstable_LowPriority,ct=i.unstable_IdlePriority,Ct=i.log,Rt=i.unstable_setDisableYieldValue,Ze=null,at=null;function Nt(a){if(typeof Ct=="function"&&Rt(a),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(Ze,a)}catch{}}var gt=Math.clz32?Math.clz32:pe,mt=Math.log,Yt=Math.LN2;function pe(a){return a>>>=0,a===0?32:31-(mt(a)/Yt|0)|0}var it=256,lt=262144,pt=4194304;function nt(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Fe(a,l,p){var v=a.pendingLanes;if(v===0)return 0;var x=0,A=a.suspendedLanes,F=a.pingedLanes;a=a.warmLanes;var Q=v&134217727;return Q!==0?(v=Q&~A,v!==0?x=nt(v):(F&=Q,F!==0?x=nt(F):p||(p=Q&~a,p!==0&&(x=nt(p))))):(Q=v&~A,Q!==0?x=nt(Q):F!==0?x=nt(F):p||(p=v&~a,p!==0&&(x=nt(p)))),x===0?0:l!==0&&l!==x&&(l&A)===0&&(A=x&-x,p=l&-l,A>=p||A===32&&(p&4194048)!==0)?l:x}function xt(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function Xt(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function In(){var a=pt;return pt<<=1,(pt&62914560)===0&&(pt=4194304),a}function on(a){for(var l=[],p=0;31>p;p++)l.push(a);return l}function br(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function as(a,l,p,v,x,A){var F=a.pendingLanes;a.pendingLanes=p,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=p,a.entangledLanes&=p,a.errorRecoveryDisabledLanes&=p,a.shellSuspendCounter=0;var Q=a.entanglements,ue=a.expirationTimes,Ae=a.hiddenUpdates;for(p=F&~p;0<p;){var Be=31-gt(p),Qe=1<<Be;Q[Be]=0,ue[Be]=-1;var Ne=Ae[Be];if(Ne!==null)for(Ae[Be]=null,Be=0;Be<Ne.length;Be++){var Le=Ne[Be];Le!==null&&(Le.lane&=-536870913)}p&=~Qe}v!==0&&eo(a,v,0),A!==0&&x===0&&a.tag!==0&&(a.suspendedLanes|=A&~(F&~l))}function eo(a,l,p){a.pendingLanes|=l,a.suspendedLanes&=~l;var v=31-gt(l);a.entangledLanes|=l,a.entanglements[v]=a.entanglements[v]|1073741824|p&261930}function os(a,l){var p=a.entangledLanes|=l;for(a=a.entanglements;p;){var v=31-gt(p),x=1<<v;x&l|a[v]&l&&(a[v]|=l),p&=~x}}function to(a,l){var p=l&-l;return p=(p&42)!==0?1:Lr(p),(p&(a.suspendedLanes|l))!==0?0:p}function Lr(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function na(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Wr(){var a=K.p;return a!==0?a:(a=window.event,a===void 0?32:OD(a.type))}function zi(a,l){var p=K.p;try{return K.p=a,l()}finally{K.p=p}}var fr=Math.random().toString(36).slice(2),hn="__reactFiber$"+fr,Ii="__reactProps$"+fr,ws="__reactContainer$"+fr,al="__reactEvents$"+fr,Sh="__reactListeners$"+fr,bh="__reactHandles$"+fr,ec="__reactResources$"+fr,As="__reactMarker$"+fr;function $(a){delete a[hn],delete a[Ii],delete a[al],delete a[Sh],delete a[bh]}function me(a){var l=a[hn];if(l)return l;for(var p=a.parentNode;p;){if(l=p[ws]||p[hn]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(a=vD(a);a!==null;){if(p=a[hn])return p;a=vD(a)}return l}a=p,p=a.parentNode}return null}function be(a){if(a=a[hn]||a[ws]){var l=a.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return a}return null}function we(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(n(33))}function ge(a){var l=a[ec];return l||(l=a[ec]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ke(a){a[As]=!0}var dt=new Set,Mt={};function vt(a,l){Pt(a,l),Pt(a+"Capture",l)}function Pt(a,l){for(Mt[a]=l,a=0;a<l.length;a++)dt.add(l[a])}var Gt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ut={},fn={};function kn(a){return qe.call(fn,a)?!0:qe.call(Ut,a)?!1:Gt.test(a)?fn[a]=!0:(Ut[a]=!0,!1)}function ii(a,l,p){if(kn(l))if(p===null)a.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var v=l.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+p)}}function _n(a,l,p){if(p===null)a.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+p)}}function Kt(a,l,p,v){if(v===null)a.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(p);return}a.setAttributeNS(l,p,""+v)}}function Et(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Qn(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function xn(a,l,p){var v=Object.getOwnPropertyDescriptor(a.constructor.prototype,l);if(!a.hasOwnProperty(l)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var x=v.get,A=v.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return x.call(this)},set:function(F){p=""+F,A.call(this,F)}}),Object.defineProperty(a,l,{enumerable:v.enumerable}),{getValue:function(){return p},setValue:function(F){p=""+F},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function ln(a){if(!a._valueTracker){var l=Qn(a)?"checked":"value";a._valueTracker=xn(a,l,""+a[l])}}function ls(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var p=l.getValue(),v="";return a&&(v=Qn(a)?a.checked?"true":"false":a.value),a=v,a!==p?(l.setValue(a),!0):!1}function Si(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Cs=/[\n"\\]/g;function En(a){return a.replace(Cs,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function sr(a,l,p,v,x,A,F,Q){a.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?a.type=F:a.removeAttribute("type"),l!=null?F==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Et(l)):a.value!==""+Et(l)&&(a.value=""+Et(l)):F!=="submit"&&F!=="reset"||a.removeAttribute("value"),l!=null?Fi(a,F,Et(l)):p!=null?Fi(a,F,Et(p)):v!=null&&a.removeAttribute("value"),x==null&&A!=null&&(a.defaultChecked=!!A),x!=null&&(a.checked=x&&typeof x!="function"&&typeof x!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?a.name=""+Et(Q):a.removeAttribute("name")}function xr(a,l,p,v,x,A,F,Q){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(a.type=A),l!=null||p!=null){if(!(A!=="submit"&&A!=="reset"||l!=null)){ln(a);return}p=p!=null?""+Et(p):"",l=l!=null?""+Et(l):p,Q||l===a.value||(a.value=l),a.defaultValue=l}v=v??x,v=typeof v!="function"&&typeof v!="symbol"&&!!v,a.checked=Q?a.checked:!!v,a.defaultChecked=!!v,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(a.name=F),ln(a)}function Fi(a,l,p){l==="number"&&Si(a.ownerDocument)===a||a.defaultValue===""+p||(a.defaultValue=""+p)}function Oi(a,l,p,v){if(a=a.options,l){l={};for(var x=0;x<p.length;x++)l["$"+p[x]]=!0;for(p=0;p<a.length;p++)x=l.hasOwnProperty("$"+a[p].value),a[p].selected!==x&&(a[p].selected=x),x&&v&&(a[p].defaultSelected=!0)}else{for(p=""+Et(p),l=null,x=0;x<a.length;x++){if(a[x].value===p){a[x].selected=!0,v&&(a[x].defaultSelected=!0);return}l!==null||a[x].disabled||(l=a[x])}l!==null&&(l.selected=!0)}}function ol(a,l,p){if(l!=null&&(l=""+Et(l),l!==a.value&&(a.value=l),p==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=p!=null?""+Et(p):""}function Xi(a,l,p,v){if(l==null){if(v!=null){if(p!=null)throw Error(n(92));if(fe(v)){if(1<v.length)throw Error(n(93));v=v[0]}p=v}p==null&&(p=""),l=p}p=Et(l),a.defaultValue=p,v=a.textContent,v===p&&v!==""&&v!==null&&(a.value=v),ln(a)}function cs(a,l){if(l){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=l;return}}a.textContent=l}var fu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tc(a,l,p){var v=l.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":v?a.setProperty(l,p):typeof p!="number"||p===0||fu.has(l)?l==="float"?a.cssFloat=p:a[l]=(""+p).trim():a[l]=p+"px"}function xh(a,l,p){if(l!=null&&typeof l!="object")throw Error(n(62));if(a=a.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||l!=null&&l.hasOwnProperty(v)||(v.indexOf("--")===0?a.setProperty(v,""):v==="float"?a.cssFloat="":a[v]="");for(var x in l)v=l[x],l.hasOwnProperty(x)&&p[x]!==v&&tc(a,x,v)}else for(var A in l)l.hasOwnProperty(A)&&tc(a,A,l[A])}function nc(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var td=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ll=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function du(a){return ll.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Na(){}var pu=null;function ia(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var cl=null,Ia=null;function ic(a){var l=be(a);if(l&&(a=l.stateNode)){var p=a[Ii]||null;e:switch(a=l.stateNode,l.type){case"input":if(sr(a,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),l=p.name,p.type==="radio"&&l!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+En(""+l)+'"][type="radio"]'),l=0;l<p.length;l++){var v=p[l];if(v!==a&&v.form===a.form){var x=v[Ii]||null;if(!x)throw Error(n(90));sr(v,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(l=0;l<p.length;l++)v=p[l],v.form===a.form&&ls(v)}break e;case"textarea":ol(a,p.value,p.defaultValue);break e;case"select":l=p.value,l!=null&&Oi(a,!!p.multiple,l,!1)}}}var mu=!1;function ul(a,l,p){if(mu)return a(l,p);mu=!0;try{var v=a(l);return v}finally{if(mu=!1,(cl!==null||Ia!==null)&&(ee(),cl&&(l=cl,a=Ia,Ia=cl=null,ic(l),a)))for(l=0;l<a.length;l++)ic(a[l])}}function ra(a,l){var p=a.stateNode;if(p===null)return null;var v=p[Ii]||null;if(v===null)return null;p=v[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(a=a.type,v=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!v;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(n(231,l,typeof p));return p}var sa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rc=!1;if(sa)try{var hi={};Object.defineProperty(hi,"passive",{get:function(){rc=!0}}),window.addEventListener("test",hi,hi),window.removeEventListener("test",hi,hi)}catch{rc=!1}var Ao=null,Eh=null,no=null;function gu(){if(no)return no;var a,l=Eh,p=l.length,v,x="value"in Ao?Ao.value:Ao.textContent,A=x.length;for(a=0;a<p&&l[a]===x[a];a++);var F=p-a;for(v=1;v<=F&&l[p-v]===x[A-v];v++);return no=x.slice(a,1<v?1-v:void 0)}function Co(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Ro(){return!0}function Oa(){return!1}function dr(a){function l(p,v,x,A,F){this._reactName=p,this._targetInst=x,this.type=v,this.nativeEvent=A,this.target=F,this.currentTarget=null;for(var Q in a)a.hasOwnProperty(Q)&&(p=a[Q],this[Q]=p?p(A):A[Q]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Ro:Oa,this.isPropagationStopped=Oa,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Ro)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Ro)},persist:function(){},isPersistent:Ro}),l}var Do={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},io=dr(Do),Rs=g({},Do,{view:0,detail:0}),sc=dr(Rs),hl,ac,ro,vu=g({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Io,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ro&&(ro&&a.type==="mousemove"?(hl=a.screenX-ro.screenX,ac=a.screenY-ro.screenY):ac=hl=0,ro=a),hl)},movementY:function(a){return"movementY"in a?a.movementY:ac}}),nd=dr(vu),Pi=g({},vu,{dataTransfer:0}),id=dr(Pi),rd=g({},Rs,{relatedTarget:0}),oc=dr(rd),Th=g({},Do,{animationName:0,elapsedTime:0,pseudoElement:0}),sd=dr(Th),No=g({},Do,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Mh=dr(No),ad=g({},Do,{data:0}),so=dr(ad),od={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ld(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Ah[a])?!!l[a]:!1}function Io(){return ld}var Ur=g({},Rs,{key:function(a){if(a.key){var l=od[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Co(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?wh[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Io,charCode:function(a){return a.type==="keypress"?Co(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Co(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Ch=dr(Ur),cd=g({},vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ao=dr(cd),b=g({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Io}),P=dr(b),G=g({},Do,{propertyName:0,elapsedTime:0,pseudoElement:0}),te=dr(G),Ee=g({},vu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),De=dr(Ee),ot=g({},Do,{newState:0,oldState:0}),cn=dr(ot),Li=[9,13,27,32],On=sa&&"CompositionEvent"in window,mi=null;sa&&"documentMode"in document&&(mi=document.documentMode);var Er=sa&&"TextEvent"in window&&!mi,wi=sa&&(!On||mi&&8<mi&&11>=mi),Ds=" ",Pa=!1;function fl(a,l){switch(a){case"keyup":return Li.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oo(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var lc=!1;function Qp(a,l){switch(a){case"compositionend":return Oo(l);case"keypress":return l.which!==32?null:(Pa=!0,Ds);case"textInput":return a=l.data,a===Ds&&Pa?null:a;default:return null}}function V0(a,l){if(lc)return a==="compositionend"||!On&&fl(a,l)?(a=gu(),no=Eh=Ao=null,lc=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return wi&&l.locale!=="ko"?null:l.data;default:return null}}var aa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rv(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!aa[a.type]:l==="textarea"}function Zp(a,l,p,v){cl?Ia?Ia.push(v):Ia=[v]:cl=v,l=RS(l,"onChange"),0<l.length&&(p=new io("onChange","change",null,p,v),a.push({event:p,listeners:l}))}var Rh=null,Dh=null;function Dv(a){iD(a,0)}function Nh(a){var l=we(a);if(ls(l))return a}function Nv(a,l){if(a==="change")return l}var ud=!1;if(sa){var yu;if(sa){var Ai="oninput"in document;if(!Ai){var B0=document.createElement("div");B0.setAttribute("oninput","return;"),Ai=typeof B0.oninput=="function"}yu=Ai}else yu=!1;ud=yu&&(!document.documentMode||9<document.documentMode)}function z0(){Rh&&(Rh.detachEvent("onpropertychange",Iv),Dh=Rh=null)}function Iv(a){if(a.propertyName==="value"&&Nh(Dh)){var l=[];Zp(l,Dh,a,ia(a)),ul(Dv,l)}}function hd(a,l,p){a==="focusin"?(z0(),Rh=l,Dh=p,Rh.attachEvent("onpropertychange",Iv)):a==="focusout"&&z0()}function cc(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Nh(Dh)}function F0(a,l){if(a==="click")return Nh(l)}function H0(a,l){if(a==="input"||a==="change")return Nh(l)}function _u(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Ci=typeof Object.is=="function"?Object.is:_u;function Ih(a,l){if(Ci(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var p=Object.keys(a),v=Object.keys(l);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var x=p[v];if(!qe.call(l,x)||!Ci(a[x],l[x]))return!1}return!0}function Ov(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Pv(a,l){var p=Ov(a);a=0;for(var v;p;){if(p.nodeType===3){if(v=a+p.textContent.length,a<=l&&v>=l)return{node:p,offset:l-a};a=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Ov(p)}}function Jp(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?Jp(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function $p(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=Si(a.document);l instanceof a.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)a=l.contentWindow;else break;l=Si(a.document)}return l}function Oh(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var G0=sa&&"documentMode"in document&&11>=document.documentMode,Ph=null,em=null,Lh=null,oa=!1;function tm(a,l,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;oa||Ph==null||Ph!==Si(v)||(v=Ph,"selectionStart"in v&&Oh(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Lh&&Ih(Lh,v)||(Lh=v,v=RS(em,"onSelect"),0<v.length&&(l=new io("onSelect","select",null,l,p),a.push({event:l,listeners:v}),l.target=Ph)))}function uc(a,l){var p={};return p[a.toLowerCase()]=l.toLowerCase(),p["Webkit"+a]="webkit"+l,p["Moz"+a]="moz"+l,p}var Uh={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionrun:uc("Transition","TransitionRun"),transitionstart:uc("Transition","TransitionStart"),transitioncancel:uc("Transition","TransitionCancel"),transitionend:uc("Transition","TransitionEnd")},fd={},us={};sa&&(us=document.createElement("div").style,"AnimationEvent"in window||(delete Uh.animationend.animation,delete Uh.animationiteration.animation,delete Uh.animationstart.animation),"TransitionEvent"in window||delete Uh.transitionend.transition);function hc(a){if(fd[a])return fd[a];if(!Uh[a])return a;var l=Uh[a],p;for(p in l)if(l.hasOwnProperty(p)&&p in us)return fd[a]=l[p];return a}var Ns=hc("animationend"),Lv=hc("animationiteration"),Po=hc("animationstart"),kh=hc("transitionrun"),fc=hc("transitionstart"),Uv=hc("transitioncancel"),nm=hc("transitionend"),dl=new Map,im="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");im.push("scrollEnd");function Xr(a,l){dl.set(a,l),vt(l,[a])}var dc=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Tr=[],Su=0,rm=0;function pc(){for(var a=Su,l=rm=Su=0;l<a;){var p=Tr[l];Tr[l++]=null;var v=Tr[l];Tr[l++]=null;var x=Tr[l];Tr[l++]=null;var A=Tr[l];if(Tr[l++]=null,v!==null&&x!==null){var F=v.pending;F===null?x.next=x:(x.next=F.next,F.next=x),v.pending=x}A!==0&&sm(p,x,A)}}function dd(a,l,p,v){Tr[Su++]=a,Tr[Su++]=l,Tr[Su++]=p,Tr[Su++]=v,rm|=v,a.lanes|=v,a=a.alternate,a!==null&&(a.lanes|=v)}function Vh(a,l,p,v){return dd(a,l,p,v),Bh(a)}function mc(a,l){return dd(a,null,null,l),Bh(a)}function sm(a,l,p){a.lanes|=p;var v=a.alternate;v!==null&&(v.lanes|=p);for(var x=!1,A=a.return;A!==null;)A.childLanes|=p,v=A.alternate,v!==null&&(v.childLanes|=p),A.tag===22&&(a=A.stateNode,a===null||a._visibility&1||(x=!0)),a=A,A=A.return;return a.tag===3?(A=a.stateNode,x&&l!==null&&(x=31-gt(p),a=A.hiddenUpdates,v=a[x],v===null?a[x]=[l]:v.push(l),l.lane=p|536870912),A):null}function Bh(a){if(50<ku)throw ku=0,Vu=null,Error(n(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var gc={};function j0(a,l,p,v){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(a,l,p,v){return new j0(a,l,p,v)}function fs(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Lo(a,l){var p=a.alternate;return p===null?(p=hs(a.tag,l,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=l,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&65011712,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,l=a.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p.refCleanup=a.refCleanup,p}function Kr(a,l){a.flags&=65011714;var p=a.alternate;return p===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=p.childLanes,a.lanes=p.lanes,a.child=p.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=p.memoizedProps,a.memoizedState=p.memoizedState,a.updateQueue=p.updateQueue,a.type=p.type,l=p.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function pd(a,l,p,v,x,A){var F=0;if(v=a,typeof a=="function")fs(a)&&(F=1);else if(typeof a=="string")F=FB(a,p,Te.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case N:return a=hs(31,p,l,x),a.elementType=N,a.lanes=A,a;case C:return pl(p.children,x,A,l);case w:F=8,x|=24;break;case T:return a=hs(12,p,l,x|2),a.elementType=T,a.lanes=A,a;case j:return a=hs(13,p,l,x),a.elementType=j,a.lanes=A,a;case Y:return a=hs(19,p,l,x),a.elementType=Y,a.lanes=A,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case I:F=10;break e;case D:F=9;break e;case L:F=11;break e;case k:F=14;break e;case V:F=16,v=null;break e}F=29,p=Error(n(130,a===null?"null":typeof a,"")),v=null}return l=hs(F,p,l,x),l.elementType=a,l.type=v,l.lanes=A,l}function pl(a,l,p,v){return a=hs(7,a,v,l),a.lanes=p,a}function am(a,l,p){return a=hs(6,a,null,l),a.lanes=p,a}function q0(a){var l=hs(18,null,null,0);return l.stateNode=a,l}function oo(a,l,p){return l=hs(4,a.children!==null?a.children:[],a.key,l),l.lanes=p,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var kv=new WeakMap;function Is(a,l){if(typeof a=="object"&&a!==null){var p=kv.get(a);return p!==void 0?p:(l={value:a,source:l,stack:ht(l)},kv.set(a,l),l)}return{value:a,source:l,stack:ht(l)}}var lo=[],bu=0,md=null,zh=0,la=[],Os=0,Uo=null,ko=1,Vo="";function ml(a,l){lo[bu++]=zh,lo[bu++]=md,md=a,zh=l}function Vv(a,l,p){la[Os++]=ko,la[Os++]=Vo,la[Os++]=Uo,Uo=a;var v=ko;a=Vo;var x=32-gt(v)-1;v&=~(1<<x),p+=1;var A=32-gt(l)+x;if(30<A){var F=x-x%5;A=(v&(1<<F)-1).toString(32),v>>=F,x-=F,ko=1<<32-gt(l)+x|p<<x|v,Vo=A+a}else ko=1<<A|p<<x|v,Vo=a}function om(a){a.return!==null&&(ml(a,1),Vv(a,1,0))}function vc(a){for(;a===md;)md=lo[--bu],lo[bu]=null,zh=lo[--bu],lo[bu]=null;for(;a===Uo;)Uo=la[--Os],la[Os]=null,Vo=la[--Os],la[Os]=null,ko=la[--Os],la[Os]=null}function gd(a,l){la[Os++]=ko,la[Os++]=Vo,la[Os++]=Uo,ko=l.id,Vo=l.overflow,Uo=a}var Mr=null,bi=null,Pn=!1,gl=null,wr=!1,lm=Error(n(519));function Dn(a){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vd(Is(l,a)),lm}function cm(a){var l=a.stateNode,p=a.type,v=a.memoizedProps;switch(l[hn]=a,l[Ii]=v,p){case"dialog":Ln("cancel",l),Ln("close",l);break;case"iframe":case"object":case"embed":Ln("load",l);break;case"video":case"audio":for(p=0;p<Dy.length;p++)Ln(Dy[p],l);break;case"source":Ln("error",l);break;case"img":case"image":case"link":Ln("error",l),Ln("load",l);break;case"details":Ln("toggle",l);break;case"input":Ln("invalid",l),xr(l,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":Ln("invalid",l);break;case"textarea":Ln("invalid",l),Xi(l,v.value,v.defaultValue,v.children)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||l.textContent===""+p||v.suppressHydrationWarning===!0||oD(l.textContent,p)?(v.popover!=null&&(Ln("beforetoggle",l),Ln("toggle",l)),v.onScroll!=null&&Ln("scroll",l),v.onScrollEnd!=null&&Ln("scrollend",l),v.onClick!=null&&(l.onclick=Na),l=!0):l=!1,l||Dn(a,!0)}function Y0(a){for(Mr=a.return;Mr;)switch(Mr.tag){case 5:case 31:case 13:wr=!1;return;case 27:case 3:wr=!0;return;default:Mr=Mr.return}}function xu(a){if(a!==Mr)return!1;if(!Pn)return Y0(a),Pn=!0,!1;var l=a.tag,p;if((p=l!==3&&l!==27)&&((p=l===5)&&(p=a.type,p=!(p!=="form"&&p!=="button")||RM(a.type,a.memoizedProps)),p=!p),p&&bi&&Dn(a),Y0(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));bi=gD(a)}else if(l===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));bi=gD(a)}else l===27?(l=bi,af(a.type)?(a=PM,PM=null,bi=a):bi=l):bi=Mr?Ko(a.stateNode.nextSibling):null;return!0}function Eu(){bi=Mr=null,Pn=!1}function Bv(){var a=gl;return a!==null&&(ts===null?ts=a:ts.push.apply(ts,a),gl=null),a}function vd(a){gl===null?gl=[a]:gl.push(a)}var zv=Z(null),vl=null,Qr=null;function yl(a,l,p){Ce(zv,l._currentValue),l._currentValue=p}function La(a){a._currentValue=zv.current,le(zv)}function _l(a,l,p){for(;a!==null;){var v=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),a===p)break;a=a.return}}function um(a,l,p,v){var x=a.child;for(x!==null&&(x.return=a);x!==null;){var A=x.dependencies;if(A!==null){var F=x.child;A=A.firstContext;e:for(;A!==null;){var Q=A;A=x;for(var ue=0;ue<l.length;ue++)if(Q.context===l[ue]){A.lanes|=p,Q=A.alternate,Q!==null&&(Q.lanes|=p),_l(A.return,p,a),v||(F=null);break e}A=Q.next}}else if(x.tag===18){if(F=x.return,F===null)throw Error(n(341));F.lanes|=p,A=F.alternate,A!==null&&(A.lanes|=p),_l(F,p,a),F=null}else F=x.child;if(F!==null)F.return=x;else for(F=x;F!==null;){if(F===a){F=null;break}if(x=F.sibling,x!==null){x.return=F.return,F=x;break}F=F.return}x=F}}function yc(a,l,p,v){a=null;for(var x=l,A=!1;x!==null;){if(!A){if((x.flags&524288)!==0)A=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var F=x.alternate;if(F===null)throw Error(n(387));if(F=F.memoizedProps,F!==null){var Q=x.type;Ci(x.pendingProps.value,F.value)||(a!==null?a.push(Q):a=[Q])}}else if(x===Oe.current){if(F=x.alternate,F===null)throw Error(n(387));F.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(a!==null?a.push(Ly):a=[Ly])}x=x.return}a!==null&&um(l,a,p,v),l.flags|=262144}function Fh(a){for(a=a.firstContext;a!==null;){if(!Ci(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Tu(a){vl=a,Qr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Ar(a){return Fv(vl,a)}function yd(a,l){return vl===null&&Tu(a),Fv(a,l)}function Fv(a,l){var p=l._currentValue;if(l={context:l,memoizedValue:p,next:null},Qr===null){if(a===null)throw Error(n(308));Qr=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else Qr=Qr.next=l;return p}var W0=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(p,v){a.push(v)}};this.abort=function(){l.aborted=!0,a.forEach(function(p){return p()})}},X0=i.unstable_scheduleCallback,Hv=i.unstable_NormalPriority,Ft={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gv(){return{controller:new W0,data:new Map,refCount:0}}function kr(a){a.refCount--,a.refCount===0&&X0(Hv,function(){a.controller.abort()})}var Mu=null,jv=0,Sl=0,co=null;function Hh(a,l){if(Mu===null){var p=Mu=[];jv=0,Sl=SM(),co={status:"pending",value:void 0,then:function(v){p.push(v)}}}return jv++,l.then(qv,qv),l}function qv(){if(--jv===0&&Mu!==null){co!==null&&(co.status="fulfilled");var a=Mu;Mu=null,Sl=0,co=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function Yv(a,l){var p=[],v={status:"pending",value:null,reason:null,then:function(x){p.push(x)}};return a.then(function(){v.status="fulfilled",v.value=l;for(var x=0;x<p.length;x++)(0,p[x])(l)},function(x){for(v.status="rejected",v.reason=x,x=0;x<p.length;x++)(0,p[x])(void 0)}),v}var K0=H.S;H.S=function(a,l){nf=X(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Hh(a,l),K0!==null&&K0(a,l)};var _c=Z(null);function Bo(){var a=_c.current;return a!==null?a:si.pooledCache}function Gh(a,l){l===null?Ce(_c,_c.current):Ce(_c,l.pool)}function hm(){var a=Bo();return a===null?null:{parent:Ft._currentValue,pool:a}}var Sc=Error(n(460)),_d=Error(n(474)),uo=Error(n(542)),Sd={then:function(){}};function Q0(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Wv(a,l,p){switch(p=a[p],p===void 0?a.push(l):p!==l&&(l.then(Na,Na),l=p),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Xv(a),a;default:if(typeof l.status=="string")l.then(Na,Na);else{if(a=si,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=l,a.status="pending",a.then(function(v){if(l.status==="pending"){var x=l;x.status="fulfilled",x.value=v}},function(v){if(l.status==="pending"){var x=l;x.status="rejected",x.reason=v}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Xv(a),a}throw Wt=l,Sc}}function wu(a){try{var l=a._init;return l(a._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Wt=p,Sc):p}}var Wt=null;function fm(){if(Wt===null)throw Error(n(459));var a=Wt;return Wt=null,a}function Xv(a){if(a===Sc||a===uo)throw Error(n(483))}var bc=null,xc=0;function dm(a){var l=xc;return xc+=1,bc===null&&(bc=[]),Wv(bc,a,l)}function bd(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function xd(a,l){throw l.$$typeof===_?Error(n(525)):(a=Object.prototype.toString.call(l),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function jh(a){function l(ye,de){if(a){var Me=ye.deletions;Me===null?(ye.deletions=[de],ye.flags|=16):Me.push(de)}}function p(ye,de){if(!a)return null;for(;de!==null;)l(ye,de),de=de.sibling;return null}function v(ye){for(var de=new Map;ye!==null;)ye.key!==null?de.set(ye.key,ye):de.set(ye.index,ye),ye=ye.sibling;return de}function x(ye,de){return ye=Lo(ye,de),ye.index=0,ye.sibling=null,ye}function A(ye,de,Me){return ye.index=Me,a?(Me=ye.alternate,Me!==null?(Me=Me.index,Me<de?(ye.flags|=67108866,de):Me):(ye.flags|=67108866,de)):(ye.flags|=1048576,de)}function F(ye){return a&&ye.alternate===null&&(ye.flags|=67108866),ye}function Q(ye,de,Me,je){return de===null||de.tag!==6?(de=am(Me,ye.mode,je),de.return=ye,de):(de=x(de,Me),de.return=ye,de)}function ue(ye,de,Me,je){var jt=Me.type;return jt===C?Be(ye,de,Me.props.children,je,Me.key):de!==null&&(de.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===V&&wu(jt)===de.type)?(de=x(de,Me.props),bd(de,Me),de.return=ye,de):(de=pd(Me.type,Me.key,Me.props,null,ye.mode,je),bd(de,Me),de.return=ye,de)}function Ae(ye,de,Me,je){return de===null||de.tag!==4||de.stateNode.containerInfo!==Me.containerInfo||de.stateNode.implementation!==Me.implementation?(de=oo(Me,ye.mode,je),de.return=ye,de):(de=x(de,Me.children||[]),de.return=ye,de)}function Be(ye,de,Me,je,jt){return de===null||de.tag!==7?(de=pl(Me,ye.mode,je,jt),de.return=ye,de):(de=x(de,Me),de.return=ye,de)}function Qe(ye,de,Me){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return de=am(""+de,ye.mode,Me),de.return=ye,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case S:return Me=pd(de.type,de.key,de.props,null,ye.mode,Me),bd(Me,de),Me.return=ye,Me;case M:return de=oo(de,ye.mode,Me),de.return=ye,de;case V:return de=wu(de),Qe(ye,de,Me)}if(fe(de)||W(de))return de=pl(de,ye.mode,Me,null),de.return=ye,de;if(typeof de.then=="function")return Qe(ye,dm(de),Me);if(de.$$typeof===I)return Qe(ye,yd(ye,de),Me);xd(ye,de)}return null}function Ne(ye,de,Me,je){var jt=de!==null?de.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return jt!==null?null:Q(ye,de,""+Me,je);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case S:return Me.key===jt?ue(ye,de,Me,je):null;case M:return Me.key===jt?Ae(ye,de,Me,je):null;case V:return Me=wu(Me),Ne(ye,de,Me,je)}if(fe(Me)||W(Me))return jt!==null?null:Be(ye,de,Me,je,null);if(typeof Me.then=="function")return Ne(ye,de,dm(Me),je);if(Me.$$typeof===I)return Ne(ye,de,yd(ye,Me),je);xd(ye,Me)}return null}function Le(ye,de,Me,je,jt){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return ye=ye.get(Me)||null,Q(de,ye,""+je,jt);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case S:return ye=ye.get(je.key===null?Me:je.key)||null,ue(de,ye,je,jt);case M:return ye=ye.get(je.key===null?Me:je.key)||null,Ae(de,ye,je,jt);case V:return je=wu(je),Le(ye,de,Me,je,jt)}if(fe(je)||W(je))return ye=ye.get(Me)||null,Be(de,ye,je,jt,null);if(typeof je.then=="function")return Le(ye,de,Me,dm(je),jt);if(je.$$typeof===I)return Le(ye,de,Me,yd(de,je),jt);xd(de,je)}return null}function Ot(ye,de,Me,je){for(var jt=null,oi=null,kt=de,Mn=de=0,zn=null;kt!==null&&Mn<Me.length;Mn++){kt.index>Mn?(zn=kt,kt=null):zn=kt.sibling;var li=Ne(ye,kt,Me[Mn],je);if(li===null){kt===null&&(kt=zn);break}a&&kt&&li.alternate===null&&l(ye,kt),de=A(li,de,Mn),oi===null?jt=li:oi.sibling=li,oi=li,kt=zn}if(Mn===Me.length)return p(ye,kt),Pn&&ml(ye,Mn),jt;if(kt===null){for(;Mn<Me.length;Mn++)kt=Qe(ye,Me[Mn],je),kt!==null&&(de=A(kt,de,Mn),oi===null?jt=kt:oi.sibling=kt,oi=kt);return Pn&&ml(ye,Mn),jt}for(kt=v(kt);Mn<Me.length;Mn++)zn=Le(kt,ye,Mn,Me[Mn],je),zn!==null&&(a&&zn.alternate!==null&&kt.delete(zn.key===null?Mn:zn.key),de=A(zn,de,Mn),oi===null?jt=zn:oi.sibling=zn,oi=zn);return a&&kt.forEach(function(hf){return l(ye,hf)}),Pn&&ml(ye,Mn),jt}function Zt(ye,de,Me,je){if(Me==null)throw Error(n(151));for(var jt=null,oi=null,kt=de,Mn=de=0,zn=null,li=Me.next();kt!==null&&!li.done;Mn++,li=Me.next()){kt.index>Mn?(zn=kt,kt=null):zn=kt.sibling;var hf=Ne(ye,kt,li.value,je);if(hf===null){kt===null&&(kt=zn);break}a&&kt&&hf.alternate===null&&l(ye,kt),de=A(hf,de,Mn),oi===null?jt=hf:oi.sibling=hf,oi=hf,kt=zn}if(li.done)return p(ye,kt),Pn&&ml(ye,Mn),jt;if(kt===null){for(;!li.done;Mn++,li=Me.next())li=Qe(ye,li.value,je),li!==null&&(de=A(li,de,Mn),oi===null?jt=li:oi.sibling=li,oi=li);return Pn&&ml(ye,Mn),jt}for(kt=v(kt);!li.done;Mn++,li=Me.next())li=Le(kt,ye,Mn,li.value,je),li!==null&&(a&&li.alternate!==null&&kt.delete(li.key===null?Mn:li.key),de=A(li,de,Mn),oi===null?jt=li:oi.sibling=li,oi=li);return a&&kt.forEach(function(JB){return l(ye,JB)}),Pn&&ml(ye,Mn),jt}function Ti(ye,de,Me,je){if(typeof Me=="object"&&Me!==null&&Me.type===C&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case S:e:{for(var jt=Me.key;de!==null;){if(de.key===jt){if(jt=Me.type,jt===C){if(de.tag===7){p(ye,de.sibling),je=x(de,Me.props.children),je.return=ye,ye=je;break e}}else if(de.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===V&&wu(jt)===de.type){p(ye,de.sibling),je=x(de,Me.props),bd(je,Me),je.return=ye,ye=je;break e}p(ye,de);break}else l(ye,de);de=de.sibling}Me.type===C?(je=pl(Me.props.children,ye.mode,je,Me.key),je.return=ye,ye=je):(je=pd(Me.type,Me.key,Me.props,null,ye.mode,je),bd(je,Me),je.return=ye,ye=je)}return F(ye);case M:e:{for(jt=Me.key;de!==null;){if(de.key===jt)if(de.tag===4&&de.stateNode.containerInfo===Me.containerInfo&&de.stateNode.implementation===Me.implementation){p(ye,de.sibling),je=x(de,Me.children||[]),je.return=ye,ye=je;break e}else{p(ye,de);break}else l(ye,de);de=de.sibling}je=oo(Me,ye.mode,je),je.return=ye,ye=je}return F(ye);case V:return Me=wu(Me),Ti(ye,de,Me,je)}if(fe(Me))return Ot(ye,de,Me,je);if(W(Me)){if(jt=W(Me),typeof jt!="function")throw Error(n(150));return Me=jt.call(Me),Zt(ye,de,Me,je)}if(typeof Me.then=="function")return Ti(ye,de,dm(Me),je);if(Me.$$typeof===I)return Ti(ye,de,yd(ye,Me),je);xd(ye,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint"?(Me=""+Me,de!==null&&de.tag===6?(p(ye,de.sibling),je=x(de,Me),je.return=ye,ye=je):(p(ye,de),je=am(Me,ye.mode,je),je.return=ye,ye=je),F(ye)):p(ye,de)}return function(ye,de,Me,je){try{xc=0;var jt=Ti(ye,de,Me,je);return bc=null,jt}catch(kt){if(kt===Sc||kt===uo)throw kt;var oi=hs(29,kt,null,ye.mode);return oi.lanes=je,oi.return=ye,oi}finally{}}}var Au=jh(!0),Z0=jh(!1),Ec=!1;function Kv(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qv(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function zo(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function bl(a,l,p){var v=a.updateQueue;if(v===null)return null;if(v=v.shared,(Vn&2)!==0){var x=v.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),v.pending=l,l=Bh(a),sm(a,null,p),l}return dd(a,v,l,p),Bh(a)}function Tc(a,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194048)!==0)){var v=l.lanes;v&=a.pendingLanes,p|=v,l.lanes=p,os(a,p)}}function pm(a,l){var p=a.updateQueue,v=a.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var x=null,A=null;if(p=p.firstBaseUpdate,p!==null){do{var F={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};A===null?x=A=F:A=A.next=F,p=p.next}while(p!==null);A===null?x=A=l:A=A.next=l}else x=A=l;p={baseState:v.baseState,firstBaseUpdate:x,lastBaseUpdate:A,shared:v.shared,callbacks:v.callbacks},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=l:a.next=l,p.lastBaseUpdate=l}var Zv=!1;function Ed(){if(Zv){var a=co;if(a!==null)throw a}}function Cu(a,l,p,v){Zv=!1;var x=a.updateQueue;Ec=!1;var A=x.firstBaseUpdate,F=x.lastBaseUpdate,Q=x.shared.pending;if(Q!==null){x.shared.pending=null;var ue=Q,Ae=ue.next;ue.next=null,F===null?A=Ae:F.next=Ae,F=ue;var Be=a.alternate;Be!==null&&(Be=Be.updateQueue,Q=Be.lastBaseUpdate,Q!==F&&(Q===null?Be.firstBaseUpdate=Ae:Q.next=Ae,Be.lastBaseUpdate=ue))}if(A!==null){var Qe=x.baseState;F=0,Be=Ae=ue=null,Q=A;do{var Ne=Q.lane&-536870913,Le=Ne!==Q.lane;if(Le?(Nn&Ne)===Ne:(v&Ne)===Ne){Ne!==0&&Ne===Sl&&(Zv=!0),Be!==null&&(Be=Be.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var Ot=a,Zt=Q;Ne=l;var Ti=p;switch(Zt.tag){case 1:if(Ot=Zt.payload,typeof Ot=="function"){Qe=Ot.call(Ti,Qe,Ne);break e}Qe=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Zt.payload,Ne=typeof Ot=="function"?Ot.call(Ti,Qe,Ne):Ot,Ne==null)break e;Qe=g({},Qe,Ne);break e;case 2:Ec=!0}}Ne=Q.callback,Ne!==null&&(a.flags|=64,Le&&(a.flags|=8192),Le=x.callbacks,Le===null?x.callbacks=[Ne]:Le.push(Ne))}else Le={lane:Ne,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Be===null?(Ae=Be=Le,ue=Qe):Be=Be.next=Le,F|=Ne;if(Q=Q.next,Q===null){if(Q=x.shared.pending,Q===null)break;Le=Q,Q=Le.next,Le.next=null,x.lastBaseUpdate=Le,x.shared.pending=null}}while(!0);Be===null&&(ue=Qe),x.baseState=ue,x.firstBaseUpdate=Ae,x.lastBaseUpdate=Be,A===null&&(x.shared.lanes=0),_a|=F,a.lanes=F,a.memoizedState=Qe}}function Fo(a,l){if(typeof a!="function")throw Error(n(191,a));a.call(l)}function Vr(a,l){var p=a.callbacks;if(p!==null)for(a.callbacks=null,a=0;a<p.length;a++)Fo(p[a],l)}var ca=Z(null),ds=Z(0);function Jv(a,l){a=$i,Ce(ds,a),Ce(ca,l),$i=a|l.baseLanes}function $v(){Ce(ds,$i),Ce(ca,ca.current)}function Zr(){$i=ds.current,le(ca),le(ds)}var pr=Z(null),Ua=null;function Mc(a){var l=a.alternate;Ce(Hi,Hi.current&1),Ce(pr,a),Ua===null&&(l===null||ca.current!==null||l.memoizedState!==null)&&(Ua=a)}function ey(a){Ce(Hi,Hi.current),Ce(pr,a),Ua===null&&(Ua=a)}function J0(a){a.tag===22?(Ce(Hi,Hi.current),Ce(pr,a),Ua===null&&(Ua=a)):xl()}function xl(){Ce(Hi,Hi.current),Ce(pr,pr.current)}function ua(a){le(pr),Ua===a&&(Ua=null),le(Hi)}var Hi=Z(0);function mm(a){for(var l=a;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||IM(p)||OM(p)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ps=0,Jt=null,fi=null,ar=null,gm=!1,Ho=!1,Ru=!1,vm=0,Td=0,Go=null,uM=0;function Gi(){throw Error(n(321))}function ty(a,l){if(l===null)return!1;for(var p=0;p<l.length&&p<a.length;p++)if(!Ci(a[p],l[p]))return!1;return!0}function ny(a,l,p,v,x,A){return Ps=A,Jt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=a===null||a.memoizedState===null?yS:Wh,Ru=!1,A=p(v,x),Ru=!1,Ho&&(A=eS(l,p,v,x)),$0(a),A}function $0(a){H.H=Rd;var l=fi!==null&&fi.next!==null;if(Ps=0,ar=fi=Jt=null,gm=!1,Td=0,Go=null,l)throw Error(n(300));a===null||Ri||(a=a.dependencies,a!==null&&Fh(a)&&(Ri=!0))}function eS(a,l,p,v){Jt=a;var x=0;do{if(Ho&&(Go=null),Td=0,Ho=!1,25<=x)throw Error(n(301));if(x+=1,ar=fi=null,a.updateQueue!=null){var A=a.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}H.H=Dd,A=l(p,v)}while(Ho);return A}function hM(){var a=H.H,l=a.useState()[0];return l=typeof l.then=="function"?wd(l):l,a=a.useState()[0],(fi!==null?fi.memoizedState:null)!==a&&(Jt.flags|=1024),l}function iy(){var a=vm!==0;return vm=0,a}function ry(a,l,p){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~p}function sy(a){if(gm){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}gm=!1}Ps=0,ar=fi=Jt=null,Ho=!1,Td=vm=0,Go=null}function ps(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ar===null?Jt.memoizedState=ar=a:ar=ar.next=a,ar}function Ki(){if(fi===null){var a=Jt.alternate;a=a!==null?a.memoizedState:null}else a=fi.next;var l=ar===null?Jt.memoizedState:ar.next;if(l!==null)ar=l,fi=a;else{if(a===null)throw Jt.alternate===null?Error(n(467)):Error(n(310));fi=a,a={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},ar===null?Jt.memoizedState=ar=a:ar=ar.next=a}return ar}function Md(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wd(a){var l=Td;return Td+=1,Go===null&&(Go=[]),a=Wv(Go,a,l),l=Jt,(ar===null?l.memoizedState:ar.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?yS:Wh),a}function ym(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return wd(a);if(a.$$typeof===I)return Ar(a)}throw Error(n(438,String(a)))}function ay(a){var l=null,p=Jt.updateQueue;if(p!==null&&(l=p.memoCache),l==null){var v=Jt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(l={data:v.data.map(function(x){return x.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),p===null&&(p=Md(),Jt.updateQueue=p),p.memoCache=l,p=l.data[l.index],p===void 0)for(p=l.data[l.index]=Array(a),v=0;v<a;v++)p[v]=O;return l.index++,p}function El(a,l){return typeof l=="function"?l(a):l}function _m(a){var l=Ki();return oy(l,fi,a)}function oy(a,l,p){var v=a.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=p;var x=a.baseQueue,A=v.pending;if(A!==null){if(x!==null){var F=x.next;x.next=A.next,A.next=F}l.baseQueue=x=A,v.pending=null}if(A=a.baseState,x===null)a.memoizedState=A;else{l=x.next;var Q=F=null,ue=null,Ae=l,Be=!1;do{var Qe=Ae.lane&-536870913;if(Qe!==Ae.lane?(Nn&Qe)===Qe:(Ps&Qe)===Qe){var Ne=Ae.revertLane;if(Ne===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),Qe===Sl&&(Be=!0);else if((Ps&Ne)===Ne){Ae=Ae.next,Ne===Sl&&(Be=!0);continue}else Qe={lane:0,revertLane:Ae.revertLane,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},ue===null?(Q=ue=Qe,F=A):ue=ue.next=Qe,Jt.lanes|=Ne,_a|=Ne;Qe=Ae.action,Ru&&p(A,Qe),A=Ae.hasEagerState?Ae.eagerState:p(A,Qe)}else Ne={lane:Qe,revertLane:Ae.revertLane,gesture:Ae.gesture,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},ue===null?(Q=ue=Ne,F=A):ue=ue.next=Ne,Jt.lanes|=Qe,_a|=Qe;Ae=Ae.next}while(Ae!==null&&Ae!==l);if(ue===null?F=A:ue.next=Q,!Ci(A,a.memoizedState)&&(Ri=!0,Be&&(p=co,p!==null)))throw p;a.memoizedState=A,a.baseState=F,a.baseQueue=ue,v.lastRenderedState=A}return x===null&&(v.lanes=0),[a.memoizedState,v.dispatch]}function Sm(a){var l=Ki(),p=l.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=a;var v=p.dispatch,x=p.pending,A=l.memoizedState;if(x!==null){p.pending=null;var F=x=x.next;do A=a(A,F.action),F=F.next;while(F!==x);Ci(A,l.memoizedState)||(Ri=!0),l.memoizedState=A,l.baseQueue===null&&(l.baseState=A),p.lastRenderedState=A}return[A,v]}function ly(a,l,p){var v=Jt,x=Ki(),A=Pn;if(A){if(p===void 0)throw Error(n(407));p=p()}else p=l();var F=!Ci((fi||x).memoizedState,p);if(F&&(x.memoizedState=p,Ri=!0),x=x.queue,dy(uy.bind(null,v,x,a),[a]),x.getSnapshot!==l||F||ar!==null&&ar.memoizedState.tag&1){if(v.flags|=2048,qh(9,{destroy:void 0},cy.bind(null,v,x,p,l),null),si===null)throw Error(n(349));A||(Ps&127)!==0||tS(v,l,p)}return p}function tS(a,l,p){a.flags|=16384,a={getSnapshot:l,value:p},l=Jt.updateQueue,l===null?(l=Md(),Jt.updateQueue=l,l.stores=[a]):(p=l.stores,p===null?l.stores=[a]:p.push(a))}function cy(a,l,p,v){l.value=p,l.getSnapshot=v,hy(l)&&bm(a)}function uy(a,l,p){return p(function(){hy(l)&&bm(a)})}function hy(a){var l=a.getSnapshot;a=a.value;try{var p=l();return!Ci(a,p)}catch{return!0}}function bm(a){var l=mc(a,2);l!==null&&f(l,a,2)}function Ad(a){var l=ps();if(typeof a=="function"){var p=a;if(a=p(),Ru){Nt(!0);try{p()}finally{Nt(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:a},l}function nS(a,l,p,v){return a.baseState=p,oy(a,fi,typeof v=="function"?v:El)}function fM(a,l,p,v,x){if(Tl(a))throw Error(n(485));if(a=l.action,a!==null){var A={payload:x,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){A.listeners.push(F)}};H.T!==null?p(!0):A.isTransition=!1,v(A),p=l.pending,p===null?(A.next=l.pending=A,iS(l,A)):(A.next=p.next,l.pending=p.next=A)}}function iS(a,l){var p=l.action,v=l.payload,x=a.state;if(l.isTransition){var A=H.T,F={};H.T=F;try{var Q=p(x,v),ue=H.S;ue!==null&&ue(F,Q),rS(a,l,Q)}catch(Ae){xm(a,l,Ae)}finally{A!==null&&F.types!==null&&(A.types=F.types),H.T=A}}else try{A=p(x,v),rS(a,l,A)}catch(Ae){xm(a,l,Ae)}}function rS(a,l,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){fy(a,l,v)},function(v){return xm(a,l,v)}):fy(a,l,p)}function fy(a,l,p){l.status="fulfilled",l.value=p,sS(l),a.state=p,l=a.pending,l!==null&&(p=l.next,p===l?a.pending=null:(p=p.next,l.next=p,iS(a,p)))}function xm(a,l,p){var v=a.pending;if(a.pending=null,v!==null){v=v.next;do l.status="rejected",l.reason=p,sS(l),l=l.next;while(l!==v)}a.action=null}function sS(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function aS(a,l){return l}function oS(a,l){if(Pn){var p=si.formState;if(p!==null){e:{var v=Jt;if(Pn){if(bi){t:{for(var x=bi,A=wr;x.nodeType!==8;){if(!A){x=null;break t}if(x=Ko(x.nextSibling),x===null){x=null;break t}}A=x.data,x=A==="F!"||A==="F"?x:null}if(x){bi=Ko(x.nextSibling),v=x.data==="F!";break e}}Dn(v)}v=!1}v&&(l=p[0])}}return p=ps(),p.memoizedState=p.baseState=l,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aS,lastRenderedState:l},p.queue=v,p=vS.bind(null,Jt,v),v.dispatch=p,v=Ad(!1),A=Cd.bind(null,Jt,!1,v.queue),v=ps(),x={state:l,dispatch:null,action:a,pending:null},v.queue=x,p=fM.bind(null,Jt,x,A,p),x.dispatch=p,v.memoizedState=a,[l,p,!1]}function lS(a){var l=Ki();return cS(l,fi,a)}function cS(a,l,p){if(l=oy(a,l,aS)[0],a=_m(El)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var v=wd(l)}catch(F){throw F===Sc?uo:F}else v=l;l=Ki();var x=l.queue,A=x.dispatch;return p!==l.memoizedState&&(Jt.flags|=2048,qh(9,{destroy:void 0},dM.bind(null,x,p),null)),[v,A,a]}function dM(a,l){a.action=l}function uS(a){var l=Ki(),p=fi;if(p!==null)return cS(l,p,a);Ki(),l=l.memoizedState,p=Ki();var v=p.queue.dispatch;return p.memoizedState=a,[l,v,!1]}function qh(a,l,p,v){return a={tag:a,create:p,deps:v,inst:l,next:null},l=Jt.updateQueue,l===null&&(l=Md(),Jt.updateQueue=l),p=l.lastEffect,p===null?l.lastEffect=a.next=a:(v=p.next,p.next=a,a.next=v,l.lastEffect=a),a}function hS(){return Ki().memoizedState}function Em(a,l,p,v){var x=ps();Jt.flags|=a,x.memoizedState=qh(1|l,{destroy:void 0},p,v===void 0?null:v)}function Tm(a,l,p,v){var x=Ki();v=v===void 0?null:v;var A=x.memoizedState.inst;fi!==null&&v!==null&&ty(v,fi.memoizedState.deps)?x.memoizedState=qh(l,A,p,v):(Jt.flags|=a,x.memoizedState=qh(1|l,A,p,v))}function fS(a,l){Em(8390656,8,a,l)}function dy(a,l){Tm(2048,8,a,l)}function dS(a){Jt.flags|=4;var l=Jt.updateQueue;if(l===null)l=Md(),Jt.updateQueue=l,l.events=[a];else{var p=l.events;p===null?l.events=[a]:p.push(a)}}function pS(a){var l=Ki().memoizedState;return dS({ref:l,nextImpl:a}),function(){if((Vn&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function mS(a,l){return Tm(4,2,a,l)}function ha(a,l){return Tm(4,4,a,l)}function py(a,l){if(typeof l=="function"){a=a();var p=l(a);return function(){typeof p=="function"?p():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Mm(a,l,p){p=p!=null?p.concat([a]):null,Tm(4,4,py.bind(null,l,a),p)}function wm(){}function my(a,l){var p=Ki();l=l===void 0?null:l;var v=p.memoizedState;return l!==null&&ty(l,v[1])?v[0]:(p.memoizedState=[a,l],a)}function gy(a,l){var p=Ki();l=l===void 0?null:l;var v=p.memoizedState;if(l!==null&&ty(l,v[1]))return v[0];if(v=a(),Ru){Nt(!0);try{a()}finally{Nt(!1)}}return p.memoizedState=[v,l],v}function vy(a,l,p){return p===void 0||(Ps&1073741824)!==0&&(Nn&261930)===0?a.memoizedState=l:(a.memoizedState=p,a=u(),Jt.lanes|=a,_a|=a,p)}function yy(a,l,p,v){return Ci(p,l)?p:ca.current!==null?(a=vy(a,p,v),Ci(a,l)||(Ri=!0),a):(Ps&42)===0||(Ps&1073741824)!==0&&(Nn&261930)===0?(Ri=!0,a.memoizedState=p):(a=u(),Jt.lanes|=a,_a|=a,l)}function _y(a,l,p,v,x){var A=K.p;K.p=A!==0&&8>A?A:8;var F=H.T,Q={};H.T=Q,Cd(a,!1,l,p);try{var ue=x(),Ae=H.S;if(Ae!==null&&Ae(Q,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Be=Yv(ue,v);Yh(a,l,Be,gs(a))}else Yh(a,l,v,gs(a))}catch(Qe){Yh(a,l,{then:function(){},status:"rejected",reason:Qe},gs())}finally{K.p=A,F!==null&&Q.types!==null&&(F.types=Q.types),H.T=F}}function pM(){}function Sy(a,l,p,v){if(a.tag!==5)throw Error(n(476));var x=gS(a).queue;_y(a,x,l,J,p===null?pM:function(){return by(a),p(v)})}function gS(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:J},next:null};var p={};return l.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:p},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function by(a){var l=gS(a);l.next===null&&(l=a.alternate.memoizedState),Yh(a,l.next.queue,{},gs())}function xy(){return Ar(Ly)}function Br(){return Ki().memoizedState}function Ey(){return Ki().memoizedState}function mM(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var p=gs();a=zo(p);var v=bl(l,a,p);v!==null&&(f(v,l,p),Tc(v,l,p)),l={cache:Gv()},a.payload=l;return}l=l.return}}function gM(a,l,p){var v=gs();p={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Tl(a)?Du(l,p):(p=Vh(a,l,p,v),p!==null&&(f(p,a,v),Ls(p,l,v)))}function vS(a,l,p){var v=gs();Yh(a,l,p,v)}function Yh(a,l,p,v){var x={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Tl(a))Du(l,x);else{var A=a.alternate;if(a.lanes===0&&(A===null||A.lanes===0)&&(A=l.lastRenderedReducer,A!==null))try{var F=l.lastRenderedState,Q=A(F,p);if(x.hasEagerState=!0,x.eagerState=Q,Ci(Q,F))return dd(a,l,x,0),si===null&&pc(),!1}catch{}finally{}if(p=Vh(a,l,x,v),p!==null)return f(p,a,v),Ls(p,l,v),!0}return!1}function Cd(a,l,p,v){if(v={lane:2,revertLane:SM(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Tl(a)){if(l)throw Error(n(479))}else l=Vh(a,p,v,2),l!==null&&f(l,a,2)}function Tl(a){var l=a.alternate;return a===Jt||l!==null&&l===Jt}function Du(a,l){Ho=gm=!0;var p=a.pending;p===null?l.next=l:(l.next=p.next,p.next=l),a.pending=l}function Ls(a,l,p){if((p&4194048)!==0){var v=l.lanes;v&=a.pendingLanes,p|=v,l.lanes=p,os(a,p)}}var Rd={readContext:Ar,use:ym,useCallback:Gi,useContext:Gi,useEffect:Gi,useImperativeHandle:Gi,useLayoutEffect:Gi,useInsertionEffect:Gi,useMemo:Gi,useReducer:Gi,useRef:Gi,useState:Gi,useDebugValue:Gi,useDeferredValue:Gi,useTransition:Gi,useSyncExternalStore:Gi,useId:Gi,useHostTransitionStatus:Gi,useFormState:Gi,useActionState:Gi,useOptimistic:Gi,useMemoCache:Gi,useCacheRefresh:Gi};Rd.useEffectEvent=Gi;var yS={readContext:Ar,use:ym,useCallback:function(a,l){return ps().memoizedState=[a,l===void 0?null:l],a},useContext:Ar,useEffect:fS,useImperativeHandle:function(a,l,p){p=p!=null?p.concat([a]):null,Em(4194308,4,py.bind(null,l,a),p)},useLayoutEffect:function(a,l){return Em(4194308,4,a,l)},useInsertionEffect:function(a,l){Em(4,2,a,l)},useMemo:function(a,l){var p=ps();l=l===void 0?null:l;var v=a();if(Ru){Nt(!0);try{a()}finally{Nt(!1)}}return p.memoizedState=[v,l],v},useReducer:function(a,l,p){var v=ps();if(p!==void 0){var x=p(l);if(Ru){Nt(!0);try{p(l)}finally{Nt(!1)}}}else x=l;return v.memoizedState=v.baseState=x,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:x},v.queue=a,a=a.dispatch=gM.bind(null,Jt,a),[v.memoizedState,a]},useRef:function(a){var l=ps();return a={current:a},l.memoizedState=a},useState:function(a){a=Ad(a);var l=a.queue,p=vS.bind(null,Jt,l);return l.dispatch=p,[a.memoizedState,p]},useDebugValue:wm,useDeferredValue:function(a,l){var p=ps();return vy(p,a,l)},useTransition:function(){var a=Ad(!1);return a=_y.bind(null,Jt,a.queue,!0,!1),ps().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,p){var v=Jt,x=ps();if(Pn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=l(),si===null)throw Error(n(349));(Nn&127)!==0||tS(v,l,p)}x.memoizedState=p;var A={value:p,getSnapshot:l};return x.queue=A,fS(uy.bind(null,v,A,a),[a]),v.flags|=2048,qh(9,{destroy:void 0},cy.bind(null,v,A,p,l),null),p},useId:function(){var a=ps(),l=si.identifierPrefix;if(Pn){var p=Vo,v=ko;p=(v&~(1<<32-gt(v)-1)).toString(32)+p,l="_"+l+"R_"+p,p=vm++,0<p&&(l+="H"+p.toString(32)),l+="_"}else p=uM++,l="_"+l+"r_"+p.toString(32)+"_";return a.memoizedState=l},useHostTransitionStatus:xy,useFormState:oS,useActionState:oS,useOptimistic:function(a){var l=ps();l.memoizedState=l.baseState=a;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=p,l=Cd.bind(null,Jt,!0,p),p.dispatch=l,[a,l]},useMemoCache:ay,useCacheRefresh:function(){return ps().memoizedState=mM.bind(null,Jt)},useEffectEvent:function(a){var l=ps(),p={impl:a};return l.memoizedState=p,function(){if((Vn&2)!==0)throw Error(n(440));return p.impl.apply(void 0,arguments)}}},Wh={readContext:Ar,use:ym,useCallback:my,useContext:Ar,useEffect:dy,useImperativeHandle:Mm,useInsertionEffect:mS,useLayoutEffect:ha,useMemo:gy,useReducer:_m,useRef:hS,useState:function(){return _m(El)},useDebugValue:wm,useDeferredValue:function(a,l){var p=Ki();return yy(p,fi.memoizedState,a,l)},useTransition:function(){var a=_m(El)[0],l=Ki().memoizedState;return[typeof a=="boolean"?a:wd(a),l]},useSyncExternalStore:ly,useId:Br,useHostTransitionStatus:xy,useFormState:lS,useActionState:lS,useOptimistic:function(a,l){var p=Ki();return nS(p,fi,a,l)},useMemoCache:ay,useCacheRefresh:Ey};Wh.useEffectEvent=pS;var Dd={readContext:Ar,use:ym,useCallback:my,useContext:Ar,useEffect:dy,useImperativeHandle:Mm,useInsertionEffect:mS,useLayoutEffect:ha,useMemo:gy,useReducer:Sm,useRef:hS,useState:function(){return Sm(El)},useDebugValue:wm,useDeferredValue:function(a,l){var p=Ki();return fi===null?vy(p,a,l):yy(p,fi.memoizedState,a,l)},useTransition:function(){var a=Sm(El)[0],l=Ki().memoizedState;return[typeof a=="boolean"?a:wd(a),l]},useSyncExternalStore:ly,useId:Br,useHostTransitionStatus:xy,useFormState:uS,useActionState:uS,useOptimistic:function(a,l){var p=Ki();return fi!==null?nS(p,fi,a,l):(p.baseState=a,[a,p.queue.dispatch])},useMemoCache:ay,useCacheRefresh:Ey};Dd.useEffectEvent=pS;function Xh(a,l,p,v){l=a.memoizedState,p=p(v,l),p=p==null?l:g({},l,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var Nd={enqueueSetState:function(a,l,p){a=a._reactInternals;var v=gs(),x=zo(v);x.payload=l,p!=null&&(x.callback=p),l=bl(a,x,v),l!==null&&(f(l,a,v),Tc(l,a,v))},enqueueReplaceState:function(a,l,p){a=a._reactInternals;var v=gs(),x=zo(v);x.tag=1,x.payload=l,p!=null&&(x.callback=p),l=bl(a,x,v),l!==null&&(f(l,a,v),Tc(l,a,v))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var p=gs(),v=zo(p);v.tag=2,l!=null&&(v.callback=l),l=bl(a,v,p),l!==null&&(f(l,a,p),Tc(l,a,p))}};function _S(a,l,p,v,x,A,F){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(v,A,F):l.prototype&&l.prototype.isPureReactComponent?!Ih(p,v)||!Ih(x,A):!0}function SS(a,l,p,v){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,v),l.state!==a&&Nd.enqueueReplaceState(l,l.state,null)}function zr(a,l){var p=l;if("ref"in l){p={};for(var v in l)v!=="ref"&&(p[v]=l[v])}if(a=a.defaultProps){p===l&&(p=g({},p));for(var x in a)p[x]===void 0&&(p[x]=a[x])}return p}function Ty(a){dc(a)}function bS(a){console.error(a)}function Am(a){dc(a)}function Cm(a,l){try{var p=a.onUncaughtError;p(l.value,{componentStack:l.stack})}catch(v){setTimeout(function(){throw v})}}function xS(a,l,p){try{var v=a.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function My(a,l,p){return p=zo(p),p.tag=3,p.payload={element:null},p.callback=function(){Cm(a,l)},p}function Kh(a){return a=zo(a),a.tag=3,a}function Us(a,l,p,v){var x=p.type.getDerivedStateFromError;if(typeof x=="function"){var A=v.value;a.payload=function(){return x(A)},a.callback=function(){xS(l,p,v)}}var F=p.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(a.callback=function(){xS(l,p,v),typeof x!="function"&&(Xo===null?Xo=new Set([this]):Xo.add(this));var Q=v.stack;this.componentDidCatch(v.value,{componentStack:Q!==null?Q:""})})}function fa(a,l,p,v,x){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(l=p.alternate,l!==null&&yc(l,p,x,!0),p=pr.current,p!==null){switch(p.tag){case 31:case 13:return Ua===null?an():p.alternate===null&&ai===0&&(ai=3),p.flags&=-257,p.flags|=65536,p.lanes=x,v===Sd?p.flags|=16384:(l=p.updateQueue,l===null?p.updateQueue=new Set([v]):l.add(v),vM(a,v,x)),!1;case 22:return p.flags|=65536,v===Sd?p.flags|=16384:(l=p.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=l):(p=l.retryQueue,p===null?l.retryQueue=new Set([v]):p.add(v)),vM(a,v,x)),!1}throw Error(n(435,p.tag))}return vM(a,v,x),an(),!1}if(Pn)return l=pr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=x,v!==lm&&(a=Error(n(422),{cause:v}),vd(Is(a,p)))):(v!==lm&&(l=Error(n(423),{cause:v}),vd(Is(l,p))),a=a.current.alternate,a.flags|=65536,x&=-x,a.lanes|=x,v=Is(v,p),x=My(a.stateNode,v,x),pm(a,x),ai!==4&&(ai=2)),!1;var A=Error(n(520),{cause:v});if(A=Is(A,p),go===null?go=[A]:go.push(A),ai!==4&&(ai=2),l===null)return!0;v=Is(v,p),p=l;do{switch(p.tag){case 3:return p.flags|=65536,a=x&-x,p.lanes|=a,a=My(p.stateNode,v,a),pm(p,a),!1;case 1:if(l=p.type,A=p.stateNode,(p.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Xo===null||!Xo.has(A))))return p.flags|=65536,x&=-x,p.lanes|=x,x=Kh(x),Us(x,a,p,v),pm(p,x),!1}p=p.return}while(p!==null);return!1}var Rm=Error(n(461)),Ri=!1;function ji(a,l,p,v){l.child=a===null?Z0(l,null,p,v):Au(l,a.child,p,v)}function Id(a,l,p,v,x){p=p.render;var A=l.ref;if("ref"in v){var F={};for(var Q in v)Q!=="ref"&&(F[Q]=v[Q])}else F=v;return Tu(l),v=ny(a,l,p,F,A,x),Q=iy(),a!==null&&!Ri?(ry(a,l,x),po(a,l,x)):(Pn&&Q&&om(l),l.flags|=1,ji(a,l,v,x),l.child)}function Od(a,l,p,v,x){if(a===null){var A=p.type;return typeof A=="function"&&!fs(A)&&A.defaultProps===void 0&&p.compare===null?(l.tag=15,l.type=A,da(a,l,A,v,x)):(a=pd(p.type,null,v,l,l.mode,x),a.ref=l.ref,a.return=l,l.child=a)}if(A=a.child,!Ac(a,x)){var F=A.memoizedProps;if(p=p.compare,p=p!==null?p:Ih,p(F,v)&&a.ref===l.ref)return po(a,l,x)}return l.flags|=1,a=Lo(A,v),a.ref=l.ref,a.return=l,l.child=a}function da(a,l,p,v,x){if(a!==null){var A=a.memoizedProps;if(Ih(A,v)&&a.ref===l.ref)if(Ri=!1,l.pendingProps=v=A,Ac(a,x))(a.flags&131072)!==0&&(Ri=!0);else return l.lanes=a.lanes,po(a,l,x)}return Qh(a,l,p,v,x)}function pa(a,l,p,v){var x=v.children,A=a!==null?a.memoizedState:null;if(a===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((l.flags&128)!==0){if(A=A!==null?A.baseLanes|p:p,a!==null){for(v=l.child=a.child,x=0;v!==null;)x=x|v.lanes|v.childLanes,v=v.sibling;v=x&~A}else v=0,l.child=null;return jo(a,l,A,p,v)}if((p&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&Gh(l,A!==null?A.cachePool:null),A!==null?Jv(l,A):$v(),J0(l);else return v=l.lanes=536870912,jo(a,l,A!==null?A.baseLanes|p:p,p,v)}else A!==null?(Gh(l,A.cachePool),Jv(l,A),xl(),l.memoizedState=null):(a!==null&&Gh(l,null),$v(),xl());return ji(a,l,x,p),l.child}function ho(a,l){return a!==null&&a.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function jo(a,l,p,v,x){var A=Bo();return A=A===null?null:{parent:Ft._currentValue,pool:A},l.memoizedState={baseLanes:p,cachePool:A},a!==null&&Gh(l,null),$v(),J0(l),a!==null&&yc(a,l,v,!0),l.childLanes=x,null}function ka(a,l){return l=Zh({mode:l.mode,children:l.children},a.mode),l.ref=a.ref,a.child=l,l.return=a,l}function Cr(a,l,p){return Au(l,a.child,null,p),a=ka(l,l.pendingProps),a.flags|=2,ua(l),l.memoizedState=null,a}function Pd(a,l,p){var v=l.pendingProps,x=(l.flags&128)!==0;if(l.flags&=-129,a===null){if(Pn){if(v.mode==="hidden")return a=ka(l,v),l.lanes=536870912,ho(null,a);if(ey(l),(a=bi)?(a=mD(a,wr),a=a!==null&&a.data==="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:Uo!==null?{id:ko,overflow:Vo}:null,retryLane:536870912,hydrationErrors:null},p=q0(a),p.return=l,l.child=p,Mr=l,bi=null)):a=null,a===null)throw Dn(l);return l.lanes=536870912,null}return ka(l,v)}var A=a.memoizedState;if(A!==null){var F=A.dehydrated;if(ey(l),x)if(l.flags&256)l.flags&=-257,l=Cr(a,l,p);else if(l.memoizedState!==null)l.child=a.child,l.flags|=128,l=null;else throw Error(n(558));else if(Ri||yc(a,l,p,!1),x=(p&a.childLanes)!==0,Ri||x){if(v=si,v!==null&&(F=to(v,p),F!==0&&F!==A.retryLane))throw A.retryLane=F,mc(a,F),f(v,a,F),Rm;an(),l=Cr(a,l,p)}else a=A.treeContext,bi=Ko(F.nextSibling),Mr=l,Pn=!0,gl=null,wr=!1,a!==null&&gd(l,a),l=ka(l,v),l.flags|=4096;return l}return a=Lo(a.child,{mode:v.mode,children:v.children}),a.ref=l.ref,l.child=a,a.return=l,a}function fo(a,l){var p=l.ref;if(p===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(a===null||a.ref!==p)&&(l.flags|=4194816)}}function Qh(a,l,p,v,x){return Tu(l),p=ny(a,l,p,v,void 0,x),v=iy(),a!==null&&!Ri?(ry(a,l,x),po(a,l,x)):(Pn&&v&&om(l),l.flags|=1,ji(a,l,p,x),l.child)}function Jr(a,l,p,v,x,A){return Tu(l),l.updateQueue=null,p=eS(l,v,p,x),$0(a),v=iy(),a!==null&&!Ri?(ry(a,l,A),po(a,l,A)):(Pn&&v&&om(l),l.flags|=1,ji(a,l,p,A),l.child)}function Fr(a,l,p,v,x){if(Tu(l),l.stateNode===null){var A=gc,F=p.contextType;typeof F=="object"&&F!==null&&(A=Ar(F)),A=new p(v,A),l.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Nd,l.stateNode=A,A._reactInternals=l,A=l.stateNode,A.props=v,A.state=l.memoizedState,A.refs={},Kv(l),F=p.contextType,A.context=typeof F=="object"&&F!==null?Ar(F):gc,A.state=l.memoizedState,F=p.getDerivedStateFromProps,typeof F=="function"&&(Xh(l,p,F,v),A.state=l.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(F=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),F!==A.state&&Nd.enqueueReplaceState(A,A.state,null),Cu(l,v,A,x),Ed(),A.state=l.memoizedState),typeof A.componentDidMount=="function"&&(l.flags|=4194308),v=!0}else if(a===null){A=l.stateNode;var Q=l.memoizedProps,ue=zr(p,Q);A.props=ue;var Ae=A.context,Be=p.contextType;F=gc,typeof Be=="object"&&Be!==null&&(F=Ar(Be));var Qe=p.getDerivedStateFromProps;Be=typeof Qe=="function"||typeof A.getSnapshotBeforeUpdate=="function",Q=l.pendingProps!==Q,Be||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(Q||Ae!==F)&&SS(l,A,v,F),Ec=!1;var Ne=l.memoizedState;A.state=Ne,Cu(l,v,A,x),Ed(),Ae=l.memoizedState,Q||Ne!==Ae||Ec?(typeof Qe=="function"&&(Xh(l,p,Qe,v),Ae=l.memoizedState),(ue=Ec||_S(l,p,ue,v,Ne,Ae,F))?(Be||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(l.flags|=4194308)):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=Ae),A.props=v,A.state=Ae,A.context=F,v=ue):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{A=l.stateNode,Qv(a,l),F=l.memoizedProps,Be=zr(p,F),A.props=Be,Qe=l.pendingProps,Ne=A.context,Ae=p.contextType,ue=gc,typeof Ae=="object"&&Ae!==null&&(ue=Ar(Ae)),Q=p.getDerivedStateFromProps,(Ae=typeof Q=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(F!==Qe||Ne!==ue)&&SS(l,A,v,ue),Ec=!1,Ne=l.memoizedState,A.state=Ne,Cu(l,v,A,x),Ed();var Le=l.memoizedState;F!==Qe||Ne!==Le||Ec||a!==null&&a.dependencies!==null&&Fh(a.dependencies)?(typeof Q=="function"&&(Xh(l,p,Q,v),Le=l.memoizedState),(Be=Ec||_S(l,p,Be,v,Ne,Le,ue)||a!==null&&a.dependencies!==null&&Fh(a.dependencies))?(Ae||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(v,Le,ue),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(v,Le,ue)),typeof A.componentDidUpdate=="function"&&(l.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof A.componentDidUpdate!="function"||F===a.memoizedProps&&Ne===a.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||F===a.memoizedProps&&Ne===a.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=Le),A.props=v,A.state=Le,A.context=ue,v=Be):(typeof A.componentDidUpdate!="function"||F===a.memoizedProps&&Ne===a.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||F===a.memoizedProps&&Ne===a.memoizedState||(l.flags|=1024),v=!1)}return A=v,fo(a,l),v=(l.flags&128)!==0,A||v?(A=l.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:A.render(),l.flags|=1,a!==null&&v?(l.child=Au(l,a.child,null,x),l.child=Au(l,null,p,x)):ji(a,l,p,x),l.memoizedState=A.state,a=l.child):a=po(a,l,x),a}function qn(a,l,p,v){return Eu(),l.flags|=256,ji(a,l,p,v),l.child}var ma={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Va(a){return{baseLanes:a,cachePool:hm()}}function Ld(a,l,p){return a=a!==null?a.childLanes&~p:0,l&&(a|=Bn),a}function ga(a,l,p){var v=l.pendingProps,x=!1,A=(l.flags&128)!==0,F;if((F=A)||(F=a!==null&&a.memoizedState===null?!1:(Hi.current&2)!==0),F&&(x=!0,l.flags&=-129),F=(l.flags&32)!==0,l.flags&=-33,a===null){if(Pn){if(x?Mc(l):xl(),(a=bi)?(a=mD(a,wr),a=a!==null&&a.data!=="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:Uo!==null?{id:ko,overflow:Vo}:null,retryLane:536870912,hydrationErrors:null},p=q0(a),p.return=l,l.child=p,Mr=l,bi=null)):a=null,a===null)throw Dn(l);return OM(a)?l.lanes=32:l.lanes=536870912,null}var Q=v.children;return v=v.fallback,x?(xl(),x=l.mode,Q=Zh({mode:"hidden",children:Q},x),v=pl(v,x,p,null),Q.return=l,v.return=l,Q.sibling=v,l.child=Q,v=l.child,v.memoizedState=Va(p),v.childLanes=Ld(a,F,p),l.memoizedState=ma,ho(null,v)):(Mc(l),wc(l,Q))}var ue=a.memoizedState;if(ue!==null&&(Q=ue.dehydrated,Q!==null)){if(A)l.flags&256?(Mc(l),l.flags&=-257,l=Jh(a,l,p)):l.memoizedState!==null?(xl(),l.child=a.child,l.flags|=128,l=null):(xl(),Q=v.fallback,x=l.mode,v=Zh({mode:"visible",children:v.children},x),Q=pl(Q,x,p,null),Q.flags|=2,v.return=l,Q.return=l,v.sibling=Q,l.child=v,Au(l,a.child,null,p),v=l.child,v.memoizedState=Va(p),v.childLanes=Ld(a,F,p),l.memoizedState=ma,l=ho(null,v));else if(Mc(l),OM(Q)){if(F=Q.nextSibling&&Q.nextSibling.dataset,F)var Ae=F.dgst;F=Ae,v=Error(n(419)),v.stack="",v.digest=F,vd({value:v,source:null,stack:null}),l=Jh(a,l,p)}else if(Ri||yc(a,l,p,!1),F=(p&a.childLanes)!==0,Ri||F){if(F=si,F!==null&&(v=to(F,p),v!==0&&v!==ue.retryLane))throw ue.retryLane=v,mc(a,v),f(F,a,v),Rm;IM(Q)||an(),l=Jh(a,l,p)}else IM(Q)?(l.flags|=192,l.child=a.child,l=null):(a=ue.treeContext,bi=Ko(Q.nextSibling),Mr=l,Pn=!0,gl=null,wr=!1,a!==null&&gd(l,a),l=wc(l,v.children),l.flags|=4096);return l}return x?(xl(),Q=v.fallback,x=l.mode,ue=a.child,Ae=ue.sibling,v=Lo(ue,{mode:"hidden",children:v.children}),v.subtreeFlags=ue.subtreeFlags&65011712,Ae!==null?Q=Lo(Ae,Q):(Q=pl(Q,x,p,null),Q.flags|=2),Q.return=l,v.return=l,v.sibling=Q,l.child=v,ho(null,v),v=l.child,Q=a.child.memoizedState,Q===null?Q=Va(p):(x=Q.cachePool,x!==null?(ue=Ft._currentValue,x=x.parent!==ue?{parent:ue,pool:ue}:x):x=hm(),Q={baseLanes:Q.baseLanes|p,cachePool:x}),v.memoizedState=Q,v.childLanes=Ld(a,F,p),l.memoizedState=ma,ho(a.child,v)):(Mc(l),p=a.child,a=p.sibling,p=Lo(p,{mode:"visible",children:v.children}),p.return=l,p.sibling=null,a!==null&&(F=l.deletions,F===null?(l.deletions=[a],l.flags|=16):F.push(a)),l.child=p,l.memoizedState=null,p)}function wc(a,l){return l=Zh({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function Zh(a,l){return a=hs(22,a,null,l),a.lanes=0,a}function Jh(a,l,p){return Au(l,a.child,null,p),a=wc(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function Nu(a,l,p){a.lanes|=l;var v=a.alternate;v!==null&&(v.lanes|=l),_l(a.return,l,p)}function Ud(a,l,p,v,x,A){var F=a.memoizedState;F===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:x,treeForkCount:A}:(F.isBackwards=l,F.rendering=null,F.renderingStartTime=0,F.last=v,F.tail=p,F.tailMode=x,F.treeForkCount=A)}function kd(a,l,p){var v=l.pendingProps,x=v.revealOrder,A=v.tail;v=v.children;var F=Hi.current,Q=(F&2)!==0;if(Q?(F=F&1|2,l.flags|=128):F&=1,Ce(Hi,F),ji(a,l,v,p),v=Pn?zh:0,!Q&&a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Nu(a,p,l);else if(a.tag===19)Nu(a,p,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(x){case"forwards":for(p=l.child,x=null;p!==null;)a=p.alternate,a!==null&&mm(a)===null&&(x=p),p=p.sibling;p=x,p===null?(x=l.child,l.child=null):(x=p.sibling,p.sibling=null),Ud(l,!1,x,p,A,v);break;case"backwards":case"unstable_legacy-backwards":for(p=null,x=l.child,l.child=null;x!==null;){if(a=x.alternate,a!==null&&mm(a)===null){l.child=x;break}a=x.sibling,x.sibling=p,p=x,x=a}Ud(l,!0,p,null,A,v);break;case"together":Ud(l,!1,null,null,void 0,v);break;default:l.memoizedState=null}return l.child}function po(a,l,p){if(a!==null&&(l.dependencies=a.dependencies),_a|=l.lanes,(p&l.childLanes)===0)if(a!==null){if(yc(a,l,p,!1),(p&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(n(153));if(l.child!==null){for(a=l.child,p=Lo(a,a.pendingProps),l.child=p,p.return=l;a.sibling!==null;)a=a.sibling,p=p.sibling=Lo(a,a.pendingProps),p.return=l;p.sibling=null}return l.child}function Ac(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&Fh(a)))}function Vd(a,l,p){switch(l.tag){case 3:rt(l,l.stateNode.containerInfo),yl(l,Ft,a.memoizedState.cache),Eu();break;case 27:case 5:bt(l);break;case 4:rt(l,l.stateNode.containerInfo);break;case 10:yl(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,ey(l),null;break;case 13:var v=l.memoizedState;if(v!==null)return v.dehydrated!==null?(Mc(l),l.flags|=128,null):(p&l.child.childLanes)!==0?ga(a,l,p):(Mc(l),a=po(a,l,p),a!==null?a.sibling:null);Mc(l);break;case 19:var x=(a.flags&128)!==0;if(v=(p&l.childLanes)!==0,v||(yc(a,l,p,!1),v=(p&l.childLanes)!==0),x){if(v)return kd(a,l,p);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Ce(Hi,Hi.current),v)break;return null;case 22:return l.lanes=0,pa(a,l,p,l.pendingProps);case 24:yl(l,Ft,a.memoizedState.cache)}return po(a,l,p)}function Dm(a,l,p){if(a!==null)if(a.memoizedProps!==l.pendingProps)Ri=!0;else{if(!Ac(a,p)&&(l.flags&128)===0)return Ri=!1,Vd(a,l,p);Ri=(a.flags&131072)!==0}else Ri=!1,Pn&&(l.flags&1048576)!==0&&Vv(l,zh,l.index);switch(l.lanes=0,l.tag){case 16:e:{var v=l.pendingProps;if(a=wu(l.elementType),l.type=a,typeof a=="function")fs(a)?(v=zr(a,v),l.tag=1,l=Fr(null,l,a,v,p)):(l.tag=0,l=Qh(null,l,a,v,p));else{if(a!=null){var x=a.$$typeof;if(x===L){l.tag=11,l=Id(null,l,a,v,p);break e}else if(x===k){l.tag=14,l=Od(null,l,a,v,p);break e}}throw l=he(a)||a,Error(n(306,l,""))}}return l;case 0:return Qh(a,l,l.type,l.pendingProps,p);case 1:return v=l.type,x=zr(v,l.pendingProps),Fr(a,l,v,x,p);case 3:e:{if(rt(l,l.stateNode.containerInfo),a===null)throw Error(n(387));v=l.pendingProps;var A=l.memoizedState;x=A.element,Qv(a,l),Cu(l,v,null,p);var F=l.memoizedState;if(v=F.cache,yl(l,Ft,v),v!==A.cache&&um(l,[Ft],p,!0),Ed(),v=F.element,A.isDehydrated)if(A={element:v,isDehydrated:!1,cache:F.cache},l.updateQueue.baseState=A,l.memoizedState=A,l.flags&256){l=qn(a,l,v,p);break e}else if(v!==x){x=Is(Error(n(424)),l),vd(x),l=qn(a,l,v,p);break e}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(bi=Ko(a.firstChild),Mr=l,Pn=!0,gl=null,wr=!0,p=Z0(l,null,v,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Eu(),v===x){l=po(a,l,p);break e}ji(a,l,v,p)}l=l.child}return l;case 26:return fo(a,l),a===null?(p=bD(l.type,null,l.pendingProps,null))?l.memoizedState=p:Pn||(p=l.type,a=l.pendingProps,v=DS(xe.current).createElement(p),v[hn]=l,v[Ii]=a,vs(v,p,a),Ke(v),l.stateNode=v):l.memoizedState=bD(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return bt(l),a===null&&Pn&&(v=l.stateNode=yD(l.type,l.pendingProps,xe.current),Mr=l,wr=!0,x=bi,af(l.type)?(PM=x,bi=Ko(v.firstChild)):bi=x),ji(a,l,l.pendingProps.children,p),fo(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&Pn&&((x=v=bi)&&(v=CB(v,l.type,l.pendingProps,wr),v!==null?(l.stateNode=v,Mr=l,bi=Ko(v.firstChild),wr=!1,x=!0):x=!1),x||Dn(l)),bt(l),x=l.type,A=l.pendingProps,F=a!==null?a.memoizedProps:null,v=A.children,RM(x,A)?v=null:F!==null&&RM(x,F)&&(l.flags|=32),l.memoizedState!==null&&(x=ny(a,l,hM,null,null,p),Ly._currentValue=x),fo(a,l),ji(a,l,v,p),l.child;case 6:return a===null&&Pn&&((a=p=bi)&&(p=RB(p,l.pendingProps,wr),p!==null?(l.stateNode=p,Mr=l,bi=null,a=!0):a=!1),a||Dn(l)),null;case 13:return ga(a,l,p);case 4:return rt(l,l.stateNode.containerInfo),v=l.pendingProps,a===null?l.child=Au(l,null,v,p):ji(a,l,v,p),l.child;case 11:return Id(a,l,l.type,l.pendingProps,p);case 7:return ji(a,l,l.pendingProps,p),l.child;case 8:return ji(a,l,l.pendingProps.children,p),l.child;case 12:return ji(a,l,l.pendingProps.children,p),l.child;case 10:return v=l.pendingProps,yl(l,l.type,v.value),ji(a,l,v.children,p),l.child;case 9:return x=l.type._context,v=l.pendingProps.children,Tu(l),x=Ar(x),v=v(x),l.flags|=1,ji(a,l,v,p),l.child;case 14:return Od(a,l,l.type,l.pendingProps,p);case 15:return da(a,l,l.type,l.pendingProps,p);case 19:return kd(a,l,p);case 31:return Pd(a,l,p);case 22:return pa(a,l,p,l.pendingProps);case 24:return Tu(l),v=Ar(Ft),a===null?(x=Bo(),x===null&&(x=si,A=Gv(),x.pooledCache=A,A.refCount++,A!==null&&(x.pooledCacheLanes|=p),x=A),l.memoizedState={parent:v,cache:x},Kv(l),yl(l,Ft,x)):((a.lanes&p)!==0&&(Qv(a,l),Cu(l,null,null,p),Ed()),x=a.memoizedState,A=l.memoizedState,x.parent!==v?(x={parent:v,cache:v},l.memoizedState=x,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=x),yl(l,Ft,v)):(v=A.cache,yl(l,Ft,v),v!==x.cache&&um(l,[Ft],p,!0))),ji(a,l,l.pendingProps.children,p),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function ks(a){a.flags|=4}function Cc(a,l,p,v,x){if((l=(a.mode&32)!==0)&&(l=!1),l){if(a.flags|=16777216,(x&335544128)===x)if(a.stateNode.complete)a.flags|=8192;else if(ut())a.flags|=8192;else throw Wt=Sd,_d}else a.flags&=-16777217}function Ml(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!wD(l))if(ut())a.flags|=8192;else throw Wt=Sd,_d}function $h(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?In():536870912,a.lanes|=l,Sa|=l)}function Bd(a,l){if(!Pn)switch(a.tailMode){case"hidden":l=a.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:v.sibling=null}}function ci(a){var l=a.alternate!==null&&a.alternate.child===a.child,p=0,v=0;if(l)for(var x=a.child;x!==null;)p|=x.lanes|x.childLanes,v|=x.subtreeFlags&65011712,v|=x.flags&65011712,x.return=a,x=x.sibling;else for(x=a.child;x!==null;)p|=x.lanes|x.childLanes,v|=x.subtreeFlags,v|=x.flags,x.return=a,x=x.sibling;return a.subtreeFlags|=v,a.childLanes=p,l}function wy(a,l,p){var v=l.pendingProps;switch(vc(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ci(l),null;case 1:return ci(l),null;case 3:return p=l.stateNode,v=null,a!==null&&(v=a.memoizedState.cache),l.memoizedState.cache!==v&&(l.flags|=2048),La(Ft),ft(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(a===null||a.child===null)&&(xu(l)?ks(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Bv())),ci(l),null;case 26:var x=l.type,A=l.memoizedState;return a===null?(ks(l),A!==null?(ci(l),Ml(l,A)):(ci(l),Cc(l,x,null,v,p))):A?A!==a.memoizedState?(ks(l),ci(l),Ml(l,A)):(ci(l),l.flags&=-16777217):(a=a.memoizedProps,a!==v&&ks(l),ci(l),Cc(l,x,a,v,p)),null;case 27:if(en(l),p=xe.current,x=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==v&&ks(l);else{if(!v){if(l.stateNode===null)throw Error(n(166));return ci(l),null}a=Te.current,xu(l)?cm(l):(a=yD(x,v,p),l.stateNode=a,ks(l))}return ci(l),null;case 5:if(en(l),x=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==v&&ks(l);else{if(!v){if(l.stateNode===null)throw Error(n(166));return ci(l),null}if(A=Te.current,xu(l))cm(l);else{var F=DS(xe.current);switch(A){case 1:A=F.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:A=F.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":A=F.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":A=F.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":A=F.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof v.is=="string"?F.createElement("select",{is:v.is}):F.createElement("select"),v.multiple?A.multiple=!0:v.size&&(A.size=v.size);break;default:A=typeof v.is=="string"?F.createElement(x,{is:v.is}):F.createElement(x)}}A[hn]=l,A[Ii]=v;e:for(F=l.child;F!==null;){if(F.tag===5||F.tag===6)A.appendChild(F.stateNode);else if(F.tag!==4&&F.tag!==27&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===l)break e;for(;F.sibling===null;){if(F.return===null||F.return===l)break e;F=F.return}F.sibling.return=F.return,F=F.sibling}l.stateNode=A;e:switch(vs(A,x,v),x){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&ks(l)}}return ci(l),Cc(l,l.type,a===null?null:a.memoizedProps,l.pendingProps,p),null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==v&&ks(l);else{if(typeof v!="string"&&l.stateNode===null)throw Error(n(166));if(a=xe.current,xu(l)){if(a=l.stateNode,p=l.memoizedProps,v=null,x=Mr,x!==null)switch(x.tag){case 27:case 5:v=x.memoizedProps}a[hn]=l,a=!!(a.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||oD(a.nodeValue,p)),a||Dn(l,!0)}else a=DS(a).createTextNode(v),a[hn]=l,l.stateNode=a}return ci(l),null;case 31:if(p=l.memoizedState,a===null||a.memoizedState!==null){if(v=xu(l),p!==null){if(a===null){if(!v)throw Error(n(318));if(a=l.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[hn]=l}else Eu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ci(l),a=!1}else p=Bv(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=p),a=!0;if(!a)return l.flags&256?(ua(l),l):(ua(l),null);if((l.flags&128)!==0)throw Error(n(558))}return ci(l),null;case 13:if(v=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(x=xu(l),v!==null&&v.dehydrated!==null){if(a===null){if(!x)throw Error(n(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[hn]=l}else Eu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ci(l),x=!1}else x=Bv(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=x),x=!0;if(!x)return l.flags&256?(ua(l),l):(ua(l),null)}return ua(l),(l.flags&128)!==0?(l.lanes=p,l):(p=v!==null,a=a!==null&&a.memoizedState!==null,p&&(v=l.child,x=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(x=v.alternate.memoizedState.cachePool.pool),A=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(A=v.memoizedState.cachePool.pool),A!==x&&(v.flags|=2048)),p!==a&&p&&(l.child.flags|=8192),$h(l,l.updateQueue),ci(l),null);case 4:return ft(),a===null&&TM(l.stateNode.containerInfo),ci(l),null;case 10:return La(l.type),ci(l),null;case 19:if(le(Hi),v=l.memoizedState,v===null)return ci(l),null;if(x=(l.flags&128)!==0,A=v.rendering,A===null)if(x)Bd(v,!1);else{if(ai!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(A=mm(a),A!==null){for(l.flags|=128,Bd(v,!1),a=A.updateQueue,l.updateQueue=a,$h(l,a),l.subtreeFlags=0,a=p,p=l.child;p!==null;)Kr(p,a),p=p.sibling;return Ce(Hi,Hi.current&1|2),Pn&&ml(l,v.treeForkCount),l.child}a=a.sibling}v.tail!==null&&X()>ba&&(l.flags|=128,x=!0,Bd(v,!1),l.lanes=4194304)}else{if(!x)if(a=mm(A),a!==null){if(l.flags|=128,x=!0,a=a.updateQueue,l.updateQueue=a,$h(l,a),Bd(v,!0),v.tail===null&&v.tailMode==="hidden"&&!A.alternate&&!Pn)return ci(l),null}else 2*X()-v.renderingStartTime>ba&&p!==536870912&&(l.flags|=128,x=!0,Bd(v,!1),l.lanes=4194304);v.isBackwards?(A.sibling=l.child,l.child=A):(a=v.last,a!==null?a.sibling=A:l.child=A,v.last=A)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=X(),a.sibling=null,p=Hi.current,Ce(Hi,x?p&1|2:p&1),Pn&&ml(l,v.treeForkCount),a):(ci(l),null);case 22:case 23:return ua(l),Zr(),v=l.memoizedState!==null,a!==null?a.memoizedState!==null!==v&&(l.flags|=8192):v&&(l.flags|=8192),v?(p&536870912)!==0&&(l.flags&128)===0&&(ci(l),l.subtreeFlags&6&&(l.flags|=8192)):ci(l),p=l.updateQueue,p!==null&&$h(l,p.retryQueue),p=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),v=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==p&&(l.flags|=2048),a!==null&&le(_c),null;case 24:return p=null,a!==null&&(p=a.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),La(Ft),ci(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function Nm(a,l){switch(vc(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return La(Ft),ft(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return en(l),null;case 31:if(l.memoizedState!==null){if(ua(l),l.alternate===null)throw Error(n(340));Eu()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 13:if(ua(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Eu()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return le(Hi),null;case 4:return ft(),null;case 10:return La(l.type),null;case 22:case 23:return ua(l),Zr(),a!==null&&le(_c),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return La(Ft),null;case 25:return null;default:return null}}function Iu(a,l){switch(vc(l),l.tag){case 3:La(Ft),ft();break;case 26:case 27:case 5:en(l);break;case 4:ft();break;case 31:l.memoizedState!==null&&ua(l);break;case 13:ua(l);break;case 19:le(Hi);break;case 10:La(l.type);break;case 22:case 23:ua(l),Zr(),a!==null&&le(_c);break;case 24:La(Ft)}}function qo(a,l){try{var p=l.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var x=v.next;p=x;do{if((p.tag&a)===a){v=void 0;var A=p.create,F=p.inst;v=A(),F.destroy=v}p=p.next}while(p!==x)}}catch(Q){gi(l,l.return,Q)}}function Ba(a,l,p){try{var v=l.updateQueue,x=v!==null?v.lastEffect:null;if(x!==null){var A=x.next;v=A;do{if((v.tag&a)===a){var F=v.inst,Q=F.destroy;if(Q!==void 0){F.destroy=void 0,x=l;var ue=p,Ae=Q;try{Ae()}catch(Be){gi(x,ue,Be)}}}v=v.next}while(v!==A)}}catch(Be){gi(l,l.return,Be)}}function Rc(a){var l=a.updateQueue;if(l!==null){var p=a.stateNode;try{Vr(l,p)}catch(v){gi(a,a.return,v)}}}function Ay(a,l,p){p.props=zr(a.type,a.memoizedProps),p.state=a.memoizedState;try{p.componentWillUnmount()}catch(v){gi(a,l,v)}}function Yo(a,l){try{var p=a.ref;if(p!==null){switch(a.tag){case 26:case 27:case 5:var v=a.stateNode;break;case 30:v=a.stateNode;break;default:v=a.stateNode}typeof p=="function"?a.refCleanup=p(v):p.current=v}}catch(x){gi(a,l,x)}}function va(a,l){var p=a.ref,v=a.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(x){gi(a,l,x)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(x){gi(a,l,x)}else p.current=null}function ya(a){var l=a.type,p=a.memoizedProps,v=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(x){gi(a,a.return,x)}}function za(a,l,p){try{var v=a.stateNode;xB(v,a.type,p,l),v[Ii]=l}catch(x){gi(a,a.return,x)}}function or(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&af(a.type)||a.tag===4}function Wo(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||or(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&af(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function gn(a,l,p){var v=a.tag;if(v===5||v===6)a=a.stateNode,l?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(a,l):(l=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,l.appendChild(a),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=Na));else if(v!==4&&(v===27&&af(a.type)&&(p=a.stateNode,l=null),a=a.child,a!==null))for(gn(a,l,p),a=a.sibling;a!==null;)gn(a,l,p),a=a.sibling}function Jn(a,l,p){var v=a.tag;if(v===5||v===6)a=a.stateNode,l?p.insertBefore(a,l):p.appendChild(a);else if(v!==4&&(v===27&&af(a.type)&&(p=a.stateNode),a=a.child,a!==null))for(Jn(a,l,p),a=a.sibling;a!==null;)Jn(a,l,p),a=a.sibling}function Qi(a){var l=a.stateNode,p=a.memoizedProps;try{for(var v=a.type,x=l.attributes;x.length;)l.removeAttributeNode(x[0]);vs(l,v,p),l[hn]=a,l[Ii]=p}catch(A){gi(a,a.return,A)}}var Fa=!1,Di=!1,wl=!1,zd=typeof WeakSet=="function"?WeakSet:Set,qi=null;function ef(a,l){if(a=a.containerInfo,AM=kS,a=$p(a),Oh(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var x=v.anchorOffset,A=v.focusNode;v=v.focusOffset;try{p.nodeType,A.nodeType}catch{p=null;break e}var F=0,Q=-1,ue=-1,Ae=0,Be=0,Qe=a,Ne=null;t:for(;;){for(var Le;Qe!==p||x!==0&&Qe.nodeType!==3||(Q=F+x),Qe!==A||v!==0&&Qe.nodeType!==3||(ue=F+v),Qe.nodeType===3&&(F+=Qe.nodeValue.length),(Le=Qe.firstChild)!==null;)Ne=Qe,Qe=Le;for(;;){if(Qe===a)break t;if(Ne===p&&++Ae===x&&(Q=F),Ne===A&&++Be===v&&(ue=F),(Le=Qe.nextSibling)!==null)break;Qe=Ne,Ne=Qe.parentNode}Qe=Le}p=Q===-1||ue===-1?null:{start:Q,end:ue}}else p=null}p=p||{start:0,end:0}}else p=null;for(CM={focusedElem:a,selectionRange:p},kS=!1,qi=l;qi!==null;)if(l=qi,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,qi=a;else for(;qi!==null;){switch(l=qi,A=l.alternate,a=l.flags,l.tag){case 0:if((a&4)!==0&&(a=l.updateQueue,a=a!==null?a.events:null,a!==null))for(p=0;p<a.length;p++)x=a[p],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&A!==null){a=void 0,p=l,x=A.memoizedProps,A=A.memoizedState,v=p.stateNode;try{var Ot=zr(p.type,x);a=v.getSnapshotBeforeUpdate(Ot,A),v.__reactInternalSnapshotBeforeUpdate=a}catch(Zt){gi(p,p.return,Zt)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,p=a.nodeType,p===9)NM(a);else if(p===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":NM(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=l.sibling,a!==null){a.return=l.return,qi=a;break}qi=l.return}}function ES(a,l,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:Al(a,p),v&4&&qo(5,p);break;case 1:if(Al(a,p),v&4)if(a=p.stateNode,l===null)try{a.componentDidMount()}catch(F){gi(p,p.return,F)}else{var x=zr(p.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(x,l,a.__reactInternalSnapshotBeforeUpdate)}catch(F){gi(p,p.return,F)}}v&64&&Rc(p),v&512&&Yo(p,p.return);break;case 3:if(Al(a,p),v&64&&(a=p.updateQueue,a!==null)){if(l=null,p.child!==null)switch(p.child.tag){case 27:case 5:l=p.child.stateNode;break;case 1:l=p.child.stateNode}try{Vr(a,l)}catch(F){gi(p,p.return,F)}}break;case 27:l===null&&v&4&&Qi(p);case 26:case 5:Al(a,p),l===null&&v&4&&ya(p),v&512&&Yo(p,p.return);break;case 12:Al(a,p);break;case 31:Al(a,p),v&4&&Om(a,p);break;case 13:Al(a,p),v&4&&Cy(a,p),v&64&&(a=p.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(p=uB.bind(null,p),DB(a,p))));break;case 22:if(v=p.memoizedState!==null||Fa,!v){l=l!==null&&l.memoizedState!==null||Di,x=Fa;var A=Di;Fa=v,(Di=l)&&!A?ri(a,p,(p.subtreeFlags&8772)!==0):Al(a,p),Fa=x,Di=A}break;case 30:break;default:Al(a,p)}}function Im(a){var l=a.alternate;l!==null&&(a.alternate=null,Im(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&$(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Yn=null,lr=!1;function $r(a,l,p){for(p=p.child;p!==null;)Dc(a,l,p),p=p.sibling}function Dc(a,l,p){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(Ze,p)}catch{}switch(p.tag){case 26:Di||va(p,l),$r(a,l,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Di||va(p,l);var v=Yn,x=lr;af(p.type)&&(Yn=p.stateNode,lr=!1),$r(a,l,p),Iy(p.stateNode),Yn=v,lr=x;break;case 5:Di||va(p,l);case 6:if(v=Yn,x=lr,Yn=null,$r(a,l,p),Yn=v,lr=x,Yn!==null)if(lr)try{(Yn.nodeType===9?Yn.body:Yn.nodeName==="HTML"?Yn.ownerDocument.body:Yn).removeChild(p.stateNode)}catch(A){gi(p,l,A)}else try{Yn.removeChild(p.stateNode)}catch(A){gi(p,l,A)}break;case 18:Yn!==null&&(lr?(a=Yn,dD(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,p.stateNode),jm(a)):dD(Yn,p.stateNode));break;case 4:v=Yn,x=lr,Yn=p.stateNode.containerInfo,lr=!0,$r(a,l,p),Yn=v,lr=x;break;case 0:case 11:case 14:case 15:Ba(2,p,l),Di||Ba(4,p,l),$r(a,l,p);break;case 1:Di||(va(p,l),v=p.stateNode,typeof v.componentWillUnmount=="function"&&Ay(p,l,v)),$r(a,l,p);break;case 21:$r(a,l,p);break;case 22:Di=(v=Di)||p.memoizedState!==null,$r(a,l,p),Di=v;break;default:$r(a,l,p)}}function Om(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{jm(a)}catch(p){gi(l,l.return,p)}}}function Cy(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{jm(a)}catch(p){gi(l,l.return,p)}}function TS(a){switch(a.tag){case 31:case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new zd),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new zd),l;default:throw Error(n(435,a.tag))}}function Zi(a,l){var p=TS(a);l.forEach(function(v){if(!p.has(v)){p.add(v);var x=hB.bind(null,a,v);v.then(x,x)}})}function es(a,l){var p=l.deletions;if(p!==null)for(var v=0;v<p.length;v++){var x=p[v],A=a,F=l,Q=F;e:for(;Q!==null;){switch(Q.tag){case 27:if(af(Q.type)){Yn=Q.stateNode,lr=!1;break e}break;case 5:Yn=Q.stateNode,lr=!1;break e;case 3:case 4:Yn=Q.stateNode.containerInfo,lr=!0;break e}Q=Q.return}if(Yn===null)throw Error(n(160));Dc(A,F,x),Yn=null,lr=!1,A=x.alternate,A!==null&&(A.return=null),x.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Nc(l,a),l=l.sibling}var Vs=null;function Nc(a,l){var p=a.alternate,v=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:es(l,a),Yi(a),v&4&&(Ba(3,a,a.return),qo(3,a),Ba(5,a,a.return));break;case 1:es(l,a),Yi(a),v&512&&(Di||p===null||va(p,p.return)),v&64&&Fa&&(a=a.updateQueue,a!==null&&(v=a.callbacks,v!==null&&(p=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var x=Vs;if(es(l,a),Yi(a),v&512&&(Di||p===null||va(p,p.return)),v&4){var A=p!==null?p.memoizedState:null;if(v=a.memoizedState,p===null)if(v===null)if(a.stateNode===null){e:{v=a.type,p=a.memoizedProps,x=x.ownerDocument||x;t:switch(v){case"title":A=x.getElementsByTagName("title")[0],(!A||A[As]||A[hn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=x.createElement(v),x.head.insertBefore(A,x.querySelector("head > title"))),vs(A,v,p),A[hn]=a,Ke(A),v=A;break e;case"link":var F=TD("link","href",x).get(v+(p.href||""));if(F){for(var Q=0;Q<F.length;Q++)if(A=F[Q],A.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&A.getAttribute("rel")===(p.rel==null?null:p.rel)&&A.getAttribute("title")===(p.title==null?null:p.title)&&A.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){F.splice(Q,1);break t}}A=x.createElement(v),vs(A,v,p),x.head.appendChild(A);break;case"meta":if(F=TD("meta","content",x).get(v+(p.content||""))){for(Q=0;Q<F.length;Q++)if(A=F[Q],A.getAttribute("content")===(p.content==null?null:""+p.content)&&A.getAttribute("name")===(p.name==null?null:p.name)&&A.getAttribute("property")===(p.property==null?null:p.property)&&A.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&A.getAttribute("charset")===(p.charSet==null?null:p.charSet)){F.splice(Q,1);break t}}A=x.createElement(v),vs(A,v,p),x.head.appendChild(A);break;default:throw Error(n(468,v))}A[hn]=a,Ke(A),v=A}a.stateNode=v}else MD(x,a.type,a.stateNode);else a.stateNode=ED(x,v,a.memoizedProps);else A!==v?(A===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):A.count--,v===null?MD(x,a.type,a.stateNode):ED(x,v,a.memoizedProps)):v===null&&a.stateNode!==null&&za(a,a.memoizedProps,p.memoizedProps)}break;case 27:es(l,a),Yi(a),v&512&&(Di||p===null||va(p,p.return)),p!==null&&v&4&&za(a,a.memoizedProps,p.memoizedProps);break;case 5:if(es(l,a),Yi(a),v&512&&(Di||p===null||va(p,p.return)),a.flags&32){x=a.stateNode;try{cs(x,"")}catch(Ot){gi(a,a.return,Ot)}}v&4&&a.stateNode!=null&&(x=a.memoizedProps,za(a,x,p!==null?p.memoizedProps:x)),v&1024&&(wl=!0);break;case 6:if(es(l,a),Yi(a),v&4){if(a.stateNode===null)throw Error(n(162));v=a.memoizedProps,p=a.stateNode;try{p.nodeValue=v}catch(Ot){gi(a,a.return,Ot)}}break;case 3:if(OS=null,x=Vs,Vs=NS(l.containerInfo),es(l,a),Vs=x,Yi(a),v&4&&p!==null&&p.memoizedState.isDehydrated)try{jm(l.containerInfo)}catch(Ot){gi(a,a.return,Ot)}wl&&(wl=!1,MS(a));break;case 4:v=Vs,Vs=NS(a.stateNode.containerInfo),es(l,a),Yi(a),Vs=v;break;case 12:es(l,a),Yi(a);break;case 31:es(l,a),Yi(a),v&4&&(v=a.updateQueue,v!==null&&(a.updateQueue=null,Zi(a,v)));break;case 13:es(l,a),Yi(a),a.child.flags&8192&&a.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Dl=X()),v&4&&(v=a.updateQueue,v!==null&&(a.updateQueue=null,Zi(a,v)));break;case 22:x=a.memoizedState!==null;var ue=p!==null&&p.memoizedState!==null,Ae=Fa,Be=Di;if(Fa=Ae||x,Di=Be||ue,es(l,a),Di=Be,Fa=Ae,Yi(a),v&8192)e:for(l=a.stateNode,l._visibility=x?l._visibility&-2:l._visibility|1,x&&(p===null||ue||Fa||Di||Ou(a)),p=null,l=a;;){if(l.tag===5||l.tag===26){if(p===null){ue=p=l;try{if(A=ue.stateNode,x)F=A.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{Q=ue.stateNode;var Qe=ue.memoizedProps.style,Ne=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;Q.style.display=Ne==null||typeof Ne=="boolean"?"":(""+Ne).trim()}}catch(Ot){gi(ue,ue.return,Ot)}}}else if(l.tag===6){if(p===null){ue=l;try{ue.stateNode.nodeValue=x?"":ue.memoizedProps}catch(Ot){gi(ue,ue.return,Ot)}}}else if(l.tag===18){if(p===null){ue=l;try{var Le=ue.stateNode;x?pD(Le,!0):pD(ue.stateNode,!1)}catch(Ot){gi(ue,ue.return,Ot)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;p===l&&(p=null),l=l.return}p===l&&(p=null),l.sibling.return=l.return,l=l.sibling}v&4&&(v=a.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,Zi(a,p))));break;case 19:es(l,a),Yi(a),v&4&&(v=a.updateQueue,v!==null&&(a.updateQueue=null,Zi(a,v)));break;case 30:break;case 21:break;default:es(l,a),Yi(a)}}function Yi(a){var l=a.flags;if(l&2){try{for(var p,v=a.return;v!==null;){if(or(v)){p=v;break}v=v.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var x=p.stateNode,A=Wo(a);Jn(a,A,x);break;case 5:var F=p.stateNode;p.flags&32&&(cs(F,""),p.flags&=-33);var Q=Wo(a);Jn(a,Q,F);break;case 3:case 4:var ue=p.stateNode.containerInfo,Ae=Wo(a);gn(a,Ae,ue);break;default:throw Error(n(161))}}catch(Be){gi(a,a.return,Be)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function MS(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;MS(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function Al(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)ES(a,l.alternate,l),l=l.sibling}function Ou(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:Ba(4,l,l.return),Ou(l);break;case 1:va(l,l.return);var p=l.stateNode;typeof p.componentWillUnmount=="function"&&Ay(l,l.return,p),Ou(l);break;case 27:Iy(l.stateNode);case 26:case 5:va(l,l.return),Ou(l);break;case 22:l.memoizedState===null&&Ou(l);break;case 30:Ou(l);break;default:Ou(l)}a=a.sibling}}function ri(a,l,p){for(p=p&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var v=l.alternate,x=a,A=l,F=A.flags;switch(A.tag){case 0:case 11:case 15:ri(x,A,p),qo(4,A);break;case 1:if(ri(x,A,p),v=A,x=v.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Ae){gi(v,v.return,Ae)}if(v=A,x=v.updateQueue,x!==null){var Q=v.stateNode;try{var ue=x.shared.hiddenCallbacks;if(ue!==null)for(x.shared.hiddenCallbacks=null,x=0;x<ue.length;x++)Fo(ue[x],Q)}catch(Ae){gi(v,v.return,Ae)}}p&&F&64&&Rc(A),Yo(A,A.return);break;case 27:Qi(A);case 26:case 5:ri(x,A,p),p&&v===null&&F&4&&ya(A),Yo(A,A.return);break;case 12:ri(x,A,p);break;case 31:ri(x,A,p),p&&F&4&&Om(x,A);break;case 13:ri(x,A,p),p&&F&4&&Cy(x,A);break;case 22:A.memoizedState===null&&ri(x,A,p),Yo(A,A.return);break;case 30:break;default:ri(x,A,p)}l=l.sibling}}function Pm(a,l){var p=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==p&&(a!=null&&a.refCount++,p!=null&&kr(p))}function Cl(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&kr(a))}function mr(a,l,p,v){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Ui(a,l,p,v),l=l.sibling}function Ui(a,l,p,v){var x=l.flags;switch(l.tag){case 0:case 11:case 15:mr(a,l,p,v),x&2048&&qo(9,l);break;case 1:mr(a,l,p,v);break;case 3:mr(a,l,p,v),x&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&kr(a)));break;case 12:if(x&2048){mr(a,l,p,v),a=l.stateNode;try{var A=l.memoizedProps,F=A.id,Q=A.onPostCommit;typeof Q=="function"&&Q(F,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(ue){gi(l,l.return,ue)}}else mr(a,l,p,v);break;case 31:mr(a,l,p,v);break;case 13:mr(a,l,p,v);break;case 23:break;case 22:A=l.stateNode,F=l.alternate,l.memoizedState!==null?A._visibility&2?mr(a,l,p,v):tf(a,l):A._visibility&2?mr(a,l,p,v):(A._visibility|=2,Ic(a,l,p,v,(l.subtreeFlags&10256)!==0||!1)),x&2048&&Pm(F,l);break;case 24:mr(a,l,p,v),x&2048&&Cl(l.alternate,l);break;default:mr(a,l,p,v)}}function Ic(a,l,p,v,x){for(x=x&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var A=a,F=l,Q=p,ue=v,Ae=F.flags;switch(F.tag){case 0:case 11:case 15:Ic(A,F,Q,ue,x),qo(8,F);break;case 23:break;case 22:var Be=F.stateNode;F.memoizedState!==null?Be._visibility&2?Ic(A,F,Q,ue,x):tf(A,F):(Be._visibility|=2,Ic(A,F,Q,ue,x)),x&&Ae&2048&&Pm(F.alternate,F);break;case 24:Ic(A,F,Q,ue,x),x&&Ae&2048&&Cl(F.alternate,F);break;default:Ic(A,F,Q,ue,x)}l=l.sibling}}function tf(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var p=a,v=l,x=v.flags;switch(v.tag){case 22:tf(p,v),x&2048&&Pm(v.alternate,v);break;case 24:tf(p,v),x&2048&&Cl(v.alternate,v);break;default:tf(p,v)}l=l.sibling}}var Wi=8192;function Pu(a,l,p){if(a.subtreeFlags&Wi)for(a=a.child;a!==null;)Ji(a,l,p),a=a.sibling}function Ji(a,l,p){switch(a.tag){case 26:Pu(a,l,p),a.flags&Wi&&a.memoizedState!==null&&HB(p,Vs,a.memoizedState,a.memoizedProps);break;case 5:Pu(a,l,p);break;case 3:case 4:var v=Vs;Vs=NS(a.stateNode.containerInfo),Pu(a,l,p),Vs=v;break;case 22:a.memoizedState===null&&(v=a.alternate,v!==null&&v.memoizedState!==null?(v=Wi,Wi=16777216,Pu(a,l,p),Wi=v):Pu(a,l,p));break;default:Pu(a,l,p)}}function Bs(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function ms(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var v=l[p];qi=v,Fd(v,a)}Bs(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Lu(a),a=a.sibling}function Lu(a){switch(a.tag){case 0:case 11:case 15:ms(a),a.flags&2048&&Ba(9,a,a.return);break;case 3:ms(a);break;case 12:ms(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,Lm(a)):ms(a);break;default:ms(a)}}function Lm(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var v=l[p];qi=v,Fd(v,a)}Bs(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:Ba(8,l,l.return),Lm(l);break;case 22:p=l.stateNode,p._visibility&2&&(p._visibility&=-3,Lm(l));break;default:Lm(l)}a=a.sibling}}function Fd(a,l){for(;qi!==null;){var p=qi;switch(p.tag){case 0:case 11:case 15:Ba(8,p,l);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:kr(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,qi=v;else e:for(p=a;qi!==null;){v=qi;var x=v.sibling,A=v.return;if(Im(v),v===p){qi=null;break e}if(x!==null){x.return=A,qi=x;break e}qi=A}}}var Um={getCacheForType:function(a){var l=Ar(Ft),p=l.data.get(a);return p===void 0&&(p=a(),l.data.set(a,p)),p},cacheSignal:function(){return Ar(Ft).controller.signal}},km=typeof WeakMap=="function"?WeakMap:Map,Vn=0,si=null,vn=null,Nn=0,Ht=0,An=null,un=!1,Tn=!1,di=!1,$i=0,ai=0,_a=0,Rl=0,mo=0,Bn=0,Sa=0,go=null,ts=null,zs=!1,Dl=0,nf=0,ba=1/0,rf=null,Xo=null,ki=0,vo=null,xa=null,Ha=0,Nl=0,Uu=null,Vm=null,ku=0,Vu=null;function gs(){return(Vn&2)!==0&&Nn!==0?Nn&-Nn:H.T!==null?SM():Wr()}function u(){if(Bn===0)if((Nn&536870912)===0||Pn){var a=lt;lt<<=1,(lt&3932160)===0&&(lt=262144),Bn=a}else Bn=536870912;return a=pr.current,a!==null&&(a.flags|=32),Bn}function f(a,l,p){(a===si&&(Ht===2||Ht===9)||a.cancelPendingCommit!==null)&&(_e(a,0),U(a,Nn,Bn,!1)),br(a,p),((Vn&2)===0||a!==si)&&(a===si&&((Vn&2)===0&&(Rl|=p),ai===4&&U(a,Nn,Bn,!1)),Oc(a))}function y(a,l,p){if((Vn&6)!==0)throw Error(n(327));var v=!p&&(l&127)===0&&(l&a.expiredLanes)===0||xt(a,l),x=v?Bu(a,l):Fs(a,l,!0),A=v;do{if(x===0){Tn&&!v&&U(a,l,0,!1);break}else{if(p=a.current.alternate,A&&!R(p)){x=Fs(a,l,!1),A=!1;continue}if(x===2){if(A=l,a.errorRecoveryDisabledLanes&A)var F=0;else F=a.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){l=F;e:{var Q=a;x=go;var ue=Q.current.memoizedState.isDehydrated;if(ue&&(_e(Q,F).flags|=256),F=Fs(Q,F,!1),F!==2){if(di&&!ue){Q.errorRecoveryDisabledLanes|=A,Rl|=A,x=4;break e}A=ts,ts=x,A!==null&&(ts===null?ts=A:ts.push.apply(ts,A))}x=F}if(A=!1,x!==2)continue}}if(x===1){_e(a,0),U(a,l,0,!0);break}e:{switch(v=a,A=x,A){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:U(v,l,Bn,!un);break e;case 2:ts=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(x=Dl+300-X(),10<x)){if(U(v,l,Bn,!un),Fe(v,0,!0)!==0)break e;Ha=l,v.timeoutHandle=hD(E.bind(null,v,p,ts,rf,zs,l,Bn,Rl,Sa,un,A,"Throttled",-0,0),x);break e}E(v,p,ts,rf,zs,l,Bn,Rl,Sa,un,A,null,-0,0)}}break}while(!0);Oc(a)}function E(a,l,p,v,x,A,F,Q,ue,Ae,Be,Qe,Ne,Le){if(a.timeoutHandle=-1,Qe=l.subtreeFlags,Qe&8192||(Qe&16785408)===16785408){Qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Na},Ji(l,A,Qe);var Ot=(A&62914560)===A?Dl-X():(A&4194048)===A?nf-X():0;if(Ot=GB(Qe,Ot),Ot!==null){Ha=A,a.cancelPendingCommit=Ot($t.bind(null,a,l,A,p,v,x,F,Q,ue,Be,Qe,null,Ne,Le)),U(a,A,F,!Ae);return}}$t(a,l,A,p,v,x,F,Q,ue)}function R(a){for(var l=a;;){var p=l.tag;if((p===0||p===11||p===15)&&l.flags&16384&&(p=l.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var x=p[v],A=x.getSnapshot;x=x.value;try{if(!Ci(A(),x))return!1}catch{return!1}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function U(a,l,p,v){l&=~mo,l&=~Rl,a.suspendedLanes|=l,a.pingedLanes&=~l,v&&(a.warmLanes|=l),v=a.expirationTimes;for(var x=l;0<x;){var A=31-gt(x),F=1<<A;v[A]=-1,x&=~F}p!==0&&eo(a,p,l)}function ee(){return(Vn&6)===0?(Ry(0),!1):!0}function ce(){if(vn!==null){if(Ht===0)var a=vn.return;else a=vn,Qr=vl=null,sy(a),bc=null,xc=0,a=vn;for(;a!==null;)Iu(a.alternate,a),a=a.return;vn=null}}function _e(a,l){var p=a.timeoutHandle;p!==-1&&(a.timeoutHandle=-1,MB(p)),p=a.cancelPendingCommit,p!==null&&(a.cancelPendingCommit=null,p()),Ha=0,ce(),si=a,vn=p=Lo(a.current,null),Nn=l,Ht=0,An=null,un=!1,Tn=xt(a,l),di=!1,Sa=Bn=mo=Rl=_a=ai=0,ts=go=null,zs=!1,(l&8)!==0&&(l|=l&32);var v=a.entangledLanes;if(v!==0)for(a=a.entanglements,v&=l;0<v;){var x=31-gt(v),A=1<<x;l|=a[x],v&=~A}return $i=l,pc(),p}function He(a,l){Jt=null,H.H=Rd,l===Sc||l===uo?(l=fm(),Ht=3):l===_d?(l=fm(),Ht=4):Ht=l===Rm?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,An=l,vn===null&&(ai=1,Cm(a,Is(l,a.current)))}function ut(){var a=pr.current;return a===null?!0:(Nn&4194048)===Nn?Ua===null:(Nn&62914560)===Nn||(Nn&536870912)!==0?a===Ua:!1}function _t(){var a=H.H;return H.H=Rd,a===null?Rd:a}function Tt(){var a=H.A;return H.A=Um,a}function an(){ai=4,un||(Nn&4194048)!==Nn&&pr.current!==null||(Tn=!0),(_a&134217727)===0&&(Rl&134217727)===0||si===null||U(si,Nn,Bn,!1)}function Fs(a,l,p){var v=Vn;Vn|=2;var x=_t(),A=Tt();(si!==a||Nn!==l)&&(rf=null,_e(a,l)),l=!1;var F=ai;e:do try{if(Ht!==0&&vn!==null){var Q=vn,ue=An;switch(Ht){case 8:ce(),F=6;break e;case 3:case 2:case 9:case 6:pr.current===null&&(l=!0);var Ae=Ht;if(Ht=0,An=null,st(a,Q,ue,Ae),p&&Tn){F=0;break e}break;default:Ae=Ht,Ht=0,An=null,st(a,Q,ue,Ae)}}Hd(),F=ai;break}catch(Be){He(a,Be)}while(!0);return l&&a.shellSuspendCounter++,Qr=vl=null,Vn=v,H.H=x,H.A=A,vn===null&&(si=null,Nn=0,pc()),F}function Hd(){for(;vn!==null;)ve(vn)}function Bu(a,l){var p=Vn;Vn|=2;var v=_t(),x=Tt();si!==a||Nn!==l?(rf=null,ba=X()+500,_e(a,l)):Tn=xt(a,l);e:do try{if(Ht!==0&&vn!==null){l=vn;var A=An;t:switch(Ht){case 1:Ht=0,An=null,st(a,l,A,1);break;case 2:case 9:if(Q0(A)){Ht=0,An=null,Ie(l);break}l=function(){Ht!==2&&Ht!==9||si!==a||(Ht=7),Oc(a)},A.then(l,l);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:Q0(A)?(Ht=0,An=null,Ie(l)):(Ht=0,An=null,st(a,l,A,7));break;case 5:var F=null;switch(vn.tag){case 26:F=vn.memoizedState;case 5:case 27:var Q=vn;if(F?wD(F):Q.stateNode.complete){Ht=0,An=null;var ue=Q.sibling;if(ue!==null)vn=ue;else{var Ae=Q.return;Ae!==null?(vn=Ae,Vt(Ae)):vn=null}break t}}Ht=0,An=null,st(a,l,A,5);break;case 6:Ht=0,An=null,st(a,l,A,6);break;case 8:ce(),ai=6;break e;default:throw Error(n(462))}}Re();break}catch(Be){He(a,Be)}while(!0);return Qr=vl=null,H.H=v,H.A=x,Vn=p,vn!==null?0:(si=null,Nn=0,pc(),ai)}function Re(){for(;vn!==null&&!Qt();)ve(vn)}function ve(a){var l=Dm(a.alternate,a,$i);a.memoizedProps=a.pendingProps,l===null?Vt(a):vn=l}function Ie(a){var l=a,p=l.alternate;switch(l.tag){case 15:case 0:l=Jr(p,l,l.pendingProps,l.type,void 0,Nn);break;case 11:l=Jr(p,l,l.pendingProps,l.type.render,l.ref,Nn);break;case 5:sy(l);default:Iu(p,l),l=vn=Kr(l,$i),l=Dm(p,l,$i)}a.memoizedProps=a.pendingProps,l===null?Vt(a):vn=l}function st(a,l,p,v){Qr=vl=null,sy(l),bc=null,xc=0;var x=l.return;try{if(fa(a,x,l,p,Nn)){ai=1,Cm(a,Is(p,a.current)),vn=null;return}}catch(A){if(x!==null)throw vn=x,A;ai=1,Cm(a,Is(p,a.current)),vn=null;return}l.flags&32768?(Pn||v===1?a=!0:Tn||(Nn&536870912)!==0?a=!1:(un=a=!0,(v===2||v===9||v===3||v===6)&&(v=pr.current,v!==null&&v.tag===13&&(v.flags|=16384))),xi(l,a)):Vt(l)}function Vt(a){var l=a;do{if((l.flags&32768)!==0){xi(l,un);return}a=l.return;var p=wy(l.alternate,l,$i);if(p!==null){vn=p;return}if(l=l.sibling,l!==null){vn=l;return}vn=l=a}while(l!==null);ai===0&&(ai=5)}function xi(a,l){do{var p=Nm(a.alternate,a);if(p!==null){p.flags&=32767,vn=p;return}if(p=a.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!l&&(a=a.sibling,a!==null)){vn=a;return}vn=a=p}while(a!==null);ai=6,vn=null}function $t(a,l,p,v,x,A,F,Q,ue){a.cancelPendingCommit=null;do Bm();while(ki!==0);if((Vn&6)!==0)throw Error(n(327));if(l!==null){if(l===a.current)throw Error(n(177));if(A=l.lanes|l.childLanes,A|=rm,as(a,p,A,F,Q,ue),a===si&&(vn=si=null,Nn=0),xa=l,vo=a,Ha=p,Nl=A,Uu=x,Vm=v,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,fB(ke,function(){return XR(),null})):(a.callbackNode=null,a.callbackPriority=0),v=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||v){v=H.T,H.T=null,x=K.p,K.p=2,F=Vn,Vn|=4;try{ef(a,l,p)}finally{Vn=F,K.p=x,H.T=v}}ki=1,Wn(),gr(),Xn()}}function Wn(){if(ki===1){ki=0;var a=vo,l=xa,p=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||p){p=H.T,H.T=null;var v=K.p;K.p=2;var x=Vn;Vn|=4;try{Nc(l,a);var A=CM,F=$p(a.containerInfo),Q=A.focusedElem,ue=A.selectionRange;if(F!==Q&&Q&&Q.ownerDocument&&Jp(Q.ownerDocument.documentElement,Q)){if(ue!==null&&Oh(Q)){var Ae=ue.start,Be=ue.end;if(Be===void 0&&(Be=Ae),"selectionStart"in Q)Q.selectionStart=Ae,Q.selectionEnd=Math.min(Be,Q.value.length);else{var Qe=Q.ownerDocument||document,Ne=Qe&&Qe.defaultView||window;if(Ne.getSelection){var Le=Ne.getSelection(),Ot=Q.textContent.length,Zt=Math.min(ue.start,Ot),Ti=ue.end===void 0?Zt:Math.min(ue.end,Ot);!Le.extend&&Zt>Ti&&(F=Ti,Ti=Zt,Zt=F);var ye=Pv(Q,Zt),de=Pv(Q,Ti);if(ye&&de&&(Le.rangeCount!==1||Le.anchorNode!==ye.node||Le.anchorOffset!==ye.offset||Le.focusNode!==de.node||Le.focusOffset!==de.offset)){var Me=Qe.createRange();Me.setStart(ye.node,ye.offset),Le.removeAllRanges(),Zt>Ti?(Le.addRange(Me),Le.extend(de.node,de.offset)):(Me.setEnd(de.node,de.offset),Le.addRange(Me))}}}}for(Qe=[],Le=Q;Le=Le.parentNode;)Le.nodeType===1&&Qe.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<Qe.length;Q++){var je=Qe[Q];je.element.scrollLeft=je.left,je.element.scrollTop=je.top}}kS=!!AM,CM=AM=null}finally{Vn=x,K.p=v,H.T=p}}a.current=l,ki=2}}function gr(){if(ki===2){ki=0;var a=vo,l=xa,p=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||p){p=H.T,H.T=null;var v=K.p;K.p=2;var x=Vn;Vn|=4;try{ES(a,l.alternate,l)}finally{Vn=x,K.p=v,H.T=p}}ki=3}}function Xn(){if(ki===4||ki===3){ki=0,ie();var a=vo,l=xa,p=Ha,v=Vm;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?ki=5:(ki=0,xa=vo=null,Il(a,a.pendingLanes));var x=a.pendingLanes;if(x===0&&(Xo=null),na(p),l=l.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(Ze,l,void 0,(l.current.flags&128)===128)}catch{}if(v!==null){l=H.T,x=K.p,K.p=2,H.T=null;try{for(var A=a.onRecoverableError,F=0;F<v.length;F++){var Q=v[F];A(Q.value,{componentStack:Q.stack})}}finally{H.T=l,K.p=x}}(Ha&3)!==0&&Bm(),Oc(a),x=a.pendingLanes,(p&261930)!==0&&(x&42)!==0?a===Vu?ku++:(ku=0,Vu=a):ku=0,Ry(0)}}function Il(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,kr(l)))}function Bm(){return Wn(),gr(),Xn(),XR()}function XR(){if(ki!==5)return!1;var a=vo,l=Nl;Nl=0;var p=na(Ha),v=H.T,x=K.p;try{K.p=32>p?32:p,H.T=null,p=Uu,Uu=null;var A=vo,F=Ha;if(ki=0,xa=vo=null,Ha=0,(Vn&6)!==0)throw Error(n(331));var Q=Vn;if(Vn|=4,Lu(A.current),Ui(A,A.current,F,p),Vn=Q,Ry(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(Ze,A)}catch{}return!0}finally{K.p=x,H.T=v,Il(a,l)}}function KR(a,l,p){l=Is(p,l),l=My(a.stateNode,l,2),a=bl(a,l,2),a!==null&&(br(a,2),Oc(a))}function gi(a,l,p){if(a.tag===3)KR(a,a,p);else for(;l!==null;){if(l.tag===3){KR(l,a,p);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Xo===null||!Xo.has(v))){a=Is(p,a),p=Kh(2),v=bl(l,p,2),v!==null&&(Us(p,v,l,a),br(v,2),Oc(v));break}}l=l.return}}function vM(a,l,p){var v=a.pingCache;if(v===null){v=a.pingCache=new km;var x=new Set;v.set(l,x)}else x=v.get(l),x===void 0&&(x=new Set,v.set(l,x));x.has(p)||(di=!0,x.add(p),a=cB.bind(null,a,l,p),l.then(a,a))}function cB(a,l,p){var v=a.pingCache;v!==null&&v.delete(l),a.pingedLanes|=a.suspendedLanes&p,a.warmLanes&=~p,si===a&&(Nn&p)===p&&(ai===4||ai===3&&(Nn&62914560)===Nn&&300>X()-Dl?(Vn&2)===0&&_e(a,0):mo|=p,Sa===Nn&&(Sa=0)),Oc(a)}function QR(a,l){l===0&&(l=In()),a=mc(a,l),a!==null&&(br(a,l),Oc(a))}function uB(a){var l=a.memoizedState,p=0;l!==null&&(p=l.retryLane),QR(a,p)}function hB(a,l){var p=0;switch(a.tag){case 31:case 13:var v=a.stateNode,x=a.memoizedState;x!==null&&(p=x.retryLane);break;case 19:v=a.stateNode;break;case 22:v=a.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(l),QR(a,p)}function fB(a,l){return Je(a,l)}var wS=null,zm=null,yM=!1,AS=!1,_M=!1,sf=0;function Oc(a){a!==zm&&a.next===null&&(zm===null?wS=zm=a:zm=zm.next=a),AS=!0,yM||(yM=!0,pB())}function Ry(a,l){if(!_M&&AS){_M=!0;do for(var p=!1,v=wS;v!==null;){if(a!==0){var x=v.pendingLanes;if(x===0)var A=0;else{var F=v.suspendedLanes,Q=v.pingedLanes;A=(1<<31-gt(42|a)+1)-1,A&=x&~(F&~Q),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(p=!0,eD(v,A))}else A=Nn,A=Fe(v,v===si?A:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(A&3)===0||xt(v,A)||(p=!0,eD(v,A));v=v.next}while(p);_M=!1}}function dB(){ZR()}function ZR(){AS=yM=!1;var a=0;sf!==0&&TB()&&(a=sf);for(var l=X(),p=null,v=wS;v!==null;){var x=v.next,A=JR(v,l);A===0?(v.next=null,p===null?wS=x:p.next=x,x===null&&(zm=p)):(p=v,(a!==0||(A&3)!==0)&&(AS=!0)),v=x}ki!==0&&ki!==5||Ry(a),sf!==0&&(sf=0)}function JR(a,l){for(var p=a.suspendedLanes,v=a.pingedLanes,x=a.expirationTimes,A=a.pendingLanes&-62914561;0<A;){var F=31-gt(A),Q=1<<F,ue=x[F];ue===-1?((Q&p)===0||(Q&v)!==0)&&(x[F]=Xt(Q,l)):ue<=l&&(a.expiredLanes|=Q),A&=~Q}if(l=si,p=Nn,p=Fe(a,a===l?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),v=a.callbackNode,p===0||a===l&&(Ht===2||Ht===9)||a.cancelPendingCommit!==null)return v!==null&&v!==null&&zt(v),a.callbackNode=null,a.callbackPriority=0;if((p&3)===0||xt(a,p)){if(l=p&-p,l===a.callbackPriority)return l;switch(v!==null&&zt(v),na(p)){case 2:case 8:p=$e;break;case 32:p=ke;break;case 268435456:p=ct;break;default:p=ke}return v=$R.bind(null,a),p=Je(p,v),a.callbackPriority=l,a.callbackNode=p,l}return v!==null&&v!==null&&zt(v),a.callbackPriority=2,a.callbackNode=null,2}function $R(a,l){if(ki!==0&&ki!==5)return a.callbackNode=null,a.callbackPriority=0,null;var p=a.callbackNode;if(Bm()&&a.callbackNode!==p)return null;var v=Nn;return v=Fe(a,a===si?v:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),v===0?null:(y(a,v,l),JR(a,X()),a.callbackNode!=null&&a.callbackNode===p?$R.bind(null,a):null)}function eD(a,l){if(Bm())return null;y(a,l,!0)}function pB(){wB(function(){(Vn&6)!==0?Je(Pe,dB):ZR()})}function SM(){if(sf===0){var a=Sl;a===0&&(a=it,it<<=1,(it&261888)===0&&(it=256)),sf=a}return sf}function tD(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:du(""+a)}function nD(a,l){var p=l.ownerDocument.createElement("input");return p.name=l.name,p.value=l.value,a.id&&p.setAttribute("form",a.id),l.parentNode.insertBefore(p,l),a=new FormData(a),p.parentNode.removeChild(p),a}function mB(a,l,p,v,x){if(l==="submit"&&p&&p.stateNode===x){var A=tD((x[Ii]||null).action),F=v.submitter;F&&(l=(l=F[Ii]||null)?tD(l.formAction):F.getAttribute("formAction"),l!==null&&(A=l,F=null));var Q=new io("action","action",null,v,x);a.push({event:Q,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(sf!==0){var ue=F?nD(x,F):new FormData(x);Sy(p,{pending:!0,data:ue,method:x.method,action:A},null,ue)}}else typeof A=="function"&&(Q.preventDefault(),ue=F?nD(x,F):new FormData(x),Sy(p,{pending:!0,data:ue,method:x.method,action:A},A,ue))},currentTarget:x}]})}}for(var bM=0;bM<im.length;bM++){var xM=im[bM],gB=xM.toLowerCase(),vB=xM[0].toUpperCase()+xM.slice(1);Xr(gB,"on"+vB)}Xr(Ns,"onAnimationEnd"),Xr(Lv,"onAnimationIteration"),Xr(Po,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(kh,"onTransitionRun"),Xr(fc,"onTransitionStart"),Xr(Uv,"onTransitionCancel"),Xr(nm,"onTransitionEnd"),Pt("onMouseEnter",["mouseout","mouseover"]),Pt("onMouseLeave",["mouseout","mouseover"]),Pt("onPointerEnter",["pointerout","pointerover"]),Pt("onPointerLeave",["pointerout","pointerover"]),vt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vt("onBeforeInput",["compositionend","keypress","textInput","paste"]),vt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yB=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dy));function iD(a,l){l=(l&4)!==0;for(var p=0;p<a.length;p++){var v=a[p],x=v.event;v=v.listeners;e:{var A=void 0;if(l)for(var F=v.length-1;0<=F;F--){var Q=v[F],ue=Q.instance,Ae=Q.currentTarget;if(Q=Q.listener,ue!==A&&x.isPropagationStopped())break e;A=Q,x.currentTarget=Ae;try{A(x)}catch(Be){dc(Be)}x.currentTarget=null,A=ue}else for(F=0;F<v.length;F++){if(Q=v[F],ue=Q.instance,Ae=Q.currentTarget,Q=Q.listener,ue!==A&&x.isPropagationStopped())break e;A=Q,x.currentTarget=Ae;try{A(x)}catch(Be){dc(Be)}x.currentTarget=null,A=ue}}}}function Ln(a,l){var p=l[al];p===void 0&&(p=l[al]=new Set);var v=a+"__bubble";p.has(v)||(rD(l,a,2,!1),p.add(v))}function EM(a,l,p){var v=0;l&&(v|=4),rD(p,a,v,l)}var CS="_reactListening"+Math.random().toString(36).slice(2);function TM(a){if(!a[CS]){a[CS]=!0,dt.forEach(function(p){p!=="selectionchange"&&(yB.has(p)||EM(p,!1,a),EM(p,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[CS]||(l[CS]=!0,EM("selectionchange",!1,l))}}function rD(a,l,p,v){switch(OD(l)){case 2:var x=YB;break;case 8:x=WB;break;default:x=BM}p=x.bind(null,l,p,a),x=void 0,!rc||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),v?x!==void 0?a.addEventListener(l,p,{capture:!0,passive:x}):a.addEventListener(l,p,!0):x!==void 0?a.addEventListener(l,p,{passive:x}):a.addEventListener(l,p,!1)}function MM(a,l,p,v,x){var A=v;if((l&1)===0&&(l&2)===0&&v!==null)e:for(;;){if(v===null)return;var F=v.tag;if(F===3||F===4){var Q=v.stateNode.containerInfo;if(Q===x)break;if(F===4)for(F=v.return;F!==null;){var ue=F.tag;if((ue===3||ue===4)&&F.stateNode.containerInfo===x)return;F=F.return}for(;Q!==null;){if(F=me(Q),F===null)return;if(ue=F.tag,ue===5||ue===6||ue===26||ue===27){v=A=F;continue e}Q=Q.parentNode}}v=v.return}ul(function(){var Ae=A,Be=ia(p),Qe=[];e:{var Ne=dl.get(a);if(Ne!==void 0){var Le=io,Ot=a;switch(a){case"keypress":if(Co(p)===0)break e;case"keydown":case"keyup":Le=Ch;break;case"focusin":Ot="focus",Le=oc;break;case"focusout":Ot="blur",Le=oc;break;case"beforeblur":case"afterblur":Le=oc;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=id;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=P;break;case Ns:case Lv:case Po:Le=sd;break;case nm:Le=te;break;case"scroll":case"scrollend":Le=sc;break;case"wheel":Le=De;break;case"copy":case"cut":case"paste":Le=Mh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=ao;break;case"toggle":case"beforetoggle":Le=cn}var Zt=(l&4)!==0,Ti=!Zt&&(a==="scroll"||a==="scrollend"),ye=Zt?Ne!==null?Ne+"Capture":null:Ne;Zt=[];for(var de=Ae,Me;de!==null;){var je=de;if(Me=je.stateNode,je=je.tag,je!==5&&je!==26&&je!==27||Me===null||ye===null||(je=ra(de,ye),je!=null&&Zt.push(Ny(de,je,Me))),Ti)break;de=de.return}0<Zt.length&&(Ne=new Le(Ne,Ot,null,p,Be),Qe.push({event:Ne,listeners:Zt}))}}if((l&7)===0){e:{if(Ne=a==="mouseover"||a==="pointerover",Le=a==="mouseout"||a==="pointerout",Ne&&p!==pu&&(Ot=p.relatedTarget||p.fromElement)&&(me(Ot)||Ot[ws]))break e;if((Le||Ne)&&(Ne=Be.window===Be?Be:(Ne=Be.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,Le?(Ot=p.relatedTarget||p.toElement,Le=Ae,Ot=Ot?me(Ot):null,Ot!==null&&(Ti=s(Ot),Zt=Ot.tag,Ot!==Ti||Zt!==5&&Zt!==27&&Zt!==6)&&(Ot=null)):(Le=null,Ot=Ae),Le!==Ot)){if(Zt=nd,je="onMouseLeave",ye="onMouseEnter",de="mouse",(a==="pointerout"||a==="pointerover")&&(Zt=ao,je="onPointerLeave",ye="onPointerEnter",de="pointer"),Ti=Le==null?Ne:we(Le),Me=Ot==null?Ne:we(Ot),Ne=new Zt(je,de+"leave",Le,p,Be),Ne.target=Ti,Ne.relatedTarget=Me,je=null,me(Be)===Ae&&(Zt=new Zt(ye,de+"enter",Ot,p,Be),Zt.target=Me,Zt.relatedTarget=Ti,je=Zt),Ti=je,Le&&Ot)t:{for(Zt=_B,ye=Le,de=Ot,Me=0,je=ye;je;je=Zt(je))Me++;je=0;for(var jt=de;jt;jt=Zt(jt))je++;for(;0<Me-je;)ye=Zt(ye),Me--;for(;0<je-Me;)de=Zt(de),je--;for(;Me--;){if(ye===de||de!==null&&ye===de.alternate){Zt=ye;break t}ye=Zt(ye),de=Zt(de)}Zt=null}else Zt=null;Le!==null&&sD(Qe,Ne,Le,Zt,!1),Ot!==null&&Ti!==null&&sD(Qe,Ti,Ot,Zt,!0)}}e:{if(Ne=Ae?we(Ae):window,Le=Ne.nodeName&&Ne.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Ne.type==="file")var oi=Nv;else if(Rv(Ne))if(ud)oi=H0;else{oi=cc;var kt=hd}else Le=Ne.nodeName,!Le||Le.toLowerCase()!=="input"||Ne.type!=="checkbox"&&Ne.type!=="radio"?Ae&&nc(Ae.elementType)&&(oi=Nv):oi=F0;if(oi&&(oi=oi(a,Ae))){Zp(Qe,oi,p,Be);break e}kt&&kt(a,Ne,Ae),a==="focusout"&&Ae&&Ne.type==="number"&&Ae.memoizedProps.value!=null&&Fi(Ne,"number",Ne.value)}switch(kt=Ae?we(Ae):window,a){case"focusin":(Rv(kt)||kt.contentEditable==="true")&&(Ph=kt,em=Ae,Lh=null);break;case"focusout":Lh=em=Ph=null;break;case"mousedown":oa=!0;break;case"contextmenu":case"mouseup":case"dragend":oa=!1,tm(Qe,p,Be);break;case"selectionchange":if(G0)break;case"keydown":case"keyup":tm(Qe,p,Be)}var Mn;if(On)e:{switch(a){case"compositionstart":var zn="onCompositionStart";break e;case"compositionend":zn="onCompositionEnd";break e;case"compositionupdate":zn="onCompositionUpdate";break e}zn=void 0}else lc?fl(a,p)&&(zn="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&(zn="onCompositionStart");zn&&(wi&&p.locale!=="ko"&&(lc||zn!=="onCompositionStart"?zn==="onCompositionEnd"&&lc&&(Mn=gu()):(Ao=Be,Eh="value"in Ao?Ao.value:Ao.textContent,lc=!0)),kt=RS(Ae,zn),0<kt.length&&(zn=new so(zn,a,null,p,Be),Qe.push({event:zn,listeners:kt}),Mn?zn.data=Mn:(Mn=Oo(p),Mn!==null&&(zn.data=Mn)))),(Mn=Er?Qp(a,p):V0(a,p))&&(zn=RS(Ae,"onBeforeInput"),0<zn.length&&(kt=new so("onBeforeInput","beforeinput",null,p,Be),Qe.push({event:kt,listeners:zn}),kt.data=Mn)),mB(Qe,a,Ae,p,Be)}iD(Qe,l)})}function Ny(a,l,p){return{instance:a,listener:l,currentTarget:p}}function RS(a,l){for(var p=l+"Capture",v=[];a!==null;){var x=a,A=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||A===null||(x=ra(a,p),x!=null&&v.unshift(Ny(a,x,A)),x=ra(a,l),x!=null&&v.push(Ny(a,x,A))),a.tag===3)return v;a=a.return}return[]}function _B(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function sD(a,l,p,v,x){for(var A=l._reactName,F=[];p!==null&&p!==v;){var Q=p,ue=Q.alternate,Ae=Q.stateNode;if(Q=Q.tag,ue!==null&&ue===v)break;Q!==5&&Q!==26&&Q!==27||Ae===null||(ue=Ae,x?(Ae=ra(p,A),Ae!=null&&F.unshift(Ny(p,Ae,ue))):x||(Ae=ra(p,A),Ae!=null&&F.push(Ny(p,Ae,ue)))),p=p.return}F.length!==0&&a.push({event:l,listeners:F})}var SB=/\r\n?/g,bB=/\u0000|\uFFFD/g;function aD(a){return(typeof a=="string"?a:""+a).replace(SB,`
`).replace(bB,"")}function oD(a,l){return l=aD(l),aD(a)===l}function Ei(a,l,p,v,x,A){switch(p){case"children":typeof v=="string"?l==="body"||l==="textarea"&&v===""||cs(a,v):(typeof v=="number"||typeof v=="bigint")&&l!=="body"&&cs(a,""+v);break;case"className":_n(a,"class",v);break;case"tabIndex":_n(a,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":_n(a,p,v);break;case"style":xh(a,v,A);break;case"data":if(l!=="object"){_n(a,"data",v);break}case"src":case"href":if(v===""&&(l!=="a"||p!=="href")){a.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){a.removeAttribute(p);break}v=du(""+v),a.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){a.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(p==="formAction"?(l!=="input"&&Ei(a,l,"name",x.name,x,null),Ei(a,l,"formEncType",x.formEncType,x,null),Ei(a,l,"formMethod",x.formMethod,x,null),Ei(a,l,"formTarget",x.formTarget,x,null)):(Ei(a,l,"encType",x.encType,x,null),Ei(a,l,"method",x.method,x,null),Ei(a,l,"target",x.target,x,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){a.removeAttribute(p);break}v=du(""+v),a.setAttribute(p,v);break;case"onClick":v!=null&&(a.onclick=Na);break;case"onScroll":v!=null&&Ln("scroll",a);break;case"onScrollEnd":v!=null&&Ln("scrollend",a);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(p=v.__html,p!=null){if(x.children!=null)throw Error(n(60));a.innerHTML=p}}break;case"multiple":a.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":a.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){a.removeAttribute("xlink:href");break}p=du(""+v),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?a.setAttribute(p,""+v):a.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?a.setAttribute(p,""):a.removeAttribute(p);break;case"capture":case"download":v===!0?a.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?a.setAttribute(p,v):a.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?a.setAttribute(p,v):a.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?a.removeAttribute(p):a.setAttribute(p,v);break;case"popover":Ln("beforetoggle",a),Ln("toggle",a),ii(a,"popover",v);break;case"xlinkActuate":Kt(a,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Kt(a,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Kt(a,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Kt(a,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Kt(a,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Kt(a,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Kt(a,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Kt(a,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Kt(a,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":ii(a,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=td.get(p)||p,ii(a,p,v))}}function wM(a,l,p,v,x,A){switch(p){case"style":xh(a,v,A);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(p=v.__html,p!=null){if(x.children!=null)throw Error(n(60));a.innerHTML=p}}break;case"children":typeof v=="string"?cs(a,v):(typeof v=="number"||typeof v=="bigint")&&cs(a,""+v);break;case"onScroll":v!=null&&Ln("scroll",a);break;case"onScrollEnd":v!=null&&Ln("scrollend",a);break;case"onClick":v!=null&&(a.onclick=Na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mt.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(x=p.endsWith("Capture"),l=p.slice(2,x?p.length-7:void 0),A=a[Ii]||null,A=A!=null?A[p]:null,typeof A=="function"&&a.removeEventListener(l,A,x),typeof v=="function")){typeof A!="function"&&A!==null&&(p in a?a[p]=null:a.hasAttribute(p)&&a.removeAttribute(p)),a.addEventListener(l,v,x);break e}p in a?a[p]=v:v===!0?a.setAttribute(p,""):ii(a,p,v)}}}function vs(a,l,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ln("error",a),Ln("load",a);var v=!1,x=!1,A;for(A in p)if(p.hasOwnProperty(A)){var F=p[A];if(F!=null)switch(A){case"src":v=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Ei(a,l,A,F,p,null)}}x&&Ei(a,l,"srcSet",p.srcSet,p,null),v&&Ei(a,l,"src",p.src,p,null);return;case"input":Ln("invalid",a);var Q=A=F=x=null,ue=null,Ae=null;for(v in p)if(p.hasOwnProperty(v)){var Be=p[v];if(Be!=null)switch(v){case"name":x=Be;break;case"type":F=Be;break;case"checked":ue=Be;break;case"defaultChecked":Ae=Be;break;case"value":A=Be;break;case"defaultValue":Q=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(n(137,l));break;default:Ei(a,l,v,Be,p,null)}}xr(a,A,Q,ue,Ae,F,x,!1);return;case"select":Ln("invalid",a),v=F=A=null;for(x in p)if(p.hasOwnProperty(x)&&(Q=p[x],Q!=null))switch(x){case"value":A=Q;break;case"defaultValue":F=Q;break;case"multiple":v=Q;default:Ei(a,l,x,Q,p,null)}l=A,p=F,a.multiple=!!v,l!=null?Oi(a,!!v,l,!1):p!=null&&Oi(a,!!v,p,!0);return;case"textarea":Ln("invalid",a),A=x=v=null;for(F in p)if(p.hasOwnProperty(F)&&(Q=p[F],Q!=null))switch(F){case"value":v=Q;break;case"defaultValue":x=Q;break;case"children":A=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(91));break;default:Ei(a,l,F,Q,p,null)}Xi(a,v,x,A);return;case"option":for(ue in p)if(p.hasOwnProperty(ue)&&(v=p[ue],v!=null))switch(ue){case"selected":a.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Ei(a,l,ue,v,p,null)}return;case"dialog":Ln("beforetoggle",a),Ln("toggle",a),Ln("cancel",a),Ln("close",a);break;case"iframe":case"object":Ln("load",a);break;case"video":case"audio":for(v=0;v<Dy.length;v++)Ln(Dy[v],a);break;case"image":Ln("error",a),Ln("load",a);break;case"details":Ln("toggle",a);break;case"embed":case"source":case"link":Ln("error",a),Ln("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ae in p)if(p.hasOwnProperty(Ae)&&(v=p[Ae],v!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Ei(a,l,Ae,v,p,null)}return;default:if(nc(l)){for(Be in p)p.hasOwnProperty(Be)&&(v=p[Be],v!==void 0&&wM(a,l,Be,v,p,void 0));return}}for(Q in p)p.hasOwnProperty(Q)&&(v=p[Q],v!=null&&Ei(a,l,Q,v,p,null))}function xB(a,l,p,v){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,A=null,F=null,Q=null,ue=null,Ae=null,Be=null;for(Le in p){var Qe=p[Le];if(p.hasOwnProperty(Le)&&Qe!=null)switch(Le){case"checked":break;case"value":break;case"defaultValue":ue=Qe;default:v.hasOwnProperty(Le)||Ei(a,l,Le,null,v,Qe)}}for(var Ne in v){var Le=v[Ne];if(Qe=p[Ne],v.hasOwnProperty(Ne)&&(Le!=null||Qe!=null))switch(Ne){case"type":A=Le;break;case"name":x=Le;break;case"checked":Ae=Le;break;case"defaultChecked":Be=Le;break;case"value":F=Le;break;case"defaultValue":Q=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(n(137,l));break;default:Le!==Qe&&Ei(a,l,Ne,Le,v,Qe)}}sr(a,F,Q,ue,Ae,Be,A,x);return;case"select":Le=F=Q=Ne=null;for(A in p)if(ue=p[A],p.hasOwnProperty(A)&&ue!=null)switch(A){case"value":break;case"multiple":Le=ue;default:v.hasOwnProperty(A)||Ei(a,l,A,null,v,ue)}for(x in v)if(A=v[x],ue=p[x],v.hasOwnProperty(x)&&(A!=null||ue!=null))switch(x){case"value":Ne=A;break;case"defaultValue":Q=A;break;case"multiple":F=A;default:A!==ue&&Ei(a,l,x,A,v,ue)}l=Q,p=F,v=Le,Ne!=null?Oi(a,!!p,Ne,!1):!!v!=!!p&&(l!=null?Oi(a,!!p,l,!0):Oi(a,!!p,p?[]:"",!1));return;case"textarea":Le=Ne=null;for(Q in p)if(x=p[Q],p.hasOwnProperty(Q)&&x!=null&&!v.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:Ei(a,l,Q,null,v,x)}for(F in v)if(x=v[F],A=p[F],v.hasOwnProperty(F)&&(x!=null||A!=null))switch(F){case"value":Ne=x;break;case"defaultValue":Le=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:x!==A&&Ei(a,l,F,x,v,A)}ol(a,Ne,Le);return;case"option":for(var Ot in p)if(Ne=p[Ot],p.hasOwnProperty(Ot)&&Ne!=null&&!v.hasOwnProperty(Ot))switch(Ot){case"selected":a.selected=!1;break;default:Ei(a,l,Ot,null,v,Ne)}for(ue in v)if(Ne=v[ue],Le=p[ue],v.hasOwnProperty(ue)&&Ne!==Le&&(Ne!=null||Le!=null))switch(ue){case"selected":a.selected=Ne&&typeof Ne!="function"&&typeof Ne!="symbol";break;default:Ei(a,l,ue,Ne,v,Le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Zt in p)Ne=p[Zt],p.hasOwnProperty(Zt)&&Ne!=null&&!v.hasOwnProperty(Zt)&&Ei(a,l,Zt,null,v,Ne);for(Ae in v)if(Ne=v[Ae],Le=p[Ae],v.hasOwnProperty(Ae)&&Ne!==Le&&(Ne!=null||Le!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(n(137,l));break;default:Ei(a,l,Ae,Ne,v,Le)}return;default:if(nc(l)){for(var Ti in p)Ne=p[Ti],p.hasOwnProperty(Ti)&&Ne!==void 0&&!v.hasOwnProperty(Ti)&&wM(a,l,Ti,void 0,v,Ne);for(Be in v)Ne=v[Be],Le=p[Be],!v.hasOwnProperty(Be)||Ne===Le||Ne===void 0&&Le===void 0||wM(a,l,Be,Ne,v,Le);return}}for(var ye in p)Ne=p[ye],p.hasOwnProperty(ye)&&Ne!=null&&!v.hasOwnProperty(ye)&&Ei(a,l,ye,null,v,Ne);for(Qe in v)Ne=v[Qe],Le=p[Qe],!v.hasOwnProperty(Qe)||Ne===Le||Ne==null&&Le==null||Ei(a,l,Qe,Ne,v,Le)}function lD(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EB(){if(typeof performance.getEntriesByType=="function"){for(var a=0,l=0,p=performance.getEntriesByType("resource"),v=0;v<p.length;v++){var x=p[v],A=x.transferSize,F=x.initiatorType,Q=x.duration;if(A&&Q&&lD(F)){for(F=0,Q=x.responseEnd,v+=1;v<p.length;v++){var ue=p[v],Ae=ue.startTime;if(Ae>Q)break;var Be=ue.transferSize,Qe=ue.initiatorType;Be&&lD(Qe)&&(ue=ue.responseEnd,F+=Be*(ue<Q?1:(Q-Ae)/(ue-Ae)))}if(--v,l+=8*(A+F)/(x.duration/1e3),a++,10<a)break}}if(0<a)return l/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var AM=null,CM=null;function DS(a){return a.nodeType===9?a:a.ownerDocument}function cD(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uD(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function RM(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var DM=null;function TB(){var a=window.event;return a&&a.type==="popstate"?a===DM?!1:(DM=a,!0):(DM=null,!1)}var hD=typeof setTimeout=="function"?setTimeout:void 0,MB=typeof clearTimeout=="function"?clearTimeout:void 0,fD=typeof Promise=="function"?Promise:void 0,wB=typeof queueMicrotask=="function"?queueMicrotask:typeof fD<"u"?function(a){return fD.resolve(null).then(a).catch(AB)}:hD;function AB(a){setTimeout(function(){throw a})}function af(a){return a==="head"}function dD(a,l){var p=l,v=0;do{var x=p.nextSibling;if(a.removeChild(p),x&&x.nodeType===8)if(p=x.data,p==="/$"||p==="/&"){if(v===0){a.removeChild(x),jm(l);return}v--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")v++;else if(p==="html")Iy(a.ownerDocument.documentElement);else if(p==="head"){p=a.ownerDocument.head,Iy(p);for(var A=p.firstChild;A;){var F=A.nextSibling,Q=A.nodeName;A[As]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&A.rel.toLowerCase()==="stylesheet"||p.removeChild(A),A=F}}else p==="body"&&Iy(a.ownerDocument.body);p=x}while(p);jm(l)}function pD(a,l){var p=a;a=0;do{var v=p.nextSibling;if(p.nodeType===1?l?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(l?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),v&&v.nodeType===8)if(p=v.data,p==="/$"){if(a===0)break;a--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||a++;p=v}while(p)}function NM(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var p=l;switch(l=l.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":NM(p),$(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}a.removeChild(p)}}function CB(a,l,p,v){for(;a.nodeType===1;){var x=p;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!v&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(v){if(!a[As])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(A=a.getAttribute("rel"),A==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(A!==x.rel||a.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||a.getAttribute("title")!==(x.title==null?null:x.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(A=a.getAttribute("src"),(A!==(x.src==null?null:x.src)||a.getAttribute("type")!==(x.type==null?null:x.type)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&A&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var A=x.name==null?null:""+x.name;if(x.type==="hidden"&&a.getAttribute("name")===A)return a}else return a;if(a=Ko(a.nextSibling),a===null)break}return null}function RB(a,l,p){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!p||(a=Ko(a.nextSibling),a===null))return null;return a}function mD(a,l){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=Ko(a.nextSibling),a===null))return null;return a}function IM(a){return a.data==="$?"||a.data==="$~"}function OM(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function DB(a,l){var p=a.ownerDocument;if(a.data==="$~")a._reactRetry=l;else if(a.data!=="$?"||p.readyState!=="loading")l();else{var v=function(){l(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),a._reactRetry=v}}function Ko(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return a}var PM=null;function gD(a){a=a.nextSibling;for(var l=0;a;){if(a.nodeType===8){var p=a.data;if(p==="/$"||p==="/&"){if(l===0)return Ko(a.nextSibling);l--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||l++}a=a.nextSibling}return null}function vD(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(l===0)return a;l--}else p!=="/$"&&p!=="/&"||l++}a=a.previousSibling}return null}function yD(a,l,p){switch(l=DS(p),a){case"html":if(a=l.documentElement,!a)throw Error(n(452));return a;case"head":if(a=l.head,!a)throw Error(n(453));return a;case"body":if(a=l.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Iy(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);$(a)}var Qo=new Map,_D=new Set;function NS(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var zu=K.d;K.d={f:NB,r:IB,D:OB,C:PB,L:LB,m:UB,X:VB,S:kB,M:BB};function NB(){var a=zu.f(),l=ee();return a||l}function IB(a){var l=be(a);l!==null&&l.tag===5&&l.type==="form"?by(l):zu.r(a)}var Fm=typeof document>"u"?null:document;function SD(a,l,p){var v=Fm;if(v&&typeof l=="string"&&l){var x=En(l);x='link[rel="'+a+'"][href="'+x+'"]',typeof p=="string"&&(x+='[crossorigin="'+p+'"]'),_D.has(x)||(_D.add(x),a={rel:a,crossOrigin:p,href:l},v.querySelector(x)===null&&(l=v.createElement("link"),vs(l,"link",a),Ke(l),v.head.appendChild(l)))}}function OB(a){zu.D(a),SD("dns-prefetch",a,null)}function PB(a,l){zu.C(a,l),SD("preconnect",a,l)}function LB(a,l,p){zu.L(a,l,p);var v=Fm;if(v&&a&&l){var x='link[rel="preload"][as="'+En(l)+'"]';l==="image"&&p&&p.imageSrcSet?(x+='[imagesrcset="'+En(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(x+='[imagesizes="'+En(p.imageSizes)+'"]')):x+='[href="'+En(a)+'"]';var A=x;switch(l){case"style":A=Hm(a);break;case"script":A=Gm(a)}Qo.has(A)||(a=g({rel:"preload",href:l==="image"&&p&&p.imageSrcSet?void 0:a,as:l},p),Qo.set(A,a),v.querySelector(x)!==null||l==="style"&&v.querySelector(Oy(A))||l==="script"&&v.querySelector(Py(A))||(l=v.createElement("link"),vs(l,"link",a),Ke(l),v.head.appendChild(l)))}}function UB(a,l){zu.m(a,l);var p=Fm;if(p&&a){var v=l&&typeof l.as=="string"?l.as:"script",x='link[rel="modulepreload"][as="'+En(v)+'"][href="'+En(a)+'"]',A=x;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Gm(a)}if(!Qo.has(A)&&(a=g({rel:"modulepreload",href:a},l),Qo.set(A,a),p.querySelector(x)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Py(A)))return}v=p.createElement("link"),vs(v,"link",a),Ke(v),p.head.appendChild(v)}}}function kB(a,l,p){zu.S(a,l,p);var v=Fm;if(v&&a){var x=ge(v).hoistableStyles,A=Hm(a);l=l||"default";var F=x.get(A);if(!F){var Q={loading:0,preload:null};if(F=v.querySelector(Oy(A)))Q.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":l},p),(p=Qo.get(A))&&LM(a,p);var ue=F=v.createElement("link");Ke(ue),vs(ue,"link",a),ue._p=new Promise(function(Ae,Be){ue.onload=Ae,ue.onerror=Be}),ue.addEventListener("load",function(){Q.loading|=1}),ue.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,IS(F,l,v)}F={type:"stylesheet",instance:F,count:1,state:Q},x.set(A,F)}}}function VB(a,l){zu.X(a,l);var p=Fm;if(p&&a){var v=ge(p).hoistableScripts,x=Gm(a),A=v.get(x);A||(A=p.querySelector(Py(x)),A||(a=g({src:a,async:!0},l),(l=Qo.get(x))&&UM(a,l),A=p.createElement("script"),Ke(A),vs(A,"link",a),p.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(x,A))}}function BB(a,l){zu.M(a,l);var p=Fm;if(p&&a){var v=ge(p).hoistableScripts,x=Gm(a),A=v.get(x);A||(A=p.querySelector(Py(x)),A||(a=g({src:a,async:!0,type:"module"},l),(l=Qo.get(x))&&UM(a,l),A=p.createElement("script"),Ke(A),vs(A,"link",a),p.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(x,A))}}function bD(a,l,p,v){var x=(x=xe.current)?NS(x):null;if(!x)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(l=Hm(p.href),p=ge(x).hoistableStyles,v=p.get(l),v||(v={type:"style",instance:null,count:0,state:null},p.set(l,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){a=Hm(p.href);var A=ge(x).hoistableStyles,F=A.get(a);if(F||(x=x.ownerDocument||x,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(a,F),(A=x.querySelector(Oy(a)))&&!A._p&&(F.instance=A,F.state.loading=5),Qo.has(a)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Qo.set(a,p),A||zB(x,a,p,F.state))),l&&v===null)throw Error(n(528,""));return F}if(l&&v!==null)throw Error(n(529,""));return null;case"script":return l=p.async,p=p.src,typeof p=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Gm(p),p=ge(x).hoistableScripts,v=p.get(l),v||(v={type:"script",instance:null,count:0,state:null},p.set(l,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Hm(a){return'href="'+En(a)+'"'}function Oy(a){return'link[rel="stylesheet"]['+a+"]"}function xD(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function zB(a,l,p,v){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?v.loading=1:(l=a.createElement("link"),v.preload=l,l.addEventListener("load",function(){return v.loading|=1}),l.addEventListener("error",function(){return v.loading|=2}),vs(l,"link",p),Ke(l),a.head.appendChild(l))}function Gm(a){return'[src="'+En(a)+'"]'}function Py(a){return"script[async]"+a}function ED(a,l,p){if(l.count++,l.instance===null)switch(l.type){case"style":var v=a.querySelector('style[data-href~="'+En(p.href)+'"]');if(v)return l.instance=v,Ke(v),v;var x=g({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(a.ownerDocument||a).createElement("style"),Ke(v),vs(v,"style",x),IS(v,p.precedence,a),l.instance=v;case"stylesheet":x=Hm(p.href);var A=a.querySelector(Oy(x));if(A)return l.state.loading|=4,l.instance=A,Ke(A),A;v=xD(p),(x=Qo.get(x))&&LM(v,x),A=(a.ownerDocument||a).createElement("link"),Ke(A);var F=A;return F._p=new Promise(function(Q,ue){F.onload=Q,F.onerror=ue}),vs(A,"link",v),l.state.loading|=4,IS(A,p.precedence,a),l.instance=A;case"script":return A=Gm(p.src),(x=a.querySelector(Py(A)))?(l.instance=x,Ke(x),x):(v=p,(x=Qo.get(A))&&(v=g({},p),UM(v,x)),a=a.ownerDocument||a,x=a.createElement("script"),Ke(x),vs(x,"link",v),a.head.appendChild(x),l.instance=x);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(v=l.instance,l.state.loading|=4,IS(v,p.precedence,a));return l.instance}function IS(a,l,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=v.length?v[v.length-1]:null,A=x,F=0;F<v.length;F++){var Q=v[F];if(Q.dataset.precedence===l)A=Q;else if(A!==x)break}A?A.parentNode.insertBefore(a,A.nextSibling):(l=p.nodeType===9?p.head:p,l.insertBefore(a,l.firstChild))}function LM(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function UM(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var OS=null;function TD(a,l,p){if(OS===null){var v=new Map,x=OS=new Map;x.set(p,v)}else x=OS,v=x.get(p),v||(v=new Map,x.set(p,v));if(v.has(a))return v;for(v.set(a,null),p=p.getElementsByTagName(a),x=0;x<p.length;x++){var A=p[x];if(!(A[As]||A[hn]||a==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var F=A.getAttribute(l)||"";F=a+F;var Q=v.get(F);Q?Q.push(A):v.set(F,[A])}}return v}function MD(a,l,p){a=a.ownerDocument||a,a.head.insertBefore(p,l==="title"?a.querySelector("head > title"):null)}function FB(a,l,p){if(p===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function wD(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function HB(a,l,p,v){if(p.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var x=Hm(v.href),A=l.querySelector(Oy(x));if(A){l=A._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(a.count++,a=PS.bind(a),l.then(a,a)),p.state.loading|=4,p.instance=A,Ke(A);return}A=l.ownerDocument||l,v=xD(v),(x=Qo.get(x))&&LM(v,x),A=A.createElement("link"),Ke(A);var F=A;F._p=new Promise(function(Q,ue){F.onload=Q,F.onerror=ue}),vs(A,"link",v),p.instance=A}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(p,l),(l=p.state.preload)&&(p.state.loading&3)===0&&(a.count++,p=PS.bind(a),l.addEventListener("load",p),l.addEventListener("error",p))}}var kM=0;function GB(a,l){return a.stylesheets&&a.count===0&&US(a,a.stylesheets),0<a.count||0<a.imgCount?function(p){var v=setTimeout(function(){if(a.stylesheets&&US(a,a.stylesheets),a.unsuspend){var A=a.unsuspend;a.unsuspend=null,A()}},6e4+l);0<a.imgBytes&&kM===0&&(kM=62500*EB());var x=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&US(a,a.stylesheets),a.unsuspend)){var A=a.unsuspend;a.unsuspend=null,A()}},(a.imgBytes>kM?50:800)+l);return a.unsuspend=p,function(){a.unsuspend=null,clearTimeout(v),clearTimeout(x)}}:null}function PS(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)US(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var LS=null;function US(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,LS=new Map,l.forEach(jB,a),LS=null,PS.call(a))}function jB(a,l){if(!(l.state.loading&4)){var p=LS.get(a);if(p)var v=p.get(null);else{p=new Map,LS.set(a,p);for(var x=a.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<x.length;A++){var F=x[A];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(p.set(F.dataset.precedence,F),v=F)}v&&p.set(null,v)}x=l.instance,F=x.getAttribute("data-precedence"),A=p.get(F)||v,A===v&&p.set(null,x),p.set(F,x),this.count++,v=PS.bind(this),x.addEventListener("load",v),x.addEventListener("error",v),A?A.parentNode.insertBefore(x,A.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(x,a.firstChild)),l.state.loading|=4}}var Ly={$$typeof:I,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function qB(a,l,p,v,x,A,F,Q,ue){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=on(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=on(0),this.hiddenUpdates=on(null),this.identifierPrefix=v,this.onUncaughtError=x,this.onCaughtError=A,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function AD(a,l,p,v,x,A,F,Q,ue,Ae,Be,Qe){return a=new qB(a,l,p,F,ue,Ae,Be,Qe,Q),l=1,A===!0&&(l|=24),A=hs(3,null,null,l),a.current=A,A.stateNode=a,l=Gv(),l.refCount++,a.pooledCache=l,l.refCount++,A.memoizedState={element:v,isDehydrated:p,cache:l},Kv(A),a}function CD(a){return a?(a=gc,a):gc}function RD(a,l,p,v,x,A){x=CD(x),v.context===null?v.context=x:v.pendingContext=x,v=zo(l),v.payload={element:p},A=A===void 0?null:A,A!==null&&(v.callback=A),p=bl(a,v,l),p!==null&&(f(p,a,l),Tc(p,a,l))}function DD(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<l?p:l}}function VM(a,l){DD(a,l),(a=a.alternate)&&DD(a,l)}function ND(a){if(a.tag===13||a.tag===31){var l=mc(a,67108864);l!==null&&f(l,a,67108864),VM(a,67108864)}}function ID(a){if(a.tag===13||a.tag===31){var l=gs();l=Lr(l);var p=mc(a,l);p!==null&&f(p,a,l),VM(a,l)}}var kS=!0;function YB(a,l,p,v){var x=H.T;H.T=null;var A=K.p;try{K.p=2,BM(a,l,p,v)}finally{K.p=A,H.T=x}}function WB(a,l,p,v){var x=H.T;H.T=null;var A=K.p;try{K.p=8,BM(a,l,p,v)}finally{K.p=A,H.T=x}}function BM(a,l,p,v){if(kS){var x=zM(v);if(x===null)MM(a,l,v,VS,p),PD(a,v);else if(KB(x,a,l,p,v))v.stopPropagation();else if(PD(a,v),l&4&&-1<XB.indexOf(a)){for(;x!==null;){var A=be(x);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var F=nt(A.pendingLanes);if(F!==0){var Q=A;for(Q.pendingLanes|=2,Q.entangledLanes|=2;F;){var ue=1<<31-gt(F);Q.entanglements[1]|=ue,F&=~ue}Oc(A),(Vn&6)===0&&(ba=X()+500,Ry(0))}}break;case 31:case 13:Q=mc(A,2),Q!==null&&f(Q,A,2),ee(),VM(A,2)}if(A=zM(v),A===null&&MM(a,l,v,VS,p),A===x)break;x=A}x!==null&&v.stopPropagation()}else MM(a,l,v,null,p)}}function zM(a){return a=ia(a),FM(a)}var VS=null;function FM(a){if(VS=null,a=me(a),a!==null){var l=s(a);if(l===null)a=null;else{var p=l.tag;if(p===13){if(a=o(l),a!==null)return a;a=null}else if(p===31){if(a=c(l),a!==null)return a;a=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return VS=a,null}function OD(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case Pe:return 2;case $e:return 8;case ke:case It:return 32;case ct:return 268435456;default:return 32}default:return 32}}var HM=!1,of=null,lf=null,cf=null,Uy=new Map,ky=new Map,uf=[],XB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function PD(a,l){switch(a){case"focusin":case"focusout":of=null;break;case"dragenter":case"dragleave":lf=null;break;case"mouseover":case"mouseout":cf=null;break;case"pointerover":case"pointerout":Uy.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ky.delete(l.pointerId)}}function Vy(a,l,p,v,x,A){return a===null||a.nativeEvent!==A?(a={blockedOn:l,domEventName:p,eventSystemFlags:v,nativeEvent:A,targetContainers:[x]},l!==null&&(l=be(l),l!==null&&ND(l)),a):(a.eventSystemFlags|=v,l=a.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),a)}function KB(a,l,p,v,x){switch(l){case"focusin":return of=Vy(of,a,l,p,v,x),!0;case"dragenter":return lf=Vy(lf,a,l,p,v,x),!0;case"mouseover":return cf=Vy(cf,a,l,p,v,x),!0;case"pointerover":var A=x.pointerId;return Uy.set(A,Vy(Uy.get(A)||null,a,l,p,v,x)),!0;case"gotpointercapture":return A=x.pointerId,ky.set(A,Vy(ky.get(A)||null,a,l,p,v,x)),!0}return!1}function LD(a){var l=me(a.target);if(l!==null){var p=s(l);if(p!==null){if(l=p.tag,l===13){if(l=o(p),l!==null){a.blockedOn=l,zi(a.priority,function(){ID(p)});return}}else if(l===31){if(l=c(p),l!==null){a.blockedOn=l,zi(a.priority,function(){ID(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function BS(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var p=zM(a.nativeEvent);if(p===null){p=a.nativeEvent;var v=new p.constructor(p.type,p);pu=v,p.target.dispatchEvent(v),pu=null}else return l=be(p),l!==null&&ND(l),a.blockedOn=p,!1;l.shift()}return!0}function UD(a,l,p){BS(a)&&p.delete(l)}function QB(){HM=!1,of!==null&&BS(of)&&(of=null),lf!==null&&BS(lf)&&(lf=null),cf!==null&&BS(cf)&&(cf=null),Uy.forEach(UD),ky.forEach(UD)}function zS(a,l){a.blockedOn===l&&(a.blockedOn=null,HM||(HM=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,QB)))}var FS=null;function kD(a){FS!==a&&(FS=a,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){FS===a&&(FS=null);for(var l=0;l<a.length;l+=3){var p=a[l],v=a[l+1],x=a[l+2];if(typeof v!="function"){if(FM(v||p)===null)continue;break}var A=be(p);A!==null&&(a.splice(l,3),l-=3,Sy(A,{pending:!0,data:x,method:p.method,action:v},v,x))}}))}function jm(a){function l(ue){return zS(ue,a)}of!==null&&zS(of,a),lf!==null&&zS(lf,a),cf!==null&&zS(cf,a),Uy.forEach(l),ky.forEach(l);for(var p=0;p<uf.length;p++){var v=uf[p];v.blockedOn===a&&(v.blockedOn=null)}for(;0<uf.length&&(p=uf[0],p.blockedOn===null);)LD(p),p.blockedOn===null&&uf.shift();if(p=(a.ownerDocument||a).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var x=p[v],A=p[v+1],F=x[Ii]||null;if(typeof A=="function")F||kD(p);else if(F){var Q=null;if(A&&A.hasAttribute("formAction")){if(x=A,F=A[Ii]||null)Q=F.formAction;else if(FM(x)!==null)continue}else Q=F.action;typeof Q=="function"?p[v+1]=Q:(p.splice(v,3),v-=3),kD(p)}}}function VD(){function a(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(F){return x=F})},focusReset:"manual",scroll:"manual"})}function l(){x!==null&&(x(),x=null),v||setTimeout(p,20)}function p(){if(!v&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,x=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(p,100),function(){v=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),x!==null&&(x(),x=null)}}}function GM(a){this._internalRoot=a}HS.prototype.render=GM.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(n(409));var p=l.current,v=gs();RD(p,v,a,l,null,null)},HS.prototype.unmount=GM.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;RD(a.current,2,null,a,null,null),ee(),l[ws]=null}};function HS(a){this._internalRoot=a}HS.prototype.unstable_scheduleHydration=function(a){if(a){var l=Wr();a={blockedOn:null,target:a,priority:l};for(var p=0;p<uf.length&&l!==0&&l<uf[p].priority;p++);uf.splice(p,0,a),p===0&&LD(a)}};var BD=e.version;if(BD!=="19.2.0")throw Error(n(527,BD,"19.2.0"));K.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=d(l),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var ZB={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var GS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!GS.isDisabled&&GS.supportsFiber)try{Ze=GS.inject(ZB),at=GS}catch{}}return zy.createRoot=function(a,l){if(!r(a))throw Error(n(299));var p=!1,v="",x=Ty,A=bS,F=Am;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(F=l.onRecoverableError)),l=AD(a,1,!1,null,null,p,v,null,x,A,F,VD),a[ws]=l.current,TM(a),new GM(l)},zy.hydrateRoot=function(a,l,p){if(!r(a))throw Error(n(299));var v=!1,x="",A=Ty,F=bS,Q=Am,ue=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(x=p.identifierPrefix),p.onUncaughtError!==void 0&&(A=p.onUncaughtError),p.onCaughtError!==void 0&&(F=p.onCaughtError),p.onRecoverableError!==void 0&&(Q=p.onRecoverableError),p.formState!==void 0&&(ue=p.formState)),l=AD(a,1,!0,l,p??null,v,x,ue,A,F,Q,VD),l.context=CD(null),p=l.current,v=gs(),v=Lr(v),x=zo(v),x.callback=null,bl(p,x,v),p=v,l.current.lanes=p,br(l,p),Oc(l),a[ws]=l.current,TM(a),new HS(l)},zy.version="19.2.0",zy}var KD;function oz(){if(KD)return YM.exports;KD=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),YM.exports=az(),YM.exports}var lz=oz();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var QD="popstate";function cz(i={}){function e(r,s){let{pathname:o="/",search:c="",hash:h=""}=Up(r.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),N1("",{pathname:o,search:c,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){let o=r.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let h=r.location.href,d=h.indexOf("#");c=d===-1?h:h.slice(0,d)}return c+"#"+(typeof s=="string"?s:N_(s))}function n(r,s){ql(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return hz(e,t,n,i)}function ir(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ql(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uz(){return Math.random().toString(36).substring(2,10)}function ZD(i,e){return{usr:i.state,key:i.key,idx:e}}function N1(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Up(e):e,state:t,key:e&&e.key||n||uz()}}function N_({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Up(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function hz(i,e,t,n={}){let{window:r=document.defaultView,v5Compat:s=!1}=n,o=r.history,c="POP",h=null,d=m();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function m(){return(o.state||{idx:null}).idx}function g(){c="POP";let w=m(),T=w==null?null:w-d;d=w,h&&h({action:c,location:C.location,delta:T})}function _(w,T){c="PUSH";let D=N1(C.location,w,T);t&&t(D,w),d=m()+1;let I=ZD(D,d),L=C.createHref(D);try{o.pushState(I,"",L)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;r.location.assign(L)}s&&h&&h({action:c,location:C.location,delta:1})}function S(w,T){c="REPLACE";let D=N1(C.location,w,T);t&&t(D,w),d=m();let I=ZD(D,d),L=C.createHref(D);o.replaceState(I,"",L),s&&h&&h({action:c,location:C.location,delta:0})}function M(w){return fz(w)}let C={get action(){return c},get location(){return i(r,o)},listen(w){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(QD,g),h=w,()=>{r.removeEventListener(QD,g),h=null}},createHref(w){return e(r,w)},createURL:M,encodeLocation(w){let T=M(w);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:_,replace:S,go(w){return o.go(w)}};return C}function fz(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ir(t,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:N_(i);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function NP(i,e,t="/"){return dz(i,e,t,!1)}function dz(i,e,t,n){let r=typeof e=="string"?Up(e):e,s=oh(r.pathname||"/",t);if(s==null)return null;let o=IP(i);pz(o);let c=null;for(let h=0;c==null&&h<o.length;++h){let d=Mz(s);c=Ez(o[h],d,n)}return c}function IP(i,e=[],t=[],n="",r=!1){let s=(o,c,h=r,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(n)&&h)return;ir(m.relativePath.startsWith(n),`Absolute route path "${m.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(n.length)}let g=th([n,m.relativePath]),_=t.concat(m);o.children&&o.children.length>0&&(ir(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),IP(o.children,e,_,g,h)),!(o.path==null&&!o.index)&&e.push({path:g,score:bz(g,o.index),routesMeta:_})};return i.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))s(o,c);else for(let h of OP(o.path))s(o,c,!0,h)}),e}function OP(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return r?[s,""]:[s];let o=OP(n.join("/")),c=[];return c.push(...o.map(h=>h===""?s:[s,h].join("/"))),r&&c.push(...o),c.map(h=>i.startsWith("/")&&h===""?"/":h)}function pz(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:xz(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var mz=/^:[\w-]+$/,gz=3,vz=2,yz=1,_z=10,Sz=-2,JD=i=>i==="*";function bz(i,e){let t=i.split("/"),n=t.length;return t.some(JD)&&(n+=Sz),e&&(n+=vz),t.filter(r=>!JD(r)).reduce((r,s)=>r+(mz.test(s)?gz:s===""?yz:_z),n)}function xz(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function Ez(i,e,t=!1){let{routesMeta:n}=i,r={},s="/",o=[];for(let c=0;c<n.length;++c){let h=n[c],d=c===n.length-1,m=s==="/"?e:e.slice(s.length)||"/",g=xx({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},m),_=h.route;if(!g&&d&&t&&!n[n.length-1].route.index&&(g=xx({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!g)return null;Object.assign(r,g.params),o.push({params:r,pathname:th([s,g.pathname]),pathnameBase:Rz(th([s,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(s=th([s,g.pathnameBase]))}return o}function xx(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=Tz(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:n.reduce((d,{paramName:m,isOptional:g},_)=>{if(m==="*"){let M=c[_]||"";o=s.slice(0,s.length-M.length).replace(/(.)\/+$/,"$1")}const S=c[_];return g&&!S?d[m]=void 0:d[m]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:i}}function Tz(i,e=!1,t=!0){ql(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,h)=>(n.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function Mz(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ql(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function oh(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function wz(i,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?Up(i):i;return{pathname:t?t.startsWith("/")?t:Az(t,e):e,search:Dz(n),hash:Nz(r)}}function Az(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function QM(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Cz(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function PP(i){let e=Cz(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function LP(i,e,t,n=!1){let r;typeof i=="string"?r=Up(i):(r={...i},ir(!r.pathname||!r.pathname.includes("?"),QM("?","pathname","search",r)),ir(!r.pathname||!r.pathname.includes("#"),QM("#","pathname","hash",r)),ir(!r.search||!r.search.includes("#"),QM("#","search","hash",r)));let s=i===""||r.pathname==="",o=s?"/":r.pathname,c;if(o==null)c=t;else{let g=e.length-1;if(!n&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),g-=1;r.pathname=_.join("/")}c=g>=0?e[g]:"/"}let h=wz(r,c),d=o&&o!=="/"&&o.endsWith("/"),m=(s||o===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(d||m)&&(h.pathname+="/"),h}var th=i=>i.join("/").replace(/\/\/+/g,"/"),Rz=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Dz=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Nz=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Iz(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var UP=["POST","PUT","PATCH","DELETE"];new Set(UP);var Oz=["GET",...UP];new Set(Oz);var uv=ne.createContext(null);uv.displayName="DataRouter";var KE=ne.createContext(null);KE.displayName="DataRouterState";ne.createContext(!1);var kP=ne.createContext({isTransitioning:!1});kP.displayName="ViewTransition";var Pz=ne.createContext(new Map);Pz.displayName="Fetchers";var Lz=ne.createContext(null);Lz.displayName="Await";var lu=ne.createContext(null);lu.displayName="Navigation";var u0=ne.createContext(null);u0.displayName="Location";var yh=ne.createContext({outlet:null,matches:[],isDataRoute:!1});yh.displayName="Route";var kA=ne.createContext(null);kA.displayName="RouteError";function Uz(i,{relative:e}={}){ir(h0(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=ne.useContext(lu),{hash:r,pathname:s,search:o}=f0(i,{relative:e}),c=s;return t!=="/"&&(c=s==="/"?t:th([t,s])),n.createHref({pathname:c,search:o,hash:r})}function h0(){return ne.useContext(u0)!=null}function kp(){return ir(h0(),"useLocation() may be used only in the context of a <Router> component."),ne.useContext(u0).location}var VP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BP(i){ne.useContext(lu).static||ne.useLayoutEffect(i)}function kz(){let{isDataRoute:i}=ne.useContext(yh);return i?Qz():Vz()}function Vz(){ir(h0(),"useNavigate() may be used only in the context of a <Router> component.");let i=ne.useContext(uv),{basename:e,navigator:t}=ne.useContext(lu),{matches:n}=ne.useContext(yh),{pathname:r}=kp(),s=JSON.stringify(PP(n)),o=ne.useRef(!1);return BP(()=>{o.current=!0}),ne.useCallback((h,d={})=>{if(ql(o.current,VP),!o.current)return;if(typeof h=="number"){t.go(h);return}let m=LP(h,JSON.parse(s),r,d.relative==="path");i==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:th([e,m.pathname])),(d.replace?t.replace:t.push)(m,d.state,d)},[e,t,s,r,i])}ne.createContext(null);function f0(i,{relative:e}={}){let{matches:t}=ne.useContext(yh),{pathname:n}=kp(),r=JSON.stringify(PP(t));return ne.useMemo(()=>LP(i,JSON.parse(r),n,e==="path"),[i,r,n,e])}function Bz(i,e){return zP(i,e)}function zP(i,e,t,n,r){ir(h0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=ne.useContext(lu),{matches:o}=ne.useContext(yh),c=o[o.length-1],h=c?c.params:{},d=c?c.pathname:"/",m=c?c.pathnameBase:"/",g=c&&c.route;{let D=g&&g.path||"";FP(d,!g||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let _=kp(),S;if(e){let D=typeof e=="string"?Up(e):e;ir(m==="/"||D.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${D.pathname}" was given in the \`location\` prop.`),S=D}else S=_;let M=S.pathname||"/",C=M;if(m!=="/"){let D=m.replace(/^\//,"").split("/");C="/"+M.replace(/^\//,"").split("/").slice(D.length).join("/")}let w=NP(i,{pathname:C});ql(g||w!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),ql(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=jz(w&&w.map(D=>Object.assign({},D,{params:Object.assign({},h,D.params),pathname:th([m,s.encodeLocation?s.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?m:th([m,s.encodeLocation?s.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),o,t,n,r);return e&&T?ne.createElement(u0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},T):T}function zz(){let i=Kz(),e=Iz(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",i),o=ne.createElement(ne.Fragment,null,ne.createElement("p",null," Hey developer "),ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ne.createElement("code",{style:s},"ErrorBoundary")," or"," ",ne.createElement("code",{style:s},"errorElement")," prop on your route.")),ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},e),t?ne.createElement("pre",{style:r},t):null,o)}var Fz=ne.createElement(zz,null),Hz=class extends ne.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.unstable_onError?this.props.unstable_onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?ne.createElement(yh.Provider,{value:this.props.routeContext},ne.createElement(kA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Gz({routeContext:i,match:e,children:t}){let n=ne.useContext(uv);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),ne.createElement(yh.Provider,{value:i},t)}function jz(i,e=[],t=null,n=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let s=i,o=t?.errors;if(o!=null){let d=s.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);ir(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,h=-1;if(t)for(let d=0;d<s.length;d++){let m=s[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=d),m.route.id){let{loaderData:g,errors:_}=t,S=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!_||_[m.route.id]===void 0);if(m.route.lazy||S){c=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((d,m,g)=>{let _,S=!1,M=null,C=null;t&&(_=o&&m.route.id?o[m.route.id]:void 0,M=m.route.errorElement||Fz,c&&(h<0&&g===0?(FP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,C=null):h===g&&(S=!0,C=m.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,g+1)),T=()=>{let D;return _?D=M:S?D=C:m.route.Component?D=ne.createElement(m.route.Component,null):m.route.element?D=m.route.element:D=d,ne.createElement(Gz,{match:m,routeContext:{outlet:d,matches:w,isDataRoute:t!=null},children:D})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?ne.createElement(Hz,{location:t.location,revalidation:t.revalidation,component:M,error:_,children:T(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:n}):T()},null)}function VA(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qz(i){let e=ne.useContext(uv);return ir(e,VA(i)),e}function Yz(i){let e=ne.useContext(KE);return ir(e,VA(i)),e}function Wz(i){let e=ne.useContext(yh);return ir(e,VA(i)),e}function BA(i){let e=Wz(i),t=e.matches[e.matches.length-1];return ir(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function Xz(){return BA("useRouteId")}function Kz(){let i=ne.useContext(kA),e=Yz("useRouteError"),t=BA("useRouteError");return i!==void 0?i:e.errors?.[t]}function Qz(){let{router:i}=qz("useNavigate"),e=BA("useNavigate"),t=ne.useRef(!1);return BP(()=>{t.current=!0}),ne.useCallback(async(r,s={})=>{ql(t.current,VP),t.current&&(typeof r=="number"?i.navigate(r):await i.navigate(r,{fromRouteId:e,...s}))},[i,e])}var $D={};function FP(i,e,t){!e&&!$D[i]&&($D[i]=!0,ql(!1,t))}ne.memo(Zz);function Zz({routes:i,future:e,state:t,unstable_onError:n}){return zP(i,void 0,t,n,e)}function Jb(i){ir(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Jz({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:s=!1}){ir(!h0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=i.replace(/^\/*/,"/"),c=ne.useMemo(()=>({basename:o,navigator:r,static:s,future:{}}),[o,r,s]);typeof t=="string"&&(t=Up(t));let{pathname:h="/",search:d="",hash:m="",state:g=null,key:_="default"}=t,S=ne.useMemo(()=>{let M=oh(h,o);return M==null?null:{location:{pathname:M,search:d,hash:m,state:g,key:_},navigationType:n}},[o,h,d,m,g,_,n]);return ql(S!=null,`<Router basename="${o}"> is not able to match the URL "${h}${d}${m}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:ne.createElement(lu.Provider,{value:c},ne.createElement(u0.Provider,{children:e,value:S}))}function $z({children:i,location:e}){return Bz(I1(i),e)}function I1(i,e=[]){let t=[];return ne.Children.forEach(i,(n,r)=>{if(!ne.isValidElement(n))return;let s=[...e,r];if(n.type===ne.Fragment){t.push.apply(t,I1(n.props.children,s));return}ir(n.type===Jb,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ir(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=I1(n.props.children,s)),t.push(o)}),t}var $b="get",ex="application/x-www-form-urlencoded";function QE(i){return i!=null&&typeof i.tagName=="string"}function eF(i){return QE(i)&&i.tagName.toLowerCase()==="button"}function tF(i){return QE(i)&&i.tagName.toLowerCase()==="form"}function nF(i){return QE(i)&&i.tagName.toLowerCase()==="input"}function iF(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function rF(i,e){return i.button===0&&(!e||e==="_self")&&!iF(i)}var jS=null;function sF(){if(jS===null)try{new FormData(document.createElement("form"),0),jS=!1}catch{jS=!0}return jS}var aF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ZM(i){return i!=null&&!aF.has(i)?(ql(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ex}"`),null):i}function oF(i,e){let t,n,r,s,o;if(tF(i)){let c=i.getAttribute("action");n=c?oh(c,e):null,t=i.getAttribute("method")||$b,r=ZM(i.getAttribute("enctype"))||ex,s=new FormData(i)}else if(eF(i)||nF(i)&&(i.type==="submit"||i.type==="image")){let c=i.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=i.getAttribute("formaction")||c.getAttribute("action");if(n=h?oh(h,e):null,t=i.getAttribute("formmethod")||c.getAttribute("method")||$b,r=ZM(i.getAttribute("formenctype"))||ZM(c.getAttribute("enctype"))||ex,s=new FormData(c,i),!sF()){let{name:d,type:m,value:g}=i;if(m==="image"){let _=d?`${d}.`:"";s.append(`${_}x`,"0"),s.append(`${_}y`,"0")}else d&&s.append(d,g)}}else{if(QE(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=$b,n=null,r=ex,o=i}return s&&r==="text/plain"&&(o=s,s=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zA(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function lF(i,e,t){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&oh(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function cF(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uF(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function hF(i,e,t){let n=await Promise.all(i.map(async r=>{let s=e.routes[r.route.id];if(s){let o=await cF(s,t);return o.links?o.links():[]}return[]}));return mF(n.flat(1).filter(uF).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function e2(i,e,t,n,r,s){let o=(h,d)=>t[d]?h.route.id!==t[d].route.id:!0,c=(h,d)=>t[d].pathname!==h.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==h.params["*"];return s==="assets"?e.filter((h,d)=>o(h,d)||c(h,d)):s==="data"?e.filter((h,d)=>{let m=n.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(o(h,d)||c(h,d))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function fF(i,e,{includeHydrateFallback:t}={}){return dF(i.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function dF(i){return[...new Set(i)]}function pF(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function mF(i,e){let t=new Set;return new Set(e),i.reduce((n,r)=>{let s=JSON.stringify(pF(r));return t.has(s)||(t.add(s),n.push({key:s,link:r})),n},[])}function HP(){let i=ne.useContext(uv);return zA(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function gF(){let i=ne.useContext(KE);return zA(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var FA=ne.createContext(void 0);FA.displayName="FrameworkContext";function GP(){let i=ne.useContext(FA);return zA(i,"You must render this element inside a <HydratedRouter> element"),i}function vF(i,e){let t=ne.useContext(FA),[n,r]=ne.useState(!1),[s,o]=ne.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:d,onMouseLeave:m,onTouchStart:g}=e,_=ne.useRef(null);ne.useEffect(()=>{if(i==="render"&&o(!0),i==="viewport"){let C=T=>{T.forEach(D=>{o(D.isIntersecting)})},w=new IntersectionObserver(C,{threshold:.5});return _.current&&w.observe(_.current),()=>{w.disconnect()}}},[i]),ne.useEffect(()=>{if(n){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[n]);let S=()=>{r(!0)},M=()=>{r(!1),o(!1)};return t?i!=="intent"?[s,_,{}]:[s,_,{onFocus:Fy(c,S),onBlur:Fy(h,M),onMouseEnter:Fy(d,S),onMouseLeave:Fy(m,M),onTouchStart:Fy(g,S)}]:[!1,_,{}]}function Fy(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function yF({page:i,...e}){let{router:t}=HP(),n=ne.useMemo(()=>NP(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?ne.createElement(SF,{page:i,matches:n,...e}):null}function _F(i){let{manifest:e,routeModules:t}=GP(),[n,r]=ne.useState([]);return ne.useEffect(()=>{let s=!1;return hF(i,e,t).then(o=>{s||r(o)}),()=>{s=!0}},[i,e,t]),n}function SF({page:i,matches:e,...t}){let n=kp(),{manifest:r,routeModules:s}=GP(),{basename:o}=HP(),{loaderData:c,matches:h}=gF(),d=ne.useMemo(()=>e2(i,e,h,r,n,"data"),[i,e,h,r,n]),m=ne.useMemo(()=>e2(i,e,h,r,n,"assets"),[i,e,h,r,n]),g=ne.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let M=new Set,C=!1;if(e.forEach(T=>{let D=r.routes[T.route.id];!D||!D.hasLoader||(!d.some(I=>I.route.id===T.route.id)&&T.route.id in c&&s[T.route.id]?.shouldRevalidate||D.hasClientLoader?C=!0:M.add(T.route.id))}),M.size===0)return[];let w=lF(i,o,"data");return C&&M.size>0&&w.searchParams.set("_routes",e.filter(T=>M.has(T.route.id)).map(T=>T.route.id).join(",")),[w.pathname+w.search]},[o,c,n,r,d,e,i,s]),_=ne.useMemo(()=>fF(m,r),[m,r]),S=_F(m);return ne.createElement(ne.Fragment,null,g.map(M=>ne.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),_.map(M=>ne.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),S.map(({key:M,link:C})=>ne.createElement("link",{key:M,nonce:t.nonce,...C})))}function bF(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var jP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jP&&(window.__reactRouterVersion="7.9.4")}catch{}function xF({basename:i,children:e,window:t}){let n=ne.useRef();n.current==null&&(n.current=cz({window:t,v5Compat:!0}));let r=n.current,[s,o]=ne.useState({action:r.action,location:r.location}),c=ne.useCallback(h=>{ne.startTransition(()=>o(h))},[o]);return ne.useLayoutEffect(()=>r.listen(c),[r,c]),ne.createElement(Jz,{basename:i,children:e,location:s.location,navigationType:s.action,navigator:r})}var qP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YP=ne.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:s,replace:o,state:c,target:h,to:d,preventScrollReset:m,viewTransition:g,..._},S){let{basename:M}=ne.useContext(lu),C=typeof d=="string"&&qP.test(d),w,T=!1;if(typeof d=="string"&&C&&(w=d,jP))try{let N=new URL(window.location.href),O=d.startsWith("//")?new URL(N.protocol+d):new URL(d),z=oh(O.pathname,M);O.origin===N.origin&&z!=null?d=z+O.search+O.hash:T=!0}catch{ql(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=Uz(d,{relative:r}),[I,L,j]=vF(n,_),Y=wF(d,{replace:o,state:c,target:h,preventScrollReset:m,relative:r,viewTransition:g});function k(N){e&&e(N),N.defaultPrevented||Y(N)}let V=ne.createElement("a",{..._,...j,href:w||D,onClick:T||s?e:k,ref:bF(S,L),target:h,"data-discover":!C&&t==="render"?"true":void 0});return I&&!C?ne.createElement(ne.Fragment,null,V,ne.createElement(yF,{page:D})):V});YP.displayName="Link";var EF=ne.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:s,to:o,viewTransition:c,children:h,...d},m){let g=f0(o,{relative:d.relative}),_=kp(),S=ne.useContext(KE),{navigator:M,basename:C}=ne.useContext(lu),w=S!=null&&NF(g)&&c===!0,T=M.encodeLocation?M.encodeLocation(g).pathname:g.pathname,D=_.pathname,I=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(D=D.toLowerCase(),I=I?I.toLowerCase():null,T=T.toLowerCase()),I&&C&&(I=oh(I,C)||I);const L=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let j=D===T||!r&&D.startsWith(T)&&D.charAt(L)==="/",Y=I!=null&&(I===T||!r&&I.startsWith(T)&&I.charAt(T.length)==="/"),k={isActive:j,isPending:Y,isTransitioning:w},V=j?e:void 0,N;typeof n=="function"?N=n(k):N=[n,j?"active":null,Y?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(k):s;return ne.createElement(YP,{...d,"aria-current":V,className:N,ref:m,style:O,to:o,viewTransition:c},typeof h=="function"?h(k):h)});EF.displayName="NavLink";var TF=ne.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:s,method:o=$b,action:c,onSubmit:h,relative:d,preventScrollReset:m,viewTransition:g,..._},S)=>{let M=RF(),C=DF(c,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&qP.test(c),D=I=>{if(h&&h(I),I.defaultPrevented)return;I.preventDefault();let L=I.nativeEvent.submitter,j=L?.getAttribute("formmethod")||o;M(L||I.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:r,state:s,relative:d,preventScrollReset:m,viewTransition:g})};return ne.createElement("form",{ref:S,method:w,action:C,onSubmit:n?h:D,..._,"data-discover":!T&&i==="render"?"true":void 0})});TF.displayName="Form";function MF(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WP(i){let e=ne.useContext(uv);return ir(e,MF(i)),e}function wF(i,{target:e,replace:t,state:n,preventScrollReset:r,relative:s,viewTransition:o}={}){let c=kz(),h=kp(),d=f0(i,{relative:s});return ne.useCallback(m=>{if(rF(m,e)){m.preventDefault();let g=t!==void 0?t:N_(h)===N_(d);c(i,{replace:g,state:n,preventScrollReset:r,relative:s,viewTransition:o})}},[h,c,d,t,n,e,i,r,s,o])}var AF=0,CF=()=>`__${String(++AF)}__`;function RF(){let{router:i}=WP("useSubmit"),{basename:e}=ne.useContext(lu),t=Xz();return ne.useCallback(async(n,r={})=>{let{action:s,method:o,encType:c,formData:h,body:d}=oF(n,e);if(r.navigate===!1){let m=r.fetcherKey||CF();await i.fetch(m,t,r.action||s,{preventScrollReset:r.preventScrollReset,formData:h,body:d,formMethod:r.method||o,formEncType:r.encType||c,flushSync:r.flushSync})}else await i.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:h,body:d,formMethod:r.method||o,formEncType:r.encType||c,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,e,t])}function DF(i,{relative:e}={}){let{basename:t}=ne.useContext(lu),n=ne.useContext(yh);ir(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),s={...f0(i||".",{relative:e})},o=kp();if(i==null){s.search=o.search;let c=new URLSearchParams(s.search),h=c.getAll("index");if(h.some(m=>m==="")){c.delete("index"),h.filter(g=>g).forEach(g=>c.append("index",g));let m=c.toString();s.search=m?`?${m}`:""}}return(!i||i===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:th([t,s.pathname])),N_(s)}function NF(i,{relative:e}={}){let t=ne.useContext(kP);ir(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=WP("useViewTransitionState"),r=f0(i,{relative:e});if(!t.isTransitioning)return!1;let s=oh(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=oh(t.nextLocation.pathname,n)||t.nextLocation.pathname;return xx(r.pathname,o)!=null||xx(r.pathname,s)!=null}var XP=DP();const IF=XE(XP),OF=()=>{};var t2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=function(i){const e=[];let t=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},PF=function(i){const e=[];let t=0,n=0;for(;t<i.length;){const r=i[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=i[t++];e[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=i[t++],o=i[t++],c=i[t++],h=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const s=i[t++],o=i[t++];e[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},QP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const s=i[r],o=r+1<i.length,c=o?i[r+1]:0,h=r+2<i.length,d=h?i[r+2]:0,m=s>>2,g=(s&3)<<4|c>>4;let _=(c&15)<<2|d>>6,S=d&63;h||(S=64,o||(_=64)),n.push(t[m],t[g],t[_],t[S])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(KP(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):PF(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const s=t[i.charAt(r++)],c=r<i.length?t[i.charAt(r)]:0;++r;const d=r<i.length?t[i.charAt(r)]:64;++r;const g=r<i.length?t[i.charAt(r)]:64;if(++r,s==null||c==null||d==null||g==null)throw new LF;const _=s<<2|c>>4;if(n.push(_),d!==64){const S=c<<4&240|d>>2;if(n.push(S),g!==64){const M=d<<6&192|g;n.push(M)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class LF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UF=function(i){const e=KP(i);return QP.encodeByteArray(e,!0)},Ex=function(i){return UF(i).replace(/\./g,"")},ZP=function(i){try{return QP.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=()=>kF().__FIREBASE_DEFAULTS__,BF=()=>{if(typeof process>"u"||typeof t2>"u")return;const i=t2.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},zF=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&ZP(i[1]);return e&&JSON.parse(e)},ZE=()=>{try{return OF()||VF()||BF()||zF()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},JP=i=>ZE()?.emulatorHosts?.[i],FF=i=>{const e=JP(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},$P=()=>ZE()?.config,e3=i=>ZE()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function t3(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Ex(JSON.stringify(t)),Ex(JSON.stringify(o)),""].join(".")}const d_={};function jF(){const i={prod:[],emulator:[]};for(const e of Object.keys(d_))d_[e]?i.emulator.push(e):i.prod.push(e);return i}function qF(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let n2=!1;function n3(i,e){if(typeof window>"u"||typeof document>"u"||!hv(window.location.host)||d_[i]===e||d_[i]||n2)return;d_[i]=e;function t(_){return`__firebase__banner__${_}`}const n="__firebase__banner",s=jF().prod.length>0;function o(){const _=document.getElementById(n);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,S){_.setAttribute("width","24"),_.setAttribute("id",S),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function d(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{n2=!0,o()},_}function m(_,S){_.setAttribute("id",S),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=qF(n),S=t("text"),M=document.getElementById(S)||document.createElement("span"),C=t("learnmore"),w=document.getElementById(C)||document.createElement("a"),T=t("preprendIcon"),D=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const I=_.element;c(I),m(w,C);const L=d();h(D,T),I.append(D,M,w,L),document.body.appendChild(I)}s?(M.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ea())}function WF(){const i=ZE()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function KF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QF(){const i=ea();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function ZF(){return!WF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GA(){try{return typeof indexedDB=="object"}catch{return!1}}function jA(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}function i3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF="FirebaseError";class Jl extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=JF,Object.setPrototypeOf(this,Jl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vp.prototype.create)}}class Vp{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?$F(s,n):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new Jl(r,c,n)}}function $F(i,e){return i.replace(eH,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const eH=/\{\$([^}]+)}/g;function tH(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Vf(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const s=i[r],o=e[r];if(i2(s)&&i2(o)){if(!Vf(s,o))return!1}else if(s!==o)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function i2(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(i){const e=[];for(const[t,n]of Object.entries(i))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function n_(i){const e={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,s]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function i_(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function nH(i,e){const t=new iH(i,e);return t.subscribe.bind(t)}class iH{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");rH(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=JM),r.error===void 0&&(r.error=JM),r.complete===void 0&&(r.complete=JM);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rH(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function JM(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sH=1e3,aH=2,oH=14400*1e3,lH=.5;function r2(i,e=sH,t=aH){const n=e*Math.pow(t,i),r=Math.round(lH*n*(Math.random()-.5)*2);return Math.min(oH,n+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(i){return i&&i._delegate?i._delegate:i}class Yl{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cH=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new HF;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hH(e))try{this.getOrInitializeService({instanceIdentifier:rp})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(e=rp){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rp){return this.instances.has(e)}getOptions(e=rp){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);n===c&&o.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const s=this.instances.get(n);return s&&e(s,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:uH(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=rp){return this.component?this.component.multipleInstances?e:rp:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function uH(i){return i===rp?void 0:i}function hH(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cH(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Hn||(Hn={}));const dH={debug:Hn.DEBUG,verbose:Hn.VERBOSE,info:Hn.INFO,warn:Hn.WARN,error:Hn.ERROR,silent:Hn.SILENT},pH=Hn.INFO,mH={[Hn.DEBUG]:"log",[Hn.VERBOSE]:"log",[Hn.INFO]:"info",[Hn.WARN]:"warn",[Hn.ERROR]:"error"},gH=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),r=mH[e];if(r)console[r](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class JE{constructor(e){this.name=e,this._logLevel=pH,this._logHandler=gH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Hn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Hn.DEBUG,...e),this._logHandler(this,Hn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Hn.VERBOSE,...e),this._logHandler(this,Hn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Hn.INFO,...e),this._logHandler(this,Hn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Hn.WARN,...e),this._logHandler(this,Hn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Hn.ERROR,...e),this._logHandler(this,Hn.ERROR,...e)}}const vH=(i,e)=>e.some(t=>i instanceof t);let s2,a2;function yH(){return s2||(s2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _H(){return a2||(a2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const r3=new WeakMap,O1=new WeakMap,s3=new WeakMap,$M=new WeakMap,qA=new WeakMap;function SH(i){const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{t(Nf(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&r3.set(t,i)}).catch(()=>{}),qA.set(e,i),e}function bH(i){if(O1.has(i))return;const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});O1.set(i,e)}let P1={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return O1.get(i);if(e==="objectStoreNames")return i.objectStoreNames||s3.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Nf(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function xH(i){P1=i(P1)}function EH(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(ew(this),e,...t);return s3.set(n,e.sort?e.sort():[e]),Nf(n)}:_H().includes(i)?function(...e){return i.apply(ew(this),e),Nf(r3.get(this))}:function(...e){return Nf(i.apply(ew(this),e))}}function TH(i){return typeof i=="function"?EH(i):(i instanceof IDBTransaction&&bH(i),vH(i,yH())?new Proxy(i,P1):i)}function Nf(i){if(i instanceof IDBRequest)return SH(i);if($M.has(i))return $M.get(i);const e=TH(i);return e!==i&&($M.set(i,e),qA.set(e,i)),e}const ew=i=>qA.get(i);function a3(i,e,{blocked:t,upgrade:n,blocking:r,terminated:s}={}){const o=indexedDB.open(i,e),c=Nf(o);return n&&o.addEventListener("upgradeneeded",h=>{n(Nf(o.result),h.oldVersion,h.newVersion,Nf(o.transaction),h)}),t&&o.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{s&&h.addEventListener("close",()=>s()),r&&h.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const MH=["get","getKey","getAll","getAllKeys","count"],wH=["put","add","delete","clear"],tw=new Map;function o2(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(tw.get(e))return tw.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=wH.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||MH.includes(t)))return;const s=async function(o,...c){const h=this.transaction(o,r?"readwrite":"readonly");let d=h.store;return n&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),r&&h.done]))[0]};return tw.set(e,s),s}xH(i=>({...i,get:(e,t,n)=>o2(e,t)||i.get(e,t,n),has:(e,t)=>!!o2(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CH(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function CH(i){return i.getComponent()?.type==="VERSION"}const L1="@firebase/app",l2="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new JE("@firebase/app"),RH="@firebase/app-compat",DH="@firebase/analytics-compat",NH="@firebase/analytics",IH="@firebase/app-check-compat",OH="@firebase/app-check",PH="@firebase/auth",LH="@firebase/auth-compat",UH="@firebase/database",kH="@firebase/data-connect",VH="@firebase/database-compat",BH="@firebase/functions",zH="@firebase/functions-compat",FH="@firebase/installations",HH="@firebase/installations-compat",GH="@firebase/messaging",jH="@firebase/messaging-compat",qH="@firebase/performance",YH="@firebase/performance-compat",WH="@firebase/remote-config",XH="@firebase/remote-config-compat",KH="@firebase/storage",QH="@firebase/storage-compat",ZH="@firebase/firestore",JH="@firebase/ai",$H="@firebase/firestore-compat",e5="firebase",t5="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="[DEFAULT]",n5={[L1]:"fire-core",[RH]:"fire-core-compat",[NH]:"fire-analytics",[DH]:"fire-analytics-compat",[OH]:"fire-app-check",[IH]:"fire-app-check-compat",[PH]:"fire-auth",[LH]:"fire-auth-compat",[UH]:"fire-rtdb",[kH]:"fire-data-connect",[VH]:"fire-rtdb-compat",[BH]:"fire-fn",[zH]:"fire-fn-compat",[FH]:"fire-iid",[HH]:"fire-iid-compat",[GH]:"fire-fcm",[jH]:"fire-fcm-compat",[qH]:"fire-perf",[YH]:"fire-perf-compat",[WH]:"fire-rc",[XH]:"fire-rc-compat",[KH]:"fire-gcs",[QH]:"fire-gcs-compat",[ZH]:"fire-fst",[$H]:"fire-fst-compat",[JH]:"fire-vertex","fire-js":"fire-js",[e5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new Map,i5=new Map,k1=new Map;function c2(i,e){try{i.container.addComponent(e)}catch(t){lh.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function ru(i){const e=i.name;if(k1.has(e))return lh.debug(`There were multiple attempts to register component ${e}.`),!1;k1.set(e,i);for(const t of Tx.values())c2(t,i);for(const t of i5.values())c2(t,i);return!0}function Bp(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Vl(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},If=new Vp("app","Firebase",r5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Yl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw If.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=t5;function o3(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n={name:U1,automaticDataCollectionEnabled:!0,...e},r=n.name;if(typeof r!="string"||!r)throw If.create("bad-app-name",{appName:String(r)});if(t||(t=$P()),!t)throw If.create("no-options");const s=Tx.get(r);if(s){if(Vf(t,s.options)&&Vf(n,s.config))return s;throw If.create("duplicate-app",{appName:r})}const o=new fH(r);for(const h of k1.values())o.addComponent(h);const c=new s5(t,n,o);return Tx.set(r,c),c}function YA(i=U1){const e=Tx.get(i);if(!e&&i===U1&&$P())return o3();if(!e)throw If.create("no-app",{appName:i});return e}function nl(i,e,t){let n=n5[i]??i;t&&(n+=`-${t}`);const r=n.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const o=[`Unable to register library "${n}" with version "${e}":`];r&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lh.warn(o.join(" "));return}ru(new Yl(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5="firebase-heartbeat-database",o5=1,I_="firebase-heartbeat-store";let nw=null;function l3(){return nw||(nw=a3(a5,o5,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(I_)}catch(t){console.warn(t)}}}}).catch(i=>{throw If.create("idb-open",{originalErrorMessage:i.message})})),nw}async function l5(i){try{const t=(await l3()).transaction(I_),n=await t.objectStore(I_).get(c3(i));return await t.done,n}catch(e){if(e instanceof Jl)lh.warn(e.message);else{const t=If.create("idb-get",{originalErrorMessage:e?.message});lh.warn(t.message)}}}async function u2(i,e){try{const n=(await l3()).transaction(I_,"readwrite");await n.objectStore(I_).put(e,c3(i)),await n.done}catch(t){if(t instanceof Jl)lh.warn(t.message);else{const n=If.create("idb-set",{originalErrorMessage:t?.message});lh.warn(n.message)}}}function c3(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5=1024,u5=30;class h5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new d5(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=h2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(r=>r.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>u5){const r=p5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){lh.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=h2(),{heartbeatsToSend:t,unsentEntries:n}=f5(this._heartbeatsCache.heartbeats),r=Ex(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return lh.warn(e),""}}}function h2(){return new Date().toISOString().substring(0,10)}function f5(i,e=c5){const t=[];let n=i.slice();for(const r of i){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),f2(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),f2(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class d5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GA()?jA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await l5(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return u2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return u2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function f2(i){return Ex(JSON.stringify({version:2,heartbeats:i})).length}function p5(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let n=1;n<i.length;n++)i[n].date<t&&(t=i[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(i){ru(new Yl("platform-logger",e=>new AH(e),"PRIVATE")),ru(new Yl("heartbeat",e=>new h5(e),"PRIVATE")),nl(L1,l2,i),nl(L1,l2,"esm2020"),nl("fire-js","")}m5("");var g5="firebase",v5="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nl(g5,v5,"app");var d2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Of,u3;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,V){function N(){}N.prototype=V.prototype,k.F=V.prototype,k.prototype=new N,k.prototype.constructor=k,k.D=function(O,z,W){for(var q=Array(arguments.length-2),he=2;he<arguments.length;he++)q[he-2]=arguments[he];return V.prototype[z].apply(O,q)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,V,N){N||(N=0);const O=Array(16);if(typeof V=="string")for(var z=0;z<16;++z)O[z]=V.charCodeAt(N++)|V.charCodeAt(N++)<<8|V.charCodeAt(N++)<<16|V.charCodeAt(N++)<<24;else for(z=0;z<16;++z)O[z]=V[N++]|V[N++]<<8|V[N++]<<16|V[N++]<<24;V=k.g[0],N=k.g[1],z=k.g[2];let W=k.g[3],q;q=V+(W^N&(z^W))+O[0]+3614090360&4294967295,V=N+(q<<7&4294967295|q>>>25),q=W+(z^V&(N^z))+O[1]+3905402710&4294967295,W=V+(q<<12&4294967295|q>>>20),q=z+(N^W&(V^N))+O[2]+606105819&4294967295,z=W+(q<<17&4294967295|q>>>15),q=N+(V^z&(W^V))+O[3]+3250441966&4294967295,N=z+(q<<22&4294967295|q>>>10),q=V+(W^N&(z^W))+O[4]+4118548399&4294967295,V=N+(q<<7&4294967295|q>>>25),q=W+(z^V&(N^z))+O[5]+1200080426&4294967295,W=V+(q<<12&4294967295|q>>>20),q=z+(N^W&(V^N))+O[6]+2821735955&4294967295,z=W+(q<<17&4294967295|q>>>15),q=N+(V^z&(W^V))+O[7]+4249261313&4294967295,N=z+(q<<22&4294967295|q>>>10),q=V+(W^N&(z^W))+O[8]+1770035416&4294967295,V=N+(q<<7&4294967295|q>>>25),q=W+(z^V&(N^z))+O[9]+2336552879&4294967295,W=V+(q<<12&4294967295|q>>>20),q=z+(N^W&(V^N))+O[10]+4294925233&4294967295,z=W+(q<<17&4294967295|q>>>15),q=N+(V^z&(W^V))+O[11]+2304563134&4294967295,N=z+(q<<22&4294967295|q>>>10),q=V+(W^N&(z^W))+O[12]+1804603682&4294967295,V=N+(q<<7&4294967295|q>>>25),q=W+(z^V&(N^z))+O[13]+4254626195&4294967295,W=V+(q<<12&4294967295|q>>>20),q=z+(N^W&(V^N))+O[14]+2792965006&4294967295,z=W+(q<<17&4294967295|q>>>15),q=N+(V^z&(W^V))+O[15]+1236535329&4294967295,N=z+(q<<22&4294967295|q>>>10),q=V+(z^W&(N^z))+O[1]+4129170786&4294967295,V=N+(q<<5&4294967295|q>>>27),q=W+(N^z&(V^N))+O[6]+3225465664&4294967295,W=V+(q<<9&4294967295|q>>>23),q=z+(V^N&(W^V))+O[11]+643717713&4294967295,z=W+(q<<14&4294967295|q>>>18),q=N+(W^V&(z^W))+O[0]+3921069994&4294967295,N=z+(q<<20&4294967295|q>>>12),q=V+(z^W&(N^z))+O[5]+3593408605&4294967295,V=N+(q<<5&4294967295|q>>>27),q=W+(N^z&(V^N))+O[10]+38016083&4294967295,W=V+(q<<9&4294967295|q>>>23),q=z+(V^N&(W^V))+O[15]+3634488961&4294967295,z=W+(q<<14&4294967295|q>>>18),q=N+(W^V&(z^W))+O[4]+3889429448&4294967295,N=z+(q<<20&4294967295|q>>>12),q=V+(z^W&(N^z))+O[9]+568446438&4294967295,V=N+(q<<5&4294967295|q>>>27),q=W+(N^z&(V^N))+O[14]+3275163606&4294967295,W=V+(q<<9&4294967295|q>>>23),q=z+(V^N&(W^V))+O[3]+4107603335&4294967295,z=W+(q<<14&4294967295|q>>>18),q=N+(W^V&(z^W))+O[8]+1163531501&4294967295,N=z+(q<<20&4294967295|q>>>12),q=V+(z^W&(N^z))+O[13]+2850285829&4294967295,V=N+(q<<5&4294967295|q>>>27),q=W+(N^z&(V^N))+O[2]+4243563512&4294967295,W=V+(q<<9&4294967295|q>>>23),q=z+(V^N&(W^V))+O[7]+1735328473&4294967295,z=W+(q<<14&4294967295|q>>>18),q=N+(W^V&(z^W))+O[12]+2368359562&4294967295,N=z+(q<<20&4294967295|q>>>12),q=V+(N^z^W)+O[5]+4294588738&4294967295,V=N+(q<<4&4294967295|q>>>28),q=W+(V^N^z)+O[8]+2272392833&4294967295,W=V+(q<<11&4294967295|q>>>21),q=z+(W^V^N)+O[11]+1839030562&4294967295,z=W+(q<<16&4294967295|q>>>16),q=N+(z^W^V)+O[14]+4259657740&4294967295,N=z+(q<<23&4294967295|q>>>9),q=V+(N^z^W)+O[1]+2763975236&4294967295,V=N+(q<<4&4294967295|q>>>28),q=W+(V^N^z)+O[4]+1272893353&4294967295,W=V+(q<<11&4294967295|q>>>21),q=z+(W^V^N)+O[7]+4139469664&4294967295,z=W+(q<<16&4294967295|q>>>16),q=N+(z^W^V)+O[10]+3200236656&4294967295,N=z+(q<<23&4294967295|q>>>9),q=V+(N^z^W)+O[13]+681279174&4294967295,V=N+(q<<4&4294967295|q>>>28),q=W+(V^N^z)+O[0]+3936430074&4294967295,W=V+(q<<11&4294967295|q>>>21),q=z+(W^V^N)+O[3]+3572445317&4294967295,z=W+(q<<16&4294967295|q>>>16),q=N+(z^W^V)+O[6]+76029189&4294967295,N=z+(q<<23&4294967295|q>>>9),q=V+(N^z^W)+O[9]+3654602809&4294967295,V=N+(q<<4&4294967295|q>>>28),q=W+(V^N^z)+O[12]+3873151461&4294967295,W=V+(q<<11&4294967295|q>>>21),q=z+(W^V^N)+O[15]+530742520&4294967295,z=W+(q<<16&4294967295|q>>>16),q=N+(z^W^V)+O[2]+3299628645&4294967295,N=z+(q<<23&4294967295|q>>>9),q=V+(z^(N|~W))+O[0]+4096336452&4294967295,V=N+(q<<6&4294967295|q>>>26),q=W+(N^(V|~z))+O[7]+1126891415&4294967295,W=V+(q<<10&4294967295|q>>>22),q=z+(V^(W|~N))+O[14]+2878612391&4294967295,z=W+(q<<15&4294967295|q>>>17),q=N+(W^(z|~V))+O[5]+4237533241&4294967295,N=z+(q<<21&4294967295|q>>>11),q=V+(z^(N|~W))+O[12]+1700485571&4294967295,V=N+(q<<6&4294967295|q>>>26),q=W+(N^(V|~z))+O[3]+2399980690&4294967295,W=V+(q<<10&4294967295|q>>>22),q=z+(V^(W|~N))+O[10]+4293915773&4294967295,z=W+(q<<15&4294967295|q>>>17),q=N+(W^(z|~V))+O[1]+2240044497&4294967295,N=z+(q<<21&4294967295|q>>>11),q=V+(z^(N|~W))+O[8]+1873313359&4294967295,V=N+(q<<6&4294967295|q>>>26),q=W+(N^(V|~z))+O[15]+4264355552&4294967295,W=V+(q<<10&4294967295|q>>>22),q=z+(V^(W|~N))+O[6]+2734768916&4294967295,z=W+(q<<15&4294967295|q>>>17),q=N+(W^(z|~V))+O[13]+1309151649&4294967295,N=z+(q<<21&4294967295|q>>>11),q=V+(z^(N|~W))+O[4]+4149444226&4294967295,V=N+(q<<6&4294967295|q>>>26),q=W+(N^(V|~z))+O[11]+3174756917&4294967295,W=V+(q<<10&4294967295|q>>>22),q=z+(V^(W|~N))+O[2]+718787259&4294967295,z=W+(q<<15&4294967295|q>>>17),q=N+(W^(z|~V))+O[9]+3951481745&4294967295,k.g[0]=k.g[0]+V&4294967295,k.g[1]=k.g[1]+(z+(q<<21&4294967295|q>>>11))&4294967295,k.g[2]=k.g[2]+z&4294967295,k.g[3]=k.g[3]+W&4294967295}n.prototype.v=function(k,V){V===void 0&&(V=k.length);const N=V-this.blockSize,O=this.C;let z=this.h,W=0;for(;W<V;){if(z==0)for(;W<=N;)r(this,k,W),W+=this.blockSize;if(typeof k=="string"){for(;W<V;)if(O[z++]=k.charCodeAt(W++),z==this.blockSize){r(this,O),z=0;break}}else for(;W<V;)if(O[z++]=k[W++],z==this.blockSize){r(this,O),z=0;break}}this.h=z,this.o+=V},n.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var V=1;V<k.length-8;++V)k[V]=0;V=this.o*8;for(var N=k.length-8;N<k.length;++N)k[N]=V&255,V/=256;for(this.v(k),k=Array(16),V=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)k[V++]=this.g[N]>>>O&255;return k};function s(k,V){var N=c;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=V(k)}function o(k,V){this.h=V;const N=[];let O=!0;for(let z=k.length-1;z>=0;z--){const W=k[z]|0;O&&W==V||(N[z]=W,O=!1)}this.g=N}var c={};function h(k){return-128<=k&&k<128?s(k,function(V){return new o([V|0],V<0?-1:0)}):new o([k|0],k<0?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return g;if(k<0)return w(d(-k));const V=[];let N=1;for(let O=0;k>=N;O++)V[O]=k/N|0,N*=4294967296;return new o(V,0)}function m(k,V){if(k.length==0)throw Error("number format error: empty string");if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(k.charAt(0)=="-")return w(m(k.substring(1),V));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=d(Math.pow(V,8));let O=g;for(let W=0;W<k.length;W+=8){var z=Math.min(8,k.length-W);const q=parseInt(k.substring(W,W+z),V);z<8?(z=d(Math.pow(V,z)),O=O.j(z).add(d(q))):(O=O.j(N),O=O.add(d(q)))}return O}var g=h(0),_=h(1),S=h(16777216);i=o.prototype,i.m=function(){if(C(this))return-w(this).m();let k=0,V=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);k+=(O>=0?O:4294967296+O)*V,V*=4294967296}return k},i.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(M(this))return"0";if(C(this))return"-"+w(this).toString(k);const V=d(Math.pow(k,6));var N=this;let O="";for(;;){const z=L(N,V).g;N=T(N,z.j(V));let W=((N.g.length>0?N.g[0]:N.h)>>>0).toString(k);if(N=z,M(N))return W+O;for(;W.length<6;)W="0"+W;O=W+O}},i.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function M(k){if(k.h!=0)return!1;for(let V=0;V<k.g.length;V++)if(k.g[V]!=0)return!1;return!0}function C(k){return k.h==-1}i.l=function(k){return k=T(this,k),C(k)?-1:M(k)?0:1};function w(k){const V=k.g.length,N=[];for(let O=0;O<V;O++)N[O]=~k.g[O];return new o(N,~k.h).add(_)}i.abs=function(){return C(this)?w(this):this},i.add=function(k){const V=Math.max(this.g.length,k.g.length),N=[];let O=0;for(let z=0;z<=V;z++){let W=O+(this.i(z)&65535)+(k.i(z)&65535),q=(W>>>16)+(this.i(z)>>>16)+(k.i(z)>>>16);O=q>>>16,W&=65535,q&=65535,N[z]=q<<16|W}return new o(N,N[N.length-1]&-2147483648?-1:0)};function T(k,V){return k.add(w(V))}i.j=function(k){if(M(this)||M(k))return g;if(C(this))return C(k)?w(this).j(w(k)):w(w(this).j(k));if(C(k))return w(this.j(w(k)));if(this.l(S)<0&&k.l(S)<0)return d(this.m()*k.m());const V=this.g.length+k.g.length,N=[];for(var O=0;O<2*V;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let z=0;z<k.g.length;z++){const W=this.i(O)>>>16,q=this.i(O)&65535,he=k.i(z)>>>16,fe=k.i(z)&65535;N[2*O+2*z]+=q*fe,D(N,2*O+2*z),N[2*O+2*z+1]+=W*fe,D(N,2*O+2*z+1),N[2*O+2*z+1]+=q*he,D(N,2*O+2*z+1),N[2*O+2*z+2]+=W*he,D(N,2*O+2*z+2)}for(k=0;k<V;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=V;k<2*V;k++)N[k]=0;return new o(N,0)};function D(k,V){for(;(k[V]&65535)!=k[V];)k[V+1]+=k[V]>>>16,k[V]&=65535,V++}function I(k,V){this.g=k,this.h=V}function L(k,V){if(M(V))throw Error("division by zero");if(M(k))return new I(g,g);if(C(k))return V=L(w(k),V),new I(w(V.g),w(V.h));if(C(V))return V=L(k,w(V)),new I(w(V.g),V.h);if(k.g.length>30){if(C(k)||C(V))throw Error("slowDivide_ only works with positive integers.");for(var N=_,O=V;O.l(k)<=0;)N=j(N),O=j(O);var z=Y(N,1),W=Y(O,1);for(O=Y(O,2),N=Y(N,2);!M(O);){var q=W.add(O);q.l(k)<=0&&(z=z.add(N),W=q),O=Y(O,1),N=Y(N,1)}return V=T(k,z.j(V)),new I(z,V)}for(z=g;k.l(V)>=0;){for(N=Math.max(1,Math.floor(k.m()/V.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),W=d(N),q=W.j(V);C(q)||q.l(k)>0;)N-=O,W=d(N),q=W.j(V);M(W)&&(W=_),z=z.add(W),k=T(k,q)}return new I(z,k)}i.B=function(k){return L(this,k).h},i.and=function(k){const V=Math.max(this.g.length,k.g.length),N=[];for(let O=0;O<V;O++)N[O]=this.i(O)&k.i(O);return new o(N,this.h&k.h)},i.or=function(k){const V=Math.max(this.g.length,k.g.length),N=[];for(let O=0;O<V;O++)N[O]=this.i(O)|k.i(O);return new o(N,this.h|k.h)},i.xor=function(k){const V=Math.max(this.g.length,k.g.length),N=[];for(let O=0;O<V;O++)N[O]=this.i(O)^k.i(O);return new o(N,this.h^k.h)};function j(k){const V=k.g.length+1,N=[];for(let O=0;O<V;O++)N[O]=k.i(O)<<1|k.i(O-1)>>>31;return new o(N,k.h)}function Y(k,V){const N=V>>5;V%=32;const O=k.g.length-N,z=[];for(let W=0;W<O;W++)z[W]=V>0?k.i(W+N)>>>V|k.i(W+N+1)<<32-V:k.i(W+N);return new o(z,k.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,u3=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,Of=o}).apply(typeof d2<"u"?d2:typeof self<"u"?self:typeof window<"u"?window:{});var qS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var h3,r_,f3,tx,V1,d3,p3,m3;(function(){var i,e=Object.defineProperty;function t(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof qS=="object"&&qS];for(var P=0;P<b.length;++P){var G=b[P];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var n=t(this);function r(b,P){if(P)e:{var G=n;b=b.split(".");for(var te=0;te<b.length-1;te++){var Ee=b[te];if(!(Ee in G))break e;G=G[Ee]}b=b[b.length-1],te=G[b],P=P(te),P!=te&&P!=null&&e(G,b,{configurable:!0,writable:!0,value:P})}}r("Symbol.dispose",function(b){return b||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(b){return b||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(b){return b||function(P){var G=[],te;for(te in P)Object.prototype.hasOwnProperty.call(P,te)&&G.push([te,P[te]]);return G}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function c(b){var P=typeof b;return P=="object"&&b!=null||P=="function"}function h(b,P,G){return b.call.apply(b.bind,arguments)}function d(b,P,G){return d=h,d.apply(null,arguments)}function m(b,P){var G=Array.prototype.slice.call(arguments,1);return function(){var te=G.slice();return te.push.apply(te,arguments),b.apply(this,te)}}function g(b,P){function G(){}G.prototype=P.prototype,b.Z=P.prototype,b.prototype=new G,b.prototype.constructor=b,b.Ob=function(te,Ee,De){for(var ot=Array(arguments.length-2),cn=2;cn<arguments.length;cn++)ot[cn-2]=arguments[cn];return P.prototype[Ee].apply(te,ot)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?b=>b&&AsyncContext.Snapshot.wrap(b):b=>b;function S(b){const P=b.length;if(P>0){const G=Array(P);for(let te=0;te<P;te++)G[te]=b[te];return G}return[]}function M(b,P){for(let te=1;te<arguments.length;te++){const Ee=arguments[te];var G=typeof Ee;if(G=G!="object"?G:Ee?Array.isArray(Ee)?"array":G:"null",G=="array"||G=="object"&&typeof Ee.length=="number"){G=b.length||0;const De=Ee.length||0;b.length=G+De;for(let ot=0;ot<De;ot++)b[G+ot]=Ee[ot]}else b.push(Ee)}}class C{constructor(P,G){this.i=P,this.j=G,this.h=0,this.g=null}get(){let P;return this.h>0?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function w(b){o.setTimeout(()=>{throw b},0)}function T(){var b=k;let P=null;return b.g&&(P=b.g,b.g=b.g.next,b.g||(b.h=null),P.next=null),P}class D{constructor(){this.h=this.g=null}add(P,G){const te=I.get();te.set(P,G),this.h?this.h.next=te:this.g=te,this.h=te}}var I=new C(()=>new L,b=>b.reset());class L{constructor(){this.next=this.g=this.h=null}set(P,G){this.h=P,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let j,Y=!1,k=new D,V=()=>{const b=Promise.resolve(void 0);j=()=>{b.then(N)}};function N(){for(var b;b=T();){try{b.h.call(b.g)}catch(G){w(G)}var P=I;P.j(b),P.h<100&&(P.h++,b.next=P.g,P.g=b)}Y=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(b,P){this.type=b,this.g=this.target=P,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var b=!1,P=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const G=()=>{};o.addEventListener("test",G,P),o.removeEventListener("test",G,P)}catch{}return b})();function q(b){return/^[\s\xa0]*$/.test(b)}function he(b,P){z.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b&&this.init(b,P)}g(he,z),he.prototype.init=function(b,P){const G=this.type=b.type,te=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;this.target=b.target||b.srcElement,this.g=P,P=b.relatedTarget,P||(G=="mouseover"?P=b.fromElement:G=="mouseout"&&(P=b.toElement)),this.relatedTarget=P,te?(this.clientX=te.clientX!==void 0?te.clientX:te.pageX,this.clientY=te.clientY!==void 0?te.clientY:te.pageY,this.screenX=te.screenX||0,this.screenY=te.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=b.pointerType,this.state=b.state,this.i=b,b.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),H=0;function K(b,P,G,te,Ee){this.listener=b,this.proxy=null,this.src=P,this.type=G,this.capture=!!te,this.ha=Ee,this.key=++H,this.da=this.fa=!1}function J(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function oe(b,P,G){for(const te in b)P.call(G,b[te],te,b)}function se(b,P){for(const G in b)P.call(void 0,b[G],G,b)}function Z(b){const P={};for(const G in b)P[G]=b[G];return P}const le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(b,P){let G,te;for(let Ee=1;Ee<arguments.length;Ee++){te=arguments[Ee];for(G in te)b[G]=te[G];for(let De=0;De<le.length;De++)G=le[De],Object.prototype.hasOwnProperty.call(te,G)&&(b[G]=te[G])}}function Te(b){this.src=b,this.g={},this.h=0}Te.prototype.add=function(b,P,G,te,Ee){const De=b.toString();b=this.g[De],b||(b=this.g[De]=[],this.h++);const ot=xe(b,P,te,Ee);return ot>-1?(P=b[ot],G||(P.fa=!1)):(P=new K(P,this.src,De,!!te,Ee),P.fa=G,b.push(P)),P};function Ye(b,P){const G=P.type;if(G in b.g){var te=b.g[G],Ee=Array.prototype.indexOf.call(te,P,void 0),De;(De=Ee>=0)&&Array.prototype.splice.call(te,Ee,1),De&&(J(P),b.g[G].length==0&&(delete b.g[G],b.h--))}}function xe(b,P,G,te){for(let Ee=0;Ee<b.length;++Ee){const De=b[Ee];if(!De.da&&De.listener==P&&De.capture==!!G&&De.ha==te)return Ee}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),rt={};function ft(b,P,G,te,Ee){if(Array.isArray(P)){for(let De=0;De<P.length;De++)ft(b,P[De],G,te,Ee);return null}return G=ht(G),b&&b[fe]?b.J(P,G,c(te)?!!te.capture:!1,Ee):bt(b,P,G,!1,te,Ee)}function bt(b,P,G,te,Ee,De){if(!P)throw Error("Invalid event type");const ot=c(Ee)?!!Ee.capture:!!Ee;let cn=ze(b);if(cn||(b[Oe]=cn=new Te(b)),G=cn.add(P,G,te,ot,De),G.proxy)return G;if(te=en(),G.proxy=te,te.src=b,te.listener=G,b.addEventListener)W||(Ee=ot),Ee===void 0&&(Ee=!1),b.addEventListener(P.toString(),te,Ee);else if(b.attachEvent)b.attachEvent(We(P.toString()),te);else if(b.addListener&&b.removeListener)b.addListener(te);else throw Error("addEventListener and attachEvent are unavailable.");return G}function en(){function b(G){return P.call(b.src,b.listener,G)}const P=Ge;return b}function Cn(b,P,G,te,Ee){if(Array.isArray(P))for(var De=0;De<P.length;De++)Cn(b,P[De],G,te,Ee);else te=c(te)?!!te.capture:!!te,G=ht(G),b&&b[fe]?(b=b.i,De=String(P).toString(),De in b.g&&(P=b.g[De],G=xe(P,G,te,Ee),G>-1&&(J(P[G]),Array.prototype.splice.call(P,G,1),P.length==0&&(delete b.g[De],b.h--)))):b&&(b=ze(b))&&(P=b.g[P.toString()],b=-1,P&&(b=xe(P,G,te,Ee)),(G=b>-1?P[b]:null)&&ae(G))}function ae(b){if(typeof b!="number"&&b&&!b.da){var P=b.src;if(P&&P[fe])Ye(P.i,b);else{var G=b.type,te=b.proxy;P.removeEventListener?P.removeEventListener(G,te,b.capture):P.detachEvent?P.detachEvent(We(G),te):P.addListener&&P.removeListener&&P.removeListener(te),(G=ze(P))?(Ye(G,b),G.h==0&&(G.src=null,P[Oe]=null)):J(b)}}}function We(b){return b in rt?rt[b]:rt[b]="on"+b}function Ge(b,P){if(b.da)b=!0;else{P=new he(P,this);const G=b.listener,te=b.ha||b.src;b.fa&&ae(b),b=G.call(te,P)}return b}function ze(b){return b=b[Oe],b instanceof Te?b:null}var Ve="__closure_events_fn_"+(Math.random()*1e9>>>0);function ht(b){return typeof b=="function"?b:(b[Ve]||(b[Ve]=function(P){return b.handleEvent(P)}),b[Ve])}function qe(){O.call(this),this.i=new Te(this),this.M=this,this.G=null}g(qe,O),qe.prototype[fe]=!0,qe.prototype.removeEventListener=function(b,P,G,te){Cn(this,b,P,G,te)};function Je(b,P){var G,te=b.G;if(te)for(G=[];te;te=te.G)G.push(te);if(b=b.M,te=P.type||P,typeof P=="string")P=new z(P,b);else if(P instanceof z)P.target=P.target||b;else{var Ee=P;P=new z(te,b),Ce(P,Ee)}Ee=!0;let De,ot;if(G)for(ot=G.length-1;ot>=0;ot--)De=P.g=G[ot],Ee=zt(De,te,!0,P)&&Ee;if(De=P.g=b,Ee=zt(De,te,!0,P)&&Ee,Ee=zt(De,te,!1,P)&&Ee,G)for(ot=0;ot<G.length;ot++)De=P.g=G[ot],Ee=zt(De,te,!1,P)&&Ee}qe.prototype.N=function(){if(qe.Z.N.call(this),this.i){var b=this.i;for(const P in b.g){const G=b.g[P];for(let te=0;te<G.length;te++)J(G[te]);delete b.g[P],b.h--}}this.G=null},qe.prototype.J=function(b,P,G,te){return this.i.add(String(b),P,!1,G,te)},qe.prototype.K=function(b,P,G,te){return this.i.add(String(b),P,!0,G,te)};function zt(b,P,G,te){if(P=b.i.g[String(P)],!P)return!0;P=P.concat();let Ee=!0;for(let De=0;De<P.length;++De){const ot=P[De];if(ot&&!ot.da&&ot.capture==G){const cn=ot.listener,Li=ot.ha||ot.src;ot.fa&&Ye(b.i,ot),Ee=cn.call(Li,te)!==!1&&Ee}}return Ee&&!te.defaultPrevented}function Qt(b,P){if(typeof b!="function")if(b&&typeof b.handleEvent=="function")b=d(b.handleEvent,b);else throw Error("Invalid listener argument");return Number(P)>2147483647?-1:o.setTimeout(b,P||0)}function ie(b){b.g=Qt(()=>{b.g=null,b.i&&(b.i=!1,ie(b))},b.l);const P=b.h;b.h=null,b.m.apply(null,P)}class X extends O{constructor(P,G){super(),this.m=P,this.l=G,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Se(b){O.call(this),this.h=b,this.g={}}g(Se,O);var Pe=[];function $e(b){oe(b.g,function(P,G){this.g.hasOwnProperty(G)&&ae(P)},b),b.g={}}Se.prototype.N=function(){Se.Z.N.call(this),$e(this)},Se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ke=o.JSON.stringify,It=o.JSON.parse,ct=class{stringify(b){return o.JSON.stringify(b,void 0)}parse(b){return o.JSON.parse(b,void 0)}};function Ct(){}function Rt(){}var Ze={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function at(){z.call(this,"d")}g(at,z);function Nt(){z.call(this,"c")}g(Nt,z);var gt={},mt=null;function Yt(){return mt=mt||new qe}gt.Ia="serverreachability";function pe(b){z.call(this,gt.Ia,b)}g(pe,z);function it(b){const P=Yt();Je(P,new pe(P))}gt.STAT_EVENT="statevent";function lt(b,P){z.call(this,gt.STAT_EVENT,b),this.stat=P}g(lt,z);function pt(b){const P=Yt();Je(P,new lt(P,b))}gt.Ja="timingevent";function nt(b,P){z.call(this,gt.Ja,b),this.size=P}g(nt,z);function Fe(b,P){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){b()},P)}function xt(){this.g=!0}xt.prototype.ua=function(){this.g=!1};function Xt(b,P,G,te,Ee,De){b.info(function(){if(b.g)if(De){var ot="",cn=De.split("&");for(let On=0;On<cn.length;On++){var Li=cn[On].split("=");if(Li.length>1){const mi=Li[0];Li=Li[1];const Er=mi.split("_");ot=Er.length>=2&&Er[1]=="type"?ot+(mi+"="+Li+"&"):ot+(mi+"=redacted&")}}}else ot=null;else ot=De;return"XMLHTTP REQ ("+te+") [attempt "+Ee+"]: "+P+`
`+G+`
`+ot})}function In(b,P,G,te,Ee,De,ot){b.info(function(){return"XMLHTTP RESP ("+te+") [ attempt "+Ee+"]: "+P+`
`+G+`
`+De+" "+ot})}function on(b,P,G,te){b.info(function(){return"XMLHTTP TEXT ("+P+"): "+as(b,G)+(te?" "+te:"")})}function br(b,P){b.info(function(){return"TIMEOUT: "+P})}xt.prototype.info=function(){};function as(b,P){if(!b.g)return P;if(!P)return null;try{const De=JSON.parse(P);if(De){for(b=0;b<De.length;b++)if(Array.isArray(De[b])){var G=De[b];if(!(G.length<2)){var te=G[1];if(Array.isArray(te)&&!(te.length<1)){var Ee=te[0];if(Ee!="noop"&&Ee!="stop"&&Ee!="close")for(let ot=1;ot<te.length;ot++)te[ot]=""}}}}return ke(De)}catch{return P}}var eo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},os={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},to;function Lr(){}g(Lr,Ct),Lr.prototype.g=function(){return new XMLHttpRequest},to=new Lr;function na(b){return encodeURIComponent(String(b))}function Wr(b){var P=1;b=b.split(":");const G=[];for(;P>0&&b.length;)G.push(b.shift()),P--;return b.length&&G.push(b.join(":")),G}function zi(b,P,G,te){this.j=b,this.i=P,this.l=G,this.S=te||1,this.V=new Se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fr}function fr(){this.i=null,this.g="",this.h=!1}var hn={},Ii={};function ws(b,P,G){b.M=1,b.A=ls(Kt(P)),b.u=G,b.R=!0,al(b,null)}function al(b,P){b.F=Date.now(),As(b),b.B=Kt(b.A);var G=b.B,te=b.S;Array.isArray(te)||(te=[String(te)]),nc(G.i,"t",te),b.C=0,G=b.j.L,b.h=new fr,b.g=Ah(b.j,G?P:null,!b.u),b.P>0&&(b.O=new X(d(b.Y,b,b.g),b.P)),P=b.V,G=b.g,te=b.ba;var Ee="readystatechange";Array.isArray(Ee)||(Ee&&(Pe[0]=Ee.toString()),Ee=Pe);for(let De=0;De<Ee.length;De++){const ot=ft(G,Ee[De],te||P.handleEvent,!1,P.h||P);if(!ot)break;P.g[ot.key]=ot}P=b.J?Z(b.J):{},b.u?(b.v||(b.v="POST"),P["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.B,b.v,b.u,P)):(b.v="GET",b.g.ea(b.B,b.v,null,P)),it(),Xt(b.i,b.v,b.B,b.l,b.S,b.u)}zi.prototype.ba=function(b){b=b.target;const P=this.O;P&&Oa(b)==3?P.j():this.Y(b)},zi.prototype.Y=function(b){try{if(b==this.g)e:{const cn=Oa(this.g),Li=this.g.ya(),On=this.g.ca();if(!(cn<3)&&(cn!=3||this.g&&(this.h.h||this.g.la()||dr(this.g)))){this.K||cn!=4||Li==7||(Li==8||On<=0?it(3):it(2)),me(this);var P=this.g.ca();this.X=P;var G=Sh(this);if(this.o=P==200,In(this.i,this.v,this.B,this.l,this.S,cn,P),this.o){if(this.U&&!this.L){t:{if(this.g){var te,Ee=this.g;if((te=Ee.g?Ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(te)){var De=te;break t}}De=null}if(b=De)on(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ge(this,b);else{this.o=!1,this.m=3,pt(12),we(this),be(this);break e}}if(this.R){b=!0;let mi;for(;!this.K&&this.C<G.length;)if(mi=ec(this,G),mi==Ii){cn==4&&(this.m=4,pt(14),b=!1),on(this.i,this.l,null,"[Incomplete Response]");break}else if(mi==hn){this.m=4,pt(15),on(this.i,this.l,G,"[Invalid Chunk]"),b=!1;break}else on(this.i,this.l,mi,null),ge(this,mi);if(bh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),cn!=4||G.length!=0||this.h.h||(this.m=1,pt(16),b=!1),this.o=this.o&&b,!b)on(this.i,this.l,G,"[Invalid Chunked Response]"),we(this),be(this);else if(G.length>0&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.aa&&!ot.P&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Th(ot),ot.P=!0,pt(11))}}else on(this.i,this.l,G,null),ge(this,G);cn==4&&we(this),this.o&&!this.K&&(cn==4?Mh(this.j,this):(this.o=!1,As(this)))}else Do(this.g),P==400&&G.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),we(this),be(this)}}}catch{}finally{}};function Sh(b){if(!bh(b))return b.g.la();const P=dr(b.g);if(P==="")return"";let G="";const te=P.length,Ee=Oa(b.g)==4;if(!b.h.i){if(typeof TextDecoder>"u")return we(b),be(b),"";b.h.i=new o.TextDecoder}for(let De=0;De<te;De++)b.h.h=!0,G+=b.h.i.decode(P[De],{stream:!(Ee&&De==te-1)});return P.length=0,b.h.g+=G,b.C=0,b.h.g}function bh(b){return b.g?b.v=="GET"&&b.M!=2&&b.j.Aa:!1}function ec(b,P){var G=b.C,te=P.indexOf(`
`,G);return te==-1?Ii:(G=Number(P.substring(G,te)),isNaN(G)?hn:(te+=1,te+G>P.length?Ii:(P=P.slice(te,te+G),b.C=te+G,P)))}zi.prototype.cancel=function(){this.K=!0,we(this)};function As(b){b.T=Date.now()+b.H,$(b,b.H)}function $(b,P){if(b.D!=null)throw Error("WatchDog timer not null");b.D=Fe(d(b.aa,b),P)}function me(b){b.D&&(o.clearTimeout(b.D),b.D=null)}zi.prototype.aa=function(){this.D=null;const b=Date.now();b-this.T>=0?(br(this.i,this.B),this.M!=2&&(it(),pt(17)),we(this),this.m=2,be(this)):$(this,this.T-b)};function be(b){b.j.I==0||b.K||Mh(b.j,b)}function we(b){me(b);var P=b.O;P&&typeof P.dispose=="function"&&P.dispose(),b.O=null,$e(b.V),b.g&&(P=b.g,b.g=null,P.abort(),P.dispose())}function ge(b,P){try{var G=b.j;if(G.I!=0&&(G.g==b||Pt(G.h,b))){if(!b.L&&Pt(G.h,b)&&G.I==3){try{var te=G.Ba.g.parse(P)}catch{te=null}if(Array.isArray(te)&&te.length==3){var Ee=te;if(Ee[0]==0){e:if(!G.v){if(G.g)if(G.g.F+3e3<b.F)No(G),hl(G);else break e;oc(G),pt(18)}}else G.xa=Ee[1],0<G.xa-G.K&&Ee[2]<37500&&G.F&&G.A==0&&!G.C&&(G.C=Fe(d(G.Va,G),6e3));vt(G.h)<=1&&G.ta&&(G.ta=void 0)}else so(G,11)}else if((b.L||G.g==b)&&No(G),!q(P))for(Ee=G.Ba.g.parse(P),P=0;P<Ee.length;P++){let On=Ee[P];const mi=On[0];if(!(mi<=G.K))if(G.K=mi,On=On[1],G.I==2)if(On[0]=="c"){G.M=On[1],G.ba=On[2];const Er=On[3];Er!=null&&(G.ka=Er,G.j.info("VER="+G.ka));const wi=On[4];wi!=null&&(G.za=wi,G.j.info("SVER="+G.za));const Ds=On[5];Ds!=null&&typeof Ds=="number"&&Ds>0&&(te=1.5*Ds,G.O=te,G.j.info("backChannelRequestTimeoutMs_="+te)),te=G;const Pa=b.g;if(Pa){const fl=Pa.g?Pa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fl){var De=te.h;De.g||fl.indexOf("spdy")==-1&&fl.indexOf("quic")==-1&&fl.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(Gt(De,De.h),De.h=null))}if(te.G){const Oo=Pa.g?Pa.g.getResponseHeader("X-HTTP-Session-Id"):null;Oo&&(te.wa=Oo,ln(te.J,te.G,Oo))}}G.I=3,G.l&&G.l.ra(),G.aa&&(G.T=Date.now()-b.F,G.j.info("Handshake RTT: "+G.T+"ms")),te=G;var ot=b;if(te.na=wh(te,te.L?te.ba:null,te.W),ot.L){Ut(te.h,ot);var cn=ot,Li=te.O;Li&&(cn.H=Li),cn.D&&(me(cn),As(cn)),te.g=ot}else rd(te);G.i.length>0&&ro(G)}else On[0]!="stop"&&On[0]!="close"||so(G,7);else G.I==3&&(On[0]=="stop"||On[0]=="close"?On[0]=="stop"?so(G,7):sc(G):On[0]!="noop"&&G.l&&G.l.qa(On),G.A=0)}}it(4)}catch{}}var Ke=class{constructor(b,P){this.g=b,this.map=P}};function dt(b){this.l=b||10,o.PerformanceNavigationTiming?(b=o.performance.getEntriesByType("navigation"),b=b.length>0&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mt(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function vt(b){return b.h?1:b.g?b.g.size:0}function Pt(b,P){return b.h?b.h==P:b.g?b.g.has(P):!1}function Gt(b,P){b.g?b.g.add(P):b.h=P}function Ut(b,P){b.h&&b.h==P?b.h=null:b.g&&b.g.has(P)&&b.g.delete(P)}dt.prototype.cancel=function(){if(this.i=fn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function fn(b){if(b.h!=null)return b.i.concat(b.h.G);if(b.g!=null&&b.g.size!==0){let P=b.i;for(const G of b.g.values())P=P.concat(G.G);return P}return S(b.i)}var kn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ii(b,P){if(b){b=b.split("&");for(let G=0;G<b.length;G++){const te=b[G].indexOf("=");let Ee,De=null;te>=0?(Ee=b[G].substring(0,te),De=b[G].substring(te+1)):Ee=b[G],P(Ee,De?decodeURIComponent(De.replace(/\+/g," ")):"")}}}function _n(b){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let P;b instanceof _n?(this.l=b.l,Et(this,b.j),this.o=b.o,this.g=b.g,Qn(this,b.u),this.h=b.h,xn(this,td(b.i)),this.m=b.m):b&&(P=String(b).match(kn))?(this.l=!1,Et(this,P[1]||"",!0),this.o=Si(P[2]||""),this.g=Si(P[3]||"",!0),Qn(this,P[4]),this.h=Si(P[5]||"",!0),xn(this,P[6]||"",!0),this.m=Si(P[7]||"")):(this.l=!1,this.i=new Xi(null,this.l))}_n.prototype.toString=function(){const b=[];var P=this.j;P&&b.push(Cs(P,sr,!0),":");var G=this.g;return(G||P=="file")&&(b.push("//"),(P=this.o)&&b.push(Cs(P,sr,!0),"@"),b.push(na(G).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),G=this.u,G!=null&&b.push(":",String(G))),(G=this.h)&&(this.g&&G.charAt(0)!="/"&&b.push("/"),b.push(Cs(G,G.charAt(0)=="/"?Fi:xr,!0))),(G=this.i.toString())&&b.push("?",G),(G=this.m)&&b.push("#",Cs(G,ol)),b.join("")},_n.prototype.resolve=function(b){const P=Kt(this);let G=!!b.j;G?Et(P,b.j):G=!!b.o,G?P.o=b.o:G=!!b.g,G?P.g=b.g:G=b.u!=null;var te=b.h;if(G)Qn(P,b.u);else if(G=!!b.h){if(te.charAt(0)!="/")if(this.g&&!this.h)te="/"+te;else{var Ee=P.h.lastIndexOf("/");Ee!=-1&&(te=P.h.slice(0,Ee+1)+te)}if(Ee=te,Ee==".."||Ee==".")te="";else if(Ee.indexOf("./")!=-1||Ee.indexOf("/.")!=-1){te=Ee.lastIndexOf("/",0)==0,Ee=Ee.split("/");const De=[];for(let ot=0;ot<Ee.length;){const cn=Ee[ot++];cn=="."?te&&ot==Ee.length&&De.push(""):cn==".."?((De.length>1||De.length==1&&De[0]!="")&&De.pop(),te&&ot==Ee.length&&De.push("")):(De.push(cn),te=!0)}te=De.join("/")}else te=Ee}return G?P.h=te:G=b.i.toString()!=="",G?xn(P,td(b.i)):G=!!b.m,G&&(P.m=b.m),P};function Kt(b){return new _n(b)}function Et(b,P,G){b.j=G?Si(P,!0):P,b.j&&(b.j=b.j.replace(/:$/,""))}function Qn(b,P){if(P){if(P=Number(P),isNaN(P)||P<0)throw Error("Bad port number "+P);b.u=P}else b.u=null}function xn(b,P,G){P instanceof Xi?(b.i=P,du(b.i,b.l)):(G||(P=Cs(P,Oi)),b.i=new Xi(P,b.l))}function ln(b,P,G){b.i.set(P,G)}function ls(b){return ln(b,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),b}function Si(b,P){return b?P?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function Cs(b,P,G){return typeof b=="string"?(b=encodeURI(b).replace(P,En),G&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function En(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var sr=/[#\/\?@]/g,xr=/[#\?:]/g,Fi=/[#\?]/g,Oi=/[#\?@]/g,ol=/#/g;function Xi(b,P){this.h=this.g=null,this.i=b||null,this.j=!!P}function cs(b){b.g||(b.g=new Map,b.h=0,b.i&&ii(b.i,function(P,G){b.add(decodeURIComponent(P.replace(/\+/g," ")),G)}))}i=Xi.prototype,i.add=function(b,P){cs(this),this.i=null,b=ll(this,b);let G=this.g.get(b);return G||this.g.set(b,G=[]),G.push(P),this.h+=1,this};function fu(b,P){cs(b),P=ll(b,P),b.g.has(P)&&(b.i=null,b.h-=b.g.get(P).length,b.g.delete(P))}function tc(b,P){return cs(b),P=ll(b,P),b.g.has(P)}i.forEach=function(b,P){cs(this),this.g.forEach(function(G,te){G.forEach(function(Ee){b.call(P,Ee,te,this)},this)},this)};function xh(b,P){cs(b);let G=[];if(typeof P=="string")tc(b,P)&&(G=G.concat(b.g.get(ll(b,P))));else for(b=Array.from(b.g.values()),P=0;P<b.length;P++)G=G.concat(b[P]);return G}i.set=function(b,P){return cs(this),this.i=null,b=ll(this,b),tc(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[P]),this.h+=1,this},i.get=function(b,P){return b?(b=xh(this,b),b.length>0?String(b[0]):P):P};function nc(b,P,G){fu(b,P),G.length>0&&(b.i=null,b.g.set(ll(b,P),S(G)),b.h+=G.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],P=Array.from(this.g.keys());for(let te=0;te<P.length;te++){var G=P[te];const Ee=na(G);G=xh(this,G);for(let De=0;De<G.length;De++){let ot=Ee;G[De]!==""&&(ot+="="+na(G[De])),b.push(ot)}}return this.i=b.join("&")};function td(b){const P=new Xi;return P.i=b.i,b.g&&(P.g=new Map(b.g),P.h=b.h),P}function ll(b,P){return P=String(P),b.j&&(P=P.toLowerCase()),P}function du(b,P){P&&!b.j&&(cs(b),b.i=null,b.g.forEach(function(G,te){const Ee=te.toLowerCase();te!=Ee&&(fu(this,te),nc(this,Ee,G))},b)),b.j=P}function Na(b,P){const G=new xt;if(o.Image){const te=new Image;te.onload=m(ia,G,"TestLoadImage: loaded",!0,P,te),te.onerror=m(ia,G,"TestLoadImage: error",!1,P,te),te.onabort=m(ia,G,"TestLoadImage: abort",!1,P,te),te.ontimeout=m(ia,G,"TestLoadImage: timeout",!1,P,te),o.setTimeout(function(){te.ontimeout&&te.ontimeout()},1e4),te.src=b}else P(!1)}function pu(b,P){const G=new xt,te=new AbortController,Ee=setTimeout(()=>{te.abort(),ia(G,"TestPingServer: timeout",!1,P)},1e4);fetch(b,{signal:te.signal}).then(De=>{clearTimeout(Ee),De.ok?ia(G,"TestPingServer: ok",!0,P):ia(G,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(Ee),ia(G,"TestPingServer: error",!1,P)})}function ia(b,P,G,te,Ee){try{Ee&&(Ee.onload=null,Ee.onerror=null,Ee.onabort=null,Ee.ontimeout=null),te(G)}catch{}}function cl(){this.g=new ct}function Ia(b){this.i=b.Sb||null,this.h=b.ab||!1}g(Ia,Ct),Ia.prototype.g=function(){return new ic(this.i,this.h)};function ic(b,P){qe.call(this),this.H=b,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(ic,qe),i=ic.prototype,i.open=function(b,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=b,this.D=P,this.readyState=1,ra(this)},i.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const P={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};b&&(P.body=b),(this.H||o).fetch(new Request(this.D,P)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ul(this)),this.readyState=0},i.Pa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mu(this)}else b.text().then(this.Oa.bind(this),this.ga.bind(this))};function mu(b){b.j.read().then(b.Ma.bind(b)).catch(b.ga.bind(b))}i.Ma=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var P=b.value?b.value:new Uint8Array(0);(P=this.B.decode(P,{stream:!b.done}))&&(this.response=this.responseText+=P)}b.done?ul(this):ra(this),this.readyState==3&&mu(this)}},i.Oa=function(b){this.g&&(this.response=this.responseText=b,ul(this))},i.Na=function(b){this.g&&(this.response=b,ul(this))},i.ga=function(){this.g&&ul(this)};function ul(b){b.readyState=4,b.l=null,b.j=null,b.B=null,ra(b)}i.setRequestHeader=function(b,P){this.A.append(b,P)},i.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],P=this.h.entries();for(var G=P.next();!G.done;)G=G.value,b.push(G[0]+": "+G[1]),G=P.next();return b.join(`\r
`)};function ra(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(ic.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function sa(b){let P="";return oe(b,function(G,te){P+=te,P+=":",P+=G,P+=`\r
`}),P}function rc(b,P,G){e:{for(te in G){var te=!1;break e}te=!0}te||(G=sa(G),typeof b=="string"?G!=null&&na(G):ln(b,P,G))}function hi(b){qe.call(this),this.headers=new Map,this.L=b||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(hi,qe);var Ao=/^https?$/i,Eh=["POST","PUT"];i=hi.prototype,i.Fa=function(b){this.H=b},i.ea=function(b,P,G,te){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);P=P?P.toUpperCase():"GET",this.D=b,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():to.g(),this.g.onreadystatechange=_(d(this.Ca,this));try{this.B=!0,this.g.open(P,String(b),!0),this.B=!1}catch(De){no(this,De);return}if(b=G||"",G=new Map(this.headers),te)if(Object.getPrototypeOf(te)===Object.prototype)for(var Ee in te)G.set(Ee,te[Ee]);else if(typeof te.keys=="function"&&typeof te.get=="function")for(const De of te.keys())G.set(De,te.get(De));else throw Error("Unknown input type for opt_headers: "+String(te));te=Array.from(G.keys()).find(De=>De.toLowerCase()=="content-type"),Ee=o.FormData&&b instanceof o.FormData,!(Array.prototype.indexOf.call(Eh,P,void 0)>=0)||te||Ee||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,ot]of G)this.g.setRequestHeader(De,ot);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(b),this.v=!1}catch(De){no(this,De)}};function no(b,P){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=P,b.o=5,gu(b),Ro(b)}function gu(b){b.A||(b.A=!0,Je(b,"complete"),Je(b,"error"))}i.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=b||7,Je(this,"complete"),Je(this,"abort"),Ro(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ro(this,!0)),hi.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Co(this):this.Xa())},i.Xa=function(){Co(this)};function Co(b){if(b.h&&typeof s<"u"){if(b.v&&Oa(b)==4)setTimeout(b.Ca.bind(b),0);else if(Je(b,"readystatechange"),Oa(b)==4){b.h=!1;try{const De=b.ca();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var G;if(!(G=P)){var te;if(te=De===0){let ot=String(b.D).match(kn)[1]||null;!ot&&o.self&&o.self.location&&(ot=o.self.location.protocol.slice(0,-1)),te=!Ao.test(ot?ot.toLowerCase():"")}G=te}if(G)Je(b,"complete"),Je(b,"success");else{b.o=6;try{var Ee=Oa(b)>2?b.g.statusText:""}catch{Ee=""}b.l=Ee+" ["+b.ca()+"]",gu(b)}}finally{Ro(b)}}}}function Ro(b,P){if(b.g){b.m&&(clearTimeout(b.m),b.m=null);const G=b.g;b.g=null,P||Je(b,"ready");try{G.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Oa(b){return b.g?b.g.readyState:0}i.ca=function(){try{return Oa(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(b){if(this.g){var P=this.g.responseText;return b&&P.indexOf(b)==0&&(P=P.substring(b.length)),It(P)}};function dr(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.F){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function Do(b){const P={};b=(b.g&&Oa(b)>=2&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let te=0;te<b.length;te++){if(q(b[te]))continue;var G=Wr(b[te]);const Ee=G[0];if(G=G[1],typeof G!="string")continue;G=G.trim();const De=P[Ee]||[];P[Ee]=De,De.push(G)}se(P,function(te){return te.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function io(b,P,G){return G&&G.internalChannelParams&&G.internalChannelParams[b]||P}function Rs(b){this.za=0,this.i=[],this.j=new xt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=io("failFast",!1,b),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=io("baseRetryDelayMs",5e3,b),this.Za=io("retryDelaySeedMs",1e4,b),this.Ta=io("forwardChannelMaxRetries",2,b),this.va=io("forwardChannelRequestTimeoutMs",2e4,b),this.ma=b&&b.xmlHttpFactory||void 0,this.Ua=b&&b.Rb||void 0,this.Aa=b&&b.useFetchStreams||!1,this.O=void 0,this.L=b&&b.supportsCrossDomainXhr||!1,this.M="",this.h=new dt(b&&b.concurrentRequestLimit),this.Ba=new cl,this.S=b&&b.fastHandshake||!1,this.R=b&&b.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=b&&b.Pb||!1,b&&b.ua&&this.j.ua(),b&&b.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&b&&b.detectBufferingProxy||!1,this.ia=void 0,b&&b.longPollingTimeout&&b.longPollingTimeout>0&&(this.ia=b.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Rs.prototype,i.ka=8,i.I=1,i.connect=function(b,P,G,te){pt(0),this.W=b,this.H=P||{},G&&te!==void 0&&(this.H.OSID=G,this.H.OAID=te),this.F=this.X,this.J=wh(this,null,this.W),ro(this)};function sc(b){if(ac(b),b.I==3){var P=b.V++,G=Kt(b.J);if(ln(G,"SID",b.M),ln(G,"RID",P),ln(G,"TYPE","terminate"),Pi(b,G),P=new zi(b,b.j,P),P.M=2,P.A=ls(Kt(G)),G=!1,o.navigator&&o.navigator.sendBeacon)try{G=o.navigator.sendBeacon(P.A.toString(),"")}catch{}!G&&o.Image&&(new Image().src=P.A,G=!0),G||(P.g=Ah(P.j,null),P.g.ea(P.A)),P.F=Date.now(),As(P)}od(b)}function hl(b){b.g&&(Th(b),b.g.cancel(),b.g=null)}function ac(b){hl(b),b.v&&(o.clearTimeout(b.v),b.v=null),No(b),b.h.cancel(),b.m&&(typeof b.m=="number"&&o.clearTimeout(b.m),b.m=null)}function ro(b){if(!Mt(b.h)&&!b.m){b.m=!0;var P=b.Ea;j||V(),Y||(j(),Y=!0),k.add(P,b),b.D=0}}function vu(b,P){return vt(b.h)>=b.h.j-(b.m?1:0)?!1:b.m?(b.i=P.G.concat(b.i),!0):b.I==1||b.I==2||b.D>=(b.Sa?0:b.Ta)?!1:(b.m=Fe(d(b.Ea,b,P),ad(b,b.D)),b.D++,!0)}i.Ea=function(b){if(this.m)if(this.m=null,this.I==1){if(!b){this.V=Math.floor(Math.random()*1e5),b=this.V++;const Ee=new zi(this,this.j,b);let De=this.o;if(this.U&&(De?(De=Z(De),Ce(De,this.U)):De=this.U),this.u!==null||this.R||(Ee.J=De,De=null),this.S)e:{for(var P=0,G=0;G<this.i.length;G++){t:{var te=this.i[G];if("__data__"in te.map&&(te=te.map.__data__,typeof te=="string")){te=te.length;break t}te=void 0}if(te===void 0)break;if(P+=te,P>4096){P=G;break e}if(P===4096||G===this.i.length-1){P=G+1;break e}}P=1e3}else P=1e3;P=id(this,Ee,P),G=Kt(this.J),ln(G,"RID",b),ln(G,"CVER",22),this.G&&ln(G,"X-HTTP-Session-Id",this.G),Pi(this,G),De&&(this.R?P="headers="+na(sa(De))+"&"+P:this.u&&rc(G,this.u,De)),Gt(this.h,Ee),this.Ra&&ln(G,"TYPE","init"),this.S?(ln(G,"$req",P),ln(G,"SID","null"),Ee.U=!0,ws(Ee,G,null)):ws(Ee,G,P),this.I=2}}else this.I==3&&(b?nd(this,b):this.i.length==0||Mt(this.h)||nd(this))};function nd(b,P){var G;P?G=P.l:G=b.V++;const te=Kt(b.J);ln(te,"SID",b.M),ln(te,"RID",G),ln(te,"AID",b.K),Pi(b,te),b.u&&b.o&&rc(te,b.u,b.o),G=new zi(b,b.j,G,b.D+1),b.u===null&&(G.J=b.o),P&&(b.i=P.G.concat(b.i)),P=id(b,G,1e3),G.H=Math.round(b.va*.5)+Math.round(b.va*.5*Math.random()),Gt(b.h,G),ws(G,te,P)}function Pi(b,P){b.H&&oe(b.H,function(G,te){ln(P,te,G)}),b.l&&oe({},function(G,te){ln(P,te,G)})}function id(b,P,G){G=Math.min(b.i.length,G);const te=b.l?d(b.l.Ka,b.l,b):null;e:{var Ee=b.i;let cn=-1;for(;;){const Li=["count="+G];cn==-1?G>0?(cn=Ee[0].g,Li.push("ofs="+cn)):cn=0:Li.push("ofs="+cn);let On=!0;for(let mi=0;mi<G;mi++){var De=Ee[mi].g;const Er=Ee[mi].map;if(De-=cn,De<0)cn=Math.max(0,Ee[mi].g-100),On=!1;else try{De="req"+De+"_"||"";try{var ot=Er instanceof Map?Er:Object.entries(Er);for(const[wi,Ds]of ot){let Pa=Ds;c(Ds)&&(Pa=ke(Ds)),Li.push(De+wi+"="+encodeURIComponent(Pa))}}catch(wi){throw Li.push(De+"type="+encodeURIComponent("_badmap")),wi}}catch{te&&te(Er)}}if(On){ot=Li.join("&");break e}}ot=void 0}return b=b.i.splice(0,G),P.G=b,ot}function rd(b){if(!b.g&&!b.v){b.Y=1;var P=b.Da;j||V(),Y||(j(),Y=!0),k.add(P,b),b.A=0}}function oc(b){return b.g||b.v||b.A>=3?!1:(b.Y++,b.v=Fe(d(b.Da,b),ad(b,b.A)),b.A++,!0)}i.Da=function(){if(this.v=null,sd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var b=4*this.T;this.j.info("BP detection timer enabled: "+b),this.B=Fe(d(this.Wa,this),b)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),hl(this),sd(this))};function Th(b){b.B!=null&&(o.clearTimeout(b.B),b.B=null)}function sd(b){b.g=new zi(b,b.j,"rpc",b.Y),b.u===null&&(b.g.J=b.o),b.g.P=0;var P=Kt(b.na);ln(P,"RID","rpc"),ln(P,"SID",b.M),ln(P,"AID",b.K),ln(P,"CI",b.F?"0":"1"),!b.F&&b.ia&&ln(P,"TO",b.ia),ln(P,"TYPE","xmlhttp"),Pi(b,P),b.u&&b.o&&rc(P,b.u,b.o),b.O&&(b.g.H=b.O);var G=b.g;b=b.ba,G.M=1,G.A=ls(Kt(P)),G.u=null,G.R=!0,al(G,b)}i.Va=function(){this.C!=null&&(this.C=null,hl(this),oc(this),pt(19))};function No(b){b.C!=null&&(o.clearTimeout(b.C),b.C=null)}function Mh(b,P){var G=null;if(b.g==P){No(b),Th(b),b.g=null;var te=2}else if(Pt(b.h,P))G=P.G,Ut(b.h,P),te=1;else return;if(b.I!=0){if(P.o)if(te==1){G=P.u?P.u.length:0,P=Date.now()-P.F;var Ee=b.D;te=Yt(),Je(te,new nt(te,G)),ro(b)}else rd(b);else if(Ee=P.m,Ee==3||Ee==0&&P.X>0||!(te==1&&vu(b,P)||te==2&&oc(b)))switch(G&&G.length>0&&(P=b.h,P.i=P.i.concat(G)),Ee){case 1:so(b,5);break;case 4:so(b,10);break;case 3:so(b,6);break;default:so(b,2)}}}function ad(b,P){let G=b.Qa+Math.floor(Math.random()*b.Za);return b.isActive()||(G*=2),G*P}function so(b,P){if(b.j.info("Error code "+P),P==2){var G=d(b.bb,b),te=b.Ua;const Ee=!te;te=new _n(te||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Et(te,"https"),ls(te),Ee?Na(te.toString(),G):pu(te.toString(),G)}else pt(2);b.I=0,b.l&&b.l.pa(P),od(b),ac(b)}i.bb=function(b){b?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function od(b){if(b.I=0,b.ja=[],b.l){const P=fn(b.h);(P.length!=0||b.i.length!=0)&&(M(b.ja,P),M(b.ja,b.i),b.h.i.length=0,S(b.i),b.i.length=0),b.l.oa()}}function wh(b,P,G){var te=G instanceof _n?Kt(G):new _n(G);if(te.g!="")P&&(te.g=P+"."+te.g),Qn(te,te.u);else{var Ee=o.location;te=Ee.protocol,P=P?P+"."+Ee.hostname:Ee.hostname,Ee=+Ee.port;const De=new _n(null);te&&Et(De,te),P&&(De.g=P),Ee&&Qn(De,Ee),G&&(De.h=G),te=De}return G=b.G,P=b.wa,G&&P&&ln(te,G,P),ln(te,"VER",b.ka),Pi(b,te),te}function Ah(b,P,G){if(P&&!b.L)throw Error("Can't create secondary domain capable XhrIo object.");return P=b.Aa&&!b.ma?new hi(new Ia({ab:G})):new hi(b.ma),P.Fa(b.L),P}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ld(){}i=ld.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Io(){}Io.prototype.g=function(b,P){return new Ur(b,P)};function Ur(b,P){qe.call(this),this.g=new Rs(P),this.l=b,this.h=P&&P.messageUrlParams||null,b=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(b?b["X-WebChannel-Content-Type"]=P.messageContentType:b={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.sa&&(b?b["X-WebChannel-Client-Profile"]=P.sa:b={"X-WebChannel-Client-Profile":P.sa}),this.g.U=b,(b=P&&P.Qb)&&!q(b)&&(this.g.u=b),this.A=P&&P.supportsCrossDomainXhr||!1,this.v=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!q(P)&&(this.g.G=P,b=this.h,b!==null&&P in b&&(b=this.h,P in b&&delete b[P])),this.j=new ao(this)}g(Ur,qe),Ur.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ur.prototype.close=function(){sc(this.g)},Ur.prototype.o=function(b){var P=this.g;if(typeof b=="string"){var G={};G.__data__=b,b=G}else this.v&&(G={},G.__data__=ke(b),b=G);P.i.push(new Ke(P.Ya++,b)),P.I==3&&ro(P)},Ur.prototype.N=function(){this.g.l=null,delete this.j,sc(this.g),delete this.g,Ur.Z.N.call(this)};function Ch(b){at.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var P=b.__sm__;if(P){e:{for(const G in P){b=G;break e}b=void 0}(this.i=b)&&(b=this.i,P=P!==null&&b in P?P[b]:void 0),this.data=P}else this.data=b}g(Ch,at);function cd(){Nt.call(this),this.status=1}g(cd,Nt);function ao(b){this.g=b}g(ao,ld),ao.prototype.ra=function(){Je(this.g,"a")},ao.prototype.qa=function(b){Je(this.g,new Ch(b))},ao.prototype.pa=function(b){Je(this.g,new cd)},ao.prototype.oa=function(){Je(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,Ur.prototype.send=Ur.prototype.o,Ur.prototype.open=Ur.prototype.m,Ur.prototype.close=Ur.prototype.close,m3=function(){return new Io},p3=function(){return Yt()},d3=gt,V1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},eo.NO_ERROR=0,eo.TIMEOUT=8,eo.HTTP_ERROR=6,tx=eo,os.COMPLETE="complete",f3=os,Rt.EventType=Ze,Ze.OPEN="a",Ze.CLOSE="b",Ze.ERROR="c",Ze.MESSAGE="d",qe.prototype.listen=qe.prototype.J,r_=Rt,hi.prototype.listenOnce=hi.prototype.K,hi.prototype.getLastError=hi.prototype.Ha,hi.prototype.getLastErrorCode=hi.prototype.ya,hi.prototype.getStatus=hi.prototype.ca,hi.prototype.getResponseJson=hi.prototype.La,hi.prototype.getResponseText=hi.prototype.la,hi.prototype.send=hi.prototype.ea,hi.prototype.setWithCredentials=hi.prototype.Fa,h3=hi}).apply(typeof qS<"u"?qS:typeof self<"u"?self:typeof window<"u"?window:{});const p2="@firebase/firestore",m2="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ks.UNAUTHENTICATED=new Ks(null),Ks.GOOGLE_CREDENTIALS=new Ks("google-credentials-uid"),Ks.FIRST_PARTY=new Ks("first-party-uid"),Ks.MOCK_USER=new Ks("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dv="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new JE("@firebase/firestore");function yg(){return Mp.logLevel}function Dt(i,...e){if(Mp.logLevel<=Hn.DEBUG){const t=e.map(WA);Mp.debug(`Firestore (${dv}): ${i}`,...t)}}function ch(i,...e){if(Mp.logLevel<=Hn.ERROR){const t=e.map(WA);Mp.error(`Firestore (${dv}): ${i}`,...t)}}function Vg(i,...e){if(Mp.logLevel<=Hn.WARN){const t=e.map(WA);Mp.warn(`Firestore (${dv}): ${i}`,...t)}}function WA(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(i,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,g3(i,n,t)}function g3(i,e,t){let n=`FIRESTORE (${dv}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw ch(n),new Error(n)}function pi(i,e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,i||g3(e,r,n)}function mn(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wt extends Jl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ks.UNAUTHENTICATED)))}shutdown(){}}class _5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class S5{constructor(e){this.t=e,this.currentUser=Ks.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pi(this.o===void 0,42304);let n=this.i;const r=h=>this.i!==n?(n=this.i,t(h)):Promise.resolve();let s=new nh;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new nh,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const h=s;e.enqueueRetryable((async()=>{await h.promise,await r(this.currentUser)}))},c=h=>{Dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(Dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new nh)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(Dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(pi(typeof n.accessToken=="string",31837,{l:n}),new v3(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pi(e===null||typeof e=="string",2055,{h:e}),new Ks(e)}}class b5{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ks.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class x5{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new b5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ks.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class g2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vl(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pi(this.o===void 0,3512);const n=s=>{s.error!=null&&Dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Dt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>n(s)))};const r=s=>{Dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>r(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):Dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new g2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pi(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new g2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const r=T5(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function Gn(i,e){return i<e?-1:i>e?1:0}function B1(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++){const r=i.charAt(n),s=e.charAt(n);if(r!==s)return iw(r)===iw(s)?Gn(r,s):iw(r)?1:-1}return Gn(i.length,e.length)}const M5=55296,w5=57343;function iw(i){const e=i.charCodeAt(0);return e>=M5&&e<=w5}function Bg(i,e,t){return i.length===e.length&&i.every(((n,r)=>t(n,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="__name__";class Uc{constructor(e,t,n){t===void 0?t=0:t>e.length&&rn(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&rn(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Uc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Uc?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=Uc.compareSegments(e.get(r),t.get(r));if(s!==0)return s}return Gn(e.length,t.length)}static compareSegments(e,t){const n=Uc.isNumericId(e),r=Uc.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Uc.extractNumericId(e).compare(Uc.extractNumericId(t)):B1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Of.fromString(e.substring(4,e.length-2))}}class Ni extends Uc{construct(e,t,n){return new Ni(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new wt(Xe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((r=>r.length>0)))}return new Ni(t)}static emptyPath(){return new Ni([])}}const A5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bs extends Uc{construct(e,t,n){return new bs(e,t,n)}static isValidIdentifier(e){return A5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v2}static keyField(){return new bs([v2])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(n.length===0)throw new wt(Xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new wt(Xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new wt(Xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=h,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(n+=c,r++):(s(),r++)}if(s(),o)throw new wt(Xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bs(t)}static emptyPath(){return new bs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.path=e}static fromPath(e){return new qt(Ni.fromString(e))}static fromName(e){return new qt(Ni.fromString(e).popFirst(5))}static empty(){return new qt(Ni.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ni.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ni.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qt(new Ni(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(i,e,t){if(!t)throw new wt(Xe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function C5(i,e,t,n){if(e===!0&&n===!0)throw new wt(Xe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function y2(i){if(!qt.isDocumentKey(i))throw new wt(Xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function _2(i){if(qt.isDocumentKey(i))throw new wt(Xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function _3(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function $E(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":rn(12329,{type:typeof i})}function uh(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new wt(Xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$E(i);throw new wt(Xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(i,e){const t={typeString:i};return e&&(t.value=e),t}function p0(i,e){if(!_3(i))throw new wt(Xe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const r=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in i)){t=`JSON missing required field: '${n}'`;break}const o=i[n];if(r&&typeof o!==r){t=`JSON field '${n}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${n}' field to equal '${s.value}'`;break}}if(t)throw new wt(Xe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=-62135596800,b2=1e6;class Vi{static now(){return Vi.fromMillis(Date.now())}static fromDate(e){return Vi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*b2);return new Vi(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new wt(Xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new wt(Xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<S2)throw new wt(Xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new wt(Xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/b2}_compareTo(e){return this.seconds===e.seconds?Gn(this.nanoseconds,e.nanoseconds):Gn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Vi._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(p0(e,Vi._jsonSchema))return new Vi(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Vi._jsonSchemaVersion="firestore/timestamp/1.0",Vi._jsonSchema={type:Ir("string",Vi._jsonSchemaVersion),seconds:Ir("number"),nanoseconds:Ir("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{static fromTimestamp(e){return new dn(e)}static min(){return new dn(new Vi(0,0))}static max(){return new dn(new Vi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=-1;function R5(i,e){const t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=dn.fromTimestamp(n===1e9?new Vi(t+1,0):new Vi(t,n));return new Bf(r,qt.empty(),e)}function D5(i){return new Bf(i.readTime,i.key,O_)}class Bf{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Bf(dn.min(),qt.empty(),O_)}static max(){return new Bf(dn.max(),qt.empty(),O_)}}function N5(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=qt.comparator(i.documentKey,e.documentKey),t!==0?t:Gn(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pv(i){if(i.code!==Xe.FAILED_PRECONDITION||i.message!==I5)throw i;Dt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new et(((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof et?t:et.resolve(t)}catch(t){return et.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):et.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):et.reject(t)}static resolve(e){return new et(((t,n)=>{t(e)}))}static reject(e){return new et(((t,n)=>{n(e)}))}static waitFor(e){return new et(((t,n)=>{let r=0,s=0,o=!1;e.forEach((c=>{++r,c.next((()=>{++s,o&&s===r&&t()}),(h=>n(h)))})),o=!0,s===r&&t()}))}static or(e){let t=et.resolve(!1);for(const n of e)t=t.next((r=>r?et.resolve(r):n()));return t}static forEach(e,t){const n=[];return e.forEach(((r,s)=>{n.push(t.call(this,r,s))})),this.waitFor(n)}static mapArray(e,t){return new et(((n,r)=>{const s=e.length,o=new Array(s);let c=0;for(let h=0;h<s;h++){const d=h;t(e[d]).next((m=>{o[d]=m,++c,c===s&&n(o)}),(m=>r(m)))}}))}static doWhile(e,t){return new et(((n,r)=>{const s=()=>{e()===!0?t().next((()=>{s()}),r):n()};s()}))}}function P5(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function mv(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}eT.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=-1;function tT(i){return i==null}function Mx(i){return i===0&&1/i==-1/0}function L5(i){return typeof i=="number"&&Number.isInteger(i)&&!Mx(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3="";function U5(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=x2(e)),e=k5(i.get(t),e);return x2(e)}function k5(i,e){let t=e;const n=i.length;for(let r=0;r<n;r++){const s=i.charAt(r);switch(s){case"\0":t+="";break;case S3:t+="";break;default:t+=s}}return t}function x2(i){return i+S3+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function zp(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function b3(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t){this.comparator=e,this.root=t||ys.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ys.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ys.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new YS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new YS(this.root,e,this.comparator,!1)}getReverseIterator(){return new YS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new YS(this.root,e,this.comparator,!0)}}class YS{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ys{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=n??ys.RED,this.left=r??ys.EMPTY,this.right=s??ys.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new ys(e??this.key,t??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ys.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return ys.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ys.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ys.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw rn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw rn(27949);return e+(this.isRed()?0:1)}}ys.EMPTY=null,ys.RED=!0,ys.BLACK=!1;ys.EMPTY=new class{constructor(){this.size=0}get key(){throw rn(57766)}get value(){throw rn(16141)}get color(){throw rn(16727)}get left(){throw rn(29726)}get right(){throw rn(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new ys(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new T2(this.data.getIterator())}getIteratorFrom(e){return new T2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof jr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jr(this.comparator);return t.data=e,t}}class T2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this.fields=e,e.sort(bs.comparator)}static empty(){return new Bl([])}unionWith(e){let t=new jr(bs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Bl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bg(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new x3("Invalid base64 string: "+s):s}})(e);return new Ts(t)}static fromUint8Array(e){const t=(function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s})(e);return new Ts(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ts.EMPTY_BYTE_STRING=new Ts("");const V5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zf(i){if(pi(!!i,39018),typeof i=="string"){let e=0;const t=V5.exec(i);if(pi(!!t,46558,{timestamp:i}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:yr(i.seconds),nanos:yr(i.nanos)}}function yr(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ff(i){return typeof i=="string"?Ts.fromBase64String(i):Ts.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3="server_timestamp",T3="__type__",M3="__previous_value__",w3="__local_write_time__";function QA(i){return(i?.mapValue?.fields||{})[T3]?.stringValue===E3}function nT(i){const e=i.mapValue.fields[M3];return QA(e)?nT(e):e}function P_(i){const e=zf(i.mapValue.fields[w3].timestampValue);return new Vi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,t,n,r,s,o,c,h,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=d,this.isUsingEmulator=m}}const wx="(default)";class L_{constructor(e,t){this.projectId=e,this.database=t||wx}static empty(){return new L_("","")}get isDefaultDatabase(){return this.database===wx}isEqual(e){return e instanceof L_&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="__type__",z5="__max__",WS={mapValue:{}},C3="__vector__",Ax="value";function Hf(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?QA(i)?4:H5(i)?9007199254740991:F5(i)?10:11:rn(28295,{value:i})}function su(i,e){if(i===e)return!0;const t=Hf(i);if(t!==Hf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return P_(i).isEqual(P_(e));case 3:return(function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=zf(r.timestampValue),c=zf(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(r,s){return Ff(r.bytesValue).isEqual(Ff(s.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(r,s){return yr(r.geoPointValue.latitude)===yr(s.geoPointValue.latitude)&&yr(r.geoPointValue.longitude)===yr(s.geoPointValue.longitude)})(i,e);case 2:return(function(r,s){if("integerValue"in r&&"integerValue"in s)return yr(r.integerValue)===yr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=yr(r.doubleValue),c=yr(s.doubleValue);return o===c?Mx(o)===Mx(c):isNaN(o)&&isNaN(c)}return!1})(i,e);case 9:return Bg(i.arrayValue.values||[],e.arrayValue.values||[],su);case 10:case 11:return(function(r,s){const o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(E2(o)!==E2(c))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(c[h]===void 0||!su(o[h],c[h])))return!1;return!0})(i,e);default:return rn(52216,{left:i})}}function U_(i,e){return(i.values||[]).find((t=>su(t,e)))!==void 0}function zg(i,e){if(i===e)return 0;const t=Hf(i),n=Hf(e);if(t!==n)return Gn(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gn(i.booleanValue,e.booleanValue);case 2:return(function(s,o){const c=yr(s.integerValue||s.doubleValue),h=yr(o.integerValue||o.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(i,e);case 3:return M2(i.timestampValue,e.timestampValue);case 4:return M2(P_(i),P_(e));case 5:return B1(i.stringValue,e.stringValue);case 6:return(function(s,o){const c=Ff(s),h=Ff(o);return c.compareTo(h)})(i.bytesValue,e.bytesValue);case 7:return(function(s,o){const c=s.split("/"),h=o.split("/");for(let d=0;d<c.length&&d<h.length;d++){const m=Gn(c[d],h[d]);if(m!==0)return m}return Gn(c.length,h.length)})(i.referenceValue,e.referenceValue);case 8:return(function(s,o){const c=Gn(yr(s.latitude),yr(o.latitude));return c!==0?c:Gn(yr(s.longitude),yr(o.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return w2(i.arrayValue,e.arrayValue);case 10:return(function(s,o){const c=s.fields||{},h=o.fields||{},d=c[Ax]?.arrayValue,m=h[Ax]?.arrayValue,g=Gn(d?.values?.length||0,m?.values?.length||0);return g!==0?g:w2(d,m)})(i.mapValue,e.mapValue);case 11:return(function(s,o){if(s===WS.mapValue&&o===WS.mapValue)return 0;if(s===WS.mapValue)return 1;if(o===WS.mapValue)return-1;const c=s.fields||{},h=Object.keys(c),d=o.fields||{},m=Object.keys(d);h.sort(),m.sort();for(let g=0;g<h.length&&g<m.length;++g){const _=B1(h[g],m[g]);if(_!==0)return _;const S=zg(c[h[g]],d[m[g]]);if(S!==0)return S}return Gn(h.length,m.length)})(i.mapValue,e.mapValue);default:throw rn(23264,{he:t})}}function M2(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Gn(i,e);const t=zf(i),n=zf(e),r=Gn(t.seconds,n.seconds);return r!==0?r:Gn(t.nanos,n.nanos)}function w2(i,e){const t=i.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){const s=zg(t[r],n[r]);if(s)return s}return Gn(t.length,n.length)}function Fg(i){return z1(i)}function z1(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const n=zf(t);return`time(${n.seconds},${n.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Ff(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return qt.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let n="[",r=!0;for(const s of t.values||[])r?r=!1:n+=",",n+=z1(s);return n+"]"})(i.arrayValue):"mapValue"in i?(function(t){const n=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of n)s?s=!1:r+=",",r+=`${o}:${z1(t.fields[o])}`;return r+"}"})(i.mapValue):rn(61005,{value:i})}function nx(i){switch(Hf(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nT(i);return e?16+nx(e):16;case 5:return 2*i.stringValue.length;case 6:return Ff(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((r,s)=>r+nx(s)),0)})(i.arrayValue);case 10:case 11:return(function(n){let r=0;return zp(n.fields,((s,o)=>{r+=s.length+nx(o)})),r})(i.mapValue);default:throw rn(13486,{value:i})}}function A2(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function F1(i){return!!i&&"integerValue"in i}function ZA(i){return!!i&&"arrayValue"in i}function C2(i){return!!i&&"nullValue"in i}function R2(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ix(i){return!!i&&"mapValue"in i}function F5(i){return(i?.mapValue?.fields||{})[A3]?.stringValue===C3}function p_(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return zp(i.mapValue.fields,((t,n)=>e.mapValue.fields[t]=p_(n))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=p_(i.arrayValue.values[t]);return e}return{...i}}function H5(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===z5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.value=e}static empty(){return new $o({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ix(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=p_(t)}setAll(e){let t=bs.emptyPath(),n={},r=[];e.forEach(((o,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,n,r),n={},r=[],t=c.popLast()}o?n[c.lastSegment()]=p_(o):r.push(c.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());ix(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return su(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ix(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){zp(t,((r,s)=>e[r]=s));for(const r of n)delete e[r]}clone(){return new $o(p_(this.value))}}function R3(i){const e=[];return zp(i.fields,((t,n)=>{const r=new bs([t]);if(ix(n)){const s=R3(n.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)})),new Bl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,t,n,r,s,o,c){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Zs(e,0,dn.min(),dn.min(),dn.min(),$o.empty(),0)}static newFoundDocument(e,t,n,r){return new Zs(e,1,t,dn.min(),n,r,0)}static newNoDocument(e,t){return new Zs(e,2,t,dn.min(),dn.min(),$o.empty(),0)}static newUnknownDocument(e,t){return new Zs(e,3,t,dn.min(),dn.min(),$o.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(dn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$o.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$o.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,t){this.position=e,this.inclusive=t}}function D2(i,e,t){let n=0;for(let r=0;r<i.position.length;r++){const s=e[r],o=i.position[r];if(s.field.isKeyField()?n=qt.comparator(qt.fromName(o.referenceValue),t.key):n=zg(o,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function N2(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!su(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t="asc"){this.field=e,this.dir=t}}function G5(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{}class Nr extends D3{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new q5(e,t,n):t==="array-contains"?new X5(e,n):t==="in"?new K5(e,n):t==="not-in"?new Q5(e,n):t==="array-contains-any"?new Z5(e,n):new Nr(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new Y5(e,n):new W5(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(zg(t,this.value)):t!==null&&Hf(this.value)===Hf(t)&&this.matchesComparison(zg(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return rn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wl extends D3{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Wl(e,t)}matches(e){return N3(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function N3(i){return i.op==="and"}function I3(i){return j5(i)&&N3(i)}function j5(i){for(const e of i.filters)if(e instanceof Wl)return!1;return!0}function H1(i){if(i instanceof Nr)return i.field.canonicalString()+i.op.toString()+Fg(i.value);if(I3(i))return i.filters.map((e=>H1(e))).join(",");{const e=i.filters.map((t=>H1(t))).join(",");return`${i.op}(${e})`}}function O3(i,e){return i instanceof Nr?(function(n,r){return r instanceof Nr&&n.op===r.op&&n.field.isEqual(r.field)&&su(n.value,r.value)})(i,e):i instanceof Wl?(function(n,r){return r instanceof Wl&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce(((s,o,c)=>s&&O3(o,r.filters[c])),!0):!1})(i,e):void rn(19439)}function P3(i){return i instanceof Nr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Fg(t.value)}`})(i):i instanceof Wl?(function(t){return t.op.toString()+" {"+t.getFilters().map(P3).join(" ,")+"}"})(i):"Filter"}class q5 extends Nr{constructor(e,t,n){super(e,t,n),this.key=qt.fromName(n.referenceValue)}matches(e){const t=qt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Y5 extends Nr{constructor(e,t){super(e,"in",t),this.keys=L3("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class W5 extends Nr{constructor(e,t){super(e,"not-in",t),this.keys=L3("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function L3(i,e){return(e.arrayValue?.values||[]).map((t=>qt.fromName(t.referenceValue)))}class X5 extends Nr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ZA(t)&&U_(t.arrayValue,this.value)}}class K5 extends Nr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&U_(this.value.arrayValue,t)}}class Q5 extends Nr{constructor(e,t){super(e,"not-in",t)}matches(e){if(U_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!U_(this.value.arrayValue,t)}}class Z5 extends Nr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ZA(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>U_(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,t=null,n=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.Te=null}}function I2(i,e=null,t=[],n=[],r=null,s=null,o=null){return new J5(i,e,t,n,r,s,o)}function JA(i){const e=mn(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>H1(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),tT(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Fg(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Fg(n))).join(",")),e.Te=t}return e.Te}function $A(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!G5(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!O3(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!N2(i.startAt,e.startAt)&&N2(i.endAt,e.endAt)}function G1(i){return qt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,t=null,n=[],r=[],s=null,o="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $5(i,e,t,n,r,s,o,c){return new gv(i,e,t,n,r,s,o,c)}function eC(i){return new gv(i)}function O2(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function U3(i){return i.collectionGroup!==null}function m_(i){const e=mn(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new jr(bs.comparator);return o.filters.forEach((h=>{h.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new k_(s,n))})),t.has(bs.keyField().canonicalString())||e.Ie.push(new k_(bs.keyField(),n))}return e.Ie}function Xc(i){const e=mn(i);return e.Ee||(e.Ee=e6(e,m_(i))),e.Ee}function e6(i,e){if(i.limitType==="F")return I2(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((r=>{const s=r.dir==="desc"?"asc":"desc";return new k_(r.field,s)}));const t=i.endAt?new Cx(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new Cx(i.startAt.position,i.startAt.inclusive):null;return I2(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function j1(i,e){const t=i.filters.concat([e]);return new gv(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function q1(i,e,t){return new gv(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function iT(i,e){return $A(Xc(i),Xc(e))&&i.limitType===e.limitType}function k3(i){return`${JA(Xc(i))}|lt:${i.limitType}`}function _g(i){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((r=>P3(r))).join(", ")}]`),tT(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Fg(r))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Fg(r))).join(",")),`Target(${n})`})(Xc(i))}; limitType=${i.limitType})`}function rT(i,e){return e.isFoundDocument()&&(function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):qt.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(i,e)&&(function(n,r){for(const s of m_(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0})(i,e)&&(function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0})(i,e)&&(function(n,r){return!(n.startAt&&!(function(o,c,h){const d=D2(o,c,h);return o.inclusive?d<=0:d<0})(n.startAt,m_(n),r)||n.endAt&&!(function(o,c,h){const d=D2(o,c,h);return o.inclusive?d>=0:d>0})(n.endAt,m_(n),r))})(i,e)}function t6(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function V3(i){return(e,t)=>{let n=!1;for(const r of m_(i)){const s=n6(r,e,t);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function n6(i,e,t){const n=i.field.isKeyField()?qt.comparator(e.key,t.key):(function(s,o,c){const h=o.data.field(s),d=c.data.field(s);return h!==null&&d!==null?zg(h,d):rn(42886)})(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return rn(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[r,s]of n)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){zp(this.inner,((t,n)=>{for(const[r,s]of n)e(r,s)}))}isEmpty(){return b3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=new rr(qt.comparator);function hh(){return i6}const B3=new rr(qt.comparator);function s_(...i){let e=B3;for(const t of i)e=e.insert(t.key,t);return e}function z3(i){let e=B3;return i.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function up(){return g_()}function F3(){return g_()}function g_(){return new Fp((i=>i.toString()),((i,e)=>i.isEqual(e)))}const r6=new rr(qt.comparator),s6=new jr(qt.comparator);function jn(...i){let e=s6;for(const t of i)e=e.add(t);return e}const a6=new jr(Gn);function o6(){return a6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mx(e)?"-0":e}}function H3(i){return{integerValue:""+i}}function l6(i,e){return L5(e)?H3(e):tC(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this._=void 0}}function c6(i,e,t){return i instanceof Rx?(function(r,s){const o={fields:{[T3]:{stringValue:E3},[w3]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&QA(s)&&(s=nT(s)),s&&(o.fields[M3]=s),{mapValue:o}})(t,e):i instanceof V_?j3(i,e):i instanceof B_?q3(i,e):(function(r,s){const o=G3(r,s),c=P2(o)+P2(r.Ae);return F1(o)&&F1(r.Ae)?H3(c):tC(r.serializer,c)})(i,e)}function u6(i,e,t){return i instanceof V_?j3(i,e):i instanceof B_?q3(i,e):t}function G3(i,e){return i instanceof Dx?(function(n){return F1(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}class Rx extends sT{}class V_ extends sT{constructor(e){super(),this.elements=e}}function j3(i,e){const t=Y3(e);for(const n of i.elements)t.some((r=>su(r,n)))||t.push(n);return{arrayValue:{values:t}}}class B_ extends sT{constructor(e){super(),this.elements=e}}function q3(i,e){let t=Y3(e);for(const n of i.elements)t=t.filter((r=>!su(r,n)));return{arrayValue:{values:t}}}class Dx extends sT{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function P2(i){return yr(i.integerValue||i.doubleValue)}function Y3(i){return ZA(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function h6(i,e){return i.field.isEqual(e.field)&&(function(n,r){return n instanceof V_&&r instanceof V_||n instanceof B_&&r instanceof B_?Bg(n.elements,r.elements,su):n instanceof Dx&&r instanceof Dx?su(n.Ae,r.Ae):n instanceof Rx&&r instanceof Rx})(i.transform,e.transform)}class f6{constructor(e,t){this.version=e,this.transformResults=t}}class Hl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hl}static exists(e){return new Hl(void 0,e)}static updateTime(e){return new Hl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rx(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class aT{}function W3(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new nC(i.key,Hl.none()):new m0(i.key,i.data,Hl.none());{const t=i.data,n=$o.empty();let r=new jr(bs.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new Hp(i.key,n,new Bl(r.toArray()),Hl.none())}}function d6(i,e,t){i instanceof m0?(function(r,s,o){const c=r.value.clone(),h=U2(r.fieldTransforms,s,o.transformResults);c.setAll(h),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(i,e,t):i instanceof Hp?(function(r,s,o){if(!rx(r.precondition,s))return void s.convertToUnknownDocument(o.version);const c=U2(r.fieldTransforms,s,o.transformResults),h=s.data;h.setAll(X3(r)),h.setAll(c),s.convertToFoundDocument(o.version,h).setHasCommittedMutations()})(i,e,t):(function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function v_(i,e,t,n){return i instanceof m0?(function(s,o,c,h){if(!rx(s.precondition,o))return c;const d=s.value.clone(),m=k2(s.fieldTransforms,h,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(i,e,t,n):i instanceof Hp?(function(s,o,c,h){if(!rx(s.precondition,o))return c;const d=k2(s.fieldTransforms,h,o),m=o.data;return m.setAll(X3(s)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((g=>g.field)))})(i,e,t,n):(function(s,o,c){return rx(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(i,e,t)}function p6(i,e){let t=null;for(const n of i.fieldTransforms){const r=e.data.field(n.field),s=G3(n.transform,r||null);s!=null&&(t===null&&(t=$o.empty()),t.set(n.field,s))}return t||null}function L2(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Bg(n,r,((s,o)=>h6(s,o)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class m0 extends aT{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Hp extends aT{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function X3(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=i.data.field(t);e.set(t,n)}})),e}function U2(i,e,t){const n=new Map;pi(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let r=0;r<t.length;r++){const s=i[r],o=s.transform,c=e.data.field(s.field);n.set(s.field,u6(o,c,t[r]))}return n}function k2(i,e,t){const n=new Map;for(const r of i){const s=r.transform,o=t.data.field(r.field);n.set(r.field,c6(s,o,e))}return n}class nC extends aT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class m6 extends aT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&d6(s,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=v_(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=v_(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=F3();return this.mutations.forEach((r=>{const s=e.get(r.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=t.has(r.key)?null:c;const h=W3(o,c);h!==null&&n.set(r.key,h),o.isValidDocument()||o.convertToNoDocument(dn.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),jn())}isEqual(e){return this.batchId===e.batchId&&Bg(this.mutations,e.mutations,((t,n)=>L2(t,n)))&&Bg(this.baseMutations,e.baseMutations,((t,n)=>L2(t,n)))}}class iC{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){pi(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=(function(){return r6})();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new iC(e,t,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dr,Zn;function _6(i){switch(i){case Xe.OK:return rn(64938);case Xe.CANCELLED:case Xe.UNKNOWN:case Xe.DEADLINE_EXCEEDED:case Xe.RESOURCE_EXHAUSTED:case Xe.INTERNAL:case Xe.UNAVAILABLE:case Xe.UNAUTHENTICATED:return!1;case Xe.INVALID_ARGUMENT:case Xe.NOT_FOUND:case Xe.ALREADY_EXISTS:case Xe.PERMISSION_DENIED:case Xe.FAILED_PRECONDITION:case Xe.ABORTED:case Xe.OUT_OF_RANGE:case Xe.UNIMPLEMENTED:case Xe.DATA_LOSS:return!0;default:return rn(15467,{code:i})}}function K3(i){if(i===void 0)return ch("GRPC error has no .code"),Xe.UNKNOWN;switch(i){case Dr.OK:return Xe.OK;case Dr.CANCELLED:return Xe.CANCELLED;case Dr.UNKNOWN:return Xe.UNKNOWN;case Dr.DEADLINE_EXCEEDED:return Xe.DEADLINE_EXCEEDED;case Dr.RESOURCE_EXHAUSTED:return Xe.RESOURCE_EXHAUSTED;case Dr.INTERNAL:return Xe.INTERNAL;case Dr.UNAVAILABLE:return Xe.UNAVAILABLE;case Dr.UNAUTHENTICATED:return Xe.UNAUTHENTICATED;case Dr.INVALID_ARGUMENT:return Xe.INVALID_ARGUMENT;case Dr.NOT_FOUND:return Xe.NOT_FOUND;case Dr.ALREADY_EXISTS:return Xe.ALREADY_EXISTS;case Dr.PERMISSION_DENIED:return Xe.PERMISSION_DENIED;case Dr.FAILED_PRECONDITION:return Xe.FAILED_PRECONDITION;case Dr.ABORTED:return Xe.ABORTED;case Dr.OUT_OF_RANGE:return Xe.OUT_OF_RANGE;case Dr.UNIMPLEMENTED:return Xe.UNIMPLEMENTED;case Dr.DATA_LOSS:return Xe.DATA_LOSS;default:return rn(39323,{code:i})}}(Zn=Dr||(Dr={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=new Of([4294967295,4294967295],0);function V2(i){const e=S6().encode(i),t=new u3;return t.update(e),new Uint8Array(t.digest())}function B2(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Of([t,n],0),new Of([r,s],0)]}class rC{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new a_(`Invalid padding: ${t}`);if(n<0)throw new a_(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new a_(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new a_(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Of.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Of.fromNumber(n)));return r.compare(b6)===1&&(r=new Of([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=V2(e),[n,r]=B2(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,r,s);if(!this.we(o))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new rC(s,r,t);return n.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const t=V2(e),[n,r]=B2(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,r,s);this.Se(o)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class a_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,g0.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new oT(dn.min(),r,new rr(Gn),hh(),jn())}}class g0{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new g0(n,t,jn(),jn(),jn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Q3{constructor(e,t){this.targetId=e,this.Ce=t}}class Z3{constructor(e,t,n=Ts.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class z2{constructor(){this.ve=0,this.Fe=F2(),this.Me=Ts.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=jn(),t=jn(),n=jn();return this.Fe.forEach(((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:rn(38017,{changeType:s})}})),new g0(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=F2()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pi(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class x6{constructor(e){this.Ge=e,this.ze=new Map,this.je=hh(),this.Je=XS(),this.He=XS(),this.Ye=new rr(Gn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:rn(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(G1(s))if(n===0){const o=new qt(s.path);this.et(t,o,Zs.newNoDocument(o,dn.min()))}else pi(n===1,20013,{expectedCount:n});else{const o=this._t(t);if(o!==n){const c=this.ut(e),h=c?this.ct(c,e,o):1;if(h!==0){this.it(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let o,c;try{o=Ff(n).toUint8Array()}catch(h){if(h instanceof x3)return Vg("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new rC(o,r,s)}catch(h){return Vg(h instanceof a_?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach((s=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.et(t,s,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((s,o)=>{const c=this.ot(o);if(c){if(s.current&&G1(c.target)){const h=new qt(c.target.path);this.It(h).has(o)||this.Et(o,h)||this.et(o,h,Zs.newNoDocument(h,e))}s.Be&&(t.set(o,s.ke()),s.qe())}}));let n=jn();this.He.forEach(((s,o)=>{let c=!0;o.forEachWhile((h=>{const d=this.ot(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(s))})),this.je.forEach(((s,o)=>o.setReadTime(e)));const r=new oT(e,t,this.Ye,this.je,n);return this.je=hh(),this.Je=XS(),this.He=XS(),this.Ye=new rr(Gn),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new z2,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new jr(Gn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new jr(Gn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Dt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new z2),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function XS(){return new rr(qt.comparator)}function F2(){return new rr(qt.comparator)}const E6={asc:"ASCENDING",desc:"DESCENDING"},T6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M6={and:"AND",or:"OR"};class w6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Y1(i,e){return i.useProto3Json||tT(e)?e:{value:e}}function Nx(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J3(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function A6(i,e){return Nx(i,e.toTimestamp())}function Kc(i){return pi(!!i,49232),dn.fromTimestamp((function(t){const n=zf(t);return new Vi(n.seconds,n.nanos)})(i))}function sC(i,e){return W1(i,e).canonicalString()}function W1(i,e){const t=(function(r){return new Ni(["projects",r.projectId,"databases",r.database])})(i).child("documents");return e===void 0?t:t.child(e)}function $3(i){const e=Ni.fromString(i);return pi(rL(e),10190,{key:e.toString()}),e}function X1(i,e){return sC(i.databaseId,e.path)}function rw(i,e){const t=$3(e);if(t.get(1)!==i.databaseId.projectId)throw new wt(Xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new wt(Xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new qt(tL(t))}function eL(i,e){return sC(i.databaseId,e)}function C6(i){const e=$3(i);return e.length===4?Ni.emptyPath():tL(e)}function K1(i){return new Ni(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function tL(i){return pi(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function H2(i,e,t){return{name:X1(i,e),fields:t.value.mapValue.fields}}function R6(i,e){let t;if("targetChange"in e){e.targetChange;const n=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:rn(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=(function(d,m){return d.useProto3Json?(pi(m===void 0||typeof m=="string",58123),Ts.fromBase64String(m||"")):(pi(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Ts.fromUint8Array(m||new Uint8Array))})(i,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const m=d.code===void 0?Xe.UNKNOWN:K3(d.code);return new wt(m,d.message||"")})(o);t=new Z3(n,r,s,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=rw(i,n.document.name),s=Kc(n.document.updateTime),o=n.document.createTime?Kc(n.document.createTime):dn.min(),c=new $o({mapValue:{fields:n.document.fields}}),h=Zs.newFoundDocument(r,s,o,c),d=n.targetIds||[],m=n.removedTargetIds||[];t=new sx(d,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=rw(i,n.document),s=n.readTime?Kc(n.readTime):dn.min(),o=Zs.newNoDocument(r,s),c=n.removedTargetIds||[];t=new sx([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=rw(i,n.document),s=n.removedTargetIds||[];t=new sx([],s,r,null)}else{if(!("filter"in e))return rn(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:s}=n,o=new y6(r,s),c=n.targetId;t=new Q3(c,o)}}return t}function D6(i,e){let t;if(e instanceof m0)t={update:H2(i,e.key,e.value)};else if(e instanceof nC)t={delete:X1(i,e.key)};else if(e instanceof Hp)t={update:H2(i,e.key,e.data),updateMask:B6(e.fieldMask)};else{if(!(e instanceof m6))return rn(16599,{Vt:e.type});t={verify:X1(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(s,o){const c=o.transform;if(c instanceof Rx)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof V_)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof B_)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Dx)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw rn(20930,{transform:o.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(r,s){return s.updateTime!==void 0?{updateTime:A6(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:rn(27497)})(i,e.precondition)),t}function N6(i,e){return i&&i.length>0?(pi(e!==void 0,14353),i.map((t=>(function(r,s){let o=r.updateTime?Kc(r.updateTime):Kc(s);return o.isEqual(dn.min())&&(o=Kc(s)),new f6(o,r.transformResults||[])})(t,e)))):[]}function I6(i,e){return{documents:[eL(i,e.path)]}}function O6(i,e){const t={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=eL(i,r);const s=(function(d){if(d.length!==0)return iL(Wl.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const o=(function(d){if(d.length!==0)return d.map((m=>(function(_){return{field:Sg(_.field),direction:U6(_.dir)}})(m)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=Y1(i,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:r}}function P6(i){let e=C6(i.parent);const t=i.structuredQuery,n=t.from?t.from.length:0;let r=null;if(n>0){pi(n===1,65062);const m=t.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let s=[];t.where&&(s=(function(g){const _=nL(g);return _ instanceof Wl&&I3(_)?_.getFilters():[_]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map((_=>(function(M){return new k_(bg(M.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(_)))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let _;return _=typeof g=="object"?g.value:g,tT(_)?null:_})(t.limit));let h=null;t.startAt&&(h=(function(g){const _=!!g.before,S=g.values||[];return new Cx(S,_)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){const _=!g.before,S=g.values||[];return new Cx(S,_)})(t.endAt)),$5(e,r,o,s,c,"F",h,d)}function L6(i,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rn(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nL(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=bg(t.unaryFilter.field);return Nr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=bg(t.unaryFilter.field);return Nr.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=bg(t.unaryFilter.field);return Nr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bg(t.unaryFilter.field);return Nr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return rn(61313);default:return rn(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Nr.create(bg(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return rn(58110);default:return rn(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Wl.create(t.compositeFilter.filters.map((n=>nL(n))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return rn(1026)}})(t.compositeFilter.op))})(i):rn(30097,{filter:i})}function U6(i){return E6[i]}function k6(i){return T6[i]}function V6(i){return M6[i]}function Sg(i){return{fieldPath:i.canonicalString()}}function bg(i){return bs.fromServerFormat(i.fieldPath)}function iL(i){return i instanceof Nr?(function(t){if(t.op==="=="){if(R2(t.value))return{unaryFilter:{field:Sg(t.field),op:"IS_NAN"}};if(C2(t.value))return{unaryFilter:{field:Sg(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(R2(t.value))return{unaryFilter:{field:Sg(t.field),op:"IS_NOT_NAN"}};if(C2(t.value))return{unaryFilter:{field:Sg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sg(t.field),op:k6(t.op),value:t.value}}})(i):i instanceof Wl?(function(t){const n=t.getFilters().map((r=>iL(r)));return n.length===1?n[0]:{compositeFilter:{op:V6(t.op),filters:n}}})(i):rn(54877,{filter:i})}function B6(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function rL(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t,n,r,s=dn.min(),o=dn.min(),c=Ts.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Cf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Cf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.yt=e}}function F6(i){const e=P6({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?q1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(){this.Cn=new G6}addToCollectionParentIndex(e,t){return this.Cn.add(t),et.resolve()}getCollectionParents(e,t){return et.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return et.resolve()}deleteFieldIndex(e,t){return et.resolve()}deleteAllFieldIndexes(e){return et.resolve()}createTargetIndexes(e,t){return et.resolve()}getDocumentsMatchingTarget(e,t){return et.resolve(null)}getIndexType(e,t){return et.resolve(0)}getFieldIndexes(e,t){return et.resolve([])}getNextCollectionGroupToUpdate(e){return et.resolve(null)}getMinOffset(e,t){return et.resolve(Bf.min())}getMinOffsetFromCollectionGroup(e,t){return et.resolve(Bf.min())}updateCollectionGroup(e,t,n){return et.resolve()}updateIndexEntries(e,t){return et.resolve()}}class G6{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new jr(Ni.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new jr(Ni.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sL=41943040;class Ya{static withCacheSize(e){return new Ya(e,Ya.DEFAULT_COLLECTION_PERCENTILE,Ya.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ya.DEFAULT_COLLECTION_PERCENTILE=10,Ya.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ya.DEFAULT=new Ya(sL,Ya.DEFAULT_COLLECTION_PERCENTILE,Ya.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ya.DISABLED=new Ya(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Hg(0)}static cr(){return new Hg(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="LruGarbageCollector",j6=1048576;function q2([i,e],[t,n]){const r=Gn(i,t);return r===0?Gn(e,n):r}class q6{constructor(e){this.Ir=e,this.buffer=new jr(q2),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();q2(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Y6{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Dt(j2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){mv(t)?Dt(j2,"Ignoring IndexedDB error during garbage collection: ",t):await pv(t)}await this.Vr(3e5)}))}}class W6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return et.resolve(eT.ce);const n=new q6(t);return this.mr.forEachTarget(e,(r=>n.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>n.Ar(r))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Dt("LruGarbageCollector","Garbage collection skipped; disabled"),et.resolve(G2)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G2):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,s,o,c,h,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,o=Date.now(),this.nthSequenceNumber(e,r)))).next((g=>(n=g,c=Date.now(),this.removeTargets(e,n,t)))).next((g=>(s=g,h=Date.now(),this.removeOrphanedDocuments(e,n)))).next((g=>(d=Date.now(),yg()<=Hn.DEBUG&&Dt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${r} in `+(c-o)+`ms
	Removed ${s} targets in `+(h-c)+`ms
	Removed ${g} documents in `+(d-h)+`ms
Total Duration: ${d-m}ms`),et.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g}))))}}function X6(i,e){return new W6(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(){this.changes=new Fp((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?et.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(n!==null&&v_(n.mutation,r,Bl.empty(),Vi.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,jn()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=jn()){const r=up();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((s=>{let o=s_();return s.forEach(((c,h)=>{o=o.insert(c,h.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const n=up();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,jn())))}populateOverlays(e,t,n){const r=[];return n.forEach((s=>{t.has(s)||r.push(s)})),this.documentOverlayCache.getOverlays(e,r).next((s=>{s.forEach(((o,c)=>{t.set(o,c)}))}))}computeViews(e,t,n,r){let s=hh();const o=g_(),c=(function(){return g_()})();return t.forEach(((h,d)=>{const m=n.get(d.key);r.has(d.key)&&(m===void 0||m.mutation instanceof Hp)?s=s.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),v_(m.mutation,d,m.mutation.getFieldMask(),Vi.now())):o.set(d.key,Bl.empty())})),this.recalculateAndSaveOverlays(e,s).next((h=>(h.forEach(((d,m)=>o.set(d,m))),t.forEach(((d,m)=>c.set(d,new Q6(m,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,t){const n=g_();let r=new rr(((o,c)=>o-c)),s=jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const c of o)c.keys().forEach((h=>{const d=t.get(h);if(d===null)return;let m=n.get(h)||Bl.empty();m=c.applyToLocalView(d,m),n.set(h,m);const g=(r.get(c.batchId)||jn()).add(h);r=r.insert(c.batchId,g)}))})).next((()=>{const o=[],c=r.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),d=h.key,m=h.value,g=F3();m.forEach((_=>{if(!s.has(_)){const S=W3(t.get(_),n.get(_));S!==null&&g.set(_,S),s=s.add(_)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return et.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,r){return(function(o){return qt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):U3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):et.resolve(up());let c=O_,h=s;return o.next((d=>et.forEach(d,((m,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(m)?et.resolve():this.remoteDocumentCache.getEntry(e,m).next((_=>{h=h.insert(m,_)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,h,d,jn()))).next((m=>({batchId:c,changes:z3(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qt(t)).next((n=>{let r=s_();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let o=s_();return this.indexManager.getCollectionParents(e,s).next((c=>et.forEach(c,(h=>{const d=(function(g,_){return new gv(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,n,r).next((m=>{m.forEach(((g,_)=>{o=o.insert(g,_)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r)))).next((o=>{s.forEach(((h,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,Zs.newInvalidDocument(m)))}));let c=s_();return o.forEach(((h,d)=>{const m=s.get(h);m!==void 0&&v_(m.mutation,d,Bl.empty(),Vi.now()),rT(t,d)&&(c=c.insert(h,d))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return et.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Kc(r.createTime)}})(t)),et.resolve()}getNamedQuery(e,t){return et.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:F6(r.bundledQuery),readTime:Kc(r.readTime)}})(t)),et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(){this.overlays=new rr(qt.comparator),this.qr=new Map}getOverlay(e,t){return et.resolve(this.overlays.get(t))}getOverlays(e,t){const n=up();return et.forEach(t,(r=>this.getOverlay(e,r).next((s=>{s!==null&&n.set(r,s)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((r,s)=>{this.St(e,t,s)})),et.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return r!==void 0&&(r.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(n)),et.resolve()}getOverlaysForCollection(e,t,n){const r=up(),s=t.length+1,o=new qt(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const h=c.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&h.largestBatchId>n&&r.set(h.getKey(),h)}return et.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new rr(((d,m)=>d-m));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let m=s.get(d.largestBatchId);m===null&&(m=up(),s=s.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=up(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((d,m)=>c.set(d,m))),!(c.size()>=r)););return et.resolve(c)}St(e,t,n){const r=this.overlays.get(n.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new v6(t,n));let s=this.qr.get(t);s===void 0&&(s=jn(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(){this.sessionToken=Ts.EMPTY_BYTE_STRING}getSessionToken(e){return et.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,et.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.Qr=new jr(is.$r),this.Ur=new jr(is.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new is(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new is(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new qt(new Ni([])),n=new is(t,e),r=new is(t,e+1),s=[];return this.Ur.forEachInRange([n,r],(o=>{this.Gr(o),s.push(o.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new qt(new Ni([])),n=new is(t,e),r=new is(t,e+1);let s=jn();return this.Ur.forEachInRange([n,r],(o=>{s=s.add(o.key)})),s}containsKey(e){const t=new is(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class is{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return qt.comparator(e.key,t.key)||Gn(e.Yr,t.Yr)}static Kr(e,t){return Gn(e.Yr,t.Yr)||qt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new jr(is.$r)}checkEmpty(e){return et.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new g6(s,t,n,r);this.mutationQueue.push(o);for(const c of r)this.Zr=this.Zr.add(new is(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return et.resolve(o)}lookupMutationBatch(e,t){return et.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),s=r<0?0:r;return et.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(this.mutationQueue.length===0?KA:this.tr-1)}getAllMutationBatches(e){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new is(t,0),r=new is(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,r],(o=>{const c=this.Xr(o.Yr);s.push(c)})),et.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new jr(Gn);return t.forEach((r=>{const s=new is(r,0),o=new is(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],(c=>{n=n.add(c.Yr)}))})),et.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;qt.isDocumentKey(s)||(s=s.child(""));const o=new is(new qt(s),0);let c=new jr(Gn);return this.Zr.forEachWhile((h=>{const d=h.key.path;return!!n.isPrefixOf(d)&&(d.length===r&&(c=c.add(h.Yr)),!0)}),o),et.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((n=>{const r=this.Xr(n);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){pi(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return et.forEach(t.mutations,(r=>{const s=new is(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new is(t,0),r=this.Zr.firstAfterOrEqual(n);return et.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,et.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e){this.ri=e,this.docs=(function(){return new rr(qt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return et.resolve(n?n.document.mutableCopy():Zs.newInvalidDocument(t))}getEntries(e,t){let n=hh();return t.forEach((r=>{const s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():Zs.newInvalidDocument(r))})),et.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=hh();const o=t.path,c=new qt(o.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:d,value:{document:m}}=h.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||N5(D5(m),n)<=0||(r.has(m.key)||rT(t,m))&&(s=s.insert(m.key,m.mutableCopy()))}return et.resolve(s)}getAllFromCollectionGroup(e,t,n,r){rn(9500)}ii(e,t){return et.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new i8(this)}getSize(e){return et.resolve(this.size)}}class i8 extends K6{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)})),et.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.persistence=e,this.si=new Fp((t=>JA(t)),$A),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.oi=0,this._i=new aC,this.targetCount=0,this.ai=Hg.ur()}forEachTarget(e,t){return this.si.forEach(((n,r)=>t(r))),et.resolve()}getLastRemoteSnapshotVersion(e){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return et.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),et.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Hg(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,et.resolve()}updateTargetData(e,t){return this.Pr(t),et.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,et.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),et.waitFor(s).next((()=>r))}getTargetCount(e){return et.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return et.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),et.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach((o=>{s.push(r.markPotentiallyOrphaned(e,o))})),et.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),et.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return et.resolve(n)}containsKey(e,t){return et.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,t){this.ui={},this.overlays={},this.ci=new eT(0),this.li=!1,this.li=!0,this.hi=new e8,this.referenceDelegate=e(this),this.Pi=new r8(this),this.indexManager=new H6,this.remoteDocumentCache=(function(r){return new n8(r)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new z6(t),this.Ii=new J6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new t8(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Dt("MemoryPersistence","Starting transaction:",e);const r=new s8(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((s=>this.referenceDelegate.di(r).next((()=>s)))).toPromise().then((s=>(r.raiseOnCommittedEvent(),s)))}Ai(e,t){return et.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class s8 extends O5{constructor(e){super(),this.currentSequenceNumber=e}}class oC{constructor(e){this.persistence=e,this.Ri=new aC,this.Vi=null}static mi(e){return new oC(e)}get fi(){if(this.Vi)return this.Vi;throw rn(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),et.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),et.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),et.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((s=>this.fi.add(s.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.fi,(n=>{const r=qt.fromPath(n);return this.gi(e,r).next((s=>{s||t.removeEntry(r,dn.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return et.or([()=>et.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ix{constructor(e,t){this.persistence=e,this.pi=new Fp((n=>U5(n.path)),((n,r)=>n.isEqual(r))),this.garbageCollector=X6(this,t)}static mi(e,t){return new Ix(e,t)}Ei(){}di(e){return et.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((r=>n+r))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return et.forEach(this.pi,((n,r)=>this.br(e,n,r).next((s=>s?et.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,t).next((c=>{c||(n++,s.removeEntry(o,dn.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),et.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),et.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),et.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),et.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nx(e.data.value)),t}br(e,t,n){return et.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return et.resolve(r!==void 0&&r>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=jn(),r=jn();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new lC(e,t.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ZF()?8:P5(ea())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ys(e,t).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.ws(e,t,r,n).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new a8;return this.Ss(e,t,o).next((c=>{if(s.result=c,this.Vs)return this.bs(e,t,o,c.size)}))})).next((()=>s.result))}bs(e,t,n,r){return n.documentReadCount<this.fs?(yg()<=Hn.DEBUG&&Dt("QueryEngine","SDK will not create cache indexes for query:",_g(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),et.resolve()):(yg()<=Hn.DEBUG&&Dt("QueryEngine","Query:",_g(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(yg()<=Hn.DEBUG&&Dt("QueryEngine","The SDK decides to create cache indexes for query:",_g(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xc(t))):et.resolve())}ys(e,t){if(O2(t))return et.resolve(null);let n=Xc(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=q1(t,null,"F"),n=Xc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const o=jn(...s);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,n).next((h=>{const d=this.Ds(t,c);return this.Cs(t,d,o,h.readTime)?this.ys(e,q1(t,null,"F")):this.vs(e,d,t,h)}))))})))))}ws(e,t,n,r){return O2(t)||r.isEqual(dn.min())?et.resolve(null):this.ps.getDocuments(e,n).next((s=>{const o=this.Ds(t,s);return this.Cs(t,o,n,r)?et.resolve(null):(yg()<=Hn.DEBUG&&Dt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_g(t)),this.vs(e,o,t,R5(r,O_)).next((c=>c)))}))}Ds(e,t){let n=new jr(V3(e));return t.forEach(((r,s)=>{rT(e,s)&&(n=n.add(s))})),n}Cs(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return yg()<=Hn.DEBUG&&Dt("QueryEngine","Using full collection scan to execute query:",_g(t)),this.ps.getDocumentsMatchingQuery(e,t,Bf.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next((s=>(t.forEach((o=>{s=s.insert(o.key,o)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="LocalStore",l8=3e8;class c8{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new rr(Gn),this.xs=new Fp((s=>JA(s)),$A),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function u8(i,e,t,n){return new c8(i,e,t,n)}async function oL(i,e){const t=mn(i);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next((s=>(r=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((s=>{const o=[],c=[];let h=jn();for(const d of r){o.push(d.batchId);for(const m of d.mutations)h=h.add(m.key)}for(const d of s){c.push(d.batchId);for(const m of d.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(n,h).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function h8(i,e){const t=mn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const r=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,h,d,m){const g=d.batch,_=g.keys();let S=et.resolve();return _.forEach((M=>{S=S.next((()=>m.getEntry(h,M))).next((C=>{const w=d.docVersions.get(M);pi(w!==null,48541),C.version.compareTo(w)<0&&(g.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),m.addEntry(C)))}))})),S.next((()=>c.mutationQueue.removeMutationBatch(h,g)))})(t,n,e,s).next((()=>s.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let h=jn();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(h=h.add(c.batch.mutations[d].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(n,r)))}))}function lL(i){const e=mn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function f8(i,e){const t=mn(i),n=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const c=[];e.targetChanges.forEach(((m,g)=>{const _=r.get(g);if(!_)return;c.push(t.Pi.removeMatchingKeys(s,m.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(s,m.addedDocuments,g))));let S=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(Ts.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):m.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(m.resumeToken,n)),r=r.insert(g,S),(function(C,w,T){return C.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=l8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(_,S,m)&&c.push(t.Pi.updateTargetData(s,S))}));let h=hh(),d=jn();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,m))})),c.push(d8(s,o,e.documentUpdates).next((m=>{h=m.ks,d=m.qs}))),!n.isEqual(dn.min())){const m=t.Pi.getLastRemoteSnapshotVersion(s).next((g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n)));c.push(m)}return et.waitFor(c).next((()=>o.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,h,d))).next((()=>h))})).then((s=>(t.Ms=r,s)))}function d8(i,e,t){let n=jn(),r=jn();return t.forEach((s=>n=n.add(s))),e.getEntries(i,n).next((s=>{let o=hh();return t.forEach(((c,h)=>{const d=s.get(c);h.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),h.isNoDocument()&&h.version.isEqual(dn.min())?(e.removeEntry(c,h.readTime),o=o.insert(c,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),o=o.insert(c,h)):Dt(cC,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",h.version)})),{ks:o,qs:r}}))}function p8(i,e){const t=mn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=KA),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function m8(i,e){const t=mn(i);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let r;return t.Pi.getTargetData(n,e).next((s=>s?(r=s,et.resolve(r)):t.Pi.allocateTargetId(n).next((o=>(r=new Cf(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,r).next((()=>r)))))))})).then((n=>{const r=t.Ms.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function Q1(i,e,t){const n=mn(i),r=n.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,(o=>n.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!mv(o))throw o;Dt(cC,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(r.target)}function Y2(i,e,t){const n=mn(i);let r=dn.min(),s=jn();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(h,d,m){const g=mn(h),_=g.xs.get(m);return _!==void 0?et.resolve(g.Ms.get(_)):g.Pi.getTargetData(d,m)})(n,o,Xc(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,c.targetId).next((h=>{s=h}))})).next((()=>n.Fs.getDocumentsMatchingQuery(o,e,t?r:dn.min(),t?s:jn()))).next((c=>(g8(n,t6(e),c),{documents:c,Qs:s})))))}function g8(i,e,t){let n=i.Os.get(e)||dn.min();t.forEach(((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),i.Os.set(e,n)}class W2{constructor(){this.activeTargetIds=o6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class v8{constructor(){this.Mo=new W2,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new W2,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="ConnectivityMonitor";class K2{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Dt(X2,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Dt(X2,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KS=null;function Z1(){return KS===null?KS=(function(){return 268435456+Math.round(2147483648*Math.random())})():KS++,"0x"+KS.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="RestConnection",_8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class S8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===wx?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,s){const o=Z1(),c=this.zo(e,t.toUriEncodedString());Dt(sw,`Sending RPC '${e}' ${o}:`,c,n);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,s);const{host:d}=new URL(c),m=hv(d);return this.Jo(e,c,h,n,m).then((g=>(Dt(sw,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw Vg(sw,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",n),g}))}Ho(e,t,n,r,s,o){return this.Go(e,t,n,r,s)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+dv})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,s)=>e[s]=r)),n&&n.headers.forEach(((r,s)=>e[s]=r))}zo(e,t){const n=_8[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="WebChannelConnection";class x8 extends S8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const o=Z1();return new Promise(((c,h)=>{const d=new h3;d.setWithCredentials(!0),d.listenOnce(f3.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case tx.NO_ERROR:const g=d.getResponseJson();Dt(Gs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case tx.TIMEOUT:Dt(Gs,`RPC '${e}' ${o} timed out`),h(new wt(Xe.DEADLINE_EXCEEDED,"Request time out"));break;case tx.HTTP_ERROR:const _=d.getStatus();if(Dt(Gs,`RPC '${e}' ${o} failed with status:`,_,"response text:",d.getResponseText()),_>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);const M=S?.error;if(M&&M.status&&M.message){const C=(function(T){const D=T.toLowerCase().replace(/_/g,"-");return Object.values(Xe).indexOf(D)>=0?D:Xe.UNKNOWN})(M.status);h(new wt(C,M.message))}else h(new wt(Xe.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new wt(Xe.UNAVAILABLE,"Connection failed."));break;default:rn(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Dt(Gs,`RPC '${e}' ${o} completed.`)}}));const m=JSON.stringify(r);Dt(Gs,`RPC '${e}' ${o} sending request:`,r),d.send(t,"POST",m,n,15)}))}T_(e,t,n){const r=Z1(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=m3(),c=p3(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,n),h.encodeInitMessageHeaders=!0;const m=s.join("");Dt(Gs,`Creating RPC '${e}' stream ${r}: ${m}`,h);const g=o.createWebChannel(m,h);this.I_(g);let _=!1,S=!1;const M=new b8({Yo:w=>{S?Dt(Gs,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(_||(Dt(Gs,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),Dt(Gs,`RPC '${e}' stream ${r} sending:`,w),g.send(w))},Zo:()=>g.close()}),C=(w,T,D)=>{w.listen(T,(I=>{try{D(I)}catch(L){setTimeout((()=>{throw L}),0)}}))};return C(g,r_.EventType.OPEN,(()=>{S||(Dt(Gs,`RPC '${e}' stream ${r} transport opened.`),M.o_())})),C(g,r_.EventType.CLOSE,(()=>{S||(S=!0,Dt(Gs,`RPC '${e}' stream ${r} transport closed`),M.a_(),this.E_(g))})),C(g,r_.EventType.ERROR,(w=>{S||(S=!0,Vg(Gs,`RPC '${e}' stream ${r} transport errored. Name:`,w.name,"Message:",w.message),M.a_(new wt(Xe.UNAVAILABLE,"The operation could not be completed")))})),C(g,r_.EventType.MESSAGE,(w=>{if(!S){const T=w.data[0];pi(!!T,16349);const D=T,I=D?.error||D[0]?.error;if(I){Dt(Gs,`RPC '${e}' stream ${r} received error:`,I);const L=I.status;let j=(function(V){const N=Dr[V];if(N!==void 0)return K3(N)})(L),Y=I.message;j===void 0&&(j=Xe.INTERNAL,Y="Unknown error status: "+L+" with message "+I.message),S=!0,M.a_(new wt(j,Y)),g.close()}else Dt(Gs,`RPC '${e}' stream ${r} received:`,T),M.u_(T)}})),C(c,d3.STAT_EVENT,(w=>{w.stat===V1.PROXY?Dt(Gs,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===V1.NOPROXY&&Dt(Gs,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function aw(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(i){return new w6(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,t,n=1e3,r=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Dt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="PersistentStream";class uL{constructor(e,t,n,r,s,o,c,h){this.Mi=e,this.S_=n,this.b_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cL(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Xe.RESOURCE_EXHAUSTED?(ch(t.toString()),ch("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,r])=>{this.D_===t&&this.G_(n,r)}),(n=>{e((()=>{const r=new wt(Xe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(r)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{n((()=>this.z_(r)))})),this.stream.onMessage((r=>{n((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Dt(Q2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Dt(Q2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class E8 extends uL{constructor(e,t,n,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=R6(this.serializer,e),n=(function(s){if(!("targetChange"in s))return dn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dn.min():o.readTime?Kc(o.readTime):dn.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=K1(this.serializer),t.addTarget=(function(s,o){let c;const h=o.target;if(c=G1(h)?{documents:I6(s,h)}:{query:O6(s,h).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=J3(s,o.resumeToken);const d=Y1(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(dn.min())>0){c.readTime=Nx(s,o.snapshotVersion.toTimestamp());const d=Y1(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const n=L6(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=K1(this.serializer),t.removeTarget=e,this.q_(t)}}class T8 extends uL{constructor(e,t,n,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return pi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pi(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=N6(e.writeResults,e.commitTime),n=Kc(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=K1(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>D6(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{}class w8 extends M8{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new wt(Xe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Go(e,W1(t,n),r,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new wt(Xe.UNKNOWN,s.toString())}))}Ho(e,t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,W1(t,n),r,o,c,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new wt(Xe.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class A8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ch(t),this.aa=!1):Dt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="RemoteStore";class C8{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((o=>{n.enqueueAndForget((async()=>{Gp(this)&&(Dt(wp,"Restarting streams for network reachability change."),await(async function(h){const d=mn(h);d.Ea.add(4),await v0(d),d.Ra.set("Unknown"),d.Ea.delete(4),await cT(d)})(this))}))})),this.Ra=new A8(n,r)}}async function cT(i){if(Gp(i))for(const e of i.da)await e(!0)}async function v0(i){for(const e of i.da)await e(!1)}function hL(i,e){const t=mn(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),dC(t)?fC(t):vv(t).O_()&&hC(t,e))}function uC(i,e){const t=mn(i),n=vv(t);t.Ia.delete(e),n.O_()&&fL(t,e),t.Ia.size===0&&(n.O_()?n.L_():Gp(t)&&t.Ra.set("Unknown"))}function hC(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(dn.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vv(i).Y_(e)}function fL(i,e){i.Va.Ue(e),vv(i).Z_(e)}function fC(i){i.Va=new x6({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),vv(i).start(),i.Ra.ua()}function dC(i){return Gp(i)&&!vv(i).x_()&&i.Ia.size>0}function Gp(i){return mn(i).Ea.size===0}function dL(i){i.Va=void 0}async function R8(i){i.Ra.set("Online")}async function D8(i){i.Ia.forEach(((e,t)=>{hC(i,e)}))}async function N8(i,e){dL(i),dC(i)?(i.Ra.ha(e),fC(i)):i.Ra.set("Unknown")}async function I8(i,e,t){if(i.Ra.set("Online"),e instanceof Z3&&e.state===2&&e.cause)try{await(async function(r,s){const o=s.cause;for(const c of s.targetIds)r.Ia.has(c)&&(await r.remoteSyncer.rejectListen(c,o),r.Ia.delete(c),r.Va.removeTarget(c))})(i,e)}catch(n){Dt(wp,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Ox(i,n)}else if(e instanceof sx?i.Va.Ze(e):e instanceof Q3?i.Va.st(e):i.Va.tt(e),!t.isEqual(dn.min()))try{const n=await lL(i.localStore);t.compareTo(n)>=0&&await(function(s,o){const c=s.Va.Tt(o);return c.targetChanges.forEach(((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const m=s.Ia.get(d);m&&s.Ia.set(d,m.withResumeToken(h.resumeToken,o))}})),c.targetMismatches.forEach(((h,d)=>{const m=s.Ia.get(h);if(!m)return;s.Ia.set(h,m.withResumeToken(Ts.EMPTY_BYTE_STRING,m.snapshotVersion)),fL(s,h);const g=new Cf(m.target,h,d,m.sequenceNumber);hC(s,g)})),s.remoteSyncer.applyRemoteEvent(c)})(i,t)}catch(n){Dt(wp,"Failed to raise snapshot:",n),await Ox(i,n)}}async function Ox(i,e,t){if(!mv(e))throw e;i.Ea.add(1),await v0(i),i.Ra.set("Offline"),t||(t=()=>lL(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Dt(wp,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await cT(i)}))}function pL(i,e){return e().catch((t=>Ox(i,t,e)))}async function uT(i){const e=mn(i),t=Gf(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:KA;for(;O8(e);)try{const r=await p8(e.localStore,n);if(r===null){e.Ta.length===0&&t.L_();break}n=r.batchId,P8(e,r)}catch(r){await Ox(e,r)}mL(e)&&gL(e)}function O8(i){return Gp(i)&&i.Ta.length<10}function P8(i,e){i.Ta.push(e);const t=Gf(i);t.O_()&&t.X_&&t.ea(e.mutations)}function mL(i){return Gp(i)&&!Gf(i).x_()&&i.Ta.length>0}function gL(i){Gf(i).start()}async function L8(i){Gf(i).ra()}async function U8(i){const e=Gf(i);for(const t of i.Ta)e.ea(t.mutations)}async function k8(i,e,t){const n=i.Ta.shift(),r=iC.from(n,e,t);await pL(i,(()=>i.remoteSyncer.applySuccessfulWrite(r))),await uT(i)}async function V8(i,e){e&&Gf(i).X_&&await(async function(n,r){if((function(o){return _6(o)&&o!==Xe.ABORTED})(r.code)){const s=n.Ta.shift();Gf(n).B_(),await pL(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r))),await uT(n)}})(i,e),mL(i)&&gL(i)}async function Z2(i,e){const t=mn(i);t.asyncQueue.verifyOperationInProgress(),Dt(wp,"RemoteStore received new credentials");const n=Gp(t);t.Ea.add(3),await v0(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await cT(t)}async function B8(i,e){const t=mn(i);e?(t.Ea.delete(2),await cT(t)):e||(t.Ea.add(2),await v0(t),t.Ra.set("Unknown"))}function vv(i){return i.ma||(i.ma=(function(t,n,r){const s=mn(t);return s.sa(),new E8(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(i.datastore,i.asyncQueue,{Xo:R8.bind(null,i),t_:D8.bind(null,i),r_:N8.bind(null,i),H_:I8.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),dC(i)?fC(i):i.Ra.set("Unknown")):(await i.ma.stop(),dL(i))}))),i.ma}function Gf(i){return i.fa||(i.fa=(function(t,n,r){const s=mn(t);return s.sa(),new T8(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:L8.bind(null,i),r_:V8.bind(null,i),ta:U8.bind(null,i),na:k8.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await uT(i)):(await i.fa.stop(),i.Ta.length>0&&(Dt(wp,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new nh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const o=Date.now()+n,c=new pC(e,t,o,r,s);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new wt(Xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mC(i,e){if(ch("AsyncQueue",`${e}: ${i}`),mv(i))return new wt(Xe.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{static emptySet(e){return new Cg(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||qt.comparator(t.key,n.key):(t,n)=>qt.comparator(t.key,n.key),this.keyedMap=s_(),this.sortedSet=new rr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Cg;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.ga=new rr(qt.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):rn(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Gg{constructor(e,t,n,r,s,o,c,h,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,r,s){const o=[];return t.forEach((c=>{o.push({type:0,doc:c})})),new Gg(e,t,Cg.emptySet(t),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iT(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class F8{constructor(){this.queries=$2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const r=mn(t),s=r.queries;r.queries=$2(),s.forEach(((o,c)=>{for(const h of c.Sa)h.onError(n)}))})(this,new wt(Xe.ABORTED,"Firestore shutting down"))}}function $2(){return new Fp((i=>k3(i)),iT)}async function vL(i,e){const t=mn(i);let n=3;const r=e.query;let s=t.queries.get(r);s?!s.ba()&&e.Da()&&(n=2):(s=new z8,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await t.onListen(r,!0);break;case 1:s.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const c=mC(o,`Initialization of query '${_g(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&gC(t)}async function yL(i,e){const t=mn(i),n=e.query;let r=3;const s=t.queries.get(n);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?r=e.Da()?0:1:!s.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function H8(i,e){const t=mn(i);let n=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const c of o.Sa)c.Fa(r)&&(n=!0);o.wa=r}}n&&gC(t)}function G8(i,e,t){const n=mn(i),r=n.queries.get(e);if(r)for(const s of r.Sa)s.onError(t);n.queries.delete(e)}function gC(i){i.Ca.forEach((e=>{e.next()}))}var J1,eN;(eN=J1||(J1={})).Ma="default",eN.Cache="cache";class _L{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new Gg(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Gg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==J1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.key=e}}class bL{constructor(e){this.key=e}}class j8{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jn(),this.mutatedKeys=jn(),this.eu=V3(e),this.tu=new Cg(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new J2,r=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,c=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((m,g)=>{const _=r.get(m),S=rT(this.query,g)?g:null,M=!!_&&this.mutatedKeys.has(_.key),C=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let w=!1;_&&S?_.data.isEqual(S.data)?M!==C&&(n.track({type:3,doc:S}),w=!0):this.su(_,S)||(n.track({type:2,doc:S}),w=!0,(h&&this.eu(S,h)>0||d&&this.eu(S,d)<0)&&(c=!0)):!_&&S?(n.track({type:0,doc:S}),w=!0):_&&!S&&(n.track({type:1,doc:_}),w=!0,(h||d)&&(c=!0)),w&&(S?(o=o.add(S),s=C?s.add(m):s.delete(m)):(o=o.delete(m),s=s.delete(m)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),s=s.delete(m.key),n.track({type:1,doc:m})}return{tu:o,iu:n,Cs:c,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((m,g)=>(function(S,M){const C=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rn(20277,{Rt:w})}};return C(S)-C(M)})(m.type,g.type)||this.eu(m.doc,g.doc))),this.ou(n),r=r??!1;const c=t&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,d=h!==this.Za;return this.Za=h,o.length!==0||d?{snapshot:new Gg(this.query,e.tu,s,o,e.mutatedKeys,h===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new J2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=jn(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new bL(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new SL(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=jn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Gg.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vC="SyncEngine";class q8{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Y8{constructor(e){this.key=e,this.hu=!1}}class W8{constructor(e,t,n,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Fp((c=>k3(c)),iT),this.Iu=new Map,this.Eu=new Set,this.du=new rr(qt.comparator),this.Au=new Map,this.Ru=new aC,this.Vu={},this.mu=new Map,this.fu=Hg.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function X8(i,e,t=!0){const n=AL(i);let r;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await xL(n,e,t,!0),r}async function K8(i,e){const t=AL(i);await xL(t,e,!0,!1)}async function xL(i,e,t,n){const r=await m8(i.localStore,Xc(e)),s=r.targetId,o=i.sharedClientState.addLocalQueryTarget(s,t);let c;return n&&(c=await Q8(i,e,s,o==="current",r.resumeToken)),i.isPrimaryClient&&t&&hL(i.remoteStore,r),c}async function Q8(i,e,t,n,r){i.pu=(g,_,S)=>(async function(C,w,T,D){let I=w.view.ru(T);I.Cs&&(I=await Y2(C.localStore,w.query,!1).then((({documents:k})=>w.view.ru(k,I))));const L=D&&D.targetChanges.get(w.targetId),j=D&&D.targetMismatches.get(w.targetId)!=null,Y=w.view.applyChanges(I,C.isPrimaryClient,L,j);return nN(C,w.targetId,Y.au),Y.snapshot})(i,g,_,S);const s=await Y2(i.localStore,e,!0),o=new j8(e,s.Qs),c=o.ru(s.documents),h=g0.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",r),d=o.applyChanges(c,i.isPrimaryClient,h);nN(i,t,d.au);const m=new q8(e,t,o);return i.Tu.set(e,m),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),d.snapshot}async function Z8(i,e,t){const n=mn(i),r=n.Tu.get(e),s=n.Iu.get(r.targetId);if(s.length>1)return n.Iu.set(r.targetId,s.filter((o=>!iT(o,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Q1(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),t&&uC(n.remoteStore,r.targetId),$1(n,r.targetId)})).catch(pv)):($1(n,r.targetId),await Q1(n.localStore,r.targetId,!0))}async function J8(i,e){const t=mn(i),n=t.Tu.get(e),r=t.Iu.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),uC(t.remoteStore,n.targetId))}async function $8(i,e,t){const n=aG(i);try{const r=await(function(o,c){const h=mn(o),d=Vi.now(),m=c.reduce(((S,M)=>S.add(M.key)),jn());let g,_;return h.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let M=hh(),C=jn();return h.Ns.getEntries(S,m).next((w=>{M=w,M.forEach(((T,D)=>{D.isValidDocument()||(C=C.add(T))}))})).next((()=>h.localDocuments.getOverlayedDocuments(S,M))).next((w=>{g=w;const T=[];for(const D of c){const I=p6(D,g.get(D.key).overlayedDocument);I!=null&&T.push(new Hp(D.key,I,R3(I.value.mapValue),Hl.exists(!0)))}return h.mutationQueue.addMutationBatch(S,d,T,c)})).next((w=>{_=w;const T=w.applyToLocalDocumentSet(g,C);return h.documentOverlayCache.saveOverlays(S,w.batchId,T)}))})).then((()=>({batchId:_.batchId,changes:z3(g)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),(function(o,c,h){let d=o.Vu[o.currentUser.toKey()];d||(d=new rr(Gn)),d=d.insert(c,h),o.Vu[o.currentUser.toKey()]=d})(n,r.batchId,t),await y0(n,r.changes),await uT(n.remoteStore)}catch(r){const s=mC(r,"Failed to persist write");t.reject(s)}}async function EL(i,e){const t=mn(i);try{const n=await f8(t.localStore,e);e.targetChanges.forEach(((r,s)=>{const o=t.Au.get(s);o&&(pi(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?pi(o.hu,14607):r.removedDocuments.size>0&&(pi(o.hu,42227),o.hu=!1))})),await y0(t,n,e)}catch(n){await pv(n)}}function tN(i,e,t){const n=mn(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const r=[];n.Tu.forEach(((s,o)=>{const c=o.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(o,c){const h=mn(o);h.onlineState=c;let d=!1;h.queries.forEach(((m,g)=>{for(const _ of g.Sa)_.va(c)&&(d=!0)})),d&&gC(h)})(n.eventManager,e),r.length&&n.Pu.H_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function eG(i,e,t){const n=mn(i);n.sharedClientState.updateQueryState(e,"rejected",t);const r=n.Au.get(e),s=r&&r.key;if(s){let o=new rr(qt.comparator);o=o.insert(s,Zs.newNoDocument(s,dn.min()));const c=jn().add(s),h=new oT(dn.min(),new Map,new rr(Gn),o,c);await EL(n,h),n.du=n.du.remove(s),n.Au.delete(e),yC(n)}else await Q1(n.localStore,e,!1).then((()=>$1(n,e,t))).catch(pv)}async function tG(i,e){const t=mn(i),n=e.batch.batchId;try{const r=await h8(t.localStore,e);ML(t,n,null),TL(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await y0(t,r)}catch(r){await pv(r)}}async function nG(i,e,t){const n=mn(i);try{const r=await(function(o,c){const h=mn(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let m;return h.mutationQueue.lookupMutationBatch(d,c).next((g=>(pi(g!==null,37113),m=g.keys(),h.mutationQueue.removeMutationBatch(d,g)))).next((()=>h.mutationQueue.performConsistencyCheck(d))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(d,m,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m))).next((()=>h.localDocuments.getDocuments(d,m)))}))})(n.localStore,e);ML(n,e,t),TL(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await y0(n,r)}catch(r){await pv(r)}}function TL(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function ML(i,e,t){const n=mn(i);let r=n.Vu[n.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),n.Vu[n.currentUser.toKey()]=r}}function $1(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const n of i.Iu.get(e))i.Tu.delete(n),t&&i.Pu.yu(n,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((n=>{i.Ru.containsKey(n)||wL(i,n)}))}function wL(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(uC(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),yC(i))}function nN(i,e,t){for(const n of t)n instanceof SL?(i.Ru.addReference(n.key,e),iG(i,n)):n instanceof bL?(Dt(vC,"Document no longer in limbo: "+n.key),i.Ru.removeReference(n.key,e),i.Ru.containsKey(n.key)||wL(i,n.key)):rn(19791,{wu:n})}function iG(i,e){const t=e.key,n=t.path.canonicalString();i.du.get(t)||i.Eu.has(n)||(Dt(vC,"New document in limbo: "+t),i.Eu.add(n),yC(i))}function yC(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new qt(Ni.fromString(e)),n=i.fu.next();i.Au.set(n,new Y8(t)),i.du=i.du.insert(t,n),hL(i.remoteStore,new Cf(Xc(eC(t.path)),n,"TargetPurposeLimboResolution",eT.ce))}}async function y0(i,e,t){const n=mn(i),r=[],s=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach(((c,h)=>{o.push(n.pu(h,e,t).then((d=>{if((d||t)&&n.isPrimaryClient){const m=d?!d.fromCache:t?.targetChanges.get(h.targetId)?.current;n.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(d){r.push(d);const m=lC.As(h.targetId,d);s.push(m)}})))})),await Promise.all(o),n.Pu.H_(r),await(async function(h,d){const m=mn(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>et.forEach(d,(_=>et.forEach(_.Es,(S=>m.persistence.referenceDelegate.addReference(g,_.targetId,S))).next((()=>et.forEach(_.ds,(S=>m.persistence.referenceDelegate.removeReference(g,_.targetId,S)))))))))}catch(g){if(!mv(g))throw g;Dt(cC,"Failed to update sequence numbers: "+g)}for(const g of d){const _=g.targetId;if(!g.fromCache){const S=m.Ms.get(_),M=S.snapshotVersion,C=S.withLastLimboFreeSnapshotVersion(M);m.Ms=m.Ms.insert(_,C)}}})(n.localStore,s))}async function rG(i,e){const t=mn(i);if(!t.currentUser.isEqual(e)){Dt(vC,"User change. New user:",e.toKey());const n=await oL(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach((c=>{c.forEach((h=>{h.reject(new wt(Xe.CANCELLED,o))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await y0(t,n.Ls)}}function sG(i,e){const t=mn(i),n=t.Au.get(e);if(n&&n.hu)return jn().add(n.key);{let r=jn();const s=t.Iu.get(e);if(!s)return r;for(const o of s){const c=t.Tu.get(o);r=r.unionWith(c.view.nu)}return r}}function AL(i){const e=mn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=EL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eG.bind(null,e),e.Pu.H_=H8.bind(null,e.eventManager),e.Pu.yu=G8.bind(null,e.eventManager),e}function aG(i){const e=mn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nG.bind(null,e),e}class Px{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lT(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return u8(this.persistence,new o8,e.initialUser,this.serializer)}Cu(e){return new aL(oC.mi,this.serializer)}Du(e){return new v8}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Px.provider={build:()=>new Px};class oG extends Px{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){pi(this.persistence.referenceDelegate instanceof Ix,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Y6(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ya.withCacheSize(this.cacheSizeBytes):Ya.DEFAULT;return new aL((n=>Ix.mi(n,t)),this.serializer)}}class eA{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>tN(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=rG.bind(null,this.syncEngine),await B8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new F8})()}createDatastore(e){const t=lT(e.databaseInfo.databaseId),n=(function(s){return new x8(s)})(e.databaseInfo);return(function(s,o,c,h){return new w8(s,o,c,h)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,r,s,o,c){return new C8(n,r,s,o,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>tN(this.syncEngine,t,0)),(function(){return K2.v()?new K2:new y8})())}createSyncEngine(e,t){return(function(r,s,o,c,h,d,m){const g=new W8(r,s,o,c,h,d);return m&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=mn(t);Dt(wp,"RemoteStore shutting down."),n.Ea.add(5),await v0(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}eA.provider={build:()=>new eA};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ch("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="FirestoreClient";class lG{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ks.UNAUTHENTICATED,this.clientId=XA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async o=>{Dt(jf,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(Dt(jf,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new nh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=mC(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function ow(i,e){i.asyncQueue.verifyOperationInProgress(),Dt(jf,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener((async r=>{n.isEqual(r)||(await oL(e.localStore,r),n=r)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function iN(i,e){i.asyncQueue.verifyOperationInProgress();const t=await cG(i);Dt(jf,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((n=>Z2(e.remoteStore,n))),i.setAppCheckTokenChangeListener(((n,r)=>Z2(e.remoteStore,r))),i._onlineComponents=e}async function cG(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Dt(jf,"Using user provided OfflineComponentProvider");try{await ow(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===Xe.FAILED_PRECONDITION||r.code===Xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Vg("Error using user provided cache. Falling back to memory cache: "+t),await ow(i,new Px)}}else Dt(jf,"Using default OfflineComponentProvider"),await ow(i,new oG(void 0));return i._offlineComponents}async function RL(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Dt(jf,"Using user provided OnlineComponentProvider"),await iN(i,i._uninitializedComponentsProvider._online)):(Dt(jf,"Using default OnlineComponentProvider"),await iN(i,new eA))),i._onlineComponents}function uG(i){return RL(i).then((e=>e.syncEngine))}async function DL(i){const e=await RL(i),t=e.eventManager;return t.onListen=X8.bind(null,e.syncEngine),t.onUnlisten=Z8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=K8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=J8.bind(null,e.syncEngine),t}function hG(i,e,t={}){const n=new nh;return i.asyncQueue.enqueueAndForget((async()=>(function(s,o,c,h,d){const m=new CL({next:_=>{m.Nu(),o.enqueueAndForget((()=>yL(s,g)));const S=_.docs.has(c);!S&&_.fromCache?d.reject(new wt(Xe.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&_.fromCache&&h&&h.source==="server"?d.reject(new wt(Xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new _L(eC(c.path),m,{includeMetadataChanges:!0,qa:!0});return vL(s,g)})(await DL(i),i.asyncQueue,e,t,n))),n.promise}function fG(i,e,t={}){const n=new nh;return i.asyncQueue.enqueueAndForget((async()=>(function(s,o,c,h,d){const m=new CL({next:_=>{m.Nu(),o.enqueueAndForget((()=>yL(s,g))),_.fromCache&&h.source==="server"?d.reject(new wt(Xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new _L(c,m,{includeMetadataChanges:!0,qa:!0});return vL(s,g)})(await DL(i),i.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="firestore.googleapis.com",sN=!0;class aN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new wt(Xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IL,this.ssl=sN}else this.host=e.host,this.ssl=e.ssl??sN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<j6)throw new wt(Xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NL(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new wt(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new wt(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new wt(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,r){return n.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hT{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new wt(Xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new wt(Xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new y5;switch(n.type){case"firstParty":return new x5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new wt(Xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=rN.get(t);n&&(Dt("ComponentProvider","Removing Datastore"),rN.delete(t),n.terminate())})(this),Promise.resolve()}}function dG(i,e,t,n={}){i=uh(i,hT);const r=hv(e),s=i._getSettings(),o={...s,emulatorOptions:i._getEmulatorOptions()},c=`${e}:${t}`;r&&(t3(`https://${c}`),n3("Firestore",!0)),s.host!==IL&&s.host!==c&&Vg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...s,host:c,ssl:r,emulatorOptions:n};if(!Vf(h,o)&&(i._setSettings(h),n.mockUserToken)){let d,m;if(typeof n.mockUserToken=="string")d=n.mockUserToken,m=Ks.MOCK_USER;else{d=GF(n.mockUserToken,i._app?.options.projectId);const g=n.mockUserToken.sub||n.mockUserToken.user_id;if(!g)throw new wt(Xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ks(g)}i._authCredentials=new _5(new v3(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new jp(this.firestore,e,this._query)}}class Or{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Or(this.firestore,e,this._key)}toJSON(){return{type:Or._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(p0(t,Or._jsonSchema))return new Or(e,n||null,new qt(Ni.fromString(t.referencePath)))}}Or._jsonSchemaVersion="firestore/documentReference/1.0",Or._jsonSchema={type:Ir("string",Or._jsonSchemaVersion),referencePath:Ir("string")};class Pf extends jp{constructor(e,t,n){super(e,t,eC(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Or(this.firestore,null,new qt(e))}withConverter(e){return new Pf(this.firestore,e,this._path)}}function hp(i,e,...t){if(i=ss(i),y3("collection","path",e),i instanceof hT){const n=Ni.fromString(e,...t);return _2(n),new Pf(i,null,n)}{if(!(i instanceof Or||i instanceof Pf))throw new wt(Xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Ni.fromString(e,...t));return _2(n),new Pf(i.firestore,null,n)}}function Xl(i,e,...t){if(i=ss(i),arguments.length===1&&(e=XA.newId()),y3("doc","path",e),i instanceof hT){const n=Ni.fromString(e,...t);return y2(n),new Or(i,null,new qt(n))}{if(!(i instanceof Or||i instanceof Pf))throw new wt(Xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Ni.fromString(e,...t));return y2(n),new Or(i.firestore,i instanceof Pf?i.converter:null,new qt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="AsyncQueue";class lN{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cL(this,"async_queue_retry"),this._c=()=>{const n=aw();n&&Dt(oN,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=aw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=aw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new nh;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!mv(e))throw e;Dt(oN,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,ch("INTERNAL UNHANDLED ERROR: ",cN(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=pC.createAndSchedule(this,e,t,n,(s=>this.hc(s)));return this.tc.push(r),r}uc(){this.nc&&rn(47125,{Pc:cN(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function cN(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class yv extends hT{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new lN,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lN(e),this._firestoreClient=void 0,await e}}}function pG(i,e){const t=typeof i=="object"?i:YA(),n=typeof i=="string"?i:wx,r=Bp(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const s=FF("firestore");s&&dG(r,...s)}return r}function _C(i){if(i._terminated)throw new wt(Xe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||mG(i),i._firestoreClient}function mG(i){const e=i._freezeSettings(),t=(function(r,s,o,c){return new B5(r,s,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,NL(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new lG(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(r){const s=r?._online.build();return{_offline:r?._offline.build(s),_online:s}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this._byteString=e}static fromBase64String(e){try{return new el(Ts.fromBase64String(e))}catch(t){throw new wt(Xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new el(Ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:el._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(p0(e,el._jsonSchema))return el.fromBase64String(e.bytes)}}el._jsonSchemaVersion="firestore/bytes/1.0",el._jsonSchema={type:Ir("string",el._jsonSchemaVersion),bytes:Ir("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new wt(Xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new wt(Xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new wt(Xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Gn(this._lat,e._lat)||Gn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qc._jsonSchemaVersion}}static fromJSON(e){if(p0(e,Qc._jsonSchema))return new Qc(e.latitude,e.longitude)}}Qc._jsonSchemaVersion="firestore/geoPoint/1.0",Qc._jsonSchema={type:Ir("string",Qc._jsonSchemaVersion),latitude:Ir("number"),longitude:Ir("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,r){if(n.length!==r.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(p0(e,Zc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Zc(e.vectorValues);throw new wt(Xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zc._jsonSchemaVersion="firestore/vectorValue/1.0",Zc._jsonSchema={type:Ir("string",Zc._jsonSchemaVersion),vectorValues:Ir("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gG=/^__.*__$/;class vG{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Hp(e,this.data,this.fieldMask,t,this.fieldTransforms):new m0(e,this.data,t,this.fieldTransforms)}}function PL(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rn(40011,{Ac:i})}}class bC{constructor(e,t,n,r,s,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bC({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Lx(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(PL(this.Ac)&&gG.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yG{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||lT(e)}Cc(e,t,n,r=!1){return new bC({Ac:e,methodName:t,Dc:n,path:bs.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xC(i){const e=i._freezeSettings(),t=lT(i._databaseId);return new yG(i._databaseId,!!e.ignoreUndefinedProperties,t)}function LL(i,e,t,n,r,s={}){const o=i.Cc(s.merge||s.mergeFields?2:0,e,t,r);VL("Data must be an object, but it was:",o,n);const c=UL(n,o);let h,d;if(s.merge)h=new Bl(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const m=[];for(const g of s.mergeFields){const _=SG(e,g,t);if(!o.contains(_))throw new wt(Xe.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);xG(m,_)||m.push(_)}h=new Bl(m),d=o.fieldTransforms.filter((g=>h.covers(g.field)))}else h=null,d=o.fieldTransforms;return new vG(new $o(c),h,d)}function _G(i,e,t,n=!1){return EC(t,i.Cc(n?4:3,e))}function EC(i,e){if(kL(i=ss(i)))return VL("Unsupported field value:",e,i),UL(i,e);if(i instanceof OL)return(function(n,r){if(!PL(r.Ac))throw r.Sc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,r){const s=[];let o=0;for(const c of n){let h=EC(c,r.wc(o));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),o++}return{arrayValue:{values:s}}})(i,e)}return(function(n,r){if((n=ss(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return l6(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Vi.fromDate(n);return{timestampValue:Nx(r.serializer,s)}}if(n instanceof Vi){const s=new Vi(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Nx(r.serializer,s)}}if(n instanceof Qc)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof el)return{bytesValue:J3(r.serializer,n._byteString)};if(n instanceof Or){const s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sC(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof Zc)return(function(o,c){return{mapValue:{fields:{[A3]:{stringValue:C3},[Ax]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return tC(c.serializer,d)}))}}}}}})(n,r);throw r.Sc(`Unsupported field value: ${$E(n)}`)})(i,e)}function UL(i,e){const t={};return b3(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zp(i,((n,r)=>{const s=EC(r,e.mc(n));s!=null&&(t[n]=s)})),{mapValue:{fields:t}}}function kL(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Vi||i instanceof Qc||i instanceof el||i instanceof Or||i instanceof OL||i instanceof Zc)}function VL(i,e,t){if(!kL(t)||!_3(t)){const n=$E(t);throw n==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+n)}}function SG(i,e,t){if((e=ss(e))instanceof SC)return e._internalPath;if(typeof e=="string")return BL(i,e);throw Lx("Field path arguments must be of type string or ",i,!1,void 0,t)}const bG=new RegExp("[~\\*/\\[\\]]");function BL(i,e,t){if(e.search(bG)>=0)throw Lx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new SC(...e.split("."))._internalPath}catch{throw Lx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Lx(i,e,t,n,r){const s=n&&!n.isEmpty(),o=r!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(s||o)&&(h+=" (found",s&&(h+=` in field ${n}`),o&&(h+=` in document ${r}`),h+=")"),new wt(Xe.INVALID_ARGUMENT,c+i+h)}function xG(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class EG extends zL{data(){return super.data()}}function fT(i,e){return typeof e=="string"?BL(i,e):e instanceof SC?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TG(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new wt(Xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class TC{}class FL extends TC{}function y_(i,e,...t){let n=[];e instanceof TC&&n.push(e),n=n.concat(t),(function(s){const o=s.filter((h=>h instanceof MC)).length,c=s.filter((h=>h instanceof dT)).length;if(o>1||o>0&&c>0)throw new wt(Xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const r of n)i=r._apply(i);return i}class dT extends FL{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new dT(e,t,n)}_apply(e){const t=this._parse(e);return GL(e._query,t),new jp(e.firestore,e.converter,j1(e._query,t))}_parse(e){const t=xC(e.firestore);return(function(s,o,c,h,d,m,g){let _;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new wt(Xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){hN(g,m);const M=[];for(const C of g)M.push(uN(h,s,C));_={arrayValue:{values:M}}}else _=uN(h,s,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||hN(g,m),_=_G(c,o,g,m==="in"||m==="not-in");return Nr.create(d,m,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function lw(i,e,t){const n=e,r=fT("where",i);return dT._create(r,n,t)}class MC extends TC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new MC(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:Wl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,s){let o=r;const c=s.getFlattenedFilters();for(const h of c)GL(o,h),o=j1(o,h)})(e._query,t),new jp(e.firestore,e.converter,j1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wC extends FL{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wC(e,t)}_apply(e){const t=(function(r,s,o){if(r.startAt!==null)throw new wt(Xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new wt(Xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new k_(s,o)})(e._query,this._field,this._direction);return new jp(e.firestore,e.converter,(function(r,s){const o=r.explicitOrderBy.concat([s]);return new gv(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function HL(i,e="asc"){const t=e,n=fT("orderBy",i);return wC._create(n,t)}function uN(i,e,t){if(typeof(t=ss(t))=="string"){if(t==="")throw new wt(Xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!U3(e)&&t.indexOf("/")!==-1)throw new wt(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Ni.fromString(t));if(!qt.isDocumentKey(n))throw new wt(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return A2(i,new qt(n))}if(t instanceof Or)return A2(i,t._key);throw new wt(Xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$E(t)}.`)}function hN(i,e){if(!Array.isArray(i)||i.length===0)throw new wt(Xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GL(i,e){const t=(function(r,s){for(const o of r)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null})(i.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new wt(Xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new wt(Xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class MG{convertValue(e,t="none"){switch(Hf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ff(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw rn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return zp(e,((r,s)=>{n[r]=this.convertValue(s,t)})),n}convertVectorValue(e){const t=e.fields?.[Ax].arrayValue?.values?.map((n=>yr(n.doubleValue)));return new Zc(t)}convertGeoPoint(e){return new Qc(yr(e.latitude),yr(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=nT(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(P_(e));default:return null}}convertTimestamp(e){const t=zf(e);return new Vi(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ni.fromString(e);pi(rL(n),9688,{name:e});const r=new L_(n.get(1),n.get(3)),s=new qt(n.popFirst(5));return r.isEqual(t)||ch(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(i,e,t){let n;return n=i?i.toFirestore(e):e,n}class o_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _p extends zL{constructor(e,t,n,r,s,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ax(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(fT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new wt(Xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_p._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_p._jsonSchemaVersion="firestore/documentSnapshot/1.0",_p._jsonSchema={type:Ir("string",_p._jsonSchemaVersion),bundleSource:Ir("string","DocumentSnapshot"),bundleName:Ir("string"),bundle:Ir("string")};class ax extends _p{data(e={}){return super.data(e)}}class Rg{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new o_(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new ax(this._firestore,this._userDataWriter,n.key,n,new o_(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new wt(Xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((c=>{const h=new ax(r._firestore,r._userDataWriter,c.doc.key,c.doc,new o_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>s||c.type!==3)).map((c=>{const h=new ax(r._firestore,r._userDataWriter,c.doc.key,c.doc,new o_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:wG(c.type),doc:h,oldIndex:d,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new wt(Xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Rg._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=XA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wG(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rn(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(i){i=uh(i,Or);const e=uh(i.firestore,yv);return hG(_C(e),i._key).then((t=>AG(e,i,t)))}Rg._jsonSchemaVersion="firestore/querySnapshot/1.0",Rg._jsonSchema={type:Ir("string",Rg._jsonSchemaVersion),bundleSource:Ir("string","QuerySnapshot"),bundleName:Ir("string"),bundle:Ir("string")};class qL extends MG{constructor(e){super(),this.firestore=e}convertBytes(e){return new el(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Or(this.firestore,null,t)}}function __(i){i=uh(i,jp);const e=uh(i.firestore,yv),t=_C(e),n=new qL(e);return TG(i._query),fG(t,i._query).then((r=>new Rg(e,n,i,r)))}function tA(i,e,t){i=uh(i,Or);const n=uh(i.firestore,yv),r=jL(i.converter,e);return AC(n,[LL(xC(n),"setDoc",i._key,r,i.converter!==null,t).toMutation(i._key,Hl.none())])}function nA(i){return AC(uh(i.firestore,yv),[new nC(i._key,Hl.none())])}function YL(i,e){const t=uh(i.firestore,yv),n=Xl(i),r=jL(i.converter,e);return AC(t,[LL(xC(i.firestore),"addDoc",n._key,r,i.converter!==null,{}).toMutation(n._key,Hl.exists(!1))]).then((()=>n))}function AC(i,e){return(function(n,r){const s=new nh;return n.asyncQueue.enqueueAndForget((async()=>$8(await uG(n),r,s))),s.promise})(_C(i),e)}function AG(i,e,t){const n=t.docs.get(e._key),r=new qL(i);return new _p(i,r,e._key,n,new o_(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){dv=r})(fv),ru(new Yl("firestore",((n,{instanceIdentifier:r,options:s})=>{const o=n.getProvider("app").getImmediate(),c=new yv(new S5(n.getProvider("auth-internal")),new E5(o,n.getProvider("app-check-internal")),(function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new wt(Xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new L_(d.options.projectId,m)})(o,r),o);return s={useFetchStreams:t,...s},c._setSettings(s),c}),"PUBLIC").setMultipleInstances(!0)),nl(p2,m2,e),nl(p2,m2,"esm2020")})();const WL="@firebase/installations",CC="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=1e4,KL=`w:${CC}`,QL="FIS_v2",CG="https://firebaseinstallations.googleapis.com/v1",RG=3600*1e3,DG="installations",NG="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IG={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ap=new Vp(DG,NG,IG);function ZL(i){return i instanceof Jl&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL({projectId:i}){return`${CG}/projects/${i}/installations`}function $L(i){return{token:i.token,requestStatus:2,expiresIn:PG(i.expiresIn),creationTime:Date.now()}}async function eU(i,e){const n=(await e.json()).error;return Ap.create("request-failed",{requestName:i,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function tU({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function OG(i,{refreshToken:e}){const t=tU(i);return t.append("Authorization",LG(e)),t}async function nU(i){const e=await i();return e.status>=500&&e.status<600?i():e}function PG(i){return Number(i.replace("s","000"))}function LG(i){return`${QL} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UG({appConfig:i,heartbeatServiceProvider:e},{fid:t}){const n=JL(i),r=tU(i),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const o={fid:t,authVersion:QL,appId:i.appId,sdkVersion:KL},c={method:"POST",headers:r,body:JSON.stringify(o)},h=await nU(()=>fetch(n,c));if(h.ok){const d=await h.json();return{fid:d.fid||t,registrationStatus:2,refreshToken:d.refreshToken,authToken:$L(d.authToken)}}else throw await eU("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kG(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VG=/^[cdef][\w-]{21}$/,iA="";function BG(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const t=zG(i);return VG.test(t)?t:iA}catch{return iA}}function zG(i){return kG(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU=new Map;function sU(i,e){const t=pT(i);aU(t,e),FG(t,e)}function aU(i,e){const t=rU.get(i);if(t)for(const n of t)n(e)}function FG(i,e){const t=HG();t&&t.postMessage({key:i,fid:e}),GG()}let fp=null;function HG(){return!fp&&"BroadcastChannel"in self&&(fp=new BroadcastChannel("[Firebase] FID Change"),fp.onmessage=i=>{aU(i.data.key,i.data.fid)}),fp}function GG(){rU.size===0&&fp&&(fp.close(),fp=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jG="firebase-installations-database",qG=1,Cp="firebase-installations-store";let cw=null;function RC(){return cw||(cw=a3(jG,qG,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(Cp)}}})),cw}async function Ux(i,e){const t=pT(i),r=(await RC()).transaction(Cp,"readwrite"),s=r.objectStore(Cp),o=await s.get(t);return await s.put(e,t),await r.done,(!o||o.fid!==e.fid)&&sU(i,e.fid),e}async function oU(i){const e=pT(i),n=(await RC()).transaction(Cp,"readwrite");await n.objectStore(Cp).delete(e),await n.done}async function mT(i,e){const t=pT(i),r=(await RC()).transaction(Cp,"readwrite"),s=r.objectStore(Cp),o=await s.get(t),c=e(o);return c===void 0?await s.delete(t):await s.put(c,t),await r.done,c&&(!o||o.fid!==c.fid)&&sU(i,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(i){let e;const t=await mT(i.appConfig,n=>{const r=YG(n),s=WG(i,r);return e=s.registrationPromise,s.installationEntry});return t.fid===iA?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function YG(i){const e=i||{fid:BG(),registrationStatus:0};return lU(e)}function WG(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Ap.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=XG(i,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:KG(i)}:{installationEntry:e}}async function XG(i,e){try{const t=await UG(i,e);return Ux(i.appConfig,t)}catch(t){throw ZL(t)&&t.customData.serverCode===409?await oU(i.appConfig):await Ux(i.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function KG(i){let e=await fN(i.appConfig);for(;e.registrationStatus===1;)await iU(100),e=await fN(i.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await DC(i);return n||t}return e}function fN(i){return mT(i,e=>{if(!e)throw Ap.create("installation-not-found");return lU(e)})}function lU(i){return QG(i)?{fid:i.fid,registrationStatus:0}:i}function QG(i){return i.registrationStatus===1&&i.registrationTime+XL<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZG({appConfig:i,heartbeatServiceProvider:e},t){const n=JG(i,t),r=OG(i,t),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const o={installation:{sdkVersion:KL,appId:i.appId}},c={method:"POST",headers:r,body:JSON.stringify(o)},h=await nU(()=>fetch(n,c));if(h.ok){const d=await h.json();return $L(d)}else throw await eU("Generate Auth Token",h)}function JG(i,{fid:e}){return`${JL(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(i,e=!1){let t;const n=await mT(i.appConfig,s=>{if(!cU(s))throw Ap.create("not-registered");const o=s.authToken;if(!e&&t9(o))return s;if(o.requestStatus===1)return t=$G(i,e),s;{if(!navigator.onLine)throw Ap.create("app-offline");const c=i9(s);return t=e9(i,c),c}});return t?await t:n.authToken}async function $G(i,e){let t=await dN(i.appConfig);for(;t.authToken.requestStatus===1;)await iU(100),t=await dN(i.appConfig);const n=t.authToken;return n.requestStatus===0?NC(i,e):n}function dN(i){return mT(i,e=>{if(!cU(e))throw Ap.create("not-registered");const t=e.authToken;return r9(t)?{...e,authToken:{requestStatus:0}}:e})}async function e9(i,e){try{const t=await ZG(i,e),n={...e,authToken:t};return await Ux(i.appConfig,n),t}catch(t){if(ZL(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await oU(i.appConfig);else{const n={...e,authToken:{requestStatus:0}};await Ux(i.appConfig,n)}throw t}}function cU(i){return i!==void 0&&i.registrationStatus===2}function t9(i){return i.requestStatus===2&&!n9(i)}function n9(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+RG}function i9(i){const e={requestStatus:1,requestTime:Date.now()};return{...i,authToken:e}}function r9(i){return i.requestStatus===1&&i.requestTime+XL<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s9(i){const e=i,{installationEntry:t,registrationPromise:n}=await DC(e);return n?n.catch(console.error):NC(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a9(i,e=!1){const t=i;return await o9(t),(await NC(t,e)).token}async function o9(i){const{registrationPromise:e}=await DC(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l9(i){if(!i||!i.options)throw uw("App Configuration");if(!i.name)throw uw("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!i.options[t])throw uw(t);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function uw(i){return Ap.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU="installations",c9="installations-internal",u9=i=>{const e=i.getProvider("app").getImmediate(),t=l9(e),n=Bp(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},h9=i=>{const e=i.getProvider("app").getImmediate(),t=Bp(e,uU).getImmediate();return{getId:()=>s9(t),getToken:r=>a9(t,r)}};function f9(){ru(new Yl(uU,u9,"PUBLIC")),ru(new Yl(c9,h9,"PRIVATE"))}f9();nl(WL,CC);nl(WL,CC,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="analytics",d9="firebase_id",p9="origin",m9=60*1e3,g9="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",IC="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new JE("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Eo=new Vp("analytics","Analytics",v9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y9(i){if(!i.startsWith(IC)){const e=Eo.create("invalid-gtag-resource",{gtagURL:i});return Ca.warn(e.message),""}return i}function hU(i){return Promise.all(i.map(e=>e.catch(t=>t)))}function _9(i,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(i,e)),t}function S9(i,e){const t=_9("firebase-js-sdk-policy",{createScriptURL:y9}),n=document.createElement("script"),r=`${IC}?l=${i}&id=${e}`;n.src=t?t?.createScriptURL(r):r,n.async=!0,document.head.appendChild(n)}function b9(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function x9(i,e,t,n,r,s){const o=n[r];try{if(o)await e[o];else{const h=(await hU(t)).find(d=>d.measurementId===r);h&&await e[h.appId]}}catch(c){Ca.error(c)}i("config",r,s)}async function E9(i,e,t,n,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const c=await hU(t);for(const h of o){const d=c.find(g=>g.measurementId===h),m=d&&e[d.appId];if(m)s.push(m);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),i("event",n,r||{})}catch(s){Ca.error(s)}}function T9(i,e,t,n){async function r(s,...o){try{if(s==="event"){const[c,h]=o;await E9(i,e,t,c,h)}else if(s==="config"){const[c,h]=o;await x9(i,e,t,n,c,h)}else if(s==="consent"){const[c,h]=o;i("consent",c,h)}else if(s==="get"){const[c,h,d]=o;i("get",c,h,d)}else if(s==="set"){const[c]=o;i("set",c)}else i(s,...o)}catch(c){Ca.error(c)}}return r}function M9(i,e,t,n,r){let s=function(...o){window[n].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=T9(s,i,e,t),{gtagCore:s,wrappedGtag:window[r]}}function w9(i){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(IC)&&t.src.includes(i))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9=30,C9=1e3;class R9{constructor(e={},t=C9){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const fU=new R9;function D9(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function N9(i){const{appId:e,apiKey:t}=i,n={method:"GET",headers:D9(t)},r=g9.replace("{app-id}",e),s=await fetch(r,n);if(s.status!==200&&s.status!==304){let o="";try{const c=await s.json();c.error?.message&&(o=c.error.message)}catch{}throw Eo.create("config-fetch-failed",{httpStatus:s.status,responseMessage:o})}return s.json()}async function I9(i,e=fU,t){const{appId:n,apiKey:r,measurementId:s}=i.options;if(!n)throw Eo.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:n};throw Eo.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new L9;return setTimeout(async()=>{c.abort()},m9),dU({appId:n,apiKey:r,measurementId:s},o,c,e)}async function dU(i,{throttleEndTimeMillis:e,backoffCount:t},n,r=fU){const{appId:s,measurementId:o}=i;try{await O9(n,e)}catch(c){if(o)return Ca.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:s,measurementId:o};throw c}try{const c=await N9(i);return r.deleteThrottleMetadata(s),c}catch(c){const h=c;if(!P9(h)){if(r.deleteThrottleMetadata(s),o)return Ca.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:s,measurementId:o};throw c}const d=Number(h?.customData?.httpStatus)===503?r2(t,r.intervalMillis,A9):r2(t,r.intervalMillis),m={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return r.setThrottleMetadata(s,m),Ca.debug(`Calling attemptFetch again in ${d} millis`),dU(i,m,n,r)}}function O9(i,e){return new Promise((t,n)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);i.addEventListener(()=>{clearTimeout(s),n(Eo.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function P9(i){if(!(i instanceof Jl)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class L9{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function U9(i,e,t,n,r){if(r&&r.global){i("event",t,n);return}else{const s=await e,o={...n,send_to:s};i("event",t,o)}}async function k9(i,e,t,n){if(n&&n.global){const r={};for(const s of Object.keys(t))r[`user_properties.${s}`]=t[s];return i("set",r),Promise.resolve()}else{const r=await e;i("config",r,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V9(){if(GA())try{await jA()}catch(i){return Ca.warn(Eo.create("indexeddb-unavailable",{errorInfo:i?.toString()}).message),!1}else return Ca.warn(Eo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function B9(i,e,t,n,r,s,o){const c=I9(i);c.then(_=>{t[_.measurementId]=_.appId,i.options.measurementId&&_.measurementId!==i.options.measurementId&&Ca.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>Ca.error(_)),e.push(c);const h=V9().then(_=>{if(_)return n.getId()}),[d,m]=await Promise.all([c,h]);w9(s)||S9(s,d.measurementId),r("js",new Date);const g=o?.config??{};return g[p9]="firebase",g.update=!0,m!=null&&(g[d9]=m),r("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e){this.app=e}_delete(){return delete Dg[this.app.options.appId],Promise.resolve()}}let Dg={},pN=[];const mN={};let hw="dataLayer",F9="gtag",gN,OC,vN=!1;function H9(){const i=[];if(HA()&&i.push("This is a browser extension environment."),i3()||i.push("Cookies are not available."),i.length>0){const e=i.map((n,r)=>`(${r+1}) ${n}`).join(" "),t=Eo.create("invalid-analytics-context",{errorInfo:e});Ca.warn(t.message)}}function G9(i,e,t){H9();const n=i.options.appId;if(!n)throw Eo.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)Ca.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Eo.create("no-api-key");if(Dg[n]!=null)throw Eo.create("already-exists",{id:n});if(!vN){b9(hw);const{wrappedGtag:s,gtagCore:o}=M9(Dg,pN,mN,hw,F9);OC=s,gN=o,vN=!0}return Dg[n]=B9(i,pN,mN,e,gN,hw,t),new z9(i)}function j9(i=YA()){i=ss(i);const e=Bp(i,kx);return e.isInitialized()?e.getImmediate():q9(i)}function q9(i,e={}){const t=Bp(i,kx);if(t.isInitialized()){const r=t.getImmediate();if(Vf(e,t.getOptions()))return r;throw Eo.create("already-initialized")}return t.initialize({options:e})}async function Y9(){if(HA()||!i3()||!GA())return!1;try{return await jA()}catch{return!1}}function W9(i,e,t){i=ss(i),k9(OC,Dg[i.app.options.appId],e,t).catch(n=>Ca.error(n))}function pU(i,e,t,n){i=ss(i),U9(OC,Dg[i.app.options.appId],e,t,n).catch(r=>Ca.error(r))}const yN="@firebase/analytics",_N="0.10.19";function X9(){ru(new Yl(kx,(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return G9(n,r,t)},"PUBLIC")),ru(new Yl("analytics-internal",i,"PRIVATE")),nl(yN,_N),nl(yN,_N,"esm2020");function i(e){try{const t=e.getProvider(kx).getImmediate();return{logEvent:(n,r,s)=>pU(t,n,r,s),setUserProperties:(n,r)=>W9(t,n,r)}}catch(t){throw Eo.create("interop-component-reg-failed",{reason:t})}}}X9();function mU(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const K9=mU,gU=new Vp("auth","Firebase",mU());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=new JE("@firebase/auth");function Q9(i,...e){Vx.logLevel<=Hn.WARN&&Vx.warn(`Auth (${fv}): ${i}`,...e)}function ox(i,...e){Vx.logLevel<=Hn.ERROR&&Vx.error(`Auth (${fv}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(i,...e){throw PC(i,...e)}function Jc(i,...e){return PC(i,...e)}function vU(i,e,t){const n={...K9(),[e]:t};return new Vp("auth","Firebase",n).create(e,{appName:i.name})}function Lf(i){return vU(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PC(i,...e){if(typeof i!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return gU.create(i,...e)}function nn(i,e,...t){if(!i)throw PC(e,...t)}function Ju(i){const e="INTERNAL ASSERTION FAILED: "+i;throw ox(e),new Error(e)}function fh(i,e){i||Ju(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(){return typeof self<"u"&&self.location?.href||""}function Z9(){return SN()==="http:"||SN()==="https:"}function SN(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z9()||HA()||"connection"in navigator)?navigator.onLine:!0}function $9(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,t){this.shortDelay=e,this.longDelay=t,fh(t>e,"Short delay should be less than long delay!"),this.isMobile=YF()||KF()}get(){return J9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(i,e){fh(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ju("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ju("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ju("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nj=new _0(3e4,6e4);function qp(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Qf(i,e,t,n,r={}){return _U(i,r,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const c=d0({key:i.config.apiKey,...o}).slice(1),h=await i._getAdditionalHeaders();h["Content-Type"]="application/json",i.languageCode&&(h["X-Firebase-Locale"]=i.languageCode);const d={method:e,headers:h,...s};return XF()||(d.referrerPolicy="no-referrer"),i.emulatorConfig&&hv(i.emulatorConfig.host)&&(d.credentials="include"),yU.fetch()(await SU(i,i.config.apiHost,t,c),d)})}async function _U(i,e,t){i._canInitEmulator=!1;const n={...ej,...e};try{const r=new rj(i),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw QS(i,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw QS(i,"credential-already-in-use",o);if(h==="EMAIL_EXISTS")throw QS(i,"email-already-in-use",o);if(h==="USER_DISABLED")throw QS(i,"user-disabled",o);const m=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw vU(i,m,d);Kl(i,m)}}catch(r){if(r instanceof Jl)throw r;Kl(i,"network-request-failed",{message:String(r)})}}async function gT(i,e,t,n,r={}){const s=await Qf(i,e,t,n,r);return"mfaPendingCredential"in s&&Kl(i,"multi-factor-auth-required",{_serverResponse:s}),s}async function SU(i,e,t,n){const r=`${e}${t}?${n}`,s=i,o=s.config.emulator?LC(i.config,r):`${i.config.apiScheme}://${r}`;return tj.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function ij(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Jc(this.auth,"network-request-failed")),nj.get())})}}function QS(i,e,t){const n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=Jc(i,e,n);return r.customData._tokenResponse=t,r}function bN(i){return i!==void 0&&i.enterprise!==void 0}class sj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ij(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aj(i,e){return Qf(i,"GET","/v2/recaptchaConfig",qp(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oj(i,e){return Qf(i,"POST","/v1/accounts:delete",e)}async function Bx(i,e){return Qf(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lj(i,e=!1){const t=ss(i),n=await t.getIdToken(e),r=UC(n);nn(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:n,authTime:S_(fw(r.auth_time)),issuedAtTime:S_(fw(r.iat)),expirationTime:S_(fw(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function fw(i){return Number(i)*1e3}function UC(i){const[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return ox("JWT malformed, contained fewer than 3 sections"),null;try{const r=ZP(t);return r?JSON.parse(r):(ox("Failed to decode base64 JWT payload"),null)}catch(r){return ox("Caught error parsing JWT payload as JSON",r?.toString()),null}}function xN(i){const e=UC(i);return nn(e,"internal-error"),nn(typeof e.exp<"u","internal-error"),nn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F_(i,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Jl&&cj(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function cj({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=S_(this.lastLoginAt),this.creationTime=S_(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(i){const e=i.auth,t=await i.getIdToken(),n=await F_(i,Bx(e,{idToken:t}));nn(n?.users.length,e,"internal-error");const r=n.users[0];i._notifyReloadListener(r);const s=r.providerUserInfo?.length?bU(r.providerUserInfo):[],o=fj(i.providerData,s),c=i.isAnonymous,h=!(i.email&&r.passwordHash)&&!o?.length,d=c?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new sA(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(i,m)}async function hj(i){const e=ss(i);await zx(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fj(i,e){return[...i.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function bU(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(i,e){const t=await _U(i,{},async()=>{const n=d0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=i.config,o=await SU(i,r,"/v1/token",`key=${s}`),c=await i._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:n};return i.emulatorConfig&&hv(i.emulatorConfig.host)&&(h.credentials="include"),yU.fetch()(o,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pj(i,e){return Qf(i,"POST","/v2/accounts:revokeToken",qp(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nn(e.idToken,"internal-error"),nn(typeof e.idToken<"u","internal-error"),nn(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){nn(e.length!==0,"internal-error");const t=xN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(nn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await dj(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,o=new Ng;return n&&(nn(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),r&&(nn(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(nn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ng,this.toJSON())}_performRefresh(){return Ju("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(i,e){nn(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class zl{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new uj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new sA(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await F_(this,this.stsTokenManager.getToken(this.auth,e));return nn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lj(this,e)}reload(){return hj(this)}_assign(e){this!==e&&(nn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zl({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){nn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await zx(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vl(this.auth.app))return Promise.reject(Lf(this.auth));const e=await this.getIdToken();return await F_(this,oj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,c=t.tenantId??void 0,h=t._redirectEventId??void 0,d=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:S,providerData:M,stsTokenManager:C}=t;nn(g&&C,e,"internal-error");const w=Ng.fromJSON(this.name,C);nn(typeof g=="string",e,"internal-error"),ff(n,e.name),ff(r,e.name),nn(typeof _=="boolean",e,"internal-error"),nn(typeof S=="boolean",e,"internal-error"),ff(s,e.name),ff(o,e.name),ff(c,e.name),ff(h,e.name),ff(d,e.name),ff(m,e.name);const T=new zl({uid:g,auth:e,email:r,emailVerified:_,displayName:n,isAnonymous:S,photoURL:o,phoneNumber:s,tenantId:c,stsTokenManager:w,createdAt:d,lastLoginAt:m});return M&&Array.isArray(M)&&(T.providerData=M.map(D=>({...D}))),h&&(T._redirectEventId=h),T}static async _fromIdTokenResponse(e,t,n=!1){const r=new Ng;r.updateFromServerResponse(t);const s=new zl({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await zx(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];nn(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?bU(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new Ng;c.updateFromIdToken(n);const h=new zl({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new sA(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new Map;function $u(i){fh(i instanceof Function,"Expected a class definition");let e=EN.get(i);return e?(fh(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,EN.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xU.type="NONE";const TN=xU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(i,e,t){return`firebase:${i}:${e}:${t}`}class Ig{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=lx(this.userKey,r.apiKey,s),this.fullPersistenceKey=lx("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Bx(this.auth,{idToken:e}).catch(()=>{});return t?zl._fromGetAccountInfoResponse(this.auth,t,e):null}return zl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Ig($u(TN),e,n);const r=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=r[0]||$u(TN);const o=lx(n,e.config.apiKey,e.name);let c=null;for(const d of t)try{const m=await d._get(o);if(m){let g;if(typeof m=="string"){const _=await Bx(e,{idToken:m}).catch(()=>{});if(!_)break;g=await zl._fromGetAccountInfoResponse(e,_,m)}else g=zl._fromJSON(e,m);d!==s&&(c=g),s=d;break}}catch{}const h=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new Ig(s,e,n):(s=h[0],c&&await s._set(o,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new Ig(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CU(e))return"Blackberry";if(RU(e))return"Webos";if(TU(e))return"Safari";if((e.includes("chrome/")||MU(e))&&!e.includes("edge/"))return"Chrome";if(AU(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if(n?.length===2)return n[1]}return"Other"}function EU(i=ea()){return/firefox\//i.test(i)}function TU(i=ea()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MU(i=ea()){return/crios\//i.test(i)}function wU(i=ea()){return/iemobile/i.test(i)}function AU(i=ea()){return/android/i.test(i)}function CU(i=ea()){return/blackberry/i.test(i)}function RU(i=ea()){return/webos/i.test(i)}function kC(i=ea()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function mj(i=ea()){return kC(i)&&!!window.navigator?.standalone}function gj(){return QF()&&document.documentMode===10}function DU(i=ea()){return kC(i)||AU(i)||RU(i)||CU(i)||/windows phone/i.test(i)||wU(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(i,e=[]){let t;switch(i){case"Browser":t=MN(ea());break;case"Worker":t=`${MN(ea())}-${i}`;break;default:t=i}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fv}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((o,c)=>{try{const h=e(s);o(h)}catch(h){c(h)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(i,e={}){return Qf(i,"GET","/v2/passwordPolicy",qp(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=6;class Sj{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??_j,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wN(this),this.idTokenSubscription=new wN(this),this.beforeStateQueue=new vj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gU,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$u(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ig.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Bx(this,{idToken:e}),n=await zl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Vl(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,o=n?._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===o)&&c?.user&&(n=c.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return nn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zx(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vl(this.app))return Promise.reject(Lf(this));const t=e?ss(e):null;return t&&nn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&nn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vl(this.app)?Promise.reject(Lf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vl(this.app)?Promise.reject(Lf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($u(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yj(this),t=new Sj(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vp("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await pj(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$u(e)||this._popupRedirectResolver;nn(t,this,"argument-error"),this.redirectPersistenceManager=await Ig.create(this,[$u(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(nn(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,n,r);return()=>{o=!0,h()}}else{const h=e.addObserver(t);return()=>{o=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(Vl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Q9(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _v(i){return ss(i)}class wN{constructor(e){this.auth=e,this.observer=null,this.addObserver=nH(t=>this.observer=t)}get next(){return nn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vT={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xj(i){vT=i}function IU(i){return vT.loadJS(i)}function Ej(){return vT.recaptchaEnterpriseScript}function Tj(){return vT.gapiScript}function Mj(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class wj{constructor(){this.enterprise=new Aj}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Aj{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Cj="recaptcha-enterprise",OU="NO_RECAPTCHA";class Rj{constructor(e){this.type=Cj,this.auth=_v(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,c)=>{aj(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new sj(h);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(h=>{c(h)})})}function r(s,o,c){const h=window.grecaptcha;bN(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(OU)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wj().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{n(this.auth).then(c=>{if(!t&&bN(window.grecaptcha))r(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let h=Ej();h.length!==0&&(h+=c),IU(h).then(()=>{r(c,s,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function AN(i,e,t,n=!1,r=!1){const s=new Rj(i);let o;if(r)o=OU;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return n?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function CN(i,e,t,n,r){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await AN(i,e,t,t==="getOobCode");return n(i,s)}else return n(i,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await AN(i,e,t,t==="getOobCode");return n(i,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(i,e){const t=Bp(i,"auth");if(t.isInitialized()){const r=t.getImmediate(),s=t.getOptions();if(Vf(s,e??{}))return r;Kl(r,"already-initialized")}return t.initialize({options:e})}function Nj(i,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map($u);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e?.popupRedirectResolver)}function Ij(i,e,t){const n=_v(i);nn(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,s=PU(e),{host:o,port:c}=Oj(e),h=c===null?"":`:${c}`,d={url:`${s}//${o}${h}/`},m=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){nn(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),nn(Vf(d,n.config.emulator)&&Vf(m,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=m,n.settings.appVerificationDisabledForTesting=!0,hv(o)?(t3(`${s}//${o}${h}`),n3("Auth",!0)):Pj()}function PU(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function Oj(i){const e=PU(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const s=r[1];return{host:s,port:RN(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:RN(o)}}}function RN(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function Pj(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ju("not implemented")}_getIdTokenResponse(e){return Ju("not implemented")}_linkToIdToken(e,t){return Ju("not implemented")}_getReauthenticationResolver(e){return Ju("not implemented")}}async function Lj(i,e){return Qf(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(i,e){return gT(i,"POST","/v1/accounts:signInWithPassword",qp(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(i,e){return gT(i,"POST","/v1/accounts:signInWithEmailLink",qp(i,e))}async function Vj(i,e){return gT(i,"POST","/v1/accounts:signInWithEmailLink",qp(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_ extends VC{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new H_(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new H_(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return CN(e,t,"signInWithPassword",Uj);case"emailLink":return kj(e,{email:this._email,oobCode:this._password});default:Kl(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return CN(e,n,"signUpPassword",Lj);case"emailLink":return Vj(e,{idToken:t,email:this._email,oobCode:this._password});default:Kl(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Og(i,e){return gT(i,"POST","/v1/accounts:signInWithIdp",qp(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj="http://localhost";class Rp extends VC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Rp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Kl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r,...s}=t;if(!n||!r)return null;const o=new Rp(n,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Og(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Og(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Og(e,t)}buildRequest(){const e={requestUri:Bj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=d0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Fj(i){const e=n_(i_(i)).link,t=e?n_(i_(e)).deep_link_id:null,n=n_(i_(i)).deep_link_id;return(n?n_(i_(n)).link:null)||n||t||e||i}class BC{constructor(e){const t=n_(i_(e)),n=t.apiKey??null,r=t.oobCode??null,s=zj(t.mode??null);nn(n&&r&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Fj(e);try{return new BC(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.providerId=Sv.PROVIDER_ID}static credential(e,t){return H_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=BC.parseLink(t);return nn(n,"argument-error"),H_._fromEmailAndCode(e,n.code,n.tenantId)}}Sv.PROVIDER_ID="password";Sv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends LU{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends S0{constructor(){super("facebook.com")}static credential(e){return Rp._fromParams({providerId:xf.PROVIDER_ID,signInMethod:xf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xf.credentialFromTaggedObject(e)}static credentialFromError(e){return xf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xf.credential(e.oauthAccessToken)}catch{return null}}}xf.FACEBOOK_SIGN_IN_METHOD="facebook.com";xf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends S0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Rp._fromParams({providerId:Ef.PROVIDER_ID,signInMethod:Ef.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ef.credentialFromTaggedObject(e)}static credentialFromError(e){return Ef.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ef.credential(t,n)}catch{return null}}}Ef.GOOGLE_SIGN_IN_METHOD="google.com";Ef.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf extends S0{constructor(){super("github.com")}static credential(e){return Rp._fromParams({providerId:Tf.PROVIDER_ID,signInMethod:Tf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tf.credentialFromTaggedObject(e)}static credentialFromError(e){return Tf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tf.credential(e.oauthAccessToken)}catch{return null}}}Tf.GITHUB_SIGN_IN_METHOD="github.com";Tf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf extends S0{constructor(){super("twitter.com")}static credential(e,t){return Rp._fromParams({providerId:Mf.PROVIDER_ID,signInMethod:Mf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Mf.credentialFromTaggedObject(e)}static credentialFromError(e){return Mf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Mf.credential(t,n)}catch{return null}}}Mf.TWITTER_SIGN_IN_METHOD="twitter.com";Mf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const s=await zl._fromIdTokenResponse(e,n,r),o=DN(n);return new jg({user:s,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=DN(n);return new jg({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function DN(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx extends Jl{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Fx.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Fx(e,t,n,r)}}function UU(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fx._fromErrorAndOperation(i,s,e,n):s})}async function Hj(i,e,t=!1){const n=await F_(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return jg._forOperation(i,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(i,e,t=!1){const{auth:n}=i;if(Vl(n.app))return Promise.reject(Lf(n));const r="reauthenticate";try{const s=await F_(i,UU(n,r,e,i),t);nn(s.idToken,n,"internal-error");const o=UC(s.idToken);nn(o,n,"internal-error");const{sub:c}=o;return nn(i.uid===c,n,"user-mismatch"),jg._forOperation(i,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Kl(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(i,e,t=!1){if(Vl(i.app))return Promise.reject(Lf(i));const n="signIn",r=await UU(i,n,e),s=await jg._fromIdTokenResponse(i,n,r);return t||await i._updateCurrentUser(s.user),s}async function jj(i,e){return kU(_v(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qj(i){const e=_v(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Yj(i,e,t){return Vl(i.app)?Promise.reject(Lf(i)):jj(ss(i),Sv.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&qj(i),n})}function Wj(i,e,t,n){return ss(i).onIdTokenChanged(e,t,n)}function Xj(i,e,t){return ss(i).beforeAuthStateChanged(e,t)}function Kj(i,e,t,n){return ss(i).onAuthStateChanged(e,t,n)}function Qj(i){return ss(i).signOut()}const Hx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hx,"1"),this.storage.removeItem(Hx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=1e3,Jj=10;class BU extends VU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DU(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,c,h)=>{this.notifyListeners(o,h)});return}const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(n);!t&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);gj()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Jj):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},Zj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BU.type="LOCAL";const $j=BU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU extends VU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zU.type="SESSION";const FU=zU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const n=new yT(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,o=this.handlersMap[r];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const c=Array.from(o).map(async d=>d(t.origin,s)),h=await e7(c);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,h)=>{const d=zC("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(_.data.response);break;default:clearTimeout(m),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(){return window}function n7(i){$c().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(){return typeof $c().WorkerGlobalScope<"u"&&typeof $c().importScripts=="function"}async function i7(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function r7(){return navigator?.serviceWorker?.controller||null}function s7(){return HU()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU="firebaseLocalStorageDb",a7=1,Gx="firebaseLocalStorage",jU="fbase_key";class b0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function _T(i,e){return i.transaction([Gx],e?"readwrite":"readonly").objectStore(Gx)}function o7(){const i=indexedDB.deleteDatabase(GU);return new b0(i).toPromise()}function aA(){const i=indexedDB.open(GU,a7);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(Gx,{keyPath:jU})}catch(r){t(r)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(Gx)?e(n):(n.close(),await o7(),e(await aA()))})})}async function NN(i,e,t){const n=_T(i,!0).put({[jU]:e,value:t});return new b0(n).toPromise()}async function l7(i,e){const t=_T(i,!1).get(e),n=await new b0(t).toPromise();return n===void 0?null:n.value}function IN(i,e){const t=_T(i,!0).delete(e);return new b0(t).toPromise()}const c7=800,u7=3;class qU{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await aA(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>u7)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HU()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yT._getInstance(s7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await i7(),!this.activeServiceWorker)return;this.sender=new t7(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||r7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await aA();return await NN(e,Hx,"1"),await IN(e,Hx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>NN(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>l7(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>IN(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=_T(r,!1).getAll();return new b0(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),c7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qU.type="LOCAL";const h7=qU;new _0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f7(i,e){return e?$u(e):(nn(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC extends VC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Og(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Og(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Og(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function d7(i){return kU(i.auth,new FC(i),i.bypassAuthState)}function p7(i){const{auth:e,user:t}=i;return nn(t,e,"internal-error"),Gj(t,new FC(i),i.bypassAuthState)}async function m7(i){const{auth:e,user:t}=i;return nn(t,e,"internal-error"),Hj(t,new FC(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e,t,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const h={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return d7;case"linkViaPopup":case"linkViaRedirect":return m7;case"reauthViaPopup":case"reauthViaRedirect":return p7;default:Kl(this.auth,"internal-error")}}resolve(e){fh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7=new _0(2e3,1e4);class Eg extends YU{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Eg.currentPopupAction&&Eg.currentPopupAction.cancel(),Eg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nn(e,this.auth,"internal-error"),e}async onExecution(){fh(this.filter.length===1,"Popup operations only handle one event");const e=zC();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Jc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Jc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eg.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,g7.get())};e()}}Eg.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7="pendingRedirect",cx=new Map;class y7 extends YU{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=cx.get(this.auth._key());if(!e){try{const n=await _7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}cx.set(this.auth._key(),e)}return this.bypassAuthState||cx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _7(i,e){const t=x7(e),n=b7(i);if(!await n._isAvailable())return!1;const r=await n._get(t)==="true";return await n._remove(t),r}function S7(i,e){cx.set(i._key(),e)}function b7(i){return $u(i._redirectPersistence)}function x7(i){return lx(v7,i.config.apiKey,i.name)}async function E7(i,e,t=!1){if(Vl(i.app))return Promise.reject(Lf(i));const n=_v(i),r=f7(n,e),o=await new y7(n,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7=600*1e3;class M7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!w7(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!WU(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Jc(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T7&&this.cachedEventUids.clear(),this.cachedEventUids.has(ON(e))}saveEventToCache(e){this.cachedEventUids.add(ON(e)),this.lastProcessedEventTime=Date.now()}}function ON(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function WU({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function w7(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WU(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A7(i,e={}){return Qf(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R7=/^https?/;async function D7(i){if(i.config.emulator)return;const{authorizedDomains:e}=await A7(i);for(const t of e)try{if(N7(t))return}catch{}Kl(i,"unauthorized-domain")}function N7(i){const e=rA(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){const o=new URL(i);return o.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===n}if(!R7.test(t))return!1;if(C7.test(i))return n===i;const r=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=new _0(3e4,6e4);function PN(){const i=$c().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function O7(i){return new Promise((e,t)=>{function n(){PN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PN(),t(Jc(i,"network-request-failed"))},timeout:I7.get()})}if($c().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if($c().gapi?.load)n();else{const r=Mj("iframefcb");return $c()[r]=()=>{gapi.load?n():t(Jc(i,"network-request-failed"))},IU(`${Tj()}?onload=${r}`).catch(s=>t(s))}}).catch(e=>{throw ux=null,e})}let ux=null;function P7(i){return ux=ux||O7(i),ux}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=new _0(5e3,15e3),U7="__/auth/iframe",k7="emulator/auth/iframe",V7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z7(i){const e=i.config;nn(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?LC(e,k7):`https://${i.config.authDomain}/${U7}`,n={apiKey:e.apiKey,appName:i.name,v:fv},r=B7.get(i.config.apiHost);r&&(n.eid=r);const s=i._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${d0(n).slice(1)}`}async function F7(i){const e=await P7(i),t=$c().gapi;return nn(t,i,"internal-error"),e.open({where:document.body,url:z7(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V7,dontclear:!0},n=>new Promise(async(r,s)=>{await n.restyle({setHideOnLeave:!1});const o=Jc(i,"network-request-failed"),c=$c().setTimeout(()=>{s(o)},L7.get());function h(){$c().clearTimeout(c),r(n)}n.ping(h).then(h,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G7=500,j7=600,q7="_blank",Y7="http://localhost";class LN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function W7(i,e,t,n=G7,r=j7){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const h={...H7,width:n.toString(),height:r.toString(),top:s,left:o},d=ea().toLowerCase();t&&(c=MU(d)?q7:t),EU(d)&&(e=e||Y7,h.scrollbars="yes");const m=Object.entries(h).reduce((_,[S,M])=>`${_}${S}=${M},`,"");if(mj(d)&&c!=="_self")return X7(e||"",c),new LN(null);const g=window.open(e||"",c,m);nn(g,i,"popup-blocked");try{g.focus()}catch{}return new LN(g)}function X7(i,e){const t=document.createElement("a");t.href=i,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7="__/auth/handler",Q7="emulator/auth/handler",Z7=encodeURIComponent("fac");async function UN(i,e,t,n,r,s){nn(i.config.authDomain,i,"auth-domain-config-required"),nn(i.config.apiKey,i,"invalid-api-key");const o={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:fv,eventId:r};if(e instanceof LU){e.setDefaultLanguage(i.languageCode),o.providerId=e.providerId||"",tH(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))o[m]=g}if(e instanceof S0){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(o.scopes=m.join(","))}i.tenantId&&(o.tid=i.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await i._getAppCheckToken(),d=h?`#${Z7}=${encodeURIComponent(h)}`:"";return`${J7(i)}?${d0(c).slice(1)}${d}`}function J7({config:i}){return i.emulator?LC(i,Q7):`https://${i.authDomain}/${K7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="webStorageSupport";class $7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FU,this._completeRedirectFn=E7,this._overrideRedirectResult=S7}async _openPopup(e,t,n,r){fh(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await UN(e,t,n,rA(),r);return W7(e,s,zC())}async _openRedirect(e,t,n,r){await this._originValidation(e);const s=await UN(e,t,n,rA(),r);return n7(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(fh(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await F7(e),n=new M7(e);return t.register("authEvent",r=>(nn(r?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dw,{type:dw},r=>{const s=r?.[0]?.[dw];s!==void 0&&t(!!s),Kl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=D7(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return DU()||TU()||kC()}}const eq=$7;var kN="@firebase/auth",VN="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){nn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nq(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iq(i){ru(new Yl("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;nn(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:o,authDomain:c,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NU(i)},d=new bj(n,r,s,h);return Nj(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ru(new Yl("auth-internal",e=>{const t=_v(e.getProvider("auth").getImmediate());return(n=>new tq(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),nl(kN,VN,nq(i)),nl(kN,VN,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq=300,sq=e3("authIdTokenMaxAge")||rq;let BN=null;const aq=i=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>sq)return;const r=t?.token;BN!==r&&(BN=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function oq(i=YA()){const e=Bp(i,"auth");if(e.isInitialized())return e.getImmediate();const t=Dj(i,{popupRedirectResolver:eq,persistence:[h7,$j,FU]}),n=e3("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=aq(s.toString());Xj(t,o,()=>o(t.currentUser)),Wj(t,c=>o(c))}}const r=JP("auth");return r&&Ij(t,`http://${r}`),t}function lq(){return document.getElementsByTagName("head")?.[0]??document}xj({loadJS(i){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=r=>{const s=Jc("internal-error");s.customData=r,t(s)},n.type="text/javascript",n.charset="UTF-8",lq().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iq("Browser");const cq={apiKey:"AIzaSyDnRuB2qnluisfHOqNEfAUM8XR_3u6gg6k",authDomain:"shiynelly-lashes.firebaseapp.com",projectId:"shiynelly-lashes",storageBucket:"shiynelly-lashes.firebasestorage.app",messagingSenderId:"753067897077",appId:"1:753067897077:web:6478e1936121d108ec55bc",measurementId:"G-FR2YC35HHN"},HC=o3(cq),_s=pG(HC),hx=oq(HC);let oA=null;Y9().then(i=>{i&&(oA=j9(HC))});const bo=(i,e={})=>{try{oA&&pU(oA,i,e)}catch(t){console.warn("Analytics event failed:",t)}},uq="/assets/Logo-SL-white-nobg-BjJ9TJUJ.png",qm=[{name:"Home",path:"/"},{name:"Nos Prestations",path:"#nosprestations"},{name:"Contact",path:"#contact"},{name:"Rservation",path:"#rservation"}],pw=[{title:"Cils  Cils",description:"Une extension par cil naturel pour un look subtil et lgant",price:"25",result:"Des cils allongs, un regard sublim, tout en finesse"},{title:"Pose Whispy",description:"Des cils de longueurs varies qui apportent volume, intensit et dimension au regard",price:"25",result:"Un regard harmonieux alliant naturel et intensit"},{title:"Pose Mixte",description:"Combinaison de la technique cil  cil et de la pose russe pour un effet sur-mesure",price:"25",result:"Un regard personnalis alliant volume et naturel, idal pour un effet quilibr"},{title:"Pose Russe",description:"Consiste  appliquer des ventails d'extensions prforms (bouquets) sur chaque cil naturel",price:"25",result:"Un regard fourni, harmonieux et glamour, avec une tenue longue dure"},{title:"Dpose",description:"La dpose de cils permet de retirer en douceur les extensions sans abmer les cils naturels, grce  un dissolvant professionnel adapt",price:"15",result:"Des cils naturels prservs et prts pour une nouvelle pose"},{title:"Clusters",description:"La pose de clusters consiste  appliquer des petits bouquets de cils prts  poser sur la base des cils naturels",price:"10",result:"Regard intense et fourni, parfait pour une beaut express"},{title:"Pose de Cils",description:"Coiffage de cils au perming suivi d'une pose complte pour un regard structur et volumineux",price:"35",result:"Des cils naturellement relevs et sublims par des extensions, pour un regard maximal"},{title:"Modle - Entranement",description:"Prestation gratuite pour modle (uniquement sur rendez-vous confirm par l'esthticienne)",price:"Gratuit",result:"Une prestation complte offerte en change de votre temps pour l'entranement",isModelService:!0}],zN=[{id:"cil-a-cil",name:"Cils  Cils",price:"25",duration:240,description:"La pose cil  cil consiste  appliquer une extension sur chaque cil naturel pour un regard naturel, lgant et structur."},{id:"pose-whispy",name:"Pose Whispy",price:"25",duration:240,description:'La pose Whispy, aussi appele effet "foxy eyes" ou "spiky", se caractrise par des pics de longueurs varies.'},{id:"pose-mixte",name:"Pose Mixte",price:"25",duration:240,description:"La pose mixte combine la technique cil  cil et la pose russe pour un rsultat personnalis alliant volume et naturel."},{id:"pose-russe",name:"Pose Russe",price:"25",duration:240,description:"La pose russe en bouquet consiste  appliquer des ventails d'extensions prforms sur chaque cil naturel."},{id:"clusters",name:"Clusters (venir avec la bote)",price:"10",duration:90,description:"La pose de clusters consiste  appliquer des petits bouquets de cils prts  poser."},{id:"depose",name:"Dpose",price:"15",duration:120,description:"La dpose de cils permet de retirer en douceur les extensions sans abmer les cils naturels."},{id:"coiffage-pose",name:"Pose de Cils",price:"35",duration:330,description:"Coiffage de cils au perming suivi d'une pose complte pour un regard structur et volumineux."},{id:"modele-entrainement",name:"Modle - Entranement",price:"0",duration:240,description:"Prestation gratuite pour modle (uniquement sur rendez-vous confirm par l'esthticienne)",isModelService:!0,adminOnly:!0}];function hq(){const[i,e]=ne.useState(!1),t=()=>{e(!i)},n=()=>{e(!1)};return B.jsxs(B.Fragment,{children:[B.jsx("nav",{className:"navbar",children:B.jsxs("div",{className:"navbar-container",children:[B.jsxs("a",{href:"./",className:"navbar-logo",children:[B.jsx("img",{src:uq,alt:"Shiynelly Lashes Logo"}),B.jsx("p",{className:"logo-text",children:"Shiynelly Lashes"})]}),B.jsxs("div",{className:"navbar-links",children:[qm.slice(0,3).map((r,s)=>B.jsx("a",{href:r.path,className:"nav-link",children:r.name},s)),B.jsx("a",{href:qm[3].path,className:"nav-button",children:qm[3].name})]}),B.jsxs("button",{className:`hamburger ${i?"active":""}`,onClick:t,"aria-label":"Toggle menu",children:[B.jsx("span",{className:"hamburger-line"}),B.jsx("span",{className:"hamburger-line"})]})]})}),B.jsx("div",{className:`sidebar-overlay ${i?"active":""}`,onClick:n}),B.jsxs("div",{className:`sidebar-menu ${i?"active":""}`,children:[B.jsxs("div",{className:"sidebar-header",children:[B.jsx("h2",{children:"Menu"}),B.jsx("button",{className:"close-button",onClick:n,children:""})]}),B.jsxs("div",{className:"sidebar-links",children:[qm.slice(0,3).map((r,s)=>B.jsx("a",{href:r.path,className:"sidebar-link",onClick:n,children:r.name},s)),B.jsx("a",{href:qm[3].path,className:"sidebar-button",onClick:n,children:qm[3].name})]})]})]})}var mw={exports:{}},Fu={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FN;function fq(){return FN||(FN=1,Fu.ConcurrentRoot=1,Fu.ContinuousEventPriority=8,Fu.DefaultEventPriority=32,Fu.DiscreteEventPriority=2,Fu.IdleEventPriority=268435456,Fu.LegacyRoot=0,Fu.NoEventPriority=0),Fu}var HN;function dq(){return HN||(HN=1,mw.exports=fq()),mw.exports}var fx=dq();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ST="180",pq={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},mq={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},XU=0,lA=1,KU=2,gq=3,QU=0,bT=1,b_=2,Ul=3,dh=0,Ra=1,Bc=2,ih=0,Sp=1,cA=2,uA=3,hA=4,ZU=5,wf=100,JU=101,$U=102,ek=103,tk=104,nk=200,ik=201,rk=202,sk=203,jx=204,qx=205,ak=206,ok=207,lk=208,ck=209,uk=210,hk=211,fk=212,dk=213,pk=214,Yx=0,Wx=1,Xx=2,Dp=3,Kx=4,Qx=5,Zx=6,Jx=7,x0=0,mk=1,gk=2,eu=0,vk=1,yk=2,_k=3,GC=4,Sk=5,bk=6,xk=7,fA="attached",Ek="detached",xT=300,ph=301,qf=302,G_=303,j_=304,bv=306,q_=1e3,tl=1001,Y_=1002,xs=1003,jC=1004,vq=1004,Tg=1005,yq=1005,Hr=1006,x_=1007,_q=1007,jc=1008,Sq=1008,il=1009,qC=1010,YC=1011,qg=1012,ET=1013,mh=1014,Za=1015,xv=1016,TT=1017,MT=1018,Yg=1020,WC=35902,XC=35899,KC=1021,QC=1022,Js=1023,Wg=1026,Xg=1027,wT=1028,E0=1029,ZC=1030,AT=1031,bq=1032,CT=1033,E_=33776,T_=33777,M_=33778,w_=33779,$x=35840,eE=35841,tE=35842,nE=35843,iE=36196,rE=37492,sE=37496,aE=37808,oE=37809,lE=37810,cE=37811,uE=37812,hE=37813,fE=37814,dE=37815,pE=37816,mE=37817,gE=37818,vE=37819,yE=37820,_E=37821,SE=36492,bE=36494,xE=36495,EE=36283,TE=36284,ME=36285,wE=36286,Tk=2200,Mk=2201,wk=2202,W_=2300,AE=2301,dx=2302,dp=2400,pp=2401,X_=2402,RT=2500,JC=2501,xq=0,Eq=1,Tq=2,Ak=3200,Ck=3201,Mq=3202,wq=3203,Zf=0,Rk=1,Qu="",Qs="srgb",Yf="srgb-linear",K_="linear",vi="srgb",Aq=0,sp=7680,Cq=7681,Rq=7682,Dq=7683,Nq=34055,Iq=34056,Oq=5386,Pq=512,Lq=513,Uq=514,kq=515,Vq=516,Bq=517,zq=518,dA=519,Dk=512,Nk=513,Ik=514,$C=515,Ok=516,Pk=517,Lk=518,Uk=519,Q_=35044,Fq=35048,Hq=35040,Gq=35045,jq=35049,qq=35041,Yq=35046,Wq=35050,Xq=35042,Kq="100",pA="300 es",xo=2e3,Kg=2001,Qq={COMPUTE:"compute",RENDER:"render"},Zq={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},Jq={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};class cu{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const js=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let GN=1234567;const bp=Math.PI/180,Qg=180/Math.PI;function To(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(js[i&255]+js[i>>8&255]+js[i>>16&255]+js[i>>24&255]+"-"+js[e&255]+js[e>>8&255]+"-"+js[e>>16&15|64]+js[e>>24&255]+"-"+js[t&63|128]+js[t>>8&255]+"-"+js[t>>16&255]+js[t>>24&255]+js[n&255]+js[n>>8&255]+js[n>>16&255]+js[n>>24&255]).toLowerCase()}function tn(i,e,t){return Math.max(e,Math.min(t,i))}function eR(i,e){return(i%e+e)%e}function $q(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function eY(i,e,t){return i!==e?(t-i)/(e-i):0}function A_(i,e,t){return(1-t)*i+t*e}function tY(i,e,t,n){return A_(i,e,1-Math.exp(-t*n))}function nY(i,e=1){return e-Math.abs(eR(i,e*2)-e)}function iY(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function rY(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function sY(i,e){return i+Math.floor(Math.random()*(e-i+1))}function aY(i,e){return i+Math.random()*(e-i)}function oY(i){return i*(.5-Math.random())}function lY(i){i!==void 0&&(GN=i);let e=GN+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function cY(i){return i*bp}function uY(i){return i*Qg}function hY(i){return(i&i-1)===0&&i!==0}function fY(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function dY(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function pY(i,e,t,n,r){const s=Math.cos,o=Math.sin,c=s(t/2),h=o(t/2),d=s((e+n)/2),m=o((e+n)/2),g=s((e-n)/2),_=o((e-n)/2),S=s((n-e)/2),M=o((n-e)/2);switch(r){case"XYX":i.set(c*m,h*g,h*_,c*d);break;case"YZY":i.set(h*_,c*m,h*g,c*d);break;case"ZXZ":i.set(h*g,h*_,c*m,c*d);break;case"XZX":i.set(c*m,h*M,h*S,c*d);break;case"YXY":i.set(h*S,c*m,h*M,c*d);break;case"ZYZ":i.set(h*M,h*S,c*m,c*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function wa(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Sn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const mY={DEG2RAD:bp,RAD2DEG:Qg,generateUUID:To,clamp:tn,euclideanModulo:eR,mapLinear:$q,inverseLerp:eY,lerp:A_,damp:tY,pingpong:nY,smoothstep:iY,smootherstep:rY,randInt:sY,randFloat:aY,randFloatSpread:oY,seededRandom:lY,degToRad:cY,radToDeg:uY,isPowerOfTwo:hY,ceilPowerOfTwo:fY,floorPowerOfTwo:dY,setQuaternionFromProperEuler:pY,normalize:Sn,denormalize:wa};class tt{constructor(e=0,t=0){tt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=tn(this.x,e.x,t.x),this.y=tn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=tn(this.x,e,t),this.y=tn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(tn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(tn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ja{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,c){let h=n[r+0],d=n[r+1],m=n[r+2],g=n[r+3];const _=s[o+0],S=s[o+1],M=s[o+2],C=s[o+3];if(c===0){e[t+0]=h,e[t+1]=d,e[t+2]=m,e[t+3]=g;return}if(c===1){e[t+0]=_,e[t+1]=S,e[t+2]=M,e[t+3]=C;return}if(g!==C||h!==_||d!==S||m!==M){let w=1-c;const T=h*_+d*S+m*M+g*C,D=T>=0?1:-1,I=1-T*T;if(I>Number.EPSILON){const j=Math.sqrt(I),Y=Math.atan2(j,T*D);w=Math.sin(w*Y)/j,c=Math.sin(c*Y)/j}const L=c*D;if(h=h*w+_*L,d=d*w+S*L,m=m*w+M*L,g=g*w+C*L,w===1-c){const j=1/Math.sqrt(h*h+d*d+m*m+g*g);h*=j,d*=j,m*=j,g*=j}}e[t]=h,e[t+1]=d,e[t+2]=m,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,r,s,o){const c=n[r],h=n[r+1],d=n[r+2],m=n[r+3],g=s[o],_=s[o+1],S=s[o+2],M=s[o+3];return e[t]=c*M+m*g+h*S-d*_,e[t+1]=h*M+m*_+d*g-c*S,e[t+2]=d*M+m*S+c*_-h*g,e[t+3]=m*M-c*g-h*_-d*S,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,c=Math.cos,h=Math.sin,d=c(n/2),m=c(r/2),g=c(s/2),_=h(n/2),S=h(r/2),M=h(s/2);switch(o){case"XYZ":this._x=_*m*g+d*S*M,this._y=d*S*g-_*m*M,this._z=d*m*M+_*S*g,this._w=d*m*g-_*S*M;break;case"YXZ":this._x=_*m*g+d*S*M,this._y=d*S*g-_*m*M,this._z=d*m*M-_*S*g,this._w=d*m*g+_*S*M;break;case"ZXY":this._x=_*m*g-d*S*M,this._y=d*S*g+_*m*M,this._z=d*m*M+_*S*g,this._w=d*m*g-_*S*M;break;case"ZYX":this._x=_*m*g-d*S*M,this._y=d*S*g+_*m*M,this._z=d*m*M-_*S*g,this._w=d*m*g+_*S*M;break;case"YZX":this._x=_*m*g+d*S*M,this._y=d*S*g+_*m*M,this._z=d*m*M-_*S*g,this._w=d*m*g-_*S*M;break;case"XZY":this._x=_*m*g-d*S*M,this._y=d*S*g-_*m*M,this._z=d*m*M+_*S*g,this._w=d*m*g+_*S*M;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],c=t[5],h=t[9],d=t[2],m=t[6],g=t[10],_=n+c+g;if(_>0){const S=.5/Math.sqrt(_+1);this._w=.25/S,this._x=(m-h)*S,this._y=(s-d)*S,this._z=(o-r)*S}else if(n>c&&n>g){const S=2*Math.sqrt(1+n-c-g);this._w=(m-h)/S,this._x=.25*S,this._y=(r+o)/S,this._z=(s+d)/S}else if(c>g){const S=2*Math.sqrt(1+c-n-g);this._w=(s-d)/S,this._x=(r+o)/S,this._y=.25*S,this._z=(h+m)/S}else{const S=2*Math.sqrt(1+g-n-c);this._w=(o-r)/S,this._x=(s+d)/S,this._y=(h+m)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(tn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,c=t._x,h=t._y,d=t._z,m=t._w;return this._x=n*m+o*c+r*d-s*h,this._y=r*m+o*h+s*c-n*d,this._z=s*m+o*d+n*h-r*c,this._w=o*m-n*c-r*h-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let c=o*e._w+n*e._x+r*e._y+s*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const h=1-c*c;if(h<=Number.EPSILON){const S=1-t;return this._w=S*o+t*this._w,this._x=S*n+t*this._x,this._y=S*r+t*this._y,this._z=S*s+t*this._z,this.normalize(),this}const d=Math.sqrt(h),m=Math.atan2(d,c),g=Math.sin((1-t)*m)/d,_=Math.sin(t*m)/d;return this._w=o*g+this._w*_,this._x=n*g+this._x*_,this._y=r*g+this._y*_,this._z=s*g+this._z*_,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class re{constructor(e=0,t=0,n=0){re.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(jN.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(jN.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,c=e.z,h=e.w,d=2*(o*r-c*n),m=2*(c*t-s*r),g=2*(s*n-o*t);return this.x=t+h*d+o*g-c*m,this.y=n+h*m+c*d-s*g,this.z=r+h*g+s*m-o*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=tn(this.x,e.x,t.x),this.y=tn(this.y,e.y,t.y),this.z=tn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=tn(this.x,e,t),this.y=tn(this.y,e,t),this.z=tn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(tn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,c=t.y,h=t.z;return this.x=r*h-s*c,this.y=s*o-n*h,this.z=n*c-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return gw.copy(this).projectOnVector(e),this.sub(gw)}reflect(e){return this.sub(gw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(tn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gw=new re,jN=new Ja;class yn{constructor(e,t,n,r,s,o,c,h,d){yn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,c,h,d)}set(e,t,n,r,s,o,c,h,d){const m=this.elements;return m[0]=e,m[1]=r,m[2]=c,m[3]=t,m[4]=s,m[5]=h,m[6]=n,m[7]=o,m[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],c=n[3],h=n[6],d=n[1],m=n[4],g=n[7],_=n[2],S=n[5],M=n[8],C=r[0],w=r[3],T=r[6],D=r[1],I=r[4],L=r[7],j=r[2],Y=r[5],k=r[8];return s[0]=o*C+c*D+h*j,s[3]=o*w+c*I+h*Y,s[6]=o*T+c*L+h*k,s[1]=d*C+m*D+g*j,s[4]=d*w+m*I+g*Y,s[7]=d*T+m*L+g*k,s[2]=_*C+S*D+M*j,s[5]=_*w+S*I+M*Y,s[8]=_*T+S*L+M*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],c=e[5],h=e[6],d=e[7],m=e[8];return t*o*m-t*c*d-n*s*m+n*c*h+r*s*d-r*o*h}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],c=e[5],h=e[6],d=e[7],m=e[8],g=m*o-c*d,_=c*h-m*s,S=d*s-o*h,M=t*g+n*_+r*S;if(M===0)return this.set(0,0,0,0,0,0,0,0,0);const C=1/M;return e[0]=g*C,e[1]=(r*d-m*n)*C,e[2]=(c*n-r*o)*C,e[3]=_*C,e[4]=(m*t-r*h)*C,e[5]=(r*s-c*t)*C,e[6]=S*C,e[7]=(n*h-d*t)*C,e[8]=(o*t-n*s)*C,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,c){const h=Math.cos(s),d=Math.sin(s);return this.set(n*h,n*d,-n*(h*o+d*c)+o+e,-r*d,r*h,-r*(-d*o+h*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(vw.makeScale(e,t)),this}rotate(e){return this.premultiply(vw.makeRotation(-e)),this}translate(e,t){return this.premultiply(vw.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const vw=new yn;function kk(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const gY={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Mg(i,e){return new gY[i](e)}function Z_(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function Vk(){const i=Z_("canvas");return i.style.display="block",i}const qN={};function J_(i){i in qN||(qN[i]=!0,console.warn(i))}function vY(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}const YN=new yn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),WN=new yn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function yY(){const i={enabled:!0,workingColorSpace:Yf,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===vi&&(r.r=rh(r.r),r.g=rh(r.g),r.b=rh(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===vi&&(r.r=Pg(r.r),r.g=Pg(r.g),r.b=Pg(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Qu?K_:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return J_("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return J_("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Yf]:{primaries:e,whitePoint:n,transfer:K_,toXYZ:YN,fromXYZ:WN,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Qs},outputColorSpaceConfig:{drawingBufferColorSpace:Qs}},[Qs]:{primaries:e,whitePoint:n,transfer:vi,toXYZ:YN,fromXYZ:WN,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Qs}}}),i}const Kn=yY();function rh(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Pg(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Ym;class Bk{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Ym===void 0&&(Ym=Z_("canvas")),Ym.width=e.width,Ym.height=e.height;const r=Ym.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Ym}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Z_("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=rh(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(rh(t[n]/255)*255):t[n]=rh(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let _Y=0;class Rf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_Y++}),this.uuid=To(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,c=r.length;o<c;o++)r[o].isDataTexture?s.push(yw(r[o].image)):s.push(yw(r[o]))}else s=yw(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function yw(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?Bk.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let SY=0;const _w=new re;class ur extends cu{constructor(e=ur.DEFAULT_IMAGE,t=ur.DEFAULT_MAPPING,n=tl,r=tl,s=Hr,o=jc,c=Js,h=il,d=ur.DEFAULT_ANISOTROPY,m=Qu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:SY++}),this.uuid=To(),this.name="",this.source=new Rf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=h,this.offset=new tt(0,0),this.repeat=new tt(1,1),this.center=new tt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(_w).x}get height(){return this.source.getSize(_w).y}get depth(){return this.source.getSize(_w).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}r&&n&&r.isVector2&&n.isVector2||r&&n&&r.isVector3&&n.isVector3||r&&n&&r.isMatrix3&&n.isMatrix3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==xT)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case q_:e.x=e.x-Math.floor(e.x);break;case tl:e.x=e.x<0?0:1;break;case Y_:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case q_:e.y=e.y-Math.floor(e.y);break;case tl:e.y=e.y<0?0:1;break;case Y_:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ur.DEFAULT_IMAGE=null;ur.DEFAULT_MAPPING=xT;ur.DEFAULT_ANISOTROPY=1;class ei{constructor(e=0,t=0,n=0,r=1){ei.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const h=e.elements,d=h[0],m=h[4],g=h[8],_=h[1],S=h[5],M=h[9],C=h[2],w=h[6],T=h[10];if(Math.abs(m-_)<.01&&Math.abs(g-C)<.01&&Math.abs(M-w)<.01){if(Math.abs(m+_)<.1&&Math.abs(g+C)<.1&&Math.abs(M+w)<.1&&Math.abs(d+S+T-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const I=(d+1)/2,L=(S+1)/2,j=(T+1)/2,Y=(m+_)/4,k=(g+C)/4,V=(M+w)/4;return I>L&&I>j?I<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(I),r=Y/n,s=k/n):L>j?L<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(L),n=Y/r,s=V/r):j<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(j),n=k/s,r=V/s),this.set(n,r,s,t),this}let D=Math.sqrt((w-M)*(w-M)+(g-C)*(g-C)+(_-m)*(_-m));return Math.abs(D)<.001&&(D=1),this.x=(w-M)/D,this.y=(g-C)/D,this.z=(_-m)/D,this.w=Math.acos((d+S+T-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=tn(this.x,e.x,t.x),this.y=tn(this.y,e.y,t.y),this.z=tn(this.z,e.z,t.z),this.w=tn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=tn(this.x,e,t),this.y=tn(this.y,e,t),this.z=tn(this.z,e,t),this.w=tn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(tn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class tR extends cu{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Hr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new ei(0,0,e,t),this.scissorTest=!1,this.viewport=new ei(0,0,e,t);const r={width:e,height:t,depth:n.depth},s=new ur(r);this.textures=[];const o=n.count;for(let c=0;c<o;c++)this.textures[c]=s.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:Hr,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Rf(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class au extends tR{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class DT extends ur{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=xs,this.minFilter=xs,this.wrapR=tl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class bY extends au{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new DT(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class NT extends ur{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=xs,this.minFilter=xs,this.wrapR=tl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xY extends au{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new NT(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class $s{constructor(e=new re(1/0,1/0,1/0),t=new re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Ol.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Ol.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ol.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,c=s.count;o<c;o++)e.isMesh===!0?e.getVertexPosition(o,Ol):Ol.fromBufferAttribute(s,o),Ol.applyMatrix4(e.matrixWorld),this.expandByPoint(Ol);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ZS.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),ZS.copy(n.boundingBox)),ZS.applyMatrix4(e.matrixWorld),this.union(ZS)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ol),Ol.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Hy),JS.subVectors(this.max,Hy),Wm.subVectors(e.a,Hy),Xm.subVectors(e.b,Hy),Km.subVectors(e.c,Hy),df.subVectors(Xm,Wm),pf.subVectors(Km,Xm),Gd.subVectors(Wm,Km);let t=[0,-df.z,df.y,0,-pf.z,pf.y,0,-Gd.z,Gd.y,df.z,0,-df.x,pf.z,0,-pf.x,Gd.z,0,-Gd.x,-df.y,df.x,0,-pf.y,pf.x,0,-Gd.y,Gd.x,0];return!Sw(t,Wm,Xm,Km,JS)||(t=[1,0,0,0,1,0,0,0,1],!Sw(t,Wm,Xm,Km,JS))?!1:($S.crossVectors(df,pf),t=[$S.x,$S.y,$S.z],Sw(t,Wm,Xm,Km,JS))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ol).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ol).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Hu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Hu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Hu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Hu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Hu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Hu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Hu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Hu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Hu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Hu=[new re,new re,new re,new re,new re,new re,new re,new re],Ol=new re,ZS=new $s,Wm=new re,Xm=new re,Km=new re,df=new re,pf=new re,Gd=new re,Hy=new re,JS=new re,$S=new re,jd=new re;function Sw(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){jd.fromArray(i,s);const c=r.x*Math.abs(jd.x)+r.y*Math.abs(jd.y)+r.z*Math.abs(jd.z),h=e.dot(jd),d=t.dot(jd),m=n.dot(jd);if(Math.max(-Math.max(h,d,m),Math.min(h,d,m))>c)return!1}return!0}const EY=new $s,Gy=new re,bw=new re;class Es{constructor(e=new re,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):EY.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Gy.subVectors(e,this.center);const t=Gy.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(Gy,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(bw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Gy.copy(e.center).add(bw)),this.expandByPoint(Gy.copy(e.center).sub(bw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Gu=new re,xw=new re,eb=new re,mf=new re,Ew=new re,tb=new re,Tw=new re;class Ev{constructor(e=new re,t=new re(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Gu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Gu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Gu.copy(this.origin).addScaledVector(this.direction,t),Gu.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){xw.copy(e).add(t).multiplyScalar(.5),eb.copy(t).sub(e).normalize(),mf.copy(this.origin).sub(xw);const s=e.distanceTo(t)*.5,o=-this.direction.dot(eb),c=mf.dot(this.direction),h=-mf.dot(eb),d=mf.lengthSq(),m=Math.abs(1-o*o);let g,_,S,M;if(m>0)if(g=o*h-c,_=o*c-h,M=s*m,g>=0)if(_>=-M)if(_<=M){const C=1/m;g*=C,_*=C,S=g*(g+o*_+2*c)+_*(o*g+_+2*h)+d}else _=s,g=Math.max(0,-(o*_+c)),S=-g*g+_*(_+2*h)+d;else _=-s,g=Math.max(0,-(o*_+c)),S=-g*g+_*(_+2*h)+d;else _<=-M?(g=Math.max(0,-(-o*s+c)),_=g>0?-s:Math.min(Math.max(-s,-h),s),S=-g*g+_*(_+2*h)+d):_<=M?(g=0,_=Math.min(Math.max(-s,-h),s),S=_*(_+2*h)+d):(g=Math.max(0,-(o*s+c)),_=g>0?s:Math.min(Math.max(-s,-h),s),S=-g*g+_*(_+2*h)+d);else _=o>0?-s:s,g=Math.max(0,-(o*_+c)),S=-g*g+_*(_+2*h)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(xw).addScaledVector(eb,_),S}intersectSphere(e,t){Gu.subVectors(e.center,this.origin);const n=Gu.dot(this.direction),r=Gu.dot(Gu)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),c=n-o,h=n+o;return h<0?null:c<0?this.at(h,t):this.at(c,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,c,h;const d=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,_=this.origin;return d>=0?(n=(e.min.x-_.x)*d,r=(e.max.x-_.x)*d):(n=(e.max.x-_.x)*d,r=(e.min.x-_.x)*d),m>=0?(s=(e.min.y-_.y)*m,o=(e.max.y-_.y)*m):(s=(e.max.y-_.y)*m,o=(e.min.y-_.y)*m),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),g>=0?(c=(e.min.z-_.z)*g,h=(e.max.z-_.z)*g):(c=(e.max.z-_.z)*g,h=(e.min.z-_.z)*g),n>h||c>r)||((c>n||n!==n)&&(n=c),(h<r||r!==r)&&(r=h),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Gu)!==null}intersectTriangle(e,t,n,r,s){Ew.subVectors(t,e),tb.subVectors(n,e),Tw.crossVectors(Ew,tb);let o=this.direction.dot(Tw),c;if(o>0){if(r)return null;c=1}else if(o<0)c=-1,o=-o;else return null;mf.subVectors(this.origin,e);const h=c*this.direction.dot(tb.crossVectors(mf,tb));if(h<0)return null;const d=c*this.direction.dot(Ew.cross(mf));if(d<0||h+d>o)return null;const m=-c*mf.dot(Tw);return m<0?null:this.at(m/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class sn{constructor(e,t,n,r,s,o,c,h,d,m,g,_,S,M,C,w){sn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,c,h,d,m,g,_,S,M,C,w)}set(e,t,n,r,s,o,c,h,d,m,g,_,S,M,C,w){const T=this.elements;return T[0]=e,T[4]=t,T[8]=n,T[12]=r,T[1]=s,T[5]=o,T[9]=c,T[13]=h,T[2]=d,T[6]=m,T[10]=g,T[14]=_,T[3]=S,T[7]=M,T[11]=C,T[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new sn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Qm.setFromMatrixColumn(e,0).length(),s=1/Qm.setFromMatrixColumn(e,1).length(),o=1/Qm.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),c=Math.sin(n),h=Math.cos(r),d=Math.sin(r),m=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const _=o*m,S=o*g,M=c*m,C=c*g;t[0]=h*m,t[4]=-h*g,t[8]=d,t[1]=S+M*d,t[5]=_-C*d,t[9]=-c*h,t[2]=C-_*d,t[6]=M+S*d,t[10]=o*h}else if(e.order==="YXZ"){const _=h*m,S=h*g,M=d*m,C=d*g;t[0]=_+C*c,t[4]=M*c-S,t[8]=o*d,t[1]=o*g,t[5]=o*m,t[9]=-c,t[2]=S*c-M,t[6]=C+_*c,t[10]=o*h}else if(e.order==="ZXY"){const _=h*m,S=h*g,M=d*m,C=d*g;t[0]=_-C*c,t[4]=-o*g,t[8]=M+S*c,t[1]=S+M*c,t[5]=o*m,t[9]=C-_*c,t[2]=-o*d,t[6]=c,t[10]=o*h}else if(e.order==="ZYX"){const _=o*m,S=o*g,M=c*m,C=c*g;t[0]=h*m,t[4]=M*d-S,t[8]=_*d+C,t[1]=h*g,t[5]=C*d+_,t[9]=S*d-M,t[2]=-d,t[6]=c*h,t[10]=o*h}else if(e.order==="YZX"){const _=o*h,S=o*d,M=c*h,C=c*d;t[0]=h*m,t[4]=C-_*g,t[8]=M*g+S,t[1]=g,t[5]=o*m,t[9]=-c*m,t[2]=-d*m,t[6]=S*g+M,t[10]=_-C*g}else if(e.order==="XZY"){const _=o*h,S=o*d,M=c*h,C=c*d;t[0]=h*m,t[4]=-g,t[8]=d*m,t[1]=_*g+C,t[5]=o*m,t[9]=S*g-M,t[2]=M*g-S,t[6]=c*m,t[10]=C*g+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(TY,e,MY)}lookAt(e,t,n){const r=this.elements;return yo.subVectors(e,t),yo.lengthSq()===0&&(yo.z=1),yo.normalize(),gf.crossVectors(n,yo),gf.lengthSq()===0&&(Math.abs(n.z)===1?yo.x+=1e-4:yo.z+=1e-4,yo.normalize(),gf.crossVectors(n,yo)),gf.normalize(),nb.crossVectors(yo,gf),r[0]=gf.x,r[4]=nb.x,r[8]=yo.x,r[1]=gf.y,r[5]=nb.y,r[9]=yo.y,r[2]=gf.z,r[6]=nb.z,r[10]=yo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],c=n[4],h=n[8],d=n[12],m=n[1],g=n[5],_=n[9],S=n[13],M=n[2],C=n[6],w=n[10],T=n[14],D=n[3],I=n[7],L=n[11],j=n[15],Y=r[0],k=r[4],V=r[8],N=r[12],O=r[1],z=r[5],W=r[9],q=r[13],he=r[2],fe=r[6],H=r[10],K=r[14],J=r[3],oe=r[7],se=r[11],Z=r[15];return s[0]=o*Y+c*O+h*he+d*J,s[4]=o*k+c*z+h*fe+d*oe,s[8]=o*V+c*W+h*H+d*se,s[12]=o*N+c*q+h*K+d*Z,s[1]=m*Y+g*O+_*he+S*J,s[5]=m*k+g*z+_*fe+S*oe,s[9]=m*V+g*W+_*H+S*se,s[13]=m*N+g*q+_*K+S*Z,s[2]=M*Y+C*O+w*he+T*J,s[6]=M*k+C*z+w*fe+T*oe,s[10]=M*V+C*W+w*H+T*se,s[14]=M*N+C*q+w*K+T*Z,s[3]=D*Y+I*O+L*he+j*J,s[7]=D*k+I*z+L*fe+j*oe,s[11]=D*V+I*W+L*H+j*se,s[15]=D*N+I*q+L*K+j*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],c=e[5],h=e[9],d=e[13],m=e[2],g=e[6],_=e[10],S=e[14],M=e[3],C=e[7],w=e[11],T=e[15];return M*(+s*h*g-r*d*g-s*c*_+n*d*_+r*c*S-n*h*S)+C*(+t*h*S-t*d*_+s*o*_-r*o*S+r*d*m-s*h*m)+w*(+t*d*g-t*c*S-s*o*g+n*o*S+s*c*m-n*d*m)+T*(-r*c*m-t*h*g+t*c*_+r*o*g-n*o*_+n*h*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],c=e[5],h=e[6],d=e[7],m=e[8],g=e[9],_=e[10],S=e[11],M=e[12],C=e[13],w=e[14],T=e[15],D=g*w*d-C*_*d+C*h*S-c*w*S-g*h*T+c*_*T,I=M*_*d-m*w*d-M*h*S+o*w*S+m*h*T-o*_*T,L=m*C*d-M*g*d+M*c*S-o*C*S-m*c*T+o*g*T,j=M*g*h-m*C*h-M*c*_+o*C*_+m*c*w-o*g*w,Y=t*D+n*I+r*L+s*j;if(Y===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/Y;return e[0]=D*k,e[1]=(C*_*s-g*w*s-C*r*S+n*w*S+g*r*T-n*_*T)*k,e[2]=(c*w*s-C*h*s+C*r*d-n*w*d-c*r*T+n*h*T)*k,e[3]=(g*h*s-c*_*s-g*r*d+n*_*d+c*r*S-n*h*S)*k,e[4]=I*k,e[5]=(m*w*s-M*_*s+M*r*S-t*w*S-m*r*T+t*_*T)*k,e[6]=(M*h*s-o*w*s-M*r*d+t*w*d+o*r*T-t*h*T)*k,e[7]=(o*_*s-m*h*s+m*r*d-t*_*d-o*r*S+t*h*S)*k,e[8]=L*k,e[9]=(M*g*s-m*C*s-M*n*S+t*C*S+m*n*T-t*g*T)*k,e[10]=(o*C*s-M*c*s+M*n*d-t*C*d-o*n*T+t*c*T)*k,e[11]=(m*c*s-o*g*s-m*n*d+t*g*d+o*n*S-t*c*S)*k,e[12]=j*k,e[13]=(m*C*r-M*g*r+M*n*_-t*C*_-m*n*w+t*g*w)*k,e[14]=(M*c*r-o*C*r-M*n*h+t*C*h+o*n*w-t*c*w)*k,e[15]=(o*g*r-m*c*r+m*n*h-t*g*h-o*n*_+t*c*_)*k,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,c=e.y,h=e.z,d=s*o,m=s*c;return this.set(d*o+n,d*c-r*h,d*h+r*c,0,d*c+r*h,m*c+n,m*h-r*o,0,d*h-r*c,m*h+r*o,s*h*h+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,c=t._z,h=t._w,d=s+s,m=o+o,g=c+c,_=s*d,S=s*m,M=s*g,C=o*m,w=o*g,T=c*g,D=h*d,I=h*m,L=h*g,j=n.x,Y=n.y,k=n.z;return r[0]=(1-(C+T))*j,r[1]=(S+L)*j,r[2]=(M-I)*j,r[3]=0,r[4]=(S-L)*Y,r[5]=(1-(_+T))*Y,r[6]=(w+D)*Y,r[7]=0,r[8]=(M+I)*k,r[9]=(w-D)*k,r[10]=(1-(_+C))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=Qm.set(r[0],r[1],r[2]).length();const o=Qm.set(r[4],r[5],r[6]).length(),c=Qm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Pl.copy(this);const d=1/s,m=1/o,g=1/c;return Pl.elements[0]*=d,Pl.elements[1]*=d,Pl.elements[2]*=d,Pl.elements[4]*=m,Pl.elements[5]*=m,Pl.elements[6]*=m,Pl.elements[8]*=g,Pl.elements[9]*=g,Pl.elements[10]*=g,t.setFromRotationMatrix(Pl),n.x=s,n.y=o,n.z=c,this}makePerspective(e,t,n,r,s,o,c=xo,h=!1){const d=this.elements,m=2*s/(t-e),g=2*s/(n-r),_=(t+e)/(t-e),S=(n+r)/(n-r);let M,C;if(h)M=s/(o-s),C=o*s/(o-s);else if(c===xo)M=-(o+s)/(o-s),C=-2*o*s/(o-s);else if(c===Kg)M=-o/(o-s),C=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return d[0]=m,d[4]=0,d[8]=_,d[12]=0,d[1]=0,d[5]=g,d[9]=S,d[13]=0,d[2]=0,d[6]=0,d[10]=M,d[14]=C,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(e,t,n,r,s,o,c=xo,h=!1){const d=this.elements,m=2/(t-e),g=2/(n-r),_=-(t+e)/(t-e),S=-(n+r)/(n-r);let M,C;if(h)M=1/(o-s),C=o/(o-s);else if(c===xo)M=-2/(o-s),C=-(o+s)/(o-s);else if(c===Kg)M=-1/(o-s),C=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return d[0]=m,d[4]=0,d[8]=0,d[12]=_,d[1]=0,d[5]=g,d[9]=0,d[13]=S,d[2]=0,d[6]=0,d[10]=M,d[14]=C,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Qm=new re,Pl=new sn,TY=new re(0,0,0),MY=new re(1,1,1),gf=new re,nb=new re,yo=new re,XN=new sn,KN=new Ja;class wo{constructor(e=0,t=0,n=0,r=wo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],c=r[8],h=r[1],d=r[5],m=r[9],g=r[2],_=r[6],S=r[10];switch(t){case"XYZ":this._y=Math.asin(tn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,S),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(_,d),this._z=0);break;case"YXZ":this._x=Math.asin(-tn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(c,S),this._z=Math.atan2(h,d)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(tn(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-g,S),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(h,s));break;case"ZYX":this._y=Math.asin(-tn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(_,S),this._z=Math.atan2(h,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(tn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-m,d),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(c,S));break;case"XZY":this._z=Math.asin(-tn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(_,d),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-m,S),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return XN.makeRotationFromQuaternion(e),this.setFromRotationMatrix(XN,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return KN.setFromEuler(this),this.setFromQuaternion(KN,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}wo.DEFAULT_ORDER="XYZ";class Zg{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let wY=0;const QN=new re,Zm=new Ja,ju=new sn,ib=new re,jy=new re,AY=new re,CY=new Ja,ZN=new re(1,0,0),JN=new re(0,1,0),$N=new re(0,0,1),eI={type:"added"},RY={type:"removed"},Jm={type:"childadded",child:null},Mw={type:"childremoved",child:null};class ni extends cu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:wY++}),this.uuid=To(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ni.DEFAULT_UP.clone();const e=new re,t=new wo,n=new Ja,r=new re(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new sn},normalMatrix:{value:new yn}}),this.matrix=new sn,this.matrixWorld=new sn,this.matrixAutoUpdate=ni.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Zg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Zm.setFromAxisAngle(e,t),this.quaternion.multiply(Zm),this}rotateOnWorldAxis(e,t){return Zm.setFromAxisAngle(e,t),this.quaternion.premultiply(Zm),this}rotateX(e){return this.rotateOnAxis(ZN,e)}rotateY(e){return this.rotateOnAxis(JN,e)}rotateZ(e){return this.rotateOnAxis($N,e)}translateOnAxis(e,t){return QN.copy(e).applyQuaternion(this.quaternion),this.position.add(QN.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ZN,e)}translateY(e){return this.translateOnAxis(JN,e)}translateZ(e){return this.translateOnAxis($N,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ju.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ib.copy(e):ib.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),jy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ju.lookAt(jy,ib,this.up):ju.lookAt(ib,jy,this.up),this.quaternion.setFromRotationMatrix(ju),r&&(ju.extractRotation(r.matrixWorld),Zm.setFromRotationMatrix(ju),this.quaternion.premultiply(Zm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(eI),Jm.child=e,this.dispatchEvent(Jm),Jm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(RY),Mw.child=e,this.dispatchEvent(Mw),Mw.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ju.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ju.multiply(e.parent.matrixWorld)),e.applyMatrix4(ju),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(eI),Jm.child=e,this.dispatchEvent(Jm),Jm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(jy,e,AY),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(jy,CY,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(c=>({...c,boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(c=>({...c})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function s(c,h){return c[h.uuid]===void 0&&(c[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const h=c.shapes;if(Array.isArray(h))for(let d=0,m=h.length;d<m;d++){const g=h[d];s(e.shapes,g)}else s(e.shapes,h)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let h=0,d=this.material.length;h<d;h++)c.push(s(e.materials,this.material[h]));r.material=c}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let c=0;c<this.children.length;c++)r.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let c=0;c<this.animations.length;c++){const h=this.animations[c];r.animations.push(s(e.animations,h))}}if(t){const c=o(e.geometries),h=o(e.materials),d=o(e.textures),m=o(e.images),g=o(e.shapes),_=o(e.skeletons),S=o(e.animations),M=o(e.nodes);c.length>0&&(n.geometries=c),h.length>0&&(n.materials=h),d.length>0&&(n.textures=d),m.length>0&&(n.images=m),g.length>0&&(n.shapes=g),_.length>0&&(n.skeletons=_),S.length>0&&(n.animations=S),M.length>0&&(n.nodes=M)}return n.object=r,n;function o(c){const h=[];for(const d in c){const m=c[d];delete m.metadata,h.push(m)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}ni.DEFAULT_UP=new re(0,1,0);ni.DEFAULT_MATRIX_AUTO_UPDATE=!0;ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ll=new re,qu=new re,ww=new re,Yu=new re,$m=new re,eg=new re,tI=new re,Aw=new re,Cw=new re,Rw=new re,Dw=new ei,Nw=new ei,Iw=new ei;class Ka{constructor(e=new re,t=new re,n=new re){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Ll.subVectors(e,t),r.cross(Ll);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){Ll.subVectors(r,t),qu.subVectors(n,t),ww.subVectors(e,t);const o=Ll.dot(Ll),c=Ll.dot(qu),h=Ll.dot(ww),d=qu.dot(qu),m=qu.dot(ww),g=o*d-c*c;if(g===0)return s.set(0,0,0),null;const _=1/g,S=(d*h-c*m)*_,M=(o*m-c*h)*_;return s.set(1-S-M,M,S)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Yu)===null?!1:Yu.x>=0&&Yu.y>=0&&Yu.x+Yu.y<=1}static getInterpolation(e,t,n,r,s,o,c,h){return this.getBarycoord(e,t,n,r,Yu)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(s,Yu.x),h.addScaledVector(o,Yu.y),h.addScaledVector(c,Yu.z),h)}static getInterpolatedAttribute(e,t,n,r,s,o){return Dw.setScalar(0),Nw.setScalar(0),Iw.setScalar(0),Dw.fromBufferAttribute(e,t),Nw.fromBufferAttribute(e,n),Iw.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(Dw,s.x),o.addScaledVector(Nw,s.y),o.addScaledVector(Iw,s.z),o}static isFrontFacing(e,t,n,r){return Ll.subVectors(n,t),qu.subVectors(e,t),Ll.cross(qu).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ll.subVectors(this.c,this.b),qu.subVectors(this.a,this.b),Ll.cross(qu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ka.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ka.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return Ka.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Ka.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ka.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,c;$m.subVectors(r,n),eg.subVectors(s,n),Aw.subVectors(e,n);const h=$m.dot(Aw),d=eg.dot(Aw);if(h<=0&&d<=0)return t.copy(n);Cw.subVectors(e,r);const m=$m.dot(Cw),g=eg.dot(Cw);if(m>=0&&g<=m)return t.copy(r);const _=h*g-m*d;if(_<=0&&h>=0&&m<=0)return o=h/(h-m),t.copy(n).addScaledVector($m,o);Rw.subVectors(e,s);const S=$m.dot(Rw),M=eg.dot(Rw);if(M>=0&&S<=M)return t.copy(s);const C=S*d-h*M;if(C<=0&&d>=0&&M<=0)return c=d/(d-M),t.copy(n).addScaledVector(eg,c);const w=m*M-S*g;if(w<=0&&g-m>=0&&S-M>=0)return tI.subVectors(s,r),c=(g-m)/(g-m+(S-M)),t.copy(r).addScaledVector(tI,c);const T=1/(w+C+_);return o=C*T,c=_*T,t.copy(n).addScaledVector($m,o).addScaledVector(eg,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const zk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vf={h:0,s:0,l:0},rb={h:0,s:0,l:0};function Ow(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class At{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Qs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Kn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,r=Kn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Kn.colorSpaceToWorking(this,r),this}setHSL(e,t,n,r=Kn.workingColorSpace){if(e=eR(e,1),t=tn(t,0,1),n=tn(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=Ow(o,s,e+1/3),this.g=Ow(o,s,e),this.b=Ow(o,s,e-1/3)}return Kn.colorSpaceToWorking(this,r),this}setStyle(e,t=Qs){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],c=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Qs){const n=zk[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=rh(e.r),this.g=rh(e.g),this.b=rh(e.b),this}copyLinearToSRGB(e){return this.r=Pg(e.r),this.g=Pg(e.g),this.b=Pg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Qs){return Kn.workingToColorSpace(qs.copy(this),e),Math.round(tn(qs.r*255,0,255))*65536+Math.round(tn(qs.g*255,0,255))*256+Math.round(tn(qs.b*255,0,255))}getHexString(e=Qs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Kn.workingColorSpace){Kn.workingToColorSpace(qs.copy(this),t);const n=qs.r,r=qs.g,s=qs.b,o=Math.max(n,r,s),c=Math.min(n,r,s);let h,d;const m=(c+o)/2;if(c===o)h=0,d=0;else{const g=o-c;switch(d=m<=.5?g/(o+c):g/(2-o-c),o){case n:h=(r-s)/g+(r<s?6:0);break;case r:h=(s-n)/g+2;break;case s:h=(n-r)/g+4;break}h/=6}return e.h=h,e.s=d,e.l=m,e}getRGB(e,t=Kn.workingColorSpace){return Kn.workingToColorSpace(qs.copy(this),t),e.r=qs.r,e.g=qs.g,e.b=qs.b,e}getStyle(e=Qs){Kn.workingToColorSpace(qs.copy(this),e);const t=qs.r,n=qs.g,r=qs.b;return e!==Qs?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(vf),this.setHSL(vf.h+e,vf.s+t,vf.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(vf),e.getHSL(rb);const n=A_(vf.h,rb.h,t),r=A_(vf.s,rb.s,t),s=A_(vf.l,rb.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const qs=new At;At.NAMES=zk;let DY=0;class ta extends cu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:DY++}),this.uuid=To(),this.name="",this.type="Material",this.blending=Sp,this.side=dh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=jx,this.blendDst=qx,this.blendEquation=wf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new At(0,0,0),this.blendAlpha=0,this.depthFunc=Dp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=dA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=sp,this.stencilZFail=sp,this.stencilZPass=sp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Sp&&(n.blending=this.blending),this.side!==dh&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==jx&&(n.blendSrc=this.blendSrc),this.blendDst!==qx&&(n.blendDst=this.blendDst),this.blendEquation!==wf&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Dp&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==dA&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==sp&&(n.stencilFail=this.stencilFail),this.stencilZFail!==sp&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==sp&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const c in s){const h=s[c];delete h.metadata,o.push(h)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Jf extends ta{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new At(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new wo,this.combine=x0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Zu=NY();function NY(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let h=0;h<256;++h){const d=h-127;d<-27?(n[h]=0,n[h|256]=32768,r[h]=24,r[h|256]=24):d<-14?(n[h]=1024>>-d-14,n[h|256]=1024>>-d-14|32768,r[h]=-d-1,r[h|256]=-d-1):d<=15?(n[h]=d+15<<10,n[h|256]=d+15<<10|32768,r[h]=13,r[h|256]=13):d<128?(n[h]=31744,n[h|256]=64512,r[h]=24,r[h|256]=24):(n[h]=31744,n[h|256]=64512,r[h]=13,r[h|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),c=new Uint32Array(64);for(let h=1;h<1024;++h){let d=h<<13,m=0;for(;(d&8388608)===0;)d<<=1,m-=8388608;d&=-8388609,m+=947912704,s[h]=d|m}for(let h=1024;h<2048;++h)s[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)o[h]=h<<23;o[31]=1199570944,o[32]=2147483648;for(let h=33;h<63;++h)o[h]=2147483648+(h-32<<23);o[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(c[h]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:c}}function ja(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=tn(i,-65504,65504),Zu.floatView[0]=i;const e=Zu.uint32View[0],t=e>>23&511;return Zu.baseTable[t]+((e&8388607)>>Zu.shiftTable[t])}function l_(i){const e=i>>10;return Zu.uint32View[0]=Zu.mantissaTable[Zu.offsetTable[e]+(i&1023)]+Zu.exponentTable[e],Zu.floatView[0]}class IY{static toHalfFloat(e){return ja(e)}static fromHalfFloat(e){return l_(e)}}const Rr=new re,sb=new tt;let OY=0;class Mi{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:OY++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Q_,this.updateRanges=[],this.gpuType=Za,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)sb.fromBufferAttribute(this,t),sb.applyMatrix3(e),this.setXY(t,sb.x,sb.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Rr.fromBufferAttribute(this,t),Rr.applyMatrix3(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Rr.fromBufferAttribute(this,t),Rr.applyMatrix4(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Rr.fromBufferAttribute(this,t),Rr.applyNormalMatrix(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Rr.fromBufferAttribute(this,t),Rr.transformDirection(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=wa(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Sn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=wa(t,this.array)),t}setX(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=wa(t,this.array)),t}setY(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=wa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=wa(t,this.array)),t}setW(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array),r=Sn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array),r=Sn(r,this.array),s=Sn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Q_&&(e.usage=this.usage),e}}class PY extends Mi{constructor(e,t,n){super(new Int8Array(e),t,n)}}class LY extends Mi{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class UY extends Mi{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class kY extends Mi{constructor(e,t,n){super(new Int16Array(e),t,n)}}class nR extends Mi{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class VY extends Mi{constructor(e,t,n){super(new Int32Array(e),t,n)}}class iR extends Mi{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class BY extends Mi{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=l_(this.array[e*this.itemSize]);return this.normalized&&(t=wa(t,this.array)),t}setX(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize]=ja(t),this}getY(e){let t=l_(this.array[e*this.itemSize+1]);return this.normalized&&(t=wa(t,this.array)),t}setY(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+1]=ja(t),this}getZ(e){let t=l_(this.array[e*this.itemSize+2]);return this.normalized&&(t=wa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+2]=ja(t),this}getW(e){let t=l_(this.array[e*this.itemSize+3]);return this.normalized&&(t=wa(t,this.array)),t}setW(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+3]=ja(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array)),this.array[e+0]=ja(t),this.array[e+1]=ja(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array),r=Sn(r,this.array)),this.array[e+0]=ja(t),this.array[e+1]=ja(n),this.array[e+2]=ja(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array),r=Sn(r,this.array),s=Sn(s,this.array)),this.array[e+0]=ja(t),this.array[e+1]=ja(n),this.array[e+2]=ja(r),this.array[e+3]=ja(s),this}}class Lt extends Mi{constructor(e,t,n){super(new Float32Array(e),t,n)}}let zY=0;const Zo=new sn,Pw=new ni,tg=new re,_o=new $s,qy=new $s,ns=new re;class bn extends cu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:zY++}),this.uuid=To(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(kk(e)?iR:nR)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new yn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Zo.makeRotationFromQuaternion(e),this.applyMatrix4(Zo),this}rotateX(e){return Zo.makeRotationX(e),this.applyMatrix4(Zo),this}rotateY(e){return Zo.makeRotationY(e),this.applyMatrix4(Zo),this}rotateZ(e){return Zo.makeRotationZ(e),this.applyMatrix4(Zo),this}translate(e,t,n){return Zo.makeTranslation(e,t,n),this.applyMatrix4(Zo),this}scale(e,t,n){return Zo.makeScale(e,t,n),this.applyMatrix4(Zo),this}lookAt(e){return Pw.lookAt(e),Pw.updateMatrix(),this.applyMatrix4(Pw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tg).negate(),this.translate(tg.x,tg.y,tg.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Lt(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $s);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new re(-1/0,-1/0,-1/0),new re(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];_o.setFromBufferAttribute(s),this.morphTargetsRelative?(ns.addVectors(this.boundingBox.min,_o.min),this.boundingBox.expandByPoint(ns),ns.addVectors(this.boundingBox.max,_o.max),this.boundingBox.expandByPoint(ns)):(this.boundingBox.expandByPoint(_o.min),this.boundingBox.expandByPoint(_o.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Es);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new re,1/0);return}if(e){const n=this.boundingSphere.center;if(_o.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const c=t[s];qy.setFromBufferAttribute(c),this.morphTargetsRelative?(ns.addVectors(_o.min,qy.min),_o.expandByPoint(ns),ns.addVectors(_o.max,qy.max),_o.expandByPoint(ns)):(_o.expandByPoint(qy.min),_o.expandByPoint(qy.max))}_o.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)ns.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(ns));if(t)for(let s=0,o=t.length;s<o;s++){const c=t[s],h=this.morphTargetsRelative;for(let d=0,m=c.count;d<m;d++)ns.fromBufferAttribute(c,d),h&&(tg.fromBufferAttribute(e,d),ns.add(tg)),r=Math.max(r,n.distanceToSquared(ns))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Mi(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),c=[],h=[];for(let V=0;V<n.count;V++)c[V]=new re,h[V]=new re;const d=new re,m=new re,g=new re,_=new tt,S=new tt,M=new tt,C=new re,w=new re;function T(V,N,O){d.fromBufferAttribute(n,V),m.fromBufferAttribute(n,N),g.fromBufferAttribute(n,O),_.fromBufferAttribute(s,V),S.fromBufferAttribute(s,N),M.fromBufferAttribute(s,O),m.sub(d),g.sub(d),S.sub(_),M.sub(_);const z=1/(S.x*M.y-M.x*S.y);isFinite(z)&&(C.copy(m).multiplyScalar(M.y).addScaledVector(g,-S.y).multiplyScalar(z),w.copy(g).multiplyScalar(S.x).addScaledVector(m,-M.x).multiplyScalar(z),c[V].add(C),c[N].add(C),c[O].add(C),h[V].add(w),h[N].add(w),h[O].add(w))}let D=this.groups;D.length===0&&(D=[{start:0,count:e.count}]);for(let V=0,N=D.length;V<N;++V){const O=D[V],z=O.start,W=O.count;for(let q=z,he=z+W;q<he;q+=3)T(e.getX(q+0),e.getX(q+1),e.getX(q+2))}const I=new re,L=new re,j=new re,Y=new re;function k(V){j.fromBufferAttribute(r,V),Y.copy(j);const N=c[V];I.copy(N),I.sub(j.multiplyScalar(j.dot(N))).normalize(),L.crossVectors(Y,N);const z=L.dot(h[V])<0?-1:1;o.setXYZW(V,I.x,I.y,I.z,z)}for(let V=0,N=D.length;V<N;++V){const O=D[V],z=O.start,W=O.count;for(let q=z,he=z+W;q<he;q+=3)k(e.getX(q+0)),k(e.getX(q+1)),k(e.getX(q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Mi(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let _=0,S=n.count;_<S;_++)n.setXYZ(_,0,0,0);const r=new re,s=new re,o=new re,c=new re,h=new re,d=new re,m=new re,g=new re;if(e)for(let _=0,S=e.count;_<S;_+=3){const M=e.getX(_+0),C=e.getX(_+1),w=e.getX(_+2);r.fromBufferAttribute(t,M),s.fromBufferAttribute(t,C),o.fromBufferAttribute(t,w),m.subVectors(o,s),g.subVectors(r,s),m.cross(g),c.fromBufferAttribute(n,M),h.fromBufferAttribute(n,C),d.fromBufferAttribute(n,w),c.add(m),h.add(m),d.add(m),n.setXYZ(M,c.x,c.y,c.z),n.setXYZ(C,h.x,h.y,h.z),n.setXYZ(w,d.x,d.y,d.z)}else for(let _=0,S=t.count;_<S;_+=3)r.fromBufferAttribute(t,_+0),s.fromBufferAttribute(t,_+1),o.fromBufferAttribute(t,_+2),m.subVectors(o,s),g.subVectors(r,s),m.cross(g),n.setXYZ(_+0,m.x,m.y,m.z),n.setXYZ(_+1,m.x,m.y,m.z),n.setXYZ(_+2,m.x,m.y,m.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ns.fromBufferAttribute(e,t),ns.normalize(),e.setXYZ(t,ns.x,ns.y,ns.z)}toNonIndexed(){function e(c,h){const d=c.array,m=c.itemSize,g=c.normalized,_=new d.constructor(h.length*m);let S=0,M=0;for(let C=0,w=h.length;C<w;C++){c.isInterleavedBufferAttribute?S=h[C]*c.data.stride+c.offset:S=h[C]*m;for(let T=0;T<m;T++)_[M++]=d[S++]}return new Mi(_,m,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new bn,n=this.index.array,r=this.attributes;for(const c in r){const h=r[c],d=e(h,n);t.setAttribute(c,d)}const s=this.morphAttributes;for(const c in s){const h=[],d=s[c];for(let m=0,g=d.length;m<g;m++){const _=d[m],S=e(_,n);h.push(S)}t.morphAttributes[c]=h}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let c=0,h=o.length;c<h;c++){const d=o[c];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const d in h)h[d]!==void 0&&(e[d]=h[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const h in n){const d=n[h];e.data.attributes[h]=d.toJSON(e.data)}const r={};let s=!1;for(const h in this.morphAttributes){const d=this.morphAttributes[h],m=[];for(let g=0,_=d.length;g<_;g++){const S=d[g];m.push(S.toJSON(e.data))}m.length>0&&(r[h]=m,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere=c.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const r=e.attributes;for(const d in r){const m=r[d];this.setAttribute(d,m.clone(t))}const s=e.morphAttributes;for(const d in s){const m=[],g=s[d];for(let _=0,S=g.length;_<S;_++)m.push(g[_].clone(t));this.morphAttributes[d]=m}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,m=o.length;d<m;d++){const g=o[d];this.addGroup(g.start,g.count,g.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const nI=new sn,qd=new Ev,ab=new Es,iI=new re,ob=new re,lb=new re,cb=new re,Lw=new re,ub=new re,rI=new re,hb=new re;class Pr extends ni{constructor(e=new bn,t=new Jf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const c=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const c=this.morphTargetInfluences;if(s&&c){ub.set(0,0,0);for(let h=0,d=s.length;h<d;h++){const m=c[h],g=s[h];m!==0&&(Lw.fromBufferAttribute(g,e),o?ub.addScaledVector(Lw,m):ub.addScaledVector(Lw.sub(t),m))}t.add(ub)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),ab.copy(n.boundingSphere),ab.applyMatrix4(s),qd.copy(e.ray).recast(e.near),!(ab.containsPoint(qd.origin)===!1&&(qd.intersectSphere(ab,iI)===null||qd.origin.distanceToSquared(iI)>(e.far-e.near)**2))&&(nI.copy(s).invert(),qd.copy(e.ray).applyMatrix4(nI),!(n.boundingBox!==null&&qd.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,qd)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,c=s.index,h=s.attributes.position,d=s.attributes.uv,m=s.attributes.uv1,g=s.attributes.normal,_=s.groups,S=s.drawRange;if(c!==null)if(Array.isArray(o))for(let M=0,C=_.length;M<C;M++){const w=_[M],T=o[w.materialIndex],D=Math.max(w.start,S.start),I=Math.min(c.count,Math.min(w.start+w.count,S.start+S.count));for(let L=D,j=I;L<j;L+=3){const Y=c.getX(L),k=c.getX(L+1),V=c.getX(L+2);r=fb(this,T,e,n,d,m,g,Y,k,V),r&&(r.faceIndex=Math.floor(L/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const M=Math.max(0,S.start),C=Math.min(c.count,S.start+S.count);for(let w=M,T=C;w<T;w+=3){const D=c.getX(w),I=c.getX(w+1),L=c.getX(w+2);r=fb(this,o,e,n,d,m,g,D,I,L),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}else if(h!==void 0)if(Array.isArray(o))for(let M=0,C=_.length;M<C;M++){const w=_[M],T=o[w.materialIndex],D=Math.max(w.start,S.start),I=Math.min(h.count,Math.min(w.start+w.count,S.start+S.count));for(let L=D,j=I;L<j;L+=3){const Y=L,k=L+1,V=L+2;r=fb(this,T,e,n,d,m,g,Y,k,V),r&&(r.faceIndex=Math.floor(L/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const M=Math.max(0,S.start),C=Math.min(h.count,S.start+S.count);for(let w=M,T=C;w<T;w+=3){const D=w,I=w+1,L=w+2;r=fb(this,o,e,n,d,m,g,D,I,L),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}}}function FY(i,e,t,n,r,s,o,c){let h;if(e.side===Ra?h=n.intersectTriangle(o,s,r,!0,c):h=n.intersectTriangle(r,s,o,e.side===dh,c),h===null)return null;hb.copy(c),hb.applyMatrix4(i.matrixWorld);const d=t.ray.origin.distanceTo(hb);return d<t.near||d>t.far?null:{distance:d,point:hb.clone(),object:i}}function fb(i,e,t,n,r,s,o,c,h,d){i.getVertexPosition(c,ob),i.getVertexPosition(h,lb),i.getVertexPosition(d,cb);const m=FY(i,e,t,n,ob,lb,cb,rI);if(m){const g=new re;Ka.getBarycoord(rI,ob,lb,cb,g),r&&(m.uv=Ka.getInterpolatedAttribute(r,c,h,d,g,new tt)),s&&(m.uv1=Ka.getInterpolatedAttribute(s,c,h,d,g,new tt)),o&&(m.normal=Ka.getInterpolatedAttribute(o,c,h,d,g,new re),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const _={a:c,b:h,c:d,normal:new re,materialIndex:0};Ka.getNormal(ob,lb,cb,_.normal),m.face=_,m.barycoord=g}return m}class Yp extends bn{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const c=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const h=[],d=[],m=[],g=[];let _=0,S=0;M("z","y","x",-1,-1,n,t,e,o,s,0),M("z","y","x",1,-1,n,t,-e,o,s,1),M("x","z","y",1,1,e,n,t,r,o,2),M("x","z","y",1,-1,e,n,-t,r,o,3),M("x","y","z",1,-1,e,t,n,r,s,4),M("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(h),this.setAttribute("position",new Lt(d,3)),this.setAttribute("normal",new Lt(m,3)),this.setAttribute("uv",new Lt(g,2));function M(C,w,T,D,I,L,j,Y,k,V,N){const O=L/k,z=j/V,W=L/2,q=j/2,he=Y/2,fe=k+1,H=V+1;let K=0,J=0;const oe=new re;for(let se=0;se<H;se++){const Z=se*z-q;for(let le=0;le<fe;le++){const Ce=le*O-W;oe[C]=Ce*D,oe[w]=Z*I,oe[T]=he,d.push(oe.x,oe.y,oe.z),oe[C]=0,oe[w]=0,oe[T]=Y>0?1:-1,m.push(oe.x,oe.y,oe.z),g.push(le/k),g.push(1-se/V),K+=1}}for(let se=0;se<V;se++)for(let Z=0;Z<k;Z++){const le=_+Z+fe*se,Ce=_+Z+fe*(se+1),Te=_+(Z+1)+fe*(se+1),Ye=_+(Z+1)+fe*se;h.push(le,Ce,Ye),h.push(Ce,Te,Ye),J+=6}c.addGroup(S,J,N),S+=J,_+=K}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Jg(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Ta(i){const e={};for(let t=0;t<i.length;t++){const n=Jg(i[t]);for(const r in n)e[r]=n[r]}return e}function HY(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function Fk(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Kn.workingColorSpace}const Hk={clone:Jg,merge:Ta};var GY=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,jY=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ql extends ta{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=GY,this.fragmentShader=jY,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Jg(e.uniforms),this.uniformsGroups=HY(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class IT extends ni{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new sn,this.projectionMatrix=new sn,this.projectionMatrixInverse=new sn,this.coordinateSystem=xo,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const yf=new re,sI=new tt,aI=new tt;class rs extends IT{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Qg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(bp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Qg*2*Math.atan(Math.tan(bp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){yf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(yf.x,yf.y).multiplyScalar(-e/yf.z),yf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(yf.x,yf.y).multiplyScalar(-e/yf.z)}getViewSize(e,t){return this.getViewBounds(e,sI,aI),t.subVectors(aI,sI)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(bp*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const h=o.fullWidth,d=o.fullHeight;s+=o.offsetX*r/h,t-=o.offsetY*n/d,r*=o.width/h,n*=o.height/d}const c=this.filmOffset;c!==0&&(s+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ng=-90,ig=1;class Gk extends ni{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new rs(ng,ig,e,t);r.layers=this.layers,this.add(r);const s=new rs(ng,ig,e,t);s.layers=this.layers,this.add(s);const o=new rs(ng,ig,e,t);o.layers=this.layers,this.add(o);const c=new rs(ng,ig,e,t);c.layers=this.layers,this.add(c);const h=new rs(ng,ig,e,t);h.layers=this.layers,this.add(h);const d=new rs(ng,ig,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,c,h]=t;for(const d of t)this.remove(d);if(e===xo)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),h.up.set(0,1,0),h.lookAt(0,0,-1);else if(e===Kg)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),h.up.set(0,-1,0),h.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,c,h,d,m]=this.children,g=e.getRenderTarget(),_=e.getActiveCubeFace(),S=e.getActiveMipmapLevel(),M=e.xr.enabled;e.xr.enabled=!1;const C=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,c),e.setRenderTarget(n,3,r),e.render(t,h),e.setRenderTarget(n,4,r),e.render(t,d),n.texture.generateMipmaps=C,e.setRenderTarget(n,5,r),e.render(t,m),e.setRenderTarget(g,_,S),e.xr.enabled=M,n.texture.needsPMREMUpdate=!0}}class T0 extends ur{constructor(e=[],t=ph,n,r,s,o,c,h,d,m){super(e,t,n,r,s,o,c,h,d,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class jk extends au{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new T0(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Yp(5,5,5),s=new Ql({name:"CubemapFromEquirect",uniforms:Jg(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ra,blending:ih});s.uniforms.tEquirect.value=t;const o=new Pr(r,s),c=t.minFilter;return t.minFilter===jc&&(t.minFilter=Hr),new Gk(1,10,this).update(e,o),t.minFilter=c,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}class wg extends ni{constructor(){super(),this.isGroup=!0,this.type="Group"}}const qY={type:"move"};class px{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new wg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new wg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new re),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new wg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new re),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const c=this._targetRay,h=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){o=!0;for(const C of e.hand.values()){const w=t.getJointPose(C,n),T=this._getHandJoint(d,C);w!==null&&(T.matrix.fromArray(w.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,T.jointRadius=w.radius),T.visible=w!==null}const m=d.joints["index-finger-tip"],g=d.joints["thumb-tip"],_=m.position.distanceTo(g.position),S=.02,M=.005;d.inputState.pinching&&_>S+M?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&_<=S-M&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1));c!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(qY)))}return c!==null&&(c.visible=r!==null),h!==null&&(h.visible=s!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new wg;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class OT{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new At(e),this.density=t}clone(){return new OT(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class PT{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new At(e),this.near=t,this.far=n}clone(){return new PT(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class rR extends ni{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new wo,this.environmentIntensity=1,this.environmentRotation=new wo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class LT{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Q_,this.updateRanges=[],this.version=0,this.uuid=To()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=To()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=To()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ea=new re;class Np{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ea.fromBufferAttribute(this,t),Ea.applyMatrix4(e),this.setXYZ(t,Ea.x,Ea.y,Ea.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ea.fromBufferAttribute(this,t),Ea.applyNormalMatrix(e),this.setXYZ(t,Ea.x,Ea.y,Ea.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ea.fromBufferAttribute(this,t),Ea.transformDirection(e),this.setXYZ(t,Ea.x,Ea.y,Ea.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=wa(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Sn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=wa(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=wa(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=wa(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=wa(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array),r=Sn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sn(t,this.array),n=Sn(n,this.array),r=Sn(r,this.array),s=Sn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Mi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Np(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class sR extends ta{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new At(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let rg;const Yy=new re,sg=new re,ag=new re,og=new tt,Wy=new tt,qk=new sn,db=new re,Xy=new re,pb=new re,oI=new tt,Uw=new tt,lI=new tt;class Yk extends ni{constructor(e=new sR){if(super(),this.isSprite=!0,this.type="Sprite",rg===void 0){rg=new bn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new LT(t,5);rg.setIndex([0,1,2,0,2,3]),rg.setAttribute("position",new Np(n,3,0,!1)),rg.setAttribute("uv",new Np(n,2,3,!1))}this.geometry=rg,this.material=e,this.center=new tt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),sg.setFromMatrixScale(this.matrixWorld),qk.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ag.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&sg.multiplyScalar(-ag.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;mb(db.set(-.5,-.5,0),ag,o,sg,r,s),mb(Xy.set(.5,-.5,0),ag,o,sg,r,s),mb(pb.set(.5,.5,0),ag,o,sg,r,s),oI.set(0,0),Uw.set(1,0),lI.set(1,1);let c=e.ray.intersectTriangle(db,Xy,pb,!1,Yy);if(c===null&&(mb(Xy.set(-.5,.5,0),ag,o,sg,r,s),Uw.set(0,1),c=e.ray.intersectTriangle(db,pb,Xy,!1,Yy),c===null))return;const h=e.ray.origin.distanceTo(Yy);h<e.near||h>e.far||t.push({distance:h,point:Yy.clone(),uv:Ka.getInterpolation(Yy,db,Xy,pb,oI,Uw,lI,new tt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function mb(i,e,t,n,r,s){og.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(Wy.x=s*og.x-r*og.y,Wy.y=r*og.x+s*og.y):Wy.copy(og),i.copy(e),i.x+=Wy.x,i.y+=Wy.y,i.applyMatrix4(qk)}const gb=new re,cI=new re;class Wk extends ni{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){gb.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(gb);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){gb.setFromMatrixPosition(e.matrixWorld),cI.setFromMatrixPosition(this.matrixWorld);const n=gb.distanceTo(cI)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),n>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const uI=new re,hI=new ei,fI=new ei,YY=new re,dI=new sn,vb=new re,kw=new Es,pI=new sn,Vw=new Ev;class Xk extends Pr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=fA,this.bindMatrix=new sn,this.bindMatrixInverse=new sn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new $s),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,vb),this.boundingBox.expandByPoint(vb)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Es),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,vb),this.boundingSphere.expandByPoint(vb)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),kw.copy(this.boundingSphere),kw.applyMatrix4(r),e.ray.intersectsSphere(kw)!==!1&&(pI.copy(r).invert(),Vw.copy(e.ray).applyMatrix4(pI),!(this.boundingBox!==null&&Vw.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Vw)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ei,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===fA?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Ek?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;hI.fromBufferAttribute(r.attributes.skinIndex,e),fI.fromBufferAttribute(r.attributes.skinWeight,e),uI.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=fI.getComponent(s);if(o!==0){const c=hI.getComponent(s);dI.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(YY.copy(uI).applyMatrix4(dI),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class aR extends ni{constructor(){super(),this.isBone=!0,this.type="Bone"}}class tu extends ur{constructor(e=null,t=1,n=1,r,s,o,c,h,d=xs,m=xs,g,_){super(null,o,c,h,d,m,r,s,g,_),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const mI=new sn,WY=new sn;class UT{constructor(e=[],t=[]){this.uuid=To(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new sn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new sn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const c=e[s]?e[s].matrixWorld:WY;mI.multiplyMatrices(c,t[s]),mI.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new UT(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new tu(t,e,e,Js,Za);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new aR),this.bones.push(o),this.boneInverses.push(new sn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const c=n[r];e.boneInverses.push(c.toArray())}return e}}class $g extends Mi{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const lg=new sn,gI=new sn,yb=[],vI=new $s,XY=new sn,Ky=new Pr,Qy=new Es;class Kk extends Pr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new $g(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,XY)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new $s),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,lg),vI.copy(e.boundingBox).applyMatrix4(lg),this.boundingBox.union(vI)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Es),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,lg),Qy.copy(e.boundingSphere).applyMatrix4(lg),this.boundingSphere.union(Qy)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let c=0;c<n.length;c++)n[c]=r[o+c]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Ky.geometry=this.geometry,Ky.material=this.material,Ky.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Qy.copy(this.boundingSphere),Qy.applyMatrix4(n),e.ray.intersectsSphere(Qy)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,lg),gI.multiplyMatrices(n,lg),Ky.matrixWorld=gI,Ky.raycast(e,yb);for(let o=0,c=yb.length;o<c;o++){const h=yb[o];h.instanceId=s,h.object=this,t.push(h)}yb.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new $g(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new tu(new Float32Array(r*this.count),r,this.count,wT,Za));const s=this.morphTexture.source.data.data;let o=0;for(let d=0;d<n.length;d++)o+=n[d];const c=this.geometry.morphTargetsRelative?1:1-o,h=r*e;s[h]=c,s.set(n,h+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Bw=new re,KY=new re,QY=new yn;class bf{constructor(e=new re(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Bw.subVectors(n,t).cross(KY.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Bw),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||QY.getNormalMatrix(e),r=this.coplanarPoint(Bw).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Yd=new Es,ZY=new tt(.5,.5),_b=new re;class Tv{constructor(e=new bf,t=new bf,n=new bf,r=new bf,s=new bf,o=new bf){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(r),c[4].copy(s),c[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=xo,n=!1){const r=this.planes,s=e.elements,o=s[0],c=s[1],h=s[2],d=s[3],m=s[4],g=s[5],_=s[6],S=s[7],M=s[8],C=s[9],w=s[10],T=s[11],D=s[12],I=s[13],L=s[14],j=s[15];if(r[0].setComponents(d-o,S-m,T-M,j-D).normalize(),r[1].setComponents(d+o,S+m,T+M,j+D).normalize(),r[2].setComponents(d+c,S+g,T+C,j+I).normalize(),r[3].setComponents(d-c,S-g,T-C,j-I).normalize(),n)r[4].setComponents(h,_,w,L).normalize(),r[5].setComponents(d-h,S-_,T-w,j-L).normalize();else if(r[4].setComponents(d-h,S-_,T-w,j-L).normalize(),t===xo)r[5].setComponents(d+h,S+_,T+w,j+L).normalize();else if(t===Kg)r[5].setComponents(h,_,w,L).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Yd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Yd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Yd)}intersectsSprite(e){Yd.center.set(0,0,0);const t=ZY.distanceTo(e.center);return Yd.radius=.7071067811865476+t,Yd.applyMatrix4(e.matrixWorld),this.intersectsSphere(Yd)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(_b.x=r.normal.x>0?e.max.x:e.min.x,_b.y=r.normal.y>0?e.max.y:e.min.y,_b.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(_b)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Pc=new sn,Lc=new Tv;class kT{constructor(){this.coordinateSystem=xo}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Pc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Lc.setFromProjectionMatrix(Pc,r.coordinateSystem,r.reversedDepth),Lc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Pc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Lc.setFromProjectionMatrix(Pc,r.coordinateSystem,r.reversedDepth),Lc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Pc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Lc.setFromProjectionMatrix(Pc,r.coordinateSystem,r.reversedDepth),Lc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Pc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Lc.setFromProjectionMatrix(Pc,r.coordinateSystem,r.reversedDepth),Lc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Pc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Lc.setFromProjectionMatrix(Pc,r.coordinateSystem,r.reversedDepth),Lc.containsPoint(e))return!0}return!1}clone(){return new kT}}function zw(i,e){return i-e}function JY(i,e){return i.z-e.z}function $Y(i,e){return e.z-i.z}class eW{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const c=s[this.index];o.push(c),this.index++,c.start=e,c.count=t,c.z=n,c.index=r}reset(){this.list.length=0,this.index=0}}const Ga=new sn,tW=new At(1,1,1),yI=new Tv,nW=new kT,Sb=new $s,Wd=new Es,Zy=new re,_I=new re,iW=new re,Fw=new eW,Ys=new Pr,bb=[];function rW(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const r=i.count;for(let s=0;s<r;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,i.getComponent(s,o))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function Xd(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class Qk extends Pr{constructor(e,t,n=t*2,r){super(new bn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new tu(t,e,e,Js,Za);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new tu(t,e,e,E0,mh);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new tu(t,e,e,Js,Za);n.colorSpace=Kn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:c,itemSize:h,normalized:d}=o,m=new c.constructor(n*h),g=new Mi(m,h,d);t.setAttribute(s,g)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Mi(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),s=t.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $s);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Ga),this.getBoundingBoxAt(s,Sb).applyMatrix4(Ga),e.union(Sb)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Es);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Ga),this.getBoundingSphereAt(s,Wd).applyMatrix4(Ga),e.union(Wd)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(zw),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=n):(r=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;Ga.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(tW.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=n===-1?o.count:n),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let h;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(zw),h=this._availableGeometryIds.shift(),s[h]=r):(h=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(h,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,h}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),c=this._geometryInfo[e];if(r&&o.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const h=c.vertexStart,d=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const m in n.attributes){const g=t.getAttribute(m),_=n.getAttribute(m);rW(g,_,h);const S=g.itemSize;for(let M=g.count,C=d;M<C;M++){const w=h+M;for(let T=0;T<S;T++)_.setComponent(w,T,0)}_.needsUpdate=!0,_.addUpdateRange(h*S,d*S)}if(r){const m=c.indexStart,g=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let _=0;_<o.count;_++)s.setX(m+_,h+o.getX(_));for(let _=o.count,S=g;_<S;_++)s.setX(m+_,h);s.needsUpdate=!0,s.addUpdateRange(m,c.reservedIndexCount)}return c.start=r?c.indexStart:c.vertexStart,c.count=r?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let r=0,s=n.length;r<s;r++)n[r].active&&n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((o,c)=>c).sort((o,c)=>n[o].vertexStart-n[c].vertexStart),s=this.geometry;for(let o=0,c=n.length;o<c;o++){const h=r[o],d=n[h];if(d.active!==!1){if(s.index!==null){if(d.indexStart!==t){const{indexStart:m,vertexStart:g,reservedIndexCount:_}=d,S=s.index,M=S.array,C=e-g;for(let w=m;w<m+_;w++)M[w]=M[w]+C;S.array.copyWithin(t,m,m+_),S.addUpdateRange(t,_),d.indexStart=t}t+=d.reservedIndexCount}if(d.vertexStart!==e){const{vertexStart:m,reservedVertexCount:g}=d,_=s.attributes;for(const S in _){const M=_[S],{array:C,itemSize:w}=M;C.copyWithin(e*w,m*w,(m+g)*w),M.addUpdateRange(e*w,g*w)}d.vertexStart=e}e+=d.reservedVertexCount,d.start=s.index?d.indexStart:d.vertexStart,this._nextIndexStart=s.index?d.indexStart+d.reservedIndexCount:0,this._nextVertexStart=d.vertexStart+d.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new $s,o=n.index,c=n.attributes.position;for(let h=r.start,d=r.start+r.count;h<d;h++){let m=h;o&&(m=o.getX(m)),s.expandByPoint(Zy.fromBufferAttribute(c,m))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Es;this.getBoundingBoxAt(e,Sb),Sb.getCenter(s.center);const o=n.index,c=n.attributes.position;let h=0;for(let d=r.start,m=r.start+r.count;d<m;d++){let g=d;o&&(g=o.getX(g)),Zy.fromBufferAttribute(c,g),h=Math.max(h,s.center.distanceToSquared(Zy))}s.radius=Math.sqrt(h),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(zw);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Xd(this._multiDrawCounts,r),Xd(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,c=this._matricesTexture,h=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Xd(o.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),Xd(c.image.data,this._matricesTexture.image.data),h&&(h.dispose(),this._initColorsTexture(),Xd(h.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...n.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(h=>h.indexStart+h.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new bn,this._initializeGeometry(s));const o=this.geometry;s.index&&Xd(s.index.array,o.index.array);for(const c in s.attributes)Xd(s.attributes[c].array,o.attributes[c].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Ys.material=this.material,Ys.geometry.index=o.index,Ys.geometry.attributes=o.attributes,Ys.geometry.boundingBox===null&&(Ys.geometry.boundingBox=new $s),Ys.geometry.boundingSphere===null&&(Ys.geometry.boundingSphere=new Es);for(let c=0,h=n.length;c<h;c++){if(!n[c].visible||!n[c].active)continue;const d=n[c].geometryIndex,m=r[d];Ys.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(c,Ys.matrixWorld).premultiply(s),this.getBoundingBoxAt(d,Ys.geometry.boundingBox),this.getBoundingSphereAt(d,Ys.geometry.boundingSphere),Ys.raycast(e,bb);for(let g=0,_=bb.length;g<_;g++){const S=bb[g];S.object=this,S.batchId=c,t.push(S)}bb.length=0}Ys.material=null,Ys.geometry.index=null,Ys.geometry.attributes={},Ys.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),c=o===null?1:o.array.BYTES_PER_ELEMENT,h=this._instanceInfo,d=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,_=this.perObjectFrustumCulled,S=this._indirectTexture,M=S.image.data,C=n.isArrayCamera?nW:yI;_&&!n.isArrayCamera&&(Ga.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),yI.setFromProjectionMatrix(Ga,n.coordinateSystem,n.reversedDepth));let w=0;if(this.sortObjects){Ga.copy(this.matrixWorld).invert(),Zy.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Ga),_I.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Ga);for(let I=0,L=h.length;I<L;I++)if(h[I].visible&&h[I].active){const j=h[I].geometryIndex;this.getMatrixAt(I,Ga),this.getBoundingSphereAt(j,Wd).applyMatrix4(Ga);let Y=!1;if(_&&(Y=!C.intersectsSphere(Wd,n)),!Y){const k=g[j],V=iW.subVectors(Wd.center,Zy).dot(_I);Fw.push(k.start,k.count,V,I)}}const T=Fw.list,D=this.customSort;D===null?T.sort(s.transparent?$Y:JY):D.call(this,T,n);for(let I=0,L=T.length;I<L;I++){const j=T[I];d[w]=j.start*c,m[w]=j.count,M[w]=j.index,w++}Fw.reset()}else for(let T=0,D=h.length;T<D;T++)if(h[T].visible&&h[T].active){const I=h[T].geometryIndex;let L=!1;if(_&&(this.getMatrixAt(T,Ga),this.getBoundingSphereAt(I,Wd).applyMatrix4(Ga),L=!C.intersectsSphere(Wd,n)),!L){const j=g[I];d[w]=j.start*c,m[w]=j.count,M[w]=T,w++}}S.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Da extends ta{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new At(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const CE=new re,RE=new re,SI=new sn,Jy=new Ev,xb=new Es,Hw=new re,bI=new re;class Wf extends ni{constructor(e=new bn,t=new Da){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)CE.fromBufferAttribute(t,r-1),RE.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=CE.distanceTo(RE);e.setAttribute("lineDistance",new Lt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),xb.copy(n.boundingSphere),xb.applyMatrix4(r),xb.radius+=s,e.ray.intersectsSphere(xb)===!1)return;SI.copy(r).invert(),Jy.copy(e.ray).applyMatrix4(SI);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,d=this.isLineSegments?2:1,m=n.index,_=n.attributes.position;if(m!==null){const S=Math.max(0,o.start),M=Math.min(m.count,o.start+o.count);for(let C=S,w=M-1;C<w;C+=d){const T=m.getX(C),D=m.getX(C+1),I=Eb(this,e,Jy,h,T,D,C);I&&t.push(I)}if(this.isLineLoop){const C=m.getX(M-1),w=m.getX(S),T=Eb(this,e,Jy,h,C,w,M-1);T&&t.push(T)}}else{const S=Math.max(0,o.start),M=Math.min(_.count,o.start+o.count);for(let C=S,w=M-1;C<w;C+=d){const T=Eb(this,e,Jy,h,C,C+1,C);T&&t.push(T)}if(this.isLineLoop){const C=Eb(this,e,Jy,h,M-1,S,M-1);C&&t.push(C)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const c=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function Eb(i,e,t,n,r,s,o){const c=i.geometry.attributes.position;if(CE.fromBufferAttribute(c,r),RE.fromBufferAttribute(c,s),t.distanceSqToSegment(CE,RE,Hw,bI)>n)return;Hw.applyMatrix4(i.matrixWorld);const d=e.ray.origin.distanceTo(Hw);if(!(d<e.near||d>e.far))return{distance:d,point:bI.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const xI=new re,EI=new re;class uu extends Wf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)xI.fromBufferAttribute(t,r),EI.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+xI.distanceTo(EI);e.setAttribute("lineDistance",new Lt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Zk extends Wf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class oR extends ta{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new At(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const TI=new sn,mA=new Ev,Tb=new Es,Mb=new re;class Jk extends ni{constructor(e=new bn,t=new oR){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Tb.copy(n.boundingSphere),Tb.applyMatrix4(r),Tb.radius+=s,e.ray.intersectsSphere(Tb)===!1)return;TI.copy(r).invert(),mA.copy(e.ray).applyMatrix4(TI);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,d=n.index,g=n.attributes.position;if(d!==null){const _=Math.max(0,o.start),S=Math.min(d.count,o.start+o.count);for(let M=_,C=S;M<C;M++){const w=d.getX(M);Mb.fromBufferAttribute(g,w),MI(Mb,w,h,r,e,t,this)}}else{const _=Math.max(0,o.start),S=Math.min(g.count,o.start+o.count);for(let M=_,C=S;M<C;M++)Mb.fromBufferAttribute(g,M),MI(Mb,M,h,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const c=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function MI(i,e,t,n,r,s,o){const c=mA.distanceSqToPoint(i);if(c<t){const h=new re;mA.closestPointToPoint(i,h),h.applyMatrix4(n);const d=r.ray.origin.distanceTo(h);if(d<r.near||d>r.far)return;s.push({distance:d,distanceToRay:Math.sqrt(c),point:h,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class $k extends ur{constructor(e,t,n,r,s=Hr,o=Hr,c,h,d){super(e,t,n,r,s,o,c,h,d),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const m=this;function g(){m.needsUpdate=!0,m._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class sW extends $k{constructor(e,t,n,r,s,o,c,h){super({},e,t,n,r,s,o,c,h),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class aW extends ur{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=xs,this.minFilter=xs,this.generateMipmaps=!1,this.needsUpdate=!0}}class VT extends ur{constructor(e,t,n,r,s,o,c,h,d,m,g,_){super(null,o,c,h,d,m,r,s,g,_),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class oW extends VT{constructor(e,t,n,r,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=tl,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class lW extends VT{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,ph),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class cW extends ur{constructor(e,t,n,r,s,o,c,h,d){super(e,t,n,r,s,o,c,h,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class lR extends ur{constructor(e,t,n=mh,r,s,o,c=xs,h=xs,d,m=Wg,g=1){if(m!==Wg&&m!==Xg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const _={width:e,height:t,depth:g};super(_,r,s,o,c,h,m,n,d),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Rf(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class cR extends ur{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class BT extends bn{constructor(e=1,t=1,n=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r,heightSegments:s},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const o=[],c=[],h=[],d=[],m=t/2,g=Math.PI/2*e,_=t,S=2*g+_,M=n*2+s,C=r+1,w=new re,T=new re;for(let D=0;D<=M;D++){let I=0,L=0,j=0,Y=0;if(D<=n){const N=D/n,O=N*Math.PI/2;L=-m-e*Math.cos(O),j=e*Math.sin(O),Y=-e*Math.cos(O),I=N*g}else if(D<=n+s){const N=(D-n)/s;L=-m+N*t,j=e,Y=0,I=g+N*_}else{const N=(D-n-s)/n,O=N*Math.PI/2;L=m+e*Math.sin(O),j=e*Math.cos(O),Y=e*Math.sin(O),I=g+_+N*g}const k=Math.max(0,Math.min(1,I/S));let V=0;D===0?V=.5/r:D===M&&(V=-.5/r);for(let N=0;N<=r;N++){const O=N/r,z=O*Math.PI*2,W=Math.sin(z),q=Math.cos(z);T.x=-j*q,T.y=L,T.z=j*W,c.push(T.x,T.y,T.z),w.set(-j*q,Y,j*W),w.normalize(),h.push(w.x,w.y,w.z),d.push(O+V,k)}if(D>0){const N=(D-1)*C;for(let O=0;O<r;O++){const z=N+O,W=N+O+1,q=D*C+O,he=D*C+O+1;o.push(z,W,q),o.push(W,he,q)}}}this.setIndex(o),this.setAttribute("position",new Lt(c,3)),this.setAttribute("normal",new Lt(h,3)),this.setAttribute("uv",new Lt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BT(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class zT extends bn{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],o=[],c=[],h=[],d=new re,m=new tt;o.push(0,0,0),c.push(0,0,1),h.push(.5,.5);for(let g=0,_=3;g<=t;g++,_+=3){const S=n+g/t*r;d.x=e*Math.cos(S),d.y=e*Math.sin(S),o.push(d.x,d.y,d.z),c.push(0,0,1),m.x=(o[_]/e+1)/2,m.y=(o[_+1]/e+1)/2,h.push(m.x,m.y)}for(let g=1;g<=t;g++)s.push(g,g+1,0);this.setIndex(s),this.setAttribute("position",new Lt(o,3)),this.setAttribute("normal",new Lt(c,3)),this.setAttribute("uv",new Lt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zT(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class M0 extends bn{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,c=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:c,thetaLength:h};const d=this;r=Math.floor(r),s=Math.floor(s);const m=[],g=[],_=[],S=[];let M=0;const C=[],w=n/2;let T=0;D(),o===!1&&(e>0&&I(!0),t>0&&I(!1)),this.setIndex(m),this.setAttribute("position",new Lt(g,3)),this.setAttribute("normal",new Lt(_,3)),this.setAttribute("uv",new Lt(S,2));function D(){const L=new re,j=new re;let Y=0;const k=(t-e)/n;for(let V=0;V<=s;V++){const N=[],O=V/s,z=O*(t-e)+e;for(let W=0;W<=r;W++){const q=W/r,he=q*h+c,fe=Math.sin(he),H=Math.cos(he);j.x=z*fe,j.y=-O*n+w,j.z=z*H,g.push(j.x,j.y,j.z),L.set(fe,k,H).normalize(),_.push(L.x,L.y,L.z),S.push(q,1-O),N.push(M++)}C.push(N)}for(let V=0;V<r;V++)for(let N=0;N<s;N++){const O=C[N][V],z=C[N+1][V],W=C[N+1][V+1],q=C[N][V+1];(e>0||N!==0)&&(m.push(O,z,q),Y+=3),(t>0||N!==s-1)&&(m.push(z,W,q),Y+=3)}d.addGroup(T,Y,0),T+=Y}function I(L){const j=M,Y=new tt,k=new re;let V=0;const N=L===!0?e:t,O=L===!0?1:-1;for(let W=1;W<=r;W++)g.push(0,w*O,0),_.push(0,O,0),S.push(.5,.5),M++;const z=M;for(let W=0;W<=r;W++){const he=W/r*h+c,fe=Math.cos(he),H=Math.sin(he);k.x=N*H,k.y=w*O,k.z=N*fe,g.push(k.x,k.y,k.z),_.push(0,O,0),Y.x=fe*.5+.5,Y.y=H*.5*O+.5,S.push(Y.x,Y.y),M++}for(let W=0;W<r;W++){const q=j+W,he=z+W;L===!0?m.push(he,he+1,q):m.push(he+1,he,q),V+=3}d.addGroup(T,V,L===!0?1:2),T+=V}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new M0(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class w0 extends M0{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,c=Math.PI*2){super(0,e,t,n,r,s,o,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:c}}static fromJSON(e){return new w0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class $f extends bn{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],o=[];c(r),d(n),m(),this.setAttribute("position",new Lt(s,3)),this.setAttribute("normal",new Lt(s.slice(),3)),this.setAttribute("uv",new Lt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function c(D){const I=new re,L=new re,j=new re;for(let Y=0;Y<t.length;Y+=3)S(t[Y+0],I),S(t[Y+1],L),S(t[Y+2],j),h(I,L,j,D)}function h(D,I,L,j){const Y=j+1,k=[];for(let V=0;V<=Y;V++){k[V]=[];const N=D.clone().lerp(L,V/Y),O=I.clone().lerp(L,V/Y),z=Y-V;for(let W=0;W<=z;W++)W===0&&V===Y?k[V][W]=N:k[V][W]=N.clone().lerp(O,W/z)}for(let V=0;V<Y;V++)for(let N=0;N<2*(Y-V)-1;N++){const O=Math.floor(N/2);N%2===0?(_(k[V][O+1]),_(k[V+1][O]),_(k[V][O])):(_(k[V][O+1]),_(k[V+1][O+1]),_(k[V+1][O]))}}function d(D){const I=new re;for(let L=0;L<s.length;L+=3)I.x=s[L+0],I.y=s[L+1],I.z=s[L+2],I.normalize().multiplyScalar(D),s[L+0]=I.x,s[L+1]=I.y,s[L+2]=I.z}function m(){const D=new re;for(let I=0;I<s.length;I+=3){D.x=s[I+0],D.y=s[I+1],D.z=s[I+2];const L=w(D)/2/Math.PI+.5,j=T(D)/Math.PI+.5;o.push(L,1-j)}M(),g()}function g(){for(let D=0;D<o.length;D+=6){const I=o[D+0],L=o[D+2],j=o[D+4],Y=Math.max(I,L,j),k=Math.min(I,L,j);Y>.9&&k<.1&&(I<.2&&(o[D+0]+=1),L<.2&&(o[D+2]+=1),j<.2&&(o[D+4]+=1))}}function _(D){s.push(D.x,D.y,D.z)}function S(D,I){const L=D*3;I.x=e[L+0],I.y=e[L+1],I.z=e[L+2]}function M(){const D=new re,I=new re,L=new re,j=new re,Y=new tt,k=new tt,V=new tt;for(let N=0,O=0;N<s.length;N+=9,O+=6){D.set(s[N+0],s[N+1],s[N+2]),I.set(s[N+3],s[N+4],s[N+5]),L.set(s[N+6],s[N+7],s[N+8]),Y.set(o[O+0],o[O+1]),k.set(o[O+2],o[O+3]),V.set(o[O+4],o[O+5]),j.copy(D).add(I).add(L).divideScalar(3);const z=w(j);C(Y,O+0,D,z),C(k,O+2,I,z),C(V,O+4,L,z)}}function C(D,I,L,j){j<0&&D.x===1&&(o[I]=D.x-1),L.x===0&&L.z===0&&(o[I]=j/2/Math.PI+.5)}function w(D){return Math.atan2(D.z,-D.x)}function T(D){return Math.atan2(-D.y,Math.sqrt(D.x*D.x+D.z*D.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $f(e.vertices,e.indices,e.radius,e.details)}}class FT extends $f{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new FT(e.radius,e.detail)}}const wb=new re,Ab=new re,Gw=new re,Cb=new Ka;class e4 extends bn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(bp*t),o=e.getIndex(),c=e.getAttribute("position"),h=o?o.count:c.count,d=[0,0,0],m=["a","b","c"],g=new Array(3),_={},S=[];for(let M=0;M<h;M+=3){o?(d[0]=o.getX(M),d[1]=o.getX(M+1),d[2]=o.getX(M+2)):(d[0]=M,d[1]=M+1,d[2]=M+2);const{a:C,b:w,c:T}=Cb;if(C.fromBufferAttribute(c,d[0]),w.fromBufferAttribute(c,d[1]),T.fromBufferAttribute(c,d[2]),Cb.getNormal(Gw),g[0]=`${Math.round(C.x*r)},${Math.round(C.y*r)},${Math.round(C.z*r)}`,g[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,g[2]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let D=0;D<3;D++){const I=(D+1)%3,L=g[D],j=g[I],Y=Cb[m[D]],k=Cb[m[I]],V=`${L}_${j}`,N=`${j}_${L}`;N in _&&_[N]?(Gw.dot(_[N].normal)<=s&&(S.push(Y.x,Y.y,Y.z),S.push(k.x,k.y,k.z)),_[N]=null):V in _||(_[V]={index0:d[D],index1:d[I],normal:Gw.clone()})}}for(const M in _)if(_[M]){const{index0:C,index1:w}=_[M];wb.fromBufferAttribute(c,C),Ab.fromBufferAttribute(c,w),S.push(wb.x,wb.y,wb.z),S.push(Ab.x,Ab.y,Ab.z)}this.setAttribute("position",new Lt(S,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class $l{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let r=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let c=0,h=s-1,d;for(;c<=h;)if(r=Math.floor(c+(h-c)/2),d=n[r]-o,d<0)c=r+1;else if(d>0)h=r-1;else{h=r;break}if(r=h,n[r]===o)return r/(s-1);const m=n[r],_=n[r+1]-m,S=(o-m)/_;return(r+S)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),c=this.getPoint(s),h=t||(o.isVector2?new tt:new re);return h.copy(c).sub(o).normalize(),h}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new re,r=[],s=[],o=[],c=new re,h=new sn;for(let S=0;S<=e;S++){const M=S/e;r[S]=this.getTangentAt(M,new re)}s[0]=new re,o[0]=new re;let d=Number.MAX_VALUE;const m=Math.abs(r[0].x),g=Math.abs(r[0].y),_=Math.abs(r[0].z);m<=d&&(d=m,n.set(1,0,0)),g<=d&&(d=g,n.set(0,1,0)),_<=d&&n.set(0,0,1),c.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],c),o[0].crossVectors(r[0],s[0]);for(let S=1;S<=e;S++){if(s[S]=s[S-1].clone(),o[S]=o[S-1].clone(),c.crossVectors(r[S-1],r[S]),c.length()>Number.EPSILON){c.normalize();const M=Math.acos(tn(r[S-1].dot(r[S]),-1,1));s[S].applyMatrix4(h.makeRotationAxis(c,M))}o[S].crossVectors(r[S],s[S])}if(t===!0){let S=Math.acos(tn(s[0].dot(s[e]),-1,1));S/=e,r[0].dot(c.crossVectors(s[0],s[e]))>0&&(S=-S);for(let M=1;M<=e;M++)s[M].applyMatrix4(h.makeRotationAxis(r[M],S*M)),o[M].crossVectors(r[M],s[M])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class HT extends $l{constructor(e=0,t=0,n=1,r=1,s=0,o=Math.PI*2,c=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=c,this.aRotation=h}getPoint(e,t=new tt){const n=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const c=this.aStartAngle+e*s;let h=this.aX+this.xRadius*Math.cos(c),d=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),_=h-this.aX,S=d-this.aY;h=_*m-S*g+this.aX,d=_*g+S*m+this.aY}return n.set(h,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class t4 extends HT{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function uR(){let i=0,e=0,t=0,n=0;function r(s,o,c,h){i=s,e=c,t=-3*s+3*o-2*c-h,n=2*s-2*o+c+h}return{initCatmullRom:function(s,o,c,h,d){r(o,c,d*(c-s),d*(h-o))},initNonuniformCatmullRom:function(s,o,c,h,d,m,g){let _=(o-s)/d-(c-s)/(d+m)+(c-o)/m,S=(c-o)/m-(h-o)/(m+g)+(h-c)/g;_*=m,S*=m,r(o,c,_,S)},calc:function(s){const o=s*s,c=o*s;return i+e*s+t*o+n*c}}}const Rb=new re,jw=new uR,qw=new uR,Yw=new uR;class n4 extends $l{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new re){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let c=Math.floor(o),h=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/s)+1)*s:h===0&&c===s-1&&(c=s-2,h=1);let d,m;this.closed||c>0?d=r[(c-1)%s]:(Rb.subVectors(r[0],r[1]).add(r[0]),d=Rb);const g=r[c%s],_=r[(c+1)%s];if(this.closed||c+2<s?m=r[(c+2)%s]:(Rb.subVectors(r[s-1],r[s-2]).add(r[s-1]),m=Rb),this.curveType==="centripetal"||this.curveType==="chordal"){const S=this.curveType==="chordal"?.5:.25;let M=Math.pow(d.distanceToSquared(g),S),C=Math.pow(g.distanceToSquared(_),S),w=Math.pow(_.distanceToSquared(m),S);C<1e-4&&(C=1),M<1e-4&&(M=C),w<1e-4&&(w=C),jw.initNonuniformCatmullRom(d.x,g.x,_.x,m.x,M,C,w),qw.initNonuniformCatmullRom(d.y,g.y,_.y,m.y,M,C,w),Yw.initNonuniformCatmullRom(d.z,g.z,_.z,m.z,M,C,w)}else this.curveType==="catmullrom"&&(jw.initCatmullRom(d.x,g.x,_.x,m.x,this.tension),qw.initCatmullRom(d.y,g.y,_.y,m.y,this.tension),Yw.initCatmullRom(d.z,g.z,_.z,m.z,this.tension));return n.set(jw.calc(h),qw.calc(h),Yw.calc(h)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new re().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function wI(i,e,t,n,r){const s=(n-e)*.5,o=(r-t)*.5,c=i*i,h=i*c;return(2*t-2*n+s+o)*h+(-3*t+3*n-2*s-o)*c+s*i+t}function uW(i,e){const t=1-i;return t*t*e}function hW(i,e){return 2*(1-i)*i*e}function fW(i,e){return i*i*e}function C_(i,e,t,n){return uW(i,e)+hW(i,t)+fW(i,n)}function dW(i,e){const t=1-i;return t*t*t*e}function pW(i,e){const t=1-i;return 3*t*t*i*e}function mW(i,e){return 3*(1-i)*i*i*e}function gW(i,e){return i*i*i*e}function R_(i,e,t,n,r){return dW(i,e)+pW(i,t)+mW(i,n)+gW(i,r)}class hR extends $l{constructor(e=new tt,t=new tt,n=new tt,r=new tt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new tt){const n=t,r=this.v0,s=this.v1,o=this.v2,c=this.v3;return n.set(R_(e,r.x,s.x,o.x,c.x),R_(e,r.y,s.y,o.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class i4 extends $l{constructor(e=new re,t=new re,n=new re,r=new re){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new re){const n=t,r=this.v0,s=this.v1,o=this.v2,c=this.v3;return n.set(R_(e,r.x,s.x,o.x,c.x),R_(e,r.y,s.y,o.y,c.y),R_(e,r.z,s.z,o.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class fR extends $l{constructor(e=new tt,t=new tt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new tt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new tt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class r4 extends $l{constructor(e=new re,t=new re){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new re){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new re){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dR extends $l{constructor(e=new tt,t=new tt,n=new tt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new tt){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(C_(e,r.x,s.x,o.x),C_(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pR extends $l{constructor(e=new re,t=new re,n=new re){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new re){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(C_(e,r.x,s.x,o.x),C_(e,r.y,s.y,o.y),C_(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mR extends $l{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new tt){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),c=s-o,h=r[o===0?o:o-1],d=r[o],m=r[o>r.length-2?r.length-1:o+1],g=r[o>r.length-3?r.length-1:o+2];return n.set(wI(c,h.x,d.x,m.x,g.x),wI(c,h.y,d.y,m.y,g.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new tt().fromArray(r))}return this}}var DE=Object.freeze({__proto__:null,ArcCurve:t4,CatmullRomCurve3:n4,CubicBezierCurve:hR,CubicBezierCurve3:i4,EllipseCurve:HT,LineCurve:fR,LineCurve3:r4,QuadraticBezierCurve:dR,QuadraticBezierCurve3:pR,SplineCurve:mR});class s4 extends $l{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new DE[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,c=this.curves[s],h=c.getLength(),d=h===0?0:1-o/h;return c.getPointAt(d,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],c=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,h=o.getPoints(c);for(let d=0;d<h.length;d++){const m=h[d];n&&n.equals(m)||(t.push(m),n=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new DE[r.type]().fromJSON(r))}return this}}class NE extends s4{constructor(e){super(),this.type="Path",this.currentPoint=new tt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new fR(this.currentPoint.clone(),new tt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new dR(this.currentPoint.clone(),new tt(e,t),new tt(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const c=new hR(this.currentPoint.clone(),new tt(e,t),new tt(n,r),new tt(s,o));return this.curves.push(c),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new mR(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+c,t+h,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,c,h){const d=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+d,t+m,n,r,s,o,c,h),this}absellipse(e,t,n,r,s,o,c,h){const d=new HT(e,t,n,r,s,o,c,h);if(this.curves.length>0){const g=d.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(d);const m=d.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class xp extends NE{constructor(e){super(e),this.uuid=To(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new NE().fromJSON(r))}return this}}function vW(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=a4(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let c,h,d;if(n&&(s=xW(i,e,s,t)),i.length>80*t){c=1/0,h=1/0;let m=-1/0,g=-1/0;for(let _=t;_<r;_+=t){const S=i[_],M=i[_+1];S<c&&(c=S),M<h&&(h=M),S>m&&(m=S),M>g&&(g=M)}d=Math.max(m-c,g-h),d=d!==0?32767/d:0}return $_(s,o,t,c,h,d,0),o}function a4(i,e,t,n,r){let s;if(r===OW(i,e,t,n)>0)for(let o=e;o<t;o+=n)s=AI(o/n|0,i[o],i[o+1],s);else for(let o=t-n;o>=e;o-=n)s=AI(o/n|0,i[o],i[o+1],s);return s&&ev(s,s.next)&&(t0(s),s=s.next),s}function Ip(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(ev(t,t.next)||tr(t.prev,t,t.next)===0)){if(t0(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function $_(i,e,t,n,r,s,o){if(!i)return;!o&&s&&AW(i,n,r,s);let c=i;for(;i.prev!==i.next;){const h=i.prev,d=i.next;if(s?_W(i,n,r,s):yW(i)){e.push(h.i,i.i,d.i),t0(i),i=d.next,c=d.next;continue}if(i=d,i===c){o?o===1?(i=SW(Ip(i),e),$_(i,e,t,n,r,s,2)):o===2&&bW(i,e,t,n,r,s):$_(Ip(i),e,t,n,r,s,1);break}}}function yW(i){const e=i.prev,t=i,n=i.next;if(tr(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,c=e.y,h=t.y,d=n.y,m=Math.min(r,s,o),g=Math.min(c,h,d),_=Math.max(r,s,o),S=Math.max(c,h,d);let M=n.next;for(;M!==e;){if(M.x>=m&&M.x<=_&&M.y>=g&&M.y<=S&&c_(r,c,s,h,o,d,M.x,M.y)&&tr(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function _W(i,e,t,n){const r=i.prev,s=i,o=i.next;if(tr(r,s,o)>=0)return!1;const c=r.x,h=s.x,d=o.x,m=r.y,g=s.y,_=o.y,S=Math.min(c,h,d),M=Math.min(m,g,_),C=Math.max(c,h,d),w=Math.max(m,g,_),T=gA(S,M,e,t,n),D=gA(C,w,e,t,n);let I=i.prevZ,L=i.nextZ;for(;I&&I.z>=T&&L&&L.z<=D;){if(I.x>=S&&I.x<=C&&I.y>=M&&I.y<=w&&I!==r&&I!==o&&c_(c,m,h,g,d,_,I.x,I.y)&&tr(I.prev,I,I.next)>=0||(I=I.prevZ,L.x>=S&&L.x<=C&&L.y>=M&&L.y<=w&&L!==r&&L!==o&&c_(c,m,h,g,d,_,L.x,L.y)&&tr(L.prev,L,L.next)>=0))return!1;L=L.nextZ}for(;I&&I.z>=T;){if(I.x>=S&&I.x<=C&&I.y>=M&&I.y<=w&&I!==r&&I!==o&&c_(c,m,h,g,d,_,I.x,I.y)&&tr(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;L&&L.z<=D;){if(L.x>=S&&L.x<=C&&L.y>=M&&L.y<=w&&L!==r&&L!==o&&c_(c,m,h,g,d,_,L.x,L.y)&&tr(L.prev,L,L.next)>=0)return!1;L=L.nextZ}return!0}function SW(i,e){let t=i;do{const n=t.prev,r=t.next.next;!ev(n,r)&&l4(n,t,t.next,r)&&e0(n,r)&&e0(r,n)&&(e.push(n.i,t.i,r.i),t0(t),t0(t.next),t=i=r),t=t.next}while(t!==i);return Ip(t)}function bW(i,e,t,n,r,s){let o=i;do{let c=o.next.next;for(;c!==o.prev;){if(o.i!==c.i&&DW(o,c)){let h=c4(o,c);o=Ip(o,o.next),h=Ip(h,h.next),$_(o,e,t,n,r,s,0),$_(h,e,t,n,r,s,0);return}c=c.next}o=o.next}while(o!==i)}function xW(i,e,t,n){const r=[];for(let s=0,o=e.length;s<o;s++){const c=e[s]*n,h=s<o-1?e[s+1]*n:i.length,d=a4(i,c,h,n,!1);d===d.next&&(d.steiner=!0),r.push(RW(d))}r.sort(EW);for(let s=0;s<r.length;s++)t=TW(r[s],t);return t}function EW(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function TW(i,e){const t=MW(i,e);if(!t)return e;const n=c4(t,i);return Ip(n,n.next),Ip(t,t.next)}function MW(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,o;if(ev(i,t))return t;do{if(ev(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const g=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=n&&g>s&&(s=g,o=t.x<t.next.x?t:t.next,g===n))return o}t=t.next}while(t!==e);if(!o)return null;const c=o,h=o.x,d=o.y;let m=1/0;t=o;do{if(n>=t.x&&t.x>=h&&n!==t.x&&o4(r<d?n:s,r,h,d,r<d?s:n,r,t.x,t.y)){const g=Math.abs(r-t.y)/(n-t.x);e0(t,i)&&(g<m||g===m&&(t.x>o.x||t.x===o.x&&wW(o,t)))&&(o=t,m=g)}t=t.next}while(t!==c);return o}function wW(i,e){return tr(i.prev,i,e.prev)<0&&tr(e.next,i,i.next)<0}function AW(i,e,t,n){let r=i;do r.z===0&&(r.z=gA(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,CW(r)}function CW(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let o=n,c=0;for(let d=0;d<t&&(c++,o=o.nextZ,!!o);d++);let h=t;for(;c>0||h>0&&o;)c!==0&&(h===0||!o||n.z<=o.z)?(r=n,n=n.nextZ,c--):(r=o,o=o.nextZ,h--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=o}s.nextZ=null,t*=2}while(e>1);return i}function gA(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function RW(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function o4(i,e,t,n,r,s,o,c){return(r-o)*(e-c)>=(i-o)*(s-c)&&(i-o)*(n-c)>=(t-o)*(e-c)&&(t-o)*(s-c)>=(r-o)*(n-c)}function c_(i,e,t,n,r,s,o,c){return!(i===o&&e===c)&&o4(i,e,t,n,r,s,o,c)}function DW(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!NW(i,e)&&(e0(i,e)&&e0(e,i)&&IW(i,e)&&(tr(i.prev,i,e.prev)||tr(i,e.prev,e))||ev(i,e)&&tr(i.prev,i,i.next)>0&&tr(e.prev,e,e.next)>0)}function tr(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function ev(i,e){return i.x===e.x&&i.y===e.y}function l4(i,e,t,n){const r=Nb(tr(i,e,t)),s=Nb(tr(i,e,n)),o=Nb(tr(t,n,i)),c=Nb(tr(t,n,e));return!!(r!==s&&o!==c||r===0&&Db(i,t,e)||s===0&&Db(i,n,e)||o===0&&Db(t,i,n)||c===0&&Db(t,e,n))}function Db(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Nb(i){return i>0?1:i<0?-1:0}function NW(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&l4(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function e0(i,e){return tr(i.prev,i,i.next)<0?tr(i,e,i.next)>=0&&tr(i,i.prev,e)>=0:tr(i,e,i.prev)<0||tr(i,i.next,e)<0}function IW(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function c4(i,e){const t=vA(i.i,i.x,i.y),n=vA(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function AI(i,e,t,n){const r=vA(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function t0(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function vA(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function OW(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}class PW{static triangulate(e,t,n=2){return vW(e,t,n)}}class Fl{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return Fl.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];CI(e),RI(n,e);let o=e.length;t.forEach(CI);for(let h=0;h<t.length;h++)r.push(o),o+=t[h].length,RI(n,t[h]);const c=PW.triangulate(n,r);for(let h=0;h<c.length;h+=3)s.push(c.slice(h,h+3));return s}}function CI(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function RI(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class GT extends bn{constructor(e=new xp([new tt(.5,.5),new tt(-.5,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let c=0,h=e.length;c<h;c++){const d=e[c];o(d)}this.setAttribute("position",new Lt(r,3)),this.setAttribute("uv",new Lt(s,2)),this.computeVertexNormals();function o(c){const h=[],d=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let _=t.bevelEnabled!==void 0?t.bevelEnabled:!0,S=t.bevelThickness!==void 0?t.bevelThickness:.2,M=t.bevelSize!==void 0?t.bevelSize:S-.1,C=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const T=t.extrudePath,D=t.UVGenerator!==void 0?t.UVGenerator:LW;let I,L=!1,j,Y,k,V;T&&(I=T.getSpacedPoints(m),L=!0,_=!1,j=T.computeFrenetFrames(m,!1),Y=new re,k=new re,V=new re),_||(w=0,S=0,M=0,C=0);const N=c.extractPoints(d);let O=N.shape;const z=N.holes;if(!Fl.isClockWise(O)){O=O.reverse();for(let We=0,Ge=z.length;We<Ge;We++){const ze=z[We];Fl.isClockWise(ze)&&(z[We]=ze.reverse())}}function q(We){const ze=10000000000000001e-36;let Ve=We[0];for(let ht=1;ht<=We.length;ht++){const qe=ht%We.length,Je=We[qe],zt=Je.x-Ve.x,Qt=Je.y-Ve.y,ie=zt*zt+Qt*Qt,X=Math.max(Math.abs(Je.x),Math.abs(Je.y),Math.abs(Ve.x),Math.abs(Ve.y)),Se=ze*X*X;if(ie<=Se){We.splice(qe,1),ht--;continue}Ve=Je}}q(O),z.forEach(q);const he=z.length,fe=O;for(let We=0;We<he;We++){const Ge=z[We];O=O.concat(Ge)}function H(We,Ge,ze){return Ge||console.error("THREE.ExtrudeGeometry: vec does not exist"),We.clone().addScaledVector(Ge,ze)}const K=O.length;function J(We,Ge,ze){let Ve,ht,qe;const Je=We.x-Ge.x,zt=We.y-Ge.y,Qt=ze.x-We.x,ie=ze.y-We.y,X=Je*Je+zt*zt,Se=Je*ie-zt*Qt;if(Math.abs(Se)>Number.EPSILON){const Pe=Math.sqrt(X),$e=Math.sqrt(Qt*Qt+ie*ie),ke=Ge.x-zt/Pe,It=Ge.y+Je/Pe,ct=ze.x-ie/$e,Ct=ze.y+Qt/$e,Rt=((ct-ke)*ie-(Ct-It)*Qt)/(Je*ie-zt*Qt);Ve=ke+Je*Rt-We.x,ht=It+zt*Rt-We.y;const Ze=Ve*Ve+ht*ht;if(Ze<=2)return new tt(Ve,ht);qe=Math.sqrt(Ze/2)}else{let Pe=!1;Je>Number.EPSILON?Qt>Number.EPSILON&&(Pe=!0):Je<-Number.EPSILON?Qt<-Number.EPSILON&&(Pe=!0):Math.sign(zt)===Math.sign(ie)&&(Pe=!0),Pe?(Ve=-zt,ht=Je,qe=Math.sqrt(X)):(Ve=Je,ht=zt,qe=Math.sqrt(X/2))}return new tt(Ve/qe,ht/qe)}const oe=[];for(let We=0,Ge=fe.length,ze=Ge-1,Ve=We+1;We<Ge;We++,ze++,Ve++)ze===Ge&&(ze=0),Ve===Ge&&(Ve=0),oe[We]=J(fe[We],fe[ze],fe[Ve]);const se=[];let Z,le=oe.concat();for(let We=0,Ge=he;We<Ge;We++){const ze=z[We];Z=[];for(let Ve=0,ht=ze.length,qe=ht-1,Je=Ve+1;Ve<ht;Ve++,qe++,Je++)qe===ht&&(qe=0),Je===ht&&(Je=0),Z[Ve]=J(ze[Ve],ze[qe],ze[Je]);se.push(Z),le=le.concat(Z)}let Ce;if(w===0)Ce=Fl.triangulateShape(fe,z);else{const We=[],Ge=[];for(let ze=0;ze<w;ze++){const Ve=ze/w,ht=S*Math.cos(Ve*Math.PI/2),qe=M*Math.sin(Ve*Math.PI/2)+C;for(let Je=0,zt=fe.length;Je<zt;Je++){const Qt=H(fe[Je],oe[Je],qe);ft(Qt.x,Qt.y,-ht),Ve===0&&We.push(Qt)}for(let Je=0,zt=he;Je<zt;Je++){const Qt=z[Je];Z=se[Je];const ie=[];for(let X=0,Se=Qt.length;X<Se;X++){const Pe=H(Qt[X],Z[X],qe);ft(Pe.x,Pe.y,-ht),Ve===0&&ie.push(Pe)}Ve===0&&Ge.push(ie)}}Ce=Fl.triangulateShape(We,Ge)}const Te=Ce.length,Ye=M+C;for(let We=0;We<K;We++){const Ge=_?H(O[We],le[We],Ye):O[We];L?(k.copy(j.normals[0]).multiplyScalar(Ge.x),Y.copy(j.binormals[0]).multiplyScalar(Ge.y),V.copy(I[0]).add(k).add(Y),ft(V.x,V.y,V.z)):ft(Ge.x,Ge.y,0)}for(let We=1;We<=m;We++)for(let Ge=0;Ge<K;Ge++){const ze=_?H(O[Ge],le[Ge],Ye):O[Ge];L?(k.copy(j.normals[We]).multiplyScalar(ze.x),Y.copy(j.binormals[We]).multiplyScalar(ze.y),V.copy(I[We]).add(k).add(Y),ft(V.x,V.y,V.z)):ft(ze.x,ze.y,g/m*We)}for(let We=w-1;We>=0;We--){const Ge=We/w,ze=S*Math.cos(Ge*Math.PI/2),Ve=M*Math.sin(Ge*Math.PI/2)+C;for(let ht=0,qe=fe.length;ht<qe;ht++){const Je=H(fe[ht],oe[ht],Ve);ft(Je.x,Je.y,g+ze)}for(let ht=0,qe=z.length;ht<qe;ht++){const Je=z[ht];Z=se[ht];for(let zt=0,Qt=Je.length;zt<Qt;zt++){const ie=H(Je[zt],Z[zt],Ve);L?ft(ie.x,ie.y+I[m-1].y,I[m-1].x+ze):ft(ie.x,ie.y,g+ze)}}}xe(),Oe();function xe(){const We=r.length/3;if(_){let Ge=0,ze=K*Ge;for(let Ve=0;Ve<Te;Ve++){const ht=Ce[Ve];bt(ht[2]+ze,ht[1]+ze,ht[0]+ze)}Ge=m+w*2,ze=K*Ge;for(let Ve=0;Ve<Te;Ve++){const ht=Ce[Ve];bt(ht[0]+ze,ht[1]+ze,ht[2]+ze)}}else{for(let Ge=0;Ge<Te;Ge++){const ze=Ce[Ge];bt(ze[2],ze[1],ze[0])}for(let Ge=0;Ge<Te;Ge++){const ze=Ce[Ge];bt(ze[0]+K*m,ze[1]+K*m,ze[2]+K*m)}}n.addGroup(We,r.length/3-We,0)}function Oe(){const We=r.length/3;let Ge=0;rt(fe,Ge),Ge+=fe.length;for(let ze=0,Ve=z.length;ze<Ve;ze++){const ht=z[ze];rt(ht,Ge),Ge+=ht.length}n.addGroup(We,r.length/3-We,1)}function rt(We,Ge){let ze=We.length;for(;--ze>=0;){const Ve=ze;let ht=ze-1;ht<0&&(ht=We.length-1);for(let qe=0,Je=m+w*2;qe<Je;qe++){const zt=K*qe,Qt=K*(qe+1),ie=Ge+Ve+zt,X=Ge+ht+zt,Se=Ge+ht+Qt,Pe=Ge+Ve+Qt;en(ie,X,Se,Pe)}}}function ft(We,Ge,ze){h.push(We),h.push(Ge),h.push(ze)}function bt(We,Ge,ze){Cn(We),Cn(Ge),Cn(ze);const Ve=r.length/3,ht=D.generateTopUV(n,r,Ve-3,Ve-2,Ve-1);ae(ht[0]),ae(ht[1]),ae(ht[2])}function en(We,Ge,ze,Ve){Cn(We),Cn(Ge),Cn(Ve),Cn(Ge),Cn(ze),Cn(Ve);const ht=r.length/3,qe=D.generateSideWallUV(n,r,ht-6,ht-3,ht-2,ht-1);ae(qe[0]),ae(qe[1]),ae(qe[3]),ae(qe[1]),ae(qe[2]),ae(qe[3])}function Cn(We){r.push(h[We*3+0]),r.push(h[We*3+1]),r.push(h[We*3+2])}function ae(We){s.push(We.x),s.push(We.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return UW(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const c=t[e.shapes[s]];n.push(c)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new DE[r.type]().fromJSON(r)),new GT(n,e.options)}}const LW={generateTopUV:function(i,e,t,n,r){const s=e[t*3],o=e[t*3+1],c=e[n*3],h=e[n*3+1],d=e[r*3],m=e[r*3+1];return[new tt(s,o),new tt(c,h),new tt(d,m)]},generateSideWallUV:function(i,e,t,n,r,s){const o=e[t*3],c=e[t*3+1],h=e[t*3+2],d=e[n*3],m=e[n*3+1],g=e[n*3+2],_=e[r*3],S=e[r*3+1],M=e[r*3+2],C=e[s*3],w=e[s*3+1],T=e[s*3+2];return Math.abs(c-m)<Math.abs(o-d)?[new tt(o,1-h),new tt(d,1-g),new tt(_,1-M),new tt(C,1-T)]:[new tt(c,1-h),new tt(m,1-g),new tt(S,1-M),new tt(w,1-T)]}};function UW(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class jT extends $f{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jT(e.radius,e.detail)}}class qT extends bn{constructor(e=[new tt(0,-.5),new tt(.5,0),new tt(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=tn(r,0,Math.PI*2);const s=[],o=[],c=[],h=[],d=[],m=1/t,g=new re,_=new tt,S=new re,M=new re,C=new re;let w=0,T=0;for(let D=0;D<=e.length-1;D++)switch(D){case 0:w=e[D+1].x-e[D].x,T=e[D+1].y-e[D].y,S.x=T*1,S.y=-w,S.z=T*0,C.copy(S),S.normalize(),h.push(S.x,S.y,S.z);break;case e.length-1:h.push(C.x,C.y,C.z);break;default:w=e[D+1].x-e[D].x,T=e[D+1].y-e[D].y,S.x=T*1,S.y=-w,S.z=T*0,M.copy(S),S.x+=C.x,S.y+=C.y,S.z+=C.z,S.normalize(),h.push(S.x,S.y,S.z),C.copy(M)}for(let D=0;D<=t;D++){const I=n+D*m*r,L=Math.sin(I),j=Math.cos(I);for(let Y=0;Y<=e.length-1;Y++){g.x=e[Y].x*L,g.y=e[Y].y,g.z=e[Y].x*j,o.push(g.x,g.y,g.z),_.x=D/t,_.y=Y/(e.length-1),c.push(_.x,_.y);const k=h[3*Y+0]*L,V=h[3*Y+1],N=h[3*Y+0]*j;d.push(k,V,N)}}for(let D=0;D<t;D++)for(let I=0;I<e.length-1;I++){const L=I+D*e.length,j=L,Y=L+e.length,k=L+e.length+1,V=L+1;s.push(j,Y,V),s.push(k,V,Y)}this.setIndex(s),this.setAttribute("position",new Lt(o,3)),this.setAttribute("uv",new Lt(c,2)),this.setAttribute("normal",new Lt(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qT(e.points,e.segments,e.phiStart,e.phiLength)}}class A0 extends $f{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new A0(e.radius,e.detail)}}class Mv extends bn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,c=Math.floor(n),h=Math.floor(r),d=c+1,m=h+1,g=e/c,_=t/h,S=[],M=[],C=[],w=[];for(let T=0;T<m;T++){const D=T*_-o;for(let I=0;I<d;I++){const L=I*g-s;M.push(L,-D,0),C.push(0,0,1),w.push(I/c),w.push(1-T/h)}}for(let T=0;T<h;T++)for(let D=0;D<c;D++){const I=D+d*T,L=D+d*(T+1),j=D+1+d*(T+1),Y=D+1+d*T;S.push(I,L,Y),S.push(L,j,Y)}this.setIndex(S),this.setAttribute("position",new Lt(M,3)),this.setAttribute("normal",new Lt(C,3)),this.setAttribute("uv",new Lt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mv(e.width,e.height,e.widthSegments,e.heightSegments)}}class YT extends bn{constructor(e=.5,t=1,n=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const c=[],h=[],d=[],m=[];let g=e;const _=(t-e)/r,S=new re,M=new tt;for(let C=0;C<=r;C++){for(let w=0;w<=n;w++){const T=s+w/n*o;S.x=g*Math.cos(T),S.y=g*Math.sin(T),h.push(S.x,S.y,S.z),d.push(0,0,1),M.x=(S.x/t+1)/2,M.y=(S.y/t+1)/2,m.push(M.x,M.y)}g+=_}for(let C=0;C<r;C++){const w=C*(n+1);for(let T=0;T<n;T++){const D=T+w,I=D,L=D+n+1,j=D+n+2,Y=D+1;c.push(I,L,Y),c.push(L,j,Y)}}this.setIndex(c),this.setAttribute("position",new Lt(h,3)),this.setAttribute("normal",new Lt(d,3)),this.setAttribute("uv",new Lt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new YT(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class WT extends bn{constructor(e=new xp([new tt(0,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],o=[];let c=0,h=0;if(Array.isArray(e)===!1)d(e);else for(let m=0;m<e.length;m++)d(e[m]),this.addGroup(c,h,m),c+=h,h=0;this.setIndex(n),this.setAttribute("position",new Lt(r,3)),this.setAttribute("normal",new Lt(s,3)),this.setAttribute("uv",new Lt(o,2));function d(m){const g=r.length/3,_=m.extractPoints(t);let S=_.shape;const M=_.holes;Fl.isClockWise(S)===!1&&(S=S.reverse());for(let w=0,T=M.length;w<T;w++){const D=M[w];Fl.isClockWise(D)===!0&&(M[w]=D.reverse())}const C=Fl.triangulateShape(S,M);for(let w=0,T=M.length;w<T;w++){const D=M[w];S=S.concat(D)}for(let w=0,T=S.length;w<T;w++){const D=S[w];r.push(D.x,D.y,0),s.push(0,0,1),o.push(D.x,D.y)}for(let w=0,T=C.length;w<T;w++){const D=C[w],I=D[0]+g,L=D[1]+g,j=D[2]+g;n.push(I,L,j),h+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return kW(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];n.push(o)}return new WT(n,e.curveSegments)}}function kW(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class C0 extends bn{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:c},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const h=Math.min(o+c,Math.PI);let d=0;const m=[],g=new re,_=new re,S=[],M=[],C=[],w=[];for(let T=0;T<=n;T++){const D=[],I=T/n;let L=0;T===0&&o===0?L=.5/t:T===n&&h===Math.PI&&(L=-.5/t);for(let j=0;j<=t;j++){const Y=j/t;g.x=-e*Math.cos(r+Y*s)*Math.sin(o+I*c),g.y=e*Math.cos(o+I*c),g.z=e*Math.sin(r+Y*s)*Math.sin(o+I*c),M.push(g.x,g.y,g.z),_.copy(g).normalize(),C.push(_.x,_.y,_.z),w.push(Y+L,1-I),D.push(d++)}m.push(D)}for(let T=0;T<n;T++)for(let D=0;D<t;D++){const I=m[T][D+1],L=m[T][D],j=m[T+1][D],Y=m[T+1][D+1];(T!==0||o>0)&&S.push(I,L,Y),(T!==n-1||h<Math.PI)&&S.push(L,j,Y)}this.setIndex(S),this.setAttribute("position",new Lt(M,3)),this.setAttribute("normal",new Lt(C,3)),this.setAttribute("uv",new Lt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new C0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class XT extends $f{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new XT(e.radius,e.detail)}}class KT extends bn{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const o=[],c=[],h=[],d=[],m=new re,g=new re,_=new re;for(let S=0;S<=n;S++)for(let M=0;M<=r;M++){const C=M/r*s,w=S/n*Math.PI*2;g.x=(e+t*Math.cos(w))*Math.cos(C),g.y=(e+t*Math.cos(w))*Math.sin(C),g.z=t*Math.sin(w),c.push(g.x,g.y,g.z),m.x=e*Math.cos(C),m.y=e*Math.sin(C),_.subVectors(g,m).normalize(),h.push(_.x,_.y,_.z),d.push(M/r),d.push(S/n)}for(let S=1;S<=n;S++)for(let M=1;M<=r;M++){const C=(r+1)*S+M-1,w=(r+1)*(S-1)+M-1,T=(r+1)*(S-1)+M,D=(r+1)*S+M;o.push(C,w,D),o.push(w,T,D)}this.setIndex(o),this.setAttribute("position",new Lt(c,3)),this.setAttribute("normal",new Lt(h,3)),this.setAttribute("uv",new Lt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new KT(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class QT extends bn{constructor(e=1,t=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);const c=[],h=[],d=[],m=[],g=new re,_=new re,S=new re,M=new re,C=new re,w=new re,T=new re;for(let I=0;I<=n;++I){const L=I/n*s*Math.PI*2;D(L,s,o,e,S),D(L+.01,s,o,e,M),w.subVectors(M,S),T.addVectors(M,S),C.crossVectors(w,T),T.crossVectors(C,w),C.normalize(),T.normalize();for(let j=0;j<=r;++j){const Y=j/r*Math.PI*2,k=-t*Math.cos(Y),V=t*Math.sin(Y);g.x=S.x+(k*T.x+V*C.x),g.y=S.y+(k*T.y+V*C.y),g.z=S.z+(k*T.z+V*C.z),h.push(g.x,g.y,g.z),_.subVectors(g,S).normalize(),d.push(_.x,_.y,_.z),m.push(I/n),m.push(j/r)}}for(let I=1;I<=n;I++)for(let L=1;L<=r;L++){const j=(r+1)*(I-1)+(L-1),Y=(r+1)*I+(L-1),k=(r+1)*I+L,V=(r+1)*(I-1)+L;c.push(j,Y,V),c.push(Y,k,V)}this.setIndex(c),this.setAttribute("position",new Lt(h,3)),this.setAttribute("normal",new Lt(d,3)),this.setAttribute("uv",new Lt(m,2));function D(I,L,j,Y,k){const V=Math.cos(I),N=Math.sin(I),O=j/L*I,z=Math.cos(O);k.x=Y*(2+z)*.5*V,k.y=Y*(2+z)*N*.5,k.z=Y*Math.sin(O)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new QT(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class ZT extends bn{constructor(e=new pR(new re(-1,-1,0),new re(-1,1,0),new re(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const c=new re,h=new re,d=new tt;let m=new re;const g=[],_=[],S=[],M=[];C(),this.setIndex(M),this.setAttribute("position",new Lt(g,3)),this.setAttribute("normal",new Lt(_,3)),this.setAttribute("uv",new Lt(S,2));function C(){for(let I=0;I<t;I++)w(I);w(s===!1?t:0),D(),T()}function w(I){m=e.getPointAt(I/t,m);const L=o.normals[I],j=o.binormals[I];for(let Y=0;Y<=r;Y++){const k=Y/r*Math.PI*2,V=Math.sin(k),N=-Math.cos(k);h.x=N*L.x+V*j.x,h.y=N*L.y+V*j.y,h.z=N*L.z+V*j.z,h.normalize(),_.push(h.x,h.y,h.z),c.x=m.x+n*h.x,c.y=m.y+n*h.y,c.z=m.z+n*h.z,g.push(c.x,c.y,c.z)}}function T(){for(let I=1;I<=t;I++)for(let L=1;L<=r;L++){const j=(r+1)*(I-1)+(L-1),Y=(r+1)*I+(L-1),k=(r+1)*I+L,V=(r+1)*(I-1)+L;M.push(j,Y,V),M.push(Y,k,V)}}function D(){for(let I=0;I<=t;I++)for(let L=0;L<=r;L++)d.x=I/t,d.y=L/r,S.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new ZT(new DE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class u4 extends bn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new re,s=new re;if(e.index!==null){const o=e.attributes.position,c=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:c.count,materialIndex:0}]);for(let d=0,m=h.length;d<m;++d){const g=h[d],_=g.start,S=g.count;for(let M=_,C=_+S;M<C;M+=3)for(let w=0;w<3;w++){const T=c.getX(M+w),D=c.getX(M+(w+1)%3);r.fromBufferAttribute(o,T),s.fromBufferAttribute(o,D),DI(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let c=0,h=o.count/3;c<h;c++)for(let d=0;d<3;d++){const m=3*c+d,g=3*c+(d+1)%3;r.fromBufferAttribute(o,m),s.fromBufferAttribute(o,g),DI(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Lt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function DI(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var NI=Object.freeze({__proto__:null,BoxGeometry:Yp,CapsuleGeometry:BT,CircleGeometry:zT,ConeGeometry:w0,CylinderGeometry:M0,DodecahedronGeometry:FT,EdgesGeometry:e4,ExtrudeGeometry:GT,IcosahedronGeometry:jT,LatheGeometry:qT,OctahedronGeometry:A0,PlaneGeometry:Mv,PolyhedronGeometry:$f,RingGeometry:YT,ShapeGeometry:WT,SphereGeometry:C0,TetrahedronGeometry:XT,TorusGeometry:KT,TorusKnotGeometry:QT,TubeGeometry:ZT,WireframeGeometry:u4});class h4 extends ta{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new At(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class f4 extends Ql{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class gR extends ta{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new At(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zf,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new wo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class d4 extends gR{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new tt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return tn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new At(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new At(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new At(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class p4 extends ta{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new At(16777215),this.specular=new At(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zf,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new wo,this.combine=x0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class m4 extends ta{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new At(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zf,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class g4 extends ta{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zf,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class v4 extends ta{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new At(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zf,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new wo,this.combine=x0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class vR extends ta{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ak,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class yR extends ta{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class y4 extends ta{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new At(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zf,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _4 extends Da{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function mp(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function S4(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function b4(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function yA(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const c=t[s]*e;for(let h=0;h!==e;++h)r[o++]=i[c+h]}return r}function _R(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push(...o)),s=i[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[r++];while(s!==void 0)}function VW(i,e,t,n,r=30){const s=i.clone();s.name=e;const o=[];for(let h=0;h<s.tracks.length;++h){const d=s.tracks[h],m=d.getValueSize(),g=[],_=[];for(let S=0;S<d.times.length;++S){const M=d.times[S]*r;if(!(M<t||M>=n)){g.push(d.times[S]);for(let C=0;C<m;++C)_.push(d.values[S*m+C])}}g.length!==0&&(d.times=mp(g,d.times.constructor),d.values=mp(_,d.values.constructor),o.push(d))}s.tracks=o;let c=1/0;for(let h=0;h<s.tracks.length;++h)c>s.tracks[h].times[0]&&(c=s.tracks[h].times[0]);for(let h=0;h<s.tracks.length;++h)s.tracks[h].shift(-1*c);return s.resetDuration(),s}function BW(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let o=0;o<r;++o){const c=t.tracks[o],h=c.ValueTypeName;if(h==="bool"||h==="string")continue;const d=i.tracks.find(function(T){return T.name===c.name&&T.ValueTypeName===h});if(d===void 0)continue;let m=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let _=0;const S=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=S/3);const M=c.times.length-1;let C;if(s<=c.times[0]){const T=m,D=g-m;C=c.values.slice(T,D)}else if(s>=c.times[M]){const T=M*g+m,D=T+g-m;C=c.values.slice(T,D)}else{const T=c.createInterpolant(),D=m,I=g-m;T.evaluate(s),C=T.resultBuffer.slice(D,I)}h==="quaternion"&&new Ja().fromArray(C).normalize().conjugate().toArray(C);const w=d.times.length;for(let T=0;T<w;++T){const D=T*S+_;if(h==="quaternion")Ja.multiplyQuaternionsFlat(d.values,D,C,0,d.values,D);else{const I=S-_*2;for(let L=0;L<I;++L)d.values[D+L]-=C[L]}}}return i.blendMode=JC,i}class zW{static convertArray(e,t){return mp(e,t)}static isTypedArray(e){return S4(e)}static getKeyframeOrder(e){return b4(e)}static sortedArray(e,t,n){return yA(e,t,n)}static flattenJSON(e,t,n,r){_R(e,t,n,r)}static subclip(e,t,n,r,s=30){return VW(e,t,n,r,s)}static makeClipAdditive(e,t=0,n=e,r=30){return BW(e,t,n,r)}}class R0{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let c=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=s)){const c=t[1];e<c&&(n=2,s=c);for(let h=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===h)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const c=n+o>>>1;e<t[c]?o=c:n=c+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class x4 extends R0{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:dp,endingEnd:dp}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,c=r[s],h=r[o];if(c===void 0)switch(this.getSettings_().endingStart){case pp:s=e,c=2*t-n;break;case X_:s=r.length-2,c=t+r[s]-r[s+1];break;default:s=e,c=n}if(h===void 0)switch(this.getSettings_().endingEnd){case pp:o=e,h=2*n-t;break;case X_:o=1,h=n+r[1]-r[0];break;default:o=e-1,h=t}const d=(n-t)*.5,m=this.valueSize;this._weightPrev=d/(t-c),this._weightNext=d/(h-n),this._offsetPrev=s*m,this._offsetNext=o*m}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,c=this.valueSize,h=e*c,d=h-c,m=this._offsetPrev,g=this._offsetNext,_=this._weightPrev,S=this._weightNext,M=(n-t)/(r-t),C=M*M,w=C*M,T=-_*w+2*_*C-_*M,D=(1+_)*w+(-1.5-2*_)*C+(-.5+_)*M+1,I=(-1-S)*w+(1.5+S)*C+.5*M,L=S*w-S*C;for(let j=0;j!==c;++j)s[j]=T*o[m+j]+D*o[d+j]+I*o[h+j]+L*o[g+j];return s}}class SR extends R0{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,c=this.valueSize,h=e*c,d=h-c,m=(n-t)/(r-t),g=1-m;for(let _=0;_!==c;++_)s[_]=o[d+_]*g+o[h+_]*m;return s}}class E4 extends R0{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class sl{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=mp(t,this.TimeBufferType),this.values=mp(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:mp(e.times,Array),values:mp(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new E4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new SR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new x4(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case W_:t=this.InterpolantFactoryMethodDiscrete;break;case AE:t=this.InterpolantFactoryMethodLinear;break;case dx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return W_;case this.InterpolantFactoryMethodLinear:return AE;case this.InterpolantFactoryMethodSmooth:return dx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const c=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*c,o*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let c=0;c!==s;c++){const h=n[c];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,h),e=!1;break}if(o!==null&&o>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,h,o),e=!1;break}o=h}if(r!==void 0&&S4(r))for(let c=0,h=r.length;c!==h;++c){const d=r[c];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===dx,s=e.length-1;let o=1;for(let c=1;c<s;++c){let h=!1;const d=e[c],m=e[c+1];if(d!==m&&(c!==1||d!==e[0]))if(r)h=!0;else{const g=c*n,_=g-n,S=g+n;for(let M=0;M!==n;++M){const C=t[g+M];if(C!==t[_+M]||C!==t[S+M]){h=!0;break}}}if(h){if(c!==o){e[o]=e[c];const g=c*n,_=o*n;for(let S=0;S!==n;++S)t[_+S]=t[g+S]}++o}}if(s>0){e[o]=e[s];for(let c=s*n,h=o*n,d=0;d!==n;++d)t[h+d]=t[c+d];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}sl.prototype.ValueTypeName="";sl.prototype.TimeBufferType=Float32Array;sl.prototype.ValueBufferType=Float32Array;sl.prototype.DefaultInterpolation=AE;class Wp extends sl{constructor(e,t,n){super(e,t,n)}}Wp.prototype.ValueTypeName="bool";Wp.prototype.ValueBufferType=Array;Wp.prototype.DefaultInterpolation=W_;Wp.prototype.InterpolantFactoryMethodLinear=void 0;Wp.prototype.InterpolantFactoryMethodSmooth=void 0;class bR extends sl{constructor(e,t,n,r){super(e,t,n,r)}}bR.prototype.ValueTypeName="color";class n0 extends sl{constructor(e,t,n,r){super(e,t,n,r)}}n0.prototype.ValueTypeName="number";class T4 extends R0{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,c=this.valueSize,h=(n-t)/(r-t);let d=e*c;for(let m=d+c;d!==m;d+=4)Ja.slerpFlat(s,0,o,d-c,o,d,h);return s}}class D0 extends sl{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new T4(this.times,this.values,this.getValueSize(),e)}}D0.prototype.ValueTypeName="quaternion";D0.prototype.InterpolantFactoryMethodSmooth=void 0;class Xp extends sl{constructor(e,t,n){super(e,t,n)}}Xp.prototype.ValueTypeName="string";Xp.prototype.ValueBufferType=Array;Xp.prototype.DefaultInterpolation=W_;Xp.prototype.InterpolantFactoryMethodLinear=void 0;Xp.prototype.InterpolantFactoryMethodSmooth=void 0;class i0 extends sl{constructor(e,t,n,r){super(e,t,n,r)}}i0.prototype.ValueTypeName="vector";class r0{constructor(e="",t=-1,n=[],r=RT){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=To(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,c=n.length;o!==c;++o)t.push(HW(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,o=n.length;s!==o;++s)t.push(sl.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let c=0;c<s;c++){let h=[],d=[];h.push((c+s-1)%s,c,(c+1)%s),d.push(0,1,0);const m=b4(h);h=yA(h,1,m),d=yA(d,1,m),!r&&h[0]===0&&(h.push(s),d.push(d[0])),o.push(new n0(".morphTargetInfluences["+t[c].name+"]",h,d).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let c=0,h=e.length;c<h;c++){const d=e[c],m=d.name.match(s);if(m&&m.length>1){const g=m[1];let _=r[g];_||(r[g]=_=[]),_.push(d)}}const o=[];for(const c in r)o.push(this.CreateFromMorphTargetSequence(c,r[c],t,n));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(g,_,S,M,C){if(S.length!==0){const w=[],T=[];_R(S,w,T,M),w.length!==0&&C.push(new g(_,w,T))}},r=[],s=e.name||"default",o=e.fps||30,c=e.blendMode;let h=e.length||-1;const d=e.hierarchy||[];for(let g=0;g<d.length;g++){const _=d[g].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const S={};let M;for(M=0;M<_.length;M++)if(_[M].morphTargets)for(let C=0;C<_[M].morphTargets.length;C++)S[_[M].morphTargets[C]]=-1;for(const C in S){const w=[],T=[];for(let D=0;D!==_[M].morphTargets.length;++D){const I=_[M];w.push(I.time),T.push(I.morphTarget===C?1:0)}r.push(new n0(".morphTargetInfluence["+C+"]",w,T))}h=S.length*o}else{const S=".bones["+t[g].name+"]";n(i0,S+".position",_,"pos",r),n(D0,S+".quaternion",_,"rot",r),n(i0,S+".scale",_,"scl",r)}}return r.length===0?null:new this(s,h,r,c)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function FW(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return n0;case"vector":case"vector2":case"vector3":case"vector4":return i0;case"color":return bR;case"quaternion":return D0;case"bool":case"boolean":return Wp;case"string":return Xp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function HW(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=FW(i.type);if(i.times===void 0){const t=[],n=[];_R(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const qc={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class xR{constructor(e,t,n){const r=this;let s=!1,o=0,c=0,h;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.abortController=new AbortController,this.itemStart=function(m){c++,s===!1&&r.onStart!==void 0&&r.onStart(m,o,c),s=!0},this.itemEnd=function(m){o++,r.onProgress!==void 0&&r.onProgress(m,o,c),o===c&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(m){r.onError!==void 0&&r.onError(m)},this.resolveURL=function(m){return h?h(m):m},this.setURLModifier=function(m){return h=m,this},this.addHandler=function(m,g){return d.push(m,g),this},this.removeHandler=function(m){const g=d.indexOf(m);return g!==-1&&d.splice(g,2),this},this.getHandler=function(m){for(let g=0,_=d.length;g<_;g+=2){const S=d[g],M=d[g+1];if(S.global&&(S.lastIndex=0),S.test(m))return M}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const M4=new xR;class $a{constructor(e){this.manager=e!==void 0?e:M4,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}$a.DEFAULT_MATERIAL_NAME="__DEFAULT";const Wu={};class GW extends Error{constructor(e,t){super(e),this.response=t}}class gh extends $a{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=qc.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Wu[e]!==void 0){Wu[e].push({onLoad:t,onProgress:n,onError:r});return}Wu[e]=[],Wu[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),c=this.mimeType,h=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const m=Wu[e],g=d.body.getReader(),_=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),S=_?parseInt(_):0,M=S!==0;let C=0;const w=new ReadableStream({start(T){D();function D(){g.read().then(({done:I,value:L})=>{if(I)T.close();else{C+=L.byteLength;const j=new ProgressEvent("progress",{lengthComputable:M,loaded:C,total:S});for(let Y=0,k=m.length;Y<k;Y++){const V=m[Y];V.onProgress&&V.onProgress(j)}T.enqueue(L),D()}},I=>{T.error(I)})}}});return new Response(w)}else throw new GW(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(h){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(m=>new DOMParser().parseFromString(m,c));case"json":return d.json();default:if(c==="")return d.text();{const g=/charset="?([^;"\s]*)"?/i.exec(c),_=g&&g[1]?g[1].toLowerCase():void 0,S=new TextDecoder(_);return d.arrayBuffer().then(M=>S.decode(M))}}}).then(d=>{qc.add(`file:${e}`,d);const m=Wu[e];delete Wu[e];for(let g=0,_=m.length;g<_;g++){const S=m[g];S.onLoad&&S.onLoad(d)}}).catch(d=>{const m=Wu[e];if(m===void 0)throw this.manager.itemError(e),d;delete Wu[e];for(let g=0,_=m.length;g<_;g++){const S=m[g];S.onError&&S.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class jW extends $a{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new gh(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=r0.parse(e[n]);t.push(r)}return t}}class qW extends $a{constructor(e){super(e)}load(e,t,n,r){const s=this,o=[],c=new VT,h=new gh(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(s.withCredentials);let d=0;function m(g){h.load(e[g],function(_){const S=s.parse(_,!0);o[g]={width:S.width,height:S.height,format:S.format,mipmaps:S.mipmaps},d+=1,d===6&&(S.mipmapCount===1&&(c.minFilter=Hr),c.image=o,c.format=S.format,c.needsUpdate=!0,t&&t(c))},n,r)}if(Array.isArray(e))for(let g=0,_=e.length;g<_;++g)m(g);else h.load(e,function(g){const _=s.parse(g,!0);if(_.isCubemap){const S=_.mipmaps.length/_.mipmapCount;for(let M=0;M<S;M++){o[M]={mipmaps:[]};for(let C=0;C<_.mipmapCount;C++)o[M].mipmaps.push(_.mipmaps[M*_.mipmapCount+C]),o[M].format=_.format,o[M].width=_.width,o[M].height=_.height}c.image=o}else c.image.width=_.width,c.image.height=_.height,c.mipmaps=_.mipmaps;_.mipmapCount===1&&(c.minFilter=Hr),c.format=_.format,c.needsUpdate=!0,t&&t(c)},n,r);return c}}const cg=new WeakMap;class s0 extends $a{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=qc.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let g=cg.get(o);g===void 0&&(g=[],cg.set(o,g)),g.push({onLoad:t,onError:r})}return o}const c=Z_("img");function h(){m(),t&&t(this);const g=cg.get(this)||[];for(let _=0;_<g.length;_++){const S=g[_];S.onLoad&&S.onLoad(this)}cg.delete(this),s.manager.itemEnd(e)}function d(g){m(),r&&r(g),qc.remove(`image:${e}`);const _=cg.get(this)||[];for(let S=0;S<_.length;S++){const M=_[S];M.onError&&M.onError(g)}cg.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function m(){c.removeEventListener("load",h,!1),c.removeEventListener("error",d,!1)}return c.addEventListener("load",h,!1),c.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),qc.add(`image:${e}`,c),s.manager.itemStart(e),c.src=e,c}}class YW extends $a{constructor(e){super(e)}load(e,t,n,r){const s=new T0;s.colorSpace=Qs;const o=new s0(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let c=0;function h(d){o.load(e[d],function(m){s.images[d]=m,c++,c===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let d=0;d<e.length;++d)h(d);return s}}class WW extends $a{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new tu,c=new gh(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(s.withCredentials),c.load(e,function(h){let d;try{d=s.parse(h)}catch(m){if(r!==void 0)r(m);else{console.error(m);return}}d.image!==void 0?o.image=d.image:d.data!==void 0&&(o.image.width=d.width,o.image.height=d.height,o.image.data=d.data),o.wrapS=d.wrapS!==void 0?d.wrapS:tl,o.wrapT=d.wrapT!==void 0?d.wrapT:tl,o.magFilter=d.magFilter!==void 0?d.magFilter:Hr,o.minFilter=d.minFilter!==void 0?d.minFilter:Hr,o.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(o.colorSpace=d.colorSpace),d.flipY!==void 0&&(o.flipY=d.flipY),d.format!==void 0&&(o.format=d.format),d.type!==void 0&&(o.type=d.type),d.mipmaps!==void 0&&(o.mipmaps=d.mipmaps,o.minFilter=jc),d.mipmapCount===1&&(o.minFilter=Hr),d.generateMipmaps!==void 0&&(o.generateMipmaps=d.generateMipmaps),o.needsUpdate=!0,t&&t(o,d)},n,r),o}}class XW extends $a{constructor(e){super(e)}load(e,t,n,r){const s=new ur,o=new s0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(c){s.image=c,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class ed extends ni{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new At(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class w4 extends ed{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.groundColor=new At(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Ww=new sn,II=new re,OI=new re;class ER{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tt(512,512),this.mapType=il,this.map=null,this.mapPass=null,this.matrix=new sn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tv,this._frameExtents=new tt(1,1),this._viewportCount=1,this._viewports=[new ei(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;II.setFromMatrixPosition(e.matrixWorld),t.position.copy(II),OI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(OI),t.updateMatrixWorld(),Ww.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ww,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Ww)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class KW extends ER{constructor(){super(new rs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=Qg*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class A4 extends ed{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.target=new ni,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new KW}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const PI=new sn,$y=new re,Xw=new re;class QW extends ER{constructor(){super(new rs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new tt(4,2),this._viewportCount=6,this._viewports=[new ei(2,1,1,1),new ei(0,1,1,1),new ei(3,1,1,1),new ei(1,1,1,1),new ei(3,0,1,1),new ei(1,0,1,1)],this._cubeDirections=[new re(1,0,0),new re(-1,0,0),new re(0,0,1),new re(0,0,-1),new re(0,1,0),new re(0,-1,0)],this._cubeUps=[new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,0,1),new re(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),$y.setFromMatrixPosition(e.matrixWorld),n.position.copy($y),Xw.copy(n.position),Xw.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Xw),n.updateMatrixWorld(),r.makeTranslation(-$y.x,-$y.y,-$y.z),PI.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(PI,n.coordinateSystem,n.reversedDepth)}}class C4 extends ed{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new QW}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class N0 extends IT{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,c=r+t,h=r-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,c-=m*this.view.offsetY,h=c-m*this.view.height}this.projectionMatrix.makeOrthographic(s,o,c,h,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class ZW extends ER{constructor(){super(new N0(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class R4 extends ed{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.target=new ni,this.shadow=new ZW}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class D4 extends ed{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class N4 extends ed{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class I4{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new re)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class O4 extends ed{constructor(e=new I4,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class JT extends $a{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,o=new gh(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new At().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=n(o.value);break;case"c":r.uniforms[s].value=new At().setHex(o.value);break;case"v2":r.uniforms[s].value=new tt().fromArray(o.value);break;case"v3":r.uniforms[s].value=new re().fromArray(o.value);break;case"v4":r.uniforms[s].value=new ei().fromArray(o.value);break;case"m3":r.uniforms[s].value=new yn().fromArray(o.value);break;case"m4":r.uniforms[s].value=new sn().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new tt().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new tt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return JT.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:h4,SpriteMaterial:sR,RawShaderMaterial:f4,ShaderMaterial:Ql,PointsMaterial:oR,MeshPhysicalMaterial:d4,MeshStandardMaterial:gR,MeshPhongMaterial:p4,MeshToonMaterial:m4,MeshNormalMaterial:g4,MeshLambertMaterial:v4,MeshDepthMaterial:vR,MeshDistanceMaterial:yR,MeshBasicMaterial:Jf,MeshMatcapMaterial:y4,LineDashedMaterial:_4,LineBasicMaterial:Da,Material:ta};return new t[e]}}class _A{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class P4 extends bn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class L4 extends $a{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new gh(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(S,M){if(t[M]!==void 0)return t[M];const w=S.interleavedBuffers[M],T=s(S,w.buffer),D=Mg(w.type,T),I=new LT(D,w.stride);return I.uuid=w.uuid,t[M]=I,I}function s(S,M){if(n[M]!==void 0)return n[M];const w=S.arrayBuffers[M],T=new Uint32Array(w).buffer;return n[M]=T,T}const o=e.isInstancedBufferGeometry?new P4:new bn,c=e.data.index;if(c!==void 0){const S=Mg(c.type,c.array);o.setIndex(new Mi(S,1))}const h=e.data.attributes;for(const S in h){const M=h[S];let C;if(M.isInterleavedBufferAttribute){const w=r(e.data,M.data);C=new Np(w,M.itemSize,M.offset,M.normalized)}else{const w=Mg(M.type,M.array),T=M.isInstancedBufferAttribute?$g:Mi;C=new T(w,M.itemSize,M.normalized)}M.name!==void 0&&(C.name=M.name),M.usage!==void 0&&C.setUsage(M.usage),o.setAttribute(S,C)}const d=e.data.morphAttributes;if(d)for(const S in d){const M=d[S],C=[];for(let w=0,T=M.length;w<T;w++){const D=M[w];let I;if(D.isInterleavedBufferAttribute){const L=r(e.data,D.data);I=new Np(L,D.itemSize,D.offset,D.normalized)}else{const L=Mg(D.type,D.array);I=new Mi(L,D.itemSize,D.normalized)}D.name!==void 0&&(I.name=D.name),C.push(I)}o.morphAttributes[S]=C}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let S=0,M=g.length;S!==M;++S){const C=g[S];o.addGroup(C.start,C.count,C.materialIndex)}const _=e.data.boundingSphere;return _!==void 0&&(o.boundingSphere=new Es().fromJSON(_)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class JW extends $a{constructor(e){super(e)}load(e,t,n,r){const s=this,o=this.path===""?_A.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const c=new gh(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){let d=null;try{d=JSON.parse(h)}catch(g){r!==void 0&&r(g),console.error("THREE:ObjectLoader: Can't parse "+e+".",g.message);return}const m=d.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(d,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?_A.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new gh(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),c=JSON.parse(o),h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(c)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(d)}),c=this.parseTextures(e.textures,o),h=this.parseMaterials(e.materials,c),d=this.parseObject(e.object,s,h,c,n),m=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,m),this.bindLightTargets(d),t!==void 0){let g=!1;for(const _ in o)if(o[_].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,o),h=this.parseObject(e.object,r,c,o,t),d=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,d),this.bindLightTargets(h),h}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new xp().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const c=new UT().fromJSON(e[s],r);n[c.uuid]=c}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new L4;for(let s=0,o=e.length;s<o;s++){let c;const h=e[s];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":c=r.parse(h);break;default:h.type in NI?c=NI[h.type].fromJSON(h,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${h.type}"`)}c.uuid=h.uuid,h.name!==void 0&&(c.name=h.name),h.userData!==void 0&&(c.userData=h.userData),n[h.uuid]=c}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new JT;s.setTextures(t);for(let o=0,c=e.length;o<c;o++){const h=e[o];n[h.uuid]===void 0&&(n[h.uuid]=s.parse(h)),r[h.uuid]=n[h.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=r0.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function o(h){return n.manager.itemStart(h),s.load(h,function(){n.manager.itemEnd(h)},void 0,function(){n.manager.itemError(h),n.manager.itemEnd(h)})}function c(h){if(typeof h=="string"){const d=h,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return o(m)}else return h.data?{data:Mg(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new xR(t);s=new s0(h),s.setCrossOrigin(this.crossOrigin);for(let d=0,m=e.length;d<m;d++){const g=e[d],_=g.url;if(Array.isArray(_)){const S=[];for(let M=0,C=_.length;M<C;M++){const w=_[M],T=c(w);T!==null&&(T instanceof HTMLImageElement?S.push(T):S.push(new tu(T.data,T.width,T.height)))}r[g.uuid]=new Rf(S)}else{const S=c(g.url);r[g.uuid]=new Rf(S)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(o){if(typeof o=="string"){const c=o,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await r.loadAsync(h)}else return o.data?{data:Mg(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new s0(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,c=e.length;o<c;o++){const h=e[o],d=h.url;if(Array.isArray(d)){const m=[];for(let g=0,_=d.length;g<_;g++){const S=d[g],M=await s(S);M!==null&&(M instanceof HTMLImageElement?m.push(M):m.push(new tu(M.data,M.width,M.height)))}n[h.uuid]=new Rf(m)}else{const m=await s(h.url);n[h.uuid]=new Rf(m)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const c=e[s];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const h=t[c.image],d=h.data;let m;Array.isArray(d)?(m=new T0,d.length===6&&(m.needsUpdate=!0)):(d&&d.data?m=new tu:m=new ur,d&&(m.needsUpdate=!0)),m.source=h,m.uuid=c.uuid,c.name!==void 0&&(m.name=c.name),c.mapping!==void 0&&(m.mapping=n(c.mapping,$W)),c.channel!==void 0&&(m.channel=c.channel),c.offset!==void 0&&m.offset.fromArray(c.offset),c.repeat!==void 0&&m.repeat.fromArray(c.repeat),c.center!==void 0&&m.center.fromArray(c.center),c.rotation!==void 0&&(m.rotation=c.rotation),c.wrap!==void 0&&(m.wrapS=n(c.wrap[0],LI),m.wrapT=n(c.wrap[1],LI)),c.format!==void 0&&(m.format=c.format),c.internalFormat!==void 0&&(m.internalFormat=c.internalFormat),c.type!==void 0&&(m.type=c.type),c.colorSpace!==void 0&&(m.colorSpace=c.colorSpace),c.minFilter!==void 0&&(m.minFilter=n(c.minFilter,UI)),c.magFilter!==void 0&&(m.magFilter=n(c.magFilter,UI)),c.anisotropy!==void 0&&(m.anisotropy=c.anisotropy),c.flipY!==void 0&&(m.flipY=c.flipY),c.generateMipmaps!==void 0&&(m.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(m.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(m.compareFunction=c.compareFunction),c.userData!==void 0&&(m.userData=c.userData),r[c.uuid]=m}return r}parseObject(e,t,n,r,s){let o;function c(_){return t[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",_),t[_]}function h(_){if(_!==void 0){if(Array.isArray(_)){const S=[];for(let M=0,C=_.length;M<C;M++){const w=_[M];n[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),S.push(n[w])}return S}return n[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),n[_]}}function d(_){return r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",_),r[_]}let m,g;switch(e.type){case"Scene":o=new rR,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new At(e.background):o.background=d(e.background)),e.environment!==void 0&&(o.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new PT(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new OT(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new rs(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new N0(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new D4(e.color,e.intensity);break;case"DirectionalLight":o=new R4(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new C4(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new N4(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new A4(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new w4(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new O4().fromJSON(e);break;case"SkinnedMesh":m=c(e.geometry),g=h(e.material),o=new Xk(m,g),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":m=c(e.geometry),g=h(e.material),o=new Pr(m,g);break;case"InstancedMesh":m=c(e.geometry),g=h(e.material);const _=e.count,S=e.instanceMatrix,M=e.instanceColor;o=new Kk(m,g,_),o.instanceMatrix=new $g(new Float32Array(S.array),16),M!==void 0&&(o.instanceColor=new $g(new Float32Array(M.array),M.itemSize));break;case"BatchedMesh":m=c(e.geometry),g=h(e.material),o=new Qk(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),o.geometry=m,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(C=>{let w=null,T=null;return C.boundingBox!==void 0&&(w=new $s().fromJSON(C.boundingBox)),C.boundingSphere!==void 0&&(T=new Es().fromJSON(C.boundingSphere)),{...C,boundingBox:w,boundingSphere:T}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=d(e.matricesTexture.uuid),o._indirectTexture=d(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=d(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new Es().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new $s().fromJSON(e.boundingBox));break;case"LOD":o=new Wk;break;case"Line":o=new Wf(c(e.geometry),h(e.material));break;case"LineLoop":o=new Zk(c(e.geometry),h(e.material));break;case"LineSegments":o=new uu(c(e.geometry),h(e.material));break;case"PointCloud":case"Points":o=new Jk(c(e.geometry),h(e.material));break;case"Sprite":o=new Yk(h(e.material));break;case"Group":o=new wg;break;case"Bone":o=new aR;break;default:o=new ni}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const _=e.children;for(let S=0;S<_.length;S++)o.add(this.parseObject(_[S],t,n,r,s))}if(e.animations!==void 0){const _=e.animations;for(let S=0;S<_.length;S++){const M=_[S];o.animations.push(s[M])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const _=e.levels;for(let S=0;S<_.length;S++){const M=_[S],C=o.getObjectByProperty("uuid",M.object);C!==void 0&&o.addLevel(C,M.distance,M.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);r!==void 0?t.target=r:t.target=new ni}})}}const $W={UVMapping:xT,CubeReflectionMapping:ph,CubeRefractionMapping:qf,EquirectangularReflectionMapping:G_,EquirectangularRefractionMapping:j_,CubeUVReflectionMapping:bv},LI={RepeatWrapping:q_,ClampToEdgeWrapping:tl,MirroredRepeatWrapping:Y_},UI={NearestFilter:xs,NearestMipmapNearestFilter:jC,NearestMipmapLinearFilter:Tg,LinearFilter:Hr,LinearMipmapNearestFilter:x_,LinearMipmapLinearFilter:jc},Kw=new WeakMap;class eX extends $a{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=qc.get(`image-bitmap:${e}`);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(d=>{if(Kw.has(o)===!0)r&&r(Kw.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(d),s.manager.itemEnd(e),d});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,c.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const h=fetch(e,c).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(d){return qc.add(`image-bitmap:${e}`,d),t&&t(d),s.manager.itemEnd(e),d}).catch(function(d){r&&r(d),Kw.set(h,d),qc.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});qc.add(`image-bitmap:${e}`,h),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let Ib;class TR{static getContext(){return Ib===void 0&&(Ib=new(window.AudioContext||window.webkitAudioContext)),Ib}static setContext(e){Ib=e}}class tX extends $a{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new gh(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(h){try{const d=h.slice(0);TR.getContext().decodeAudioData(d,function(g){t(g)}).catch(c)}catch(d){c(d)}},n,r);function c(h){r?r(h):console.error(h),s.manager.itemError(e)}}}const kI=new sn,VI=new sn,Kd=new sn;class nX{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new rs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new rs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Kd.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(bp*t.fov*.5)/t.zoom;let c,h;VI.elements[12]=-r,kI.elements[12]=r,c=-o*t.aspect+s,h=o*t.aspect+s,Kd.elements[0]=2*t.near/(h-c),Kd.elements[8]=(h+c)/(h-c),this.cameraL.projectionMatrix.copy(Kd),c=-o*t.aspect-s,h=o*t.aspect-s,Kd.elements[0]=2*t.near/(h-c),Kd.elements[8]=(h+c)/(h-c),this.cameraR.projectionMatrix.copy(Kd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(VI),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(kI)}}class U4 extends rs{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class MR{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Qd=new re,Qw=new Ja,iX=new re,Zd=new re,Jd=new re;class rX extends ni{constructor(){super(),this.type="AudioListener",this.context=TR.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new MR}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Qd,Qw,iX),Zd.set(0,0,-1).applyQuaternion(Qw),Jd.set(0,1,0).applyQuaternion(Qw),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Qd.x,n),t.positionY.linearRampToValueAtTime(Qd.y,n),t.positionZ.linearRampToValueAtTime(Qd.z,n),t.forwardX.linearRampToValueAtTime(Zd.x,n),t.forwardY.linearRampToValueAtTime(Zd.y,n),t.forwardZ.linearRampToValueAtTime(Zd.z,n),t.upX.linearRampToValueAtTime(Jd.x,n),t.upY.linearRampToValueAtTime(Jd.y,n),t.upZ.linearRampToValueAtTime(Jd.z,n)}else t.setPosition(Qd.x,Qd.y,Qd.z),t.setOrientation(Zd.x,Zd.y,Zd.z,Jd.x,Jd.y,Jd.z)}}class k4 extends ni{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const $d=new re,BI=new Ja,sX=new re,ep=new re;class aX extends k4{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose($d,BI,sX),ep.set(0,0,1).applyQuaternion(BI);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime($d.x,n),t.positionY.linearRampToValueAtTime($d.y,n),t.positionZ.linearRampToValueAtTime($d.z,n),t.orientationX.linearRampToValueAtTime(ep.x,n),t.orientationY.linearRampToValueAtTime(ep.y,n),t.orientationZ.linearRampToValueAtTime(ep.z,n)}else t.setPosition($d.x,$d.y,$d.z),t.setOrientation(ep.x,ep.y,ep.z)}}class oX{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class V4{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let c=0;c!==r;++c)n[s+c]=n[c];o=t}else{o+=t;const c=t/o;this._mixBufferRegion(n,s,0,c,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const h=t*this._origIndex;this._mixBufferRegion(n,r,h,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let h=t,d=t+t;h!==d;++h)if(n[h]!==n[h+t]){c.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){Ja.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;Ja.multiplyQuaternionsFlat(e,o,e,t,e,n),Ja.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let c=0;c!==s;++c){const h=t+c;e[h]=e[h]*o+e[n+c]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const c=t+o;e[c]=e[c]+e[n+o]*r}}}const wR="\\[\\]\\.:\\/",lX=new RegExp("["+wR+"]","g"),AR="[^"+wR+"]",cX="[^"+wR.replace("\\.","")+"]",uX=/((?:WC+[\/:])*)/.source.replace("WC",AR),hX=/(WCOD+)?/.source.replace("WCOD",cX),fX=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",AR),dX=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",AR),pX=new RegExp("^"+uX+hX+fX+dX+"$"),mX=["material","materials","bones","map"];class gX{constructor(e,t,n){const r=n||$n.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class $n{constructor(e,t,n){this.path=t,this.parsedPath=n||$n.parseTrackName(t),this.node=$n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new $n.Composite(e,t,n):new $n(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(lX,"")}static parseTrackName(e){const t=pX.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);mX.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const c=s[o];if(c.name===t||c.uuid===t)return c;const h=n(c.children);if(h)return h}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=$n.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===d){d=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const o=e[r];if(o===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+r+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}h=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(h=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}$n.Composite=gX;$n.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$n.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$n.prototype.GetterByBindingType=[$n.prototype._getValue_direct,$n.prototype._getValue_array,$n.prototype._getValue_arrayElement,$n.prototype._getValue_toArray];$n.prototype.SetterByBindingTypeAndVersioning=[[$n.prototype._setValue_direct,$n.prototype._setValue_direct_setNeedsUpdate,$n.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_array,$n.prototype._setValue_array_setNeedsUpdate,$n.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_arrayElement,$n.prototype._setValue_arrayElement_setNeedsUpdate,$n.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_fromArray,$n.prototype._setValue_fromArray_setNeedsUpdate,$n.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class vX{constructor(){this.isAnimationObjectGroup=!0,this.uuid=To(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let c,h=e.length,d=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const _=arguments[m],S=_.uuid;let M=t[S];if(M===void 0){M=h++,t[S]=M,e.push(_);for(let C=0,w=o;C!==w;++C)s[C].push(new $n(_,n[C],r[C]))}else if(M<d){c=e[M];const C=--d,w=e[C];t[w.uuid]=M,e[M]=w,t[S]=C,e[C]=_;for(let T=0,D=o;T!==D;++T){const I=s[T],L=I[C];let j=I[M];I[M]=L,j===void 0&&(j=new $n(_,n[T],r[T])),I[C]=j}}else e[M]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let o=0,c=arguments.length;o!==c;++o){const h=arguments[o],d=h.uuid,m=t[d];if(m!==void 0&&m>=s){const g=s++,_=e[g];t[_.uuid]=m,e[m]=_,t[d]=g,e[g]=h;for(let S=0,M=r;S!==M;++S){const C=n[S],w=C[g],T=C[m];C[m]=w,C[g]=T}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,o=e.length;for(let c=0,h=arguments.length;c!==h;++c){const d=arguments[c],m=d.uuid,g=t[m];if(g!==void 0)if(delete t[m],g<s){const _=--s,S=e[_],M=--o,C=e[M];t[S.uuid]=g,e[g]=S,t[C.uuid]=_,e[_]=C,e.pop();for(let w=0,T=r;w!==T;++w){const D=n[w],I=D[_],L=D[M];D[g]=I,D[_]=L,D.pop()}}else{const _=--o,S=e[_];_>0&&(t[S.uuid]=g),e[g]=S,e.pop();for(let M=0,C=r;M!==C;++M){const w=n[M];w[g]=w[_],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,c=this._parsedPaths,h=this._objects,d=h.length,m=this.nCachedObjects_,g=new Array(d);r=s.length,n[e]=r,o.push(e),c.push(t),s.push(g);for(let _=m,S=h.length;_!==S;++_){const M=h[_];g[_]=new $n(M,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,c=o.length-1,h=o[c],d=e[c];t[d]=n,o[n]=h,o.pop(),s[n]=s[c],s.pop(),r[n]=r[c],r.pop()}}}class B4{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,c=new Array(o),h={endingStart:dp,endingEnd:dp};for(let d=0;d!==o;++d){const m=s[d].createInterpolant(null);c[d]=m,m.settings=h}this._interpolantSettings=h,this._interpolants=c,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Mk,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,c=r/s;e.warp(1,o,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=r._lendControlInterpolant(),this._timeScaleInterpolant=c);const h=c.parameterPositions,d=c.sampleValues;return h[0]=s,h[1]=s+n,d[0]=e/o,d[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const h=(e-s)*n;h<0||n===0?t=0:(this._startTime=null,t=n*h)}t*=this._updateTimeScale(e);const o=this._updateTime(t),c=this._updateWeight(e);if(c>0){const h=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case JC:for(let m=0,g=h.length;m!==g;++m)h[m].evaluate(o),d[m].accumulateAdditive(c);break;case RT:default:for(let m=0,g=h.length;m!==g;++m)h[m].evaluate(o),d[m].accumulate(r,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=n===wk;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(n===Tk){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const c=Math.floor(r/t);r-=t*c,s+=Math.abs(c);const h=this.repetitions-s;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const d=e<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=pp,r.endingEnd=pp):(e?r.endingStart=this.zeroSlopeAtStart?pp:dp:r.endingStart=X_,t?r.endingEnd=this.zeroSlopeAtEnd?pp:dp:r.endingEnd=X_)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const c=o.parameterPositions,h=o.sampleValues;return c[0]=s,h[0]=t,c[1]=s+e,h[1]=n,this}}const yX=new Float32Array(1);class _X extends cu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,c=e._interpolants,h=n.uuid,d=this._bindingsByRootAndName;let m=d[h];m===void 0&&(m={},d[h]=m);for(let g=0;g!==s;++g){const _=r[g],S=_.name;let M=m[S];if(M!==void 0)++M.referenceCount,o[g]=M;else{if(M=o[g],M!==void 0){M._cacheIndex===null&&(++M.referenceCount,this._addInactiveBinding(M,h,S));continue}const C=t&&t._propertyBindings[g].binding.parsedPath;M=new V4($n.create(n,S,C),_.ValueTypeName,_.getValueSize()),++M.referenceCount,this._addInactiveBinding(M,h,S),o[g]=M}c[g].resultBuffer=M.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const c=o.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,c=o[s],h=c.knownActions,d=h[h.length-1],m=e._byClipCacheIndex;d._byClipCacheIndex=m,h[m]=d,h.pop(),e._byClipCacheIndex=null;const g=c.actionByRoot,_=(e._localRoot||this._root).uuid;delete g[_],h.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,c=o[r],h=t[t.length-1],d=e._cacheIndex;h._cacheIndex=d,t[d]=h,t.pop(),delete c[s],Object.keys(c).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new SR(new Float32Array(2),new Float32Array(2),1,yX),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?r0.findByName(r,e):e;const c=o!==null?o.uuid:e,h=this._actionsByClip[c];let d=null;if(n===void 0&&(o!==null?n=o.blendMode:n=RT),h!==void 0){const g=h.actionByRoot[s];if(g!==void 0&&g.blendMode===n)return g;d=h.knownActions[0],o===null&&(o=d._clip)}if(o===null)return null;const m=new B4(this,o,t,n);return this._bindAction(m,d),this._addInactiveAction(m,c,s),m}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?r0.findByName(n,e):e,o=s?s.uuid:e,c=this._actionsByClip[o];return c!==void 0&&c.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let d=0;d!==n;++d)t[d]._update(r,e,s,o);const c=this._bindings,h=this._nActiveBindings;for(let d=0;d!==h;++d)c[d].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const o=s.knownActions;for(let c=0,h=o.length;c!==h;++c){const d=o[c];this._deactivateAction(d);const m=d._cacheIndex,g=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,g._cacheIndex=m,t[m]=g,t.pop(),this._removeInactiveBindingsForAction(d)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const c=n[o].actionByRoot,h=c[t];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const c=s[o];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class SX extends tR{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new NT(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class CR{constructor(e){this.value=e}clone(){return new CR(this.value.clone===void 0?this.value:this.value.clone())}}let bX=0;class xX extends cu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:bX++}),this.name="",this.usage=Q_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class EX extends LT{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class TX{constructor(e,t,n,r,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const zI=new sn;class z4{constructor(e,t,n=0,r=1/0){this.ray=new Ev(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Zg,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return zI.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(zI),this}intersectObject(e,t=!0,n=[]){return SA(e,this,n,t),n.sort(FI),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)SA(e[r],this,n,t);return n.sort(FI),n}}function FI(i,e){return i.distance-e.distance}function SA(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let o=0,c=s.length;o<c;o++)SA(s[o],e,t,!0)}}class MX{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=wX.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function wX(){this._document.hidden===!1&&this.reset()}class AX{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=tn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(tn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class CX{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class RR{constructor(e,t,n,r){RR.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const HI=new tt;class RX{constructor(e=new tt(1/0,1/0),t=new tt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=HI.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,HI).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const GI=new re,Ob=new re,ug=new re,hg=new re,Zw=new re,DX=new re,NX=new re;class IX{constructor(e=new re,t=new re){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){GI.subVectors(e,this.start),Ob.subVectors(this.end,this.start);const n=Ob.dot(Ob);let s=Ob.dot(GI)/n;return t&&(s=tn(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=DX,n=NX){const r=10000000000000001e-32;let s,o;const c=this.start,h=e.start,d=this.end,m=e.end;ug.subVectors(d,c),hg.subVectors(m,h),Zw.subVectors(c,h);const g=ug.dot(ug),_=hg.dot(hg),S=hg.dot(Zw);if(g<=r&&_<=r)return t.copy(c),n.copy(h),t.sub(n),t.dot(t);if(g<=r)s=0,o=S/_,o=tn(o,0,1);else{const M=ug.dot(Zw);if(_<=r)o=0,s=tn(-M/g,0,1);else{const C=ug.dot(hg),w=g*_-C*C;w!==0?s=tn((C*S-M*_)/w,0,1):s=0,o=(C*s+S)/_,o<0?(o=0,s=tn(-M/g,0,1)):o>1&&(o=1,s=tn((C-M)/g,0,1))}}return t.copy(c).add(ug.multiplyScalar(s)),n.copy(h).add(hg.multiplyScalar(o)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const jI=new re;class OX extends ni{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new bn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,c=1,h=32;o<h;o++,c++){const d=o/h*Math.PI*2,m=c/h*Math.PI*2;r.push(Math.cos(d),Math.sin(d),1,Math.cos(m),Math.sin(m),1)}n.setAttribute("position",new Lt(r,3));const s=new Da({fog:!1,toneMapped:!1});this.cone=new uu(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),jI.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(jI),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _f=new re,Pb=new sn,Jw=new sn;class PX extends uu{constructor(e){const t=F4(e),n=new bn,r=[],s=[];for(let d=0;d<t.length;d++){const m=t[d];m.parent&&m.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}n.setAttribute("position",new Lt(r,3)),n.setAttribute("color",new Lt(s,3));const o=new Da({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const c=new At(255),h=new At(65280);this.setColors(c,h)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Jw.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const c=t[s];c.parent&&c.parent.isBone&&(Pb.multiplyMatrices(Jw,c.matrixWorld),_f.setFromMatrixPosition(Pb),r.setXYZ(o,_f.x,_f.y,_f.z),Pb.multiplyMatrices(Jw,c.parent.matrixWorld),_f.setFromMatrixPosition(Pb),r.setXYZ(o+1,_f.x,_f.y,_f.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let s=0;s<r.count;s+=2)r.setXYZ(s,e.r,e.g,e.b),r.setXYZ(s+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function F4(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...F4(i.children[t]));return e}class LX extends Pr{constructor(e,t,n){const r=new C0(t,4,2),s=new Jf({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const UX=new re,qI=new At,YI=new At;class kX extends ni{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new A0(t);r.rotateY(Math.PI*.5),this.material=new Jf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Mi(o,3)),this.add(new Pr(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");qI.copy(this.light.color),YI.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?qI:YI;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(UX.setFromMatrixPosition(this.light.matrixWorld).negate())}}class VX extends uu{constructor(e=10,t=10,n=4473924,r=8947848){n=new At(n),r=new At(r);const s=t/2,o=e/t,c=e/2,h=[],d=[];for(let _=0,S=0,M=-c;_<=t;_++,M+=o){h.push(-c,0,M,c,0,M),h.push(M,0,-c,M,0,c);const C=_===s?n:r;C.toArray(d,S),S+=3,C.toArray(d,S),S+=3,C.toArray(d,S),S+=3,C.toArray(d,S),S+=3}const m=new bn;m.setAttribute("position",new Lt(h,3)),m.setAttribute("color",new Lt(d,3));const g=new Da({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class BX extends uu{constructor(e=10,t=16,n=8,r=64,s=4473924,o=8947848){s=new At(s),o=new At(o);const c=[],h=[];if(t>1)for(let g=0;g<t;g++){const _=g/t*(Math.PI*2),S=Math.sin(_)*e,M=Math.cos(_)*e;c.push(0,0,0),c.push(S,0,M);const C=g&1?s:o;h.push(C.r,C.g,C.b),h.push(C.r,C.g,C.b)}for(let g=0;g<n;g++){const _=g&1?s:o,S=e-e/n*g;for(let M=0;M<r;M++){let C=M/r*(Math.PI*2),w=Math.sin(C)*S,T=Math.cos(C)*S;c.push(w,0,T),h.push(_.r,_.g,_.b),C=(M+1)/r*(Math.PI*2),w=Math.sin(C)*S,T=Math.cos(C)*S,c.push(w,0,T),h.push(_.r,_.g,_.b)}}const d=new bn;d.setAttribute("position",new Lt(c,3)),d.setAttribute("color",new Lt(h,3));const m=new Da({vertexColors:!0,toneMapped:!1});super(d,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const WI=new re,Lb=new re,XI=new re;class zX extends ni{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new bn;r.setAttribute("position",new Lt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Da({fog:!1,toneMapped:!1});this.lightPlane=new Wf(r,s),this.add(this.lightPlane),r=new bn,r.setAttribute("position",new Lt([0,0,0,0,0,1],3)),this.targetLine=new Wf(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),WI.setFromMatrixPosition(this.light.matrixWorld),Lb.setFromMatrixPosition(this.light.target.matrixWorld),XI.subVectors(Lb,WI),this.lightPlane.lookAt(Lb),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Lb),this.targetLine.scale.z=XI.length()}}const Ub=new re,cr=new IT;class FX extends uu{constructor(e){const t=new bn,n=new Da({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(M,C){h(M),h(C)}function h(M){r.push(0,0,0),s.push(0,0,0),o[M]===void 0&&(o[M]=[]),o[M].push(r.length/3-1)}t.setAttribute("position",new Lt(r,3)),t.setAttribute("color",new Lt(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const d=new At(16755200),m=new At(16711680),g=new At(43775),_=new At(16777215),S=new At(3355443);this.setColors(d,m,g,_,S)}setColors(e,t,n,r,s){const c=this.geometry.getAttribute("color");return c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,r.r,r.g,r.b),c.setXYZ(39,r.r,r.g,r.b),c.setXYZ(40,s.r,s.g,s.b),c.setXYZ(41,s.r,s.g,s.b),c.setXYZ(42,s.r,s.g,s.b),c.setXYZ(43,s.r,s.g,s.b),c.setXYZ(44,s.r,s.g,s.b),c.setXYZ(45,s.r,s.g,s.b),c.setXYZ(46,s.r,s.g,s.b),c.setXYZ(47,s.r,s.g,s.b),c.setXYZ(48,s.r,s.g,s.b),c.setXYZ(49,s.r,s.g,s.b),c.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;let s,o;if(cr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===xo)s=-1,o=1;else if(this.camera.coordinateSystem===Kg)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);vr("c",t,e,cr,0,0,s),vr("t",t,e,cr,0,0,o),vr("n1",t,e,cr,-n,-r,s),vr("n2",t,e,cr,n,-r,s),vr("n3",t,e,cr,-n,r,s),vr("n4",t,e,cr,n,r,s),vr("f1",t,e,cr,-n,-r,o),vr("f2",t,e,cr,n,-r,o),vr("f3",t,e,cr,-n,r,o),vr("f4",t,e,cr,n,r,o),vr("u1",t,e,cr,n*.7,r*1.1,s),vr("u2",t,e,cr,-n*.7,r*1.1,s),vr("u3",t,e,cr,0,r*2,s),vr("cf1",t,e,cr,-n,0,o),vr("cf2",t,e,cr,n,0,o),vr("cf3",t,e,cr,0,-r,o),vr("cf4",t,e,cr,0,r,o),vr("cn1",t,e,cr,-n,0,s),vr("cn2",t,e,cr,n,0,s),vr("cn3",t,e,cr,0,-r,s),vr("cn4",t,e,cr,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function vr(i,e,t,n,r,s,o){Ub.set(r,s,o).unproject(n);const c=e[i];if(c!==void 0){const h=t.getAttribute("position");for(let d=0,m=c.length;d<m;d++)h.setXYZ(c[d],Ub.x,Ub.y,Ub.z)}}const kb=new $s;class HX extends uu{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new bn;s.setIndex(new Mi(n,1)),s.setAttribute("position",new Mi(r,3)),super(s,new Da({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&kb.setFromObject(this.object),kb.isEmpty())return;const e=kb.min,t=kb.max,n=this.geometry.attributes.position,r=n.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class GX extends uu{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new bn;s.setIndex(new Mi(n,1)),s.setAttribute("position",new Lt(r,3)),super(s,new Da({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class jX extends Wf{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new bn;o.setAttribute("position",new Lt(s,3)),o.computeBoundingSphere(),super(o,new Da({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new bn;h.setAttribute("position",new Lt(c,3)),h.computeBoundingSphere(),this.add(new Pr(h,new Jf({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const KI=new re;let Vb,$w;class qX extends ni{constructor(e=new re(0,0,1),t=new re(0,0,0),n=1,r=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",Vb===void 0&&(Vb=new bn,Vb.setAttribute("position",new Lt([0,0,0,0,1,0],3)),$w=new w0(.5,1,5,1),$w.translate(0,-.5,0)),this.position.copy(t),this.line=new Wf(Vb,new Da({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pr($w,new Jf({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{KI.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(KI,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class YX extends uu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new bn;r.setAttribute("position",new Lt(t,3)),r.setAttribute("color",new Lt(n,3));const s=new Da({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new At,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class WX{constructor(){this.type="ShapePath",this.color=new At,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new NE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){return this.currentPath.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(T){const D=[];for(let I=0,L=T.length;I<L;I++){const j=T[I],Y=new xp;Y.curves=j.curves,D.push(Y)}return D}function n(T,D){const I=D.length;let L=!1;for(let j=I-1,Y=0;Y<I;j=Y++){let k=D[j],V=D[Y],N=V.x-k.x,O=V.y-k.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(k=D[Y],N=-N,V=D[j],O=-O),T.y<k.y||T.y>V.y)continue;if(T.y===k.y){if(T.x===k.x)return!0}else{const z=O*(T.x-k.x)-N*(T.y-k.y);if(z===0)return!0;if(z<0)continue;L=!L}}else{if(T.y!==k.y)continue;if(V.x<=T.x&&T.x<=k.x||k.x<=T.x&&T.x<=V.x)return!0}}return L}const r=Fl.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,c,h;const d=[];if(s.length===1)return c=s[0],h=new xp,h.curves=c.curves,d.push(h),d;let m=!r(s[0].getPoints());m=e?!m:m;const g=[],_=[];let S=[],M=0,C;_[M]=void 0,S[M]=[];for(let T=0,D=s.length;T<D;T++)c=s[T],C=c.getPoints(),o=r(C),o=e?!o:o,o?(!m&&_[M]&&M++,_[M]={s:new xp,p:C},_[M].s.curves=c.curves,m&&M++,S[M]=[]):S[M].push({h:c,p:C[0]});if(!_[0])return t(s);if(_.length>1){let T=!1,D=0;for(let I=0,L=_.length;I<L;I++)g[I]=[];for(let I=0,L=_.length;I<L;I++){const j=S[I];for(let Y=0;Y<j.length;Y++){const k=j[Y];let V=!0;for(let N=0;N<_.length;N++)n(k.p,_[N].p)&&(I!==N&&D++,V?(V=!1,g[N].push(k)):T=!0);V&&g[I].push(k)}}D>0&&T===!1&&(S=g)}let w;for(let T=0,D=_.length;T<D;T++){h=_[T].s,d.push(h),w=S[T];for(let I=0,L=w.length;I<L;I++)h.holes.push(w[I].h)}return d}}class XX extends cu{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function KX(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function QX(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function ZX(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function bA(i,e,t,n){const r=JX(n);switch(t){case KC:return i*e;case wT:return i*e/r.components*r.byteLength;case E0:return i*e/r.components*r.byteLength;case ZC:return i*e*2/r.components*r.byteLength;case AT:return i*e*2/r.components*r.byteLength;case QC:return i*e*3/r.components*r.byteLength;case Js:return i*e*4/r.components*r.byteLength;case CT:return i*e*4/r.components*r.byteLength;case E_:case T_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case M_:case w_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case eE:case nE:return Math.max(i,16)*Math.max(e,8)/4;case $x:case tE:return Math.max(i,8)*Math.max(e,8)/2;case iE:case rE:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case sE:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case aE:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case oE:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case lE:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case cE:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case uE:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case hE:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case fE:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case dE:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case pE:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case mE:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case gE:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case vE:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case yE:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case _E:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case SE:case bE:case xE:return Math.ceil(i/4)*Math.ceil(e/4)*16;case EE:case TE:return Math.ceil(i/4)*Math.ceil(e/4)*8;case ME:case wE:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function JX(i){switch(i){case il:case qC:return{byteLength:1,components:1};case qg:case YC:case xv:return{byteLength:2,components:1};case TT:case MT:return{byteLength:2,components:4};case mh:case ET:case Za:return{byteLength:4,components:1};case WC:case XC:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class $X{static contain(e,t){return KX(e,t)}static cover(e,t){return QX(e,t)}static fill(e){return ZX(e)}static getByteLength(e,t,n,r){return bA(e,t,n,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ST}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ST);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function H4(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function eK(i){const e=new WeakMap;function t(c,h){const d=c.array,m=c.usage,g=d.byteLength,_=i.createBuffer();i.bindBuffer(h,_),i.bufferData(h,d,m),c.onUploadCallback();let S;if(d instanceof Float32Array)S=i.FLOAT;else if(typeof Float16Array<"u"&&d instanceof Float16Array)S=i.HALF_FLOAT;else if(d instanceof Uint16Array)c.isFloat16BufferAttribute?S=i.HALF_FLOAT:S=i.UNSIGNED_SHORT;else if(d instanceof Int16Array)S=i.SHORT;else if(d instanceof Uint32Array)S=i.UNSIGNED_INT;else if(d instanceof Int32Array)S=i.INT;else if(d instanceof Int8Array)S=i.BYTE;else if(d instanceof Uint8Array)S=i.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)S=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:_,type:S,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:g}}function n(c,h,d){const m=h.array,g=h.updateRanges;if(i.bindBuffer(d,c),g.length===0)i.bufferSubData(d,0,m);else{g.sort((S,M)=>S.start-M.start);let _=0;for(let S=1;S<g.length;S++){const M=g[_],C=g[S];C.start<=M.start+M.count+1?M.count=Math.max(M.count,C.start+C.count-M.start):(++_,g[_]=C)}g.length=_+1;for(let S=0,M=g.length;S<M;S++){const C=g[S];i.bufferSubData(d,C.start*m.BYTES_PER_ELEMENT,m,C.start,C.count)}h.clearUpdateRanges()}h.onUploadCallback()}function r(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=e.get(c);h&&(i.deleteBuffer(h.buffer),e.delete(c))}function o(c,h){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const m=e.get(c);(!m||m.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const d=e.get(c);if(d===void 0)e.set(c,t(c,h));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(d.buffer,c,h),d.version=c.version}}return{get:r,remove:s,update:o}}var tK=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,nK=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,iK=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,rK=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,sK=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,aK=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,oK=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,lK=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,cK=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,uK=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,hK=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,fK=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,dK=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,pK=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,mK=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,gK=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,vK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,yK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,_K=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,SK=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,bK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,xK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,EK=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,TK=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,MK=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,wK=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,AK=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,CK=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,RK=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,DK=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,NK="gl_FragColor = linearToOutputTexel( gl_FragColor );",IK=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,OK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,PK=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,LK=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,UK=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,kK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,VK=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,BK=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,zK=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,FK=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,HK=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,GK=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,jK=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,qK=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,YK=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,WK=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,XK=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,KK=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,QK=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,ZK=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,JK=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,$K=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,eQ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,tQ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,nQ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,iQ=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,rQ=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,sQ=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,aQ=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,oQ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,lQ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,cQ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,uQ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hQ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,fQ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,dQ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,pQ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,mQ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,gQ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,vQ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,yQ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,_Q=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,SQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,bQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,xQ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,EQ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,TQ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,MQ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,wQ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,AQ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,CQ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,RQ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,DQ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,NQ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,IQ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,OQ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,PQ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,LQ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,UQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,kQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,VQ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,BQ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,zQ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,FQ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,HQ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,GQ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,jQ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,qQ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,YQ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,WQ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,XQ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,KQ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,QQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ZQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,JQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$Q=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const eZ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,tZ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,iZ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,sZ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,aZ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,oZ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,lZ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,cZ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,uZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,hZ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fZ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dZ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,pZ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,mZ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gZ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vZ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yZ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,_Z=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SZ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,bZ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,xZ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,EZ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TZ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,MZ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wZ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AZ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CZ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,RZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,DZ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,NZ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,IZ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,OZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,wn={alphahash_fragment:tK,alphahash_pars_fragment:nK,alphamap_fragment:iK,alphamap_pars_fragment:rK,alphatest_fragment:sK,alphatest_pars_fragment:aK,aomap_fragment:oK,aomap_pars_fragment:lK,batching_pars_vertex:cK,batching_vertex:uK,begin_vertex:hK,beginnormal_vertex:fK,bsdfs:dK,iridescence_fragment:pK,bumpmap_pars_fragment:mK,clipping_planes_fragment:gK,clipping_planes_pars_fragment:vK,clipping_planes_pars_vertex:yK,clipping_planes_vertex:_K,color_fragment:SK,color_pars_fragment:bK,color_pars_vertex:xK,color_vertex:EK,common:TK,cube_uv_reflection_fragment:MK,defaultnormal_vertex:wK,displacementmap_pars_vertex:AK,displacementmap_vertex:CK,emissivemap_fragment:RK,emissivemap_pars_fragment:DK,colorspace_fragment:NK,colorspace_pars_fragment:IK,envmap_fragment:OK,envmap_common_pars_fragment:PK,envmap_pars_fragment:LK,envmap_pars_vertex:UK,envmap_physical_pars_fragment:WK,envmap_vertex:kK,fog_vertex:VK,fog_pars_vertex:BK,fog_fragment:zK,fog_pars_fragment:FK,gradientmap_pars_fragment:HK,lightmap_pars_fragment:GK,lights_lambert_fragment:jK,lights_lambert_pars_fragment:qK,lights_pars_begin:YK,lights_toon_fragment:XK,lights_toon_pars_fragment:KK,lights_phong_fragment:QK,lights_phong_pars_fragment:ZK,lights_physical_fragment:JK,lights_physical_pars_fragment:$K,lights_fragment_begin:eQ,lights_fragment_maps:tQ,lights_fragment_end:nQ,logdepthbuf_fragment:iQ,logdepthbuf_pars_fragment:rQ,logdepthbuf_pars_vertex:sQ,logdepthbuf_vertex:aQ,map_fragment:oQ,map_pars_fragment:lQ,map_particle_fragment:cQ,map_particle_pars_fragment:uQ,metalnessmap_fragment:hQ,metalnessmap_pars_fragment:fQ,morphinstance_vertex:dQ,morphcolor_vertex:pQ,morphnormal_vertex:mQ,morphtarget_pars_vertex:gQ,morphtarget_vertex:vQ,normal_fragment_begin:yQ,normal_fragment_maps:_Q,normal_pars_fragment:SQ,normal_pars_vertex:bQ,normal_vertex:xQ,normalmap_pars_fragment:EQ,clearcoat_normal_fragment_begin:TQ,clearcoat_normal_fragment_maps:MQ,clearcoat_pars_fragment:wQ,iridescence_pars_fragment:AQ,opaque_fragment:CQ,packing:RQ,premultiplied_alpha_fragment:DQ,project_vertex:NQ,dithering_fragment:IQ,dithering_pars_fragment:OQ,roughnessmap_fragment:PQ,roughnessmap_pars_fragment:LQ,shadowmap_pars_fragment:UQ,shadowmap_pars_vertex:kQ,shadowmap_vertex:VQ,shadowmask_pars_fragment:BQ,skinbase_vertex:zQ,skinning_pars_vertex:FQ,skinning_vertex:HQ,skinnormal_vertex:GQ,specularmap_fragment:jQ,specularmap_pars_fragment:qQ,tonemapping_fragment:YQ,tonemapping_pars_fragment:WQ,transmission_fragment:XQ,transmission_pars_fragment:KQ,uv_pars_fragment:QQ,uv_pars_vertex:ZQ,uv_vertex:JQ,worldpos_vertex:$Q,background_vert:eZ,background_frag:tZ,backgroundCube_vert:nZ,backgroundCube_frag:iZ,cube_vert:rZ,cube_frag:sZ,depth_vert:aZ,depth_frag:oZ,distanceRGBA_vert:lZ,distanceRGBA_frag:cZ,equirect_vert:uZ,equirect_frag:hZ,linedashed_vert:fZ,linedashed_frag:dZ,meshbasic_vert:pZ,meshbasic_frag:mZ,meshlambert_vert:gZ,meshlambert_frag:vZ,meshmatcap_vert:yZ,meshmatcap_frag:_Z,meshnormal_vert:SZ,meshnormal_frag:bZ,meshphong_vert:xZ,meshphong_frag:EZ,meshphysical_vert:TZ,meshphysical_frag:MZ,meshtoon_vert:wZ,meshtoon_frag:AZ,points_vert:CZ,points_frag:RZ,shadow_vert:DZ,shadow_frag:NZ,sprite_vert:IZ,sprite_frag:OZ},St={common:{diffuse:{value:new At(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new yn},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new yn}},envmap:{envMap:{value:null},envMapRotation:{value:new yn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new yn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new yn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new yn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new yn},normalScale:{value:new tt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new yn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new yn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new yn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new yn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new At(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new At(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0},uvTransform:{value:new yn}},sprite:{diffuse:{value:new At(16777215)},opacity:{value:1},center:{value:new tt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new yn},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0}}},kl={basic:{uniforms:Ta([St.common,St.specularmap,St.envmap,St.aomap,St.lightmap,St.fog]),vertexShader:wn.meshbasic_vert,fragmentShader:wn.meshbasic_frag},lambert:{uniforms:Ta([St.common,St.specularmap,St.envmap,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.fog,St.lights,{emissive:{value:new At(0)}}]),vertexShader:wn.meshlambert_vert,fragmentShader:wn.meshlambert_frag},phong:{uniforms:Ta([St.common,St.specularmap,St.envmap,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.fog,St.lights,{emissive:{value:new At(0)},specular:{value:new At(1118481)},shininess:{value:30}}]),vertexShader:wn.meshphong_vert,fragmentShader:wn.meshphong_frag},standard:{uniforms:Ta([St.common,St.envmap,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.roughnessmap,St.metalnessmap,St.fog,St.lights,{emissive:{value:new At(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag},toon:{uniforms:Ta([St.common,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.gradientmap,St.fog,St.lights,{emissive:{value:new At(0)}}]),vertexShader:wn.meshtoon_vert,fragmentShader:wn.meshtoon_frag},matcap:{uniforms:Ta([St.common,St.bumpmap,St.normalmap,St.displacementmap,St.fog,{matcap:{value:null}}]),vertexShader:wn.meshmatcap_vert,fragmentShader:wn.meshmatcap_frag},points:{uniforms:Ta([St.points,St.fog]),vertexShader:wn.points_vert,fragmentShader:wn.points_frag},dashed:{uniforms:Ta([St.common,St.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wn.linedashed_vert,fragmentShader:wn.linedashed_frag},depth:{uniforms:Ta([St.common,St.displacementmap]),vertexShader:wn.depth_vert,fragmentShader:wn.depth_frag},normal:{uniforms:Ta([St.common,St.bumpmap,St.normalmap,St.displacementmap,{opacity:{value:1}}]),vertexShader:wn.meshnormal_vert,fragmentShader:wn.meshnormal_frag},sprite:{uniforms:Ta([St.sprite,St.fog]),vertexShader:wn.sprite_vert,fragmentShader:wn.sprite_frag},background:{uniforms:{uvTransform:{value:new yn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:wn.background_vert,fragmentShader:wn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new yn}},vertexShader:wn.backgroundCube_vert,fragmentShader:wn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wn.cube_vert,fragmentShader:wn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wn.equirect_vert,fragmentShader:wn.equirect_frag},distanceRGBA:{uniforms:Ta([St.common,St.displacementmap,{referencePosition:{value:new re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wn.distanceRGBA_vert,fragmentShader:wn.distanceRGBA_frag},shadow:{uniforms:Ta([St.lights,St.fog,{color:{value:new At(0)},opacity:{value:1}}]),vertexShader:wn.shadow_vert,fragmentShader:wn.shadow_frag}};kl.physical={uniforms:Ta([kl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new yn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new yn},clearcoatNormalScale:{value:new tt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new yn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new yn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new yn},sheen:{value:0},sheenColor:{value:new At(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new yn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new yn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new yn},transmissionSamplerSize:{value:new tt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new yn},attenuationDistance:{value:0},attenuationColor:{value:new At(0)},specularColor:{value:new At(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new yn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new yn},anisotropyVector:{value:new tt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new yn}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag};const Bb={r:0,b:0,g:0},tp=new wo,PZ=new sn;function LZ(i,e,t,n,r,s,o){const c=new At(0);let h=s===!0?0:1,d,m,g=null,_=0,S=null;function M(I){let L=I.isScene===!0?I.background:null;return L&&L.isTexture&&(L=(I.backgroundBlurriness>0?t:e).get(L)),L}function C(I){let L=!1;const j=M(I);j===null?T(c,h):j&&j.isColor&&(T(j,1),L=!0);const Y=i.xr.getEnvironmentBlendMode();Y==="additive"?n.buffers.color.setClear(0,0,0,1,o):Y==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||L)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function w(I,L){const j=M(L);j&&(j.isCubeTexture||j.mapping===bv)?(m===void 0&&(m=new Pr(new Yp(1,1,1),new Ql({name:"BackgroundCubeMaterial",uniforms:Jg(kl.backgroundCube.uniforms),vertexShader:kl.backgroundCube.vertexShader,fragmentShader:kl.backgroundCube.fragmentShader,side:Ra,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(Y,k,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(m)),tp.copy(L.backgroundRotation),tp.x*=-1,tp.y*=-1,tp.z*=-1,j.isCubeTexture&&j.isRenderTargetTexture===!1&&(tp.y*=-1,tp.z*=-1),m.material.uniforms.envMap.value=j,m.material.uniforms.flipEnvMap.value=j.isCubeTexture&&j.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=L.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=L.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(PZ.makeRotationFromEuler(tp)),m.material.toneMapped=Kn.getTransfer(j.colorSpace)!==vi,(g!==j||_!==j.version||S!==i.toneMapping)&&(m.material.needsUpdate=!0,g=j,_=j.version,S=i.toneMapping),m.layers.enableAll(),I.unshift(m,m.geometry,m.material,0,0,null)):j&&j.isTexture&&(d===void 0&&(d=new Pr(new Mv(2,2),new Ql({name:"BackgroundMaterial",uniforms:Jg(kl.background.uniforms),vertexShader:kl.background.vertexShader,fragmentShader:kl.background.fragmentShader,side:dh,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=j,d.material.uniforms.backgroundIntensity.value=L.backgroundIntensity,d.material.toneMapped=Kn.getTransfer(j.colorSpace)!==vi,j.matrixAutoUpdate===!0&&j.updateMatrix(),d.material.uniforms.uvTransform.value.copy(j.matrix),(g!==j||_!==j.version||S!==i.toneMapping)&&(d.material.needsUpdate=!0,g=j,_=j.version,S=i.toneMapping),d.layers.enableAll(),I.unshift(d,d.geometry,d.material,0,0,null))}function T(I,L){I.getRGB(Bb,Fk(i)),n.buffers.color.setClear(Bb.r,Bb.g,Bb.b,L,o)}function D(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return c},setClearColor:function(I,L=1){c.set(I),h=L,T(c,h)},getClearAlpha:function(){return h},setClearAlpha:function(I){h=I,T(c,h)},render:C,addToRenderList:w,dispose:D}}function UZ(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=_(null);let s=r,o=!1;function c(O,z,W,q,he){let fe=!1;const H=g(q,W,z);s!==H&&(s=H,d(s.object)),fe=S(O,q,W,he),fe&&M(O,q,W,he),he!==null&&e.update(he,i.ELEMENT_ARRAY_BUFFER),(fe||o)&&(o=!1,L(O,z,W,q),he!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(he).buffer))}function h(){return i.createVertexArray()}function d(O){return i.bindVertexArray(O)}function m(O){return i.deleteVertexArray(O)}function g(O,z,W){const q=W.wireframe===!0;let he=n[O.id];he===void 0&&(he={},n[O.id]=he);let fe=he[z.id];fe===void 0&&(fe={},he[z.id]=fe);let H=fe[q];return H===void 0&&(H=_(h()),fe[q]=H),H}function _(O){const z=[],W=[],q=[];for(let he=0;he<t;he++)z[he]=0,W[he]=0,q[he]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:W,attributeDivisors:q,object:O,attributes:{},index:null}}function S(O,z,W,q){const he=s.attributes,fe=z.attributes;let H=0;const K=W.getAttributes();for(const J in K)if(K[J].location>=0){const se=he[J];let Z=fe[J];if(Z===void 0&&(J==="instanceMatrix"&&O.instanceMatrix&&(Z=O.instanceMatrix),J==="instanceColor"&&O.instanceColor&&(Z=O.instanceColor)),se===void 0||se.attribute!==Z||Z&&se.data!==Z.data)return!0;H++}return s.attributesNum!==H||s.index!==q}function M(O,z,W,q){const he={},fe=z.attributes;let H=0;const K=W.getAttributes();for(const J in K)if(K[J].location>=0){let se=fe[J];se===void 0&&(J==="instanceMatrix"&&O.instanceMatrix&&(se=O.instanceMatrix),J==="instanceColor"&&O.instanceColor&&(se=O.instanceColor));const Z={};Z.attribute=se,se&&se.data&&(Z.data=se.data),he[J]=Z,H++}s.attributes=he,s.attributesNum=H,s.index=q}function C(){const O=s.newAttributes;for(let z=0,W=O.length;z<W;z++)O[z]=0}function w(O){T(O,0)}function T(O,z){const W=s.newAttributes,q=s.enabledAttributes,he=s.attributeDivisors;W[O]=1,q[O]===0&&(i.enableVertexAttribArray(O),q[O]=1),he[O]!==z&&(i.vertexAttribDivisor(O,z),he[O]=z)}function D(){const O=s.newAttributes,z=s.enabledAttributes;for(let W=0,q=z.length;W<q;W++)z[W]!==O[W]&&(i.disableVertexAttribArray(W),z[W]=0)}function I(O,z,W,q,he,fe,H){H===!0?i.vertexAttribIPointer(O,z,W,he,fe):i.vertexAttribPointer(O,z,W,q,he,fe)}function L(O,z,W,q){C();const he=q.attributes,fe=W.getAttributes(),H=z.defaultAttributeValues;for(const K in fe){const J=fe[K];if(J.location>=0){let oe=he[K];if(oe===void 0&&(K==="instanceMatrix"&&O.instanceMatrix&&(oe=O.instanceMatrix),K==="instanceColor"&&O.instanceColor&&(oe=O.instanceColor)),oe!==void 0){const se=oe.normalized,Z=oe.itemSize,le=e.get(oe);if(le===void 0)continue;const Ce=le.buffer,Te=le.type,Ye=le.bytesPerElement,xe=Te===i.INT||Te===i.UNSIGNED_INT||oe.gpuType===ET;if(oe.isInterleavedBufferAttribute){const Oe=oe.data,rt=Oe.stride,ft=oe.offset;if(Oe.isInstancedInterleavedBuffer){for(let bt=0;bt<J.locationSize;bt++)T(J.location+bt,Oe.meshPerAttribute);O.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=Oe.meshPerAttribute*Oe.count)}else for(let bt=0;bt<J.locationSize;bt++)w(J.location+bt);i.bindBuffer(i.ARRAY_BUFFER,Ce);for(let bt=0;bt<J.locationSize;bt++)I(J.location+bt,Z/J.locationSize,Te,se,rt*Ye,(ft+Z/J.locationSize*bt)*Ye,xe)}else{if(oe.isInstancedBufferAttribute){for(let Oe=0;Oe<J.locationSize;Oe++)T(J.location+Oe,oe.meshPerAttribute);O.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let Oe=0;Oe<J.locationSize;Oe++)w(J.location+Oe);i.bindBuffer(i.ARRAY_BUFFER,Ce);for(let Oe=0;Oe<J.locationSize;Oe++)I(J.location+Oe,Z/J.locationSize,Te,se,Z*Ye,Z/J.locationSize*Oe*Ye,xe)}}else if(H!==void 0){const se=H[K];if(se!==void 0)switch(se.length){case 2:i.vertexAttrib2fv(J.location,se);break;case 3:i.vertexAttrib3fv(J.location,se);break;case 4:i.vertexAttrib4fv(J.location,se);break;default:i.vertexAttrib1fv(J.location,se)}}}}D()}function j(){V();for(const O in n){const z=n[O];for(const W in z){const q=z[W];for(const he in q)m(q[he].object),delete q[he];delete z[W]}delete n[O]}}function Y(O){if(n[O.id]===void 0)return;const z=n[O.id];for(const W in z){const q=z[W];for(const he in q)m(q[he].object),delete q[he];delete z[W]}delete n[O.id]}function k(O){for(const z in n){const W=n[z];if(W[O.id]===void 0)continue;const q=W[O.id];for(const he in q)m(q[he].object),delete q[he];delete W[O.id]}}function V(){N(),o=!0,s!==r&&(s=r,d(s.object))}function N(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:c,reset:V,resetDefaultState:N,dispose:j,releaseStatesOfGeometry:Y,releaseStatesOfProgram:k,initAttributes:C,enableAttribute:w,disableUnusedAttributes:D}}function kZ(i,e,t){let n;function r(d){n=d}function s(d,m){i.drawArrays(n,d,m),t.update(m,n,1)}function o(d,m,g){g!==0&&(i.drawArraysInstanced(n,d,m,g),t.update(m,n,g))}function c(d,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,d,0,m,0,g);let S=0;for(let M=0;M<g;M++)S+=m[M];t.update(S,n,1)}function h(d,m,g,_){if(g===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let M=0;M<d.length;M++)o(d[M],m[M],_[M]);else{S.multiDrawArraysInstancedWEBGL(n,d,0,m,0,_,0,g);let M=0;for(let C=0;C<g;C++)M+=m[C]*_[C];t.update(M,n,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=c,this.renderMultiDrawInstances=h}function VZ(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(k){return!(k!==Js&&n.convert(k)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(k){const V=k===xv&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==il&&n.convert(k)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==Za&&!V)}function h(k){if(k==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp";const m=h(d);m!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",m,"instead."),d=m);const g=t.logarithmicDepthBuffer===!0,_=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),S=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),M=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C=i.getParameter(i.MAX_TEXTURE_SIZE),w=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),T=i.getParameter(i.MAX_VERTEX_ATTRIBS),D=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),I=i.getParameter(i.MAX_VARYING_VECTORS),L=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),j=M>0,Y=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:h,textureFormatReadable:o,textureTypeReadable:c,precision:d,logarithmicDepthBuffer:g,reversedDepthBuffer:_,maxTextures:S,maxVertexTextures:M,maxTextureSize:C,maxCubemapSize:w,maxAttributes:T,maxVertexUniforms:D,maxVaryings:I,maxFragmentUniforms:L,vertexTextures:j,maxSamples:Y}}function BZ(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new bf,c=new yn,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(g,_){const S=g.length!==0||_||n!==0||r;return r=_,n=g.length,S},this.beginShadows=function(){s=!0,m(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(g,_){t=m(g,_,0)},this.setState=function(g,_,S){const M=g.clippingPlanes,C=g.clipIntersection,w=g.clipShadows,T=i.get(g);if(!r||M===null||M.length===0||s&&!w)s?m(null):d();else{const D=s?0:n,I=D*4;let L=T.clippingState||null;h.value=L,L=m(M,_,I,S);for(let j=0;j!==I;++j)L[j]=t[j];T.clippingState=L,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=D}};function d(){h.value!==t&&(h.value=t,h.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function m(g,_,S,M){const C=g!==null?g.length:0;let w=null;if(C!==0){if(w=h.value,M!==!0||w===null){const T=S+C*4,D=_.matrixWorldInverse;c.getNormalMatrix(D),(w===null||w.length<T)&&(w=new Float32Array(T));for(let I=0,L=S;I!==C;++I,L+=4)o.copy(g[I]).applyMatrix4(D,c),o.normal.toArray(w,L),w[L+3]=o.constant}h.value=w,h.needsUpdate=!0}return e.numPlanes=C,e.numIntersection=0,w}}function zZ(i){let e=new WeakMap;function t(o,c){return c===G_?o.mapping=ph:c===j_&&(o.mapping=qf),o}function n(o){if(o&&o.isTexture){const c=o.mapping;if(c===G_||c===j_)if(e.has(o)){const h=e.get(o).texture;return t(h,o.mapping)}else{const h=o.image;if(h&&h.height>0){const d=new jk(h.height);return d.fromEquirectangularTexture(i,o),e.set(o,d),o.addEventListener("dispose",r),t(d.texture,o.mapping)}else return null}}return o}function r(o){const c=o.target;c.removeEventListener("dispose",r);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const Ag=4,QI=[.125,.215,.35,.446,.526,.582],cp=20,e1=new N0,ZI=new At;let t1=null,n1=0,i1=0,r1=!1;const ap=(1+Math.sqrt(5))/2,fg=1/ap,JI=[new re(-ap,fg,0),new re(ap,fg,0),new re(-fg,0,ap),new re(fg,0,ap),new re(0,ap,-fg),new re(0,ap,fg),new re(-1,1,-1),new re(1,1,-1),new re(-1,1,1),new re(1,1,1)],FZ=new re;class xA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,s={}){const{size:o=256,position:c=FZ}=s;t1=this._renderer.getRenderTarget(),n1=this._renderer.getActiveCubeFace(),i1=this._renderer.getActiveMipmapLevel(),r1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const h=this._allocateTargets();return h.depthBuffer=!0,this._sceneToCubeUV(e,n,r,h,c),t>0&&this._blur(h,0,0,t),this._applyPMREM(h),this._cleanup(h),h}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=tO(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=eO(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(t1,n1,i1),this._renderer.xr.enabled=r1,e.scissorTest=!1,zb(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ph||e.mapping===qf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),t1=this._renderer.getRenderTarget(),n1=this._renderer.getActiveCubeFace(),i1=this._renderer.getActiveMipmapLevel(),r1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Hr,minFilter:Hr,generateMipmaps:!1,type:xv,format:Js,colorSpace:Yf,depthBuffer:!1},r=$I(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=$I(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=HZ(s)),this._blurMaterial=GZ(s,e,t)}return r}_compileMaterial(e){const t=new Pr(this._lodPlanes[0],e);this._renderer.compile(t,e1)}_sceneToCubeUV(e,t,n,r,s){const h=new rs(90,1,t,n),d=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],g=this._renderer,_=g.autoClear,S=g.toneMapping;g.getClearColor(ZI),g.toneMapping=eu,g.autoClear=!1,g.state.buffers.depth.getReversed()&&(g.setRenderTarget(r),g.clearDepth(),g.setRenderTarget(null));const C=new Jf({name:"PMREM.Background",side:Ra,depthWrite:!1,depthTest:!1}),w=new Pr(new Yp,C);let T=!1;const D=e.background;D?D.isColor&&(C.color.copy(D),e.background=null,T=!0):(C.color.copy(ZI),T=!0);for(let I=0;I<6;I++){const L=I%3;L===0?(h.up.set(0,d[I],0),h.position.set(s.x,s.y,s.z),h.lookAt(s.x+m[I],s.y,s.z)):L===1?(h.up.set(0,0,d[I]),h.position.set(s.x,s.y,s.z),h.lookAt(s.x,s.y+m[I],s.z)):(h.up.set(0,d[I],0),h.position.set(s.x,s.y,s.z),h.lookAt(s.x,s.y,s.z+m[I]));const j=this._cubeSize;zb(r,L*j,I>2?j:0,j,j),g.setRenderTarget(r),T&&g.render(w,h),g.render(e,h)}w.geometry.dispose(),w.material.dispose(),g.toneMapping=S,g.autoClear=_,e.background=D}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===ph||e.mapping===qf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=tO()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=eO());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Pr(this._lodPlanes[0],s),c=s.uniforms;c.envMap.value=e;const h=this._cubeSize;zb(t,0,0,3*h,2*h),n.setRenderTarget(t),n.render(o,e1)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),c=JI[(r-s-1)%JI.length];this._blur(e,s-1,s,o,c)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,c){const h=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,g=new Pr(this._lodPlanes[r],d),_=d.uniforms,S=this._sizeLods[n]-1,M=isFinite(s)?Math.PI/(2*S):2*Math.PI/(2*cp-1),C=s/M,w=isFinite(s)?1+Math.floor(m*C):cp;w>cp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${cp}`);const T=[];let D=0;for(let k=0;k<cp;++k){const V=k/C,N=Math.exp(-V*V/2);T.push(N),k===0?D+=N:k<w&&(D+=2*N)}for(let k=0;k<T.length;k++)T[k]=T[k]/D;_.envMap.value=e.texture,_.samples.value=w,_.weights.value=T,_.latitudinal.value=o==="latitudinal",c&&(_.poleAxis.value=c);const{_lodMax:I}=this;_.dTheta.value=M,_.mipInt.value=I-n;const L=this._sizeLods[r],j=3*L*(r>I-Ag?r-I+Ag:0),Y=4*(this._cubeSize-L);zb(t,j,Y,3*L,2*L),h.setRenderTarget(t),h.render(g,e1)}}function HZ(i){const e=[],t=[],n=[];let r=i;const s=i-Ag+1+QI.length;for(let o=0;o<s;o++){const c=Math.pow(2,r);t.push(c);let h=1/c;o>i-Ag?h=QI[o-i+Ag-1]:o===0&&(h=0),n.push(h);const d=1/(c-2),m=-d,g=1+d,_=[m,m,g,m,g,g,m,m,g,g,m,g],S=6,M=6,C=3,w=2,T=1,D=new Float32Array(C*M*S),I=new Float32Array(w*M*S),L=new Float32Array(T*M*S);for(let Y=0;Y<S;Y++){const k=Y%3*2/3-1,V=Y>2?0:-1,N=[k,V,0,k+2/3,V,0,k+2/3,V+1,0,k,V,0,k+2/3,V+1,0,k,V+1,0];D.set(N,C*M*Y),I.set(_,w*M*Y);const O=[Y,Y,Y,Y,Y,Y];L.set(O,T*M*Y)}const j=new bn;j.setAttribute("position",new Mi(D,C)),j.setAttribute("uv",new Mi(I,w)),j.setAttribute("faceIndex",new Mi(L,T)),e.push(j),r>Ag&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function $I(i,e,t){const n=new au(i,e,t);return n.texture.mapping=bv,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function zb(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function GZ(i,e,t){const n=new Float32Array(cp),r=new re(0,1,0);return new Ql({name:"SphericalGaussianBlur",defines:{n:cp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:DR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ih,depthTest:!1,depthWrite:!1})}function eO(){return new Ql({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:DR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ih,depthTest:!1,depthWrite:!1})}function tO(){return new Ql({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:DR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ih,depthTest:!1,depthWrite:!1})}function DR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function jZ(i){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){const h=c.mapping,d=h===G_||h===j_,m=h===ph||h===qf;if(d||m){let g=e.get(c);const _=g!==void 0?g.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==_)return t===null&&(t=new xA(i)),g=d?t.fromEquirectangular(c,g):t.fromCubemap(c,g),g.texture.pmremVersion=c.pmremVersion,e.set(c,g),g.texture;if(g!==void 0)return g.texture;{const S=c.image;return d&&S&&S.height>0||m&&S&&r(S)?(t===null&&(t=new xA(i)),g=d?t.fromEquirectangular(c):t.fromCubemap(c),g.texture.pmremVersion=c.pmremVersion,e.set(c,g),c.addEventListener("dispose",s),g.texture):null}}}return c}function r(c){let h=0;const d=6;for(let m=0;m<d;m++)c[m]!==void 0&&h++;return h===d}function s(c){const h=c.target;h.removeEventListener("dispose",s);const d=e.get(h);d!==void 0&&(e.delete(h),d.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function qZ(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&J_("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function YZ(i,e,t,n){const r={},s=new WeakMap;function o(g){const _=g.target;_.index!==null&&e.remove(_.index);for(const M in _.attributes)e.remove(_.attributes[M]);_.removeEventListener("dispose",o),delete r[_.id];const S=s.get(_);S&&(e.remove(S),s.delete(_)),n.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,t.memory.geometries--}function c(g,_){return r[_.id]===!0||(_.addEventListener("dispose",o),r[_.id]=!0,t.memory.geometries++),_}function h(g){const _=g.attributes;for(const S in _)e.update(_[S],i.ARRAY_BUFFER)}function d(g){const _=[],S=g.index,M=g.attributes.position;let C=0;if(S!==null){const D=S.array;C=S.version;for(let I=0,L=D.length;I<L;I+=3){const j=D[I+0],Y=D[I+1],k=D[I+2];_.push(j,Y,Y,k,k,j)}}else if(M!==void 0){const D=M.array;C=M.version;for(let I=0,L=D.length/3-1;I<L;I+=3){const j=I+0,Y=I+1,k=I+2;_.push(j,Y,Y,k,k,j)}}else return;const w=new(kk(_)?iR:nR)(_,1);w.version=C;const T=s.get(g);T&&e.remove(T),s.set(g,w)}function m(g){const _=s.get(g);if(_){const S=g.index;S!==null&&_.version<S.version&&d(g)}else d(g);return s.get(g)}return{get:c,update:h,getWireframeAttribute:m}}function WZ(i,e,t){let n;function r(_){n=_}let s,o;function c(_){s=_.type,o=_.bytesPerElement}function h(_,S){i.drawElements(n,S,s,_*o),t.update(S,n,1)}function d(_,S,M){M!==0&&(i.drawElementsInstanced(n,S,s,_*o,M),t.update(S,n,M))}function m(_,S,M){if(M===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,S,0,s,_,0,M);let w=0;for(let T=0;T<M;T++)w+=S[T];t.update(w,n,1)}function g(_,S,M,C){if(M===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let T=0;T<_.length;T++)d(_[T]/o,S[T],C[T]);else{w.multiDrawElementsInstancedWEBGL(n,S,0,s,_,0,C,0,M);let T=0;for(let D=0;D<M;D++)T+=S[D]*C[D];t.update(T,n,1)}}this.setMode=r,this.setIndex=c,this.render=h,this.renderInstances=d,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function XZ(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,c){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=c*(s/3);break;case i.LINES:t.lines+=c*(s/2);break;case i.LINE_STRIP:t.lines+=c*(s-1);break;case i.LINE_LOOP:t.lines+=c*s;break;case i.POINTS:t.points+=c*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function KZ(i,e,t){const n=new WeakMap,r=new ei;function s(o,c,h){const d=o.morphTargetInfluences,m=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,g=m!==void 0?m.length:0;let _=n.get(c);if(_===void 0||_.count!==g){let O=function(){V.dispose(),n.delete(c),c.removeEventListener("dispose",O)};var S=O;_!==void 0&&_.texture.dispose();const M=c.morphAttributes.position!==void 0,C=c.morphAttributes.normal!==void 0,w=c.morphAttributes.color!==void 0,T=c.morphAttributes.position||[],D=c.morphAttributes.normal||[],I=c.morphAttributes.color||[];let L=0;M===!0&&(L=1),C===!0&&(L=2),w===!0&&(L=3);let j=c.attributes.position.count*L,Y=1;j>e.maxTextureSize&&(Y=Math.ceil(j/e.maxTextureSize),j=e.maxTextureSize);const k=new Float32Array(j*Y*4*g),V=new DT(k,j,Y,g);V.type=Za,V.needsUpdate=!0;const N=L*4;for(let z=0;z<g;z++){const W=T[z],q=D[z],he=I[z],fe=j*Y*4*z;for(let H=0;H<W.count;H++){const K=H*N;M===!0&&(r.fromBufferAttribute(W,H),k[fe+K+0]=r.x,k[fe+K+1]=r.y,k[fe+K+2]=r.z,k[fe+K+3]=0),C===!0&&(r.fromBufferAttribute(q,H),k[fe+K+4]=r.x,k[fe+K+5]=r.y,k[fe+K+6]=r.z,k[fe+K+7]=0),w===!0&&(r.fromBufferAttribute(he,H),k[fe+K+8]=r.x,k[fe+K+9]=r.y,k[fe+K+10]=r.z,k[fe+K+11]=he.itemSize===4?r.w:1)}}_={count:g,texture:V,size:new tt(j,Y)},n.set(c,_),c.addEventListener("dispose",O)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)h.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let M=0;for(let w=0;w<d.length;w++)M+=d[w];const C=c.morphTargetsRelative?1:1-M;h.getUniforms().setValue(i,"morphTargetBaseInfluence",C),h.getUniforms().setValue(i,"morphTargetInfluences",d)}h.getUniforms().setValue(i,"morphTargetsTexture",_.texture,t),h.getUniforms().setValue(i,"morphTargetsTextureSize",_.size)}return{update:s}}function QZ(i,e,t,n){let r=new WeakMap;function s(h){const d=n.render.frame,m=h.geometry,g=e.get(h,m);if(r.get(g)!==d&&(e.update(g),r.set(g,d)),h.isInstancedMesh&&(h.hasEventListener("dispose",c)===!1&&h.addEventListener("dispose",c),r.get(h)!==d&&(t.update(h.instanceMatrix,i.ARRAY_BUFFER),h.instanceColor!==null&&t.update(h.instanceColor,i.ARRAY_BUFFER),r.set(h,d))),h.isSkinnedMesh){const _=h.skeleton;r.get(_)!==d&&(_.update(),r.set(_,d))}return g}function o(){r=new WeakMap}function c(h){const d=h.target;d.removeEventListener("dispose",c),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:o}}const G4=new ur,nO=new lR(1,1),j4=new DT,q4=new NT,Y4=new T0,iO=[],rO=[],sO=new Float32Array(16),aO=new Float32Array(9),oO=new Float32Array(4);function wv(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=iO[r];if(s===void 0&&(s=new Float32Array(r),iO[r]=s),e!==0){n.toArray(s,0);for(let o=1,c=0;o!==e;++o)c+=t,i[o].toArray(s,c)}return s}function qr(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Yr(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function $T(i,e){let t=rO[e];t===void 0&&(t=new Int32Array(e),rO[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function ZZ(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function JZ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qr(t,e))return;i.uniform2fv(this.addr,e),Yr(t,e)}}function $Z(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(qr(t,e))return;i.uniform3fv(this.addr,e),Yr(t,e)}}function eJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qr(t,e))return;i.uniform4fv(this.addr,e),Yr(t,e)}}function tJ(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(qr(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Yr(t,e)}else{if(qr(t,n))return;oO.set(n),i.uniformMatrix2fv(this.addr,!1,oO),Yr(t,n)}}function nJ(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(qr(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Yr(t,e)}else{if(qr(t,n))return;aO.set(n),i.uniformMatrix3fv(this.addr,!1,aO),Yr(t,n)}}function iJ(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(qr(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Yr(t,e)}else{if(qr(t,n))return;sO.set(n),i.uniformMatrix4fv(this.addr,!1,sO),Yr(t,n)}}function rJ(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function sJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qr(t,e))return;i.uniform2iv(this.addr,e),Yr(t,e)}}function aJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(qr(t,e))return;i.uniform3iv(this.addr,e),Yr(t,e)}}function oJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qr(t,e))return;i.uniform4iv(this.addr,e),Yr(t,e)}}function lJ(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function cJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qr(t,e))return;i.uniform2uiv(this.addr,e),Yr(t,e)}}function uJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(qr(t,e))return;i.uniform3uiv(this.addr,e),Yr(t,e)}}function hJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qr(t,e))return;i.uniform4uiv(this.addr,e),Yr(t,e)}}function fJ(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(nO.compareFunction=$C,s=nO):s=G4,t.setTexture2D(e||s,r)}function dJ(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||q4,r)}function pJ(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||Y4,r)}function mJ(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||j4,r)}function gJ(i){switch(i){case 5126:return ZZ;case 35664:return JZ;case 35665:return $Z;case 35666:return eJ;case 35674:return tJ;case 35675:return nJ;case 35676:return iJ;case 5124:case 35670:return rJ;case 35667:case 35671:return sJ;case 35668:case 35672:return aJ;case 35669:case 35673:return oJ;case 5125:return lJ;case 36294:return cJ;case 36295:return uJ;case 36296:return hJ;case 35678:case 36198:case 36298:case 36306:case 35682:return fJ;case 35679:case 36299:case 36307:return dJ;case 35680:case 36300:case 36308:case 36293:return pJ;case 36289:case 36303:case 36311:case 36292:return mJ}}function vJ(i,e){i.uniform1fv(this.addr,e)}function yJ(i,e){const t=wv(e,this.size,2);i.uniform2fv(this.addr,t)}function _J(i,e){const t=wv(e,this.size,3);i.uniform3fv(this.addr,t)}function SJ(i,e){const t=wv(e,this.size,4);i.uniform4fv(this.addr,t)}function bJ(i,e){const t=wv(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function xJ(i,e){const t=wv(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function EJ(i,e){const t=wv(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function TJ(i,e){i.uniform1iv(this.addr,e)}function MJ(i,e){i.uniform2iv(this.addr,e)}function wJ(i,e){i.uniform3iv(this.addr,e)}function AJ(i,e){i.uniform4iv(this.addr,e)}function CJ(i,e){i.uniform1uiv(this.addr,e)}function RJ(i,e){i.uniform2uiv(this.addr,e)}function DJ(i,e){i.uniform3uiv(this.addr,e)}function NJ(i,e){i.uniform4uiv(this.addr,e)}function IJ(i,e,t){const n=this.cache,r=e.length,s=$T(t,r);qr(n,s)||(i.uniform1iv(this.addr,s),Yr(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||G4,s[o])}function OJ(i,e,t){const n=this.cache,r=e.length,s=$T(t,r);qr(n,s)||(i.uniform1iv(this.addr,s),Yr(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||q4,s[o])}function PJ(i,e,t){const n=this.cache,r=e.length,s=$T(t,r);qr(n,s)||(i.uniform1iv(this.addr,s),Yr(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||Y4,s[o])}function LJ(i,e,t){const n=this.cache,r=e.length,s=$T(t,r);qr(n,s)||(i.uniform1iv(this.addr,s),Yr(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||j4,s[o])}function UJ(i){switch(i){case 5126:return vJ;case 35664:return yJ;case 35665:return _J;case 35666:return SJ;case 35674:return bJ;case 35675:return xJ;case 35676:return EJ;case 5124:case 35670:return TJ;case 35667:case 35671:return MJ;case 35668:case 35672:return wJ;case 35669:case 35673:return AJ;case 5125:return CJ;case 36294:return RJ;case 36295:return DJ;case 36296:return NJ;case 35678:case 36198:case 36298:case 36306:case 35682:return IJ;case 35679:case 36299:case 36307:return OJ;case 35680:case 36300:case 36308:case 36293:return PJ;case 36289:case 36303:case 36311:case 36292:return LJ}}class kJ{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=gJ(t.type)}}class VJ{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=UJ(t.type)}}class BJ{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const c=r[s];c.setValue(e,t[c.id],n)}}}const s1=/(\w+)(\])?(\[|\.)?/g;function lO(i,e){i.seq.push(e),i.map[e.id]=e}function zJ(i,e,t){const n=i.name,r=n.length;for(s1.lastIndex=0;;){const s=s1.exec(n),o=s1.lastIndex;let c=s[1];const h=s[2]==="]",d=s[3];if(h&&(c=c|0),d===void 0||d==="["&&o+2===r){lO(t,d===void 0?new kJ(c,i,e):new VJ(c,i,e));break}else{let g=t.map[c];g===void 0&&(g=new BJ(c),lO(t,g)),t=g}}}class mx{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);zJ(s,o,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const c=t[s],h=n[c.id];h.needsUpdate!==!1&&c.setValue(e,h.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function cO(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const FJ=37297;let HJ=0;function GJ(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const c=o+1;n.push(`${c===e?">":" "} ${c}: ${t[o]}`)}return n.join(`
`)}const uO=new yn;function jJ(i){Kn._getMatrix(uO,Kn.workingColorSpace,i);const e=`mat3( ${uO.elements.map(t=>t.toFixed(4))} )`;switch(Kn.getTransfer(i)){case K_:return[e,"LinearTransferOETF"];case vi:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function hO(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=(i.getShaderInfoLog(e)||"").trim();if(n&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const c=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+GJ(i.getShaderSource(e),c)}else return s}function qJ(i,e){const t=jJ(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function YJ(i,e){let t;switch(e){case vk:t="Linear";break;case yk:t="Reinhard";break;case _k:t="Cineon";break;case GC:t="ACESFilmic";break;case bk:t="AgX";break;case xk:t="Neutral";break;case Sk:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Fb=new re;function WJ(){Kn.getLuminanceCoefficients(Fb);const i=Fb.x.toFixed(4),e=Fb.y.toFixed(4),t=Fb.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function XJ(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(u_).join(`
`)}function KJ(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function QJ(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let c=1;s.type===i.FLOAT_MAT2&&(c=2),s.type===i.FLOAT_MAT3&&(c=3),s.type===i.FLOAT_MAT4&&(c=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:c}}return t}function u_(i){return i!==""}function fO(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function dO(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ZJ=/^[ \t]*#include +<([\w\d./]+)>/gm;function EA(i){return i.replace(ZJ,$J)}const JJ=new Map;function $J(i,e){let t=wn[e];if(t===void 0){const n=JJ.get(e);if(n!==void 0)t=wn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return EA(t)}const e$=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function pO(i){return i.replace(e$,t$)}function t$(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function mO(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function n$(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===bT?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===b_?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Ul&&(e="SHADOWMAP_TYPE_VSM"),e}function i$(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case ph:case qf:e="ENVMAP_TYPE_CUBE";break;case bv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function r$(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case qf:e="ENVMAP_MODE_REFRACTION";break}return e}function s$(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case x0:e="ENVMAP_BLENDING_MULTIPLY";break;case mk:e="ENVMAP_BLENDING_MIX";break;case gk:e="ENVMAP_BLENDING_ADD";break}return e}function a$(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function o$(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,c=t.fragmentShader;const h=n$(t),d=i$(t),m=r$(t),g=s$(t),_=a$(t),S=XJ(t),M=KJ(s),C=r.createProgram();let w,T,D=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(u_).join(`
`),w.length>0&&(w+=`
`),T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(u_).join(`
`),T.length>0&&(T+=`
`)):(w=[mO(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(u_).join(`
`),T=[mO(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+m:"",t.envMap?"#define "+g:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==eu?"#define TONE_MAPPING":"",t.toneMapping!==eu?wn.tonemapping_pars_fragment:"",t.toneMapping!==eu?YJ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",wn.colorspace_pars_fragment,qJ("linearToOutputTexel",t.outputColorSpace),WJ(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(u_).join(`
`)),o=EA(o),o=fO(o,t),o=dO(o,t),c=EA(c),c=fO(c,t),c=dO(c,t),o=pO(o),c=pO(c),t.isRawShaderMaterial!==!0&&(D=`#version 300 es
`,w=[S,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,T=["#define varying in",t.glslVersion===pA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===pA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);const I=D+w+o,L=D+T+c,j=cO(r,r.VERTEX_SHADER,I),Y=cO(r,r.FRAGMENT_SHADER,L);r.attachShader(C,j),r.attachShader(C,Y),t.index0AttributeName!==void 0?r.bindAttribLocation(C,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(C,0,"position"),r.linkProgram(C);function k(z){if(i.debug.checkShaderErrors){const W=r.getProgramInfoLog(C)||"",q=r.getShaderInfoLog(j)||"",he=r.getShaderInfoLog(Y)||"",fe=W.trim(),H=q.trim(),K=he.trim();let J=!0,oe=!0;if(r.getProgramParameter(C,r.LINK_STATUS)===!1)if(J=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,C,j,Y);else{const se=hO(r,j,"vertex"),Z=hO(r,Y,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(C,r.VALIDATE_STATUS)+`

Material Name: `+z.name+`
Material Type: `+z.type+`

Program Info Log: `+fe+`
`+se+`
`+Z)}else fe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",fe):(H===""||K==="")&&(oe=!1);oe&&(z.diagnostics={runnable:J,programLog:fe,vertexShader:{log:H,prefix:w},fragmentShader:{log:K,prefix:T}})}r.deleteShader(j),r.deleteShader(Y),V=new mx(r,C),N=QJ(r,C)}let V;this.getUniforms=function(){return V===void 0&&k(this),V};let N;this.getAttributes=function(){return N===void 0&&k(this),N};let O=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=r.getProgramParameter(C,FJ)),O},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(C),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=HJ++,this.cacheKey=e,this.usedTimes=1,this.program=C,this.vertexShader=j,this.fragmentShader=Y,this}let l$=0;class c${constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new u$(e),t.set(e,n)),n}}class u${constructor(e){this.id=l$++,this.code=e,this.usedTimes=0}}function h$(i,e,t,n,r,s,o){const c=new Zg,h=new c$,d=new Set,m=[],g=r.logarithmicDepthBuffer,_=r.vertexTextures;let S=r.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function C(N){return d.add(N),N===0?"uv":`uv${N}`}function w(N,O,z,W,q){const he=W.fog,fe=q.geometry,H=N.isMeshStandardMaterial?W.environment:null,K=(N.isMeshStandardMaterial?t:e).get(N.envMap||H),J=K&&K.mapping===bv?K.image.height:null,oe=M[N.type];N.precision!==null&&(S=r.getMaxPrecision(N.precision),S!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",S,"instead."));const se=fe.morphAttributes.position||fe.morphAttributes.normal||fe.morphAttributes.color,Z=se!==void 0?se.length:0;let le=0;fe.morphAttributes.position!==void 0&&(le=1),fe.morphAttributes.normal!==void 0&&(le=2),fe.morphAttributes.color!==void 0&&(le=3);let Ce,Te,Ye,xe;if(oe){const on=kl[oe];Ce=on.vertexShader,Te=on.fragmentShader}else Ce=N.vertexShader,Te=N.fragmentShader,h.update(N),Ye=h.getVertexShaderID(N),xe=h.getFragmentShaderID(N);const Oe=i.getRenderTarget(),rt=i.state.buffers.depth.getReversed(),ft=q.isInstancedMesh===!0,bt=q.isBatchedMesh===!0,en=!!N.map,Cn=!!N.matcap,ae=!!K,We=!!N.aoMap,Ge=!!N.lightMap,ze=!!N.bumpMap,Ve=!!N.normalMap,ht=!!N.displacementMap,qe=!!N.emissiveMap,Je=!!N.metalnessMap,zt=!!N.roughnessMap,Qt=N.anisotropy>0,ie=N.clearcoat>0,X=N.dispersion>0,Se=N.iridescence>0,Pe=N.sheen>0,$e=N.transmission>0,ke=Qt&&!!N.anisotropyMap,It=ie&&!!N.clearcoatMap,ct=ie&&!!N.clearcoatNormalMap,Ct=ie&&!!N.clearcoatRoughnessMap,Rt=Se&&!!N.iridescenceMap,Ze=Se&&!!N.iridescenceThicknessMap,at=Pe&&!!N.sheenColorMap,Nt=Pe&&!!N.sheenRoughnessMap,gt=!!N.specularMap,mt=!!N.specularColorMap,Yt=!!N.specularIntensityMap,pe=$e&&!!N.transmissionMap,it=$e&&!!N.thicknessMap,lt=!!N.gradientMap,pt=!!N.alphaMap,nt=N.alphaTest>0,Fe=!!N.alphaHash,xt=!!N.extensions;let Xt=eu;N.toneMapped&&(Oe===null||Oe.isXRRenderTarget===!0)&&(Xt=i.toneMapping);const In={shaderID:oe,shaderType:N.type,shaderName:N.name,vertexShader:Ce,fragmentShader:Te,defines:N.defines,customVertexShaderID:Ye,customFragmentShaderID:xe,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:S,batching:bt,batchingColor:bt&&q._colorsTexture!==null,instancing:ft,instancingColor:ft&&q.instanceColor!==null,instancingMorph:ft&&q.morphTexture!==null,supportsVertexTextures:_,outputColorSpace:Oe===null?i.outputColorSpace:Oe.isXRRenderTarget===!0?Oe.texture.colorSpace:Yf,alphaToCoverage:!!N.alphaToCoverage,map:en,matcap:Cn,envMap:ae,envMapMode:ae&&K.mapping,envMapCubeUVHeight:J,aoMap:We,lightMap:Ge,bumpMap:ze,normalMap:Ve,displacementMap:_&&ht,emissiveMap:qe,normalMapObjectSpace:Ve&&N.normalMapType===Rk,normalMapTangentSpace:Ve&&N.normalMapType===Zf,metalnessMap:Je,roughnessMap:zt,anisotropy:Qt,anisotropyMap:ke,clearcoat:ie,clearcoatMap:It,clearcoatNormalMap:ct,clearcoatRoughnessMap:Ct,dispersion:X,iridescence:Se,iridescenceMap:Rt,iridescenceThicknessMap:Ze,sheen:Pe,sheenColorMap:at,sheenRoughnessMap:Nt,specularMap:gt,specularColorMap:mt,specularIntensityMap:Yt,transmission:$e,transmissionMap:pe,thicknessMap:it,gradientMap:lt,opaque:N.transparent===!1&&N.blending===Sp&&N.alphaToCoverage===!1,alphaMap:pt,alphaTest:nt,alphaHash:Fe,combine:N.combine,mapUv:en&&C(N.map.channel),aoMapUv:We&&C(N.aoMap.channel),lightMapUv:Ge&&C(N.lightMap.channel),bumpMapUv:ze&&C(N.bumpMap.channel),normalMapUv:Ve&&C(N.normalMap.channel),displacementMapUv:ht&&C(N.displacementMap.channel),emissiveMapUv:qe&&C(N.emissiveMap.channel),metalnessMapUv:Je&&C(N.metalnessMap.channel),roughnessMapUv:zt&&C(N.roughnessMap.channel),anisotropyMapUv:ke&&C(N.anisotropyMap.channel),clearcoatMapUv:It&&C(N.clearcoatMap.channel),clearcoatNormalMapUv:ct&&C(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ct&&C(N.clearcoatRoughnessMap.channel),iridescenceMapUv:Rt&&C(N.iridescenceMap.channel),iridescenceThicknessMapUv:Ze&&C(N.iridescenceThicknessMap.channel),sheenColorMapUv:at&&C(N.sheenColorMap.channel),sheenRoughnessMapUv:Nt&&C(N.sheenRoughnessMap.channel),specularMapUv:gt&&C(N.specularMap.channel),specularColorMapUv:mt&&C(N.specularColorMap.channel),specularIntensityMapUv:Yt&&C(N.specularIntensityMap.channel),transmissionMapUv:pe&&C(N.transmissionMap.channel),thicknessMapUv:it&&C(N.thicknessMap.channel),alphaMapUv:pt&&C(N.alphaMap.channel),vertexTangents:!!fe.attributes.tangent&&(Ve||Qt),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!fe.attributes.color&&fe.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!fe.attributes.uv&&(en||pt),fog:!!he,useFog:N.fog===!0,fogExp2:!!he&&he.isFogExp2,flatShading:N.flatShading===!0&&N.wireframe===!1,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:g,reversedDepthBuffer:rt,skinning:q.isSkinnedMesh===!0,morphTargets:fe.morphAttributes.position!==void 0,morphNormals:fe.morphAttributes.normal!==void 0,morphColors:fe.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:le,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:N.dithering,shadowMapEnabled:i.shadowMap.enabled&&z.length>0,shadowMapType:i.shadowMap.type,toneMapping:Xt,decodeVideoTexture:en&&N.map.isVideoTexture===!0&&Kn.getTransfer(N.map.colorSpace)===vi,decodeVideoTextureEmissive:qe&&N.emissiveMap.isVideoTexture===!0&&Kn.getTransfer(N.emissiveMap.colorSpace)===vi,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===Bc,flipSided:N.side===Ra,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:xt&&N.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(xt&&N.extensions.multiDraw===!0||bt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return In.vertexUv1s=d.has(1),In.vertexUv2s=d.has(2),In.vertexUv3s=d.has(3),d.clear(),In}function T(N){const O=[];if(N.shaderID?O.push(N.shaderID):(O.push(N.customVertexShaderID),O.push(N.customFragmentShaderID)),N.defines!==void 0)for(const z in N.defines)O.push(z),O.push(N.defines[z]);return N.isRawShaderMaterial===!1&&(D(O,N),I(O,N),O.push(i.outputColorSpace)),O.push(N.customProgramCacheKey),O.join()}function D(N,O){N.push(O.precision),N.push(O.outputColorSpace),N.push(O.envMapMode),N.push(O.envMapCubeUVHeight),N.push(O.mapUv),N.push(O.alphaMapUv),N.push(O.lightMapUv),N.push(O.aoMapUv),N.push(O.bumpMapUv),N.push(O.normalMapUv),N.push(O.displacementMapUv),N.push(O.emissiveMapUv),N.push(O.metalnessMapUv),N.push(O.roughnessMapUv),N.push(O.anisotropyMapUv),N.push(O.clearcoatMapUv),N.push(O.clearcoatNormalMapUv),N.push(O.clearcoatRoughnessMapUv),N.push(O.iridescenceMapUv),N.push(O.iridescenceThicknessMapUv),N.push(O.sheenColorMapUv),N.push(O.sheenRoughnessMapUv),N.push(O.specularMapUv),N.push(O.specularColorMapUv),N.push(O.specularIntensityMapUv),N.push(O.transmissionMapUv),N.push(O.thicknessMapUv),N.push(O.combine),N.push(O.fogExp2),N.push(O.sizeAttenuation),N.push(O.morphTargetsCount),N.push(O.morphAttributeCount),N.push(O.numDirLights),N.push(O.numPointLights),N.push(O.numSpotLights),N.push(O.numSpotLightMaps),N.push(O.numHemiLights),N.push(O.numRectAreaLights),N.push(O.numDirLightShadows),N.push(O.numPointLightShadows),N.push(O.numSpotLightShadows),N.push(O.numSpotLightShadowsWithMaps),N.push(O.numLightProbes),N.push(O.shadowMapType),N.push(O.toneMapping),N.push(O.numClippingPlanes),N.push(O.numClipIntersection),N.push(O.depthPacking)}function I(N,O){c.disableAll(),O.supportsVertexTextures&&c.enable(0),O.instancing&&c.enable(1),O.instancingColor&&c.enable(2),O.instancingMorph&&c.enable(3),O.matcap&&c.enable(4),O.envMap&&c.enable(5),O.normalMapObjectSpace&&c.enable(6),O.normalMapTangentSpace&&c.enable(7),O.clearcoat&&c.enable(8),O.iridescence&&c.enable(9),O.alphaTest&&c.enable(10),O.vertexColors&&c.enable(11),O.vertexAlphas&&c.enable(12),O.vertexUv1s&&c.enable(13),O.vertexUv2s&&c.enable(14),O.vertexUv3s&&c.enable(15),O.vertexTangents&&c.enable(16),O.anisotropy&&c.enable(17),O.alphaHash&&c.enable(18),O.batching&&c.enable(19),O.dispersion&&c.enable(20),O.batchingColor&&c.enable(21),O.gradientMap&&c.enable(22),N.push(c.mask),c.disableAll(),O.fog&&c.enable(0),O.useFog&&c.enable(1),O.flatShading&&c.enable(2),O.logarithmicDepthBuffer&&c.enable(3),O.reversedDepthBuffer&&c.enable(4),O.skinning&&c.enable(5),O.morphTargets&&c.enable(6),O.morphNormals&&c.enable(7),O.morphColors&&c.enable(8),O.premultipliedAlpha&&c.enable(9),O.shadowMapEnabled&&c.enable(10),O.doubleSided&&c.enable(11),O.flipSided&&c.enable(12),O.useDepthPacking&&c.enable(13),O.dithering&&c.enable(14),O.transmission&&c.enable(15),O.sheen&&c.enable(16),O.opaque&&c.enable(17),O.pointsUvs&&c.enable(18),O.decodeVideoTexture&&c.enable(19),O.decodeVideoTextureEmissive&&c.enable(20),O.alphaToCoverage&&c.enable(21),N.push(c.mask)}function L(N){const O=M[N.type];let z;if(O){const W=kl[O];z=Hk.clone(W.uniforms)}else z=N.uniforms;return z}function j(N,O){let z;for(let W=0,q=m.length;W<q;W++){const he=m[W];if(he.cacheKey===O){z=he,++z.usedTimes;break}}return z===void 0&&(z=new o$(i,O,N,s),m.push(z)),z}function Y(N){if(--N.usedTimes===0){const O=m.indexOf(N);m[O]=m[m.length-1],m.pop(),N.destroy()}}function k(N){h.remove(N)}function V(){h.dispose()}return{getParameters:w,getProgramCacheKey:T,getUniforms:L,acquireProgram:j,releaseProgram:Y,releaseShaderCache:k,programs:m,dispose:V}}function f$(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let c=i.get(o);return c===void 0&&(c={},i.set(o,c)),c}function n(o){i.delete(o)}function r(o,c,h){i.get(o)[c]=h}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function d$(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function gO(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function vO(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function o(g,_,S,M,C,w){let T=i[e];return T===void 0?(T={id:g.id,object:g,geometry:_,material:S,groupOrder:M,renderOrder:g.renderOrder,z:C,group:w},i[e]=T):(T.id=g.id,T.object=g,T.geometry=_,T.material=S,T.groupOrder=M,T.renderOrder=g.renderOrder,T.z=C,T.group=w),e++,T}function c(g,_,S,M,C,w){const T=o(g,_,S,M,C,w);S.transmission>0?n.push(T):S.transparent===!0?r.push(T):t.push(T)}function h(g,_,S,M,C,w){const T=o(g,_,S,M,C,w);S.transmission>0?n.unshift(T):S.transparent===!0?r.unshift(T):t.unshift(T)}function d(g,_){t.length>1&&t.sort(g||d$),n.length>1&&n.sort(_||gO),r.length>1&&r.sort(_||gO)}function m(){for(let g=e,_=i.length;g<_;g++){const S=i[g];if(S.id===null)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:c,unshift:h,finish:m,sort:d}}function p$(){let i=new WeakMap;function e(n,r){const s=i.get(n);let o;return s===void 0?(o=new vO,i.set(n,[o])):r>=s.length?(o=new vO,s.push(o)):o=s[r],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function m$(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new re,color:new At};break;case"SpotLight":t={position:new re,direction:new re,color:new At,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new re,color:new At,distance:0,decay:0};break;case"HemisphereLight":t={direction:new re,skyColor:new At,groundColor:new At};break;case"RectAreaLight":t={color:new At,position:new re,halfWidth:new re,halfHeight:new re};break}return i[e.id]=t,t}}}function g$(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let v$=0;function y$(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function _$(i){const e=new m$,t=g$(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)n.probe.push(new re);const r=new re,s=new sn,o=new sn;function c(d){let m=0,g=0,_=0;for(let N=0;N<9;N++)n.probe[N].set(0,0,0);let S=0,M=0,C=0,w=0,T=0,D=0,I=0,L=0,j=0,Y=0,k=0;d.sort(y$);for(let N=0,O=d.length;N<O;N++){const z=d[N],W=z.color,q=z.intensity,he=z.distance,fe=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)m+=W.r*q,g+=W.g*q,_+=W.b*q;else if(z.isLightProbe){for(let H=0;H<9;H++)n.probe[H].addScaledVector(z.sh.coefficients[H],q);k++}else if(z.isDirectionalLight){const H=e.get(z);if(H.color.copy(z.color).multiplyScalar(z.intensity),z.castShadow){const K=z.shadow,J=t.get(z);J.shadowIntensity=K.intensity,J.shadowBias=K.bias,J.shadowNormalBias=K.normalBias,J.shadowRadius=K.radius,J.shadowMapSize=K.mapSize,n.directionalShadow[S]=J,n.directionalShadowMap[S]=fe,n.directionalShadowMatrix[S]=z.shadow.matrix,D++}n.directional[S]=H,S++}else if(z.isSpotLight){const H=e.get(z);H.position.setFromMatrixPosition(z.matrixWorld),H.color.copy(W).multiplyScalar(q),H.distance=he,H.coneCos=Math.cos(z.angle),H.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),H.decay=z.decay,n.spot[C]=H;const K=z.shadow;if(z.map&&(n.spotLightMap[j]=z.map,j++,K.updateMatrices(z),z.castShadow&&Y++),n.spotLightMatrix[C]=K.matrix,z.castShadow){const J=t.get(z);J.shadowIntensity=K.intensity,J.shadowBias=K.bias,J.shadowNormalBias=K.normalBias,J.shadowRadius=K.radius,J.shadowMapSize=K.mapSize,n.spotShadow[C]=J,n.spotShadowMap[C]=fe,L++}C++}else if(z.isRectAreaLight){const H=e.get(z);H.color.copy(W).multiplyScalar(q),H.halfWidth.set(z.width*.5,0,0),H.halfHeight.set(0,z.height*.5,0),n.rectArea[w]=H,w++}else if(z.isPointLight){const H=e.get(z);if(H.color.copy(z.color).multiplyScalar(z.intensity),H.distance=z.distance,H.decay=z.decay,z.castShadow){const K=z.shadow,J=t.get(z);J.shadowIntensity=K.intensity,J.shadowBias=K.bias,J.shadowNormalBias=K.normalBias,J.shadowRadius=K.radius,J.shadowMapSize=K.mapSize,J.shadowCameraNear=K.camera.near,J.shadowCameraFar=K.camera.far,n.pointShadow[M]=J,n.pointShadowMap[M]=fe,n.pointShadowMatrix[M]=z.shadow.matrix,I++}n.point[M]=H,M++}else if(z.isHemisphereLight){const H=e.get(z);H.skyColor.copy(z.color).multiplyScalar(q),H.groundColor.copy(z.groundColor).multiplyScalar(q),n.hemi[T]=H,T++}}w>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=St.LTC_FLOAT_1,n.rectAreaLTC2=St.LTC_FLOAT_2):(n.rectAreaLTC1=St.LTC_HALF_1,n.rectAreaLTC2=St.LTC_HALF_2)),n.ambient[0]=m,n.ambient[1]=g,n.ambient[2]=_;const V=n.hash;(V.directionalLength!==S||V.pointLength!==M||V.spotLength!==C||V.rectAreaLength!==w||V.hemiLength!==T||V.numDirectionalShadows!==D||V.numPointShadows!==I||V.numSpotShadows!==L||V.numSpotMaps!==j||V.numLightProbes!==k)&&(n.directional.length=S,n.spot.length=C,n.rectArea.length=w,n.point.length=M,n.hemi.length=T,n.directionalShadow.length=D,n.directionalShadowMap.length=D,n.pointShadow.length=I,n.pointShadowMap.length=I,n.spotShadow.length=L,n.spotShadowMap.length=L,n.directionalShadowMatrix.length=D,n.pointShadowMatrix.length=I,n.spotLightMatrix.length=L+j-Y,n.spotLightMap.length=j,n.numSpotLightShadowsWithMaps=Y,n.numLightProbes=k,V.directionalLength=S,V.pointLength=M,V.spotLength=C,V.rectAreaLength=w,V.hemiLength=T,V.numDirectionalShadows=D,V.numPointShadows=I,V.numSpotShadows=L,V.numSpotMaps=j,V.numLightProbes=k,n.version=v$++)}function h(d,m){let g=0,_=0,S=0,M=0,C=0;const w=m.matrixWorldInverse;for(let T=0,D=d.length;T<D;T++){const I=d[T];if(I.isDirectionalLight){const L=n.directional[g];L.direction.setFromMatrixPosition(I.matrixWorld),r.setFromMatrixPosition(I.target.matrixWorld),L.direction.sub(r),L.direction.transformDirection(w),g++}else if(I.isSpotLight){const L=n.spot[S];L.position.setFromMatrixPosition(I.matrixWorld),L.position.applyMatrix4(w),L.direction.setFromMatrixPosition(I.matrixWorld),r.setFromMatrixPosition(I.target.matrixWorld),L.direction.sub(r),L.direction.transformDirection(w),S++}else if(I.isRectAreaLight){const L=n.rectArea[M];L.position.setFromMatrixPosition(I.matrixWorld),L.position.applyMatrix4(w),o.identity(),s.copy(I.matrixWorld),s.premultiply(w),o.extractRotation(s),L.halfWidth.set(I.width*.5,0,0),L.halfHeight.set(0,I.height*.5,0),L.halfWidth.applyMatrix4(o),L.halfHeight.applyMatrix4(o),M++}else if(I.isPointLight){const L=n.point[_];L.position.setFromMatrixPosition(I.matrixWorld),L.position.applyMatrix4(w),_++}else if(I.isHemisphereLight){const L=n.hemi[C];L.direction.setFromMatrixPosition(I.matrixWorld),L.direction.transformDirection(w),C++}}}return{setup:c,setupView:h,state:n}}function yO(i){const e=new _$(i),t=[],n=[];function r(m){d.camera=m,t.length=0,n.length=0}function s(m){t.push(m)}function o(m){n.push(m)}function c(){e.setup(t)}function h(m){e.setupView(t,m)}const d={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:d,setupLights:c,setupLightsView:h,pushLight:s,pushShadow:o}}function S$(i){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let c;return o===void 0?(c=new yO(i),e.set(r,[c])):s>=o.length?(c=new yO(i),o.push(c)):c=o[s],c}function n(){e=new WeakMap}return{get:t,dispose:n}}const b$=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,x$=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function E$(i,e,t){let n=new Tv;const r=new tt,s=new tt,o=new ei,c=new vR({depthPacking:Ck}),h=new yR,d={},m=t.maxTextureSize,g={[dh]:Ra,[Ra]:dh,[Bc]:Bc},_=new Ql({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tt},radius:{value:4}},vertexShader:b$,fragmentShader:x$}),S=_.clone();S.defines.HORIZONTAL_PASS=1;const M=new bn;M.setAttribute("position",new Mi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new Pr(M,_),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=bT;let T=this.type;this.render=function(Y,k,V){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||Y.length===0)return;const N=i.getRenderTarget(),O=i.getActiveCubeFace(),z=i.getActiveMipmapLevel(),W=i.state;W.setBlending(ih),W.buffers.depth.getReversed()===!0?W.buffers.color.setClear(0,0,0,0):W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);const q=T!==Ul&&this.type===Ul,he=T===Ul&&this.type!==Ul;for(let fe=0,H=Y.length;fe<H;fe++){const K=Y[fe],J=K.shadow;if(J===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(J.autoUpdate===!1&&J.needsUpdate===!1)continue;r.copy(J.mapSize);const oe=J.getFrameExtents();if(r.multiply(oe),s.copy(J.mapSize),(r.x>m||r.y>m)&&(r.x>m&&(s.x=Math.floor(m/oe.x),r.x=s.x*oe.x,J.mapSize.x=s.x),r.y>m&&(s.y=Math.floor(m/oe.y),r.y=s.y*oe.y,J.mapSize.y=s.y)),J.map===null||q===!0||he===!0){const Z=this.type!==Ul?{minFilter:xs,magFilter:xs}:{};J.map!==null&&J.map.dispose(),J.map=new au(r.x,r.y,Z),J.map.texture.name=K.name+".shadowMap",J.camera.updateProjectionMatrix()}i.setRenderTarget(J.map),i.clear();const se=J.getViewportCount();for(let Z=0;Z<se;Z++){const le=J.getViewport(Z);o.set(s.x*le.x,s.y*le.y,s.x*le.z,s.y*le.w),W.viewport(o),J.updateMatrices(K,Z),n=J.getFrustum(),L(k,V,J.camera,K,this.type)}J.isPointLightShadow!==!0&&this.type===Ul&&D(J,V),J.needsUpdate=!1}T=this.type,w.needsUpdate=!1,i.setRenderTarget(N,O,z)};function D(Y,k){const V=e.update(C);_.defines.VSM_SAMPLES!==Y.blurSamples&&(_.defines.VSM_SAMPLES=Y.blurSamples,S.defines.VSM_SAMPLES=Y.blurSamples,_.needsUpdate=!0,S.needsUpdate=!0),Y.mapPass===null&&(Y.mapPass=new au(r.x,r.y)),_.uniforms.shadow_pass.value=Y.map.texture,_.uniforms.resolution.value=Y.mapSize,_.uniforms.radius.value=Y.radius,i.setRenderTarget(Y.mapPass),i.clear(),i.renderBufferDirect(k,null,V,_,C,null),S.uniforms.shadow_pass.value=Y.mapPass.texture,S.uniforms.resolution.value=Y.mapSize,S.uniforms.radius.value=Y.radius,i.setRenderTarget(Y.map),i.clear(),i.renderBufferDirect(k,null,V,S,C,null)}function I(Y,k,V,N){let O=null;const z=V.isPointLight===!0?Y.customDistanceMaterial:Y.customDepthMaterial;if(z!==void 0)O=z;else if(O=V.isPointLight===!0?h:c,i.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0||k.alphaToCoverage===!0){const W=O.uuid,q=k.uuid;let he=d[W];he===void 0&&(he={},d[W]=he);let fe=he[q];fe===void 0&&(fe=O.clone(),he[q]=fe,k.addEventListener("dispose",j)),O=fe}if(O.visible=k.visible,O.wireframe=k.wireframe,N===Ul?O.side=k.shadowSide!==null?k.shadowSide:k.side:O.side=k.shadowSide!==null?k.shadowSide:g[k.side],O.alphaMap=k.alphaMap,O.alphaTest=k.alphaToCoverage===!0?.5:k.alphaTest,O.map=k.map,O.clipShadows=k.clipShadows,O.clippingPlanes=k.clippingPlanes,O.clipIntersection=k.clipIntersection,O.displacementMap=k.displacementMap,O.displacementScale=k.displacementScale,O.displacementBias=k.displacementBias,O.wireframeLinewidth=k.wireframeLinewidth,O.linewidth=k.linewidth,V.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const W=i.properties.get(O);W.light=V}return O}function L(Y,k,V,N,O){if(Y.visible===!1)return;if(Y.layers.test(k.layers)&&(Y.isMesh||Y.isLine||Y.isPoints)&&(Y.castShadow||Y.receiveShadow&&O===Ul)&&(!Y.frustumCulled||n.intersectsObject(Y))){Y.modelViewMatrix.multiplyMatrices(V.matrixWorldInverse,Y.matrixWorld);const q=e.update(Y),he=Y.material;if(Array.isArray(he)){const fe=q.groups;for(let H=0,K=fe.length;H<K;H++){const J=fe[H],oe=he[J.materialIndex];if(oe&&oe.visible){const se=I(Y,oe,N,O);Y.onBeforeShadow(i,Y,k,V,q,se,J),i.renderBufferDirect(V,null,q,se,Y,J),Y.onAfterShadow(i,Y,k,V,q,se,J)}}}else if(he.visible){const fe=I(Y,he,N,O);Y.onBeforeShadow(i,Y,k,V,q,fe,null),i.renderBufferDirect(V,null,q,fe,Y,null),Y.onAfterShadow(i,Y,k,V,q,fe,null)}}const W=Y.children;for(let q=0,he=W.length;q<he;q++)L(W[q],k,V,N,O)}function j(Y){Y.target.removeEventListener("dispose",j);for(const V in d){const N=d[V],O=Y.target.uuid;O in N&&(N[O].dispose(),delete N[O])}}}const T$={[Yx]:Wx,[Xx]:Zx,[Kx]:Jx,[Dp]:Qx,[Wx]:Yx,[Zx]:Xx,[Jx]:Kx,[Qx]:Dp};function M$(i,e){function t(){let pe=!1;const it=new ei;let lt=null;const pt=new ei(0,0,0,0);return{setMask:function(nt){lt!==nt&&!pe&&(i.colorMask(nt,nt,nt,nt),lt=nt)},setLocked:function(nt){pe=nt},setClear:function(nt,Fe,xt,Xt,In){In===!0&&(nt*=Xt,Fe*=Xt,xt*=Xt),it.set(nt,Fe,xt,Xt),pt.equals(it)===!1&&(i.clearColor(nt,Fe,xt,Xt),pt.copy(it))},reset:function(){pe=!1,lt=null,pt.set(-1,0,0,0)}}}function n(){let pe=!1,it=!1,lt=null,pt=null,nt=null;return{setReversed:function(Fe){if(it!==Fe){const xt=e.get("EXT_clip_control");Fe?xt.clipControlEXT(xt.LOWER_LEFT_EXT,xt.ZERO_TO_ONE_EXT):xt.clipControlEXT(xt.LOWER_LEFT_EXT,xt.NEGATIVE_ONE_TO_ONE_EXT),it=Fe;const Xt=nt;nt=null,this.setClear(Xt)}},getReversed:function(){return it},setTest:function(Fe){Fe?Oe(i.DEPTH_TEST):rt(i.DEPTH_TEST)},setMask:function(Fe){lt!==Fe&&!pe&&(i.depthMask(Fe),lt=Fe)},setFunc:function(Fe){if(it&&(Fe=T$[Fe]),pt!==Fe){switch(Fe){case Yx:i.depthFunc(i.NEVER);break;case Wx:i.depthFunc(i.ALWAYS);break;case Xx:i.depthFunc(i.LESS);break;case Dp:i.depthFunc(i.LEQUAL);break;case Kx:i.depthFunc(i.EQUAL);break;case Qx:i.depthFunc(i.GEQUAL);break;case Zx:i.depthFunc(i.GREATER);break;case Jx:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}pt=Fe}},setLocked:function(Fe){pe=Fe},setClear:function(Fe){nt!==Fe&&(it&&(Fe=1-Fe),i.clearDepth(Fe),nt=Fe)},reset:function(){pe=!1,lt=null,pt=null,nt=null,it=!1}}}function r(){let pe=!1,it=null,lt=null,pt=null,nt=null,Fe=null,xt=null,Xt=null,In=null;return{setTest:function(on){pe||(on?Oe(i.STENCIL_TEST):rt(i.STENCIL_TEST))},setMask:function(on){it!==on&&!pe&&(i.stencilMask(on),it=on)},setFunc:function(on,br,as){(lt!==on||pt!==br||nt!==as)&&(i.stencilFunc(on,br,as),lt=on,pt=br,nt=as)},setOp:function(on,br,as){(Fe!==on||xt!==br||Xt!==as)&&(i.stencilOp(on,br,as),Fe=on,xt=br,Xt=as)},setLocked:function(on){pe=on},setClear:function(on){In!==on&&(i.clearStencil(on),In=on)},reset:function(){pe=!1,it=null,lt=null,pt=null,nt=null,Fe=null,xt=null,Xt=null,In=null}}}const s=new t,o=new n,c=new r,h=new WeakMap,d=new WeakMap;let m={},g={},_=new WeakMap,S=[],M=null,C=!1,w=null,T=null,D=null,I=null,L=null,j=null,Y=null,k=new At(0,0,0),V=0,N=!1,O=null,z=null,W=null,q=null,he=null;const fe=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let H=!1,K=0;const J=i.getParameter(i.VERSION);J.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(J)[1]),H=K>=1):J.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),H=K>=2);let oe=null,se={};const Z=i.getParameter(i.SCISSOR_BOX),le=i.getParameter(i.VIEWPORT),Ce=new ei().fromArray(Z),Te=new ei().fromArray(le);function Ye(pe,it,lt,pt){const nt=new Uint8Array(4),Fe=i.createTexture();i.bindTexture(pe,Fe),i.texParameteri(pe,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(pe,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let xt=0;xt<lt;xt++)pe===i.TEXTURE_3D||pe===i.TEXTURE_2D_ARRAY?i.texImage3D(it,0,i.RGBA,1,1,pt,0,i.RGBA,i.UNSIGNED_BYTE,nt):i.texImage2D(it+xt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,nt);return Fe}const xe={};xe[i.TEXTURE_2D]=Ye(i.TEXTURE_2D,i.TEXTURE_2D,1),xe[i.TEXTURE_CUBE_MAP]=Ye(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),xe[i.TEXTURE_2D_ARRAY]=Ye(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),xe[i.TEXTURE_3D]=Ye(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),c.setClear(0),Oe(i.DEPTH_TEST),o.setFunc(Dp),ze(!1),Ve(lA),Oe(i.CULL_FACE),We(ih);function Oe(pe){m[pe]!==!0&&(i.enable(pe),m[pe]=!0)}function rt(pe){m[pe]!==!1&&(i.disable(pe),m[pe]=!1)}function ft(pe,it){return g[pe]!==it?(i.bindFramebuffer(pe,it),g[pe]=it,pe===i.DRAW_FRAMEBUFFER&&(g[i.FRAMEBUFFER]=it),pe===i.FRAMEBUFFER&&(g[i.DRAW_FRAMEBUFFER]=it),!0):!1}function bt(pe,it){let lt=S,pt=!1;if(pe){lt=_.get(it),lt===void 0&&(lt=[],_.set(it,lt));const nt=pe.textures;if(lt.length!==nt.length||lt[0]!==i.COLOR_ATTACHMENT0){for(let Fe=0,xt=nt.length;Fe<xt;Fe++)lt[Fe]=i.COLOR_ATTACHMENT0+Fe;lt.length=nt.length,pt=!0}}else lt[0]!==i.BACK&&(lt[0]=i.BACK,pt=!0);pt&&i.drawBuffers(lt)}function en(pe){return M!==pe?(i.useProgram(pe),M=pe,!0):!1}const Cn={[wf]:i.FUNC_ADD,[JU]:i.FUNC_SUBTRACT,[$U]:i.FUNC_REVERSE_SUBTRACT};Cn[ek]=i.MIN,Cn[tk]=i.MAX;const ae={[nk]:i.ZERO,[ik]:i.ONE,[rk]:i.SRC_COLOR,[jx]:i.SRC_ALPHA,[uk]:i.SRC_ALPHA_SATURATE,[lk]:i.DST_COLOR,[ak]:i.DST_ALPHA,[sk]:i.ONE_MINUS_SRC_COLOR,[qx]:i.ONE_MINUS_SRC_ALPHA,[ck]:i.ONE_MINUS_DST_COLOR,[ok]:i.ONE_MINUS_DST_ALPHA,[hk]:i.CONSTANT_COLOR,[fk]:i.ONE_MINUS_CONSTANT_COLOR,[dk]:i.CONSTANT_ALPHA,[pk]:i.ONE_MINUS_CONSTANT_ALPHA};function We(pe,it,lt,pt,nt,Fe,xt,Xt,In,on){if(pe===ih){C===!0&&(rt(i.BLEND),C=!1);return}if(C===!1&&(Oe(i.BLEND),C=!0),pe!==ZU){if(pe!==w||on!==N){if((T!==wf||L!==wf)&&(i.blendEquation(i.FUNC_ADD),T=wf,L=wf),on)switch(pe){case Sp:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case cA:i.blendFunc(i.ONE,i.ONE);break;case uA:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case hA:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}else switch(pe){case Sp:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case cA:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case uA:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case hA:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}D=null,I=null,j=null,Y=null,k.set(0,0,0),V=0,w=pe,N=on}return}nt=nt||it,Fe=Fe||lt,xt=xt||pt,(it!==T||nt!==L)&&(i.blendEquationSeparate(Cn[it],Cn[nt]),T=it,L=nt),(lt!==D||pt!==I||Fe!==j||xt!==Y)&&(i.blendFuncSeparate(ae[lt],ae[pt],ae[Fe],ae[xt]),D=lt,I=pt,j=Fe,Y=xt),(Xt.equals(k)===!1||In!==V)&&(i.blendColor(Xt.r,Xt.g,Xt.b,In),k.copy(Xt),V=In),w=pe,N=!1}function Ge(pe,it){pe.side===Bc?rt(i.CULL_FACE):Oe(i.CULL_FACE);let lt=pe.side===Ra;it&&(lt=!lt),ze(lt),pe.blending===Sp&&pe.transparent===!1?We(ih):We(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.blendColor,pe.blendAlpha,pe.premultipliedAlpha),o.setFunc(pe.depthFunc),o.setTest(pe.depthTest),o.setMask(pe.depthWrite),s.setMask(pe.colorWrite);const pt=pe.stencilWrite;c.setTest(pt),pt&&(c.setMask(pe.stencilWriteMask),c.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),c.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),qe(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),pe.alphaToCoverage===!0?Oe(i.SAMPLE_ALPHA_TO_COVERAGE):rt(i.SAMPLE_ALPHA_TO_COVERAGE)}function ze(pe){O!==pe&&(pe?i.frontFace(i.CW):i.frontFace(i.CCW),O=pe)}function Ve(pe){pe!==XU?(Oe(i.CULL_FACE),pe!==z&&(pe===lA?i.cullFace(i.BACK):pe===KU?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):rt(i.CULL_FACE),z=pe}function ht(pe){pe!==W&&(H&&i.lineWidth(pe),W=pe)}function qe(pe,it,lt){pe?(Oe(i.POLYGON_OFFSET_FILL),(q!==it||he!==lt)&&(i.polygonOffset(it,lt),q=it,he=lt)):rt(i.POLYGON_OFFSET_FILL)}function Je(pe){pe?Oe(i.SCISSOR_TEST):rt(i.SCISSOR_TEST)}function zt(pe){pe===void 0&&(pe=i.TEXTURE0+fe-1),oe!==pe&&(i.activeTexture(pe),oe=pe)}function Qt(pe,it,lt){lt===void 0&&(oe===null?lt=i.TEXTURE0+fe-1:lt=oe);let pt=se[lt];pt===void 0&&(pt={type:void 0,texture:void 0},se[lt]=pt),(pt.type!==pe||pt.texture!==it)&&(oe!==lt&&(i.activeTexture(lt),oe=lt),i.bindTexture(pe,it||xe[pe]),pt.type=pe,pt.texture=it)}function ie(){const pe=se[oe];pe!==void 0&&pe.type!==void 0&&(i.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)}function X(){try{i.compressedTexImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Se(){try{i.compressedTexImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Pe(){try{i.texSubImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function $e(){try{i.texSubImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function ke(){try{i.compressedTexSubImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function It(){try{i.compressedTexSubImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function ct(){try{i.texStorage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Ct(){try{i.texStorage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Rt(){try{i.texImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Ze(){try{i.texImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function at(pe){Ce.equals(pe)===!1&&(i.scissor(pe.x,pe.y,pe.z,pe.w),Ce.copy(pe))}function Nt(pe){Te.equals(pe)===!1&&(i.viewport(pe.x,pe.y,pe.z,pe.w),Te.copy(pe))}function gt(pe,it){let lt=d.get(it);lt===void 0&&(lt=new WeakMap,d.set(it,lt));let pt=lt.get(pe);pt===void 0&&(pt=i.getUniformBlockIndex(it,pe.name),lt.set(pe,pt))}function mt(pe,it){const pt=d.get(it).get(pe);h.get(it)!==pt&&(i.uniformBlockBinding(it,pt,pe.__bindingPointIndex),h.set(it,pt))}function Yt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),m={},oe=null,se={},g={},_=new WeakMap,S=[],M=null,C=!1,w=null,T=null,D=null,I=null,L=null,j=null,Y=null,k=new At(0,0,0),V=0,N=!1,O=null,z=null,W=null,q=null,he=null,Ce.set(0,0,i.canvas.width,i.canvas.height),Te.set(0,0,i.canvas.width,i.canvas.height),s.reset(),o.reset(),c.reset()}return{buffers:{color:s,depth:o,stencil:c},enable:Oe,disable:rt,bindFramebuffer:ft,drawBuffers:bt,useProgram:en,setBlending:We,setMaterial:Ge,setFlipSided:ze,setCullFace:Ve,setLineWidth:ht,setPolygonOffset:qe,setScissorTest:Je,activeTexture:zt,bindTexture:Qt,unbindTexture:ie,compressedTexImage2D:X,compressedTexImage3D:Se,texImage2D:Rt,texImage3D:Ze,updateUBOMapping:gt,uniformBlockBinding:mt,texStorage2D:ct,texStorage3D:Ct,texSubImage2D:Pe,texSubImage3D:$e,compressedTexSubImage2D:ke,compressedTexSubImage3D:It,scissor:at,viewport:Nt,reset:Yt}}function w$(i,e,t,n,r,s,o){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new tt,m=new WeakMap;let g;const _=new WeakMap;let S=!1;try{S=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(ie,X){return S?new OffscreenCanvas(ie,X):Z_("canvas")}function C(ie,X,Se){let Pe=1;const $e=Qt(ie);if(($e.width>Se||$e.height>Se)&&(Pe=Se/Math.max($e.width,$e.height)),Pe<1)if(typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ie instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ie instanceof ImageBitmap||typeof VideoFrame<"u"&&ie instanceof VideoFrame){const ke=Math.floor(Pe*$e.width),It=Math.floor(Pe*$e.height);g===void 0&&(g=M(ke,It));const ct=X?M(ke,It):g;return ct.width=ke,ct.height=It,ct.getContext("2d").drawImage(ie,0,0,ke,It),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+$e.width+"x"+$e.height+") to ("+ke+"x"+It+")."),ct}else return"data"in ie&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+$e.width+"x"+$e.height+")."),ie;return ie}function w(ie){return ie.generateMipmaps}function T(ie){i.generateMipmap(ie)}function D(ie){return ie.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:ie.isWebGL3DRenderTarget?i.TEXTURE_3D:ie.isWebGLArrayRenderTarget||ie.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function I(ie,X,Se,Pe,$e=!1){if(ie!==null){if(i[ie]!==void 0)return i[ie];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ie+"'")}let ke=X;if(X===i.RED&&(Se===i.FLOAT&&(ke=i.R32F),Se===i.HALF_FLOAT&&(ke=i.R16F),Se===i.UNSIGNED_BYTE&&(ke=i.R8)),X===i.RED_INTEGER&&(Se===i.UNSIGNED_BYTE&&(ke=i.R8UI),Se===i.UNSIGNED_SHORT&&(ke=i.R16UI),Se===i.UNSIGNED_INT&&(ke=i.R32UI),Se===i.BYTE&&(ke=i.R8I),Se===i.SHORT&&(ke=i.R16I),Se===i.INT&&(ke=i.R32I)),X===i.RG&&(Se===i.FLOAT&&(ke=i.RG32F),Se===i.HALF_FLOAT&&(ke=i.RG16F),Se===i.UNSIGNED_BYTE&&(ke=i.RG8)),X===i.RG_INTEGER&&(Se===i.UNSIGNED_BYTE&&(ke=i.RG8UI),Se===i.UNSIGNED_SHORT&&(ke=i.RG16UI),Se===i.UNSIGNED_INT&&(ke=i.RG32UI),Se===i.BYTE&&(ke=i.RG8I),Se===i.SHORT&&(ke=i.RG16I),Se===i.INT&&(ke=i.RG32I)),X===i.RGB_INTEGER&&(Se===i.UNSIGNED_BYTE&&(ke=i.RGB8UI),Se===i.UNSIGNED_SHORT&&(ke=i.RGB16UI),Se===i.UNSIGNED_INT&&(ke=i.RGB32UI),Se===i.BYTE&&(ke=i.RGB8I),Se===i.SHORT&&(ke=i.RGB16I),Se===i.INT&&(ke=i.RGB32I)),X===i.RGBA_INTEGER&&(Se===i.UNSIGNED_BYTE&&(ke=i.RGBA8UI),Se===i.UNSIGNED_SHORT&&(ke=i.RGBA16UI),Se===i.UNSIGNED_INT&&(ke=i.RGBA32UI),Se===i.BYTE&&(ke=i.RGBA8I),Se===i.SHORT&&(ke=i.RGBA16I),Se===i.INT&&(ke=i.RGBA32I)),X===i.RGB&&(Se===i.UNSIGNED_INT_5_9_9_9_REV&&(ke=i.RGB9_E5),Se===i.UNSIGNED_INT_10F_11F_11F_REV&&(ke=i.R11F_G11F_B10F)),X===i.RGBA){const It=$e?K_:Kn.getTransfer(Pe);Se===i.FLOAT&&(ke=i.RGBA32F),Se===i.HALF_FLOAT&&(ke=i.RGBA16F),Se===i.UNSIGNED_BYTE&&(ke=It===vi?i.SRGB8_ALPHA8:i.RGBA8),Se===i.UNSIGNED_SHORT_4_4_4_4&&(ke=i.RGBA4),Se===i.UNSIGNED_SHORT_5_5_5_1&&(ke=i.RGB5_A1)}return(ke===i.R16F||ke===i.R32F||ke===i.RG16F||ke===i.RG32F||ke===i.RGBA16F||ke===i.RGBA32F)&&e.get("EXT_color_buffer_float"),ke}function L(ie,X){let Se;return ie?X===null||X===mh||X===Yg?Se=i.DEPTH24_STENCIL8:X===Za?Se=i.DEPTH32F_STENCIL8:X===qg&&(Se=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):X===null||X===mh||X===Yg?Se=i.DEPTH_COMPONENT24:X===Za?Se=i.DEPTH_COMPONENT32F:X===qg&&(Se=i.DEPTH_COMPONENT16),Se}function j(ie,X){return w(ie)===!0||ie.isFramebufferTexture&&ie.minFilter!==xs&&ie.minFilter!==Hr?Math.log2(Math.max(X.width,X.height))+1:ie.mipmaps!==void 0&&ie.mipmaps.length>0?ie.mipmaps.length:ie.isCompressedTexture&&Array.isArray(ie.image)?X.mipmaps.length:1}function Y(ie){const X=ie.target;X.removeEventListener("dispose",Y),V(X),X.isVideoTexture&&m.delete(X)}function k(ie){const X=ie.target;X.removeEventListener("dispose",k),O(X)}function V(ie){const X=n.get(ie);if(X.__webglInit===void 0)return;const Se=ie.source,Pe=_.get(Se);if(Pe){const $e=Pe[X.__cacheKey];$e.usedTimes--,$e.usedTimes===0&&N(ie),Object.keys(Pe).length===0&&_.delete(Se)}n.remove(ie)}function N(ie){const X=n.get(ie);i.deleteTexture(X.__webglTexture);const Se=ie.source,Pe=_.get(Se);delete Pe[X.__cacheKey],o.memory.textures--}function O(ie){const X=n.get(ie);if(ie.depthTexture&&(ie.depthTexture.dispose(),n.remove(ie.depthTexture)),ie.isWebGLCubeRenderTarget)for(let Pe=0;Pe<6;Pe++){if(Array.isArray(X.__webglFramebuffer[Pe]))for(let $e=0;$e<X.__webglFramebuffer[Pe].length;$e++)i.deleteFramebuffer(X.__webglFramebuffer[Pe][$e]);else i.deleteFramebuffer(X.__webglFramebuffer[Pe]);X.__webglDepthbuffer&&i.deleteRenderbuffer(X.__webglDepthbuffer[Pe])}else{if(Array.isArray(X.__webglFramebuffer))for(let Pe=0;Pe<X.__webglFramebuffer.length;Pe++)i.deleteFramebuffer(X.__webglFramebuffer[Pe]);else i.deleteFramebuffer(X.__webglFramebuffer);if(X.__webglDepthbuffer&&i.deleteRenderbuffer(X.__webglDepthbuffer),X.__webglMultisampledFramebuffer&&i.deleteFramebuffer(X.__webglMultisampledFramebuffer),X.__webglColorRenderbuffer)for(let Pe=0;Pe<X.__webglColorRenderbuffer.length;Pe++)X.__webglColorRenderbuffer[Pe]&&i.deleteRenderbuffer(X.__webglColorRenderbuffer[Pe]);X.__webglDepthRenderbuffer&&i.deleteRenderbuffer(X.__webglDepthRenderbuffer)}const Se=ie.textures;for(let Pe=0,$e=Se.length;Pe<$e;Pe++){const ke=n.get(Se[Pe]);ke.__webglTexture&&(i.deleteTexture(ke.__webglTexture),o.memory.textures--),n.remove(Se[Pe])}n.remove(ie)}let z=0;function W(){z=0}function q(){const ie=z;return ie>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ie+" texture units while this GPU supports only "+r.maxTextures),z+=1,ie}function he(ie){const X=[];return X.push(ie.wrapS),X.push(ie.wrapT),X.push(ie.wrapR||0),X.push(ie.magFilter),X.push(ie.minFilter),X.push(ie.anisotropy),X.push(ie.internalFormat),X.push(ie.format),X.push(ie.type),X.push(ie.generateMipmaps),X.push(ie.premultiplyAlpha),X.push(ie.flipY),X.push(ie.unpackAlignment),X.push(ie.colorSpace),X.join()}function fe(ie,X){const Se=n.get(ie);if(ie.isVideoTexture&&Je(ie),ie.isRenderTargetTexture===!1&&ie.isExternalTexture!==!0&&ie.version>0&&Se.__version!==ie.version){const Pe=ie.image;if(Pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{xe(Se,ie,X);return}}else ie.isExternalTexture&&(Se.__webglTexture=ie.sourceTexture?ie.sourceTexture:null);t.bindTexture(i.TEXTURE_2D,Se.__webglTexture,i.TEXTURE0+X)}function H(ie,X){const Se=n.get(ie);if(ie.isRenderTargetTexture===!1&&ie.version>0&&Se.__version!==ie.version){xe(Se,ie,X);return}t.bindTexture(i.TEXTURE_2D_ARRAY,Se.__webglTexture,i.TEXTURE0+X)}function K(ie,X){const Se=n.get(ie);if(ie.isRenderTargetTexture===!1&&ie.version>0&&Se.__version!==ie.version){xe(Se,ie,X);return}t.bindTexture(i.TEXTURE_3D,Se.__webglTexture,i.TEXTURE0+X)}function J(ie,X){const Se=n.get(ie);if(ie.version>0&&Se.__version!==ie.version){Oe(Se,ie,X);return}t.bindTexture(i.TEXTURE_CUBE_MAP,Se.__webglTexture,i.TEXTURE0+X)}const oe={[q_]:i.REPEAT,[tl]:i.CLAMP_TO_EDGE,[Y_]:i.MIRRORED_REPEAT},se={[xs]:i.NEAREST,[jC]:i.NEAREST_MIPMAP_NEAREST,[Tg]:i.NEAREST_MIPMAP_LINEAR,[Hr]:i.LINEAR,[x_]:i.LINEAR_MIPMAP_NEAREST,[jc]:i.LINEAR_MIPMAP_LINEAR},Z={[Dk]:i.NEVER,[Uk]:i.ALWAYS,[Nk]:i.LESS,[$C]:i.LEQUAL,[Ik]:i.EQUAL,[Lk]:i.GEQUAL,[Ok]:i.GREATER,[Pk]:i.NOTEQUAL};function le(ie,X){if(X.type===Za&&e.has("OES_texture_float_linear")===!1&&(X.magFilter===Hr||X.magFilter===x_||X.magFilter===Tg||X.magFilter===jc||X.minFilter===Hr||X.minFilter===x_||X.minFilter===Tg||X.minFilter===jc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(ie,i.TEXTURE_WRAP_S,oe[X.wrapS]),i.texParameteri(ie,i.TEXTURE_WRAP_T,oe[X.wrapT]),(ie===i.TEXTURE_3D||ie===i.TEXTURE_2D_ARRAY)&&i.texParameteri(ie,i.TEXTURE_WRAP_R,oe[X.wrapR]),i.texParameteri(ie,i.TEXTURE_MAG_FILTER,se[X.magFilter]),i.texParameteri(ie,i.TEXTURE_MIN_FILTER,se[X.minFilter]),X.compareFunction&&(i.texParameteri(ie,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(ie,i.TEXTURE_COMPARE_FUNC,Z[X.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(X.magFilter===xs||X.minFilter!==Tg&&X.minFilter!==jc||X.type===Za&&e.has("OES_texture_float_linear")===!1)return;if(X.anisotropy>1||n.get(X).__currentAnisotropy){const Se=e.get("EXT_texture_filter_anisotropic");i.texParameterf(ie,Se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,r.getMaxAnisotropy())),n.get(X).__currentAnisotropy=X.anisotropy}}}function Ce(ie,X){let Se=!1;ie.__webglInit===void 0&&(ie.__webglInit=!0,X.addEventListener("dispose",Y));const Pe=X.source;let $e=_.get(Pe);$e===void 0&&($e={},_.set(Pe,$e));const ke=he(X);if(ke!==ie.__cacheKey){$e[ke]===void 0&&($e[ke]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,Se=!0),$e[ke].usedTimes++;const It=$e[ie.__cacheKey];It!==void 0&&($e[ie.__cacheKey].usedTimes--,It.usedTimes===0&&N(X)),ie.__cacheKey=ke,ie.__webglTexture=$e[ke].texture}return Se}function Te(ie,X,Se){return Math.floor(Math.floor(ie/Se)/X)}function Ye(ie,X,Se,Pe){const ke=ie.updateRanges;if(ke.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,X.width,X.height,Se,Pe,X.data);else{ke.sort((Ze,at)=>Ze.start-at.start);let It=0;for(let Ze=1;Ze<ke.length;Ze++){const at=ke[It],Nt=ke[Ze],gt=at.start+at.count,mt=Te(Nt.start,X.width,4),Yt=Te(at.start,X.width,4);Nt.start<=gt+1&&mt===Yt&&Te(Nt.start+Nt.count-1,X.width,4)===mt?at.count=Math.max(at.count,Nt.start+Nt.count-at.start):(++It,ke[It]=Nt)}ke.length=It+1;const ct=i.getParameter(i.UNPACK_ROW_LENGTH),Ct=i.getParameter(i.UNPACK_SKIP_PIXELS),Rt=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,X.width);for(let Ze=0,at=ke.length;Ze<at;Ze++){const Nt=ke[Ze],gt=Math.floor(Nt.start/4),mt=Math.ceil(Nt.count/4),Yt=gt%X.width,pe=Math.floor(gt/X.width),it=mt,lt=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,Yt),i.pixelStorei(i.UNPACK_SKIP_ROWS,pe),t.texSubImage2D(i.TEXTURE_2D,0,Yt,pe,it,lt,Se,Pe,X.data)}ie.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,ct),i.pixelStorei(i.UNPACK_SKIP_PIXELS,Ct),i.pixelStorei(i.UNPACK_SKIP_ROWS,Rt)}}function xe(ie,X,Se){let Pe=i.TEXTURE_2D;(X.isDataArrayTexture||X.isCompressedArrayTexture)&&(Pe=i.TEXTURE_2D_ARRAY),X.isData3DTexture&&(Pe=i.TEXTURE_3D);const $e=Ce(ie,X),ke=X.source;t.bindTexture(Pe,ie.__webglTexture,i.TEXTURE0+Se);const It=n.get(ke);if(ke.version!==It.__version||$e===!0){t.activeTexture(i.TEXTURE0+Se);const ct=Kn.getPrimaries(Kn.workingColorSpace),Ct=X.colorSpace===Qu?null:Kn.getPrimaries(X.colorSpace),Rt=X.colorSpace===Qu||ct===Ct?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,X.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,X.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Rt);let Ze=C(X.image,!1,r.maxTextureSize);Ze=zt(X,Ze);const at=s.convert(X.format,X.colorSpace),Nt=s.convert(X.type);let gt=I(X.internalFormat,at,Nt,X.colorSpace,X.isVideoTexture);le(Pe,X);let mt;const Yt=X.mipmaps,pe=X.isVideoTexture!==!0,it=It.__version===void 0||$e===!0,lt=ke.dataReady,pt=j(X,Ze);if(X.isDepthTexture)gt=L(X.format===Xg,X.type),it&&(pe?t.texStorage2D(i.TEXTURE_2D,1,gt,Ze.width,Ze.height):t.texImage2D(i.TEXTURE_2D,0,gt,Ze.width,Ze.height,0,at,Nt,null));else if(X.isDataTexture)if(Yt.length>0){pe&&it&&t.texStorage2D(i.TEXTURE_2D,pt,gt,Yt[0].width,Yt[0].height);for(let nt=0,Fe=Yt.length;nt<Fe;nt++)mt=Yt[nt],pe?lt&&t.texSubImage2D(i.TEXTURE_2D,nt,0,0,mt.width,mt.height,at,Nt,mt.data):t.texImage2D(i.TEXTURE_2D,nt,gt,mt.width,mt.height,0,at,Nt,mt.data);X.generateMipmaps=!1}else pe?(it&&t.texStorage2D(i.TEXTURE_2D,pt,gt,Ze.width,Ze.height),lt&&Ye(X,Ze,at,Nt)):t.texImage2D(i.TEXTURE_2D,0,gt,Ze.width,Ze.height,0,at,Nt,Ze.data);else if(X.isCompressedTexture)if(X.isCompressedArrayTexture){pe&&it&&t.texStorage3D(i.TEXTURE_2D_ARRAY,pt,gt,Yt[0].width,Yt[0].height,Ze.depth);for(let nt=0,Fe=Yt.length;nt<Fe;nt++)if(mt=Yt[nt],X.format!==Js)if(at!==null)if(pe){if(lt)if(X.layerUpdates.size>0){const xt=bA(mt.width,mt.height,X.format,X.type);for(const Xt of X.layerUpdates){const In=mt.data.subarray(Xt*xt/mt.data.BYTES_PER_ELEMENT,(Xt+1)*xt/mt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,nt,0,0,Xt,mt.width,mt.height,1,at,In)}X.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,nt,0,0,0,mt.width,mt.height,Ze.depth,at,mt.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,nt,gt,mt.width,mt.height,Ze.depth,0,mt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else pe?lt&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,nt,0,0,0,mt.width,mt.height,Ze.depth,at,Nt,mt.data):t.texImage3D(i.TEXTURE_2D_ARRAY,nt,gt,mt.width,mt.height,Ze.depth,0,at,Nt,mt.data)}else{pe&&it&&t.texStorage2D(i.TEXTURE_2D,pt,gt,Yt[0].width,Yt[0].height);for(let nt=0,Fe=Yt.length;nt<Fe;nt++)mt=Yt[nt],X.format!==Js?at!==null?pe?lt&&t.compressedTexSubImage2D(i.TEXTURE_2D,nt,0,0,mt.width,mt.height,at,mt.data):t.compressedTexImage2D(i.TEXTURE_2D,nt,gt,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pe?lt&&t.texSubImage2D(i.TEXTURE_2D,nt,0,0,mt.width,mt.height,at,Nt,mt.data):t.texImage2D(i.TEXTURE_2D,nt,gt,mt.width,mt.height,0,at,Nt,mt.data)}else if(X.isDataArrayTexture)if(pe){if(it&&t.texStorage3D(i.TEXTURE_2D_ARRAY,pt,gt,Ze.width,Ze.height,Ze.depth),lt)if(X.layerUpdates.size>0){const nt=bA(Ze.width,Ze.height,X.format,X.type);for(const Fe of X.layerUpdates){const xt=Ze.data.subarray(Fe*nt/Ze.data.BYTES_PER_ELEMENT,(Fe+1)*nt/Ze.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Fe,Ze.width,Ze.height,1,at,Nt,xt)}X.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ze.width,Ze.height,Ze.depth,at,Nt,Ze.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,gt,Ze.width,Ze.height,Ze.depth,0,at,Nt,Ze.data);else if(X.isData3DTexture)pe?(it&&t.texStorage3D(i.TEXTURE_3D,pt,gt,Ze.width,Ze.height,Ze.depth),lt&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ze.width,Ze.height,Ze.depth,at,Nt,Ze.data)):t.texImage3D(i.TEXTURE_3D,0,gt,Ze.width,Ze.height,Ze.depth,0,at,Nt,Ze.data);else if(X.isFramebufferTexture){if(it)if(pe)t.texStorage2D(i.TEXTURE_2D,pt,gt,Ze.width,Ze.height);else{let nt=Ze.width,Fe=Ze.height;for(let xt=0;xt<pt;xt++)t.texImage2D(i.TEXTURE_2D,xt,gt,nt,Fe,0,at,Nt,null),nt>>=1,Fe>>=1}}else if(Yt.length>0){if(pe&&it){const nt=Qt(Yt[0]);t.texStorage2D(i.TEXTURE_2D,pt,gt,nt.width,nt.height)}for(let nt=0,Fe=Yt.length;nt<Fe;nt++)mt=Yt[nt],pe?lt&&t.texSubImage2D(i.TEXTURE_2D,nt,0,0,at,Nt,mt):t.texImage2D(i.TEXTURE_2D,nt,gt,at,Nt,mt);X.generateMipmaps=!1}else if(pe){if(it){const nt=Qt(Ze);t.texStorage2D(i.TEXTURE_2D,pt,gt,nt.width,nt.height)}lt&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,at,Nt,Ze)}else t.texImage2D(i.TEXTURE_2D,0,gt,at,Nt,Ze);w(X)&&T(Pe),It.__version=ke.version,X.onUpdate&&X.onUpdate(X)}ie.__version=X.version}function Oe(ie,X,Se){if(X.image.length!==6)return;const Pe=Ce(ie,X),$e=X.source;t.bindTexture(i.TEXTURE_CUBE_MAP,ie.__webglTexture,i.TEXTURE0+Se);const ke=n.get($e);if($e.version!==ke.__version||Pe===!0){t.activeTexture(i.TEXTURE0+Se);const It=Kn.getPrimaries(Kn.workingColorSpace),ct=X.colorSpace===Qu?null:Kn.getPrimaries(X.colorSpace),Ct=X.colorSpace===Qu||It===ct?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,X.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,X.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ct);const Rt=X.isCompressedTexture||X.image[0].isCompressedTexture,Ze=X.image[0]&&X.image[0].isDataTexture,at=[];for(let Fe=0;Fe<6;Fe++)!Rt&&!Ze?at[Fe]=C(X.image[Fe],!0,r.maxCubemapSize):at[Fe]=Ze?X.image[Fe].image:X.image[Fe],at[Fe]=zt(X,at[Fe]);const Nt=at[0],gt=s.convert(X.format,X.colorSpace),mt=s.convert(X.type),Yt=I(X.internalFormat,gt,mt,X.colorSpace),pe=X.isVideoTexture!==!0,it=ke.__version===void 0||Pe===!0,lt=$e.dataReady;let pt=j(X,Nt);le(i.TEXTURE_CUBE_MAP,X);let nt;if(Rt){pe&&it&&t.texStorage2D(i.TEXTURE_CUBE_MAP,pt,Yt,Nt.width,Nt.height);for(let Fe=0;Fe<6;Fe++){nt=at[Fe].mipmaps;for(let xt=0;xt<nt.length;xt++){const Xt=nt[xt];X.format!==Js?gt!==null?pe?lt&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,xt,0,0,Xt.width,Xt.height,gt,Xt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,xt,Yt,Xt.width,Xt.height,0,Xt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pe?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,xt,0,0,Xt.width,Xt.height,gt,mt,Xt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,xt,Yt,Xt.width,Xt.height,0,gt,mt,Xt.data)}}}else{if(nt=X.mipmaps,pe&&it){nt.length>0&&pt++;const Fe=Qt(at[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,pt,Yt,Fe.width,Fe.height)}for(let Fe=0;Fe<6;Fe++)if(Ze){pe?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,0,0,at[Fe].width,at[Fe].height,gt,mt,at[Fe].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,Yt,at[Fe].width,at[Fe].height,0,gt,mt,at[Fe].data);for(let xt=0;xt<nt.length;xt++){const In=nt[xt].image[Fe].image;pe?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,xt+1,0,0,In.width,In.height,gt,mt,In.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,xt+1,Yt,In.width,In.height,0,gt,mt,In.data)}}else{pe?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,0,0,gt,mt,at[Fe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,Yt,gt,mt,at[Fe]);for(let xt=0;xt<nt.length;xt++){const Xt=nt[xt];pe?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,xt+1,0,0,gt,mt,Xt.image[Fe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,xt+1,Yt,gt,mt,Xt.image[Fe])}}}w(X)&&T(i.TEXTURE_CUBE_MAP),ke.__version=$e.version,X.onUpdate&&X.onUpdate(X)}ie.__version=X.version}function rt(ie,X,Se,Pe,$e,ke){const It=s.convert(Se.format,Se.colorSpace),ct=s.convert(Se.type),Ct=I(Se.internalFormat,It,ct,Se.colorSpace),Rt=n.get(X),Ze=n.get(Se);if(Ze.__renderTarget=X,!Rt.__hasExternalTextures){const at=Math.max(1,X.width>>ke),Nt=Math.max(1,X.height>>ke);$e===i.TEXTURE_3D||$e===i.TEXTURE_2D_ARRAY?t.texImage3D($e,ke,Ct,at,Nt,X.depth,0,It,ct,null):t.texImage2D($e,ke,Ct,at,Nt,0,It,ct,null)}t.bindFramebuffer(i.FRAMEBUFFER,ie),qe(X)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Pe,$e,Ze.__webglTexture,0,ht(X)):($e===i.TEXTURE_2D||$e>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&$e<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Pe,$e,Ze.__webglTexture,ke),t.bindFramebuffer(i.FRAMEBUFFER,null)}function ft(ie,X,Se){if(i.bindRenderbuffer(i.RENDERBUFFER,ie),X.depthBuffer){const Pe=X.depthTexture,$e=Pe&&Pe.isDepthTexture?Pe.type:null,ke=L(X.stencilBuffer,$e),It=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ct=ht(X);qe(X)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ct,ke,X.width,X.height):Se?i.renderbufferStorageMultisample(i.RENDERBUFFER,ct,ke,X.width,X.height):i.renderbufferStorage(i.RENDERBUFFER,ke,X.width,X.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,It,i.RENDERBUFFER,ie)}else{const Pe=X.textures;for(let $e=0;$e<Pe.length;$e++){const ke=Pe[$e],It=s.convert(ke.format,ke.colorSpace),ct=s.convert(ke.type),Ct=I(ke.internalFormat,It,ct,ke.colorSpace),Rt=ht(X);Se&&qe(X)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Rt,Ct,X.width,X.height):qe(X)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Rt,Ct,X.width,X.height):i.renderbufferStorage(i.RENDERBUFFER,Ct,X.width,X.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function bt(ie,X){if(X&&X.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,ie),!(X.depthTexture&&X.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Pe=n.get(X.depthTexture);Pe.__renderTarget=X,(!Pe.__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),fe(X.depthTexture,0);const $e=Pe.__webglTexture,ke=ht(X);if(X.depthTexture.format===Wg)qe(X)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,$e,0,ke):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,$e,0);else if(X.depthTexture.format===Xg)qe(X)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,$e,0,ke):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,$e,0);else throw new Error("Unknown depthTexture format")}function en(ie){const X=n.get(ie),Se=ie.isWebGLCubeRenderTarget===!0;if(X.__boundDepthTexture!==ie.depthTexture){const Pe=ie.depthTexture;if(X.__depthDisposeCallback&&X.__depthDisposeCallback(),Pe){const $e=()=>{delete X.__boundDepthTexture,delete X.__depthDisposeCallback,Pe.removeEventListener("dispose",$e)};Pe.addEventListener("dispose",$e),X.__depthDisposeCallback=$e}X.__boundDepthTexture=Pe}if(ie.depthTexture&&!X.__autoAllocateDepthBuffer){if(Se)throw new Error("target.depthTexture not supported in Cube render targets");const Pe=ie.texture.mipmaps;Pe&&Pe.length>0?bt(X.__webglFramebuffer[0],ie):bt(X.__webglFramebuffer,ie)}else if(Se){X.__webglDepthbuffer=[];for(let Pe=0;Pe<6;Pe++)if(t.bindFramebuffer(i.FRAMEBUFFER,X.__webglFramebuffer[Pe]),X.__webglDepthbuffer[Pe]===void 0)X.__webglDepthbuffer[Pe]=i.createRenderbuffer(),ft(X.__webglDepthbuffer[Pe],ie,!1);else{const $e=ie.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ke=X.__webglDepthbuffer[Pe];i.bindRenderbuffer(i.RENDERBUFFER,ke),i.framebufferRenderbuffer(i.FRAMEBUFFER,$e,i.RENDERBUFFER,ke)}}else{const Pe=ie.texture.mipmaps;if(Pe&&Pe.length>0?t.bindFramebuffer(i.FRAMEBUFFER,X.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,X.__webglFramebuffer),X.__webglDepthbuffer===void 0)X.__webglDepthbuffer=i.createRenderbuffer(),ft(X.__webglDepthbuffer,ie,!1);else{const $e=ie.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ke=X.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,ke),i.framebufferRenderbuffer(i.FRAMEBUFFER,$e,i.RENDERBUFFER,ke)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Cn(ie,X,Se){const Pe=n.get(ie);X!==void 0&&rt(Pe.__webglFramebuffer,ie,ie.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),Se!==void 0&&en(ie)}function ae(ie){const X=ie.texture,Se=n.get(ie),Pe=n.get(X);ie.addEventListener("dispose",k);const $e=ie.textures,ke=ie.isWebGLCubeRenderTarget===!0,It=$e.length>1;if(It||(Pe.__webglTexture===void 0&&(Pe.__webglTexture=i.createTexture()),Pe.__version=X.version,o.memory.textures++),ke){Se.__webglFramebuffer=[];for(let ct=0;ct<6;ct++)if(X.mipmaps&&X.mipmaps.length>0){Se.__webglFramebuffer[ct]=[];for(let Ct=0;Ct<X.mipmaps.length;Ct++)Se.__webglFramebuffer[ct][Ct]=i.createFramebuffer()}else Se.__webglFramebuffer[ct]=i.createFramebuffer()}else{if(X.mipmaps&&X.mipmaps.length>0){Se.__webglFramebuffer=[];for(let ct=0;ct<X.mipmaps.length;ct++)Se.__webglFramebuffer[ct]=i.createFramebuffer()}else Se.__webglFramebuffer=i.createFramebuffer();if(It)for(let ct=0,Ct=$e.length;ct<Ct;ct++){const Rt=n.get($e[ct]);Rt.__webglTexture===void 0&&(Rt.__webglTexture=i.createTexture(),o.memory.textures++)}if(ie.samples>0&&qe(ie)===!1){Se.__webglMultisampledFramebuffer=i.createFramebuffer(),Se.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Se.__webglMultisampledFramebuffer);for(let ct=0;ct<$e.length;ct++){const Ct=$e[ct];Se.__webglColorRenderbuffer[ct]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Se.__webglColorRenderbuffer[ct]);const Rt=s.convert(Ct.format,Ct.colorSpace),Ze=s.convert(Ct.type),at=I(Ct.internalFormat,Rt,Ze,Ct.colorSpace,ie.isXRRenderTarget===!0),Nt=ht(ie);i.renderbufferStorageMultisample(i.RENDERBUFFER,Nt,at,ie.width,ie.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.RENDERBUFFER,Se.__webglColorRenderbuffer[ct])}i.bindRenderbuffer(i.RENDERBUFFER,null),ie.depthBuffer&&(Se.__webglDepthRenderbuffer=i.createRenderbuffer(),ft(Se.__webglDepthRenderbuffer,ie,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(ke){t.bindTexture(i.TEXTURE_CUBE_MAP,Pe.__webglTexture),le(i.TEXTURE_CUBE_MAP,X);for(let ct=0;ct<6;ct++)if(X.mipmaps&&X.mipmaps.length>0)for(let Ct=0;Ct<X.mipmaps.length;Ct++)rt(Se.__webglFramebuffer[ct][Ct],ie,X,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ct,Ct);else rt(Se.__webglFramebuffer[ct],ie,X,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0);w(X)&&T(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(It){for(let ct=0,Ct=$e.length;ct<Ct;ct++){const Rt=$e[ct],Ze=n.get(Rt);let at=i.TEXTURE_2D;(ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(at=ie.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(at,Ze.__webglTexture),le(at,Rt),rt(Se.__webglFramebuffer,ie,Rt,i.COLOR_ATTACHMENT0+ct,at,0),w(Rt)&&T(at)}t.unbindTexture()}else{let ct=i.TEXTURE_2D;if((ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(ct=ie.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(ct,Pe.__webglTexture),le(ct,X),X.mipmaps&&X.mipmaps.length>0)for(let Ct=0;Ct<X.mipmaps.length;Ct++)rt(Se.__webglFramebuffer[Ct],ie,X,i.COLOR_ATTACHMENT0,ct,Ct);else rt(Se.__webglFramebuffer,ie,X,i.COLOR_ATTACHMENT0,ct,0);w(X)&&T(ct),t.unbindTexture()}ie.depthBuffer&&en(ie)}function We(ie){const X=ie.textures;for(let Se=0,Pe=X.length;Se<Pe;Se++){const $e=X[Se];if(w($e)){const ke=D(ie),It=n.get($e).__webglTexture;t.bindTexture(ke,It),T(ke),t.unbindTexture()}}}const Ge=[],ze=[];function Ve(ie){if(ie.samples>0){if(qe(ie)===!1){const X=ie.textures,Se=ie.width,Pe=ie.height;let $e=i.COLOR_BUFFER_BIT;const ke=ie.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,It=n.get(ie),ct=X.length>1;if(ct)for(let Rt=0;Rt<X.length;Rt++)t.bindFramebuffer(i.FRAMEBUFFER,It.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Rt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,It.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Rt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,It.__webglMultisampledFramebuffer);const Ct=ie.texture.mipmaps;Ct&&Ct.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,It.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,It.__webglFramebuffer);for(let Rt=0;Rt<X.length;Rt++){if(ie.resolveDepthBuffer&&(ie.depthBuffer&&($e|=i.DEPTH_BUFFER_BIT),ie.stencilBuffer&&ie.resolveStencilBuffer&&($e|=i.STENCIL_BUFFER_BIT)),ct){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,It.__webglColorRenderbuffer[Rt]);const Ze=n.get(X[Rt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Ze,0)}i.blitFramebuffer(0,0,Se,Pe,0,0,Se,Pe,$e,i.NEAREST),h===!0&&(Ge.length=0,ze.length=0,Ge.push(i.COLOR_ATTACHMENT0+Rt),ie.depthBuffer&&ie.resolveDepthBuffer===!1&&(Ge.push(ke),ze.push(ke),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,ze)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Ge))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),ct)for(let Rt=0;Rt<X.length;Rt++){t.bindFramebuffer(i.FRAMEBUFFER,It.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Rt,i.RENDERBUFFER,It.__webglColorRenderbuffer[Rt]);const Ze=n.get(X[Rt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,It.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Rt,i.TEXTURE_2D,Ze,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,It.__webglMultisampledFramebuffer)}else if(ie.depthBuffer&&ie.resolveDepthBuffer===!1&&h){const X=ie.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[X])}}}function ht(ie){return Math.min(r.maxSamples,ie.samples)}function qe(ie){const X=n.get(ie);return ie.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&X.__useRenderToTexture!==!1}function Je(ie){const X=o.render.frame;m.get(ie)!==X&&(m.set(ie,X),ie.update())}function zt(ie,X){const Se=ie.colorSpace,Pe=ie.format,$e=ie.type;return ie.isCompressedTexture===!0||ie.isVideoTexture===!0||Se!==Yf&&Se!==Qu&&(Kn.getTransfer(Se)===vi?(Pe!==Js||$e!==il)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Se)),X}function Qt(ie){return typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement?(d.width=ie.naturalWidth||ie.width,d.height=ie.naturalHeight||ie.height):typeof VideoFrame<"u"&&ie instanceof VideoFrame?(d.width=ie.displayWidth,d.height=ie.displayHeight):(d.width=ie.width,d.height=ie.height),d}this.allocateTextureUnit=q,this.resetTextureUnits=W,this.setTexture2D=fe,this.setTexture2DArray=H,this.setTexture3D=K,this.setTextureCube=J,this.rebindTextures=Cn,this.setupRenderTarget=ae,this.updateRenderTargetMipmap=We,this.updateMultisampleRenderTarget=Ve,this.setupDepthRenderbuffer=en,this.setupFrameBufferTexture=rt,this.useMultisampledRTT=qe}function W4(i,e){function t(n,r=Qu){let s;const o=Kn.getTransfer(r);if(n===il)return i.UNSIGNED_BYTE;if(n===TT)return i.UNSIGNED_SHORT_4_4_4_4;if(n===MT)return i.UNSIGNED_SHORT_5_5_5_1;if(n===WC)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===XC)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===qC)return i.BYTE;if(n===YC)return i.SHORT;if(n===qg)return i.UNSIGNED_SHORT;if(n===ET)return i.INT;if(n===mh)return i.UNSIGNED_INT;if(n===Za)return i.FLOAT;if(n===xv)return i.HALF_FLOAT;if(n===KC)return i.ALPHA;if(n===QC)return i.RGB;if(n===Js)return i.RGBA;if(n===Wg)return i.DEPTH_COMPONENT;if(n===Xg)return i.DEPTH_STENCIL;if(n===wT)return i.RED;if(n===E0)return i.RED_INTEGER;if(n===ZC)return i.RG;if(n===AT)return i.RG_INTEGER;if(n===CT)return i.RGBA_INTEGER;if(n===E_||n===T_||n===M_||n===w_)if(o===vi)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===E_)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===T_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===M_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===w_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===E_)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===T_)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===M_)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===w_)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===$x||n===eE||n===tE||n===nE)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===$x)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===eE)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===tE)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===nE)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===iE||n===rE||n===sE)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===iE||n===rE)return o===vi?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===sE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===aE||n===oE||n===lE||n===cE||n===uE||n===hE||n===fE||n===dE||n===pE||n===mE||n===gE||n===vE||n===yE||n===_E)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===aE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===oE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===lE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===cE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===uE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===hE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===fE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===dE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===pE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===mE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===gE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===vE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===yE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===_E)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===SE||n===bE||n===xE)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===SE)return o===vi?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===bE)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===xE)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===EE||n===TE||n===ME||n===wE)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===EE)return s.COMPRESSED_RED_RGTC1_EXT;if(n===TE)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===ME)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===wE)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Yg?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const A$=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,C$=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class R${constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new cR(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Ql({vertexShader:A$,fragmentShader:C$,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Pr(new Mv(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class D$ extends cu{constructor(e,t){super();const n=this;let r=null,s=1,o=null,c="local-floor",h=1,d=null,m=null,g=null,_=null,S=null,M=null;const C=typeof XRWebGLBinding<"u",w=new R$,T={},D=t.getContextAttributes();let I=null,L=null;const j=[],Y=[],k=new tt;let V=null;const N=new rs;N.viewport=new ei;const O=new rs;O.viewport=new ei;const z=[N,O],W=new U4;let q=null,he=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(xe){let Oe=j[xe];return Oe===void 0&&(Oe=new px,j[xe]=Oe),Oe.getTargetRaySpace()},this.getControllerGrip=function(xe){let Oe=j[xe];return Oe===void 0&&(Oe=new px,j[xe]=Oe),Oe.getGripSpace()},this.getHand=function(xe){let Oe=j[xe];return Oe===void 0&&(Oe=new px,j[xe]=Oe),Oe.getHandSpace()};function fe(xe){const Oe=Y.indexOf(xe.inputSource);if(Oe===-1)return;const rt=j[Oe];rt!==void 0&&(rt.update(xe.inputSource,xe.frame,d||o),rt.dispatchEvent({type:xe.type,data:xe.inputSource}))}function H(){r.removeEventListener("select",fe),r.removeEventListener("selectstart",fe),r.removeEventListener("selectend",fe),r.removeEventListener("squeeze",fe),r.removeEventListener("squeezestart",fe),r.removeEventListener("squeezeend",fe),r.removeEventListener("end",H),r.removeEventListener("inputsourceschange",K);for(let xe=0;xe<j.length;xe++){const Oe=Y[xe];Oe!==null&&(Y[xe]=null,j[xe].disconnect(Oe))}q=null,he=null,w.reset();for(const xe in T)delete T[xe];e.setRenderTarget(I),S=null,_=null,g=null,r=null,L=null,Ye.stop(),n.isPresenting=!1,e.setPixelRatio(V),e.setSize(k.width,k.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(xe){s=xe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(xe){c=xe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(xe){d=xe},this.getBaseLayer=function(){return _!==null?_:S},this.getBinding=function(){return g===null&&C&&(g=new XRWebGLBinding(r,t)),g},this.getFrame=function(){return M},this.getSession=function(){return r},this.setSession=async function(xe){if(r=xe,r!==null){if(I=e.getRenderTarget(),r.addEventListener("select",fe),r.addEventListener("selectstart",fe),r.addEventListener("selectend",fe),r.addEventListener("squeeze",fe),r.addEventListener("squeezestart",fe),r.addEventListener("squeezeend",fe),r.addEventListener("end",H),r.addEventListener("inputsourceschange",K),D.xrCompatible!==!0&&await t.makeXRCompatible(),V=e.getPixelRatio(),e.getSize(k),C&&"createProjectionLayer"in XRWebGLBinding.prototype){let rt=null,ft=null,bt=null;D.depth&&(bt=D.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,rt=D.stencil?Xg:Wg,ft=D.stencil?Yg:mh);const en={colorFormat:t.RGBA8,depthFormat:bt,scaleFactor:s};g=this.getBinding(),_=g.createProjectionLayer(en),r.updateRenderState({layers:[_]}),e.setPixelRatio(1),e.setSize(_.textureWidth,_.textureHeight,!1),L=new au(_.textureWidth,_.textureHeight,{format:Js,type:il,depthTexture:new lR(_.textureWidth,_.textureHeight,ft,void 0,void 0,void 0,void 0,void 0,void 0,rt),stencilBuffer:D.stencil,colorSpace:e.outputColorSpace,samples:D.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}else{const rt={antialias:D.antialias,alpha:!0,depth:D.depth,stencil:D.stencil,framebufferScaleFactor:s};S=new XRWebGLLayer(r,t,rt),r.updateRenderState({baseLayer:S}),e.setPixelRatio(1),e.setSize(S.framebufferWidth,S.framebufferHeight,!1),L=new au(S.framebufferWidth,S.framebufferHeight,{format:Js,type:il,colorSpace:e.outputColorSpace,stencilBuffer:D.stencil,resolveDepthBuffer:S.ignoreDepthValues===!1,resolveStencilBuffer:S.ignoreDepthValues===!1})}L.isXRRenderTarget=!0,this.setFoveation(h),d=null,o=await r.requestReferenceSpace(c),Ye.setContext(r),Ye.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function K(xe){for(let Oe=0;Oe<xe.removed.length;Oe++){const rt=xe.removed[Oe],ft=Y.indexOf(rt);ft>=0&&(Y[ft]=null,j[ft].disconnect(rt))}for(let Oe=0;Oe<xe.added.length;Oe++){const rt=xe.added[Oe];let ft=Y.indexOf(rt);if(ft===-1){for(let en=0;en<j.length;en++)if(en>=Y.length){Y.push(rt),ft=en;break}else if(Y[en]===null){Y[en]=rt,ft=en;break}if(ft===-1)break}const bt=j[ft];bt&&bt.connect(rt)}}const J=new re,oe=new re;function se(xe,Oe,rt){J.setFromMatrixPosition(Oe.matrixWorld),oe.setFromMatrixPosition(rt.matrixWorld);const ft=J.distanceTo(oe),bt=Oe.projectionMatrix.elements,en=rt.projectionMatrix.elements,Cn=bt[14]/(bt[10]-1),ae=bt[14]/(bt[10]+1),We=(bt[9]+1)/bt[5],Ge=(bt[9]-1)/bt[5],ze=(bt[8]-1)/bt[0],Ve=(en[8]+1)/en[0],ht=Cn*ze,qe=Cn*Ve,Je=ft/(-ze+Ve),zt=Je*-ze;if(Oe.matrixWorld.decompose(xe.position,xe.quaternion,xe.scale),xe.translateX(zt),xe.translateZ(Je),xe.matrixWorld.compose(xe.position,xe.quaternion,xe.scale),xe.matrixWorldInverse.copy(xe.matrixWorld).invert(),bt[10]===-1)xe.projectionMatrix.copy(Oe.projectionMatrix),xe.projectionMatrixInverse.copy(Oe.projectionMatrixInverse);else{const Qt=Cn+Je,ie=ae+Je,X=ht-zt,Se=qe+(ft-zt),Pe=We*ae/ie*Qt,$e=Ge*ae/ie*Qt;xe.projectionMatrix.makePerspective(X,Se,Pe,$e,Qt,ie),xe.projectionMatrixInverse.copy(xe.projectionMatrix).invert()}}function Z(xe,Oe){Oe===null?xe.matrixWorld.copy(xe.matrix):xe.matrixWorld.multiplyMatrices(Oe.matrixWorld,xe.matrix),xe.matrixWorldInverse.copy(xe.matrixWorld).invert()}this.updateCamera=function(xe){if(r===null)return;let Oe=xe.near,rt=xe.far;w.texture!==null&&(w.depthNear>0&&(Oe=w.depthNear),w.depthFar>0&&(rt=w.depthFar)),W.near=O.near=N.near=Oe,W.far=O.far=N.far=rt,(q!==W.near||he!==W.far)&&(r.updateRenderState({depthNear:W.near,depthFar:W.far}),q=W.near,he=W.far),W.layers.mask=xe.layers.mask|6,N.layers.mask=W.layers.mask&3,O.layers.mask=W.layers.mask&5;const ft=xe.parent,bt=W.cameras;Z(W,ft);for(let en=0;en<bt.length;en++)Z(bt[en],ft);bt.length===2?se(W,N,O):W.projectionMatrix.copy(N.projectionMatrix),le(xe,W,ft)};function le(xe,Oe,rt){rt===null?xe.matrix.copy(Oe.matrixWorld):(xe.matrix.copy(rt.matrixWorld),xe.matrix.invert(),xe.matrix.multiply(Oe.matrixWorld)),xe.matrix.decompose(xe.position,xe.quaternion,xe.scale),xe.updateMatrixWorld(!0),xe.projectionMatrix.copy(Oe.projectionMatrix),xe.projectionMatrixInverse.copy(Oe.projectionMatrixInverse),xe.isPerspectiveCamera&&(xe.fov=Qg*2*Math.atan(1/xe.projectionMatrix.elements[5]),xe.zoom=1)}this.getCamera=function(){return W},this.getFoveation=function(){if(!(_===null&&S===null))return h},this.setFoveation=function(xe){h=xe,_!==null&&(_.fixedFoveation=xe),S!==null&&S.fixedFoveation!==void 0&&(S.fixedFoveation=xe)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(W)},this.getCameraTexture=function(xe){return T[xe]};let Ce=null;function Te(xe,Oe){if(m=Oe.getViewerPose(d||o),M=Oe,m!==null){const rt=m.views;S!==null&&(e.setRenderTargetFramebuffer(L,S.framebuffer),e.setRenderTarget(L));let ft=!1;rt.length!==W.cameras.length&&(W.cameras.length=0,ft=!0);for(let ae=0;ae<rt.length;ae++){const We=rt[ae];let Ge=null;if(S!==null)Ge=S.getViewport(We);else{const Ve=g.getViewSubImage(_,We);Ge=Ve.viewport,ae===0&&(e.setRenderTargetTextures(L,Ve.colorTexture,Ve.depthStencilTexture),e.setRenderTarget(L))}let ze=z[ae];ze===void 0&&(ze=new rs,ze.layers.enable(ae),ze.viewport=new ei,z[ae]=ze),ze.matrix.fromArray(We.transform.matrix),ze.matrix.decompose(ze.position,ze.quaternion,ze.scale),ze.projectionMatrix.fromArray(We.projectionMatrix),ze.projectionMatrixInverse.copy(ze.projectionMatrix).invert(),ze.viewport.set(Ge.x,Ge.y,Ge.width,Ge.height),ae===0&&(W.matrix.copy(ze.matrix),W.matrix.decompose(W.position,W.quaternion,W.scale)),ft===!0&&W.cameras.push(ze)}const bt=r.enabledFeatures;if(bt&&bt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&C){g=n.getBinding();const ae=g.getDepthInformation(rt[0]);ae&&ae.isValid&&ae.texture&&w.init(ae,r.renderState)}if(bt&&bt.includes("camera-access")&&C){e.state.unbindTexture(),g=n.getBinding();for(let ae=0;ae<rt.length;ae++){const We=rt[ae].camera;if(We){let Ge=T[We];Ge||(Ge=new cR,T[We]=Ge);const ze=g.getCameraImage(We);Ge.sourceTexture=ze}}}}for(let rt=0;rt<j.length;rt++){const ft=Y[rt],bt=j[rt];ft!==null&&bt!==void 0&&bt.update(ft,Oe,d||o)}Ce&&Ce(xe,Oe),Oe.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Oe}),M=null}const Ye=new H4;Ye.setAnimationLoop(Te),this.setAnimationLoop=function(xe){Ce=xe},this.dispose=function(){}}}const np=new wo,N$=new sn;function I$(i,e){function t(w,T){w.matrixAutoUpdate===!0&&w.updateMatrix(),T.value.copy(w.matrix)}function n(w,T){T.color.getRGB(w.fogColor.value,Fk(i)),T.isFog?(w.fogNear.value=T.near,w.fogFar.value=T.far):T.isFogExp2&&(w.fogDensity.value=T.density)}function r(w,T,D,I,L){T.isMeshBasicMaterial||T.isMeshLambertMaterial?s(w,T):T.isMeshToonMaterial?(s(w,T),g(w,T)):T.isMeshPhongMaterial?(s(w,T),m(w,T)):T.isMeshStandardMaterial?(s(w,T),_(w,T),T.isMeshPhysicalMaterial&&S(w,T,L)):T.isMeshMatcapMaterial?(s(w,T),M(w,T)):T.isMeshDepthMaterial?s(w,T):T.isMeshDistanceMaterial?(s(w,T),C(w,T)):T.isMeshNormalMaterial?s(w,T):T.isLineBasicMaterial?(o(w,T),T.isLineDashedMaterial&&c(w,T)):T.isPointsMaterial?h(w,T,D,I):T.isSpriteMaterial?d(w,T):T.isShadowMaterial?(w.color.value.copy(T.color),w.opacity.value=T.opacity):T.isShaderMaterial&&(T.uniformsNeedUpdate=!1)}function s(w,T){w.opacity.value=T.opacity,T.color&&w.diffuse.value.copy(T.color),T.emissive&&w.emissive.value.copy(T.emissive).multiplyScalar(T.emissiveIntensity),T.map&&(w.map.value=T.map,t(T.map,w.mapTransform)),T.alphaMap&&(w.alphaMap.value=T.alphaMap,t(T.alphaMap,w.alphaMapTransform)),T.bumpMap&&(w.bumpMap.value=T.bumpMap,t(T.bumpMap,w.bumpMapTransform),w.bumpScale.value=T.bumpScale,T.side===Ra&&(w.bumpScale.value*=-1)),T.normalMap&&(w.normalMap.value=T.normalMap,t(T.normalMap,w.normalMapTransform),w.normalScale.value.copy(T.normalScale),T.side===Ra&&w.normalScale.value.negate()),T.displacementMap&&(w.displacementMap.value=T.displacementMap,t(T.displacementMap,w.displacementMapTransform),w.displacementScale.value=T.displacementScale,w.displacementBias.value=T.displacementBias),T.emissiveMap&&(w.emissiveMap.value=T.emissiveMap,t(T.emissiveMap,w.emissiveMapTransform)),T.specularMap&&(w.specularMap.value=T.specularMap,t(T.specularMap,w.specularMapTransform)),T.alphaTest>0&&(w.alphaTest.value=T.alphaTest);const D=e.get(T),I=D.envMap,L=D.envMapRotation;I&&(w.envMap.value=I,np.copy(L),np.x*=-1,np.y*=-1,np.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(np.y*=-1,np.z*=-1),w.envMapRotation.value.setFromMatrix4(N$.makeRotationFromEuler(np)),w.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=T.reflectivity,w.ior.value=T.ior,w.refractionRatio.value=T.refractionRatio),T.lightMap&&(w.lightMap.value=T.lightMap,w.lightMapIntensity.value=T.lightMapIntensity,t(T.lightMap,w.lightMapTransform)),T.aoMap&&(w.aoMap.value=T.aoMap,w.aoMapIntensity.value=T.aoMapIntensity,t(T.aoMap,w.aoMapTransform))}function o(w,T){w.diffuse.value.copy(T.color),w.opacity.value=T.opacity,T.map&&(w.map.value=T.map,t(T.map,w.mapTransform))}function c(w,T){w.dashSize.value=T.dashSize,w.totalSize.value=T.dashSize+T.gapSize,w.scale.value=T.scale}function h(w,T,D,I){w.diffuse.value.copy(T.color),w.opacity.value=T.opacity,w.size.value=T.size*D,w.scale.value=I*.5,T.map&&(w.map.value=T.map,t(T.map,w.uvTransform)),T.alphaMap&&(w.alphaMap.value=T.alphaMap,t(T.alphaMap,w.alphaMapTransform)),T.alphaTest>0&&(w.alphaTest.value=T.alphaTest)}function d(w,T){w.diffuse.value.copy(T.color),w.opacity.value=T.opacity,w.rotation.value=T.rotation,T.map&&(w.map.value=T.map,t(T.map,w.mapTransform)),T.alphaMap&&(w.alphaMap.value=T.alphaMap,t(T.alphaMap,w.alphaMapTransform)),T.alphaTest>0&&(w.alphaTest.value=T.alphaTest)}function m(w,T){w.specular.value.copy(T.specular),w.shininess.value=Math.max(T.shininess,1e-4)}function g(w,T){T.gradientMap&&(w.gradientMap.value=T.gradientMap)}function _(w,T){w.metalness.value=T.metalness,T.metalnessMap&&(w.metalnessMap.value=T.metalnessMap,t(T.metalnessMap,w.metalnessMapTransform)),w.roughness.value=T.roughness,T.roughnessMap&&(w.roughnessMap.value=T.roughnessMap,t(T.roughnessMap,w.roughnessMapTransform)),T.envMap&&(w.envMapIntensity.value=T.envMapIntensity)}function S(w,T,D){w.ior.value=T.ior,T.sheen>0&&(w.sheenColor.value.copy(T.sheenColor).multiplyScalar(T.sheen),w.sheenRoughness.value=T.sheenRoughness,T.sheenColorMap&&(w.sheenColorMap.value=T.sheenColorMap,t(T.sheenColorMap,w.sheenColorMapTransform)),T.sheenRoughnessMap&&(w.sheenRoughnessMap.value=T.sheenRoughnessMap,t(T.sheenRoughnessMap,w.sheenRoughnessMapTransform))),T.clearcoat>0&&(w.clearcoat.value=T.clearcoat,w.clearcoatRoughness.value=T.clearcoatRoughness,T.clearcoatMap&&(w.clearcoatMap.value=T.clearcoatMap,t(T.clearcoatMap,w.clearcoatMapTransform)),T.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=T.clearcoatRoughnessMap,t(T.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),T.clearcoatNormalMap&&(w.clearcoatNormalMap.value=T.clearcoatNormalMap,t(T.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(T.clearcoatNormalScale),T.side===Ra&&w.clearcoatNormalScale.value.negate())),T.dispersion>0&&(w.dispersion.value=T.dispersion),T.iridescence>0&&(w.iridescence.value=T.iridescence,w.iridescenceIOR.value=T.iridescenceIOR,w.iridescenceThicknessMinimum.value=T.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=T.iridescenceThicknessRange[1],T.iridescenceMap&&(w.iridescenceMap.value=T.iridescenceMap,t(T.iridescenceMap,w.iridescenceMapTransform)),T.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=T.iridescenceThicknessMap,t(T.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),T.transmission>0&&(w.transmission.value=T.transmission,w.transmissionSamplerMap.value=D.texture,w.transmissionSamplerSize.value.set(D.width,D.height),T.transmissionMap&&(w.transmissionMap.value=T.transmissionMap,t(T.transmissionMap,w.transmissionMapTransform)),w.thickness.value=T.thickness,T.thicknessMap&&(w.thicknessMap.value=T.thicknessMap,t(T.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=T.attenuationDistance,w.attenuationColor.value.copy(T.attenuationColor)),T.anisotropy>0&&(w.anisotropyVector.value.set(T.anisotropy*Math.cos(T.anisotropyRotation),T.anisotropy*Math.sin(T.anisotropyRotation)),T.anisotropyMap&&(w.anisotropyMap.value=T.anisotropyMap,t(T.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=T.specularIntensity,w.specularColor.value.copy(T.specularColor),T.specularColorMap&&(w.specularColorMap.value=T.specularColorMap,t(T.specularColorMap,w.specularColorMapTransform)),T.specularIntensityMap&&(w.specularIntensityMap.value=T.specularIntensityMap,t(T.specularIntensityMap,w.specularIntensityMapTransform))}function M(w,T){T.matcap&&(w.matcap.value=T.matcap)}function C(w,T){const D=e.get(T).light;w.referencePosition.value.setFromMatrixPosition(D.matrixWorld),w.nearDistance.value=D.shadow.camera.near,w.farDistance.value=D.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function O$(i,e,t,n){let r={},s={},o=[];const c=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function h(D,I){const L=I.program;n.uniformBlockBinding(D,L)}function d(D,I){let L=r[D.id];L===void 0&&(M(D),L=m(D),r[D.id]=L,D.addEventListener("dispose",w));const j=I.program;n.updateUBOMapping(D,j);const Y=e.render.frame;s[D.id]!==Y&&(_(D),s[D.id]=Y)}function m(D){const I=g();D.__bindingPointIndex=I;const L=i.createBuffer(),j=D.__size,Y=D.usage;return i.bindBuffer(i.UNIFORM_BUFFER,L),i.bufferData(i.UNIFORM_BUFFER,j,Y),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,I,L),L}function g(){for(let D=0;D<c;D++)if(o.indexOf(D)===-1)return o.push(D),D;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(D){const I=r[D.id],L=D.uniforms,j=D.__cache;i.bindBuffer(i.UNIFORM_BUFFER,I);for(let Y=0,k=L.length;Y<k;Y++){const V=Array.isArray(L[Y])?L[Y]:[L[Y]];for(let N=0,O=V.length;N<O;N++){const z=V[N];if(S(z,Y,N,j)===!0){const W=z.__offset,q=Array.isArray(z.value)?z.value:[z.value];let he=0;for(let fe=0;fe<q.length;fe++){const H=q[fe],K=C(H);typeof H=="number"||typeof H=="boolean"?(z.__data[0]=H,i.bufferSubData(i.UNIFORM_BUFFER,W+he,z.__data)):H.isMatrix3?(z.__data[0]=H.elements[0],z.__data[1]=H.elements[1],z.__data[2]=H.elements[2],z.__data[3]=0,z.__data[4]=H.elements[3],z.__data[5]=H.elements[4],z.__data[6]=H.elements[5],z.__data[7]=0,z.__data[8]=H.elements[6],z.__data[9]=H.elements[7],z.__data[10]=H.elements[8],z.__data[11]=0):(H.toArray(z.__data,he),he+=K.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,W,z.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function S(D,I,L,j){const Y=D.value,k=I+"_"+L;if(j[k]===void 0)return typeof Y=="number"||typeof Y=="boolean"?j[k]=Y:j[k]=Y.clone(),!0;{const V=j[k];if(typeof Y=="number"||typeof Y=="boolean"){if(V!==Y)return j[k]=Y,!0}else if(V.equals(Y)===!1)return V.copy(Y),!0}return!1}function M(D){const I=D.uniforms;let L=0;const j=16;for(let k=0,V=I.length;k<V;k++){const N=Array.isArray(I[k])?I[k]:[I[k]];for(let O=0,z=N.length;O<z;O++){const W=N[O],q=Array.isArray(W.value)?W.value:[W.value];for(let he=0,fe=q.length;he<fe;he++){const H=q[he],K=C(H),J=L%j,oe=J%K.boundary,se=J+oe;L+=oe,se!==0&&j-se<K.storage&&(L+=j-se),W.__data=new Float32Array(K.storage/Float32Array.BYTES_PER_ELEMENT),W.__offset=L,L+=K.storage}}}const Y=L%j;return Y>0&&(L+=j-Y),D.__size=L,D.__cache={},this}function C(D){const I={boundary:0,storage:0};return typeof D=="number"||typeof D=="boolean"?(I.boundary=4,I.storage=4):D.isVector2?(I.boundary=8,I.storage=8):D.isVector3||D.isColor?(I.boundary=16,I.storage=12):D.isVector4?(I.boundary=16,I.storage=16):D.isMatrix3?(I.boundary=48,I.storage=48):D.isMatrix4?(I.boundary=64,I.storage=64):D.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",D),I}function w(D){const I=D.target;I.removeEventListener("dispose",w);const L=o.indexOf(I.__bindingPointIndex);o.splice(L,1),i.deleteBuffer(r[I.id]),delete r[I.id],delete s[I.id]}function T(){for(const D in r)i.deleteBuffer(r[D]);o=[],r={},s={}}return{bind:h,update:d,dispose:T}}class X4{constructor(e={}){const{canvas:t=Vk(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:c=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:d=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reversedDepthBuffer:_=!1}=e;this.isWebGLRenderer=!0;let S;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");S=n.getContextAttributes().alpha}else S=o;const M=new Uint32Array(4),C=new Int32Array(4);let w=null,T=null;const D=[],I=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=eu,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const L=this;let j=!1;this._outputColorSpace=Qs;let Y=0,k=0,V=null,N=-1,O=null;const z=new ei,W=new ei;let q=null;const he=new At(0);let fe=0,H=t.width,K=t.height,J=1,oe=null,se=null;const Z=new ei(0,0,H,K),le=new ei(0,0,H,K);let Ce=!1;const Te=new Tv;let Ye=!1,xe=!1;const Oe=new sn,rt=new re,ft=new ei,bt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let en=!1;function Cn(){return V===null?J:1}let ae=n;function We($,me){return t.getContext($,me)}try{const $={alpha:!0,depth:r,stencil:s,antialias:c,premultipliedAlpha:h,preserveDrawingBuffer:d,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ST}`),t.addEventListener("webglcontextlost",lt,!1),t.addEventListener("webglcontextrestored",pt,!1),t.addEventListener("webglcontextcreationerror",nt,!1),ae===null){const me="webgl2";if(ae=We(me,$),ae===null)throw We(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let Ge,ze,Ve,ht,qe,Je,zt,Qt,ie,X,Se,Pe,$e,ke,It,ct,Ct,Rt,Ze,at,Nt,gt,mt,Yt;function pe(){Ge=new qZ(ae),Ge.init(),gt=new W4(ae,Ge),ze=new VZ(ae,Ge,e,gt),Ve=new M$(ae,Ge),ze.reversedDepthBuffer&&_&&Ve.buffers.depth.setReversed(!0),ht=new XZ(ae),qe=new f$,Je=new w$(ae,Ge,Ve,qe,ze,gt,ht),zt=new zZ(L),Qt=new jZ(L),ie=new eK(ae),mt=new UZ(ae,ie),X=new YZ(ae,ie,ht,mt),Se=new QZ(ae,X,ie,ht),Ze=new KZ(ae,ze,Je),ct=new BZ(qe),Pe=new h$(L,zt,Qt,Ge,ze,mt,ct),$e=new I$(L,qe),ke=new p$,It=new S$(Ge),Rt=new LZ(L,zt,Qt,Ve,Se,S,h),Ct=new E$(L,Se,ze),Yt=new O$(ae,ht,ze,Ve),at=new kZ(ae,Ge,ht),Nt=new WZ(ae,Ge,ht),ht.programs=Pe.programs,L.capabilities=ze,L.extensions=Ge,L.properties=qe,L.renderLists=ke,L.shadowMap=Ct,L.state=Ve,L.info=ht}pe();const it=new D$(L,ae);this.xr=it,this.getContext=function(){return ae},this.getContextAttributes=function(){return ae.getContextAttributes()},this.forceContextLoss=function(){const $=Ge.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=Ge.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function($){$!==void 0&&(J=$,this.setSize(H,K,!1))},this.getSize=function($){return $.set(H,K)},this.setSize=function($,me,be=!0){if(it.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=$,K=me,t.width=Math.floor($*J),t.height=Math.floor(me*J),be===!0&&(t.style.width=$+"px",t.style.height=me+"px"),this.setViewport(0,0,$,me)},this.getDrawingBufferSize=function($){return $.set(H*J,K*J).floor()},this.setDrawingBufferSize=function($,me,be){H=$,K=me,J=be,t.width=Math.floor($*be),t.height=Math.floor(me*be),this.setViewport(0,0,$,me)},this.getCurrentViewport=function($){return $.copy(z)},this.getViewport=function($){return $.copy(Z)},this.setViewport=function($,me,be,we){$.isVector4?Z.set($.x,$.y,$.z,$.w):Z.set($,me,be,we),Ve.viewport(z.copy(Z).multiplyScalar(J).round())},this.getScissor=function($){return $.copy(le)},this.setScissor=function($,me,be,we){$.isVector4?le.set($.x,$.y,$.z,$.w):le.set($,me,be,we),Ve.scissor(W.copy(le).multiplyScalar(J).round())},this.getScissorTest=function(){return Ce},this.setScissorTest=function($){Ve.setScissorTest(Ce=$)},this.setOpaqueSort=function($){oe=$},this.setTransparentSort=function($){se=$},this.getClearColor=function($){return $.copy(Rt.getClearColor())},this.setClearColor=function(){Rt.setClearColor(...arguments)},this.getClearAlpha=function(){return Rt.getClearAlpha()},this.setClearAlpha=function(){Rt.setClearAlpha(...arguments)},this.clear=function($=!0,me=!0,be=!0){let we=0;if($){let ge=!1;if(V!==null){const Ke=V.texture.format;ge=Ke===CT||Ke===AT||Ke===E0}if(ge){const Ke=V.texture.type,dt=Ke===il||Ke===mh||Ke===qg||Ke===Yg||Ke===TT||Ke===MT,Mt=Rt.getClearColor(),vt=Rt.getClearAlpha(),Pt=Mt.r,Gt=Mt.g,Ut=Mt.b;dt?(M[0]=Pt,M[1]=Gt,M[2]=Ut,M[3]=vt,ae.clearBufferuiv(ae.COLOR,0,M)):(C[0]=Pt,C[1]=Gt,C[2]=Ut,C[3]=vt,ae.clearBufferiv(ae.COLOR,0,C))}else we|=ae.COLOR_BUFFER_BIT}me&&(we|=ae.DEPTH_BUFFER_BIT),be&&(we|=ae.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ae.clear(we)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",lt,!1),t.removeEventListener("webglcontextrestored",pt,!1),t.removeEventListener("webglcontextcreationerror",nt,!1),Rt.dispose(),ke.dispose(),It.dispose(),qe.dispose(),zt.dispose(),Qt.dispose(),Se.dispose(),mt.dispose(),Yt.dispose(),Pe.dispose(),it.dispose(),it.removeEventListener("sessionstart",as),it.removeEventListener("sessionend",eo),os.stop()};function lt($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),j=!0}function pt(){console.log("THREE.WebGLRenderer: Context Restored."),j=!1;const $=ht.autoReset,me=Ct.enabled,be=Ct.autoUpdate,we=Ct.needsUpdate,ge=Ct.type;pe(),ht.autoReset=$,Ct.enabled=me,Ct.autoUpdate=be,Ct.needsUpdate=we,Ct.type=ge}function nt($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function Fe($){const me=$.target;me.removeEventListener("dispose",Fe),xt(me)}function xt($){Xt($),qe.remove($)}function Xt($){const me=qe.get($).programs;me!==void 0&&(me.forEach(function(be){Pe.releaseProgram(be)}),$.isShaderMaterial&&Pe.releaseShaderCache($))}this.renderBufferDirect=function($,me,be,we,ge,Ke){me===null&&(me=bt);const dt=ge.isMesh&&ge.matrixWorld.determinant()<0,Mt=ws($,me,be,we,ge);Ve.setMaterial(we,dt);let vt=be.index,Pt=1;if(we.wireframe===!0){if(vt=X.getWireframeAttribute(be),vt===void 0)return;Pt=2}const Gt=be.drawRange,Ut=be.attributes.position;let fn=Gt.start*Pt,kn=(Gt.start+Gt.count)*Pt;Ke!==null&&(fn=Math.max(fn,Ke.start*Pt),kn=Math.min(kn,(Ke.start+Ke.count)*Pt)),vt!==null?(fn=Math.max(fn,0),kn=Math.min(kn,vt.count)):Ut!=null&&(fn=Math.max(fn,0),kn=Math.min(kn,Ut.count));const ii=kn-fn;if(ii<0||ii===1/0)return;mt.setup(ge,we,Mt,be,vt);let _n,Kt=at;if(vt!==null&&(_n=ie.get(vt),Kt=Nt,Kt.setIndex(_n)),ge.isMesh)we.wireframe===!0?(Ve.setLineWidth(we.wireframeLinewidth*Cn()),Kt.setMode(ae.LINES)):Kt.setMode(ae.TRIANGLES);else if(ge.isLine){let Et=we.linewidth;Et===void 0&&(Et=1),Ve.setLineWidth(Et*Cn()),ge.isLineSegments?Kt.setMode(ae.LINES):ge.isLineLoop?Kt.setMode(ae.LINE_LOOP):Kt.setMode(ae.LINE_STRIP)}else ge.isPoints?Kt.setMode(ae.POINTS):ge.isSprite&&Kt.setMode(ae.TRIANGLES);if(ge.isBatchedMesh)if(ge._multiDrawInstances!==null)J_("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Kt.renderMultiDrawInstances(ge._multiDrawStarts,ge._multiDrawCounts,ge._multiDrawCount,ge._multiDrawInstances);else if(Ge.get("WEBGL_multi_draw"))Kt.renderMultiDraw(ge._multiDrawStarts,ge._multiDrawCounts,ge._multiDrawCount);else{const Et=ge._multiDrawStarts,Qn=ge._multiDrawCounts,xn=ge._multiDrawCount,ln=vt?ie.get(vt).bytesPerElement:1,ls=qe.get(we).currentProgram.getUniforms();for(let Si=0;Si<xn;Si++)ls.setValue(ae,"_gl_DrawID",Si),Kt.render(Et[Si]/ln,Qn[Si])}else if(ge.isInstancedMesh)Kt.renderInstances(fn,ii,ge.count);else if(be.isInstancedBufferGeometry){const Et=be._maxInstanceCount!==void 0?be._maxInstanceCount:1/0,Qn=Math.min(be.instanceCount,Et);Kt.renderInstances(fn,ii,Qn)}else Kt.render(fn,ii)};function In($,me,be){$.transparent===!0&&$.side===Bc&&$.forceSinglePass===!1?($.side=Ra,$.needsUpdate=!0,fr($,me,be),$.side=dh,$.needsUpdate=!0,fr($,me,be),$.side=Bc):fr($,me,be)}this.compile=function($,me,be=null){be===null&&(be=$),T=It.get(be),T.init(me),I.push(T),be.traverseVisible(function(ge){ge.isLight&&ge.layers.test(me.layers)&&(T.pushLight(ge),ge.castShadow&&T.pushShadow(ge))}),$!==be&&$.traverseVisible(function(ge){ge.isLight&&ge.layers.test(me.layers)&&(T.pushLight(ge),ge.castShadow&&T.pushShadow(ge))}),T.setupLights();const we=new Set;return $.traverse(function(ge){if(!(ge.isMesh||ge.isPoints||ge.isLine||ge.isSprite))return;const Ke=ge.material;if(Ke)if(Array.isArray(Ke))for(let dt=0;dt<Ke.length;dt++){const Mt=Ke[dt];In(Mt,be,ge),we.add(Mt)}else In(Ke,be,ge),we.add(Ke)}),T=I.pop(),we},this.compileAsync=function($,me,be=null){const we=this.compile($,me,be);return new Promise(ge=>{function Ke(){if(we.forEach(function(dt){qe.get(dt).currentProgram.isReady()&&we.delete(dt)}),we.size===0){ge($);return}setTimeout(Ke,10)}Ge.get("KHR_parallel_shader_compile")!==null?Ke():setTimeout(Ke,10)})};let on=null;function br($){on&&on($)}function as(){os.stop()}function eo(){os.start()}const os=new H4;os.setAnimationLoop(br),typeof self<"u"&&os.setContext(self),this.setAnimationLoop=function($){on=$,it.setAnimationLoop($),$===null?os.stop():os.start()},it.addEventListener("sessionstart",as),it.addEventListener("sessionend",eo),this.render=function($,me){if(me!==void 0&&me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(j===!0)return;if($.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),me.parent===null&&me.matrixWorldAutoUpdate===!0&&me.updateMatrixWorld(),it.enabled===!0&&it.isPresenting===!0&&(it.cameraAutoUpdate===!0&&it.updateCamera(me),me=it.getCamera()),$.isScene===!0&&$.onBeforeRender(L,$,me,V),T=It.get($,I.length),T.init(me),I.push(T),Oe.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),Te.setFromProjectionMatrix(Oe,xo,me.reversedDepth),xe=this.localClippingEnabled,Ye=ct.init(this.clippingPlanes,xe),w=ke.get($,D.length),w.init(),D.push(w),it.enabled===!0&&it.isPresenting===!0){const Ke=L.xr.getDepthSensingMesh();Ke!==null&&to(Ke,me,-1/0,L.sortObjects)}to($,me,0,L.sortObjects),w.finish(),L.sortObjects===!0&&w.sort(oe,se),en=it.enabled===!1||it.isPresenting===!1||it.hasDepthSensing()===!1,en&&Rt.addToRenderList(w,$),this.info.render.frame++,Ye===!0&&ct.beginShadows();const be=T.state.shadowsArray;Ct.render(be,$,me),Ye===!0&&ct.endShadows(),this.info.autoReset===!0&&this.info.reset();const we=w.opaque,ge=w.transmissive;if(T.setupLights(),me.isArrayCamera){const Ke=me.cameras;if(ge.length>0)for(let dt=0,Mt=Ke.length;dt<Mt;dt++){const vt=Ke[dt];na(we,ge,$,vt)}en&&Rt.render($);for(let dt=0,Mt=Ke.length;dt<Mt;dt++){const vt=Ke[dt];Lr(w,$,vt,vt.viewport)}}else ge.length>0&&na(we,ge,$,me),en&&Rt.render($),Lr(w,$,me);V!==null&&k===0&&(Je.updateMultisampleRenderTarget(V),Je.updateRenderTargetMipmap(V)),$.isScene===!0&&$.onAfterRender(L,$,me),mt.resetDefaultState(),N=-1,O=null,I.pop(),I.length>0?(T=I[I.length-1],Ye===!0&&ct.setGlobalState(L.clippingPlanes,T.state.camera)):T=null,D.pop(),D.length>0?w=D[D.length-1]:w=null};function to($,me,be,we){if($.visible===!1)return;if($.layers.test(me.layers)){if($.isGroup)be=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(me);else if($.isLight)T.pushLight($),$.castShadow&&T.pushShadow($);else if($.isSprite){if(!$.frustumCulled||Te.intersectsSprite($)){we&&ft.setFromMatrixPosition($.matrixWorld).applyMatrix4(Oe);const dt=Se.update($),Mt=$.material;Mt.visible&&w.push($,dt,Mt,be,ft.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||Te.intersectsObject($))){const dt=Se.update($),Mt=$.material;if(we&&($.boundingSphere!==void 0?($.boundingSphere===null&&$.computeBoundingSphere(),ft.copy($.boundingSphere.center)):(dt.boundingSphere===null&&dt.computeBoundingSphere(),ft.copy(dt.boundingSphere.center)),ft.applyMatrix4($.matrixWorld).applyMatrix4(Oe)),Array.isArray(Mt)){const vt=dt.groups;for(let Pt=0,Gt=vt.length;Pt<Gt;Pt++){const Ut=vt[Pt],fn=Mt[Ut.materialIndex];fn&&fn.visible&&w.push($,dt,fn,be,ft.z,Ut)}}else Mt.visible&&w.push($,dt,Mt,be,ft.z,null)}}const Ke=$.children;for(let dt=0,Mt=Ke.length;dt<Mt;dt++)to(Ke[dt],me,be,we)}function Lr($,me,be,we){const ge=$.opaque,Ke=$.transmissive,dt=$.transparent;T.setupLightsView(be),Ye===!0&&ct.setGlobalState(L.clippingPlanes,be),we&&Ve.viewport(z.copy(we)),ge.length>0&&Wr(ge,me,be),Ke.length>0&&Wr(Ke,me,be),dt.length>0&&Wr(dt,me,be),Ve.buffers.depth.setTest(!0),Ve.buffers.depth.setMask(!0),Ve.buffers.color.setMask(!0),Ve.setPolygonOffset(!1)}function na($,me,be,we){if((be.isScene===!0?be.overrideMaterial:null)!==null)return;T.state.transmissionRenderTarget[we.id]===void 0&&(T.state.transmissionRenderTarget[we.id]=new au(1,1,{generateMipmaps:!0,type:Ge.has("EXT_color_buffer_half_float")||Ge.has("EXT_color_buffer_float")?xv:il,minFilter:jc,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Kn.workingColorSpace}));const Ke=T.state.transmissionRenderTarget[we.id],dt=we.viewport||z;Ke.setSize(dt.z*L.transmissionResolutionScale,dt.w*L.transmissionResolutionScale);const Mt=L.getRenderTarget(),vt=L.getActiveCubeFace(),Pt=L.getActiveMipmapLevel();L.setRenderTarget(Ke),L.getClearColor(he),fe=L.getClearAlpha(),fe<1&&L.setClearColor(16777215,.5),L.clear(),en&&Rt.render(be);const Gt=L.toneMapping;L.toneMapping=eu;const Ut=we.viewport;if(we.viewport!==void 0&&(we.viewport=void 0),T.setupLightsView(we),Ye===!0&&ct.setGlobalState(L.clippingPlanes,we),Wr($,be,we),Je.updateMultisampleRenderTarget(Ke),Je.updateRenderTargetMipmap(Ke),Ge.has("WEBGL_multisampled_render_to_texture")===!1){let fn=!1;for(let kn=0,ii=me.length;kn<ii;kn++){const _n=me[kn],Kt=_n.object,Et=_n.geometry,Qn=_n.material,xn=_n.group;if(Qn.side===Bc&&Kt.layers.test(we.layers)){const ln=Qn.side;Qn.side=Ra,Qn.needsUpdate=!0,zi(Kt,be,we,Et,Qn,xn),Qn.side=ln,Qn.needsUpdate=!0,fn=!0}}fn===!0&&(Je.updateMultisampleRenderTarget(Ke),Je.updateRenderTargetMipmap(Ke))}L.setRenderTarget(Mt,vt,Pt),L.setClearColor(he,fe),Ut!==void 0&&(we.viewport=Ut),L.toneMapping=Gt}function Wr($,me,be){const we=me.isScene===!0?me.overrideMaterial:null;for(let ge=0,Ke=$.length;ge<Ke;ge++){const dt=$[ge],Mt=dt.object,vt=dt.geometry,Pt=dt.group;let Gt=dt.material;Gt.allowOverride===!0&&we!==null&&(Gt=we),Mt.layers.test(be.layers)&&zi(Mt,me,be,vt,Gt,Pt)}}function zi($,me,be,we,ge,Ke){$.onBeforeRender(L,me,be,we,ge,Ke),$.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),ge.onBeforeRender(L,me,be,we,$,Ke),ge.transparent===!0&&ge.side===Bc&&ge.forceSinglePass===!1?(ge.side=Ra,ge.needsUpdate=!0,L.renderBufferDirect(be,me,we,ge,$,Ke),ge.side=dh,ge.needsUpdate=!0,L.renderBufferDirect(be,me,we,ge,$,Ke),ge.side=Bc):L.renderBufferDirect(be,me,we,ge,$,Ke),$.onAfterRender(L,me,be,we,ge,Ke)}function fr($,me,be){me.isScene!==!0&&(me=bt);const we=qe.get($),ge=T.state.lights,Ke=T.state.shadowsArray,dt=ge.state.version,Mt=Pe.getParameters($,ge.state,Ke,me,be),vt=Pe.getProgramCacheKey(Mt);let Pt=we.programs;we.environment=$.isMeshStandardMaterial?me.environment:null,we.fog=me.fog,we.envMap=($.isMeshStandardMaterial?Qt:zt).get($.envMap||we.environment),we.envMapRotation=we.environment!==null&&$.envMap===null?me.environmentRotation:$.envMapRotation,Pt===void 0&&($.addEventListener("dispose",Fe),Pt=new Map,we.programs=Pt);let Gt=Pt.get(vt);if(Gt!==void 0){if(we.currentProgram===Gt&&we.lightsStateVersion===dt)return Ii($,Mt),Gt}else Mt.uniforms=Pe.getUniforms($),$.onBeforeCompile(Mt,L),Gt=Pe.acquireProgram(Mt,vt),Pt.set(vt,Gt),we.uniforms=Mt.uniforms;const Ut=we.uniforms;return(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(Ut.clippingPlanes=ct.uniform),Ii($,Mt),we.needsLights=Sh($),we.lightsStateVersion=dt,we.needsLights&&(Ut.ambientLightColor.value=ge.state.ambient,Ut.lightProbe.value=ge.state.probe,Ut.directionalLights.value=ge.state.directional,Ut.directionalLightShadows.value=ge.state.directionalShadow,Ut.spotLights.value=ge.state.spot,Ut.spotLightShadows.value=ge.state.spotShadow,Ut.rectAreaLights.value=ge.state.rectArea,Ut.ltc_1.value=ge.state.rectAreaLTC1,Ut.ltc_2.value=ge.state.rectAreaLTC2,Ut.pointLights.value=ge.state.point,Ut.pointLightShadows.value=ge.state.pointShadow,Ut.hemisphereLights.value=ge.state.hemi,Ut.directionalShadowMap.value=ge.state.directionalShadowMap,Ut.directionalShadowMatrix.value=ge.state.directionalShadowMatrix,Ut.spotShadowMap.value=ge.state.spotShadowMap,Ut.spotLightMatrix.value=ge.state.spotLightMatrix,Ut.spotLightMap.value=ge.state.spotLightMap,Ut.pointShadowMap.value=ge.state.pointShadowMap,Ut.pointShadowMatrix.value=ge.state.pointShadowMatrix),we.currentProgram=Gt,we.uniformsList=null,Gt}function hn($){if($.uniformsList===null){const me=$.currentProgram.getUniforms();$.uniformsList=mx.seqWithValue(me.seq,$.uniforms)}return $.uniformsList}function Ii($,me){const be=qe.get($);be.outputColorSpace=me.outputColorSpace,be.batching=me.batching,be.batchingColor=me.batchingColor,be.instancing=me.instancing,be.instancingColor=me.instancingColor,be.instancingMorph=me.instancingMorph,be.skinning=me.skinning,be.morphTargets=me.morphTargets,be.morphNormals=me.morphNormals,be.morphColors=me.morphColors,be.morphTargetsCount=me.morphTargetsCount,be.numClippingPlanes=me.numClippingPlanes,be.numIntersection=me.numClipIntersection,be.vertexAlphas=me.vertexAlphas,be.vertexTangents=me.vertexTangents,be.toneMapping=me.toneMapping}function ws($,me,be,we,ge){me.isScene!==!0&&(me=bt),Je.resetTextureUnits();const Ke=me.fog,dt=we.isMeshStandardMaterial?me.environment:null,Mt=V===null?L.outputColorSpace:V.isXRRenderTarget===!0?V.texture.colorSpace:Yf,vt=(we.isMeshStandardMaterial?Qt:zt).get(we.envMap||dt),Pt=we.vertexColors===!0&&!!be.attributes.color&&be.attributes.color.itemSize===4,Gt=!!be.attributes.tangent&&(!!we.normalMap||we.anisotropy>0),Ut=!!be.morphAttributes.position,fn=!!be.morphAttributes.normal,kn=!!be.morphAttributes.color;let ii=eu;we.toneMapped&&(V===null||V.isXRRenderTarget===!0)&&(ii=L.toneMapping);const _n=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,Kt=_n!==void 0?_n.length:0,Et=qe.get(we),Qn=T.state.lights;if(Ye===!0&&(xe===!0||$!==O)){const Fi=$===O&&we.id===N;ct.setState(we,$,Fi)}let xn=!1;we.version===Et.__version?(Et.needsLights&&Et.lightsStateVersion!==Qn.state.version||Et.outputColorSpace!==Mt||ge.isBatchedMesh&&Et.batching===!1||!ge.isBatchedMesh&&Et.batching===!0||ge.isBatchedMesh&&Et.batchingColor===!0&&ge.colorTexture===null||ge.isBatchedMesh&&Et.batchingColor===!1&&ge.colorTexture!==null||ge.isInstancedMesh&&Et.instancing===!1||!ge.isInstancedMesh&&Et.instancing===!0||ge.isSkinnedMesh&&Et.skinning===!1||!ge.isSkinnedMesh&&Et.skinning===!0||ge.isInstancedMesh&&Et.instancingColor===!0&&ge.instanceColor===null||ge.isInstancedMesh&&Et.instancingColor===!1&&ge.instanceColor!==null||ge.isInstancedMesh&&Et.instancingMorph===!0&&ge.morphTexture===null||ge.isInstancedMesh&&Et.instancingMorph===!1&&ge.morphTexture!==null||Et.envMap!==vt||we.fog===!0&&Et.fog!==Ke||Et.numClippingPlanes!==void 0&&(Et.numClippingPlanes!==ct.numPlanes||Et.numIntersection!==ct.numIntersection)||Et.vertexAlphas!==Pt||Et.vertexTangents!==Gt||Et.morphTargets!==Ut||Et.morphNormals!==fn||Et.morphColors!==kn||Et.toneMapping!==ii||Et.morphTargetsCount!==Kt)&&(xn=!0):(xn=!0,Et.__version=we.version);let ln=Et.currentProgram;xn===!0&&(ln=fr(we,me,ge));let ls=!1,Si=!1,Cs=!1;const En=ln.getUniforms(),sr=Et.uniforms;if(Ve.useProgram(ln.program)&&(ls=!0,Si=!0,Cs=!0),we.id!==N&&(N=we.id,Si=!0),ls||O!==$){Ve.buffers.depth.getReversed()&&$.reversedDepth!==!0&&($._reversedDepth=!0,$.updateProjectionMatrix()),En.setValue(ae,"projectionMatrix",$.projectionMatrix),En.setValue(ae,"viewMatrix",$.matrixWorldInverse);const Oi=En.map.cameraPosition;Oi!==void 0&&Oi.setValue(ae,rt.setFromMatrixPosition($.matrixWorld)),ze.logarithmicDepthBuffer&&En.setValue(ae,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial)&&En.setValue(ae,"isOrthographic",$.isOrthographicCamera===!0),O!==$&&(O=$,Si=!0,Cs=!0)}if(ge.isSkinnedMesh){En.setOptional(ae,ge,"bindMatrix"),En.setOptional(ae,ge,"bindMatrixInverse");const Fi=ge.skeleton;Fi&&(Fi.boneTexture===null&&Fi.computeBoneTexture(),En.setValue(ae,"boneTexture",Fi.boneTexture,Je))}ge.isBatchedMesh&&(En.setOptional(ae,ge,"batchingTexture"),En.setValue(ae,"batchingTexture",ge._matricesTexture,Je),En.setOptional(ae,ge,"batchingIdTexture"),En.setValue(ae,"batchingIdTexture",ge._indirectTexture,Je),En.setOptional(ae,ge,"batchingColorTexture"),ge._colorsTexture!==null&&En.setValue(ae,"batchingColorTexture",ge._colorsTexture,Je));const xr=be.morphAttributes;if((xr.position!==void 0||xr.normal!==void 0||xr.color!==void 0)&&Ze.update(ge,be,ln),(Si||Et.receiveShadow!==ge.receiveShadow)&&(Et.receiveShadow=ge.receiveShadow,En.setValue(ae,"receiveShadow",ge.receiveShadow)),we.isMeshGouraudMaterial&&we.envMap!==null&&(sr.envMap.value=vt,sr.flipEnvMap.value=vt.isCubeTexture&&vt.isRenderTargetTexture===!1?-1:1),we.isMeshStandardMaterial&&we.envMap===null&&me.environment!==null&&(sr.envMapIntensity.value=me.environmentIntensity),Si&&(En.setValue(ae,"toneMappingExposure",L.toneMappingExposure),Et.needsLights&&al(sr,Cs),Ke&&we.fog===!0&&$e.refreshFogUniforms(sr,Ke),$e.refreshMaterialUniforms(sr,we,J,K,T.state.transmissionRenderTarget[$.id]),mx.upload(ae,hn(Et),sr,Je)),we.isShaderMaterial&&we.uniformsNeedUpdate===!0&&(mx.upload(ae,hn(Et),sr,Je),we.uniformsNeedUpdate=!1),we.isSpriteMaterial&&En.setValue(ae,"center",ge.center),En.setValue(ae,"modelViewMatrix",ge.modelViewMatrix),En.setValue(ae,"normalMatrix",ge.normalMatrix),En.setValue(ae,"modelMatrix",ge.matrixWorld),we.isShaderMaterial||we.isRawShaderMaterial){const Fi=we.uniformsGroups;for(let Oi=0,ol=Fi.length;Oi<ol;Oi++){const Xi=Fi[Oi];Yt.update(Xi,ln),Yt.bind(Xi,ln)}}return ln}function al($,me){$.ambientLightColor.needsUpdate=me,$.lightProbe.needsUpdate=me,$.directionalLights.needsUpdate=me,$.directionalLightShadows.needsUpdate=me,$.pointLights.needsUpdate=me,$.pointLightShadows.needsUpdate=me,$.spotLights.needsUpdate=me,$.spotLightShadows.needsUpdate=me,$.rectAreaLights.needsUpdate=me,$.hemisphereLights.needsUpdate=me}function Sh($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return Y},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return V},this.setRenderTargetTextures=function($,me,be){const we=qe.get($);we.__autoAllocateDepthBuffer=$.resolveDepthBuffer===!1,we.__autoAllocateDepthBuffer===!1&&(we.__useRenderToTexture=!1),qe.get($.texture).__webglTexture=me,qe.get($.depthTexture).__webglTexture=we.__autoAllocateDepthBuffer?void 0:be,we.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function($,me){const be=qe.get($);be.__webglFramebuffer=me,be.__useDefaultFramebuffer=me===void 0};const bh=ae.createFramebuffer();this.setRenderTarget=function($,me=0,be=0){V=$,Y=me,k=be;let we=!0,ge=null,Ke=!1,dt=!1;if($){const vt=qe.get($);if(vt.__useDefaultFramebuffer!==void 0)Ve.bindFramebuffer(ae.FRAMEBUFFER,null),we=!1;else if(vt.__webglFramebuffer===void 0)Je.setupRenderTarget($);else if(vt.__hasExternalTextures)Je.rebindTextures($,qe.get($.texture).__webglTexture,qe.get($.depthTexture).__webglTexture);else if($.depthBuffer){const Ut=$.depthTexture;if(vt.__boundDepthTexture!==Ut){if(Ut!==null&&qe.has(Ut)&&($.width!==Ut.image.width||$.height!==Ut.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Je.setupDepthRenderbuffer($)}}const Pt=$.texture;(Pt.isData3DTexture||Pt.isDataArrayTexture||Pt.isCompressedArrayTexture)&&(dt=!0);const Gt=qe.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Array.isArray(Gt[me])?ge=Gt[me][be]:ge=Gt[me],Ke=!0):$.samples>0&&Je.useMultisampledRTT($)===!1?ge=qe.get($).__webglMultisampledFramebuffer:Array.isArray(Gt)?ge=Gt[be]:ge=Gt,z.copy($.viewport),W.copy($.scissor),q=$.scissorTest}else z.copy(Z).multiplyScalar(J).floor(),W.copy(le).multiplyScalar(J).floor(),q=Ce;if(be!==0&&(ge=bh),Ve.bindFramebuffer(ae.FRAMEBUFFER,ge)&&we&&Ve.drawBuffers($,ge),Ve.viewport(z),Ve.scissor(W),Ve.setScissorTest(q),Ke){const vt=qe.get($.texture);ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_CUBE_MAP_POSITIVE_X+me,vt.__webglTexture,be)}else if(dt){const vt=me;for(let Pt=0;Pt<$.textures.length;Pt++){const Gt=qe.get($.textures[Pt]);ae.framebufferTextureLayer(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0+Pt,Gt.__webglTexture,be,vt)}}else if($!==null&&be!==0){const vt=qe.get($.texture);ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,vt.__webglTexture,be)}N=-1},this.readRenderTargetPixels=function($,me,be,we,ge,Ke,dt,Mt=0){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let vt=qe.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&dt!==void 0&&(vt=vt[dt]),vt){Ve.bindFramebuffer(ae.FRAMEBUFFER,vt);try{const Pt=$.textures[Mt],Gt=Pt.format,Ut=Pt.type;if(!ze.textureFormatReadable(Gt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ze.textureTypeReadable(Ut)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}me>=0&&me<=$.width-we&&be>=0&&be<=$.height-ge&&($.textures.length>1&&ae.readBuffer(ae.COLOR_ATTACHMENT0+Mt),ae.readPixels(me,be,we,ge,gt.convert(Gt),gt.convert(Ut),Ke))}finally{const Pt=V!==null?qe.get(V).__webglFramebuffer:null;Ve.bindFramebuffer(ae.FRAMEBUFFER,Pt)}}},this.readRenderTargetPixelsAsync=async function($,me,be,we,ge,Ke,dt,Mt=0){if(!($&&$.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let vt=qe.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&dt!==void 0&&(vt=vt[dt]),vt)if(me>=0&&me<=$.width-we&&be>=0&&be<=$.height-ge){Ve.bindFramebuffer(ae.FRAMEBUFFER,vt);const Pt=$.textures[Mt],Gt=Pt.format,Ut=Pt.type;if(!ze.textureFormatReadable(Gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ze.textureTypeReadable(Ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const fn=ae.createBuffer();ae.bindBuffer(ae.PIXEL_PACK_BUFFER,fn),ae.bufferData(ae.PIXEL_PACK_BUFFER,Ke.byteLength,ae.STREAM_READ),$.textures.length>1&&ae.readBuffer(ae.COLOR_ATTACHMENT0+Mt),ae.readPixels(me,be,we,ge,gt.convert(Gt),gt.convert(Ut),0);const kn=V!==null?qe.get(V).__webglFramebuffer:null;Ve.bindFramebuffer(ae.FRAMEBUFFER,kn);const ii=ae.fenceSync(ae.SYNC_GPU_COMMANDS_COMPLETE,0);return ae.flush(),await vY(ae,ii,4),ae.bindBuffer(ae.PIXEL_PACK_BUFFER,fn),ae.getBufferSubData(ae.PIXEL_PACK_BUFFER,0,Ke),ae.deleteBuffer(fn),ae.deleteSync(ii),Ke}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function($,me=null,be=0){const we=Math.pow(2,-be),ge=Math.floor($.image.width*we),Ke=Math.floor($.image.height*we),dt=me!==null?me.x:0,Mt=me!==null?me.y:0;Je.setTexture2D($,0),ae.copyTexSubImage2D(ae.TEXTURE_2D,be,0,0,dt,Mt,ge,Ke),Ve.unbindTexture()};const ec=ae.createFramebuffer(),As=ae.createFramebuffer();this.copyTextureToTexture=function($,me,be=null,we=null,ge=0,Ke=null){Ke===null&&(ge!==0?(J_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ke=ge,ge=0):Ke=0);let dt,Mt,vt,Pt,Gt,Ut,fn,kn,ii;const _n=$.isCompressedTexture?$.mipmaps[Ke]:$.image;if(be!==null)dt=be.max.x-be.min.x,Mt=be.max.y-be.min.y,vt=be.isBox3?be.max.z-be.min.z:1,Pt=be.min.x,Gt=be.min.y,Ut=be.isBox3?be.min.z:0;else{const xr=Math.pow(2,-ge);dt=Math.floor(_n.width*xr),Mt=Math.floor(_n.height*xr),$.isDataArrayTexture?vt=_n.depth:$.isData3DTexture?vt=Math.floor(_n.depth*xr):vt=1,Pt=0,Gt=0,Ut=0}we!==null?(fn=we.x,kn=we.y,ii=we.z):(fn=0,kn=0,ii=0);const Kt=gt.convert(me.format),Et=gt.convert(me.type);let Qn;me.isData3DTexture?(Je.setTexture3D(me,0),Qn=ae.TEXTURE_3D):me.isDataArrayTexture||me.isCompressedArrayTexture?(Je.setTexture2DArray(me,0),Qn=ae.TEXTURE_2D_ARRAY):(Je.setTexture2D(me,0),Qn=ae.TEXTURE_2D),ae.pixelStorei(ae.UNPACK_FLIP_Y_WEBGL,me.flipY),ae.pixelStorei(ae.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),ae.pixelStorei(ae.UNPACK_ALIGNMENT,me.unpackAlignment);const xn=ae.getParameter(ae.UNPACK_ROW_LENGTH),ln=ae.getParameter(ae.UNPACK_IMAGE_HEIGHT),ls=ae.getParameter(ae.UNPACK_SKIP_PIXELS),Si=ae.getParameter(ae.UNPACK_SKIP_ROWS),Cs=ae.getParameter(ae.UNPACK_SKIP_IMAGES);ae.pixelStorei(ae.UNPACK_ROW_LENGTH,_n.width),ae.pixelStorei(ae.UNPACK_IMAGE_HEIGHT,_n.height),ae.pixelStorei(ae.UNPACK_SKIP_PIXELS,Pt),ae.pixelStorei(ae.UNPACK_SKIP_ROWS,Gt),ae.pixelStorei(ae.UNPACK_SKIP_IMAGES,Ut);const En=$.isDataArrayTexture||$.isData3DTexture,sr=me.isDataArrayTexture||me.isData3DTexture;if($.isDepthTexture){const xr=qe.get($),Fi=qe.get(me),Oi=qe.get(xr.__renderTarget),ol=qe.get(Fi.__renderTarget);Ve.bindFramebuffer(ae.READ_FRAMEBUFFER,Oi.__webglFramebuffer),Ve.bindFramebuffer(ae.DRAW_FRAMEBUFFER,ol.__webglFramebuffer);for(let Xi=0;Xi<vt;Xi++)En&&(ae.framebufferTextureLayer(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,qe.get($).__webglTexture,ge,Ut+Xi),ae.framebufferTextureLayer(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,qe.get(me).__webglTexture,Ke,ii+Xi)),ae.blitFramebuffer(Pt,Gt,dt,Mt,fn,kn,dt,Mt,ae.DEPTH_BUFFER_BIT,ae.NEAREST);Ve.bindFramebuffer(ae.READ_FRAMEBUFFER,null),Ve.bindFramebuffer(ae.DRAW_FRAMEBUFFER,null)}else if(ge!==0||$.isRenderTargetTexture||qe.has($)){const xr=qe.get($),Fi=qe.get(me);Ve.bindFramebuffer(ae.READ_FRAMEBUFFER,ec),Ve.bindFramebuffer(ae.DRAW_FRAMEBUFFER,As);for(let Oi=0;Oi<vt;Oi++)En?ae.framebufferTextureLayer(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,xr.__webglTexture,ge,Ut+Oi):ae.framebufferTexture2D(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,xr.__webglTexture,ge),sr?ae.framebufferTextureLayer(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,Fi.__webglTexture,Ke,ii+Oi):ae.framebufferTexture2D(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,Fi.__webglTexture,Ke),ge!==0?ae.blitFramebuffer(Pt,Gt,dt,Mt,fn,kn,dt,Mt,ae.COLOR_BUFFER_BIT,ae.NEAREST):sr?ae.copyTexSubImage3D(Qn,Ke,fn,kn,ii+Oi,Pt,Gt,dt,Mt):ae.copyTexSubImage2D(Qn,Ke,fn,kn,Pt,Gt,dt,Mt);Ve.bindFramebuffer(ae.READ_FRAMEBUFFER,null),Ve.bindFramebuffer(ae.DRAW_FRAMEBUFFER,null)}else sr?$.isDataTexture||$.isData3DTexture?ae.texSubImage3D(Qn,Ke,fn,kn,ii,dt,Mt,vt,Kt,Et,_n.data):me.isCompressedArrayTexture?ae.compressedTexSubImage3D(Qn,Ke,fn,kn,ii,dt,Mt,vt,Kt,_n.data):ae.texSubImage3D(Qn,Ke,fn,kn,ii,dt,Mt,vt,Kt,Et,_n):$.isDataTexture?ae.texSubImage2D(ae.TEXTURE_2D,Ke,fn,kn,dt,Mt,Kt,Et,_n.data):$.isCompressedTexture?ae.compressedTexSubImage2D(ae.TEXTURE_2D,Ke,fn,kn,_n.width,_n.height,Kt,_n.data):ae.texSubImage2D(ae.TEXTURE_2D,Ke,fn,kn,dt,Mt,Kt,Et,_n);ae.pixelStorei(ae.UNPACK_ROW_LENGTH,xn),ae.pixelStorei(ae.UNPACK_IMAGE_HEIGHT,ln),ae.pixelStorei(ae.UNPACK_SKIP_PIXELS,ls),ae.pixelStorei(ae.UNPACK_SKIP_ROWS,Si),ae.pixelStorei(ae.UNPACK_SKIP_IMAGES,Cs),Ke===0&&me.generateMipmaps&&ae.generateMipmap(Qn),Ve.unbindTexture()},this.initRenderTarget=function($){qe.get($).__webglFramebuffer===void 0&&Je.setupRenderTarget($)},this.initTexture=function($){$.isCubeTexture?Je.setTextureCube($,0):$.isData3DTexture?Je.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?Je.setTexture2DArray($,0):Je.setTexture2D($,0),Ve.unbindTexture()},this.resetState=function(){Y=0,k=0,V=null,Ve.reset(),mt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return xo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Kn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Kn._getUnpackColorSpace()}}const P$=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:GC,AddEquation:wf,AddOperation:gk,AdditiveAnimationBlendMode:JC,AdditiveBlending:cA,AgXToneMapping:bk,AlphaFormat:KC,AlwaysCompare:Uk,AlwaysDepth:Wx,AlwaysStencilFunc:dA,AmbientLight:D4,AnimationAction:B4,AnimationClip:r0,AnimationLoader:jW,AnimationMixer:_X,AnimationObjectGroup:vX,AnimationUtils:zW,ArcCurve:t4,ArrayCamera:U4,ArrowHelper:qX,AttachedBindMode:fA,Audio:k4,AudioAnalyser:oX,AudioContext:TR,AudioListener:rX,AudioLoader:tX,AxesHelper:YX,BackSide:Ra,BasicDepthPacking:Ak,BasicShadowMap:QU,BatchedMesh:Qk,Bone:aR,BooleanKeyframeTrack:Wp,Box2:RX,Box3:$s,Box3Helper:GX,BoxGeometry:Yp,BoxHelper:HX,BufferAttribute:Mi,BufferGeometry:bn,BufferGeometryLoader:L4,ByteType:qC,Cache:qc,Camera:IT,CameraHelper:FX,CanvasTexture:cW,CapsuleGeometry:BT,CatmullRomCurve3:n4,CineonToneMapping:_k,CircleGeometry:zT,ClampToEdgeWrapping:tl,Clock:MR,Color:At,ColorKeyframeTrack:bR,ColorManagement:Kn,CompressedArrayTexture:oW,CompressedCubeTexture:lW,CompressedTexture:VT,CompressedTextureLoader:qW,ConeGeometry:w0,ConstantAlphaFactor:dk,ConstantColorFactor:hk,Controls:XX,CubeCamera:Gk,CubeReflectionMapping:ph,CubeRefractionMapping:qf,CubeTexture:T0,CubeTextureLoader:YW,CubeUVReflectionMapping:bv,CubicBezierCurve:hR,CubicBezierCurve3:i4,CubicInterpolant:x4,CullFaceBack:lA,CullFaceFront:KU,CullFaceFrontBack:gq,CullFaceNone:XU,Curve:$l,CurvePath:s4,CustomBlending:ZU,CustomToneMapping:Sk,CylinderGeometry:M0,Cylindrical:CX,Data3DTexture:NT,DataArrayTexture:DT,DataTexture:tu,DataTextureLoader:WW,DataUtils:IY,DecrementStencilOp:Dq,DecrementWrapStencilOp:Iq,DefaultLoadingManager:M4,DepthFormat:Wg,DepthStencilFormat:Xg,DepthTexture:lR,DetachedBindMode:Ek,DirectionalLight:R4,DirectionalLightHelper:zX,DiscreteInterpolant:E4,DodecahedronGeometry:FT,DoubleSide:Bc,DstAlphaFactor:ak,DstColorFactor:lk,DynamicCopyUsage:Wq,DynamicDrawUsage:Fq,DynamicReadUsage:jq,EdgesGeometry:e4,EllipseCurve:HT,EqualCompare:Ik,EqualDepth:Kx,EqualStencilFunc:Uq,EquirectangularReflectionMapping:G_,EquirectangularRefractionMapping:j_,Euler:wo,EventDispatcher:cu,ExternalTexture:cR,ExtrudeGeometry:GT,FileLoader:gh,Float16BufferAttribute:BY,Float32BufferAttribute:Lt,FloatType:Za,Fog:PT,FogExp2:OT,FramebufferTexture:aW,FrontSide:dh,Frustum:Tv,FrustumArray:kT,GLBufferAttribute:TX,GLSL1:Kq,GLSL3:pA,GreaterCompare:Ok,GreaterDepth:Zx,GreaterEqualCompare:Lk,GreaterEqualDepth:Qx,GreaterEqualStencilFunc:zq,GreaterStencilFunc:Vq,GridHelper:VX,Group:wg,HalfFloatType:xv,HemisphereLight:w4,HemisphereLightHelper:kX,IcosahedronGeometry:jT,ImageBitmapLoader:eX,ImageLoader:s0,ImageUtils:Bk,IncrementStencilOp:Rq,IncrementWrapStencilOp:Nq,InstancedBufferAttribute:$g,InstancedBufferGeometry:P4,InstancedInterleavedBuffer:EX,InstancedMesh:Kk,Int16BufferAttribute:kY,Int32BufferAttribute:VY,Int8BufferAttribute:PY,IntType:ET,InterleavedBuffer:LT,InterleavedBufferAttribute:Np,Interpolant:R0,InterpolateDiscrete:W_,InterpolateLinear:AE,InterpolateSmooth:dx,InterpolationSamplingMode:Jq,InterpolationSamplingType:Zq,InvertStencilOp:Oq,KeepStencilOp:sp,KeyframeTrack:sl,LOD:Wk,LatheGeometry:qT,Layers:Zg,LessCompare:Nk,LessDepth:Xx,LessEqualCompare:$C,LessEqualDepth:Dp,LessEqualStencilFunc:kq,LessStencilFunc:Lq,Light:ed,LightProbe:O4,Line:Wf,Line3:IX,LineBasicMaterial:Da,LineCurve:fR,LineCurve3:r4,LineDashedMaterial:_4,LineLoop:Zk,LineSegments:uu,LinearFilter:Hr,LinearInterpolant:SR,LinearMipMapLinearFilter:Sq,LinearMipMapNearestFilter:_q,LinearMipmapLinearFilter:jc,LinearMipmapNearestFilter:x_,LinearSRGBColorSpace:Yf,LinearToneMapping:vk,LinearTransfer:K_,Loader:$a,LoaderUtils:_A,LoadingManager:xR,LoopOnce:Tk,LoopPingPong:wk,LoopRepeat:Mk,MOUSE:pq,Material:ta,MaterialLoader:JT,MathUtils:mY,Matrix2:RR,Matrix3:yn,Matrix4:sn,MaxEquation:tk,Mesh:Pr,MeshBasicMaterial:Jf,MeshDepthMaterial:vR,MeshDistanceMaterial:yR,MeshLambertMaterial:v4,MeshMatcapMaterial:y4,MeshNormalMaterial:g4,MeshPhongMaterial:p4,MeshPhysicalMaterial:d4,MeshStandardMaterial:gR,MeshToonMaterial:m4,MinEquation:ek,MirroredRepeatWrapping:Y_,MixOperation:mk,MultiplyBlending:hA,MultiplyOperation:x0,NearestFilter:xs,NearestMipMapLinearFilter:yq,NearestMipMapNearestFilter:vq,NearestMipmapLinearFilter:Tg,NearestMipmapNearestFilter:jC,NeutralToneMapping:xk,NeverCompare:Dk,NeverDepth:Yx,NeverStencilFunc:Pq,NoBlending:ih,NoColorSpace:Qu,NoToneMapping:eu,NormalAnimationBlendMode:RT,NormalBlending:Sp,NotEqualCompare:Pk,NotEqualDepth:Jx,NotEqualStencilFunc:Bq,NumberKeyframeTrack:n0,Object3D:ni,ObjectLoader:JW,ObjectSpaceNormalMap:Rk,OctahedronGeometry:A0,OneFactor:ik,OneMinusConstantAlphaFactor:pk,OneMinusConstantColorFactor:fk,OneMinusDstAlphaFactor:ok,OneMinusDstColorFactor:ck,OneMinusSrcAlphaFactor:qx,OneMinusSrcColorFactor:sk,OrthographicCamera:N0,PCFShadowMap:bT,PCFSoftShadowMap:b_,PMREMGenerator:xA,Path:NE,PerspectiveCamera:rs,Plane:bf,PlaneGeometry:Mv,PlaneHelper:jX,PointLight:C4,PointLightHelper:LX,Points:Jk,PointsMaterial:oR,PolarGridHelper:BX,PolyhedronGeometry:$f,PositionalAudio:aX,PropertyBinding:$n,PropertyMixer:V4,QuadraticBezierCurve:dR,QuadraticBezierCurve3:pR,Quaternion:Ja,QuaternionKeyframeTrack:D0,QuaternionLinearInterpolant:T4,RED_GREEN_RGTC2_Format:ME,RED_RGTC1_Format:EE,REVISION:ST,RGBADepthPacking:Ck,RGBAFormat:Js,RGBAIntegerFormat:CT,RGBA_ASTC_10x10_Format:vE,RGBA_ASTC_10x5_Format:pE,RGBA_ASTC_10x6_Format:mE,RGBA_ASTC_10x8_Format:gE,RGBA_ASTC_12x10_Format:yE,RGBA_ASTC_12x12_Format:_E,RGBA_ASTC_4x4_Format:aE,RGBA_ASTC_5x4_Format:oE,RGBA_ASTC_5x5_Format:lE,RGBA_ASTC_6x5_Format:cE,RGBA_ASTC_6x6_Format:uE,RGBA_ASTC_8x5_Format:hE,RGBA_ASTC_8x6_Format:fE,RGBA_ASTC_8x8_Format:dE,RGBA_BPTC_Format:SE,RGBA_ETC2_EAC_Format:sE,RGBA_PVRTC_2BPPV1_Format:nE,RGBA_PVRTC_4BPPV1_Format:tE,RGBA_S3TC_DXT1_Format:T_,RGBA_S3TC_DXT3_Format:M_,RGBA_S3TC_DXT5_Format:w_,RGBDepthPacking:Mq,RGBFormat:QC,RGBIntegerFormat:bq,RGB_BPTC_SIGNED_Format:bE,RGB_BPTC_UNSIGNED_Format:xE,RGB_ETC1_Format:iE,RGB_ETC2_Format:rE,RGB_PVRTC_2BPPV1_Format:eE,RGB_PVRTC_4BPPV1_Format:$x,RGB_S3TC_DXT1_Format:E_,RGDepthPacking:wq,RGFormat:ZC,RGIntegerFormat:AT,RawShaderMaterial:f4,Ray:Ev,Raycaster:z4,RectAreaLight:N4,RedFormat:wT,RedIntegerFormat:E0,ReinhardToneMapping:yk,RenderTarget:tR,RenderTarget3D:SX,RepeatWrapping:q_,ReplaceStencilOp:Cq,ReverseSubtractEquation:$U,RingGeometry:YT,SIGNED_RED_GREEN_RGTC2_Format:wE,SIGNED_RED_RGTC1_Format:TE,SRGBColorSpace:Qs,SRGBTransfer:vi,Scene:rR,ShaderChunk:wn,ShaderLib:kl,ShaderMaterial:Ql,ShadowMaterial:h4,Shape:xp,ShapeGeometry:WT,ShapePath:WX,ShapeUtils:Fl,ShortType:YC,Skeleton:UT,SkeletonHelper:PX,SkinnedMesh:Xk,Source:Rf,Sphere:Es,SphereGeometry:C0,Spherical:AX,SphericalHarmonics3:I4,SplineCurve:mR,SpotLight:A4,SpotLightHelper:OX,Sprite:Yk,SpriteMaterial:sR,SrcAlphaFactor:jx,SrcAlphaSaturateFactor:uk,SrcColorFactor:rk,StaticCopyUsage:Yq,StaticDrawUsage:Q_,StaticReadUsage:Gq,StereoCamera:nX,StreamCopyUsage:Xq,StreamDrawUsage:Hq,StreamReadUsage:qq,StringKeyframeTrack:Xp,SubtractEquation:JU,SubtractiveBlending:uA,TOUCH:mq,TangentSpaceNormalMap:Zf,TetrahedronGeometry:XT,Texture:ur,TextureLoader:XW,TextureUtils:$X,Timer:MX,TimestampQuery:Qq,TorusGeometry:KT,TorusKnotGeometry:QT,Triangle:Ka,TriangleFanDrawMode:Tq,TriangleStripDrawMode:Eq,TrianglesDrawMode:xq,TubeGeometry:ZT,UVMapping:xT,Uint16BufferAttribute:nR,Uint32BufferAttribute:iR,Uint8BufferAttribute:LY,Uint8ClampedBufferAttribute:UY,Uniform:CR,UniformsGroup:xX,UniformsLib:St,UniformsUtils:Hk,UnsignedByteType:il,UnsignedInt101111Type:XC,UnsignedInt248Type:Yg,UnsignedInt5999Type:WC,UnsignedIntType:mh,UnsignedShort4444Type:TT,UnsignedShort5551Type:MT,UnsignedShortType:qg,VSMShadowMap:Ul,Vector2:tt,Vector3:re,Vector4:ei,VectorKeyframeTrack:i0,VideoFrameTexture:sW,VideoTexture:$k,WebGL3DRenderTarget:xY,WebGLArrayRenderTarget:bY,WebGLCoordinateSystem:xo,WebGLCubeRenderTarget:jk,WebGLRenderTarget:au,WebGLRenderer:X4,WebGLUtils:W4,WebGPUCoordinateSystem:Kg,WebXRController:px,WireframeGeometry:u4,WrapAroundEnding:X_,ZeroCurvatureEnding:dp,ZeroFactor:nk,ZeroSlopeEnding:pp,ZeroStencilOp:Aq,createCanvasElement:Vk},Symbol.toStringTag,{value:"Module"}));var a1={exports:{}},o1={},l1={exports:{}},c1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _O;function L$(){if(_O)return c1;_O=1;var i=cv();function e(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,r=i.useEffect,s=i.useLayoutEffect,o=i.useDebugValue;function c(g,_){var S=_(),M=n({inst:{value:S,getSnapshot:_}}),C=M[0].inst,w=M[1];return s(function(){C.value=S,C.getSnapshot=_,h(C)&&w({inst:C})},[g,S,_]),r(function(){return h(C)&&w({inst:C}),g(function(){h(C)&&w({inst:C})})},[g]),o(S),S}function h(g){var _=g.getSnapshot;g=g.value;try{var S=_();return!t(g,S)}catch{return!0}}function d(g,_){return _()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return c1.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:m,c1}var SO;function U$(){return SO||(SO=1,l1.exports=L$()),l1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bO;function k$(){if(bO)return o1;bO=1;var i=cv(),e=U$();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=i.useRef,o=i.useEffect,c=i.useMemo,h=i.useDebugValue;return o1.useSyncExternalStoreWithSelector=function(d,m,g,_,S){var M=s(null);if(M.current===null){var C={hasValue:!1,value:null};M.current=C}else C=M.current;M=c(function(){function T(Y){if(!D){if(D=!0,I=Y,Y=_(Y),S!==void 0&&C.hasValue){var k=C.value;if(S(k,Y))return L=k}return L=Y}if(k=L,n(I,Y))return k;var V=_(Y);return S!==void 0&&S(k,V)?(I=Y,k):(I=Y,L=V)}var D=!1,I,L,j=g===void 0?null:g;return[function(){return T(m())},j===null?void 0:function(){return T(j())}]},[m,g,_,S]);var w=r(d,M[0],M[1]);return o(function(){C.hasValue=!0,C.value=w},[w]),h(w),w},o1}var xO;function V$(){return xO||(xO=1,a1.exports=k$()),a1.exports}var B$=V$();const z$=XE(B$),EO=i=>{let e;const t=new Set,n=(d,m)=>{const g=typeof d=="function"?d(e):d;if(!Object.is(g,e)){const _=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(S=>S(e,_))}},r=()=>e,c={setState:n,getState:r,getInitialState:()=>h,subscribe:d=>(t.add(d),()=>t.delete(d))},h=e=i(n,r,c);return c},F$=(i=>i?EO(i):EO),{useSyncExternalStoreWithSelector:H$}=z$,G$=i=>i;function j$(i,e=G$,t){const n=H$(i.subscribe,i.getState,i.getInitialState,e,t);return Ue.useDebugValue(n),n}const TO=(i,e)=>{const t=F$(i),n=(r,s=e)=>j$(t,r,s);return Object.assign(n,t),n},q$=((i,e)=>i?TO(i,e):TO);var u1={exports:{}},h1={exports:{}},f1={exports:{}},d1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MO;function Y$(){return MO||(MO=1,(function(i){function e(H,K){var J=H.length;H.push(K);e:for(;0<J;){var oe=J-1>>>1,se=H[oe];if(0<r(se,K))H[oe]=K,H[J]=se,J=oe;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var K=H[0],J=H.pop();if(J!==K){H[0]=J;e:for(var oe=0,se=H.length,Z=se>>>1;oe<Z;){var le=2*(oe+1)-1,Ce=H[le],Te=le+1,Ye=H[Te];if(0>r(Ce,J))Te<se&&0>r(Ye,Ce)?(H[oe]=Ye,H[Te]=J,oe=Te):(H[oe]=Ce,H[le]=J,oe=le);else if(Te<se&&0>r(Ye,J))H[oe]=Ye,H[Te]=J,oe=Te;else break e}}return K}function r(H,K){var J=H.sortIndex-K.sortIndex;return J!==0?J:H.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var h=[],d=[],m=1,g=null,_=3,S=!1,M=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function I(H){for(var K=t(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=H)n(d),K.sortIndex=K.expirationTime,e(h,K);else break;K=t(d)}}function L(H){if(C=!1,I(H),!M)if(t(h)!==null)M=!0,he();else{var K=t(d);K!==null&&fe(L,K.startTime-H)}}var j=!1,Y=-1,k=5,V=-1;function N(){return!(i.unstable_now()-V<k)}function O(){if(j){var H=i.unstable_now();V=H;var K=!0;try{e:{M=!1,C&&(C=!1,T(Y),Y=-1),S=!0;var J=_;try{t:{for(I(H),g=t(h);g!==null&&!(g.expirationTime>H&&N());){var oe=g.callback;if(typeof oe=="function"){g.callback=null,_=g.priorityLevel;var se=oe(g.expirationTime<=H);if(H=i.unstable_now(),typeof se=="function"){g.callback=se,I(H),K=!0;break t}g===t(h)&&n(h),I(H)}else n(h);g=t(h)}if(g!==null)K=!0;else{var Z=t(d);Z!==null&&fe(L,Z.startTime-H),K=!1}}break e}finally{g=null,_=J,S=!1}K=void 0}}finally{K?z():j=!1}}}var z;if(typeof D=="function")z=function(){D(O)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,q=W.port2;W.port1.onmessage=O,z=function(){q.postMessage(null)}}else z=function(){w(O,0)};function he(){j||(j=!0,z())}function fe(H,K){Y=w(function(){H(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){M||S||(M=!0,he())},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return t(h)},i.unstable_next=function(H){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var J=_;_=K;try{return H()}finally{_=J}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var J=_;_=H;try{return K()}finally{_=J}},i.unstable_scheduleCallback=function(H,K,J){var oe=i.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?oe+J:oe):J=oe,H){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=J+se,H={id:m++,callback:K,priorityLevel:H,startTime:J,expirationTime:se,sortIndex:-1},J>oe?(H.sortIndex=J,e(d,H),t(h)===null&&H===t(d)&&(C?(T(Y),Y=-1):C=!0,fe(L,J-oe))):(H.sortIndex=se,e(h,H),M||S||(M=!0,he())),H},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(H){var K=_;return function(){var J=_;_=K;try{return H.apply(this,arguments)}finally{_=J}}}})(d1)),d1}var wO;function W$(){return wO||(wO=1,f1.exports=Y$()),f1.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AO;function X$(){return AO||(AO=1,(function(i){i.exports=function(e){function t(u,f,y,E){return new zv(u,f,y,E)}function n(){}function r(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(u){return u===null||typeof u!="object"?null:(u=Wv&&u[Wv]||u["@@iterator"],typeof u=="function"?u:null)}function o(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===wu?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case Hh:return"Fragment";case co:return"Portal";case Yv:return"Profiler";case qv:return"StrictMode";case hm:return"Suspense";case Sc:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case Bo:return(u.displayName||"Context")+".Provider";case _c:return(u._context.displayName||"Context")+".Consumer";case Gh:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case _d:return f=u.displayName||null,f!==null?f:o(u.type)||"Memo";case uo:f=u._payload,u=u._init;try{return o(u(f))}catch{}}return null}function c(u){if(fm===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);fm=f&&f[1]||"",Xv=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fm+u+Xv}function h(u,f){if(!u||bc)return"";bc=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(f){var _t=function(){throw Error()};if(Object.defineProperty(_t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_t,[])}catch(an){var Tt=an}Reflect.construct(u,[],_t)}else{try{_t.call()}catch(an){Tt=an}u.call(_t.prototype)}}else{try{throw Error()}catch(an){Tt=an}(_t=u())&&typeof _t.catch=="function"&&_t.catch(function(){})}}catch(an){if(an&&Tt&&typeof an.stack=="string")return[an.stack,Tt.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=E.DetermineComponentFrameRoot(),ee=U[0],ce=U[1];if(ee&&ce){var _e=ee.split(`
`),He=ce.split(`
`);for(R=E=0;E<_e.length&&!_e[E].includes("DetermineComponentFrameRoot");)E++;for(;R<He.length&&!He[R].includes("DetermineComponentFrameRoot");)R++;if(E===_e.length||R===He.length)for(E=_e.length-1,R=He.length-1;1<=E&&0<=R&&_e[E]!==He[R];)R--;for(;1<=E&&0<=R;E--,R--)if(_e[E]!==He[R]){if(E!==1||R!==1)do if(E--,R--,0>R||_e[E]!==He[R]){var ut=`
`+_e[E].replace(" at new "," at ");return u.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",u.displayName)),ut}while(1<=E&&0<=R);break}}}finally{bc=!1,Error.prepareStackTrace=y}return(y=u?u.displayName||u.name:"")?c(y):""}function d(u){switch(u.tag){case 26:case 27:case 5:return c(u.type);case 16:return c("Lazy");case 13:return c("Suspense");case 19:return c("SuspenseList");case 0:case 15:return u=h(u.type,!1),u;case 11:return u=h(u.type.render,!1),u;case 1:return u=h(u.type,!0),u;default:return""}}function m(u){try{var f="";do f+=d(u),u=u.return;while(u);return f}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function g(u){var f=u,y=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(y=f.return),u=f.return;while(u)}return f.tag===3?y:null}function _(u){if(g(u)!==u)throw Error(r(188))}function S(u){var f=u.alternate;if(!f){if(f=g(u),f===null)throw Error(r(188));return f!==u?null:u}for(var y=u,E=f;;){var R=y.return;if(R===null)break;var U=R.alternate;if(U===null){if(E=R.return,E!==null){y=E;continue}break}if(R.child===U.child){for(U=R.child;U;){if(U===y)return _(R),u;if(U===E)return _(R),f;U=U.sibling}throw Error(r(188))}if(y.return!==E.return)y=R,E=U;else{for(var ee=!1,ce=R.child;ce;){if(ce===y){ee=!0,y=R,E=U;break}if(ce===E){ee=!0,E=R,y=U;break}ce=ce.sibling}if(!ee){for(ce=U.child;ce;){if(ce===y){ee=!0,y=U,E=R;break}if(ce===E){ee=!0,E=U,y=R;break}ce=ce.sibling}if(!ee)throw Error(r(189))}}if(y.alternate!==E)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?u:f}function M(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=M(u),f!==null)return f;u=u.sibling}return null}function C(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(u.tag!==4&&(f=C(u),f!==null))return f;u=u.sibling}return null}function w(u){return{current:u}}function T(u){0>Tl||(u.current=Cd[Tl],Cd[Tl]=null,Tl--)}function D(u,f){Tl++,Cd[Tl]=u.current,u.current=f}function I(u){return u>>>=0,u===0?32:31-(Rd(u)/yS|0)|0}function L(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function j(u,f){var y=u.pendingLanes;if(y===0)return 0;var E=0,R=u.suspendedLanes,U=u.pingedLanes,ee=u.warmLanes;u=u.finishedLanes!==0;var ce=y&134217727;return ce!==0?(y=ce&~R,y!==0?E=L(y):(U&=ce,U!==0?E=L(U):u||(ee=ce&~ee,ee!==0&&(E=L(ee))))):(ce=y&~R,ce!==0?E=L(ce):U!==0?E=L(U):u||(ee=y&~ee,ee!==0&&(E=L(ee)))),E===0?0:f!==0&&f!==E&&(f&R)===0&&(R=E&-E,ee=f&-f,R>=ee||R===32&&(ee&4194176)!==0)?f:E}function Y(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function k(u,f){switch(u){case 1:case 2:case 4:case 8:return f+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V(){var u=Wh;return Wh<<=1,(Wh&4194176)===0&&(Wh=128),u}function N(){var u=Dd;return Dd<<=1,(Dd&62914560)===0&&(Dd=4194304),u}function O(u){for(var f=[],y=0;31>y;y++)f.push(u);return f}function z(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function W(u,f,y,E,R,U){var ee=u.pendingLanes;u.pendingLanes=y,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=y,u.entangledLanes&=y,u.errorRecoveryDisabledLanes&=y,u.shellSuspendCounter=0;var ce=u.entanglements,_e=u.expirationTimes,He=u.hiddenUpdates;for(y=ee&~y;0<y;){var ut=31-Ls(y),_t=1<<ut;ce[ut]=0,_e[ut]=-1;var Tt=He[ut];if(Tt!==null)for(He[ut]=null,ut=0;ut<Tt.length;ut++){var an=Tt[ut];an!==null&&(an.lane&=-536870913)}y&=~_t}E!==0&&q(u,E,0),U!==0&&R===0&&u.tag!==0&&(u.suspendedLanes|=U&~(ee&~f))}function q(u,f,y){u.pendingLanes|=f,u.suspendedLanes&=~f;var E=31-Ls(f);u.entangledLanes|=f,u.entanglements[E]=u.entanglements[E]|1073741824|y&4194218}function he(u,f){var y=u.entangledLanes|=f;for(u=u.entanglements;y;){var E=31-Ls(y),R=1<<E;R&f|u[E]&f&&(u[E]|=f),y&=~R}}function fe(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function H(u){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(Kh,u,void 0,(u.current.flags&128)===128)}catch{}}function K(u){if(typeof xS=="function"&&My(u),Us&&typeof Us.setStrictMode=="function")try{Us.setStrictMode(Kh,u)}catch{}}function J(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}function oe(u,f){if(typeof u=="object"&&u!==null){var y=Rm.get(u);return y!==void 0?y:(f={value:u,source:f,stack:m(f)},Rm.set(u,f),f)}return{value:u,source:f,stack:m(f)}}function se(u,f){Ri[ji++]=Od,Ri[ji++]=Id,Id=u,Od=f}function Z(u,f,y){da[pa++]=jo,da[pa++]=ka,da[pa++]=ho,ho=u;var E=jo;u=ka;var R=32-Ls(E)-1;E&=~(1<<R),y+=1;var U=32-Ls(f)+R;if(30<U){var ee=R-R%5;U=(E&(1<<ee)-1).toString(32),E>>=ee,R-=ee,jo=1<<32-Ls(f)+R|y<<R|E,ka=U+u}else jo=1<<U|y<<R|E,ka=u}function le(u){u.return!==null&&(se(u,1),Z(u,1,0))}function Ce(u){for(;u===Id;)Id=Ri[--ji],Ri[ji]=null,Od=Ri[--ji],Ri[ji]=null;for(;u===ho;)ho=da[--pa],da[pa]=null,ka=da[--pa],da[pa]=null,jo=da[--pa],da[pa]=null}function Te(u,f){D(fo,f),D(Pd,u),D(Cr,null),u=Au(f),T(Cr),D(Cr,u)}function Ye(){T(Cr),T(Pd),T(fo)}function xe(u){u.memoizedState!==null&&D(Qh,u);var f=Cr.current,y=Z0(f,u.type);f!==y&&(D(Pd,u),D(Cr,y))}function Oe(u){Pd.current===u&&(T(Cr),T(Pd)),Qh.current===u&&(T(Qh),Fo?Jt._currentValue=Ps:Jt._currentValue2=Ps)}function rt(u){var f=Error(r(418,""));throw ae(oe(f,u)),Ld}function ft(u,f){if(!ds)throw Error(r(175));dM(u.stateNode,u.type,u.memoizedProps,f,u)||rt(u)}function bt(u){for(Jr=u.return;Jr;)switch(Jr.tag){case 3:case 27:Va=!0;return;case 5:case 13:Va=!1;return;default:Jr=Jr.return}}function en(u){if(!ds||u!==Jr)return!1;if(!qn)return bt(u),qn=!0,!1;var f=!1;if(Br?u.tag!==3&&u.tag!==27&&(u.tag!==5||dS(u.type)&&!Tc(u.type,u.memoizedProps))&&(f=!0):u.tag!==3&&(u.tag!==5||dS(u.type)&&!Tc(u.type,u.memoizedProps))&&(f=!0),f&&Fr&&rt(u),bt(u),u.tag===13){if(!ds)throw Error(r(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));Fr=hS(u)}else Fr=Jr?fy(u.stateNode):null;return!0}function Cn(){ds&&(Fr=Jr=null,qn=!1)}function ae(u){ma===null?ma=[u]:ma.push(u)}function We(){for(var u=wc,f=Zh=wc=0;f<u;){var y=ga[f];ga[f++]=null;var E=ga[f];ga[f++]=null;var R=ga[f];ga[f++]=null;var U=ga[f];if(ga[f++]=null,E!==null&&R!==null){var ee=E.pending;ee===null?R.next=R:(R.next=ee.next,ee.next=R),E.pending=R}U!==0&&ht(y,R,U)}}function Ge(u,f,y,E){ga[wc++]=u,ga[wc++]=f,ga[wc++]=y,ga[wc++]=E,Zh|=E,u.lanes|=E,u=u.alternate,u!==null&&(u.lanes|=E)}function ze(u,f,y,E){return Ge(u,f,y,E),qe(u)}function Ve(u,f){return Ge(u,null,null,f),qe(u)}function ht(u,f,y){u.lanes|=y;var E=u.alternate;E!==null&&(E.lanes|=y);for(var R=!1,U=u.return;U!==null;)U.childLanes|=y,E=U.alternate,E!==null&&(E.childLanes|=y),U.tag===22&&(u=U.stateNode,u===null||u._visibility&1||(R=!0)),u=U,U=U.return;R&&f!==null&&u.tag===3&&(U=u.stateNode,R=31-Ls(y),U=U.hiddenUpdates,u=U[R],u===null?U[R]=[f]:u.push(f),f.lane=y|536870912)}function qe(u){if(50<Vu)throw Vu=0,gs=null,Error(r(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}function Je(u){u!==Nu&&u.next===null&&(Nu===null?Jh=Nu=u:Nu=Nu.next=u),kd=!0,Ud||(Ud=!0,Pe(Qt))}function zt(u,f){if(!po&&kd){po=!0;do for(var y=!1,E=Jh;E!==null;){if(u!==0){var R=E.pendingLanes;if(R===0)var U=0;else{var ee=E.suspendedLanes,ce=E.pingedLanes;U=(1<<31-Ls(42|u)+1)-1,U&=R&~(ee&~ce),U=U&201326677?U&201326677|1:U?U|2:0}U!==0&&(y=!0,Se(E,U))}else U=Tn,U=j(E,E===An?U:0),(U&3)===0||Y(E,U)||(y=!0,Se(E,U));E=E.next}while(y);po=!1}}function Qt(){kd=Ud=!1;var u=0;Ac!==0&&(Mc()&&(u=Ac),Ac=0);for(var f=zr(),y=null,E=Jh;E!==null;){var R=E.next,U=ie(E,f);U===0?(E.next=null,y===null?Jh=R:y.next=R,R===null&&(Nu=y)):(y=E,(u!==0||(U&3)!==0)&&(kd=!0)),E=R}zt(u)}function ie(u,f){for(var y=u.suspendedLanes,E=u.pingedLanes,R=u.expirationTimes,U=u.pendingLanes&-62914561;0<U;){var ee=31-Ls(U),ce=1<<ee,_e=R[ee];_e===-1?((ce&y)===0||(ce&E)!==0)&&(R[ee]=k(ce,f)):_e<=f&&(u.expiredLanes|=ce),U&=~ce}if(f=An,y=Tn,y=j(u,u===f?y:0),E=u.callbackNode,y===0||u===f&&di===2||u.cancelPendingCommit!==null)return E!==null&&E!==null&&Nd(E),u.callbackNode=null,u.callbackPriority=0;if((y&3)===0||Y(u,y)){if(f=y&-y,f===u.callbackPriority)return f;switch(E!==null&&Nd(E),fe(y)){case 2:case 8:y=bS;break;case 32:y=Am;break;case 268435456:y=Cm;break;default:y=Am}return E=X.bind(null,u),y=Xh(y,E),u.callbackPriority=f,u.callbackNode=y,f}return E!==null&&E!==null&&Nd(E),u.callbackPriority=2,u.callbackNode=null,2}function X(u,f){var y=u.callbackNode;if(wr()&&u.callbackNode!==y)return null;var E=Tn;return E=j(u,u===An?E:0),E===0?null:(pd(u,E,f),ie(u,zr()),u.callbackNode!=null&&u.callbackNode===y?X.bind(null,u):null)}function Se(u,f){if(wr())return null;pd(u,f,!0)}function Pe(u){ar?gm(function(){(Ht&6)!==0?Xh(Ty,u):u()}):Xh(Ty,u)}function $e(){return Ac===0&&(Ac=V()),Ac}function ke(u,f){if(Vd===null){var y=Vd=[];Dm=0,ks=$e(),Cc={status:"pending",value:void 0,then:function(E){y.push(E)}}}return Dm++,f.then(It,It),f}function It(){if(--Dm===0&&Vd!==null){Cc!==null&&(Cc.status="fulfilled");var u=Vd;Vd=null,ks=0,Cc=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function ct(u,f){var y=[],E={status:"pending",value:null,reason:null,then:function(R){y.push(R)}};return u.then(function(){E.status="fulfilled",E.value=f;for(var R=0;R<y.length;R++)(0,y[R])(f)},function(R){for(E.status="rejected",E.reason=R,R=0;R<y.length;R++)(0,y[R])(void 0)}),E}function Ct(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rt(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Ze(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function at(u,f,y){var E=u.updateQueue;if(E===null)return null;if(E=E.shared,(Ht&2)!==0){var R=E.pending;return R===null?f.next=f:(f.next=R.next,R.next=f),E.pending=f,f=qe(u),ht(u,null,y),f}return Ge(u,E,f,y),qe(u)}function Nt(u,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194176)!==0)){var E=f.lanes;E&=u.pendingLanes,y|=E,f.lanes=y,he(u,y)}}function gt(u,f){var y=u.updateQueue,E=u.alternate;if(E!==null&&(E=E.updateQueue,y===E)){var R=null,U=null;if(y=y.firstBaseUpdate,y!==null){do{var ee={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};U===null?R=U=ee:U=U.next=ee,y=y.next}while(y!==null);U===null?R=U=f:U=U.next=f}else R=U=f;y={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:U,shared:E.shared,callbacks:E.callbacks},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=f:u.next=f,y.lastBaseUpdate=f}function mt(){if($h){var u=Cc;if(u!==null)throw u}}function Yt(u,f,y,E){$h=!1;var R=u.updateQueue;Ml=!1;var U=R.firstBaseUpdate,ee=R.lastBaseUpdate,ce=R.shared.pending;if(ce!==null){R.shared.pending=null;var _e=ce,He=_e.next;_e.next=null,ee===null?U=He:ee.next=He,ee=_e;var ut=u.alternate;ut!==null&&(ut=ut.updateQueue,ce=ut.lastBaseUpdate,ce!==ee&&(ce===null?ut.firstBaseUpdate=He:ce.next=He,ut.lastBaseUpdate=_e))}if(U!==null){var _t=R.baseState;ee=0,ut=He=_e=null,ce=U;do{var Tt=ce.lane&-536870913,an=Tt!==ce.lane;if(an?(Tn&Tt)===Tt:(E&Tt)===Tt){Tt!==0&&Tt===ks&&($h=!0),ut!==null&&(ut=ut.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var Fs=u,Hd=ce;Tt=f;var Bu=y;switch(Hd.tag){case 1:if(Fs=Hd.payload,typeof Fs=="function"){_t=Fs.call(Bu,_t,Tt);break e}_t=Fs;break e;case 3:Fs.flags=Fs.flags&-65537|128;case 0:if(Fs=Hd.payload,Tt=typeof Fs=="function"?Fs.call(Bu,_t,Tt):Fs,Tt==null)break e;_t=Mu({},_t,Tt);break e;case 2:Ml=!0}}Tt=ce.callback,Tt!==null&&(u.flags|=64,an&&(u.flags|=8192),an=R.callbacks,an===null?R.callbacks=[Tt]:an.push(Tt))}else an={lane:Tt,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},ut===null?(He=ut=an,_e=_t):ut=ut.next=an,ee|=Tt;if(ce=ce.next,ce===null){if(ce=R.shared.pending,ce===null)break;an=ce,ce=an.next,an.next=null,R.lastBaseUpdate=an,R.shared.pending=null}}while(!0);ut===null&&(_e=_t),R.baseState=_e,R.firstBaseUpdate=He,R.lastBaseUpdate=ut,U===null&&(R.shared.lanes=0),Sa|=ee,u.lanes=ee,u.memoizedState=_t}}function pe(u,f){if(typeof u!="function")throw Error(r(191,u));u.call(f)}function it(u,f){var y=u.callbacks;if(y!==null)for(u.callbacks=null,u=0;u<y.length;u++)pe(y[u],f)}function lt(u,f){if(fa(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var y=Object.keys(u),E=Object.keys(f);if(y.length!==E.length)return!1;for(E=0;E<y.length;E++){var R=y[E];if(!Bd.call(f,R)||!fa(u[R],f[R]))return!1}return!0}function pt(u){return u=u.status,u==="fulfilled"||u==="rejected"}function nt(){}function Fe(u,f,y){switch(y=u[y],y===void 0?u.push(f):y!==f&&(f.then(nt,nt),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,u===ci?Error(r(483)):u;default:if(typeof f.status=="string")f.then(nt,nt);else{if(u=An,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=f,u.status="pending",u.then(function(E){if(f.status==="pending"){var R=f;R.status="fulfilled",R.value=E}},function(E){if(f.status==="pending"){var R=f;R.status="rejected",R.reason=E}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,u===ci?Error(r(483)):u}throw Iu=f,ci}}function xt(){if(Iu===null)throw Error(r(459));var u=Iu;return Iu=null,u}function Xt(u){var f=Ba;return Ba+=1,qo===null&&(qo=[]),Fe(qo,u,f)}function In(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function on(u,f){throw f.$$typeof===jv?Error(r(525)):(u=Object.prototype.toString.call(f),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function br(u){var f=u._init;return f(u._payload)}function as(u){function f(Re,ve){if(u){var Ie=Re.deletions;Ie===null?(Re.deletions=[ve],Re.flags|=16):Ie.push(ve)}}function y(Re,ve){if(!u)return null;for(;ve!==null;)f(Re,ve),ve=ve.sibling;return null}function E(Re){for(var ve=new Map;Re!==null;)Re.key!==null?ve.set(Re.key,Re):ve.set(Re.index,Re),Re=Re.sibling;return ve}function R(Re,ve){return Re=Qr(Re,ve),Re.index=0,Re.sibling=null,Re}function U(Re,ve,Ie){return Re.index=Ie,u?(Ie=Re.alternate,Ie!==null?(Ie=Ie.index,Ie<ve?(Re.flags|=33554434,ve):Ie):(Re.flags|=33554434,ve)):(Re.flags|=1048576,ve)}function ee(Re){return u&&Re.alternate===null&&(Re.flags|=33554434),Re}function ce(Re,ve,Ie,st){return ve===null||ve.tag!==6?(ve=yc(Ie,Re.mode,st),ve.return=Re,ve):(ve=R(ve,Ie),ve.return=Re,ve)}function _e(Re,ve,Ie,st){var Vt=Ie.type;return Vt===Hh?ut(Re,ve,Ie.props.children,st,Ie.key):ve!==null&&(ve.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===uo&&br(Vt)===ve.type)?(ve=R(ve,Ie.props),In(ve,Ie),ve.return=Re,ve):(ve=La(Ie.type,Ie.key,Ie.props,null,Re.mode,st),In(ve,Ie),ve.return=Re,ve)}function He(Re,ve,Ie,st){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Ie.containerInfo||ve.stateNode.implementation!==Ie.implementation?(ve=Fh(Ie,Re.mode,st),ve.return=Re,ve):(ve=R(ve,Ie.children||[]),ve.return=Re,ve)}function ut(Re,ve,Ie,st,Vt){return ve===null||ve.tag!==7?(ve=_l(Ie,Re.mode,st,Vt),ve.return=Re,ve):(ve=R(ve,Ie),ve.return=Re,ve)}function _t(Re,ve,Ie){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ve=yc(""+ve,Re.mode,Ie),ve.return=Re,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case Sl:return Ie=La(ve.type,ve.key,ve.props,null,Re.mode,Ie),In(Ie,ve),Ie.return=Re,Ie;case co:return ve=Fh(ve,Re.mode,Ie),ve.return=Re,ve;case uo:var st=ve._init;return ve=st(ve._payload),_t(Re,ve,Ie)}if(xc(ve)||s(ve))return ve=_l(ve,Re.mode,Ie,null),ve.return=Re,ve;if(typeof ve.then=="function")return _t(Re,Xt(ve),Ie);if(ve.$$typeof===Bo)return _t(Re,Ds(Re,ve),Ie);on(Re,ve)}return null}function Tt(Re,ve,Ie,st){var Vt=ve!==null?ve.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Vt!==null?null:ce(Re,ve,""+Ie,st);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case Sl:return Ie.key===Vt?_e(Re,ve,Ie,st):null;case co:return Ie.key===Vt?He(Re,ve,Ie,st):null;case uo:return Vt=Ie._init,Ie=Vt(Ie._payload),Tt(Re,ve,Ie,st)}if(xc(Ie)||s(Ie))return Vt!==null?null:ut(Re,ve,Ie,st,null);if(typeof Ie.then=="function")return Tt(Re,ve,Xt(Ie),st);if(Ie.$$typeof===Bo)return Tt(Re,ve,Ds(Re,Ie),st);on(Re,Ie)}return null}function an(Re,ve,Ie,st,Vt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return Re=Re.get(Ie)||null,ce(ve,Re,""+st,Vt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case Sl:return Re=Re.get(st.key===null?Ie:st.key)||null,_e(ve,Re,st,Vt);case co:return Re=Re.get(st.key===null?Ie:st.key)||null,He(ve,Re,st,Vt);case uo:var xi=st._init;return st=xi(st._payload),an(Re,ve,Ie,st,Vt)}if(xc(st)||s(st))return Re=Re.get(Ie)||null,ut(ve,Re,st,Vt,null);if(typeof st.then=="function")return an(Re,ve,Ie,Xt(st),Vt);if(st.$$typeof===Bo)return an(Re,ve,Ie,Ds(ve,st),Vt);on(ve,st)}return null}function Fs(Re,ve,Ie,st){for(var Vt=null,xi=null,$t=ve,Wn=ve=0,gr=null;$t!==null&&Wn<Ie.length;Wn++){$t.index>Wn?(gr=$t,$t=null):gr=$t.sibling;var Xn=Tt(Re,$t,Ie[Wn],st);if(Xn===null){$t===null&&($t=gr);break}u&&$t&&Xn.alternate===null&&f(Re,$t),ve=U(Xn,ve,Wn),xi===null?Vt=Xn:xi.sibling=Xn,xi=Xn,$t=gr}if(Wn===Ie.length)return y(Re,$t),qn&&se(Re,Wn),Vt;if($t===null){for(;Wn<Ie.length;Wn++)$t=_t(Re,Ie[Wn],st),$t!==null&&(ve=U($t,ve,Wn),xi===null?Vt=$t:xi.sibling=$t,xi=$t);return qn&&se(Re,Wn),Vt}for($t=E($t);Wn<Ie.length;Wn++)gr=an($t,Re,Wn,Ie[Wn],st),gr!==null&&(u&&gr.alternate!==null&&$t.delete(gr.key===null?Wn:gr.key),ve=U(gr,ve,Wn),xi===null?Vt=gr:xi.sibling=gr,xi=gr);return u&&$t.forEach(function(Il){return f(Re,Il)}),qn&&se(Re,Wn),Vt}function Hd(Re,ve,Ie,st){if(Ie==null)throw Error(r(151));for(var Vt=null,xi=null,$t=ve,Wn=ve=0,gr=null,Xn=Ie.next();$t!==null&&!Xn.done;Wn++,Xn=Ie.next()){$t.index>Wn?(gr=$t,$t=null):gr=$t.sibling;var Il=Tt(Re,$t,Xn.value,st);if(Il===null){$t===null&&($t=gr);break}u&&$t&&Il.alternate===null&&f(Re,$t),ve=U(Il,ve,Wn),xi===null?Vt=Il:xi.sibling=Il,xi=Il,$t=gr}if(Xn.done)return y(Re,$t),qn&&se(Re,Wn),Vt;if($t===null){for(;!Xn.done;Wn++,Xn=Ie.next())Xn=_t(Re,Xn.value,st),Xn!==null&&(ve=U(Xn,ve,Wn),xi===null?Vt=Xn:xi.sibling=Xn,xi=Xn);return qn&&se(Re,Wn),Vt}for($t=E($t);!Xn.done;Wn++,Xn=Ie.next())Xn=an($t,Re,Wn,Xn.value,st),Xn!==null&&(u&&Xn.alternate!==null&&$t.delete(Xn.key===null?Wn:Xn.key),ve=U(Xn,ve,Wn),xi===null?Vt=Xn:xi.sibling=Xn,xi=Xn);return u&&$t.forEach(function(Bm){return f(Re,Bm)}),qn&&se(Re,Wn),Vt}function Bu(Re,ve,Ie,st){if(typeof Ie=="object"&&Ie!==null&&Ie.type===Hh&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case Sl:e:{for(var Vt=Ie.key;ve!==null;){if(ve.key===Vt){if(Vt=Ie.type,Vt===Hh){if(ve.tag===7){y(Re,ve.sibling),st=R(ve,Ie.props.children),st.return=Re,Re=st;break e}}else if(ve.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===uo&&br(Vt)===ve.type){y(Re,ve.sibling),st=R(ve,Ie.props),In(st,Ie),st.return=Re,Re=st;break e}y(Re,ve);break}else f(Re,ve);ve=ve.sibling}Ie.type===Hh?(st=_l(Ie.props.children,Re.mode,st,Ie.key),st.return=Re,Re=st):(st=La(Ie.type,Ie.key,Ie.props,null,Re.mode,st),In(st,Ie),st.return=Re,Re=st)}return ee(Re);case co:e:{for(Vt=Ie.key;ve!==null;){if(ve.key===Vt)if(ve.tag===4&&ve.stateNode.containerInfo===Ie.containerInfo&&ve.stateNode.implementation===Ie.implementation){y(Re,ve.sibling),st=R(ve,Ie.children||[]),st.return=Re,Re=st;break e}else{y(Re,ve);break}else f(Re,ve);ve=ve.sibling}st=Fh(Ie,Re.mode,st),st.return=Re,Re=st}return ee(Re);case uo:return Vt=Ie._init,Ie=Vt(Ie._payload),Bu(Re,ve,Ie,st)}if(xc(Ie))return Fs(Re,ve,Ie,st);if(s(Ie)){if(Vt=s(Ie),typeof Vt!="function")throw Error(r(150));return Ie=Vt.call(Ie),Hd(Re,ve,Ie,st)}if(typeof Ie.then=="function")return Bu(Re,ve,Xt(Ie),st);if(Ie.$$typeof===Bo)return Bu(Re,ve,Ds(Re,Ie),st);on(Re,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,ve!==null&&ve.tag===6?(y(Re,ve.sibling),st=R(ve,Ie),st.return=Re,Re=st):(y(Re,ve),st=yc(Ie,Re.mode,st),st.return=Re,Re=st),ee(Re)):y(Re,ve)}return function(Re,ve,Ie,st){try{Ba=0;var Vt=Bu(Re,ve,Ie,st);return qo=null,Vt}catch($t){if($t===ci)throw $t;var xi=t(29,$t,null,Re.mode);return xi.lanes=st,xi.return=Re,xi}finally{}}}function eo(u,f){u=mo,D(va,u),D(Yo,f),mo=u|f.baseLanes}function os(){D(va,mo),D(Yo,Yo.current)}function to(){mo=va.current,T(Yo),T(va)}function Lr(u){var f=u.alternate;D(or,or.current&1),D(ya,u),za===null&&(f===null||Yo.current!==null||f.memoizedState!==null)&&(za=u)}function na(u){if(u.tag===22){if(D(or,or.current),D(ya,u),za===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(za=u)}}else Wr()}function Wr(){D(or,or.current),D(ya,ya.current)}function zi(u){T(ya),za===u&&(za=null),T(or)}function fr(u){for(var f=u;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||bm(y)||Ad(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function hn(){throw Error(r(321))}function Ii(u,f){if(f===null)return!1;for(var y=0;y<f.length&&y<u.length;y++)if(!fa(u[y],f[y]))return!1;return!0}function ws(u,f,y,E,R,U){return Wo=U,gn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Wt.H=u===null||u.memoizedState===null?lr:$r,wl=!1,U=y(E,R),wl=!1,Di&&(U=Sh(f,y,E,R)),al(u),U}function al(u){Wt.H=Yn;var f=Jn!==null&&Jn.next!==null;if(Wo=0,Qi=Jn=gn=null,Fa=!1,qi=0,ef=null,f)throw Error(r(300));u===null||Zi||(u=u.dependencies,u!==null&&mi(u)&&(Zi=!0))}function Sh(u,f,y,E){gn=u;var R=0;do{if(Di&&(ef=null),qi=0,Di=!1,25<=R)throw Error(r(301));if(R+=1,Qi=Jn=null,u.updateQueue!=null){var U=u.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}Wt.H=Dc,U=f(y,E)}while(Di);return U}function bh(){var u=Wt.H,f=u.useState()[0];return f=typeof f.then=="function"?we(f):f,u=u.useState()[0],(Jn!==null?Jn.memoizedState:null)!==u&&(gn.flags|=1024),f}function ec(){var u=zd!==0;return zd=0,u}function As(u,f,y){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~y}function $(u){if(Fa){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Fa=!1}Wo=0,Qi=Jn=gn=null,Di=!1,qi=zd=0,ef=null}function me(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qi===null?gn.memoizedState=Qi=u:Qi=Qi.next=u,Qi}function be(){if(Jn===null){var u=gn.alternate;u=u!==null?u.memoizedState:null}else u=Jn.next;var f=Qi===null?gn.memoizedState:Qi.next;if(f!==null)Qi=f,Jn=u;else{if(u===null)throw gn.alternate===null?Error(r(467)):Error(r(310));Jn=u,u={memoizedState:Jn.memoizedState,baseState:Jn.baseState,baseQueue:Jn.baseQueue,queue:Jn.queue,next:null},Qi===null?gn.memoizedState=Qi=u:Qi=Qi.next=u}return Qi}function we(u){var f=qi;return qi+=1,ef===null&&(ef=[]),u=Fe(ef,u,f),f=gn,(Qi===null?f.memoizedState:Qi.next)===null&&(f=f.alternate,Wt.H=f===null||f.memoizedState===null?lr:$r),u}function ge(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return we(u);if(u.$$typeof===Bo)return wi(u)}throw Error(r(438,String(u)))}function Ke(u){var f=null,y=gn.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var E=gn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(f={data:E.data.map(function(R){return R.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=Im(),gn.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(u),E=0;E<u;E++)y[E]=Q0;return f.index++,y}function dt(u,f){return typeof f=="function"?f(u):f}function Mt(u){var f=be();return vt(f,Jn,u)}function vt(u,f,y){var E=u.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=y;var R=u.baseQueue,U=E.pending;if(U!==null){if(R!==null){var ee=R.next;R.next=U.next,U.next=ee}f.baseQueue=R=U,E.pending=null}if(U=u.baseState,R===null)u.memoizedState=U;else{f=R.next;var ce=ee=null,_e=null,He=f,ut=!1;do{var _t=He.lane&-536870913;if(_t!==He.lane?(Tn&_t)===_t:(Wo&_t)===_t){var Tt=He.revertLane;if(Tt===0)_e!==null&&(_e=_e.next={lane:0,revertLane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),_t===ks&&(ut=!0);else if((Wo&Tt)===Tt){He=He.next,Tt===ks&&(ut=!0);continue}else _t={lane:0,revertLane:He.revertLane,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null},_e===null?(ce=_e=_t,ee=U):_e=_e.next=_t,gn.lanes|=Tt,Sa|=Tt;_t=He.action,wl&&y(U,_t),U=He.hasEagerState?He.eagerState:y(U,_t)}else Tt={lane:_t,revertLane:He.revertLane,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null},_e===null?(ce=_e=Tt,ee=U):_e=_e.next=Tt,gn.lanes|=_t,Sa|=_t;He=He.next}while(He!==null&&He!==f);if(_e===null?ee=U:_e.next=ce,!fa(U,u.memoizedState)&&(Zi=!0,ut&&(y=Cc,y!==null)))throw y;u.memoizedState=U,u.baseState=ee,u.baseQueue=_e,E.lastRenderedState=U}return R===null&&(E.lanes=0),[u.memoizedState,E.dispatch]}function Pt(u){var f=be(),y=f.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=u;var E=y.dispatch,R=y.pending,U=f.memoizedState;if(R!==null){y.pending=null;var ee=R=R.next;do U=u(U,ee.action),ee=ee.next;while(ee!==R);fa(U,f.memoizedState)||(Zi=!0),f.memoizedState=U,f.baseQueue===null&&(f.baseState=U),y.lastRenderedState=U}return[U,E]}function Gt(u,f,y){var E=gn,R=be(),U=qn;if(U){if(y===void 0)throw Error(r(407));y=y()}else y=f();var ee=!fa((Jn||R).memoizedState,y);if(ee&&(R.memoizedState=y,Zi=!0),R=R.queue,nc(kn.bind(null,E,R,u),[u]),R.getSnapshot!==f||ee||Qi!==null&&Qi.memoizedState.tag&1){if(E.flags|=2048,Xi(9,fn.bind(null,E,R,y,f),{destroy:void 0},null),An===null)throw Error(r(349));U||(Wo&60)!==0||Ut(E,f,y)}return y}function Ut(u,f,y){u.flags|=16384,u={getSnapshot:f,value:y},f=gn.updateQueue,f===null?(f=Im(),gn.updateQueue=f,f.stores=[u]):(y=f.stores,y===null?f.stores=[u]:y.push(u))}function fn(u,f,y,E){f.value=y,f.getSnapshot=E,ii(f)&&_n(u)}function kn(u,f,y){return y(function(){ii(f)&&_n(u)})}function ii(u){var f=u.getSnapshot;u=u.value;try{var y=f();return!fa(u,y)}catch{return!0}}function _n(u){var f=Ve(u,2);f!==null&&Kr(f,u,2)}function Kt(u){var f=me();if(typeof u=="function"){var y=u;if(u=y(),wl){K(!0);try{y()}finally{K(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dt,lastRenderedState:u},f}function Et(u,f,y,E){return u.baseState=y,vt(u,Jn,typeof E=="function"?E:dt)}function Qn(u,f,y,E,R){if(Co(u))throw Error(r(485));if(u=f.action,u!==null){var U={payload:R,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ee){U.listeners.push(ee)}};Wt.T!==null?y(!0):U.isTransition=!1,E(U),y=f.pending,y===null?(U.next=f.pending=U,xn(f,U)):(U.next=y.next,f.pending=y.next=U)}}function xn(u,f){var y=f.action,E=f.payload,R=u.state;if(f.isTransition){var U=Wt.T,ee={};Wt.T=ee;try{var ce=y(R,E),_e=Wt.S;_e!==null&&_e(ee,ce),ln(u,f,ce)}catch(He){Si(u,f,He)}finally{Wt.T=U}}else try{U=y(R,E),ln(u,f,U)}catch(He){Si(u,f,He)}}function ln(u,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(E){ls(u,f,E)},function(E){return Si(u,f,E)}):ls(u,f,y)}function ls(u,f,y){f.status="fulfilled",f.value=y,Cs(f),u.state=y,f=u.pending,f!==null&&(y=f.next,y===f?u.pending=null:(y=y.next,f.next=y,xn(u,y)))}function Si(u,f,y){var E=u.pending;if(u.pending=null,E!==null){E=E.next;do f.status="rejected",f.reason=y,Cs(f),f=f.next;while(f!==E)}u.action=null}function Cs(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function En(u,f){return f}function sr(u,f){if(qn){var y=An.formState;if(y!==null){e:{var E=gn;if(qn){if(Fr){var R=iS(Fr,Va);if(R){Fr=fy(R),E=rS(R);break e}}rt(E)}E=!1}E&&(f=y[0])}}y=me(),y.memoizedState=y.baseState=f,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:f},y.queue=E,y=Eh.bind(null,gn,E),E.dispatch=y,E=Kt(!1);var U=gu.bind(null,gn,!1,E.queue);return E=me(),R={state:f,dispatch:null,action:u,pending:null},E.queue=R,y=Qn.bind(null,gn,R,U,y),R.dispatch=y,E.memoizedState=u,[f,y,!1]}function xr(u){var f=be();return Fi(f,Jn,u)}function Fi(u,f,y){f=vt(u,f,En)[0],u=Mt(dt)[0],f=typeof f=="object"&&f!==null&&typeof f.then=="function"?we(f):f;var E=be(),R=E.queue,U=R.dispatch;return y!==E.memoizedState&&(gn.flags|=2048,Xi(9,Oi.bind(null,R,y),{destroy:void 0},null)),[f,U,u]}function Oi(u,f){u.action=f}function ol(u){var f=be(),y=Jn;if(y!==null)return Fi(f,y,u);be(),f=f.memoizedState,y=be();var E=y.queue.dispatch;return y.memoizedState=u,[f,E,!1]}function Xi(u,f,y,E){return u={tag:u,create:f,inst:y,deps:E,next:null},f=gn.updateQueue,f===null&&(f=Im(),gn.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=u.next=u:(E=y.next,y.next=u,u.next=E,f.lastEffect=u),u}function cs(){return be().memoizedState}function fu(u,f,y,E){var R=me();gn.flags|=u,R.memoizedState=Xi(1|f,y,{destroy:void 0},E===void 0?null:E)}function tc(u,f,y,E){var R=be();E=E===void 0?null:E;var U=R.memoizedState.inst;Jn!==null&&E!==null&&Ii(E,Jn.memoizedState.deps)?R.memoizedState=Xi(f,y,U,E):(gn.flags|=u,R.memoizedState=Xi(1|f,y,U,E))}function xh(u,f){fu(8390656,8,u,f)}function nc(u,f){tc(2048,8,u,f)}function td(u,f){return tc(4,2,u,f)}function ll(u,f){return tc(4,4,u,f)}function du(u,f){if(typeof f=="function"){u=u();var y=f(u);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function Na(u,f,y){y=y!=null?y.concat([u]):null,tc(4,4,du.bind(null,f,u),y)}function pu(){}function ia(u,f){var y=be();f=f===void 0?null:f;var E=y.memoizedState;return f!==null&&Ii(f,E[1])?E[0]:(y.memoizedState=[u,f],u)}function cl(u,f){var y=be();f=f===void 0?null:f;var E=y.memoizedState;if(f!==null&&Ii(f,E[1]))return E[0];if(E=u(),wl){K(!0);try{u()}finally{K(!1)}}return y.memoizedState=[E,f],E}function Ia(u,f,y){return y===void 0||(Wo&1073741824)!==0?u.memoizedState=f:(u.memoizedState=y,u=Lo(),gn.lanes|=u,Sa|=u,y)}function ic(u,f,y,E){return fa(y,f)?y:Yo.current!==null?(u=Ia(u,y,E),fa(u,f)||(Zi=!0),u):(Wo&42)===0?(Zi=!0,u.memoizedState=y):(u=Lo(),gn.lanes|=u,Sa|=u,f)}function mu(u,f,y,E,R){var U=pr();Zr(U!==0&&8>U?U:8);var ee=Wt.T,ce={};Wt.T=ce,gu(u,!1,f,y);try{var _e=R(),He=Wt.S;if(He!==null&&He(ce,_e),_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var ut=ct(_e,E);no(u,f,ut,fs(u))}else no(u,f,E,fs(u))}catch(_t){no(u,f,{then:function(){},status:"rejected",reason:_t},fs())}finally{Zr(U),Wt.T=ee}}function ul(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:Ps,baseState:Ps,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dt,lastRenderedState:Ps},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dt,lastRenderedState:y},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function ra(){return wi(Jt)}function sa(){return be().memoizedState}function rc(){return be().memoizedState}function hi(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var y=fs();u=Ze(y);var E=at(f,u,y);E!==null&&(Kr(E,f,y),Nt(E,f,y)),f={cache:fl()},u.payload=f;return}f=f.return}}function Ao(u,f,y){var E=fs();y={lane:E,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},Co(u)?Ro(f,y):(y=ze(u,f,y,E),y!==null&&(Kr(y,u,E),Oa(y,f,E)))}function Eh(u,f,y){var E=fs();no(u,f,y,E)}function no(u,f,y,E){var R={lane:E,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(Co(u))Ro(f,R);else{var U=u.alternate;if(u.lanes===0&&(U===null||U.lanes===0)&&(U=f.lastRenderedReducer,U!==null))try{var ee=f.lastRenderedState,ce=U(ee,y);if(R.hasEagerState=!0,R.eagerState=ce,fa(ce,ee))return Ge(u,f,R,0),An===null&&We(),!1}catch{}finally{}if(y=ze(u,f,R,E),y!==null)return Kr(y,u,E),Oa(y,f,E),!0}return!1}function gu(u,f,y,E){if(E={lane:2,revertLane:$e(),action:E,hasEagerState:!1,eagerState:null,next:null},Co(u)){if(f)throw Error(r(479))}else f=ze(u,y,E,2),f!==null&&Kr(f,u,2)}function Co(u){var f=u.alternate;return u===gn||f!==null&&f===gn}function Ro(u,f){Di=Fa=!0;var y=u.pending;y===null?f.next=f:(f.next=y.next,y.next=f),u.pending=f}function Oa(u,f,y){if((y&4194176)!==0){var E=f.lanes;E&=u.pendingLanes,y|=E,f.lanes=y,he(u,y)}}function dr(u,f,y,E){f=u.memoizedState,y=y(E,f),y=y==null?f:Mu({},f,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}function Do(u,f,y,E,R,U,ee){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(E,U,ee):f.prototype&&f.prototype.isPureReactComponent?!lt(y,E)||!lt(R,U):!0}function io(u,f,y,E){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,E),f.state!==u&&Om.enqueueReplaceState(f,f.state,null)}function Rs(u,f){var y=f;if("ref"in f){y={};for(var E in f)E!=="ref"&&(y[E]=f[E])}if(u=u.defaultProps){y===f&&(y=Mu({},y));for(var R in u)y[R]===void 0&&(y[R]=u[R])}return y}function sc(u,f){try{var y=u.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(E){setTimeout(function(){throw E})}}function hl(u,f,y){try{var E=u.onCaughtError;E(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function ac(u,f,y){return y=Ze(y),y.tag=3,y.payload={element:null},y.callback=function(){sc(u,f)},y}function ro(u){return u=Ze(u),u.tag=3,u}function vu(u,f,y,E){var R=y.type.getDerivedStateFromError;if(typeof R=="function"){var U=E.value;u.payload=function(){return R(U)},u.callback=function(){hl(f,y,E)}}var ee=y.stateNode;ee!==null&&typeof ee.componentDidCatch=="function"&&(u.callback=function(){hl(f,y,E),typeof R!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var ce=E.stack;this.componentDidCatch(E.value,{componentStack:ce!==null?ce:""})})}function nd(u,f,y,E,R){if(y.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(f=y.alternate,f!==null&&On(f,y,R,!0),y=ya.current,y!==null){switch(y.tag){case 13:return za===null?Os():y.alternate===null&&Bn===0&&(Bn=3),y.flags&=-257,y.flags|=65536,y.lanes=R,E===Nm?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([E]):f.add(E),cm(u,E,R)),!1;case 22:return y.flags|=65536,E===Nm?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([E])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([E]):y.add(E)),cm(u,E,R)),!1}throw Error(r(435,y.tag))}return cm(u,E,R),Os(),!1}if(qn)return f=ya.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=R,E!==Ld&&(u=Error(r(422),{cause:E}),ae(oe(u,y)))):(E!==Ld&&(f=Error(r(423),{cause:E}),ae(oe(f,y))),u=u.current.alternate,u.flags|=65536,R&=-R,u.lanes|=R,E=oe(E,y),R=ac(u.stateNode,E,R),gt(u,R),Bn!==4&&(Bn=2)),!1;var U=Error(r(520),{cause:E});if(U=oe(U,y),nf===null?nf=[U]:nf.push(U),Bn!==4&&(Bn=2),f===null)return!0;E=oe(E,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,u=R&-R,y.lanes|=u,u=ac(y.stateNode,E,u),gt(y,u),!1;case 1:if(f=y.type,U=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(xa===null||!xa.has(U))))return y.flags|=65536,R&=-R,y.lanes|=R,R=ro(R),vu(R,u,y,E),gt(y,R),!1}y=y.return}while(y!==null);return!1}function Pi(u,f,y,E){f.child=u===null?Ay(f,null,y,E):Rc(f,u.child,y,E)}function id(u,f,y,E,R){y=y.render;var U=f.ref;if("ref"in E){var ee={};for(var ce in E)ce!=="ref"&&(ee[ce]=E[ce])}else ee=E;return Er(f),E=ws(u,f,y,ee,U,R),ce=ec(),u!==null&&!Zi?(As(u,f,R),P(u,f,R)):(qn&&ce&&le(f),f.flags|=1,Pi(u,f,E,R),f.child)}function rd(u,f,y,E,R){if(u===null){var U=y.type;return typeof U=="function"&&!vl(U)&&U.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=U,oc(u,f,U,E,R)):(u=La(y.type,null,E,f,f.mode,R),u.ref=f.ref,u.return=f,f.child=u)}if(U=u.child,!G(u,R)){var ee=U.memoizedProps;if(y=y.compare,y=y!==null?y:lt,y(ee,E)&&u.ref===f.ref)return P(u,f,R)}return f.flags|=1,u=Qr(U,E),u.ref=f.ref,u.return=f,f.child=u}function oc(u,f,y,E,R){if(u!==null){var U=u.memoizedProps;if(lt(U,E)&&u.ref===f.ref)if(Zi=!1,f.pendingProps=E=U,G(u,R))(u.flags&131072)!==0&&(Zi=!0);else return f.lanes=u.lanes,P(u,f,R)}return Mh(u,f,y,E,R)}function Th(u,f,y){var E=f.pendingProps,R=E.children,U=(f.stateNode._pendingVisibility&2)!==0,ee=u!==null?u.memoizedState:null;if(No(u,f),E.mode==="hidden"||U){if((f.flags&128)!==0){if(E=ee!==null?ee.baseLanes|y:y,u!==null){for(R=f.child=u.child,U=0;R!==null;)U=U|R.lanes|R.childLanes,R=R.sibling;f.childLanes=U&~E}else f.childLanes=0,f.child=null;return sd(u,f,E,y)}if((y&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&Qp(f,ee!==null?ee.cachePool:null),ee!==null?eo(f,ee):os(),na(f);else return f.lanes=f.childLanes=536870912,sd(u,f,ee!==null?ee.baseLanes|y:y,y)}else ee!==null?(Qp(f,ee.cachePool),eo(f,ee),Wr(),f.memoizedState=null):(u!==null&&Qp(f,null),os(),Wr());return Pi(u,f,R,y),f.child}function sd(u,f,y,E){var R=lc();return R=R===null?null:{parent:Fo?ri._currentValue:ri._currentValue2,pool:R},f.memoizedState={baseLanes:y,cachePool:R},u!==null&&Qp(f,null),os(),na(f),u!==null&&On(u,f,E,!0),null}function No(u,f){var y=f.ref;if(y===null)u!==null&&u.ref!==null&&(f.flags|=2097664);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(u===null||u.ref!==y)&&(f.flags|=2097664)}}function Mh(u,f,y,E,R){return Er(f),y=ws(u,f,y,E,void 0,R),E=ec(),u!==null&&!Zi?(As(u,f,R),P(u,f,R)):(qn&&E&&le(f),f.flags|=1,Pi(u,f,y,R),f.child)}function ad(u,f,y,E,R,U){return Er(f),f.updateQueue=null,y=Sh(f,E,y,R),al(u),E=ec(),u!==null&&!Zi?(As(u,f,U),P(u,f,U)):(qn&&E&&le(f),f.flags|=1,Pi(u,f,y,U),f.child)}function so(u,f,y,E,R){if(Er(f),f.stateNode===null){var U=Du,ee=y.contextType;typeof ee=="object"&&ee!==null&&(U=wi(ee)),U=new y(E,U),f.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=Om,f.stateNode=U,U._reactInternals=f,U=f.stateNode,U.props=E,U.state=f.memoizedState,U.refs={},Ct(f),ee=y.contextType,U.context=typeof ee=="object"&&ee!==null?wi(ee):Du,U.state=f.memoizedState,ee=y.getDerivedStateFromProps,typeof ee=="function"&&(dr(f,y,ee,E),U.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(ee=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),ee!==U.state&&Om.enqueueReplaceState(U,U.state,null),Yt(f,E,U,R),mt(),U.state=f.memoizedState),typeof U.componentDidMount=="function"&&(f.flags|=4194308),E=!0}else if(u===null){U=f.stateNode;var ce=f.memoizedProps,_e=Rs(y,ce);U.props=_e;var He=U.context,ut=y.contextType;ee=Du,typeof ut=="object"&&ut!==null&&(ee=wi(ut));var _t=y.getDerivedStateFromProps;ut=typeof _t=="function"||typeof U.getSnapshotBeforeUpdate=="function",ce=f.pendingProps!==ce,ut||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ce||He!==ee)&&io(f,U,E,ee),Ml=!1;var Tt=f.memoizedState;U.state=Tt,Yt(f,E,U,R),mt(),He=f.memoizedState,ce||Tt!==He||Ml?(typeof _t=="function"&&(dr(f,y,_t,E),He=f.memoizedState),(_e=Ml||Do(f,y,_e,E,Tt,He,ee))?(ut||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(f.flags|=4194308)):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=E,f.memoizedState=He),U.props=E,U.state=He,U.context=ee,E=_e):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),E=!1)}else{U=f.stateNode,Rt(u,f),ee=f.memoizedProps,ut=Rs(y,ee),U.props=ut,_t=f.pendingProps,Tt=U.context,He=y.contextType,_e=Du,typeof He=="object"&&He!==null&&(_e=wi(He)),ce=y.getDerivedStateFromProps,(He=typeof ce=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ee!==_t||Tt!==_e)&&io(f,U,E,_e),Ml=!1,Tt=f.memoizedState,U.state=Tt,Yt(f,E,U,R),mt();var an=f.memoizedState;ee!==_t||Tt!==an||Ml||u!==null&&u.dependencies!==null&&mi(u.dependencies)?(typeof ce=="function"&&(dr(f,y,ce,E),an=f.memoizedState),(ut=Ml||Do(f,y,ut,E,Tt,an,_e)||u!==null&&u.dependencies!==null&&mi(u.dependencies))?(He||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(E,an,_e),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(E,an,_e)),typeof U.componentDidUpdate=="function"&&(f.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof U.componentDidUpdate!="function"||ee===u.memoizedProps&&Tt===u.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ee===u.memoizedProps&&Tt===u.memoizedState||(f.flags|=1024),f.memoizedProps=E,f.memoizedState=an),U.props=E,U.state=an,U.context=_e,E=ut):(typeof U.componentDidUpdate!="function"||ee===u.memoizedProps&&Tt===u.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ee===u.memoizedProps&&Tt===u.memoizedState||(f.flags|=1024),E=!1)}return U=E,No(u,f),E=(f.flags&128)!==0,U||E?(U=f.stateNode,y=E&&typeof y.getDerivedStateFromError!="function"?null:U.render(),f.flags|=1,u!==null&&E?(f.child=Rc(f,u.child,null,R),f.child=Rc(f,null,y,R)):Pi(u,f,y,R),f.memoizedState=U.state,u=f.child):u=P(u,f,R),u}function od(u,f,y,E){return Cn(),f.flags|=256,Pi(u,f,y,E),f.child}function wh(u){return{baseLanes:u,cachePool:V0()}}function Ah(u,f,y){return u=u!==null?u.childLanes&~y:0,f&&(u|=zs),u}function ld(u,f,y){var E=f.pendingProps,R=!1,U=(f.flags&128)!==0,ee;if((ee=U)||(ee=u!==null&&u.memoizedState===null?!1:(or.current&2)!==0),ee&&(R=!0,f.flags&=-129),ee=(f.flags&32)!==0,f.flags&=-33,u===null){if(qn){if(R?Lr(f):Wr(),qn){var ce=Fr,_e;(_e=ce)&&(ce=cS(ce,Va),ce!==null?(f.memoizedState={dehydrated:ce,treeContext:ho!==null?{id:jo,overflow:ka}:null,retryLane:536870912},_e=t(18,null,null,0),_e.stateNode=ce,_e.return=f,f.child=_e,Jr=f,Fr=null,_e=!0):_e=!1),_e||rt(f)}if(ce=f.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null))return Ad(ce)?f.lanes=16:f.lanes=536870912,null;zi(f)}return ce=E.children,E=E.fallback,R?(Wr(),R=f.mode,ce=Ur({mode:"hidden",children:ce},R),E=_l(E,R,y,null),ce.return=f,E.return=f,ce.sibling=E,f.child=ce,R=f.child,R.memoizedState=wh(y),R.childLanes=Ah(u,ee,y),f.memoizedState=es,E):(Lr(f),Io(f,ce))}if(_e=u.memoizedState,_e!==null&&(ce=_e.dehydrated,ce!==null)){if(U)f.flags&256?(Lr(f),f.flags&=-257,f=Ch(u,f,y)):f.memoizedState!==null?(Wr(),f.child=u.child,f.flags|=128,f=null):(Wr(),R=E.fallback,ce=f.mode,E=Ur({mode:"visible",children:E.children},ce),R=_l(R,ce,y,null),R.flags|=2,E.return=f,R.return=f,E.sibling=R,f.child=E,Rc(f,u.child,null,y),E=f.child,E.memoizedState=wh(y),E.childLanes=Ah(u,ee,y),f.memoizedState=es,f=R);else if(Lr(f),Ad(ce))ee=nS(ce).digest,E=Error(r(419)),E.stack="",E.digest=ee,ae({value:E,source:null,stack:null}),f=Ch(u,f,y);else if(Zi||On(u,f,y,!1),ee=(y&u.childLanes)!==0,Zi||ee){if(ee=An,ee!==null){if(E=y&-y,(E&42)!==0)E=1;else switch(E){case 2:E=1;break;case 8:E=4;break;case 32:E=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:E=64;break;case 268435456:E=134217728;break;default:E=0}if(E=(E&(ee.suspendedLanes|y))!==0?0:E,E!==0&&E!==_e.retryLane)throw _e.retryLane=E,Ve(u,E),Kr(ee,u,E),TS}bm(ce)||Os(),f=Ch(u,f,y)}else bm(ce)?(f.flags|=128,f.child=u.child,f=Eu.bind(null,u),fM(ce,f),f=null):(u=_e.treeContext,ds&&(Fr=aS(ce),Jr=f,qn=!0,ma=null,Va=!1,u!==null&&(da[pa++]=jo,da[pa++]=ka,da[pa++]=ho,jo=u.id,ka=u.overflow,ho=f)),f=Io(f,E.children),f.flags|=4096);return f}return R?(Wr(),R=E.fallback,ce=f.mode,_e=u.child,U=_e.sibling,E=Qr(_e,{mode:"hidden",children:E.children}),E.subtreeFlags=_e.subtreeFlags&31457280,U!==null?R=Qr(U,R):(R=_l(R,ce,y,null),R.flags|=2),R.return=f,E.return=f,E.sibling=R,f.child=E,E=R,R=f.child,ce=u.child.memoizedState,ce===null?ce=wh(y):(_e=ce.cachePool,_e!==null?(U=Fo?ri._currentValue:ri._currentValue2,_e=_e.parent!==U?{parent:U,pool:U}:_e):_e=V0(),ce={baseLanes:ce.baseLanes|y,cachePool:_e}),R.memoizedState=ce,R.childLanes=Ah(u,ee,y),f.memoizedState=es,E):(Lr(f),y=u.child,u=y.sibling,y=Qr(y,{mode:"visible",children:E.children}),y.return=f,y.sibling=null,u!==null&&(ee=f.deletions,ee===null?(f.deletions=[u],f.flags|=16):ee.push(u)),f.child=y,f.memoizedState=null,y)}function Io(u,f){return f=Ur({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function Ur(u,f){return um(u,f,0,null)}function Ch(u,f,y){return Rc(f,u.child,null,y),u=Io(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function cd(u,f,y){u.lanes|=f;var E=u.alternate;E!==null&&(E.lanes|=f),cn(u.return,f,y)}function ao(u,f,y,E,R){var U=u.memoizedState;U===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:y,tailMode:R}:(U.isBackwards=f,U.rendering=null,U.renderingStartTime=0,U.last=E,U.tail=y,U.tailMode=R)}function b(u,f,y){var E=f.pendingProps,R=E.revealOrder,U=E.tail;if(Pi(u,f,E.children,y),E=or.current,(E&2)!==0)E=E&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&cd(u,y,f);else if(u.tag===19)cd(u,y,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}E&=1}switch(D(or,E),R){case"forwards":for(y=f.child,R=null;y!==null;)u=y.alternate,u!==null&&fr(u)===null&&(R=y),y=y.sibling;y=R,y===null?(R=f.child,f.child=null):(R=y.sibling,y.sibling=null),ao(f,!1,R,y,U);break;case"backwards":for(y=null,R=f.child,f.child=null;R!==null;){if(u=R.alternate,u!==null&&fr(u)===null){f.child=R;break}u=R.sibling,R.sibling=y,y=R,R=u}ao(f,!0,y,null,U);break;case"together":ao(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function P(u,f,y){if(u!==null&&(f.dependencies=u.dependencies),Sa|=f.lanes,(y&f.childLanes)===0)if(u!==null){if(On(u,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(r(153));if(f.child!==null){for(u=f.child,y=Qr(u,u.pendingProps),f.child=y,y.return=f;u.sibling!==null;)u=u.sibling,y=y.sibling=Qr(u,u.pendingProps),y.return=f;y.sibling=null}return f.child}function G(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&mi(u)))}function te(u,f,y){switch(f.tag){case 3:Te(f,f.stateNode.containerInfo),De(f,ri,u.memoizedState.cache),Cn();break;case 27:case 5:xe(f);break;case 4:Te(f,f.stateNode.containerInfo);break;case 10:De(f,f.type,f.memoizedProps.value);break;case 13:var E=f.memoizedState;if(E!==null)return E.dehydrated!==null?(Lr(f),f.flags|=128,null):(y&f.child.childLanes)!==0?ld(u,f,y):(Lr(f),u=P(u,f,y),u!==null?u.sibling:null);Lr(f);break;case 19:var R=(u.flags&128)!==0;if(E=(y&f.childLanes)!==0,E||(On(u,f,y,!1),E=(y&f.childLanes)!==0),R){if(E)return b(u,f,y);f.flags|=128}if(R=f.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),D(or,or.current),E)break;return null;case 22:case 23:return f.lanes=0,Th(u,f,y);case 24:De(f,ri,u.memoizedState.cache)}return P(u,f,y)}function Ee(u,f,y){if(u!==null)if(u.memoizedProps!==f.pendingProps)Zi=!0;else{if(!G(u,y)&&(f.flags&128)===0)return Zi=!1,te(u,f,y);Zi=(u.flags&131072)!==0}else Zi=!1,qn&&(f.flags&1048576)!==0&&Z(f,Od,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var E=f.elementType,R=E._init;if(E=R(E._payload),f.type=E,typeof E=="function")vl(E)?(u=Rs(E,u),f.tag=1,f=so(null,f,E,u,y)):(f.tag=0,f=Mh(null,f,E,u,y));else{if(E!=null){if(R=E.$$typeof,R===Gh){f.tag=11,f=id(null,f,E,u,y);break e}else if(R===_d){f.tag=14,f=rd(null,f,E,u,y);break e}}throw f=o(E)||E,Error(r(306,f,""))}}return f;case 0:return Mh(u,f,f.type,f.pendingProps,y);case 1:return E=f.type,R=Rs(E,f.pendingProps),so(u,f,E,R,y);case 3:e:{if(Te(f,f.stateNode.containerInfo),u===null)throw Error(r(387));var U=f.pendingProps;R=f.memoizedState,E=R.element,Rt(u,f),Yt(f,U,null,y);var ee=f.memoizedState;if(U=ee.cache,De(f,ri,U),U!==R.cache&&Li(f,[ri],y,!0),mt(),U=ee.element,ds&&R.isDehydrated)if(R={element:U,isDehydrated:!1,cache:ee.cache},f.updateQueue.baseState=R,f.memoizedState=R,f.flags&256){f=od(u,f,U,y);break e}else if(U!==E){E=oe(Error(r(424)),f),ae(E),f=od(u,f,U,y);break e}else for(ds&&(Fr=sS(f.stateNode.containerInfo),Jr=f,qn=!0,ma=null,Va=!0),y=Ay(f,null,U,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Cn(),U===E){f=P(u,f,y);break e}Pi(u,f,U,y)}f=f.child}return f;case 26:if(ha)return No(u,f),u===null?(y=wm(f.type,null,f.pendingProps,null))?f.memoizedState=y:qn||(f.stateNode=pM(f.type,f.pendingProps,fo.current,f)):f.memoizedState=wm(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:if(Br)return xe(f),u===null&&Br&&qn&&(E=f.stateNode=Ey(f.type,f.pendingProps,fo.current,Cr.current,!1),Jr=f,Va=!0,Fr=xm(E)),E=f.pendingProps.children,u!==null||qn?Pi(u,f,E,y):f.child=Rc(f,null,E,y),No(u,f),f.child;case 5:return u===null&&qn&&(pS(f.type,f.pendingProps,Cr.current),(R=E=Fr)&&(E=oS(E,f.type,f.pendingProps,Va),E!==null?(f.stateNode=E,Jr=f,Fr=xm(E),Va=!1,R=!0):R=!1),R||rt(f)),xe(f),R=f.type,U=f.pendingProps,ee=u!==null?u.memoizedProps:null,E=U.children,Tc(R,U)?E=null:ee!==null&&Tc(R,ee)&&(f.flags|=32),f.memoizedState!==null&&(R=ws(u,f,bh,null,null,y),Fo?Jt._currentValue=R:Jt._currentValue2=R),No(u,f),Pi(u,f,E,y),f.child;case 6:return u===null&&qn&&(mS(f.pendingProps,Cr.current),(u=y=Fr)&&(y=lS(y,f.pendingProps,Va),y!==null?(f.stateNode=y,Jr=f,Fr=null,u=!0):u=!1),u||rt(f)),null;case 13:return ld(u,f,y);case 4:return Te(f,f.stateNode.containerInfo),E=f.pendingProps,u===null?f.child=Rc(f,null,E,y):Pi(u,f,E,y),f.child;case 11:return id(u,f,f.type,f.pendingProps,y);case 7:return Pi(u,f,f.pendingProps,y),f.child;case 8:return Pi(u,f,f.pendingProps.children,y),f.child;case 12:return Pi(u,f,f.pendingProps.children,y),f.child;case 10:return E=f.pendingProps,De(f,f.type,E.value),Pi(u,f,E.children,y),f.child;case 9:return R=f.type._context,E=f.pendingProps.children,Er(f),R=wi(R),E=E(R),f.flags|=1,Pi(u,f,E,y),f.child;case 14:return rd(u,f,f.type,f.pendingProps,y);case 15:return oc(u,f,f.type,f.pendingProps,y);case 19:return b(u,f,y);case 22:return Th(u,f,y);case 24:return Er(f),E=wi(ri),u===null?(R=lc(),R===null&&(R=An,U=fl(),R.pooledCache=U,U.refCount++,U!==null&&(R.pooledCacheLanes|=y),R=U),f.memoizedState={parent:E,cache:R},Ct(f),De(f,ri,R)):((u.lanes&y)!==0&&(Rt(u,f),Yt(f,null,null,y),mt()),R=u.memoizedState,U=f.memoizedState,R.parent!==E?(R={parent:E,cache:E},f.memoizedState=R,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=R),De(f,ri,E)):(E=U.cache,De(f,ri,E),E!==R.cache&&Li(f,[ri],y,!0))),Pi(u,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function De(u,f,y){Fo?(D(Vs,f._currentValue),f._currentValue=y):(D(Vs,f._currentValue2),f._currentValue2=y)}function ot(u){var f=Vs.current;Fo?u._currentValue=f:u._currentValue2=f,T(Vs)}function cn(u,f,y){for(;u!==null;){var E=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,E!==null&&(E.childLanes|=f)):E!==null&&(E.childLanes&f)!==f&&(E.childLanes|=f),u===y)break;u=u.return}}function Li(u,f,y,E){var R=u.child;for(R!==null&&(R.return=u);R!==null;){var U=R.dependencies;if(U!==null){var ee=R.child;U=U.firstContext;e:for(;U!==null;){var ce=U;U=R;for(var _e=0;_e<f.length;_e++)if(ce.context===f[_e]){U.lanes|=y,ce=U.alternate,ce!==null&&(ce.lanes|=y),cn(U.return,y,u),E||(ee=null);break e}U=ce.next}}else if(R.tag===18){if(ee=R.return,ee===null)throw Error(r(341));ee.lanes|=y,U=ee.alternate,U!==null&&(U.lanes|=y),cn(ee,y,u),ee=null}else ee=R.child;if(ee!==null)ee.return=R;else for(ee=R;ee!==null;){if(ee===u){ee=null;break}if(R=ee.sibling,R!==null){R.return=ee.return,ee=R;break}ee=ee.return}R=ee}}function On(u,f,y,E){u=null;for(var R=f,U=!1;R!==null;){if(!U){if((R.flags&524288)!==0)U=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var ee=R.alternate;if(ee===null)throw Error(r(387));if(ee=ee.memoizedProps,ee!==null){var ce=R.type;fa(R.pendingProps.value,ee.value)||(u!==null?u.push(ce):u=[ce])}}else if(R===Qh.current){if(ee=R.alternate,ee===null)throw Error(r(387));ee.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(u!==null?u.push(Jt):u=[Jt])}R=R.return}u!==null&&Li(f,u,y,E),f.flags|=262144}function mi(u){for(u=u.firstContext;u!==null;){var f=u.context;if(!fa(Fo?f._currentValue:f._currentValue2,u.memoizedValue))return!0;u=u.next}return!1}function Er(u){Nc=u,Yi=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function wi(u){return Pa(Nc,u)}function Ds(u,f){return Nc===null&&Er(u),Pa(u,f)}function Pa(u,f){var y=Fo?f._currentValue:f._currentValue2;if(f={context:f,memoizedValue:y,next:null},Yi===null){if(u===null)throw Error(r(308));Yi=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else Yi=Yi.next=f;return y}function fl(){return{controller:new MS,data:new Map,refCount:0}}function Oo(u){u.refCount--,u.refCount===0&&Al(Ou,function(){u.controller.abort()})}function lc(){var u=Cl.current;return u!==null?u:An.pooledCache}function Qp(u,f){f===null?D(Cl,Cl.current):D(Cl,f.pool)}function V0(){var u=lc();return u===null?null:{parent:Fo?ri._currentValue:ri._currentValue2,pool:u}}function aa(u){u.flags|=4}function Rv(u,f){if(u!==null&&u.child===f.child)return!1;if((f.flags&16)!==0)return!0;for(u=f.child;u!==null;){if((u.flags&13878)!==0||(u.subtreeFlags&13878)!==0)return!0;u=u.sibling}return!1}function Zp(u,f,y,E){if(Vr)for(y=f.child;y!==null;){if(y.tag===5||y.tag===6)zo(u,y.stateNode);else if(!(y.tag===4||Br&&y.tag===27)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return;y=y.return}y.sibling.return=y.return,y=y.sibling}else if(ca)for(var R=f.child;R!==null;){if(R.tag===5){var U=R.stateNode;y&&E&&(U=uy(U,R.type,R.memoizedProps)),zo(u,U)}else if(R.tag===6)U=R.stateNode,y&&E&&(U=hy(U,R.memoizedProps)),zo(u,U);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)U=R.child,U!==null&&(U.return=R),Zp(u,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function Rh(u,f,y,E){if(ca)for(var R=f.child;R!==null;){if(R.tag===5){var U=R.stateNode;y&&E&&(U=uy(U,R.type,R.memoizedProps)),ly(u,U)}else if(R.tag===6)U=R.stateNode,y&&E&&(U=hy(U,R.memoizedProps)),ly(u,U);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)U=R.child,U!==null&&(U.return=R),Rh(u,R,!(R.memoizedProps!==null&&R.memoizedProps.mode==="manual"),!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function Dh(u,f){if(ca&&Rv(u,f)){u=f.stateNode;var y=u.containerInfo,E=Sm();Rh(E,f,!1,!1),u.pendingChildren=E,aa(f),tS(y,E)}}function Dv(u,f,y,E){if(Vr)u.memoizedProps!==E&&aa(f);else if(ca){var R=u.stateNode,U=u.memoizedProps;if((u=Rv(u,f))||U!==E){var ee=Cr.current;U=oy(R,y,U,E,!u,null),U===R?f.stateNode=R:(bl(U,y,E,ee)&&aa(f),f.stateNode=U,u?Zp(U,f,!1,!1):aa(f))}else f.stateNode=R}}function Nh(u,f,y){if(J0(f,y)){if(u.flags|=16777216,!xl(f,y))if(md())u.flags|=8192;else throw Iu=Nm,wy}else u.flags&=-16777217}function Nv(u,f){if(gS(f)){if(u.flags|=16777216,!by(f))if(md())u.flags|=8192;else throw Iu=Nm,wy}else u.flags&=-16777217}function ud(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?N():536870912,u.lanes|=f,Dl|=f)}function yu(u,f){if(!qn)switch(u.tailMode){case"hidden":f=u.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var E=null;y!==null;)y.alternate!==null&&(E=y),y=y.sibling;E===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:E.sibling=null}}function Ai(u){var f=u.alternate!==null&&u.alternate.child===u.child,y=0,E=0;if(f)for(var R=u.child;R!==null;)y|=R.lanes|R.childLanes,E|=R.subtreeFlags&31457280,E|=R.flags&31457280,R.return=u,R=R.sibling;else for(R=u.child;R!==null;)y|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=u,R=R.sibling;return u.subtreeFlags|=E,u.childLanes=y,f}function B0(u,f,y){var E=f.pendingProps;switch(Ce(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ai(f),null;case 1:return Ai(f),null;case 3:return y=f.stateNode,E=null,u!==null&&(E=u.memoizedState.cache),f.memoizedState.cache!==E&&(f.flags|=2048),ot(ri),Ye(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(u===null||u.child===null)&&(en(f)?aa(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,ma!==null&&(pl(ma),ma=null))),Dh(u,f),Ai(f),null;case 26:if(ha){y=f.type;var R=f.memoizedState;return u===null?(aa(f),R!==null?(Ai(f),Nv(f,R)):(Ai(f),Nh(f,y,E))):R?R!==u.memoizedState?(aa(f),Ai(f),Nv(f,R)):(Ai(f),f.flags&=-16777217):(Vr?u.memoizedProps!==E&&aa(f):Dv(u,f,y,E),Ai(f),Nh(f,y,E)),null}case 27:if(Br){if(Oe(f),y=fo.current,R=f.type,u!==null&&f.stateNode!=null)Vr?u.memoizedProps!==E&&aa(f):Dv(u,f,R,E);else{if(!E){if(f.stateNode===null)throw Error(r(166));return Ai(f),null}u=Cr.current,en(f)?ft(f,u):(u=Ey(R,E,y,u,!0),f.stateNode=u,aa(f))}return Ai(f),null}case 5:if(Oe(f),y=f.type,u!==null&&f.stateNode!=null)Dv(u,f,y,E);else{if(!E){if(f.stateNode===null)throw Error(r(166));return Ai(f),null}u=Cr.current,en(f)?ft(f,u):(R=Qv(y,E,fo.current,u,f),Zp(R,f,!1,!1),f.stateNode=R,bl(R,y,E,u)&&aa(f))}return Ai(f),Nh(f,f.type,f.pendingProps),null;case 6:if(u&&f.stateNode!=null)y=u.memoizedProps,Vr?y!==E&&aa(f):ca&&(y!==E?(f.stateNode=pm(E,fo.current,Cr.current,f),aa(f)):f.stateNode=u.stateNode);else{if(typeof E!="string"&&f.stateNode===null)throw Error(r(166));if(u=fo.current,y=Cr.current,en(f)){if(!ds)throw Error(r(176));if(u=f.stateNode,y=f.memoizedProps,E=null,R=Jr,R!==null)switch(R.tag){case 27:case 5:E=R.memoizedProps}uS(u,y,f,E)||rt(f)}else f.stateNode=pm(E,u,y,f)}return Ai(f),null;case 13:if(E=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(R=en(f),E!==null&&E.dehydrated!==null){if(u===null){if(!R)throw Error(r(318));if(!ds)throw Error(r(344));if(R=f.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));qh(R,f)}else Cn(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ai(f),R=!1}else ma!==null&&(pl(ma),ma=null),R=!0;if(!R)return f.flags&256?(zi(f),f):(zi(f),null)}if(zi(f),(f.flags&128)!==0)return f.lanes=y,f;if(y=E!==null,u=u!==null&&u.memoizedState!==null,y){E=f.child,R=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(R=E.alternate.memoizedState.cachePool.pool);var U=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(U=E.memoizedState.cachePool.pool),U!==R&&(E.flags|=2048)}return y!==u&&y&&(f.child.flags|=8192),ud(f,f.updateQueue),Ai(f),null;case 4:return Ye(),Dh(u,f),u===null&&$v(f.stateNode.containerInfo),Ai(f),null;case 10:return ot(f.type),Ai(f),null;case 19:if(T(or),R=f.memoizedState,R===null)return Ai(f),null;if(E=(f.flags&128)!==0,U=R.rendering,U===null)if(E)yu(R,!1);else{if(Bn!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(U=fr(u),U!==null){for(f.flags|=128,yu(R,!1),u=U.updateQueue,f.updateQueue=u,ud(f,u),f.subtreeFlags=0,u=y,y=f.child;y!==null;)yl(y,u),y=y.sibling;return D(or,or.current&1|2),f.child}u=u.sibling}R.tail!==null&&zr()>ki&&(f.flags|=128,E=!0,yu(R,!1),f.lanes=4194304)}else{if(!E)if(u=fr(U),u!==null){if(f.flags|=128,E=!0,u=u.updateQueue,f.updateQueue=u,ud(f,u),yu(R,!0),R.tail===null&&R.tailMode==="hidden"&&!U.alternate&&!qn)return Ai(f),null}else 2*zr()-R.renderingStartTime>ki&&y!==536870912&&(f.flags|=128,E=!0,yu(R,!1),f.lanes=4194304);R.isBackwards?(U.sibling=f.child,f.child=U):(u=R.last,u!==null?u.sibling=U:f.child=U,R.last=U)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=zr(),f.sibling=null,u=or.current,D(or,E?u&1|2:u&1),f):(Ai(f),null);case 22:case 23:return zi(f),to(),E=f.memoizedState!==null,u!==null?u.memoizedState!==null!==E&&(f.flags|=8192):E&&(f.flags|=8192),E?(y&536870912)!==0&&(f.flags&128)===0&&(Ai(f),f.subtreeFlags&6&&(f.flags|=8192)):Ai(f),y=f.updateQueue,y!==null&&ud(f,y.retryQueue),y=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),E=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(E=f.memoizedState.cachePool.pool),E!==y&&(f.flags|=2048),u!==null&&T(Cl),null;case 24:return y=null,u!==null&&(y=u.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),ot(ri),Ai(f),null;case 25:return null}throw Error(r(156,f.tag))}function z0(u,f){switch(Ce(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return ot(ri),Ye(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return Oe(f),null;case 13:if(zi(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Cn()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return T(or),null;case 4:return Ye(),null;case 10:return ot(f.type),null;case 22:case 23:return zi(f),to(),u!==null&&T(Cl),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return ot(ri),null;case 25:return null;default:return null}}function Iv(u,f){switch(Ce(f),f.tag){case 3:ot(ri),Ye();break;case 26:case 27:case 5:Oe(f);break;case 4:Ye();break;case 13:zi(f);break;case 19:T(or);break;case 10:ot(f.type);break;case 22:case 23:zi(f),to(),u!==null&&T(Cl);break;case 24:ot(ri)}}function hd(u,f){try{var y=f.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var R=E.next;y=R;do{if((y.tag&u)===u){E=void 0;var U=y.create,ee=y.inst;E=U(),ee.destroy=E}y=y.next}while(y!==R)}}catch(ce){Dn(f,f.return,ce)}}function cc(u,f,y){try{var E=f.updateQueue,R=E!==null?E.lastEffect:null;if(R!==null){var U=R.next;E=U;do{if((E.tag&u)===u){var ee=E.inst,ce=ee.destroy;if(ce!==void 0){ee.destroy=void 0,R=f;var _e=y;try{ce()}catch(He){Dn(R,_e,He)}}}E=E.next}while(E!==U)}}catch(He){Dn(f,f.return,He)}}function F0(u){var f=u.updateQueue;if(f!==null){var y=u.stateNode;try{it(f,y)}catch(E){Dn(u,u.return,E)}}}function H0(u,f,y){y.props=Rs(u.type,u.memoizedProps),y.state=u.memoizedState;try{y.componentWillUnmount()}catch(E){Dn(u,f,E)}}function _u(u,f){try{var y=u.ref;if(y!==null){var E=u.stateNode;switch(u.tag){case 26:case 27:case 5:var R=jh(E);break;default:R=E}typeof y=="function"?u.refCleanup=y(R):y.current=R}}catch(U){Dn(u,f,U)}}function Ci(u,f){var y=u.ref,E=u.refCleanup;if(y!==null)if(typeof E=="function")try{E()}catch(R){Dn(u,f,R)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(R){Dn(u,f,R)}else y.current=null}function Ih(u){var f=u.type,y=u.memoizedProps,E=u.stateNode;try{hM(E,f,y,u)}catch(R){Dn(u,u.return,R)}}function Ov(u,f,y){try{iy(u.stateNode,u.type,y,f,u)}catch(E){Dn(u,u.return,E)}}function Pv(u){return u.tag===5||u.tag===3||(ha?u.tag===26:!1)||(Br?u.tag===27:!1)||u.tag===4}function Jp(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Pv(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&(!Br||u.tag!==27)&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function $p(u,f,y){var E=u.tag;if(E===5||E===6)u=u.stateNode,f?sy(y,u,f):$0(y,u);else if(!(E===4||Br&&E===27)&&(u=u.child,u!==null))for($p(u,f,y),u=u.sibling;u!==null;)$p(u,f,y),u=u.sibling}function Oh(u,f,y){var E=u.tag;if(E===5||E===6)u=u.stateNode,f?ry(y,u,f):ny(y,u);else if(!(E===4||Br&&E===27)&&(u=u.child,u!==null))for(Oh(u,f,y),u=u.sibling;u!==null;)Oh(u,f,y),u=u.sibling}function G0(u,f,y){u=u.containerInfo;try{cy(u,y)}catch(E){Dn(f,f.return,E)}}function Ph(u,f){for(Ec(u.containerInfo),Wi=f;Wi!==null;)if(u=Wi,f=u.child,(u.subtreeFlags&1028)!==0&&f!==null)f.return=u,Wi=f;else for(;Wi!==null;){u=Wi;var y=u.alternate;switch(f=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&y!==null){f=void 0;var E=u,R=y.memoizedProps;y=y.memoizedState;var U=E.stateNode;try{var ee=Rs(E.type,R,E.elementType===E.type);f=U.getSnapshotBeforeUpdate(ee,y),U.__reactInternalSnapshotBeforeUpdate=f}catch(ce){Dn(E,E.return,ce)}}break;case 3:(f&1024)!==0&&Vr&&_m(u.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(r(163))}if(f=u.sibling,f!==null){f.return=u.return,Wi=f;break}Wi=u.return}return ee=Pu,Pu=!1,ee}function em(u,f,y){var E=y.flags;switch(y.tag){case 0:case 11:case 15:Po(u,y),E&4&&hd(5,y);break;case 1:if(Po(u,y),E&4)if(u=y.stateNode,f===null)try{u.componentDidMount()}catch(ce){Dn(y,y.return,ce)}else{var R=Rs(y.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(R,f,u.__reactInternalSnapshotBeforeUpdate)}catch(ce){Dn(y,y.return,ce)}}E&64&&F0(y),E&512&&_u(y,y.return);break;case 3:if(Po(u,y),E&64&&(E=y.updateQueue,E!==null)){if(u=null,y.child!==null)switch(y.child.tag){case 27:case 5:u=jh(y.child.stateNode);break;case 1:u=y.child.stateNode}try{it(E,u)}catch(ce){Dn(y,y.return,ce)}}break;case 26:if(ha){Po(u,y),E&512&&_u(y,y.return);break}case 27:case 5:Po(u,y),f===null&&E&4&&Ih(y),E&512&&_u(y,y.return);break;case 12:Po(u,y);break;case 13:Po(u,y),E&4&&uc(u,y);break;case 22:if(R=y.memoizedState!==null||mr,!R){f=f!==null&&f.memoizedState!==null||Ui;var U=mr,ee=Ui;mr=R,(Ui=f)&&!ee?fc(u,y,(y.subtreeFlags&8772)!==0):Po(u,y),mr=U,Ui=ee}E&512&&(y.memoizedProps.mode==="manual"?_u(y,y.return):Ci(y,y.return));break;default:Po(u,y)}}function Lh(u){var f=u.alternate;f!==null&&(u.alternate=null,Lh(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&ey(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function oa(u,f,y){for(y=y.child;y!==null;)tm(u,f,y),y=y.sibling}function tm(u,f,y){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(Kh,y)}catch{}switch(y.tag){case 26:if(ha){Ui||Ci(y,f),oa(u,f,y),y.memoizedState?gy(y.memoizedState):y.stateNode&&_y(y.stateNode);break}case 27:if(Br){Ui||Ci(y,f);var E=Ji,R=Bs;Ji=y.stateNode,oa(u,f,y),vS(y.stateNode),Ji=E,Bs=R;break}case 5:Ui||Ci(y,f);case 6:if(Vr){if(E=Ji,R=Bs,Ji=null,oa(u,f,y),Ji=E,Bs=R,Ji!==null)if(Bs)try{Ki(Ji,y.stateNode)}catch(U){Dn(y,f,U)}else try{ps(Ji,y.stateNode)}catch(U){Dn(y,f,U)}}else oa(u,f,y);break;case 18:Vr&&Ji!==null&&(Bs?dy(Ji,y.stateNode):fS(Ji,y.stateNode));break;case 4:Vr?(E=Ji,R=Bs,Ji=y.stateNode.containerInfo,Bs=!0,oa(u,f,y),Ji=E,Bs=R):(ca&&G0(y.stateNode,y,Sm()),oa(u,f,y));break;case 0:case 11:case 14:case 15:Ui||cc(2,y,f),Ui||cc(4,y,f),oa(u,f,y);break;case 1:Ui||(Ci(y,f),E=y.stateNode,typeof E.componentWillUnmount=="function"&&H0(y,f,E)),oa(u,f,y);break;case 21:oa(u,f,y);break;case 22:Ui||Ci(y,f),Ui=(E=Ui)||y.memoizedState!==null,oa(u,f,y),Ui=E;break;default:oa(u,f,y)}}function uc(u,f){if(ds&&f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Tm(u)}catch(y){Dn(f,f.return,y)}}function Uh(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new tf),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new tf),f;default:throw Error(r(435,u.tag))}}function fd(u,f){var y=Uh(u);f.forEach(function(E){var R=Bv.bind(null,u,E);y.has(E)||(y.add(E),E.then(R,R))})}function us(u,f){var y=f.deletions;if(y!==null)for(var E=0;E<y.length;E++){var R=y[E],U=u,ee=f;if(Vr){var ce=ee;e:for(;ce!==null;){switch(ce.tag){case 27:case 5:Ji=ce.stateNode,Bs=!1;break e;case 3:Ji=ce.stateNode.containerInfo,Bs=!0;break e;case 4:Ji=ce.stateNode.containerInfo,Bs=!0;break e}ce=ce.return}if(Ji===null)throw Error(r(160));tm(U,ee,R),Ji=null,Bs=!1}else tm(U,ee,R);U=R.alternate,U!==null&&(U.return=null),R.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)hc(f,u),f=f.sibling}function hc(u,f){var y=u.alternate,E=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:us(f,u),Ns(u),E&4&&(cc(3,u,u.return),hd(3,u),cc(5,u,u.return));break;case 1:us(f,u),Ns(u),E&512&&(Ui||y===null||Ci(y,y.return)),E&64&&mr&&(u=u.updateQueue,u!==null&&(E=u.callbacks,E!==null&&(y=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=y===null?E:y.concat(E))));break;case 26:if(ha){var R=ms;us(f,u),Ns(u),E&512&&(Ui||y===null||Ci(y,y.return)),E&4&&(E=y!==null?y.memoizedState:null,f=u.memoizedState,y===null?f===null?u.stateNode===null?u.stateNode=vy(R,u.type,u.memoizedProps,u):yy(R,u.type,u.stateNode):u.stateNode=my(R,f,u.memoizedProps):E!==f?(E===null?y.stateNode!==null&&_y(y.stateNode):gy(E),f===null?yy(R,u.type,u.stateNode):my(R,f,u.memoizedProps)):f===null&&u.stateNode!==null&&Ov(u,u.memoizedProps,y.memoizedProps));break}case 27:if(Br&&E&4&&u.alternate===null){R=u.stateNode;var U=u.memoizedProps;try{mM(R),gM(u.type,U,R,u)}catch(ut){Dn(u,u.return,ut)}}case 5:if(us(f,u),Ns(u),E&512&&(Ui||y===null||Ci(y,y.return)),Vr){if(u.flags&32){f=u.stateNode;try{Md(f)}catch(ut){Dn(u,u.return,ut)}}E&4&&u.stateNode!=null&&(f=u.memoizedProps,Ov(u,f,y!==null?y.memoizedProps:f)),E&1024&&(Ic=!0)}break;case 6:if(us(f,u),Ns(u),E&4&&Vr){if(u.stateNode===null)throw Error(r(162));E=u.memoizedProps,y=y!==null?y.memoizedProps:E,f=u.stateNode;try{eS(f,y,E)}catch(ut){Dn(u,u.return,ut)}}break;case 3:if(ha?(Sy(),R=ms,ms=Mm(f.containerInfo),us(f,u),ms=R):us(f,u),Ns(u),E&4){if(Vr&&ds&&y!==null&&y.memoizedState.isDehydrated)try{Em(f.containerInfo)}catch(ut){Dn(u,u.return,ut)}if(ca){E=f.containerInfo,y=f.pendingChildren;try{cy(E,y)}catch(ut){Dn(u,u.return,ut)}}}Ic&&(Ic=!1,Lv(u));break;case 4:ha?(y=ms,ms=Mm(u.stateNode.containerInfo),us(f,u),Ns(u),ms=y):(us(f,u),Ns(u)),E&4&&ca&&G0(u.stateNode,u,u.stateNode.pendingChildren);break;case 12:us(f,u),Ns(u);break;case 13:us(f,u),Ns(u),u.child.flags&8192&&u.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Xo=zr()),E&4&&(E=u.updateQueue,E!==null&&(u.updateQueue=null,fd(u,E)));break;case 22:E&512&&(Ui||y===null||Ci(y,y.return)),R=u.memoizedState!==null;var ee=y!==null&&y.memoizedState!==null,ce=mr,_e=Ui;if(mr=ce||R,Ui=_e||ee,us(f,u),Ui=_e,mr=ce,Ns(u),f=u.stateNode,f._current=u,f._visibility&=-3,f._visibility|=f._pendingVisibility&2,E&8192&&(f._visibility=R?f._visibility&-2:f._visibility|1,R&&(f=mr||Ui,y===null||ee||f||kh(u)),Vr&&(u.memoizedProps===null||u.memoizedProps.mode!=="manual"))){e:if(y=null,Vr)for(f=u;;){if(f.tag===5||ha&&f.tag===26||Br&&f.tag===27){if(y===null){ee=y=f;try{U=ee.stateNode,R?wd(U):ay(ee.stateNode,ee.memoizedProps)}catch(ut){Dn(ee,ee.return,ut)}}}else if(f.tag===6){if(y===null){ee=f;try{var He=ee.stateNode;R?ym(He):El(He,ee.memoizedProps)}catch(ut){Dn(ee,ee.return,ut)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}}E&4&&(E=u.updateQueue,E!==null&&(y=E.retryQueue,y!==null&&(E.retryQueue=null,fd(u,y))));break;case 19:us(f,u),Ns(u),E&4&&(E=u.updateQueue,E!==null&&(u.updateQueue=null,fd(u,E)));break;case 21:break;default:us(f,u),Ns(u)}}function Ns(u){var f=u.flags;if(f&2){try{if(Vr&&(!Br||u.tag!==27)){e:{for(var y=u.return;y!==null;){if(Pv(y)){var E=y;break e}y=y.return}throw Error(r(160))}switch(E.tag){case 27:if(Br){var R=E.stateNode,U=Jp(u);Oh(u,U,R);break}case 5:var ee=E.stateNode;E.flags&32&&(Md(ee),E.flags&=-33);var ce=Jp(u);Oh(u,ce,ee);break;case 3:case 4:var _e=E.stateNode.containerInfo,He=Jp(u);$p(u,He,_e);break;default:throw Error(r(161))}}}catch(ut){Dn(u,u.return,ut)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function Lv(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;Lv(f),f.tag===5&&f.flags&1024&&fi(f.stateNode),u=u.sibling}}function Po(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)em(u,f.alternate,f),f=f.sibling}function kh(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:cc(4,f,f.return),kh(f);break;case 1:Ci(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&H0(f,f.return,y),kh(f);break;case 26:case 27:case 5:Ci(f,f.return),kh(f);break;case 22:Ci(f,f.return),f.memoizedState===null&&kh(f);break;default:kh(f)}u=u.sibling}}function fc(u,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var E=f.alternate,R=u,U=f,ee=U.flags;switch(U.tag){case 0:case 11:case 15:fc(R,U,y),hd(4,U);break;case 1:if(fc(R,U,y),E=U,R=E.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(He){Dn(E,E.return,He)}if(E=U,R=E.updateQueue,R!==null){var ce=E.stateNode;try{var _e=R.shared.hiddenCallbacks;if(_e!==null)for(R.shared.hiddenCallbacks=null,R=0;R<_e.length;R++)pe(_e[R],ce)}catch(He){Dn(E,E.return,He)}}y&&ee&64&&F0(U),_u(U,U.return);break;case 26:case 27:case 5:fc(R,U,y),y&&E===null&&ee&4&&Ih(U),_u(U,U.return);break;case 12:fc(R,U,y);break;case 13:fc(R,U,y),y&&ee&4&&uc(R,U);break;case 22:U.memoizedState===null&&fc(R,U,y),_u(U,U.return);break;default:fc(R,U,y)}f=f.sibling}}function Uv(u,f){var y=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==y&&(u!=null&&u.refCount++,y!=null&&Oo(y))}function nm(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Oo(u))}function dl(u,f,y,E){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)im(u,f,y,E),f=f.sibling}function im(u,f,y,E){var R=f.flags;switch(f.tag){case 0:case 11:case 15:dl(u,f,y,E),R&2048&&hd(9,f);break;case 3:dl(u,f,y,E),R&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Oo(u)));break;case 12:if(R&2048){dl(u,f,y,E),u=f.stateNode;try{var U=f.memoizedProps,ee=U.id,ce=U.onPostCommit;typeof ce=="function"&&ce(ee,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(_e){Dn(f,f.return,_e)}}else dl(u,f,y,E);break;case 23:break;case 22:U=f.stateNode,f.memoizedState!==null?U._visibility&4?dl(u,f,y,E):dc(u,f):U._visibility&4?dl(u,f,y,E):(U._visibility|=4,Xr(u,f,y,E,(f.subtreeFlags&10256)!==0)),R&2048&&Uv(f.alternate,f);break;case 24:dl(u,f,y,E),R&2048&&nm(f.alternate,f);break;default:dl(u,f,y,E)}}function Xr(u,f,y,E,R){for(R=R&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var U=u,ee=f,ce=y,_e=E,He=ee.flags;switch(ee.tag){case 0:case 11:case 15:Xr(U,ee,ce,_e,R),hd(8,ee);break;case 23:break;case 22:var ut=ee.stateNode;ee.memoizedState!==null?ut._visibility&4?Xr(U,ee,ce,_e,R):dc(U,ee):(ut._visibility|=4,Xr(U,ee,ce,_e,R)),R&&He&2048&&Uv(ee.alternate,ee);break;case 24:Xr(U,ee,ce,_e,R),R&&He&2048&&nm(ee.alternate,ee);break;default:Xr(U,ee,ce,_e,R)}f=f.sibling}}function dc(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=u,E=f,R=E.flags;switch(E.tag){case 22:dc(y,E),R&2048&&Uv(E.alternate,E);break;case 24:dc(y,E),R&2048&&nm(E.alternate,E);break;default:dc(y,E)}f=f.sibling}}function Tr(u){if(u.subtreeFlags&Lu)for(u=u.child;u!==null;)Su(u),u=u.sibling}function Su(u){switch(u.tag){case 26:Tr(u),u.flags&Lu&&(u.memoizedState!==null?xy(ms,u.memoizedState,u.memoizedProps):Hi(u.type,u.memoizedProps));break;case 5:Tr(u),u.flags&Lu&&Hi(u.type,u.memoizedProps);break;case 3:case 4:if(ha){var f=ms;ms=Mm(u.stateNode.containerInfo),Tr(u),ms=f}else Tr(u);break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=Lu,Lu=16777216,Tr(u),Lu=f):Tr(u));break;default:Tr(u)}}function rm(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function pc(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var E=f[y];Wi=E,mc(E,u)}rm(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)dd(u),u=u.sibling}function dd(u){switch(u.tag){case 0:case 11:case 15:pc(u),u.flags&2048&&cc(9,u,u.return);break;case 3:pc(u);break;case 12:pc(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&4&&(u.return===null||u.return.tag!==13)?(f._visibility&=-5,Vh(u)):pc(u);break;default:pc(u)}}function Vh(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var E=f[y];Wi=E,mc(E,u)}rm(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:cc(8,f,f.return),Vh(f);break;case 22:y=f.stateNode,y._visibility&4&&(y._visibility&=-5,Vh(f));break;default:Vh(f)}u=u.sibling}}function mc(u,f){for(;Wi!==null;){var y=Wi;switch(y.tag){case 0:case 11:case 15:cc(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var E=y.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Oo(y.memoizedState.cache)}if(E=y.child,E!==null)E.return=y,Wi=E;else e:for(y=u;Wi!==null;){E=Wi;var R=E.sibling,U=E.return;if(Lh(E),E===y){Wi=null;break e}if(R!==null){R.return=U,Wi=R;break e}Wi=U}}}function sm(u){var f=Jv(u);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(r(364));return f}if(u=Ru(u),u===null)throw Error(r(362));return u.stateNode.current}function Bh(u,f){var y=u.tag;switch(f.$$typeof){case Fd:if(u.type===f.value)return!0;break;case Um:e:{for(f=f.value,u=[u,0],y=0;y<u.length;){var E=u[y++],R=E.tag,U=u[y++],ee=f[U];if(R!==5&&R!==26&&R!==27||!Go(E)){for(;ee!=null&&Bh(E,ee);)U++,ee=f[U];if(U===f.length){f=!0;break e}else for(E=E.child;E!==null;)u.push(E,U),E=E.sibling}}f=!1}return f;case km:if((y===5||y===26||y===27)&&uM(u.stateNode,f.value))return!0;break;case si:if((y===5||y===6||y===26||y===27)&&(u=Td(u),u!==null&&0<=u.indexOf(f.value)))return!0;break;case Vn:if((y===5||y===26||y===27)&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function gc(u){switch(u.$$typeof){case Fd:return"<"+(o(u.value)||"Unknown")+">";case Um:return":has("+(gc(u)||"")+")";case km:return'[role="'+u.value+'"]';case si:return'"'+u.value+'"';case Vn:return'[data-testname="'+u.value+'"]';default:throw Error(r(365))}}function j0(u,f){var y=[];u=[u,0];for(var E=0;E<u.length;){var R=u[E++],U=R.tag,ee=u[E++],ce=f[ee];if(U!==5&&U!==26&&U!==27||!Go(R)){for(;ce!=null&&Bh(R,ce);)ee++,ce=f[ee];if(ee===f.length)y.push(R);else for(R=R.child;R!==null;)u.push(R,ee),R=R.sibling}}return y}function hs(u,f){if(!Ho)throw Error(r(363));u=sm(u),u=j0(u,f),f=[],u=Array.from(u);for(var y=0;y<u.length;){var E=u[y++],R=E.tag;if(R===5||R===26||R===27)Go(E)||f.push(E.stateNode);else for(E=E.child;E!==null;)u.push(E),E=E.sibling}return f}function fs(){if((Ht&2)!==0&&Tn!==0)return Tn&-Tn;if(Wt.T!==null){var u=ks;return u!==0?u:$e()}return Ua()}function Lo(){zs===0&&(zs=(Tn&536870912)===0||qn?V():536870912);var u=ya.current;return u!==null&&(u.flags|=32),zs}function Kr(u,f,y){(u===An&&di===2||u.cancelPendingCommit!==null)&&(lo(u,0),oo(u,Tn,zs,!1)),z(u,y),((Ht&2)===0||u!==An)&&(u===An&&((Ht&2)===0&&(go|=y),Bn===4&&oo(u,Tn,zs,!1)),Je(u))}function pd(u,f,y){if((Ht&6)!==0)throw Error(r(327));var E=!y&&(f&60)===0&&(f&u.expiredLanes)===0||Y(u,f),R=E?Vo(u,f):Uo(u,f,!0),U=E;do{if(R===0){_a&&!E&&oo(u,f,0,!1);break}else if(R===6)oo(u,f,0,!ai);else{if(y=u.current.alternate,U&&!q0(y)){R=Uo(u,f,!1),U=!1;continue}if(R===2){if(U=f,u.errorRecoveryDisabledLanes&U)var ee=0;else ee=u.pendingLanes&-536870913,ee=ee!==0?ee:ee&536870912?536870912:0;if(ee!==0){f=ee;e:{var ce=u;R=nf;var _e=ds&&ce.current.memoizedState.isDehydrated;if(_e&&(lo(ce,ee).flags|=256),ee=Uo(ce,ee,!1),ee!==2){if(Rl&&!_e){ce.errorRecoveryDisabledLanes|=U,go|=U,R=4;break e}U=ba,ba=R,U!==null&&pl(U)}R=ee}if(U=!1,R!==2)continue}}if(R===1){lo(u,0),oo(u,f,0,!0);break}e:{switch(E=u,R){case 0:case 1:throw Error(r(345));case 4:if((f&4194176)===f){oo(E,f,zs,!ai);break e}break;case 2:ba=null;break;case 3:case 5:break;default:throw Error(r(329))}if(E.finishedWork=y,E.finishedLanes=f,(f&62914560)===f&&(U=Xo+300-zr(),10<U)){if(oo(E,f,zs,!ai),j(E,0)!==0)break e;E.timeoutHandle=Zv(am.bind(null,E,y,ba,vo,rf,f,zs,go,Dl,ai,2,-0,0),U);break e}am(E,y,ba,vo,rf,f,zs,go,Dl,ai,0,-0,0)}}break}while(!0);Je(u)}function pl(u){ba===null?ba=u:ba.push.apply(ba,u)}function am(u,f,y,E,R,U,ee,ce,_e,He,ut,_t,Tt){var an=f.subtreeFlags;if((an&8192||(an&16785408)===16785408)&&(ua(),Su(f),f=mm(),f!==null)){u.cancelPendingCommit=f(bi.bind(null,u,y,E,R,ee,ce,_e,1,_t,Tt)),oo(u,U,ee,!He);return}bi(u,y,E,R,ee,ce,_e,ut,_t,Tt)}function q0(u){for(var f=u;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var E=0;E<y.length;E++){var R=y[E],U=R.getSnapshot;R=R.value;try{if(!fa(U(),R))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function oo(u,f,y,E){f&=~ts,f&=~go,u.suspendedLanes|=f,u.pingedLanes&=~f,E&&(u.warmLanes|=f),E=u.expirationTimes;for(var R=f;0<R;){var U=31-Ls(R),ee=1<<U;E[U]=-1,R&=~ee}y!==0&&q(u,y,f)}function kv(){return(Ht&6)===0?(zt(0),!1):!0}function Is(){if(un!==null){if(di===0)var u=un.return;else u=un,Yi=Nc=null,$(u),qo=null,Ba=0,u=un;for(;u!==null;)Iv(u.alternate,u),u=u.return;un=null}}function lo(u,f){u.finishedWork=null,u.finishedLanes=0;var y=u.timeoutHandle;y!==Cu&&(u.timeoutHandle=Cu,Ed(y)),y=u.cancelPendingCommit,y!==null&&(u.cancelPendingCommit=null,y()),Is(),An=u,un=y=Qr(u.current,null),Tn=f,di=0,$i=null,ai=!1,_a=Y(u,f),Rl=!1,Dl=zs=ts=go=Sa=Bn=0,ba=nf=null,rf=!1,(f&8)!==0&&(f|=f&32);var E=u.entangledLanes;if(E!==0)for(u=u.entanglements,E&=f;0<E;){var R=31-Ls(E),U=1<<R;f|=u[R],E&=~U}return mo=f,We(),y}function bu(u,f){gn=null,Wt.H=Yn,f===ci?(f=xt(),di=3):f===wy?(f=xt(),di=4):di=f===TS?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,$i=f,un===null&&(Bn=1,sc(u,oe(f,u.current)))}function md(){var u=ya.current;return u===null?!0:(Tn&4194176)===Tn?za===null:(Tn&62914560)===Tn||(Tn&536870912)!==0?u===za:!1}function zh(){var u=Wt.H;return Wt.H=Yn,u===null?Yn:u}function la(){var u=Wt.A;return Wt.A=Lm,u}function Os(){Bn=4,ai||(Tn&4194176)!==Tn&&ya.current!==null||(_a=!0),(Sa&134217727)===0&&(go&134217727)===0||An===null||oo(An,Tn,zs,!1)}function Uo(u,f,y){var E=Ht;Ht|=2;var R=zh(),U=la();(An!==u||Tn!==f)&&(vo=null,lo(u,f)),f=!1;var ee=Bn;e:do try{if(di!==0&&un!==null){var ce=un,_e=$i;switch(di){case 8:Is(),ee=6;break e;case 3:case 2:case 6:ya.current===null&&(f=!0);var He=di;if(di=0,$i=null,vc(u,ce,_e,He),y&&_a){ee=0;break e}break;default:He=di,di=0,$i=null,vc(u,ce,_e,He)}}ko(),ee=Bn;break}catch(ut){bu(u,ut)}while(!0);return f&&u.shellSuspendCounter++,Yi=Nc=null,Ht=E,Wt.H=R,Wt.A=U,un===null&&(An=null,Tn=0,We()),ee}function ko(){for(;un!==null;)Vv(un)}function Vo(u,f){var y=Ht;Ht|=2;var E=zh(),R=la();An!==u||Tn!==f?(vo=null,ki=zr()+500,lo(u,f)):_a=Y(u,f);e:do try{if(di!==0&&un!==null){f=un;var U=$i;t:switch(di){case 1:di=0,$i=null,vc(u,f,U,1);break;case 2:if(pt(U)){di=0,$i=null,om(f);break}f=function(){di===2&&An===u&&(di=7),Je(u)},U.then(f,f);break e;case 3:di=7;break e;case 4:di=5;break e;case 7:pt(U)?(di=0,$i=null,om(f)):(di=0,$i=null,vc(u,f,U,7));break;case 5:var ee=null;switch(un.tag){case 26:ee=un.memoizedState;case 5:case 27:var ce=un,_e=ce.type,He=ce.pendingProps;if(ee?by(ee):xl(_e,He)){di=0,$i=null;var ut=ce.sibling;if(ut!==null)un=ut;else{var _t=ce.return;_t!==null?(un=_t,gd(_t)):un=null}break t}}di=0,$i=null,vc(u,f,U,5);break;case 6:di=0,$i=null,vc(u,f,U,6);break;case 8:Is(),Bn=6;break e;default:throw Error(r(462))}}ml();break}catch(Tt){bu(u,Tt)}while(!0);return Yi=Nc=null,Wt.H=E,Wt.A=R,Ht=y,un!==null?0:(An=null,Tn=0,We(),Bn)}function ml(){for(;un!==null&&!_S();)Vv(un)}function Vv(u){var f=Ee(u.alternate,u,mo);u.memoizedProps=u.pendingProps,f===null?gd(u):un=f}function om(u){var f=u,y=f.alternate;switch(f.tag){case 15:case 0:f=ad(y,f,f.pendingProps,f.type,void 0,Tn);break;case 11:f=ad(y,f,f.pendingProps,f.type.render,f.ref,Tn);break;case 5:$(f);default:Iv(y,f),f=un=yl(f,mo),f=Ee(y,f,mo)}u.memoizedProps=u.pendingProps,f===null?gd(u):un=f}function vc(u,f,y,E){Yi=Nc=null,$(f),qo=null,Ba=0;var R=f.return;try{if(nd(u,R,f,y,Tn)){Bn=1,sc(u,oe(y,u.current)),un=null;return}}catch(U){if(R!==null)throw un=R,U;Bn=1,sc(u,oe(y,u.current)),un=null;return}f.flags&32768?(qn||E===1?u=!0:_a||(Tn&536870912)!==0?u=!1:(ai=u=!0,(E===2||E===3||E===6)&&(E=ya.current,E!==null&&E.tag===13&&(E.flags|=16384))),Mr(f,u)):gd(f)}function gd(u){var f=u;do{if((f.flags&32768)!==0){Mr(f,ai);return}u=f.return;var y=B0(f.alternate,f,mo);if(y!==null){un=y;return}if(f=f.sibling,f!==null){un=f;return}un=f=u}while(f!==null);Bn===0&&(Bn=5)}function Mr(u,f){do{var y=z0(u.alternate,u);if(y!==null){y.flags&=32767,un=y;return}if(y=u.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(u=u.sibling,u!==null)){un=u;return}un=u=y}while(u!==null);Bn=6,un=null}function bi(u,f,y,E,R,U,ee,ce,_e,He){var ut=Wt.T,_t=pr();try{Zr(2),Wt.T=null,Pn(u,f,y,E,_t,R,U,ee,ce,_e,He)}finally{Wt.T=ut,Zr(_t)}}function Pn(u,f,y,E,R,U,ee,ce){do wr();while(Nl!==null);if((Ht&6)!==0)throw Error(r(327));var _e=u.finishedWork;if(E=u.finishedLanes,_e===null)return null;if(u.finishedWork=null,u.finishedLanes=0,_e===u.current)throw Error(r(177));u.callbackNode=null,u.callbackPriority=0,u.cancelPendingCommit=null;var He=_e.lanes|_e.childLanes;if(He|=Zh,W(u,E,He,U,ee,ce),u===An&&(un=An=null,Tn=0),(_e.subtreeFlags&10256)===0&&(_e.flags&10256)===0||Ha||(Ha=!0,Vm=He,ku=y,vd(Am,function(){return wr(),null})),y=(_e.flags&15990)!==0,(_e.subtreeFlags&15990)!==0||y?(y=Wt.T,Wt.T=null,U=pr(),Zr(2),ee=Ht,Ht|=4,Ph(u,_e),hc(_e,u),Kv(u.containerInfo),u.current=_e,em(u,_e.alternate,_e),SS(),Ht=ee,Zr(U),Wt.T=y):u.current=_e,Ha?(Ha=!1,Nl=u,Uu=E):gl(u,He),He=u.pendingLanes,He===0&&(xa=null),H(_e.stateNode),Je(u),f!==null)for(R=u.onRecoverableError,_e=0;_e<f.length;_e++)He=f[_e],R(He.value,{componentStack:He.stack});return(Uu&3)!==0&&wr(),He=u.pendingLanes,(E&4194218)!==0&&(He&42)!==0?u===gs?Vu++:(Vu=0,gs=u):Vu=0,zt(0),null}function gl(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,Oo(f)))}function wr(){if(Nl!==null){var u=Nl,f=Vm;Vm=0;var y=fe(Uu),E=32>y?32:y;y=Wt.T;var R=pr();try{if(Zr(E),Wt.T=null,Nl===null)var U=!1;else{E=ku,ku=null;var ee=Nl,ce=Uu;if(Nl=null,Uu=0,(Ht&6)!==0)throw Error(r(331));var _e=Ht;if(Ht|=4,dd(ee.current),im(ee,ee.current,ce,E),Ht=_e,zt(0,!1),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(Kh,ee)}catch{}U=!0}return U}finally{Zr(R),Wt.T=y,gl(u,f)}}return!1}function lm(u,f,y){f=oe(y,f),f=ac(u.stateNode,f,2),u=at(u,f,2),u!==null&&(z(u,2),Je(u))}function Dn(u,f,y){if(u.tag===3)lm(u,u,y);else for(;f!==null;){if(f.tag===3){lm(f,u,y);break}else if(f.tag===1){var E=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(xa===null||!xa.has(E))){u=oe(y,u),y=ro(2),E=at(f,y,2),E!==null&&(vu(y,E,f,u),z(E,2),Je(E));break}}f=f.return}}function cm(u,f,y){var E=u.pingCache;if(E===null){E=u.pingCache=new Nn;var R=new Set;E.set(f,R)}else R=E.get(f),R===void 0&&(R=new Set,E.set(f,R));R.has(y)||(Rl=!0,R.add(y),u=Y0.bind(null,u,f,y),f.then(u,u))}function Y0(u,f,y){var E=u.pingCache;E!==null&&E.delete(f),u.pingedLanes|=u.suspendedLanes&y,u.warmLanes&=~y,An===u&&(Tn&y)===y&&(Bn===4||Bn===3&&(Tn&62914560)===Tn&&300>zr()-Xo?(Ht&2)===0&&lo(u,0):ts|=y,Dl===Tn&&(Dl=0)),Je(u)}function xu(u,f){f===0&&(f=N()),u=Ve(u,f),u!==null&&(z(u,f),Je(u))}function Eu(u){var f=u.memoizedState,y=0;f!==null&&(y=f.retryLane),xu(u,y)}function Bv(u,f){var y=0;switch(u.tag){case 13:var E=u.stateNode,R=u.memoizedState;R!==null&&(y=R.retryLane);break;case 19:E=u.stateNode;break;case 22:E=u.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(f),xu(u,y)}function vd(u,f){return Xh(u,f)}function zv(u,f,y,E){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vl(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Qr(u,f){var y=u.alternate;return y===null?(y=t(u.tag,f,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=f,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&31457280,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,f=u.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y.refCleanup=u.refCleanup,y}function yl(u,f){u.flags&=31457282;var y=u.alternate;return y===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=y.childLanes,u.lanes=y.lanes,u.child=y.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=y.memoizedProps,u.memoizedState=y.memoizedState,u.updateQueue=y.updateQueue,u.type=y.type,f=y.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function La(u,f,y,E,R,U){var ee=0;if(E=u,typeof u=="function")vl(u)&&(ee=1);else if(typeof u=="string")ee=ha&&Br?py(u,y,Cr.current)?26:Yh(u)?27:5:ha?py(u,y,Cr.current)?26:5:Br&&Yh(u)?27:5;else e:switch(u){case Hh:return _l(y.children,R,U,f);case qv:ee=8,R|=24;break;case Yv:return u=t(12,y,f,R|2),u.elementType=Yv,u.lanes=U,u;case hm:return u=t(13,y,f,R),u.elementType=hm,u.lanes=U,u;case Sc:return u=t(19,y,f,R),u.elementType=Sc,u.lanes=U,u;case Sd:return um(y,R,U,f);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case K0:case Bo:ee=10;break e;case _c:ee=9;break e;case Gh:ee=11;break e;case _d:ee=14;break e;case uo:ee=16,E=null;break e}ee=29,y=Error(r(130,u===null?"null":typeof u,"")),E=null}return f=t(ee,y,f,R),f.elementType=u,f.type=E,f.lanes=U,f}function _l(u,f,y,E){return u=t(7,u,E,f),u.lanes=y,u}function um(u,f,y,E){u=t(22,u,E,f),u.elementType=Sd,u.lanes=y;var R={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var U=R._current;if(U===null)throw Error(r(456));if((R._pendingVisibility&2)===0){var ee=Ve(U,2);ee!==null&&(R._pendingVisibility|=2,Kr(ee,U,2))}},attach:function(){var U=R._current;if(U===null)throw Error(r(456));if((R._pendingVisibility&2)!==0){var ee=Ve(U,2);ee!==null&&(R._pendingVisibility&=-3,Kr(ee,U,2))}}};return u.stateNode=R,u}function yc(u,f,y){return u=t(6,u,null,f),u.lanes=y,u}function Fh(u,f,y){return f=t(4,u.children!==null?u.children:[],u.key,f),f.lanes=y,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}function Tu(u,f,y,E,R,U,ee,ce){this.tag=1,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Cu,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=O(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O(0),this.hiddenUpdates=O(null),this.identifierPrefix=E,this.onUncaughtError=R,this.onCaughtError=U,this.onRecoverableError=ee,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function Ar(u,f,y,E,R,U,ee,ce,_e,He,ut,_t){return u=new Tu(u,f,y,ee,ce,_e,He,_t),f=1,U===!0&&(f|=24),U=t(3,null,null,f),u.current=U,U.stateNode=u,f=fl(),f.refCount++,u.pooledCache=f,f.refCount++,U.memoizedState={element:E,isDehydrated:y,cache:f},Ct(U),u}function yd(u){return u?(u=Du,u):Du}function Fv(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=S(f),u=u!==null?M(u):null,u===null?null:jh(u.stateNode)}function W0(u,f,y,E,R,U){R=yd(R),E.context===null?E.context=R:E.pendingContext=R,E=Ze(f),E.payload={element:y},U=U===void 0?null:U,U!==null&&(E.callback=U),y=at(u,E,f),y!==null&&(Kr(y,u,f),Nt(y,u,f))}function X0(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<f?y:f}}function Hv(u,f){X0(u,f),(u=u.alternate)&&X0(u,f)}var Ft={},Gv=cv(),kr=W$(),Mu=Object.assign,jv=Symbol.for("react.element"),Sl=Symbol.for("react.transitional.element"),co=Symbol.for("react.portal"),Hh=Symbol.for("react.fragment"),qv=Symbol.for("react.strict_mode"),Yv=Symbol.for("react.profiler"),K0=Symbol.for("react.provider"),_c=Symbol.for("react.consumer"),Bo=Symbol.for("react.context"),Gh=Symbol.for("react.forward_ref"),hm=Symbol.for("react.suspense"),Sc=Symbol.for("react.suspense_list"),_d=Symbol.for("react.memo"),uo=Symbol.for("react.lazy"),Sd=Symbol.for("react.offscreen"),Q0=Symbol.for("react.memo_cache_sentinel"),Wv=Symbol.iterator,wu=Symbol.for("react.client.reference"),Wt=Gv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fm,Xv,bc=!1,xc=Array.isArray,dm=e.rendererVersion,bd=e.rendererPackageName,xd=e.extraDevToolsConfig,jh=e.getPublicInstance,Au=e.getRootHostContext,Z0=e.getChildHostContext,Ec=e.prepareForCommit,Kv=e.resetAfterCommit,Qv=e.createInstance,zo=e.appendInitialChild,bl=e.finalizeInitialChildren,Tc=e.shouldSetTextContent,pm=e.createTextInstance,Zv=e.scheduleTimeout,Ed=e.cancelTimeout,Cu=e.noTimeout,Fo=e.isPrimaryRenderer;e.warnsIfNotActing;var Vr=e.supportsMutation,ca=e.supportsPersistence,ds=e.supportsHydration,Jv=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var $v=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Zr=e.setCurrentUpdatePriority,pr=e.getCurrentUpdatePriority,Ua=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Mc=e.shouldAttemptEagerTransition,ey=e.detachDeletedInstance;e.requestPostPaintCallback;var J0=e.maySuspendCommit,xl=e.preloadInstance,ua=e.startSuspendingCommit,Hi=e.suspendInstance,mm=e.waitForCommitToBeReady,Ps=e.NotPendingTransition,Jt=e.HostTransitionContext,fi=e.resetFormInstance;e.bindToConsole;var ar=e.supportsMicrotasks,gm=e.scheduleMicrotask,Ho=e.supportsTestSelectors,Ru=e.findFiberRoot,vm=e.getBoundingRect,Td=e.getTextContent,Go=e.isHiddenSubtree,uM=e.matchAccessibilityRole,Gi=e.setFocusIfFocusable,ty=e.setupIntersectionObserver,ny=e.appendChild,$0=e.appendChildToContainer,eS=e.commitTextUpdate,hM=e.commitMount,iy=e.commitUpdate,ry=e.insertBefore,sy=e.insertInContainerBefore,ps=e.removeChild,Ki=e.removeChildFromContainer,Md=e.resetTextContent,wd=e.hideInstance,ym=e.hideTextInstance,ay=e.unhideInstance,El=e.unhideTextInstance,_m=e.clearContainer,oy=e.cloneInstance,Sm=e.createContainerChildSet,ly=e.appendChildToContainerChildSet,tS=e.finalizeContainerChildren,cy=e.replaceContainerChildren,uy=e.cloneHiddenInstance,hy=e.cloneHiddenTextInstance,bm=e.isSuspenseInstancePending,Ad=e.isSuspenseInstanceFallback,nS=e.getSuspenseInstanceFallbackErrorDetails,fM=e.registerSuspenseInstanceRetry,iS=e.canHydrateFormStateMarker,rS=e.isFormStateMarkerMatching,fy=e.getNextHydratableSibling,xm=e.getFirstHydratableChild,sS=e.getFirstHydratableChildWithinContainer,aS=e.getFirstHydratableChildWithinSuspenseInstance,oS=e.canHydrateInstance,lS=e.canHydrateTextInstance,cS=e.canHydrateSuspenseInstance,dM=e.hydrateInstance,uS=e.hydrateTextInstance,qh=e.hydrateSuspenseInstance,hS=e.getNextHydratableInstanceAfterSuspenseInstance,Em=e.commitHydratedContainer,Tm=e.commitHydratedSuspenseInstance,fS=e.clearSuspenseBoundary,dy=e.clearSuspenseBoundaryFromContainer,dS=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var pS=e.validateHydratableInstance,mS=e.validateHydratableTextInstance,ha=e.supportsResources,py=e.isHostHoistableType,Mm=e.getHoistableRoot,wm=e.getResource,my=e.acquireResource,gy=e.releaseResource,vy=e.hydrateHoistable,yy=e.mountHoistable,_y=e.unmountHoistable,pM=e.createHoistableInstance,Sy=e.prepareToCommitHoistables,gS=e.mayResourceSuspendCommit,by=e.preloadResource,xy=e.suspendResource,Br=e.supportsSingletons,Ey=e.resolveSingletonInstance,mM=e.clearSingleton,gM=e.acquireSingletonInstance,vS=e.releaseSingletonInstance,Yh=e.isHostSingletonType,Cd=[],Tl=-1,Du={},Ls=Math.clz32?Math.clz32:I,Rd=Math.log,yS=Math.LN2,Wh=128,Dd=4194304,Xh=kr.unstable_scheduleCallback,Nd=kr.unstable_cancelCallback,_S=kr.unstable_shouldYield,SS=kr.unstable_requestPaint,zr=kr.unstable_now,Ty=kr.unstable_ImmediatePriority,bS=kr.unstable_UserBlockingPriority,Am=kr.unstable_NormalPriority,Cm=kr.unstable_IdlePriority,xS=kr.log,My=kr.unstable_setDisableYieldValue,Kh=null,Us=null,fa=typeof Object.is=="function"?Object.is:J,Rm=new WeakMap,Ri=[],ji=0,Id=null,Od=0,da=[],pa=0,ho=null,jo=1,ka="",Cr=w(null),Pd=w(null),fo=w(null),Qh=w(null),Jr=null,Fr=null,qn=!1,ma=null,Va=!1,Ld=Error(r(519)),ga=[],wc=0,Zh=0,Jh=null,Nu=null,Ud=!1,kd=!1,po=!1,Ac=0,Vd=null,Dm=0,ks=0,Cc=null,Ml=!1,$h=!1,Bd=Object.prototype.hasOwnProperty,ci=Error(r(460)),wy=Error(r(474)),Nm={then:function(){}},Iu=null,qo=null,Ba=0,Rc=as(!0),Ay=as(!1),Yo=w(null),va=w(0),ya=w(null),za=null,or=w(0),Wo=0,gn=null,Jn=null,Qi=null,Fa=!1,Di=!1,wl=!1,zd=0,qi=0,ef=null,ES=0,Im=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Yn={readContext:wi,use:ge,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn};Yn.useCacheRefresh=hn,Yn.useMemoCache=hn,Yn.useHostTransitionStatus=hn,Yn.useFormState=hn,Yn.useActionState=hn,Yn.useOptimistic=hn;var lr={readContext:wi,use:ge,useCallback:function(u,f){return me().memoizedState=[u,f===void 0?null:f],u},useContext:wi,useEffect:xh,useImperativeHandle:function(u,f,y){y=y!=null?y.concat([u]):null,fu(4194308,4,du.bind(null,f,u),y)},useLayoutEffect:function(u,f){return fu(4194308,4,u,f)},useInsertionEffect:function(u,f){fu(4,2,u,f)},useMemo:function(u,f){var y=me();f=f===void 0?null:f;var E=u();if(wl){K(!0);try{u()}finally{K(!1)}}return y.memoizedState=[E,f],E},useReducer:function(u,f,y){var E=me();if(y!==void 0){var R=y(f);if(wl){K(!0);try{y(f)}finally{K(!1)}}}else R=f;return E.memoizedState=E.baseState=R,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:R},E.queue=u,u=u.dispatch=Ao.bind(null,gn,u),[E.memoizedState,u]},useRef:function(u){var f=me();return u={current:u},f.memoizedState=u},useState:function(u){u=Kt(u);var f=u.queue,y=Eh.bind(null,gn,f);return f.dispatch=y,[u.memoizedState,y]},useDebugValue:pu,useDeferredValue:function(u,f){var y=me();return Ia(y,u,f)},useTransition:function(){var u=Kt(!1);return u=mu.bind(null,gn,u.queue,!0,!1),me().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,y){var E=gn,R=me();if(qn){if(y===void 0)throw Error(r(407));y=y()}else{if(y=f(),An===null)throw Error(r(349));(Tn&60)!==0||Ut(E,f,y)}R.memoizedState=y;var U={value:y,getSnapshot:f};return R.queue=U,xh(kn.bind(null,E,U,u),[u]),E.flags|=2048,Xi(9,fn.bind(null,E,U,y,f),{destroy:void 0},null),y},useId:function(){var u=me(),f=An.identifierPrefix;if(qn){var y=ka,E=jo;y=(E&~(1<<32-Ls(E)-1)).toString(32)+y,f=":"+f+"R"+y,y=zd++,0<y&&(f+="H"+y.toString(32)),f+=":"}else y=ES++,f=":"+f+"r"+y.toString(32)+":";return u.memoizedState=f},useCacheRefresh:function(){return me().memoizedState=hi.bind(null,gn)}};lr.useMemoCache=Ke,lr.useHostTransitionStatus=ra,lr.useFormState=sr,lr.useActionState=sr,lr.useOptimistic=function(u){var f=me();f.memoizedState=f.baseState=u;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=gu.bind(null,gn,!0,y),y.dispatch=f,[u,f]};var $r={readContext:wi,use:ge,useCallback:ia,useContext:wi,useEffect:nc,useImperativeHandle:Na,useInsertionEffect:td,useLayoutEffect:ll,useMemo:cl,useReducer:Mt,useRef:cs,useState:function(){return Mt(dt)},useDebugValue:pu,useDeferredValue:function(u,f){var y=be();return ic(y,Jn.memoizedState,u,f)},useTransition:function(){var u=Mt(dt)[0],f=be().memoizedState;return[typeof u=="boolean"?u:we(u),f]},useSyncExternalStore:Gt,useId:sa};$r.useCacheRefresh=rc,$r.useMemoCache=Ke,$r.useHostTransitionStatus=ra,$r.useFormState=xr,$r.useActionState=xr,$r.useOptimistic=function(u,f){var y=be();return Et(y,Jn,u,f)};var Dc={readContext:wi,use:ge,useCallback:ia,useContext:wi,useEffect:nc,useImperativeHandle:Na,useInsertionEffect:td,useLayoutEffect:ll,useMemo:cl,useReducer:Pt,useRef:cs,useState:function(){return Pt(dt)},useDebugValue:pu,useDeferredValue:function(u,f){var y=be();return Jn===null?Ia(y,u,f):ic(y,Jn.memoizedState,u,f)},useTransition:function(){var u=Pt(dt)[0],f=be().memoizedState;return[typeof u=="boolean"?u:we(u),f]},useSyncExternalStore:Gt,useId:sa};Dc.useCacheRefresh=rc,Dc.useMemoCache=Ke,Dc.useHostTransitionStatus=ra,Dc.useFormState=ol,Dc.useActionState=ol,Dc.useOptimistic=function(u,f){var y=be();return Jn!==null?Et(y,Jn,u,f):(y.baseState=u,[u,y.queue.dispatch])};var Om={isMounted:function(u){return(u=u._reactInternals)?g(u)===u:!1},enqueueSetState:function(u,f,y){u=u._reactInternals;var E=fs(),R=Ze(E);R.payload=f,y!=null&&(R.callback=y),f=at(u,R,E),f!==null&&(Kr(f,u,E),Nt(f,u,E))},enqueueReplaceState:function(u,f,y){u=u._reactInternals;var E=fs(),R=Ze(E);R.tag=1,R.payload=f,y!=null&&(R.callback=y),f=at(u,R,E),f!==null&&(Kr(f,u,E),Nt(f,u,E))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var y=fs(),E=Ze(y);E.tag=2,f!=null&&(E.callback=f),f=at(u,E,y),f!==null&&(Kr(f,u,y),Nt(f,u,y))}},Cy=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},TS=Error(r(461)),Zi=!1,es={dehydrated:null,treeContext:null,retryLane:0},Vs=w(null),Nc=null,Yi=null,MS=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(y,E){u.push(E)}};this.abort=function(){f.aborted=!0,u.forEach(function(y){return y()})}},Al=kr.unstable_scheduleCallback,Ou=kr.unstable_NormalPriority,ri={$$typeof:Bo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Pm=Wt.S;Wt.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&ke(u,f),Pm!==null&&Pm(u,f)};var Cl=w(null),mr=!1,Ui=!1,Ic=!1,tf=typeof WeakSet=="function"?WeakSet:Set,Wi=null,Pu=!1,Ji=null,Bs=!1,ms=null,Lu=8192,Lm={getCacheForType:function(u){var f=wi(ri),y=f.data.get(u);return y===void 0&&(y=u(),f.data.set(u,y)),y}},Fd=0,Um=1,km=2,Vn=3,si=4;if(typeof Symbol=="function"&&Symbol.for){var vn=Symbol.for;Fd=vn("selector.component"),Um=vn("selector.has_pseudo_class"),km=vn("selector.role"),Vn=vn("selector.test_id"),si=vn("selector.text")}var Nn=typeof WeakMap=="function"?WeakMap:Map,Ht=0,An=null,un=null,Tn=0,di=0,$i=null,ai=!1,_a=!1,Rl=!1,mo=0,Bn=0,Sa=0,go=0,ts=0,zs=0,Dl=0,nf=null,ba=null,rf=!1,Xo=0,ki=1/0,vo=null,xa=null,Ha=!1,Nl=null,Uu=0,Vm=0,ku=null,Vu=0,gs=null;return Ft.attemptContinuousHydration=function(u){if(u.tag===13){var f=Ve(u,67108864);f!==null&&Kr(f,u,67108864),Hv(u,67108864)}},Ft.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var f=fs(),y=Ve(u,f);y!==null&&Kr(y,u,f),Hv(u,f)}},Ft.attemptSynchronousHydration=function(u){switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var f=L(u.pendingLanes);if(f!==0){for(u.pendingLanes|=2,u.entangledLanes|=2;f;){var y=1<<31-Ls(f);u.entanglements[1]|=y,f&=~y}Je(u),(Ht&6)===0&&(ki=zr()+500,zt(0))}}break;case 13:f=Ve(u,2),f!==null&&Kr(f,u,2),kv(),Hv(u,2)}},Ft.batchedUpdates=function(u,f){return u(f)},Ft.createComponentSelector=function(u){return{$$typeof:Fd,value:u}},Ft.createContainer=function(u,f,y,E,R,U,ee,ce,_e,He){return Ar(u,f,!1,null,y,E,U,ee,ce,_e,He,null)},Ft.createHasPseudoClassSelector=function(u){return{$$typeof:Um,value:u}},Ft.createHydrationContainer=function(u,f,y,E,R,U,ee,ce,_e,He,ut,_t,Tt){return u=Ar(y,E,!0,u,R,U,ce,_e,He,ut,_t,Tt),u.context=yd(null),y=u.current,E=fs(),R=Ze(E),R.callback=f??null,at(y,R,E),u.current.lanes=E,z(u,E),Je(u),u},Ft.createPortal=function(u,f,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:co,key:E==null?null:""+E,children:u,containerInfo:f,implementation:y}},Ft.createRoleSelector=function(u){return{$$typeof:km,value:u}},Ft.createTestNameSelector=function(u){return{$$typeof:Vn,value:u}},Ft.createTextSelector=function(u){return{$$typeof:si,value:u}},Ft.defaultOnCaughtError=function(u){console.error(u)},Ft.defaultOnRecoverableError=function(u){Cy(u)},Ft.defaultOnUncaughtError=function(u){Cy(u)},Ft.deferredUpdates=function(u){var f=Wt.T,y=pr();try{return Zr(32),Wt.T=null,u()}finally{Zr(y),Wt.T=f}},Ft.discreteUpdates=function(u,f,y,E,R){var U=Wt.T,ee=pr();try{return Zr(2),Wt.T=null,u(f,y,E,R)}finally{Zr(ee),Wt.T=U,Ht===0&&(ki=zr()+500)}},Ft.findAllNodes=hs,Ft.findBoundingRects=function(u,f){if(!Ho)throw Error(r(363));f=hs(u,f),u=[];for(var y=0;y<f.length;y++)u.push(vm(f[y]));for(f=u.length-1;0<f;f--){y=u[f];for(var E=y.x,R=E+y.width,U=y.y,ee=U+y.height,ce=f-1;0<=ce;ce--)if(f!==ce){var _e=u[ce],He=_e.x,ut=He+_e.width,_t=_e.y,Tt=_t+_e.height;if(E>=He&&U>=_t&&R<=ut&&ee<=Tt){u.splice(f,1);break}else if(E!==He||y.width!==_e.width||Tt<U||_t>ee){if(!(U!==_t||y.height!==_e.height||ut<E||He>R)){He>E&&(_e.width+=He-E,_e.x=E),ut<R&&(_e.width=R-He),u.splice(f,1);break}}else{_t>U&&(_e.height+=_t-U,_e.y=U),Tt<ee&&(_e.height=ee-_t),u.splice(f,1);break}}}return u},Ft.findHostInstance=Fv,Ft.findHostInstanceWithNoPortals=function(u){return u=S(u),u=u!==null?C(u):null,u===null?null:jh(u.stateNode)},Ft.findHostInstanceWithWarning=function(u){return Fv(u)},Ft.flushPassiveEffects=wr,Ft.flushSyncFromReconciler=function(u){var f=Ht;Ht|=1;var y=Wt.T,E=pr();try{if(Zr(2),Wt.T=null,u)return u()}finally{Zr(E),Wt.T=y,Ht=f,(Ht&6)===0&&zt(0)}},Ft.flushSyncWork=kv,Ft.focusWithin=function(u,f){if(!Ho)throw Error(r(363));for(u=sm(u),f=j0(u,f),f=Array.from(f),u=0;u<f.length;){var y=f[u++],E=y.tag;if(!Go(y)){if((E===5||E===26||E===27)&&Gi(y.stateNode))return!0;for(y=y.child;y!==null;)f.push(y),y=y.sibling}}return!1},Ft.getFindAllNodesFailureDescription=function(u,f){if(!Ho)throw Error(r(363));var y=0,E=[];u=[sm(u),0];for(var R=0;R<u.length;){var U=u[R++],ee=U.tag,ce=u[R++],_e=f[ce];if((ee!==5&&ee!==26&&ee!==27||!Go(U))&&(Bh(U,_e)&&(E.push(gc(_e)),ce++,ce>y&&(y=ce)),ce<f.length))for(U=U.child;U!==null;)u.push(U,ce),U=U.sibling}if(y<f.length){for(u=[];y<f.length;y++)u.push(gc(f[y]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},Ft.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 27:case 5:return jh(u.child.stateNode);default:return u.child.stateNode}},Ft.injectIntoDevTools=function(){var u={bundleType:0,version:dm,rendererPackageName:bd,currentDispatcherRef:Wt,findFiberByHostInstance:Jv,reconcilerVersion:"19.0.0"};if(xd!==null&&(u.rendererConfig=xd),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)u=!0;else{try{Kh=f.inject(u),Us=f}catch{}u=!!f.checkDCE}}return u},Ft.isAlreadyRendering=function(){return!1},Ft.observeVisibleRects=function(u,f,y,E){if(!Ho)throw Error(r(363));u=hs(u,f);var R=ty(u,y,E).disconnect;return{disconnect:function(){R()}}},Ft.shouldError=function(){return null},Ft.shouldSuspend=function(){return!1},Ft.startHostTransition=function(u,f,y,E){if(u.tag!==5)throw Error(r(476));var R=ul(u).queue;mu(u,R,f,Ps,y===null?n:function(){var U=ul(u).next.queue;return no(u,U,{},fs()),y(E)})},Ft.updateContainer=function(u,f,y,E){var R=f.current,U=fs();return W0(R,U,u,f,y,E),U},Ft.updateContainerSync=function(u,f,y,E){return f.tag===0&&wr(),W0(f.current,2,u,f,y,E),2},Ft},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(h1)),h1.exports}var CO;function K$(){return CO||(CO=1,u1.exports=X$()),u1.exports}var Q$=K$();const Z$=XE(Q$);var p1={exports:{}},m1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RO;function J$(){return RO||(RO=1,(function(i){function e(H,K){var J=H.length;H.push(K);e:for(;0<J;){var oe=J-1>>>1,se=H[oe];if(0<r(se,K))H[oe]=K,H[J]=se,J=oe;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var K=H[0],J=H.pop();if(J!==K){H[0]=J;e:for(var oe=0,se=H.length,Z=se>>>1;oe<Z;){var le=2*(oe+1)-1,Ce=H[le],Te=le+1,Ye=H[Te];if(0>r(Ce,J))Te<se&&0>r(Ye,Ce)?(H[oe]=Ye,H[Te]=J,oe=Te):(H[oe]=Ce,H[le]=J,oe=le);else if(Te<se&&0>r(Ye,J))H[oe]=Ye,H[Te]=J,oe=Te;else break e}}return K}function r(H,K){var J=H.sortIndex-K.sortIndex;return J!==0?J:H.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var h=[],d=[],m=1,g=null,_=3,S=!1,M=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function I(H){for(var K=t(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=H)n(d),K.sortIndex=K.expirationTime,e(h,K);else break;K=t(d)}}function L(H){if(C=!1,I(H),!M)if(t(h)!==null)M=!0,he();else{var K=t(d);K!==null&&fe(L,K.startTime-H)}}var j=!1,Y=-1,k=5,V=-1;function N(){return!(i.unstable_now()-V<k)}function O(){if(j){var H=i.unstable_now();V=H;var K=!0;try{e:{M=!1,C&&(C=!1,T(Y),Y=-1),S=!0;var J=_;try{t:{for(I(H),g=t(h);g!==null&&!(g.expirationTime>H&&N());){var oe=g.callback;if(typeof oe=="function"){g.callback=null,_=g.priorityLevel;var se=oe(g.expirationTime<=H);if(H=i.unstable_now(),typeof se=="function"){g.callback=se,I(H),K=!0;break t}g===t(h)&&n(h),I(H)}else n(h);g=t(h)}if(g!==null)K=!0;else{var Z=t(d);Z!==null&&fe(L,Z.startTime-H),K=!1}}break e}finally{g=null,_=J,S=!1}K=void 0}}finally{K?z():j=!1}}}var z;if(typeof D=="function")z=function(){D(O)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,q=W.port2;W.port1.onmessage=O,z=function(){q.postMessage(null)}}else z=function(){w(O,0)};function he(){j||(j=!0,z())}function fe(H,K){Y=w(function(){H(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){M||S||(M=!0,he())},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return t(h)},i.unstable_next=function(H){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var J=_;_=K;try{return H()}finally{_=J}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var J=_;_=H;try{return K()}finally{_=J}},i.unstable_scheduleCallback=function(H,K,J){var oe=i.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?oe+J:oe):J=oe,H){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=J+se,H={id:m++,callback:K,priorityLevel:H,startTime:J,expirationTime:se,sortIndex:-1},J>oe?(H.sortIndex=J,e(d,H),t(h)===null&&H===t(d)&&(C?(T(Y),Y=-1):C=!0,fe(L,J-oe))):(H.sortIndex=se,e(h,H),M||S||(M=!0,he())),H},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(H){var K=_;return function(){var J=_;_=K;try{return H.apply(this,arguments)}finally{_=J}}}})(m1)),m1}var DO;function $$(){return DO||(DO=1,p1.exports=J$()),p1.exports}var NO=$$();function NR(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const r=NR(n,e,t);if(r)return r;n=e?null:n.sibling}}function K4(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const IR=K4(ne.createContext(null));class Q4 extends ne.Component{render(){return ne.createElement(IR.Provider,{value:this._reactInternals},this.props.children)}}function Z4(){const i=ne.useContext(IR);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ne.useId();return ne.useMemo(()=>{for(const t of[i,i?.alternate]){if(!t)continue;const n=NR(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(n)return n}},[i,e])}const eee=Symbol.for("react.context"),tee=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===eee;function nee(){const i=Z4(),[e]=ne.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;tee(n)&&n!==IR&&!e.has(n)&&e.set(n,ne.use(K4(n))),t=t.return}return e}function iee(){const i=nee();return ne.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>ne.createElement(e,null,ne.createElement(t.Provider,{...n,value:i.get(t)})),e=>ne.createElement(Q4,{...e})),[i])}function J4(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const $4=i=>i&&i.isOrthographicCamera,ree=i=>i&&i.hasOwnProperty("current"),see=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),I0=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?ne.useLayoutEffect:ne.useEffect;function eV(i){const e=ne.useRef(i);return I0(()=>void(e.current=i),[i]),e}function aee(){const i=Z4(),e=iee();return ne.useMemo(()=>({children:t})=>{const r=!!NR(i,!0,s=>s.type===ne.StrictMode)?ne.StrictMode:ne.Fragment;return B.jsx(r,{children:B.jsx(e,{children:t})})},[i,e])}function oee({set:i}){return I0(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const lee=(i=>(i=class extends ne.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function tV(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function dg(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const er={obj:i=>i===Object(i)&&!er.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(er.str(i)||er.num(i)||er.boo(i))return i===e;const s=er.obj(i);if(s&&n==="reference")return i===e;const o=er.arr(i);if(o&&t==="reference")return i===e;if((o||s)&&i===e)return!0;let c;for(c in i)if(!(c in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(c in r?e:i)if(!er.equ(i[c],e[c],{strict:r,objects:"reference"}))return!1}else for(c in r?e:i)if(i[c]!==e[c])return!1;if(er.und(c)){if(o&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function cee(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const nV=["children","key","ref"];function uee(i){const e={};for(const t in i)nV.includes(t)||(e[t]=i[t]);return e}function IE(i,e,t,n){const r=i;let s=r?.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:uee(n),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=s)),s}function a0(i,e){let t=i[e];if(!e.includes("-"))return{root:i,key:e,target:t};t=i;for(const r of e.split("-")){var n;e=r,i=t,t=(n=t)==null?void 0:n[e]}return{root:i,key:e,target:t}}const IO=/-\d+$/;function OE(i,e){if(er.str(e.props.attach)){if(IO.test(e.props.attach)){const r=e.props.attach.replace(IO,""),{root:s,key:o}=a0(i.object,r);Array.isArray(s[o])||(s[o]=[])}const{root:t,key:n}=a0(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else er.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function PE(i,e){if(er.str(e.props.attach)){const{root:t,key:n}=a0(i.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[n]:t[n]=r}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const TA=[...nV,"args","dispose","attach","object","onUpdate","dispose"],OO=new Map;function hee(i){let e=OO.get(i.constructor);try{e||(e=new i.constructor,OO.set(i.constructor,e))}catch{}return e}function fee(i,e){const t={};for(const n in e)if(!TA.includes(n)&&!er.equ(e[n],i.props[n])){t[n]=e[n];for(const r in e)r.startsWith(`${n}-`)&&(t[r]=e[r])}for(const n in i.props){if(TA.includes(n)||e.hasOwnProperty(n))continue;const{root:r,key:s}=a0(i.object,n);if(r.constructor&&r.constructor.length===0){const o=hee(r);er.und(o)||(t[s]=o[s])}else t[s]=0}return t}const dee=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],pee=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Af(i,e){var t;const n=i.__r3f,r=n&&J4(n).getState(),s=n?.eventCount;for(const c in e){let h=e[c];if(TA.includes(c))continue;if(n&&pee.test(c)){typeof h=="function"?n.handlers[c]=h:delete n.handlers[c],n.eventCount=Object.keys(n.handlers).length;continue}if(h===void 0)continue;let{root:d,key:m,target:g}=a0(i,c);if(g instanceof Zg&&h instanceof Zg)g.mask=h.mask;else if(g instanceof At&&see(h))g.set(h);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&h!=null&&h.constructor&&g.constructor===h.constructor)g.copy(h);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(h))typeof g.fromArray=="function"?g.fromArray(h):g.set(...h);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof h=="number")typeof g.setScalar=="function"?g.setScalar(h):g.set(h);else{var o;d[m]=h,r&&!r.linear&&dee.includes(m)&&(o=d[m])!=null&&o.isTexture&&d[m].format===Js&&d[m].type===il&&(d[m].colorSpace=Qs)}}if(n!=null&&n.parent&&r!=null&&r.internal&&(t=n.object)!=null&&t.isObject3D&&s!==n.eventCount){const c=n.object,h=r.internal.interaction.indexOf(c);h>-1&&r.internal.interaction.splice(h,1),n.eventCount&&c.raycast!==null&&r.internal.interaction.push(c)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Av(n),i}function Av(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function mee(i,e){i.manual||($4(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const Wa=i=>i?.isObject3D;function Hb(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function iV(i,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(i.delete(n),r.target.releasePointerCapture(n)))}function gee(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{iV(t.capturedMap,e,n,r)})}function vee(i){function e(h){const{internal:d}=i.getState(),m=h.offsetX-d.initialClick[0],g=h.offsetY-d.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function t(h){return h.filter(d=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=d.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function n(h,d){const m=i.getState(),g=new Set,_=[],S=d?d(m.internal.interaction):m.internal.interaction;for(let T=0;T<S.length;T++){const D=dg(S[T]);D&&(D.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(h,m);function M(T){const D=dg(T);if(!D||!D.events.enabled||D.raycaster.camera===null)return[];if(D.raycaster.camera===void 0){var I;D.events.compute==null||D.events.compute(h,D,(I=D.previousRoot)==null?void 0:I.getState()),D.raycaster.camera===void 0&&(D.raycaster.camera=null)}return D.raycaster.camera?D.raycaster.intersectObject(T,!0):[]}let C=S.flatMap(M).sort((T,D)=>{const I=dg(T.object),L=dg(D.object);return!I||!L?T.distance-D.distance:L.events.priority-I.events.priority||T.distance-D.distance}).filter(T=>{const D=Hb(T);return g.has(D)?!1:(g.add(D),!0)});m.events.filter&&(C=m.events.filter(C,m));for(const T of C){let D=T.object;for(;D;){var w;(w=D.__r3f)!=null&&w.eventCount&&_.push({...T,eventObject:D}),D=D.parent}}if("pointerId"in h&&m.internal.capturedMap.has(h.pointerId))for(let T of m.internal.capturedMap.get(h.pointerId).values())g.has(Hb(T.intersection))||_.push(T.intersection);return _}function r(h,d,m,g){if(h.length){const _={stopped:!1};for(const S of h){let M=dg(S.object);if(M||S.object.traverseAncestors(C=>{const w=dg(C);if(w)return M=w,!1}),M){const{raycaster:C,pointer:w,camera:T,internal:D}=M,I=new re(w.x,w.y,0).unproject(T),L=N=>{var O,z;return(O=(z=D.capturedMap.get(N))==null?void 0:z.has(S.eventObject))!=null?O:!1},j=N=>{const O={intersection:S,target:d.target};D.capturedMap.has(N)?D.capturedMap.get(N).set(S.eventObject,O):D.capturedMap.set(N,new Map([[S.eventObject,O]])),d.target.setPointerCapture(N)},Y=N=>{const O=D.capturedMap.get(N);O&&iV(D.capturedMap,S.eventObject,O,N)};let k={};for(let N in d){let O=d[N];typeof O!="function"&&(k[N]=O)}let V={...S,...k,pointer:w,intersections:h,stopped:_.stopped,delta:m,unprojectedPoint:I,ray:C.ray,camera:T,stopPropagation(){const N="pointerId"in d&&D.capturedMap.get(d.pointerId);if((!N||N.has(S.eventObject))&&(V.stopped=_.stopped=!0,D.hovered.size&&Array.from(D.hovered.values()).find(O=>O.eventObject===S.eventObject))){const O=h.slice(0,h.indexOf(S));s([...O,S])}},target:{hasPointerCapture:L,setPointerCapture:j,releasePointerCapture:Y},currentTarget:{hasPointerCapture:L,setPointerCapture:j,releasePointerCapture:Y},nativeEvent:d};if(g(V),_.stopped===!0)break}}}return h}function s(h){const{internal:d}=i.getState();for(const m of d.hovered.values())if(!h.length||!h.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const _=m.eventObject.__r3f;if(d.hovered.delete(Hb(m)),_!=null&&_.eventCount){const S=_.handlers,M={...m,intersections:h};S.onPointerOut==null||S.onPointerOut(M),S.onPointerLeave==null||S.onPointerLeave(M)}}}function o(h,d){for(let m=0;m<d.length;m++){const g=d[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(h)}}function c(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return d=>{const{internal:m}=i.getState();"pointerId"in d&&m.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(d.pointerId)&&(m.capturedMap.delete(d.pointerId),s([]))})}}return function(m){const{onPointerMissed:g,internal:_}=i.getState();_.lastEvent.current=m;const S=h==="onPointerMove",M=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",w=n(m,S?t:void 0),T=M?e(m):0;h==="onPointerDown"&&(_.initialClick=[m.offsetX,m.offsetY],_.initialHits=w.map(I=>I.eventObject)),M&&!w.length&&T<=2&&(o(m,_.interaction),g&&g(m)),S&&s(w);function D(I){const L=I.eventObject,j=L.__r3f;if(!(j!=null&&j.eventCount))return;const Y=j.handlers;if(S){if(Y.onPointerOver||Y.onPointerEnter||Y.onPointerOut||Y.onPointerLeave){const k=Hb(I),V=_.hovered.get(k);V?V.stopped&&I.stopPropagation():(_.hovered.set(k,I),Y.onPointerOver==null||Y.onPointerOver(I),Y.onPointerEnter==null||Y.onPointerEnter(I))}Y.onPointerMove==null||Y.onPointerMove(I)}else{const k=Y[h];k?(!M||_.initialHits.includes(L))&&(o(m,_.interaction.filter(V=>!_.initialHits.includes(V))),k(I)):M&&_.initialHits.includes(L)&&o(m,_.interaction.filter(V=>!_.initialHits.includes(V)))}}r(w,m,T,D)}}return{handlePointer:c}}const PO=i=>!!(i!=null&&i.render),rV=ne.createContext(null),yee=(i,e)=>{const t=q$((c,h)=>{const d=new re,m=new re,g=new re;function _(T=h().camera,D=m,I=h().size){const{width:L,height:j,top:Y,left:k}=I,V=L/j;D.isVector3?g.copy(D):g.set(...D);const N=T.getWorldPosition(d).distanceTo(g);if($4(T))return{width:L/T.zoom,height:j/T.zoom,top:Y,left:k,factor:1,distance:N,aspect:V};{const O=T.fov*Math.PI/180,z=2*Math.tan(O/2)*N,W=z*(L/j);return{width:W,height:z,top:Y,left:k,factor:L/W,distance:N,aspect:V}}}let S;const M=T=>c(D=>({performance:{...D.performance,current:T}})),C=new tt;return{set:c,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(T=1)=>i(h(),T),advance:(T,D)=>e(T,D,h()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new MR,pointer:C,mouse:C,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const T=h();S&&clearTimeout(S),T.performance.current!==T.performance.min&&M(T.performance.min),S=setTimeout(()=>M(h().performance.max),T.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:T=>c(D=>({...D,events:{...D.events,...T}})),setSize:(T,D,I=0,L=0)=>{const j=h().camera,Y={width:T,height:D,top:I,left:L};c(k=>({size:Y,viewport:{...k.viewport,..._(j,m,Y)}}))},setDpr:T=>c(D=>{const I=tV(T);return{viewport:{...D.viewport,dpr:I,initialDpr:D.viewport.initialDpr||I}}}),setFrameloop:(T="always")=>{const D=h().clock;D.stop(),D.elapsedTime=0,T!=="never"&&(D.start(),D.elapsedTime=0),c(()=>({frameloop:T}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:ne.createRef(),active:!1,frames:0,priority:0,subscribe:(T,D,I)=>{const L=h().internal;return L.priority=L.priority+(D>0?1:0),L.subscribers.push({ref:T,priority:D,store:I}),L.subscribers=L.subscribers.sort((j,Y)=>j.priority-Y.priority),()=>{const j=h().internal;j!=null&&j.subscribers&&(j.priority=j.priority-(D>0?1:0),j.subscribers=j.subscribers.filter(Y=>Y.ref!==T))}}}}}),n=t.getState();let r=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:c,size:h,viewport:d,gl:m,set:g}=t.getState();if(h.width!==r.width||h.height!==r.height||d.dpr!==s){r=h,s=d.dpr,mee(c,h),d.dpr>0&&m.setPixelRatio(d.dpr);const _=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(h.width,h.height,_)}c!==o&&(o=c,g(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>i(c)),t};function sV(){const i=ne.useContext(rV);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function _ee(i=t=>t,e){return sV()(i,e)}function See(i,e=0){const t=sV(),n=t.getState().internal.subscribe,r=eV(i);return I0(()=>n(r,e,t),[e,n,t]),null}function bee(i){const e=Z$(i);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ne.version}),e}const aV=0,tv={},xee=/^three(?=[A-Z])/,eM=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let Eee=0;const Tee=i=>typeof i=="function";function Mee(i){if(Tee(i)){const e=`${Eee++}`;return tv[e]=i,e}else Object.assign(tv,i)}function oV(i,e){const t=eM(i),n=tv[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function wee(i,e,t){var n;return i=eM(i)in tv?i:i.replace(xee,""),oV(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,IE(e.object,t,i,e)}function Aee(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?PE(i.parent,i):Wa(i.object)&&(i.object.visible=!1),i.isHidden=!0,Av(i)}}function lV(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?OE(i.parent,i):Wa(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,Av(i)}}function OR(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var r,s;const o=tv[eM(e.type)];e.object=(r=e.props.object)!=null?r:new o(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(Af(e.object,e.props),e.props.attach)OE(i,e);else if(Wa(e.object)&&Wa(i.object)){const o=i.object.children.indexOf(t?.object);if(t&&o!==-1){const c=i.object.children.indexOf(e.object);if(c!==-1){i.object.children.splice(c,1);const h=c<o?o-1:o;i.object.children.splice(h,0,e.object)}else e.object.parent=i.object,i.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const o of e.children)OR(e,o);Av(e)}}function g1(i,e){e&&(e.parent=i,i.children.push(e),OR(i,e))}function LO(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),OR(i,e,t)}function cV(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():NO.unstable_scheduleCallback(NO.unstable_IdlePriority,e)}}function MA(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?PE(i,e):Wa(e.object)&&Wa(i.object)&&(i.object.remove(e.object),gee(J4(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const o=e.children[s];MA(e,o,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&cV(e.object),t===void 0&&Av(e)}function Cee(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const gx=[];function Ree(){for(const[t]of gx){const n=t.parent;if(n){t.props.attach?PE(n,t):Wa(t.object)&&Wa(n.object)&&n.object.remove(t.object);for(const r of t.children)r.props.attach?PE(t,r):Wa(r.object)&&Wa(t.object)&&t.object.remove(r.object)}t.isHidden&&lV(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&cV(t.object)}for(const[t,n,r]of gx){t.props=n;const s=t.parent;if(s){var i,e;const o=tv[eM(t.type)];t.object=(i=t.props.object)!=null?i:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,Cee(r,t.object),Af(t.object,t.props),t.props.attach?OE(s,t):Wa(t.object)&&Wa(s.object)&&s.object.add(t.object);for(const c of t.children)c.props.attach?OE(t,c):Wa(c.object)&&Wa(t.object)&&t.object.add(c.object);Av(t)}}gx.length=0}const v1=()=>{},UO={};let Gb=aV;const Dee=0,Nee=4,wA=bee({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:wee,removeChild:MA,appendChild:g1,appendInitialChild:g1,insertBefore:LO,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||g1(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||MA(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||LO(n,e,t)},getRootHostContext:()=>UO,getChildHostContext:()=>UO,commitUpdate(i,e,t,n,r){var s,o,c;oV(e,n);let h=!1;if((i.type==="primitive"&&t.object!==n.object||((s=n.args)==null?void 0:s.length)!==((o=t.args)==null?void 0:o.length)||(c=n.args)!=null&&c.some((m,g)=>{var _;return m!==((_=t.args)==null?void 0:_[g])}))&&(h=!0),h)gx.push([i,{...n},r]);else{const m=fee(i,n);Object.keys(m).length&&(Object.assign(i.props,m),Af(i.object,m))}(r.sibling===null||(r.flags&Nee)===Dee)&&Ree()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i?.object,prepareForCommit:()=>null,preparePortalMount:i=>IE(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Aee,unhideInstance:lV,createTextInstance:v1,hideTextInstance:v1,unhideTextInstance:v1,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:ne.createContext(null),setCurrentUpdatePriority(i){Gb=i},getCurrentUpdatePriority(){return Gb},resolveUpdatePriority(){var i;if(Gb!==aV)return Gb;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return fx.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return fx.ContinuousEventPriority;default:return fx.DefaultEventPriority}},resetFormInstance(){}}),Op=new Map,pg={objects:"shallow",strict:!1};function Iee(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:r,left:s}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function Oee(i){const e=Op.get(i),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=n||yee(RA,VO),o=t||wA.createContainer(s,fx.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||Op.set(i,{fiber:o,store:s});let c,h,d=!1,m=null;return{async configure(g={}){let _;m=new Promise(Z=>_=Z);let{gl:S,size:M,scene:C,events:w,onCreated:T,shadows:D=!1,linear:I=!1,flat:L=!1,legacy:j=!1,orthographic:Y=!1,frameloop:k="always",dpr:V=[1,2],performance:N,raycaster:O,camera:z,onPointerMissed:W}=g,q=s.getState(),he=q.gl;if(!q.gl){const Z={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},le=typeof S=="function"?await S(Z):S;PO(le)?he=le:he=new X4({...Z,...S}),q.set({gl:he})}let fe=q.raycaster;fe||q.set({raycaster:fe=new z4});const{params:H,...K}=O||{};if(er.equ(K,fe,pg)||Af(fe,{...K}),er.equ(H,fe.params,pg)||Af(fe,{params:{...fe.params,...H}}),!q.camera||q.camera===h&&!er.equ(h,z,pg)){h=z;const Z=z?.isCamera,le=Z?z:Y?new N0(0,0,0,0,.1,1e3):new rs(75,0,.1,1e3);Z||(le.position.z=5,z&&(Af(le,z),le.manual||("aspect"in z||"left"in z||"right"in z||"bottom"in z||"top"in z)&&(le.manual=!0,le.updateProjectionMatrix())),!q.camera&&!(z!=null&&z.rotation)&&le.lookAt(0,0,0)),q.set({camera:le}),fe.camera=le}if(!q.scene){let Z;C!=null&&C.isScene?(Z=C,IE(Z,s,"",{})):(Z=new rR,IE(Z,s,"",{}),C&&Af(Z,C)),q.set({scene:Z})}w&&!q.events.handlers&&q.set({events:w(s)});const J=Iee(i,M);if(er.equ(J,q.size,pg)||q.setSize(J.width,J.height,J.top,J.left),V&&q.viewport.dpr!==tV(V)&&q.setDpr(V),q.frameloop!==k&&q.setFrameloop(k),q.onPointerMissed||q.set({onPointerMissed:W}),N&&!er.equ(N,q.performance,pg)&&q.set(Z=>({performance:{...Z.performance,...N}})),!q.xr){var oe;const Z=(Te,Ye)=>{const xe=s.getState();xe.frameloop!=="never"&&VO(Te,!0,xe,Ye)},le=()=>{const Te=s.getState();Te.gl.xr.enabled=Te.gl.xr.isPresenting,Te.gl.xr.setAnimationLoop(Te.gl.xr.isPresenting?Z:null),Te.gl.xr.isPresenting||RA(Te)},Ce={connect(){const Te=s.getState().gl;Te.xr.addEventListener("sessionstart",le),Te.xr.addEventListener("sessionend",le)},disconnect(){const Te=s.getState().gl;Te.xr.removeEventListener("sessionstart",le),Te.xr.removeEventListener("sessionend",le)}};typeof((oe=he.xr)==null?void 0:oe.addEventListener)=="function"&&Ce.connect(),q.set({xr:Ce})}if(he.shadowMap){const Z=he.shadowMap.enabled,le=he.shadowMap.type;if(he.shadowMap.enabled=!!D,er.boo(D))he.shadowMap.type=b_;else if(er.str(D)){var se;const Ce={basic:QU,percentage:bT,soft:b_,variance:Ul};he.shadowMap.type=(se=Ce[D])!=null?se:b_}else er.obj(D)&&Object.assign(he.shadowMap,D);(Z!==he.shadowMap.enabled||le!==he.shadowMap.type)&&(he.shadowMap.needsUpdate=!0)}return Kn.enabled=!j,d||(he.outputColorSpace=I?Yf:Qs,he.toneMapping=L?eu:GC),q.legacy!==j&&q.set(()=>({legacy:j})),q.linear!==I&&q.set(()=>({linear:I})),q.flat!==L&&q.set(()=>({flat:L})),S&&!er.fun(S)&&!PO(S)&&!er.equ(S,he,pg)&&Af(he,S),c=T,d=!0,_(),this},render(g){return!d&&!m&&this.configure(),m.then(()=>{wA.updateContainer(B.jsx(Pee,{store:s,children:g,onCreated:c,rootElement:i}),o,null,()=>{})}),s},unmount(){uV(i)}}}function Pee({store:i,children:e,onCreated:t,rootElement:n}){return I0(()=>{const r=i.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),i.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),B.jsx(rV.Provider,{value:i,children:e})}function uV(i,e){const t=Op.get(i),n=t?.fiber;if(n){const r=t?.store.getState();r&&(r.internal.active=!1),wA.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var s,o,c,h;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(c=r.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(h=r.gl)!=null&&h.xr&&r.xr.disconnect(),cee(r.scene),Op.delete(i)}catch{}},500)})}}const Lee=new Set,Uee=new Set,kee=new Set;function y1(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function D_(i,e){switch(i){case"before":return y1(Lee,e);case"after":return y1(Uee,e);case"tail":return y1(kee,e)}}let _1,S1;function AA(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),_1=e.internal.subscribers;for(let r=0;r<_1.length;r++)S1=_1[r],S1.ref.current(S1.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let LE=!1,CA=!1,b1,kO,mg;function hV(i){kO=requestAnimationFrame(hV),LE=!0,b1=0,D_("before",i),CA=!0;for(const t of Op.values()){var e;mg=t.store.getState(),mg.internal.active&&(mg.frameloop==="always"||mg.internal.frames>0)&&!((e=mg.gl.xr)!=null&&e.isPresenting)&&(b1+=AA(i,mg))}if(CA=!1,D_("after",i),b1===0)return D_("tail",i),LE=!1,cancelAnimationFrame(kO)}function RA(i,e=1){var t;if(!i)return Op.forEach(n=>RA(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):CA?i.internal.frames=2:i.internal.frames=1,LE||(LE=!0,requestAnimationFrame(hV)))}function VO(i,e=!0,t,n){if(e&&D_("before",i),t)AA(i,t,n);else for(const r of Op.values())AA(i,r.store.getState());e&&D_("after",i)}const x1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Vee(i){const{handlePointer:e}=vee(i);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(x1).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=i.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:n,events:r}=i.getState();if(r.disconnect==null||r.disconnect(),n(s=>({events:{...s.events,connected:t}})),r.handlers)for(const s in r.handlers){const o=r.handlers[s],[c,h]=x1[s];t.addEventListener(c,o,{passive:h})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const r in n.handlers){const s=n.handlers[r],[o]=x1[r];n.connected.removeEventListener(o,s)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function BO(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function Bee({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=ne.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=ne.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),h=i?typeof i=="number"?i:i.scroll:null,d=i?typeof i=="number"?i:i.resize:null,m=ne.useRef(!1);ne.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,_,S]=ne.useMemo(()=>{const T=()=>{if(!c.current.element)return;const{left:D,top:I,width:L,height:j,bottom:Y,right:k,x:V,y:N}=c.current.element.getBoundingClientRect(),O={left:D,top:I,width:L,height:j,bottom:Y,right:k,x:V,y:N};c.current.element instanceof HTMLElement&&n&&(O.height=c.current.element.offsetHeight,O.width=c.current.element.offsetWidth),Object.freeze(O),m.current&&!Gee(c.current.lastBounds,O)&&o(c.current.lastBounds=O)};return[T,d?BO(T,d):T,h?BO(T,h):T]},[o,n,h,d]);function M(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(T=>T.removeEventListener("scroll",S,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function C(){c.current.element&&(c.current.resizeObserver=new r(S),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(T=>T.addEventListener("scroll",S,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{S()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const w=T=>{!T||T===c.current.element||(M(),c.current.element=T,c.current.scrollContainers=fV(T),C())};return Fee(S,!!e),zee(_),ne.useEffect(()=>{M(),C()},[e,S,_]),ne.useEffect(()=>M,[]),[w,s,g]}function zee(i){ne.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function Fee(i,e){ne.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function fV(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(i);return[t,n,r].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...fV(i.parentElement)]}const Hee=["x","y","top","bottom","left","right","width","height"],Gee=(i,e)=>Hee.every(t=>i[t]===e[t]);function jee({ref:i,children:e,fallback:t,resize:n,style:r,gl:s,events:o=Vee,eventSource:c,eventPrefix:h,shadows:d,linear:m,flat:g,legacy:_,orthographic:S,frameloop:M,dpr:C,performance:w,raycaster:T,camera:D,scene:I,onPointerMissed:L,onCreated:j,...Y}){ne.useMemo(()=>Mee(P$),[]);const k=aee(),[V,N]=Bee({scroll:!0,debounce:{scroll:50,resize:0},...n}),O=ne.useRef(null),z=ne.useRef(null);ne.useImperativeHandle(i,()=>O.current);const W=eV(L),[q,he]=ne.useState(!1),[fe,H]=ne.useState(!1);if(q)throw q;if(fe)throw fe;const K=ne.useRef(null);I0(()=>{const oe=O.current;if(N.width>0&&N.height>0&&oe){K.current||(K.current=Oee(oe));async function se(){await K.current.configure({gl:s,scene:I,events:o,shadows:d,linear:m,flat:g,legacy:_,orthographic:S,frameloop:M,dpr:C,performance:w,raycaster:T,camera:D,size:N,onPointerMissed:(...Z)=>W.current==null?void 0:W.current(...Z),onCreated:Z=>{Z.events.connect==null||Z.events.connect(c?ree(c)?c.current:c:z.current),h&&Z.setEvents({compute:(le,Ce)=>{const Te=le[h+"X"],Ye=le[h+"Y"];Ce.pointer.set(Te/Ce.size.width*2-1,-(Ye/Ce.size.height)*2+1),Ce.raycaster.setFromCamera(Ce.pointer,Ce.camera)}}),j?.(Z)}}),K.current.render(B.jsx(k,{children:B.jsx(lee,{set:H,children:B.jsx(ne.Suspense,{fallback:B.jsx(oee,{set:he}),children:e??null})})}))}se()}}),ne.useEffect(()=>{const oe=O.current;if(oe)return()=>uV(oe)},[]);const J=c?"none":"auto";return B.jsx("div",{ref:z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:J,...r},...Y,children:B.jsx("div",{ref:V,style:{width:"100%",height:"100%"},children:B.jsx("canvas",{ref:O,style:{display:"block"},children:t})})})}function qee(i){return B.jsx(Q4,{children:B.jsx(jee,{...i})})}const Yee=i=>(i=i.replace("#",""),[parseInt(i.slice(0,2),16)/255,parseInt(i.slice(2,4),16)/255,parseInt(i.slice(4,6),16)/255]),Wee=`
varying vec2 vUv;
varying vec3 vPosition;
void main() {
  vPosition = position;
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Xee=`
varying vec2 vUv;
varying vec3 vPosition;
uniform float uTime;
uniform vec3  uColor;
uniform float uSpeed;
uniform float uScale;
uniform float uRotation;
uniform float uNoiseIntensity;
const float e = 2.71828182845904523536;
float noise(vec2 texCoord) {
  float G = e;
  vec2  r = (G * sin(G * texCoord));
  return fract(r.x * r.y * (1.0 + texCoord.x));
}
vec2 rotateUvs(vec2 uv, float angle) {
  float c = cos(angle);
  float s = sin(angle);
  mat2  rot = mat2(c, -s, s, c);
  return rot * uv;
}
void main() {
  float rnd        = noise(gl_FragCoord.xy);
  vec2  uv         = rotateUvs(vUv * uScale, uRotation);
  vec2  tex        = uv * uScale;
  float tOffset    = uSpeed * uTime;
  tex.y += 0.03 * sin(8.0 * tex.x - tOffset);
  float pattern = 0.6 +
                  0.4 * sin(5.0 * (tex.x + tex.y +
                                   cos(3.0 * tex.x + 5.0 * tex.y) +
                                   0.02 * tOffset) +
                           sin(20.0 * (tex.x + tex.y - 0.1 * tOffset)));
  vec4 col = vec4(uColor, 1.0) * vec4(pattern) - rnd / 15.0 * uNoiseIntensity;
  col.a = 1.0;
  gl_FragColor = col;
}
`,dV=ne.forwardRef(function({uniforms:e},t){const{viewport:n}=_ee();return ne.useLayoutEffect(()=>{t.current&&t.current.scale.set(n.width,n.height,1)},[t,n]),See((r,s)=>{t.current.material.uniforms.uTime.value+=.1*s}),B.jsxs("mesh",{ref:t,children:[B.jsx("planeGeometry",{args:[1,1,1,1]}),B.jsx("shaderMaterial",{uniforms:e,vertexShader:Wee,fragmentShader:Xee})]})});dV.displayName="SilkPlane";const Kee=({speed:i=5,scale:e=1,color:t="#7B7481",noiseIntensity:n=1.5,rotation:r=0})=>{const s=ne.useRef(),o=ne.useMemo(()=>({uSpeed:{value:i},uScale:{value:e},uNoiseIntensity:{value:n},uColor:{value:new At(...Yee(t))},uRotation:{value:r},uTime:{value:0}}),[i,e,n,t,r]);return B.jsx(qee,{dpr:[1,2],frameloop:"always",children:B.jsx(dV,{ref:s,uniforms:o})})};function Qee(){const i=ne.useRef(null),e=ne.useRef(null),t=ne.useRef(null);ne.useEffect(()=>{setTimeout(()=>{i.current&&i.current.classList.add("blur-in")},100),setTimeout(()=>{e.current&&e.current.classList.add("blur-in")},400),setTimeout(()=>{t.current&&t.current.classList.add("blur-in")},700)},[]);const n=()=>{bo("cta_clicked",{button_location:"hero",button_text:"Prendre Rendez-vous"});const r=document.querySelector("#rservation");r&&r.scrollIntoView({behavior:"smooth"})};return B.jsxs("div",{className:"hero-container",children:[B.jsx("div",{className:"hero-background",children:B.jsx(Kee,{speed:5,scale:1,color:"#c39e74",noiseIntensity:1,rotation:0})}),B.jsxs("div",{className:"hero-content",children:[B.jsx("h1",{ref:i,className:"hero-title hero-animate",children:"Shiynelly Lashes"}),B.jsx("p",{ref:e,className:"hero-subtitle hero-animate",children:"Rvlez la beaut de votre regard avec nos extensions de cils sur mesure"}),B.jsx("button",{ref:t,className:"hero-cta hero-animate",onClick:n,children:"Prendre Rendez-vous"})]})]})}const Zee=({children:i,className:e="",spotlightColor:t="rgba(0, 229, 255, 0.2)"})=>{const n=ne.useRef(null),r=s=>{const o=n.current.getBoundingClientRect(),c=s.clientX-o.left,h=s.clientY-o.top;n.current.style.setProperty("--mouse-x",`${c}px`),n.current.style.setProperty("--mouse-y",`${h}px`),n.current.style.setProperty("--spotlight-color",t)};return B.jsx("div",{ref:n,onMouseMove:r,className:`card-spotlight ${e}`,children:i})};function Jee(){const[i,e]=ne.useState({}),[t,n]=ne.useState(!1),[r,s]=ne.useState(!1),o=ne.useRef(null);ne.useEffect(()=>{const d=new IntersectionObserver(([m])=>{m.isIntersecting&&(n(!0),d.unobserve(m.target))},{threshold:.3});return o.current&&d.observe(o.current),()=>d.disconnect()},[]),ne.useEffect(()=>{c()},[]);const c=async()=>{try{const d=Xl(_s,"settings","modelService"),m=await z_(d);s(m.exists()?m.data().isOpen:!1)}catch(d){console.error("Erreur vrification service modle:",d),s(!1)}},h=d=>{!i[d]&&bo("service_details_viewed",{service_name:pw[d].title,service_price:pw[d].price,service_index:d}),e(g=>({...g,[d]:!g[d]}))};return B.jsx("section",{id:"nosprestations",ref:o,children:B.jsxs("div",{className:`prestations-container ${t?"fade-in-up":""}`,children:[B.jsx("h2",{children:"Nos Prestations"}),B.jsx("div",{className:"prestations-grid",children:pw.map((d,m)=>B.jsxs(Zee,{className:"prestation-card",spotlightColor:"rgba(195, 158, 116, 0.5)",children:[d.isModelService&&B.jsx("span",{className:`model-badge ${r?"open":"closed"}`,children:r?"Disponible":"Actuellement indisponible"}),B.jsxs("div",{className:"prestation-content",children:[B.jsx("h3",{children:d.title}),B.jsx("p",{className:"prestation-description",children:d.description}),B.jsx("span",{className:"prestation-price",children:d.price}),B.jsxs("div",{className:"prestation-result-container",children:[B.jsxs("button",{className:`result-toggle ${i[m]?"active":""}`,onClick:()=>h(m),children:["Rsultat",B.jsx("i",{className:`fas fa-arrow-down arrow-icon ${i[m]?"rotated":""}`})]}),B.jsx("div",{className:`result-content-wrapper ${i[m]?"show":""}`,children:B.jsx("div",{className:"result-text",children:d.result})})]})]})]},m))})]})})}function pV(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(e=0;e<r;e++)i[e]&&(t=pV(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function Gr(){for(var i,e,t=0,n="",r=arguments.length;t<r;t++)(i=arguments[t])&&(e=pV(i))&&(n&&(n+=" "),n+=e);return n}const mV=6048e5,$ee=864e5,tM=6e4,nM=36e5,ete=1e3,zO=Symbol.for("constructDateFrom");function _i(i,e){return typeof i=="function"?i(e):i&&typeof i=="object"&&zO in i?i[zO](e):i instanceof Date?new i.constructor(e):new Date(e)}function Bt(i,e){return _i(e||i,i)}function Gl(i,e,t){const n=Bt(i,t?.in);return isNaN(e)?_i(t?.in||i,NaN):(e&&n.setDate(n.getDate()+e),n)}function Zl(i,e,t){const n=Bt(i,t?.in);if(isNaN(e))return _i(i,NaN);if(!e)return n;const r=n.getDate(),s=_i(i,n.getTime());s.setMonth(n.getMonth()+e+1,0);const o=s.getDate();return r>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}function gV(i,e,t){return _i(i,+Bt(i)+e)}function tte(i,e,t){return gV(i,e*nM)}let nte={};function Kp(){return nte}function vh(i,e){const t=Kp(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=Bt(i,e?.in),s=r.getDay(),o=(s<n?7:0)+s-n;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function nv(i,e){return vh(i,{...e,weekStartsOn:1})}function vV(i,e){const t=Bt(i,e?.in),n=t.getFullYear(),r=_i(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=nv(r),o=_i(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const c=nv(o);return t.getTime()>=s.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1}function UE(i){const e=Bt(i),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+i-+t}function _h(i,...e){const t=_i.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function Pp(i,e){const t=Bt(i,e?.in);return t.setHours(0,0,0,0),t}function iv(i,e,t){const[n,r]=_h(t?.in,i,e),s=Pp(n),o=Pp(r),c=+s-UE(s),h=+o-UE(o);return Math.round((c-h)/$ee)}function ite(i,e){const t=vV(i,e),n=_i(i,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),nv(n)}function o0(i,e,t){const n=Bt(i,t?.in);return n.setTime(n.getTime()+e*tM),n}function PR(i,e,t){return Zl(i,e*3,t)}function rte(i,e,t){return gV(i,e*1e3)}function kE(i,e,t){return Gl(i,e*7,t)}function jl(i,e,t){return Zl(i,e*12,t)}function FO(i,e){let t,n=e?.in;return i.forEach(r=>{!n&&typeof r=="object"&&(n=_i.bind(null,r));const s=Bt(r,n);(!t||t<s||isNaN(+s))&&(t=s)}),_i(n,t||NaN)}function HO(i,e){let t,n=e?.in;return i.forEach(r=>{!n&&typeof r=="object"&&(n=_i.bind(null,r));const s=Bt(r,n);(!t||t>s||isNaN(+s))&&(t=s)}),_i(n,t||NaN)}function ste(i,e,t){const[n,r]=_h(t?.in,i,e);return+Pp(n)==+Pp(r)}function nu(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function rv(i){return!(!nu(i)&&typeof i!="number"||isNaN(+Bt(i)))}function VE(i,e,t){const[n,r]=_h(t?.in,i,e),s=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return s*12+o}function Df(i,e){const t=Bt(i,e?.in);return Math.trunc(t.getMonth()/3)+1}function BE(i,e,t){const[n,r]=_h(t?.in,i,e),s=n.getFullYear()-r.getFullYear(),o=Df(n)-Df(r);return s*4+o}function zE(i,e,t){const[n,r]=_h(t?.in,i,e);return n.getFullYear()-r.getFullYear()}function ate(i,e,t){const[n,r]=_h(t?.in,i,e),s=GO(n,r),o=Math.abs(iv(n,r));n.setDate(n.getDate()-s*o);const c=+(GO(n,r)===-s),h=s*(o-c);return h===0?0:h}function GO(i,e){const t=i.getFullYear()-e.getFullYear()||i.getMonth()-e.getMonth()||i.getDate()-e.getDate()||i.getHours()-e.getHours()||i.getMinutes()-e.getMinutes()||i.getSeconds()-e.getSeconds()||i.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function yV(i,e){const t=Bt(i,e?.in);return t.setHours(23,59,59,999),t}function _V(i,e){const t=Bt(i,e?.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function DA(i,e){const t=Bt(i,e?.in),n=t.getMonth(),r=n-n%3;return t.setMonth(r,1),t.setHours(0,0,0,0),t}function SV(i,e){const t=Bt(i,e?.in);return t.setDate(1),t.setHours(0,0,0,0),t}function bV(i,e){const t=Bt(i,e?.in),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function iM(i,e){const t=Bt(i,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function ote(i,e){const t=Kp(),n=t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=Bt(i,e?.in),s=r.getDay(),o=(s<n?-7:0)+6-(s-n);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}const lte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},cte=(i,e,t)=>{let n;const r=lte[i];return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function Lg(i){return(e={})=>{const t=e.width?String(e.width):i.defaultWidth;return i.formats[t]||i.formats[i.defaultWidth]}}const ute={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},fte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dte={date:Lg({formats:ute,defaultWidth:"full"}),time:Lg({formats:hte,defaultWidth:"full"}),dateTime:Lg({formats:fte,defaultWidth:"full"})},pte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},mte=(i,e,t,n)=>pte[i];function zc(i){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let r;if(n==="formatting"&&i.formattingValues){const o=i.defaultFormattingWidth||i.defaultWidth,c=t?.width?String(t.width):o;r=i.formattingValues[c]||i.formattingValues[o]}else{const o=i.defaultWidth,c=t?.width?String(t.width):i.defaultWidth;r=i.values[c]||i.values[o]}const s=i.argumentCallback?i.argumentCallback(e):e;return r[s]}}const gte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vte={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yte={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_te={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ste={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},xte=(i,e)=>{const t=Number(i),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Ete={ordinalNumber:xte,era:zc({values:gte,defaultWidth:"wide"}),quarter:zc({values:vte,defaultWidth:"wide",argumentCallback:i=>i-1}),month:zc({values:yte,defaultWidth:"wide"}),day:zc({values:_te,defaultWidth:"wide"}),dayPeriod:zc({values:Ste,defaultWidth:"wide",formattingValues:bte,defaultFormattingWidth:"wide"})};function Fc(i){return(e,t={})=>{const n=t.width,r=n&&i.matchPatterns[n]||i.matchPatterns[i.defaultMatchWidth],s=e.match(r);if(!s)return null;const o=s[0],c=n&&i.parsePatterns[n]||i.parsePatterns[i.defaultParseWidth],h=Array.isArray(c)?Mte(c,g=>g.test(o)):Tte(c,g=>g.test(o));let d;d=i.valueCallback?i.valueCallback(h):h,d=t.valueCallback?t.valueCallback(d):d;const m=e.slice(o.length);return{value:d,rest:m}}}function Tte(i,e){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&e(i[t]))return t}function Mte(i,e){for(let t=0;t<i.length;t++)if(e(i[t]))return t}function xV(i){return(e,t={})=>{const n=e.match(i.matchPattern);if(!n)return null;const r=n[0],s=e.match(i.parsePattern);if(!s)return null;let o=i.valueCallback?i.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const c=e.slice(r.length);return{value:o,rest:c}}}const wte=/^(\d+)(th|st|nd|rd)?/i,Ate=/\d+/i,Cte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Rte={any:[/^b/i,/^(a|c)/i]},Dte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Nte={any:[/1/i,/2/i,/3/i,/4/i]},Ite={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ote={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Pte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Lte={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ute={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Vte={ordinalNumber:xV({matchPattern:wte,parsePattern:Ate,valueCallback:i=>parseInt(i,10)}),era:Fc({matchPatterns:Cte,defaultMatchWidth:"wide",parsePatterns:Rte,defaultParseWidth:"any"}),quarter:Fc({matchPatterns:Dte,defaultMatchWidth:"wide",parsePatterns:Nte,defaultParseWidth:"any",valueCallback:i=>i+1}),month:Fc({matchPatterns:Ite,defaultMatchWidth:"wide",parsePatterns:Ote,defaultParseWidth:"any"}),day:Fc({matchPatterns:Pte,defaultMatchWidth:"wide",parsePatterns:Lte,defaultParseWidth:"any"}),dayPeriod:Fc({matchPatterns:Ute,defaultMatchWidth:"any",parsePatterns:kte,defaultParseWidth:"any"})},EV={code:"en-US",formatDistance:cte,formatLong:dte,formatRelative:mte,localize:Ete,match:Vte,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Bte(i,e){const t=Bt(i,e?.in);return iv(t,iM(t))+1}function LR(i,e){const t=Bt(i,e?.in),n=+nv(t)-+ite(t);return Math.round(n/mV)+1}function UR(i,e){const t=Bt(i,e?.in),n=t.getFullYear(),r=Kp(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=_i(e?.in||i,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const c=vh(o,e),h=_i(e?.in||i,0);h.setFullYear(n,0,s),h.setHours(0,0,0,0);const d=vh(h,e);return+t>=+c?n+1:+t>=+d?n:n-1}function zte(i,e){const t=Kp(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,r=UR(i,e),s=_i(e?.in||i,0);return s.setFullYear(r,0,n),s.setHours(0,0,0,0),vh(s,e)}function TV(i,e){const t=Bt(i,e?.in),n=+vh(t,e)-+zte(t,e);return Math.round(n/mV)+1}function yi(i,e){const t=i<0?"-":"",n=Math.abs(i).toString().padStart(e,"0");return t+n}const Sf={y(i,e){const t=i.getFullYear(),n=t>0?t:1-t;return yi(e==="yy"?n%100:n,e.length)},M(i,e){const t=i.getMonth();return e==="M"?String(t+1):yi(t+1,2)},d(i,e){return yi(i.getDate(),e.length)},a(i,e){const t=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(i,e){return yi(i.getHours()%12||12,e.length)},H(i,e){return yi(i.getHours(),e.length)},m(i,e){return yi(i.getMinutes(),e.length)},s(i,e){return yi(i.getSeconds(),e.length)},S(i,e){const t=e.length,n=i.getMilliseconds(),r=Math.trunc(n*Math.pow(10,t-3));return yi(r,e.length)}},gg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jO={G:function(i,e,t){const n=i.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(i,e,t){if(e==="yo"){const n=i.getFullYear(),r=n>0?n:1-n;return t.ordinalNumber(r,{unit:"year"})}return Sf.y(i,e)},Y:function(i,e,t,n){const r=UR(i,n),s=r>0?r:1-r;if(e==="YY"){const o=s%100;return yi(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):yi(s,e.length)},R:function(i,e){const t=vV(i);return yi(t,e.length)},u:function(i,e){const t=i.getFullYear();return yi(t,e.length)},Q:function(i,e,t){const n=Math.ceil((i.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return yi(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(i,e,t){const n=Math.ceil((i.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return yi(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(i,e,t){const n=i.getMonth();switch(e){case"M":case"MM":return Sf.M(i,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(i,e,t){const n=i.getMonth();switch(e){case"L":return String(n+1);case"LL":return yi(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(i,e,t,n){const r=TV(i,n);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):yi(r,e.length)},I:function(i,e,t){const n=LR(i);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):yi(n,e.length)},d:function(i,e,t){return e==="do"?t.ordinalNumber(i.getDate(),{unit:"date"}):Sf.d(i,e)},D:function(i,e,t){const n=Bte(i);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):yi(n,e.length)},E:function(i,e,t){const n=i.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(i,e,t,n){const r=i.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return yi(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(i,e,t,n){const r=i.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return yi(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(i,e,t){const n=i.getDay(),r=n===0?7:n;switch(e){case"i":return String(r);case"ii":return yi(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(i,e,t){const r=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(i,e,t){const n=i.getHours();let r;switch(n===12?r=gg.noon:n===0?r=gg.midnight:r=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(i,e,t){const n=i.getHours();let r;switch(n>=17?r=gg.evening:n>=12?r=gg.afternoon:n>=4?r=gg.morning:r=gg.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(i,e,t){if(e==="ho"){let n=i.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Sf.h(i,e)},H:function(i,e,t){return e==="Ho"?t.ordinalNumber(i.getHours(),{unit:"hour"}):Sf.H(i,e)},K:function(i,e,t){const n=i.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):yi(n,e.length)},k:function(i,e,t){let n=i.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):yi(n,e.length)},m:function(i,e,t){return e==="mo"?t.ordinalNumber(i.getMinutes(),{unit:"minute"}):Sf.m(i,e)},s:function(i,e,t){return e==="so"?t.ordinalNumber(i.getSeconds(),{unit:"second"}):Sf.s(i,e)},S:function(i,e){return Sf.S(i,e)},X:function(i,e,t){const n=i.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return YO(n);case"XXXX":case"XX":return op(n);case"XXXXX":case"XXX":default:return op(n,":")}},x:function(i,e,t){const n=i.getTimezoneOffset();switch(e){case"x":return YO(n);case"xxxx":case"xx":return op(n);case"xxxxx":case"xxx":default:return op(n,":")}},O:function(i,e,t){const n=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+qO(n,":");case"OOOO":default:return"GMT"+op(n,":")}},z:function(i,e,t){const n=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+qO(n,":");case"zzzz":default:return"GMT"+op(n,":")}},t:function(i,e,t){const n=Math.trunc(+i/1e3);return yi(n,e.length)},T:function(i,e,t){return yi(+i,e.length)}};function qO(i,e=""){const t=i>0?"-":"+",n=Math.abs(i),r=Math.trunc(n/60),s=n%60;return s===0?t+String(r):t+String(r)+e+yi(s,2)}function YO(i,e){return i%60===0?(i>0?"-":"+")+yi(Math.abs(i)/60,2):op(i,e)}function op(i,e=""){const t=i>0?"-":"+",n=Math.abs(i),r=yi(Math.trunc(n/60),2),s=yi(n%60,2);return t+r+e+s}const WO=(i,e)=>{switch(i){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},MV=(i,e)=>{switch(i){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Fte=(i,e)=>{const t=i.match(/(P+)(p+)?/)||[],n=t[1],r=t[2];if(!r)return WO(i,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",WO(n,e)).replace("{{time}}",MV(r,e))},NA={p:MV,P:Fte},Hte=/^D+$/,Gte=/^Y+$/,jte=["D","DD","YY","YYYY"];function qte(i){return Hte.test(i)}function Yte(i){return Gte.test(i)}function Wte(i,e,t){const n=Xte(i,e,t);if(console.warn(n),jte.includes(i))throw new RangeError(n)}function Xte(i,e,t){const n=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Kte=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Qte=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Zte=/^'([^]*?)'?$/,Jte=/''/g,$te=/[a-zA-Z]/;function XO(i,e,t){const n=Kp(),r=t?.locale??n.locale??EV,s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,c=Bt(i,t?.in);if(!rv(c))throw new RangeError("Invalid time value");let h=e.match(Qte).map(m=>{const g=m[0];if(g==="p"||g==="P"){const _=NA[g];return _(m,r.formatLong)}return m}).join("").match(Kte).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:ene(m)};if(jO[g])return{isToken:!0,value:m};if(g.match($te))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});r.localize.preprocessor&&(h=r.localize.preprocessor(c,h));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:r};return h.map(m=>{if(!m.isToken)return m.value;const g=m.value;(!t?.useAdditionalWeekYearTokens&&Yte(g)||!t?.useAdditionalDayOfYearTokens&&qte(g))&&Wte(g,e,String(i));const _=jO[g[0]];return _(c,g,r.localize,d)}).join("")}function ene(i){const e=i.match(Zte);return e?e[1].replace(Jte,"'"):i}function KO(i,e){return Bt(i,e?.in).getDate()}function tne(i,e){return Bt(i,e?.in).getDay()}function nne(i,e){const t=Bt(i,e?.in),n=t.getFullYear(),r=t.getMonth(),s=_i(t,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function ine(){return Object.assign({},Kp())}function Ws(i,e){return Bt(i,e?.in).getHours()}function rne(i,e){const t=Bt(i,e?.in).getDay();return t===0?7:t}function Xs(i,e){return Bt(i,e?.in).getMinutes()}function Qa(i,e){return Bt(i,e?.in).getMonth()}function Uf(i){return Bt(i).getSeconds()}function IA(i){return+Bt(i)}function Un(i,e){return Bt(i,e?.in).getFullYear()}function sh(i,e){return+Bt(i)>+Bt(e)}function Yc(i,e){return+Bt(i)<+Bt(e)}function sne(i,e){return+Bt(i)==+Bt(e)}function ane(i,e){const t=one(e)?new e(0):_i(e,0);return t.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),t.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),t}function one(i){return typeof i=="function"&&i.prototype?.constructor===i}const lne=10;class wV{subPriority=0;validate(e,t){return!0}}class cne extends wV{constructor(e,t,n,r,s){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=r,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class une extends wV{priority=lne;subPriority=-1;constructor(e,t){super(),this.context=e||(n=>_i(t,n))}set(e,t){return t.timestampIsSet?e:_i(e,ane(e,this.context))}}class ui{run(e,t,n,r){const s=this.parse(e,t,n,r);return s?{setter:new cne(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,n){return!0}}class hne extends ui{priority=140;parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const _r={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Hc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Sr(i,e){return i&&{value:e(i.value),rest:i.rest}}function nr(i,e){const t=e.match(i);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Gc(i,e){const t=e.match(i);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const n=t[1]==="+"?1:-1,r=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,o=t[5]?parseInt(t[5],10):0;return{value:n*(r*nM+s*tM+o*ete),rest:e.slice(t[0].length)}}function AV(i){return nr(_r.anyDigitsSigned,i)}function hr(i,e){switch(i){case 1:return nr(_r.singleDigit,e);case 2:return nr(_r.twoDigits,e);case 3:return nr(_r.threeDigits,e);case 4:return nr(_r.fourDigits,e);default:return nr(new RegExp("^\\d{1,"+i+"}"),e)}}function FE(i,e){switch(i){case 1:return nr(_r.singleDigitSigned,e);case 2:return nr(_r.twoDigitsSigned,e);case 3:return nr(_r.threeDigitsSigned,e);case 4:return nr(_r.fourDigitsSigned,e);default:return nr(new RegExp("^-?\\d{1,"+i+"}"),e)}}function kR(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function CV(i,e){const t=e>0,n=t?e:1-e;let r;if(n<=50)r=i||100;else{const s=n+50,o=Math.trunc(s/100)*100,c=i>=s%100;r=i+o-(c?100:0)}return t?r:1-r}function RV(i){return i%400===0||i%4===0&&i%100!==0}class fne extends ui{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,n){const r=s=>({year:s,isTwoDigitYear:t==="yy"});switch(t){case"y":return Sr(hr(4,e),r);case"yo":return Sr(n.ordinalNumber(e,{unit:"year"}),r);default:return Sr(hr(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const r=e.getFullYear();if(n.isTwoDigitYear){const o=CV(n.year,r);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const s=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}class dne extends ui{priority=130;parse(e,t,n){const r=s=>({year:s,isTwoDigitYear:t==="YY"});switch(t){case"Y":return Sr(hr(4,e),r);case"Yo":return Sr(n.ordinalNumber(e,{unit:"year"}),r);default:return Sr(hr(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,r){const s=UR(e,r);if(n.isTwoDigitYear){const c=CV(n.year,s);return e.setFullYear(c,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),vh(e,r)}const o=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(o,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),vh(e,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class pne extends ui{priority=130;parse(e,t){return FE(t==="R"?4:t.length,e)}set(e,t,n){const r=_i(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),nv(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class mne extends ui{priority=130;parse(e,t){return FE(t==="u"?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class gne extends ui{priority=120;parse(e,t,n){switch(t){case"Q":case"QQ":return hr(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class vne extends ui{priority=120;parse(e,t,n){switch(t){case"q":case"qq":return hr(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class yne extends ui{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,n){const r=s=>s-1;switch(t){case"M":return Sr(nr(_r.month,e),r);case"MM":return Sr(hr(2,e),r);case"Mo":return Sr(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}class _ne extends ui{priority=110;parse(e,t,n){const r=s=>s-1;switch(t){case"L":return Sr(nr(_r.month,e),r);case"LL":return Sr(hr(2,e),r);case"Lo":return Sr(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Sne(i,e,t){const n=Bt(i,t?.in),r=TV(n,t)-e;return n.setDate(n.getDate()-r*7),Bt(n,t?.in)}class bne extends ui{priority=100;parse(e,t,n){switch(t){case"w":return nr(_r.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return hr(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,r){return vh(Sne(e,n,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function xne(i,e,t){const n=Bt(i,t?.in),r=LR(n,t)-e;return n.setDate(n.getDate()-r*7),n}class Ene extends ui{priority=100;parse(e,t,n){switch(t){case"I":return nr(_r.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return hr(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return nv(xne(e,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Tne=[31,28,31,30,31,30,31,31,30,31,30,31],Mne=[31,29,31,30,31,30,31,31,30,31,30,31];class wne extends ui{priority=90;subPriority=1;parse(e,t,n){switch(t){case"d":return nr(_r.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return hr(t.length,e)}}validate(e,t){const n=e.getFullYear(),r=RV(n),s=e.getMonth();return r?t>=1&&t<=Mne[s]:t>=1&&t<=Tne[s]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Ane extends ui{priority=90;subpriority=1;parse(e,t,n){switch(t){case"D":case"DD":return nr(_r.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return hr(t.length,e)}}validate(e,t){const n=e.getFullYear();return RV(n)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function VR(i,e,t){const n=Kp(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Bt(i,t?.in),o=s.getDay(),h=(e%7+7)%7,d=7-r,m=e<0||e>6?e-(o+d)%7:(h+d)%7-(o+d)%7;return Gl(s,m,t)}class Cne extends ui{priority=90;parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return e=VR(e,n,r),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class Rne extends ui{priority=90;parse(e,t,n,r){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+r.weekStartsOn+6)%7+c};switch(t){case"e":case"ee":return Sr(hr(t.length,e),s);case"eo":return Sr(n.ordinalNumber(e,{unit:"day"}),s);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return e=VR(e,n,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Dne extends ui{priority=90;parse(e,t,n,r){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+r.weekStartsOn+6)%7+c};switch(t){case"c":case"cc":return Sr(hr(t.length,e),s);case"co":return Sr(n.ordinalNumber(e,{unit:"day"}),s);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return e=VR(e,n,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Nne(i,e,t){const n=Bt(i,t?.in),r=rne(n,t),s=e-r;return Gl(n,s,t)}class Ine extends ui{priority=90;parse(e,t,n){const r=s=>s===0?7:s;switch(t){case"i":case"ii":return hr(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Sr(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Sr(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Sr(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiii":default:return Sr(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return e=Nne(e,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class One extends ui{priority=80;parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(kR(n),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class Pne extends ui{priority=80;parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(kR(n),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Lne extends ui{priority=80;parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(kR(n),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Une extends ui{priority=70;parse(e,t,n){switch(t){case"h":return nr(_r.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return hr(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const r=e.getHours()>=12;return r&&n<12?e.setHours(n+12,0,0,0):!r&&n===12?e.setHours(0,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class kne extends ui{priority=70;parse(e,t,n){switch(t){case"H":return nr(_r.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return hr(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Vne extends ui{priority=70;parse(e,t,n){switch(t){case"K":return nr(_r.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return hr(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Bne extends ui{priority=70;parse(e,t,n){switch(t){case"k":return nr(_r.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return hr(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const r=n<=24?n%24:n;return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class zne extends ui{priority=60;parse(e,t,n){switch(t){case"m":return nr(_r.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return hr(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}incompatibleTokens=["t","T"]}class Fne extends ui{priority=50;parse(e,t,n){switch(t){case"s":return nr(_r.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return hr(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}incompatibleTokens=["t","T"]}class Hne extends ui{priority=30;parse(e,t){const n=r=>Math.trunc(r*Math.pow(10,-t.length+3));return Sr(hr(t.length,e),n)}set(e,t,n){return e.setMilliseconds(n),e}incompatibleTokens=["t","T"]}class Gne extends ui{priority=10;parse(e,t){switch(t){case"X":return Gc(Hc.basicOptionalMinutes,e);case"XX":return Gc(Hc.basic,e);case"XXXX":return Gc(Hc.basicOptionalSeconds,e);case"XXXXX":return Gc(Hc.extendedOptionalSeconds,e);case"XXX":default:return Gc(Hc.extended,e)}}set(e,t,n){return t.timestampIsSet?e:_i(e,e.getTime()-UE(e)-n)}incompatibleTokens=["t","T","x"]}class jne extends ui{priority=10;parse(e,t){switch(t){case"x":return Gc(Hc.basicOptionalMinutes,e);case"xx":return Gc(Hc.basic,e);case"xxxx":return Gc(Hc.basicOptionalSeconds,e);case"xxxxx":return Gc(Hc.extendedOptionalSeconds,e);case"xxx":default:return Gc(Hc.extended,e)}}set(e,t,n){return t.timestampIsSet?e:_i(e,e.getTime()-UE(e)-n)}incompatibleTokens=["t","T","X"]}class qne extends ui{priority=40;parse(e){return AV(e)}set(e,t,n){return[_i(e,n*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Yne extends ui{priority=20;parse(e){return AV(e)}set(e,t,n){return[_i(e,n),{timestampIsSet:!0}]}incompatibleTokens="*"}const Wne={G:new hne,y:new fne,Y:new dne,R:new pne,u:new mne,Q:new gne,q:new vne,M:new yne,L:new _ne,w:new bne,I:new Ene,d:new wne,D:new Ane,E:new Cne,e:new Rne,c:new Dne,i:new Ine,a:new One,b:new Pne,B:new Lne,h:new Une,H:new kne,K:new Vne,k:new Bne,m:new zne,s:new Fne,S:new Hne,X:new Gne,x:new jne,t:new qne,T:new Yne},Xne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Kne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Qne=/^'([^]*?)'?$/,Zne=/''/g,Jne=/\S/,$ne=/[a-zA-Z]/;function eie(i,e,t,n){const r=()=>_i(n?.in||t,NaN),s=ine(),o=n?.locale??s.locale??EV,c=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,h=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0;if(!e)return i?r():Bt(t,n?.in);const d={firstWeekContainsDate:c,weekStartsOn:h,locale:o},m=[new une(n?.in,t)],g=e.match(Kne).map(w=>{const T=w[0];if(T in NA){const D=NA[T];return D(w,o.formatLong)}return w}).join("").match(Xne),_=[];for(let w of g){const T=w[0],D=Wne[T];if(D){const{incompatibleTokens:I}=D;if(Array.isArray(I)){const j=_.find(Y=>I.includes(Y.token)||Y.token===T);if(j)throw new RangeError(`The format string mustn't contain \`${j.fullToken}\` and \`${w}\` at the same time`)}else if(D.incompatibleTokens==="*"&&_.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);_.push({token:T,fullToken:w});const L=D.run(i,w,o.match,d);if(!L)return r();m.push(L.setter),i=L.rest}else{if(T.match($ne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");if(w==="''"?w="'":T==="'"&&(w=tie(w)),i.indexOf(w)===0)i=i.slice(w.length);else return r()}}if(i.length>0&&Jne.test(i))return r();const S=m.map(w=>w.priority).sort((w,T)=>T-w).filter((w,T,D)=>D.indexOf(w)===T).map(w=>m.filter(T=>T.priority===w).sort((T,D)=>D.subPriority-T.subPriority)).map(w=>w[0]);let M=Bt(t,n?.in);if(isNaN(+M))return r();const C={};for(const w of S){if(!w.validate(M,d))return r();const T=w.set(M,C,d);Array.isArray(T)?(M=T[0],Object.assign(C,T[1])):M=T}return M}function tie(i){return i.match(Qne)[1].replace(Zne,"'")}function nie(i,e,t){const[n,r]=_h(t?.in,i,e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function iie(i,e,t){const[n,r]=_h(t?.in,i,e);return+DA(n)==+DA(r)}function rie(i,e,t){const[n,r]=_h(t?.in,i,e);return n.getFullYear()===r.getFullYear()}function l0(i,e,t){const n=+Bt(i,t?.in),[r,s]=[+Bt(e.start,t?.in),+Bt(e.end,t?.in)].sort((o,c)=>o-c);return n>=r&&n<=s}function sie(i,e,t){return Gl(i,-1,t)}function aie(i,e){const t=()=>_i(e?.in,NaN),r=uie(i);let s;if(r.date){const d=hie(r.date,2);s=fie(d.restDateString,d.year)}if(!s||isNaN(+s))return t();const o=+s;let c=0,h;if(r.time&&(c=die(r.time),isNaN(c)))return t();if(r.timezone){if(h=pie(r.timezone),isNaN(h))return t()}else{const d=new Date(o+c),m=Bt(0,e?.in);return m.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),m.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),m}return Bt(o+c+h,e?.in)}const jb={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},oie=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,lie=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,cie=/^([+-])(\d{2})(?::?(\d{2}))?$/;function uie(i){const e={},t=i.split(jb.dateTimeDelimiter);let n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],jb.timeZoneDelimiter.test(e.date)&&(e.date=i.split(jb.timeZoneDelimiter)[0],n=i.substr(e.date.length,i.length))),n){const r=jb.timezone.exec(n);r?(e.time=n.replace(r[1],""),e.timezone=r[1]):e.time=n}return e}function hie(i,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=i.match(t);if(!n)return{year:NaN,restDateString:""};const r=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?r:s*100,restDateString:i.slice((n[1]||n[2]).length)}}function fie(i,e){if(e===null)return new Date(NaN);const t=i.match(oie);if(!t)return new Date(NaN);const n=!!t[4],r=e_(t[1]),s=e_(t[2])-1,o=e_(t[3]),c=e_(t[4]),h=e_(t[5])-1;if(n)return _ie(e,c,h)?mie(e,c,h):new Date(NaN);{const d=new Date(0);return!vie(e,s,o)||!yie(e,r)?new Date(NaN):(d.setUTCFullYear(e,s,Math.max(r,o)),d)}}function e_(i){return i?parseInt(i):1}function die(i){const e=i.match(lie);if(!e)return NaN;const t=E1(e[1]),n=E1(e[2]),r=E1(e[3]);return Sie(t,n,r)?t*nM+n*tM+r*1e3:NaN}function E1(i){return i&&parseFloat(i.replace(",","."))||0}function pie(i){if(i==="Z")return 0;const e=i.match(cie);if(!e)return 0;const t=e[1]==="+"?-1:1,n=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return bie(n,r)?t*(n*nM+r*tM):NaN}function mie(i,e,t){const n=new Date(0);n.setUTCFullYear(i,0,4);const r=n.getUTCDay()||7,s=(e-1)*7+t+1-r;return n.setUTCDate(n.getUTCDate()+s),n}const gie=[31,null,31,30,31,30,31,31,30,31,30,31];function DV(i){return i%400===0||i%4===0&&i%100!==0}function vie(i,e,t){return e>=0&&e<=11&&t>=1&&t<=(gie[e]||(DV(i)?29:28))}function yie(i,e){return e>=1&&e<=(DV(i)?366:365)}function _ie(i,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function Sie(i,e,t){return i===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&i>=0&&i<25}function bie(i,e){return e>=0&&e<=59}function So(i,e,t){const n=Bt(i,t?.in),r=n.getFullYear(),s=n.getDate(),o=_i(i,0);o.setFullYear(r,e,15),o.setHours(0,0,0,0);const c=nne(o);return n.setMonth(e,Math.min(s,c)),n}function vx(i,e,t){const n=Bt(i,t?.in);return n.setHours(e),n}function yx(i,e,t){const n=Bt(i,t?.in);return n.setMinutes(e),n}function xg(i,e,t){const n=Bt(i,t?.in),r=Math.trunc(n.getMonth()/3)+1,s=e-r;return So(n,n.getMonth()+s*3)}function _x(i,e,t){const n=Bt(i,t?.in);return n.setSeconds(e),n}function kc(i,e,t){const n=Bt(i,t?.in);return isNaN(+n)?_i(i,NaN):(n.setFullYear(e),n)}function Ep(i,e,t){return Zl(i,-e,t)}function NV(i,e,t){return PR(i,-1,t)}function QO(i,e,t){return kE(i,-1,t)}function Xf(i,e,t){return jl(i,-e,t)}function rM(){return typeof window<"u"}function Cv(i){return IV(i)?(i.nodeName||"").toLowerCase():"#document"}function Mo(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function hu(i){var e;return(e=(IV(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function IV(i){return rM()?i instanceof Node||i instanceof Mo(i).Node:!1}function Aa(i){return rM()?i instanceof Element||i instanceof Mo(i).Element:!1}function ou(i){return rM()?i instanceof HTMLElement||i instanceof Mo(i).HTMLElement:!1}function ZO(i){return!rM()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof Mo(i).ShadowRoot}const xie=new Set(["inline","contents"]);function O0(i){const{overflow:e,overflowX:t,overflowY:n,display:r}=rl(i);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!xie.has(r)}const Eie=new Set(["table","td","th"]);function Tie(i){return Eie.has(Cv(i))}const Mie=[":popover-open",":modal"];function sM(i){return Mie.some(e=>{try{return i.matches(e)}catch{return!1}})}const wie=["transform","translate","scale","rotate","perspective"],Aie=["transform","translate","scale","rotate","perspective","filter"],Cie=["paint","layout","strict","content"];function BR(i){const e=zR(),t=Aa(i)?rl(i):i;return wie.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||Aie.some(n=>(t.willChange||"").includes(n))||Cie.some(n=>(t.contain||"").includes(n))}function Rie(i){let e=Kf(i);for(;ou(e)&&!sv(e);){if(BR(e))return e;if(sM(e))return null;e=Kf(e)}return null}function zR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Die=new Set(["html","body","#document"]);function sv(i){return Die.has(Cv(i))}function rl(i){return Mo(i).getComputedStyle(i)}function aM(i){return Aa(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function Kf(i){if(Cv(i)==="html")return i;const e=i.assignedSlot||i.parentNode||ZO(i)&&i.host||hu(i);return ZO(e)?e.host:e}function OV(i){const e=Kf(i);return sv(e)?i.ownerDocument?i.ownerDocument.body:i.body:ou(e)&&O0(e)?e:OV(e)}function c0(i,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=OV(i),s=r===((n=i.ownerDocument)==null?void 0:n.body),o=Mo(r);if(s){const c=OA(o);return e.concat(o,o.visualViewport||[],O0(r)?r:[],c&&t?c0(c):[])}return e.concat(r,c0(r,[],t))}function OA(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}const av=Math.min,Tp=Math.max,HE=Math.round,qb=Math.floor,iu=i=>({x:i,y:i}),Nie={left:"right",right:"left",bottom:"top",top:"bottom"},Iie={start:"end",end:"start"};function Oie(i,e,t){return Tp(i,av(e,t))}function oM(i,e){return typeof i=="function"?i(e):i}function ov(i){return i.split("-")[0]}function P0(i){return i.split("-")[1]}function Pie(i){return i==="x"?"y":"x"}function FR(i){return i==="y"?"height":"width"}const Lie=new Set(["top","bottom"]);function gp(i){return Lie.has(ov(i))?"y":"x"}function HR(i){return Pie(gp(i))}function Uie(i,e,t){t===void 0&&(t=!1);const n=P0(i),r=HR(i),s=FR(r);let o=r==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=GE(o)),[o,GE(o)]}function kie(i){const e=GE(i);return[PA(i),e,PA(e)]}function PA(i){return i.replace(/start|end/g,e=>Iie[e])}const JO=["left","right"],$O=["right","left"],Vie=["top","bottom"],Bie=["bottom","top"];function zie(i,e,t){switch(i){case"top":case"bottom":return t?e?$O:JO:e?JO:$O;case"left":case"right":return e?Vie:Bie;default:return[]}}function Fie(i,e,t,n){const r=P0(i);let s=zie(ov(i),t==="start",n);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(PA)))),s}function GE(i){return i.replace(/left|right|bottom|top/g,e=>Nie[e])}function Hie(i){return{top:0,right:0,bottom:0,left:0,...i}}function PV(i){return typeof i!="number"?Hie(i):{top:i,right:i,bottom:i,left:i}}function jE(i){const{x:e,y:t,width:n,height:r}=i;return{width:n,height:r,top:t,left:e,right:e+n,bottom:t+r,x:e,y:t}}var Gie=typeof document<"u",jie=function(){},qE=Gie?ne.useLayoutEffect:jie;const qie={...RP},Yie=qie.useInsertionEffect,Wie=Yie||(i=>i());function Xie(i){const e=ne.useRef(()=>{});return Wie(()=>{e.current=i}),ne.useCallback(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.current==null?void 0:e.current(...n)},[])}function eP(i,e,t){let{reference:n,floating:r}=i;const s=gp(e),o=HR(e),c=FR(o),h=ov(e),d=s==="y",m=n.x+n.width/2-r.width/2,g=n.y+n.height/2-r.height/2,_=n[c]/2-r[c]/2;let S;switch(h){case"top":S={x:m,y:n.y-r.height};break;case"bottom":S={x:m,y:n.y+n.height};break;case"right":S={x:n.x+n.width,y:g};break;case"left":S={x:n.x-r.width,y:g};break;default:S={x:n.x,y:n.y}}switch(P0(e)){case"start":S[o]-=_*(t&&d?-1:1);break;case"end":S[o]+=_*(t&&d?-1:1);break}return S}const Kie=async(i,e,t)=>{const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,c=s.filter(Boolean),h=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:i,floating:e,strategy:r}),{x:m,y:g}=eP(d,n,h),_=n,S={},M=0;for(let C=0;C<c.length;C++){const{name:w,fn:T}=c[C],{x:D,y:I,data:L,reset:j}=await T({x:m,y:g,initialPlacement:n,placement:_,strategy:r,middlewareData:S,rects:d,platform:o,elements:{reference:i,floating:e}});m=D??m,g=I??g,S={...S,[w]:{...S[w],...L}},j&&M<=50&&(M++,typeof j=="object"&&(j.placement&&(_=j.placement),j.rects&&(d=j.rects===!0?await o.getElementRects({reference:i,floating:e,strategy:r}):j.rects),{x:m,y:g}=eP(d,_,h)),C=-1)}return{x:m,y:g,placement:_,strategy:r,middlewareData:S}};async function Qie(i,e){var t;e===void 0&&(e={});const{x:n,y:r,platform:s,rects:o,elements:c,strategy:h}=i,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:_=!1,padding:S=0}=oM(e,i),M=PV(S),w=c[_?g==="floating"?"reference":"floating":g],T=jE(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(w)))==null||t?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:d,rootBoundary:m,strategy:h})),D=g==="floating"?{x:n,y:r,width:o.floating.width,height:o.floating.height}:o.reference,I=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),L=await(s.isElement==null?void 0:s.isElement(I))?await(s.getScale==null?void 0:s.getScale(I))||{x:1,y:1}:{x:1,y:1},j=jE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:D,offsetParent:I,strategy:h}):D);return{top:(T.top-j.top+M.top)/L.y,bottom:(j.bottom-T.bottom+M.bottom)/L.y,left:(T.left-j.left+M.left)/L.x,right:(j.right-T.right+M.right)/L.x}}const Zie=i=>({name:"arrow",options:i,async fn(e){const{x:t,y:n,placement:r,rects:s,platform:o,elements:c,middlewareData:h}=e,{element:d,padding:m=0}=oM(i,e)||{};if(d==null)return{};const g=PV(m),_={x:t,y:n},S=HR(r),M=FR(S),C=await o.getDimensions(d),w=S==="y",T=w?"top":"left",D=w?"bottom":"right",I=w?"clientHeight":"clientWidth",L=s.reference[M]+s.reference[S]-_[S]-s.floating[M],j=_[S]-s.reference[S],Y=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let k=Y?Y[I]:0;(!k||!await(o.isElement==null?void 0:o.isElement(Y)))&&(k=c.floating[I]||s.floating[M]);const V=L/2-j/2,N=k/2-C[M]/2-1,O=av(g[T],N),z=av(g[D],N),W=O,q=k-C[M]-z,he=k/2-C[M]/2+V,fe=Oie(W,he,q),H=!h.arrow&&P0(r)!=null&&he!==fe&&s.reference[M]/2-(he<W?O:z)-C[M]/2<0,K=H?he<W?he-W:he-q:0;return{[S]:_[S]+K,data:{[S]:fe,centerOffset:he-fe-K,...H&&{alignmentOffset:K}},reset:H}}}),Jie=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t,n;const{placement:r,middlewareData:s,rects:o,initialPlacement:c,platform:h,elements:d}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:_,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:M="none",flipAlignment:C=!0,...w}=oM(i,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const T=ov(r),D=gp(c),I=ov(c)===c,L=await(h.isRTL==null?void 0:h.isRTL(d.floating)),j=_||(I||!C?[GE(c)]:kie(c)),Y=M!=="none";!_&&Y&&j.push(...Fie(c,C,M,L));const k=[c,...j],V=await Qie(e,w),N=[];let O=((n=s.flip)==null?void 0:n.overflows)||[];if(m&&N.push(V[T]),g){const he=Uie(r,o,L);N.push(V[he[0]],V[he[1]])}if(O=[...O,{placement:r,overflows:N}],!N.every(he=>he<=0)){var z,W;const he=(((z=s.flip)==null?void 0:z.index)||0)+1,fe=k[he];if(fe&&(!(g==="alignment"?D!==gp(fe):!1)||O.every(J=>gp(J.placement)===D?J.overflows[0]>0:!0)))return{data:{index:he,overflows:O},reset:{placement:fe}};let H=(W=O.filter(K=>K.overflows[0]<=0).sort((K,J)=>K.overflows[1]-J.overflows[1])[0])==null?void 0:W.placement;if(!H)switch(S){case"bestFit":{var q;const K=(q=O.filter(J=>{if(Y){const oe=gp(J.placement);return oe===D||oe==="y"}return!0}).map(J=>[J.placement,J.overflows.filter(oe=>oe>0).reduce((oe,se)=>oe+se,0)]).sort((J,oe)=>J[1]-oe[1])[0])==null?void 0:q[0];K&&(H=K);break}case"initialPlacement":H=c;break}if(r!==H)return{reset:{placement:H}}}return{}}}},$ie=new Set(["left","top"]);async function ere(i,e){const{placement:t,platform:n,elements:r}=i,s=await(n.isRTL==null?void 0:n.isRTL(r.floating)),o=ov(t),c=P0(t),h=gp(t)==="y",d=$ie.has(o)?-1:1,m=s&&h?-1:1,g=oM(e,i);let{mainAxis:_,crossAxis:S,alignmentAxis:M}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return c&&typeof M=="number"&&(S=c==="end"?M*-1:M),h?{x:S*m,y:_*d}:{x:_*d,y:S*m}}const tre=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){var t,n;const{x:r,y:s,placement:o,middlewareData:c}=e,h=await ere(e,i);return o===((t=c.offset)==null?void 0:t.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:r+h.x,y:s+h.y,data:{...h,placement:o}}}}};function LV(i){const e=rl(i);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=ou(i),s=r?i.offsetWidth:t,o=r?i.offsetHeight:n,c=HE(t)!==s||HE(n)!==o;return c&&(t=s,n=o),{width:t,height:n,$:c}}function GR(i){return Aa(i)?i:i.contextElement}function Ug(i){const e=GR(i);if(!ou(e))return iu(1);const t=e.getBoundingClientRect(),{width:n,height:r,$:s}=LV(e);let o=(s?HE(t.width):t.width)/n,c=(s?HE(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const nre=iu(0);function UV(i){const e=Mo(i);return!zR()||!e.visualViewport?nre:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ire(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==Mo(i)?!1:e}function Lp(i,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=i.getBoundingClientRect(),s=GR(i);let o=iu(1);e&&(n?Aa(n)&&(o=Ug(n)):o=Ug(i));const c=ire(s,t,n)?UV(s):iu(0);let h=(r.left+c.x)/o.x,d=(r.top+c.y)/o.y,m=r.width/o.x,g=r.height/o.y;if(s){const _=Mo(s),S=n&&Aa(n)?Mo(n):n;let M=_,C=OA(M);for(;C&&n&&S!==M;){const w=Ug(C),T=C.getBoundingClientRect(),D=rl(C),I=T.left+(C.clientLeft+parseFloat(D.paddingLeft))*w.x,L=T.top+(C.clientTop+parseFloat(D.paddingTop))*w.y;h*=w.x,d*=w.y,m*=w.x,g*=w.y,h+=I,d+=L,M=Mo(C),C=OA(M)}}return jE({width:m,height:g,x:h,y:d})}function lM(i,e){const t=aM(i).scrollLeft;return e?e.left+t:Lp(hu(i)).left+t}function kV(i,e){const t=i.getBoundingClientRect(),n=t.left+e.scrollLeft-lM(i,t),r=t.top+e.scrollTop;return{x:n,y:r}}function rre(i){let{elements:e,rect:t,offsetParent:n,strategy:r}=i;const s=r==="fixed",o=hu(n),c=e?sM(e.floating):!1;if(n===o||c&&s)return t;let h={scrollLeft:0,scrollTop:0},d=iu(1);const m=iu(0),g=ou(n);if((g||!g&&!s)&&((Cv(n)!=="body"||O0(o))&&(h=aM(n)),ou(n))){const S=Lp(n);d=Ug(n),m.x=S.x+n.clientLeft,m.y=S.y+n.clientTop}const _=o&&!g&&!s?kV(o,h):iu(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-h.scrollLeft*d.x+m.x+_.x,y:t.y*d.y-h.scrollTop*d.y+m.y+_.y}}function sre(i){return Array.from(i.getClientRects())}function are(i){const e=hu(i),t=aM(i),n=i.ownerDocument.body,r=Tp(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Tp(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+lM(i);const c=-t.scrollTop;return rl(n).direction==="rtl"&&(o+=Tp(e.clientWidth,n.clientWidth)-r),{width:r,height:s,x:o,y:c}}const tP=25;function ore(i,e){const t=Mo(i),n=hu(i),r=t.visualViewport;let s=n.clientWidth,o=n.clientHeight,c=0,h=0;if(r){s=r.width,o=r.height;const m=zR();(!m||m&&e==="fixed")&&(c=r.offsetLeft,h=r.offsetTop)}const d=lM(n);if(d<=0){const m=n.ownerDocument,g=m.body,_=getComputedStyle(g),S=m.compatMode==="CSS1Compat"&&parseFloat(_.marginLeft)+parseFloat(_.marginRight)||0,M=Math.abs(n.clientWidth-g.clientWidth-S);M<=tP&&(s-=M)}else d<=tP&&(s+=d);return{width:s,height:o,x:c,y:h}}const lre=new Set(["absolute","fixed"]);function cre(i,e){const t=Lp(i,!0,e==="fixed"),n=t.top+i.clientTop,r=t.left+i.clientLeft,s=ou(i)?Ug(i):iu(1),o=i.clientWidth*s.x,c=i.clientHeight*s.y,h=r*s.x,d=n*s.y;return{width:o,height:c,x:h,y:d}}function nP(i,e,t){let n;if(e==="viewport")n=ore(i,t);else if(e==="document")n=are(hu(i));else if(Aa(e))n=cre(e,t);else{const r=UV(i);n={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return jE(n)}function VV(i,e){const t=Kf(i);return t===e||!Aa(t)||sv(t)?!1:rl(t).position==="fixed"||VV(t,e)}function ure(i,e){const t=e.get(i);if(t)return t;let n=c0(i,[],!1).filter(c=>Aa(c)&&Cv(c)!=="body"),r=null;const s=rl(i).position==="fixed";let o=s?Kf(i):i;for(;Aa(o)&&!sv(o);){const c=rl(o),h=BR(o);!h&&c.position==="fixed"&&(r=null),(s?!h&&!r:!h&&c.position==="static"&&!!r&&lre.has(r.position)||O0(o)&&!h&&VV(i,o))?n=n.filter(m=>m!==o):r=c,o=Kf(o)}return e.set(i,n),n}function hre(i){let{element:e,boundary:t,rootBoundary:n,strategy:r}=i;const o=[...t==="clippingAncestors"?sM(e)?[]:ure(e,this._c):[].concat(t),n],c=o[0],h=o.reduce((d,m)=>{const g=nP(e,m,r);return d.top=Tp(g.top,d.top),d.right=av(g.right,d.right),d.bottom=av(g.bottom,d.bottom),d.left=Tp(g.left,d.left),d},nP(e,c,r));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function fre(i){const{width:e,height:t}=LV(i);return{width:e,height:t}}function dre(i,e,t){const n=ou(e),r=hu(e),s=t==="fixed",o=Lp(i,!0,s,e);let c={scrollLeft:0,scrollTop:0};const h=iu(0);function d(){h.x=lM(r)}if(n||!n&&!s)if((Cv(e)!=="body"||O0(r))&&(c=aM(e)),n){const S=Lp(e,!0,s,e);h.x=S.x+e.clientLeft,h.y=S.y+e.clientTop}else r&&d();s&&!n&&r&&d();const m=r&&!n&&!s?kV(r,c):iu(0),g=o.left+c.scrollLeft-h.x-m.x,_=o.top+c.scrollTop-h.y-m.y;return{x:g,y:_,width:o.width,height:o.height}}function T1(i){return rl(i).position==="static"}function iP(i,e){if(!ou(i)||rl(i).position==="fixed")return null;if(e)return e(i);let t=i.offsetParent;return hu(i)===t&&(t=t.ownerDocument.body),t}function BV(i,e){const t=Mo(i);if(sM(i))return t;if(!ou(i)){let r=Kf(i);for(;r&&!sv(r);){if(Aa(r)&&!T1(r))return r;r=Kf(r)}return t}let n=iP(i,e);for(;n&&Tie(n)&&T1(n);)n=iP(n,e);return n&&sv(n)&&T1(n)&&!BR(n)?t:n||Rie(i)||t}const pre=async function(i){const e=this.getOffsetParent||BV,t=this.getDimensions,n=await t(i.floating);return{reference:dre(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function mre(i){return rl(i).direction==="rtl"}const gre={convertOffsetParentRelativeRectToViewportRelativeRect:rre,getDocumentElement:hu,getClippingRect:hre,getOffsetParent:BV,getElementRects:pre,getClientRects:sre,getDimensions:fre,getScale:Ug,isElement:Aa,isRTL:mre};function zV(i,e){return i.x===e.x&&i.y===e.y&&i.width===e.width&&i.height===e.height}function vre(i,e){let t=null,n;const r=hu(i);function s(){var c;clearTimeout(n),(c=t)==null||c.disconnect(),t=null}function o(c,h){c===void 0&&(c=!1),h===void 0&&(h=1),s();const d=i.getBoundingClientRect(),{left:m,top:g,width:_,height:S}=d;if(c||e(),!_||!S)return;const M=qb(g),C=qb(r.clientWidth-(m+_)),w=qb(r.clientHeight-(g+S)),T=qb(m),I={rootMargin:-M+"px "+-C+"px "+-w+"px "+-T+"px",threshold:Tp(0,av(1,h))||1};let L=!0;function j(Y){const k=Y[0].intersectionRatio;if(k!==h){if(!L)return o();k?o(!1,k):n=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!zV(d,i.getBoundingClientRect())&&o(),L=!1}try{t=new IntersectionObserver(j,{...I,root:r.ownerDocument})}catch{t=new IntersectionObserver(j,I)}t.observe(i)}return o(!0),s}function yre(i,e,t,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:h=!1}=n,d=GR(i),m=r||s?[...d?c0(d):[],...c0(e)]:[];m.forEach(T=>{r&&T.addEventListener("scroll",t,{passive:!0}),s&&T.addEventListener("resize",t)});const g=d&&c?vre(d,t):null;let _=-1,S=null;o&&(S=new ResizeObserver(T=>{let[D]=T;D&&D.target===d&&S&&(S.unobserve(e),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var I;(I=S)==null||I.observe(e)})),t()}),d&&!h&&S.observe(d),S.observe(e));let M,C=h?Lp(i):null;h&&w();function w(){const T=Lp(i);C&&!zV(C,T)&&t(),C=T,M=requestAnimationFrame(w)}return t(),()=>{var T;m.forEach(D=>{r&&D.removeEventListener("scroll",t),s&&D.removeEventListener("resize",t)}),g?.(),(T=S)==null||T.disconnect(),S=null,h&&cancelAnimationFrame(M)}}const _re=tre,Sre=Jie,rP=Zie,bre=(i,e,t)=>{const n=new Map,r={platform:gre,...t},s={...r.platform,_c:n};return Kie(i,e,{...r,platform:s})};var xre=typeof document<"u",Ere=function(){},Sx=xre?ne.useLayoutEffect:Ere;function YE(i,e){if(i===e)return!0;if(typeof i!=typeof e)return!1;if(typeof i=="function"&&i.toString()===e.toString())return!0;let t,n,r;if(i&&e&&typeof i=="object"){if(Array.isArray(i)){if(t=i.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!YE(i[n],e[n]))return!1;return!0}if(r=Object.keys(i),t=r.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,r[n]))return!1;for(n=t;n--!==0;){const s=r[n];if(!(s==="_owner"&&i.$$typeof)&&!YE(i[s],e[s]))return!1}return!0}return i!==i&&e!==e}function FV(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function sP(i,e){const t=FV(i);return Math.round(e*t)/t}function M1(i){const e=ne.useRef(i);return Sx(()=>{e.current=i}),e}function Tre(i){i===void 0&&(i={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:r,elements:{reference:s,floating:o}={},transform:c=!0,whileElementsMounted:h,open:d}=i,[m,g]=ne.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[_,S]=ne.useState(n);YE(_,n)||S(n);const[M,C]=ne.useState(null),[w,T]=ne.useState(null),D=ne.useCallback(J=>{J!==Y.current&&(Y.current=J,C(J))},[]),I=ne.useCallback(J=>{J!==k.current&&(k.current=J,T(J))},[]),L=s||M,j=o||w,Y=ne.useRef(null),k=ne.useRef(null),V=ne.useRef(m),N=h!=null,O=M1(h),z=M1(r),W=M1(d),q=ne.useCallback(()=>{if(!Y.current||!k.current)return;const J={placement:e,strategy:t,middleware:_};z.current&&(J.platform=z.current),bre(Y.current,k.current,J).then(oe=>{const se={...oe,isPositioned:W.current!==!1};he.current&&!YE(V.current,se)&&(V.current=se,XP.flushSync(()=>{g(se)}))})},[_,e,t,z,W]);Sx(()=>{d===!1&&V.current.isPositioned&&(V.current.isPositioned=!1,g(J=>({...J,isPositioned:!1})))},[d]);const he=ne.useRef(!1);Sx(()=>(he.current=!0,()=>{he.current=!1}),[]),Sx(()=>{if(L&&(Y.current=L),j&&(k.current=j),L&&j){if(O.current)return O.current(L,j,q);q()}},[L,j,q,O,N]);const fe=ne.useMemo(()=>({reference:Y,floating:k,setReference:D,setFloating:I}),[D,I]),H=ne.useMemo(()=>({reference:L,floating:j}),[L,j]),K=ne.useMemo(()=>{const J={position:t,left:0,top:0};if(!H.floating)return J;const oe=sP(H.floating,m.x),se=sP(H.floating,m.y);return c?{...J,transform:"translate("+oe+"px, "+se+"px)",...FV(H.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:oe,top:se}},[t,c,H.floating,m.x,m.y]);return ne.useMemo(()=>({...m,update:q,refs:fe,elements:H,floatingStyles:K}),[m,q,fe,H,K])}const Mre=i=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:i,fn(t){const{element:n,padding:r}=typeof i=="function"?i(t):i;return n&&e(n)?n.current!=null?rP({element:n.current,padding:r}).fn(t):{}:n?rP({element:n,padding:r}).fn(t):{}}}},wre=(i,e)=>({..._re(i),options:[i,e]}),Are=(i,e)=>({...Sre(i),options:[i,e]}),Cre=(i,e)=>({...Mre(i),options:[i,e]}),Rre={...RP};let aP=!1,Dre=0;const oP=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Dre++;function Nre(){const[i,e]=ne.useState(()=>aP?oP():void 0);return qE(()=>{i==null&&e(oP())},[]),ne.useEffect(()=>{aP=!0},[]),i}const Ire=Rre.useId,HV=Ire||Nre,Ore=ne.forwardRef(function(e,t){const{context:{placement:n,elements:{floating:r},middlewareData:{arrow:s,shift:o}},width:c=14,height:h=7,tipRadius:d=0,strokeWidth:m=0,staticOffset:g,stroke:_,d:S,style:{transform:M,...C}={},...w}=e,T=HV(),[D,I]=ne.useState(!1);if(qE(()=>{if(!r)return;rl(r).direction==="rtl"&&I(!0)},[r]),!r)return null;const[L,j]=n.split("-"),Y=L==="top"||L==="bottom";let k=g;(Y&&o!=null&&o.x||!Y&&o!=null&&o.y)&&(k=null);const V=m*2,N=V/2,O=c/2*(d/-8+1),z=h/2*d/4,W=!!S,q=k&&j==="end"?"bottom":"top";let he=k&&j==="end"?"right":"left";k&&D&&(he=j==="end"?"left":"right");const fe=s?.x!=null?k||s.x:"",H=s?.y!=null?k||s.y:"",K=S||"M0,0"+(" H"+c)+(" L"+(c-O)+","+(h-z))+(" Q"+c/2+","+h+" "+O+","+(h-z))+" Z",J={top:W?"rotate(180deg)":"",left:W?"rotate(90deg)":"rotate(-90deg)",bottom:W?"":"rotate(180deg)",right:W?"rotate(-90deg)":"rotate(90deg)"}[L];return B.jsxs("svg",{...w,"aria-hidden":!0,ref:t,width:W?c:c+V,height:c,viewBox:"0 0 "+c+" "+(h>c?h:c),style:{position:"absolute",pointerEvents:"none",[he]:fe,[q]:H,[L]:Y||W?"100%":"calc(100% - "+V/2+"px)",transform:[J,M].filter(oe=>!!oe).join(" "),...C},children:[V>0&&B.jsx("path",{clipPath:"url(#"+T+")",fill:"none",stroke:_,strokeWidth:V+(S?0:1),d:K}),B.jsx("path",{stroke:V&&!S?w.fill:"none",d:K}),B.jsx("clipPath",{id:T,children:B.jsx("rect",{x:-N,y:N*(W?-1:1),width:c+V,height:c})})]})});function Pre(){const i=new Map;return{emit(e,t){var n;(n=i.get(e))==null||n.forEach(r=>r(t))},on(e,t){i.has(e)||i.set(e,new Set),i.get(e).add(t)},off(e,t){var n;(n=i.get(e))==null||n.delete(t)}}}const Lre=ne.createContext(null),Ure=ne.createContext(null),kre=()=>{var i;return((i=ne.useContext(Lre))==null?void 0:i.id)||null},Vre=()=>ne.useContext(Ure);function Bre(i){const{open:e=!1,onOpenChange:t,elements:n}=i,r=HV(),s=ne.useRef({}),[o]=ne.useState(()=>Pre()),c=kre()!=null,[h,d]=ne.useState(n.reference),m=Xie((S,M,C)=>{s.current.openEvent=S?M:void 0,o.emit("openchange",{open:S,event:M,reason:C,nested:c}),t?.(S,M,C)}),g=ne.useMemo(()=>({setPositionReference:d}),[]),_=ne.useMemo(()=>({reference:h||n.reference||null,floating:n.floating||null,domReference:n.reference}),[h,n.reference,n.floating]);return ne.useMemo(()=>({dataRef:s,open:e,onOpenChange:m,elements:_,events:o,floatingId:r,refs:g}),[e,m,_,o,r,g])}function zre(i){i===void 0&&(i={});const{nodeId:e}=i,t=Bre({...i,elements:{reference:null,floating:null,...i.elements}}),n=i.rootContext||t,r=n.elements,[s,o]=ne.useState(null),[c,h]=ne.useState(null),m=r?.domReference||s,g=ne.useRef(null),_=Vre();qE(()=>{m&&(g.current=m)},[m]);const S=Tre({...i,elements:{...r,...c&&{reference:c}}}),M=ne.useCallback(I=>{const L=Aa(I)?{getBoundingClientRect:()=>I.getBoundingClientRect(),getClientRects:()=>I.getClientRects(),contextElement:I}:I;h(L),S.refs.setReference(L)},[S.refs]),C=ne.useCallback(I=>{(Aa(I)||I===null)&&(g.current=I,o(I)),(Aa(S.refs.reference.current)||S.refs.reference.current===null||I!==null&&!Aa(I))&&S.refs.setReference(I)},[S.refs]),w=ne.useMemo(()=>({...S.refs,setReference:C,setPositionReference:M,domReference:g}),[S.refs,C,M]),T=ne.useMemo(()=>({...S.elements,domReference:m}),[S.elements,m]),D=ne.useMemo(()=>({...S,...n,refs:w,elements:T,nodeId:e}),[S,w,T,e,n]);return qE(()=>{n.dataRef.current.floatingContext=D;const I=_?.nodesRef.current.find(L=>L.id===e);I&&(I.context=D)}),ne.useMemo(()=>({...S,context:D,refs:w,elements:T}),[S,w,T,D])}/*!
  react-datepicker v9.1.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var LA=function(e,t){return LA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},LA(e,t)};function Ms(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");LA(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Rn=function(){return Rn=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Rn.apply(this,arguments)};function Wc(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))}var Fre=function(i){var e=i.showTimeSelectOnly,t=e===void 0?!1:e,n=i.showTime,r=n===void 0?!1:n,s=i.className,o=i.children,c=i.inline,h=t?"Choose Time":"Choose Date".concat(r?" and Time":"");return Ue.createElement("div",{className:s,"aria-label":h,role:c?void 0:"dialog","aria-modal":c?void 0:"true",translate:"no"},o)},Hre=function(i,e){var t=ne.useRef(null),n=ne.useRef(i);ne.useEffect(function(){n.current=i},[i]);var r=ne.useCallback(function(s){var o,c=s.composed&&s.composedPath&&s.composedPath().find(function(h){return h instanceof Node})||s.target;t.current&&!t.current.contains(c)&&(e&&c instanceof HTMLElement&&c.classList.contains(e)||(o=n.current)===null||o===void 0||o.call(n,s))},[e]);return ne.useEffect(function(){return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}},[r]),t},cM=function(i){var e=i.children,t=i.onClickOutside,n=i.className,r=i.containerRef,s=i.style,o=i.ignoreClass,c=Hre(t,o);return Ue.createElement("div",{className:n,style:s,ref:function(h){c.current=h,r&&(r.current=h)}},e)},Yb=null,lP=!1;function GV(){if(lP)return Yb;lP=!0;try{var i="date-fns-tz";Yb=require(i)}catch{Yb=null}return Yb}function cP(i,e){if(!e)return i;var t=GV();return t?t.toZonedTime(i,e):i}function Xu(i,e){if(!e)return i;var t=GV();return t?t.fromZonedTime(i,e):i}var yt;(function(i){i.ArrowUp="ArrowUp",i.ArrowDown="ArrowDown",i.ArrowLeft="ArrowLeft",i.ArrowRight="ArrowRight",i.PageUp="PageUp",i.PageDown="PageDown",i.Home="Home",i.End="End",i.Enter="Enter",i.Space=" ",i.Tab="Tab",i.Escape="Escape",i.Backspace="Backspace",i.X="x"})(yt||(yt={}));function jV(){var i=typeof window<"u"?window:globalThis;return i}var L0=12;function ti(i){if(i==null)return new Date;var e=typeof i=="string"?aie(i):Bt(i);return Xa(e)?e:new Date}function ip(i,e,t,n,r){r===void 0&&(r=ti());for(var s=lv(t)||lv(jR()),o=Array.isArray(e)?e:[e],c=0,h=o;c<h.length;c++){var d=h[c],m=eie(i,d,r,{locale:s});if(Xa(m)&&(!n||i===Bi(m,d,t)))return m}if(!n&&i&&i.length>=8){var g=new Date(i);if(rv(g))return g}return null}function Gre(i,e){if(e===void 0&&(e=ti()),!i)return null;var t=i.match(/\b(1\d{3}|2\d{3})\b/);if(!t||!t[1])return null;var n=parseInt(t[1],10),r=i.match(/(?:^|[/\-\s])?(0?[1-9]|1[0-2])(?:[/\-\s]|$)/),s=r&&r[1]?parseInt(r[1],10)-1:e.getMonth();return new Date(n,s,1)}function Xa(i){return rv(i)}function vp(i){return i==null?null:nu(i)&&rv(i)?i:null}function Bi(i,e,t){if(t==="en")return XO(i,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=t?lv(t):void 0;return t&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(t,'"].')),n=n||lv(jR()),XO(i,e,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function qa(i,e){var t=e.dateFormat,n=e.locale,r=Array.isArray(t)&&t.length>0?t[0]:t;return i&&Bi(i,r,n)||""}var qV=" - ";function jre(i,e,t){if(!i&&!e)return"";var n=i?qa(i,t):"",r=e?qa(e,t):"",s=t.rangeSeparator||qV;return"".concat(n).concat(s).concat(r)}function qre(i,e){if(!i?.length)return"";var t=i[0]?qa(i[0],e):"";if(i.length===1)return t;if(i.length===2&&i[1]){var n=qa(i[1],e);return"".concat(t,", ").concat(n)}var r=i.length-1;return"".concat(t," (+").concat(r,")")}function Ku(i,e){var t=e.hour,n=t===void 0?0:t,r=e.minute,s=r===void 0?0:r,o=e.second,c=o===void 0?0:o;return vx(yx(_x(i,c),s),n)}function Yre(i){return LR(i)}function Wre(i,e){return Bi(i,"ddd",e)}function h_(i){return Pp(i)}function kf(i,e,t){var n=lv(e||jR());return vh(i,{locale:n,weekStartsOn:t})}function ah(i){return SV(i)}function f_(i){return iM(i)}function uP(i){return DA(i)}function hP(){return Pp(ti())}function fP(i){return yV(i)}function Xre(i){return ote(i)}function Kre(i){return _V(i)}function Vc(i,e){return i&&e?rie(i,e):!i&&!e}function Ma(i,e){return i&&e?nie(i,e):!i&&!e}function WE(i,e){return i&&e?iie(i,e):!i&&!e}function Fn(i,e){return i&&e?ste(i,e):!i&&!e}function yp(i,e){return i&&e?sne(i,e):!i&&!e}function lp(i,e,t){var n,r=Pp(e),s=yV(t);try{n=l0(i,{start:r,end:s})}catch{n=!1}return n}function jR(){var i=jV();return i.__localeId__}function lv(i){if(typeof i=="string"){var e=jV();return e.__localeData__?e.__localeData__[i]:void 0}else return i}function Qre(i,e,t){return e(Bi(i,"EEEE",t))}function Zre(i,e){return Bi(i,"EEEEEE",e)}function Jre(i,e){return Bi(i,"EEE",e)}function qR(i,e){return Bi(So(ti(),i),"LLLL",e)}function YV(i,e){return Bi(So(ti(),i),"LLL",e)}function $re(i,e){return Bi(xg(ti(),i),"QQQ",e)}function Jo(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.maxDate,s=t.excludeDates,o=t.excludeDateIntervals,c=t.includeDates,h=t.includeDateIntervals,d=t.filterDate,m=t.disabled;return m?!0:U0(i,{minDate:n,maxDate:r})||s&&s.some(function(g){return g instanceof Date?Fn(i,g):Fn(i,g.date)})||o&&o.some(function(g){var _=g.start,S=g.end;return l0(i,{start:_,end:S})})||c&&!c.some(function(g){return Fn(i,g)})||h&&!h.some(function(g){var _=g.start,S=g.end;return l0(i,{start:_,end:S})})||d&&!d(ti(i))||!1}function YR(i,e){var t=e===void 0?{}:e,n=t.excludeDates,r=t.excludeDateIntervals;return r&&r.length>0?r.some(function(s){var o=s.start,c=s.end;return l0(i,{start:o,end:c})}):n&&n.some(function(s){var o;return s instanceof Date?Fn(i,s):Fn(i,(o=s.date)!==null&&o!==void 0?o:new Date)})||!1}function WV(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.maxDate,s=t.excludeDates,o=t.includeDates,c=t.filterDate;return U0(i,{minDate:n?SV(n):void 0,maxDate:r?_V(r):void 0})||s?.some(function(h){return Ma(i,h instanceof Date?h:h.date)})||o&&!o.some(function(h){return Ma(i,h)})||c&&!c(ti(i))||!1}function Wb(i,e,t,n){var r=Un(i),s=Qa(i),o=Un(e),c=Qa(e),h=Un(n);return r===o&&r===h?s<=t&&t<=c:r<o?h===r&&s<=t||h===o&&c>=t||h<o&&h>r:!1}function ese(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.maxDate,s=t.excludeDates,o=t.includeDates;return U0(i,{minDate:n,maxDate:r})||s&&s.some(function(c){return Ma(c instanceof Date?c:c.date,i)})||o&&!o.some(function(c){return Ma(c,i)})||!1}function Xb(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.maxDate,s=t.excludeDates,o=t.includeDates,c=t.filterDate,h=t.disabled;return h?!0:U0(i,{minDate:n,maxDate:r})||s?.some(function(d){return WE(i,d instanceof Date?d:d.date)})||o&&!o.some(function(d){return WE(i,d)})||c&&!c(ti(i))||!1}function Kb(i,e,t){if(!e||!t||!rv(e)||!rv(t))return!1;var n=Un(e),r=Un(t);return n<=i&&r>=i}function bx(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.maxDate,s=t.excludeDates,o=t.includeDates,c=t.filterDate,h=t.disabled;if(h)return!0;var d=new Date(i,0,1);return U0(d,{minDate:n?iM(n):void 0,maxDate:r?bV(r):void 0})||s?.some(function(m){return Vc(d,m instanceof Date?m:m.date)})||o&&!o.some(function(m){return Vc(d,m)})||c&&!c(ti(d))||!1}function Qb(i,e,t,n){var r=Un(i),s=Df(i),o=Un(e),c=Df(e),h=Un(n);return r===o&&r===h?s<=t&&t<=c:r<o?h===r&&s<=t||h===o&&c>=t||h<o&&h>r:!1}function U0(i,e){var t,n=e===void 0?{}:e,r=n.minDate,s=n.maxDate;return(t=r&&iv(i,r)<0||s&&iv(i,s)>0)!==null&&t!==void 0?t:!1}function dP(i,e){return e.some(function(t){return Ws(t)===Ws(i)&&Xs(t)===Xs(i)&&Uf(t)===Uf(i)})}function pP(i,e){var t=e===void 0?{}:e,n=t.excludeTimes,r=t.includeTimes,s=t.filterTime;return n&&dP(i,n)||r&&!dP(i,r)||s&&!s(i)||!1}function mP(i,e){var t=e.minTime,n=e.maxTime;if(!t||!n)throw new Error("Both minTime and maxTime props required");var r=ti();r=vx(r,Ws(i)),r=yx(r,Xs(i)),r=_x(r,Uf(i));var s=ti();s=vx(s,Ws(t)),s=yx(s,Xs(t)),s=_x(s,Uf(t));var o=ti();o=vx(o,Ws(n)),o=yx(o,Xs(n)),o=_x(o,Uf(n));var c;try{c=!l0(r,{start:s,end:o})}catch{c=!1}return c}function gP(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.includeDates,s=Ep(i,1);return n&&VE(n,s)>0||r&&r.every(function(o){return VE(o,s)>0})||!1}function vP(i,e){var t=e===void 0?{}:e,n=t.maxDate,r=t.includeDates,s=Zl(i,1);return n&&VE(s,n)>0||r&&r.every(function(o){return VE(s,o)>0})||!1}function tse(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.includeDates,s=iM(i),o=NV(s);return n&&BE(n,o)>0||r&&r.every(function(c){return BE(c,o)>0})||!1}function nse(i,e){var t=e===void 0?{}:e,n=t.maxDate,r=t.includeDates,s=bV(i),o=PR(s,1);return n&&BE(o,n)>0||r&&r.every(function(c){return BE(o,c)>0})||!1}function yP(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.includeDates,s=Xf(i,1);return n&&zE(n,s)>0||r&&r.every(function(o){return zE(o,s)>0})||!1}function ise(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.yearItemNumber,s=r===void 0?L0:r,o=f_(Xf(i,s)),c=eh(o,s).endPeriod,h=n&&Un(n);return h&&h>c||!1}function _P(i,e){var t=e===void 0?{}:e,n=t.maxDate,r=t.includeDates,s=jl(i,1);return n&&zE(s,n)>0||r&&r.every(function(o){return zE(s,o)>0})||!1}function rse(i,e){var t=e===void 0?{}:e,n=t.maxDate,r=t.yearItemNumber,s=r===void 0?L0:r,o=jl(i,s),c=eh(o,s).startPeriod,h=n&&Un(n);return h&&h<c||!1}function XV(i){var e=i.minDate,t=i.includeDates;if(t&&e){var n=t.filter(function(r){return iv(r,e)>=0});return HO(n)}else return t?HO(t):e}function KV(i){var e=i.maxDate,t=i.includeDates;if(t&&e){var n=t.filter(function(r){return iv(r,e)<=0});return FO(n)}else return t?FO(t):e}function SP(i,e){var t;i===void 0&&(i=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var n=new Map,r=0,s=i.length;r<s;r++){var o=i[r];if(nu(o)){var c=Bi(o,"MM.dd.yyyy"),h=n.get(c)||[];h.includes(e)||(h.push(e),n.set(c,h))}else if(typeof o=="object"){var d=Object.keys(o),m=(t=d[0])!==null&&t!==void 0?t:"",g=o[m];if(typeof m=="string"&&Array.isArray(g))for(var _=0,S=g.length;_<S;_++){var M=g[_];if(M){var c=Bi(M,"MM.dd.yyyy"),h=n.get(c)||[];h.includes(m)||(h.push(m),n.set(c,h))}}}}return n}function sse(i,e){return i.length!==e.length?!1:i.every(function(t,n){return t===e[n]})}function ase(i,e){i===void 0&&(i=[]),e===void 0&&(e="react-datepicker__day--holidays");var t=new Map;return i.forEach(function(n){var r=n.date,s=n.holidayName;if(nu(r)){var o=Bi(r,"MM.dd.yyyy"),c=t.get(o)||{className:"",holidayNames:[]};if(!("className"in c&&c.className===e&&sse(c.holidayNames,[s]))){c.className=e;var h=c.holidayNames;c.holidayNames=h?Wc(Wc([],h,!0),[s],!1):[s],t.set(o,c)}}}),t}function ose(i,e,t,n,r){for(var s=r.length,o=[],c=0;c<s;c++){var h=i,d=r[c];d&&(h=tte(h,Ws(d)),h=o0(h,Xs(d)),h=rte(h,Uf(d)));var m=o0(i,(t+1)*n);sh(h,e)&&Yc(h,m)&&d!=null&&o.push(d)}return o}function vg(i){return i<10?"0".concat(i):"".concat(i)}function eh(i,e){e===void 0&&(e=L0);var t=Math.ceil(Un(i)/e)*e,n=t-(e-1);return{startPeriod:n,endPeriod:t}}function lse(i){var e=new Date(i.getFullYear(),i.getMonth(),i.getDate()),t=new Date(i.getFullYear(),i.getMonth(),i.getDate(),24);return Math.round((+t-+e)/36e5)}function bP(i){var e=i.getSeconds(),t=i.getMilliseconds();return Bt(i.getTime()-e*1e3-t)}function QV(i,e){return bP(i).getTime()===bP(e).getTime()}function xP(i){if(!nu(i))throw new Error("Invalid date");var e=new Date(i);return e.setHours(0,0,0,0),e}function w1(i,e){if(!nu(i)||!nu(e))throw new Error("Invalid date received");var t=xP(i),n=xP(e);return Yc(t,n)}function ZV(i){return i.key===yt.Space}var A1=(function(i){Ms(e,i);function e(t){var n=i.call(this,t)||this;return n.inputRef=Ue.createRef(),n.onTimeChange=function(r){var s,o;n.setState({time:r});var c=n.props.date,h=c instanceof Date&&!isNaN(+c),d=h?c:new Date;if(r?.includes(":")){var m=r.split(":"),g=m[0],_=m[1];d.setHours(Number(g)),d.setMinutes(Number(_))}(o=(s=n.props).onChange)===null||o===void 0||o.call(s,d)},n.renderTimeInput=function(){var r=n.state.time,s=n.props,o=s.date,c=s.timeString,h=s.customTimeInput;return h?ne.cloneElement(h,{date:o,value:r,onChange:n.onTimeChange}):Ue.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var d;(d=n.inputRef.current)===null||d===void 0||d.focus()},required:!0,value:r,onChange:function(d){n.onTimeChange(d.target.value||c)}})},n.state={time:n.props.timeString},n}return e.getDerivedStateFromProps=function(t,n){return t.timeString!==n.time?{time:t.timeString}:null},e.prototype.render=function(){return Ue.createElement("div",{className:"react-datepicker__input-time-container"},Ue.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),Ue.createElement("div",{className:"react-datepicker-time__input-container"},Ue.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e})(ne.Component),cse=(function(i){Ms(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.dayEl=ne.createRef(),t.handleClick=function(n){!t.isDisabled()&&t.props.onClick&&t.props.onClick(n)},t.handleMouseEnter=function(n){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(n)},t.handleOnKeyDown=function(n){var r,s,o=n.key;o===yt.Space&&(n.preventDefault(),n.key=yt.Enter),(s=(r=t.props).handleOnKeyDown)===null||s===void 0||s.call(r,n)},t.isSameDay=function(n){return Fn(t.props.day,n)},t.isKeyboardSelected=function(){var n;if(t.props.disabledKeyboardNavigation)return!1;var r=t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(o){return t.isSameDayOrWeek(o)}):t.isSameDayOrWeek(t.props.selected),s=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!r&&t.isSameDayOrWeek(t.props.preSelection)&&!s},t.isDisabled=function(n){return n===void 0&&(n=t.props.day),Jo(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate,disabled:t.props.disabled})},t.isExcluded=function(){return YR(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return Fn(t.props.day,kf(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(n){return t.props.showWeekPicker&&Fn(n,kf(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(n){return t.isSameDay(n)||t.isSameWeek(n)},t.getHighLightedClass=function(){var n=t.props,r=n.day,s=n.highlightDates;if(!s)return!1;var o=Bi(r,"MM.dd.yyyy");return s.get(o)},t.getHolidaysClass=function(){var n,r=t.props,s=r.day,o=r.holidays;if(!o)return[void 0];var c=Bi(s,"MM.dd.yyyy");return o.has(c)?[(n=o.get(c))===null||n===void 0?void 0:n.className]:[void 0]},t.isInRange=function(){var n=t.props,r=n.day,s=n.startDate,o=n.endDate;return!s||!o?!1:lp(r,s,o)},t.isInSelectingRange=function(){var n,r=t.props,s=r.day,o=r.selectsStart,c=r.selectsEnd,h=r.selectsRange,d=r.selectsDisabledDaysInRange,m=r.startDate,g=r.swapRange,_=r.endDate,S=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;if(t.isAfterMonth()||t.isBeforeMonth()||!(o||c||h)||!S||!d&&t.isDisabled())return!1;if(o&&_&&(Yc(S,_)||yp(S,_)))return lp(s,S,_);if(c&&m&&(sh(S,m)||yp(S,m)))return lp(s,m,S);if(h&&m&&!_){if(yp(S,m)||sh(S,m))return lp(s,m,S);if(g&&Yc(S,m))return lp(s,S,m)}return!1},t.isSelectingRangeStart=function(){var n;if(!t.isInSelectingRange())return!1;var r=t.props,s=r.day,o=r.startDate,c=r.selectsStart,h=r.swapRange,d=r.selectsRange,m=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return c?Fn(s,m):d&&h&&o&&m?Fn(s,Yc(m,o)?m:o):Fn(s,o)},t.isSelectingRangeEnd=function(){var n;if(!t.isInSelectingRange())return!1;var r=t.props,s=r.day,o=r.endDate,c=r.selectsEnd,h=r.selectsRange,d=r.swapRange,m=r.startDate,g=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return c?Fn(s,g):h&&d&&m&&g?Fn(s,Yc(g,m)?m:g):h?Fn(s,g):Fn(s,o)},t.isRangeStart=function(){var n=t.props,r=n.day,s=n.startDate,o=n.endDate;return!s||!o?!1:Fn(s,r)},t.isRangeEnd=function(){var n=t.props,r=n.day,s=n.startDate,o=n.endDate;return!s||!o?!1:Fn(o,r)},t.isWeekend=function(){var n=tne(t.props.day);return n===0||n===6},t.isAfterMonth=function(){return t.props.month!==void 0&&(t.props.month+1)%12===Qa(t.props.day)},t.isBeforeMonth=function(){return t.props.month!==void 0&&(Qa(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(ti())},t.isSelected=function(){var n;return t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(r){return t.isSameDayOrWeek(r)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(n){var r=t.props.dayClassName?t.props.dayClassName(n):void 0;return Gr("react-datepicker__day",r,"react-datepicker__day--"+Wre(t.props.day),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var n=t.props,r=n.day,s=n.ariaLabelPrefixWhenEnabled,o=s===void 0?"Choose":s,c=n.ariaLabelPrefixWhenDisabled,h=c===void 0?"Not available":c,d=t.isDisabled()||t.isExcluded()?h:o;return"".concat(d," ").concat(Bi(r,"PPPP",t.props.locale))},t.getTitle=function(){var n=t.props,r=n.day,s=n.holidays,o=s===void 0?new Map:s,c=n.excludeDates,h=Bi(r,"MM.dd.yyyy"),d=[];return o.has(h)&&d.push.apply(d,o.get(h).holidayNames),t.isExcluded()&&d.push(c?.filter(function(m){return m instanceof Date?Fn(m,r):Fn(m?.date,r)}).map(function(m){if(!(m instanceof Date))return m?.message})),d.join(", ")},t.getTabIndex=function(){var n=t.props.selected,r=t.props.preSelection,s=!(t.props.showWeekPicker&&(t.props.showWeekNumber||!t.isStartOfWeek()))&&(t.isKeyboardSelected()||t.isSameDay(n)&&Fn(r,n))?0:-1;return s},t.handleFocusDay=function(){var n;t.shouldFocusDay()&&((n=t.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(KO(t.props.day),t.props.day):KO(t.props.day)},t.render=function(){return Ue.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"gridcell",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),t.getTitle()!==""&&Ue.createElement("span",{className:"overlay"},t.getTitle()))},t}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var t=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(t=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(t=!1),this.isDayActiveElement()&&(t=!0),this.isDuplicateDay()&&(t=!1)),t},e.prototype.isDayActiveElement=function(){var t,n,r;return((n=(t=this.props.containerRef)===null||t===void 0?void 0:t.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((r=document.activeElement)===null||r===void 0?void 0:r.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e})(ne.Component),use=(function(i){Ms(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.weekNumberEl=ne.createRef(),t.handleClick=function(n){t.props.onClick&&t.props.onClick(n)},t.handleOnKeyDown=function(n){var r,s,o=n.key;o===yt.Space&&(n.preventDefault(),n.key=yt.Enter),(s=(r=t.props).handleOnKeyDown)===null||s===void 0||s.call(r,n)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Fn(t.props.date,t.props.selected)&&Fn(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||Fn(t.props.date,t.props.selected)&&Fn(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(n){var r=!1;t.getTabIndex()===0&&!n?.isInputFocused&&Fn(t.props.date,t.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(r=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(r=!0)),r&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(t){this.handleFocusWeekNumber(t)},e.prototype.render=function(){var t=this.props,n=t.weekNumber,r=t.isWeekDisabled,s=t.ariaLabelPrefix,o=s===void 0?e.defaultProps.ariaLabelPrefix:s,c=t.onClick,h={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!c&&!r,"react-datepicker__week-number--selected":!!c&&Fn(this.props.date,this.props.selected)};return Ue.createElement("div",{ref:this.weekNumberEl,className:Gr(h),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},n)},e})(ne.Component),hse=(function(i){Ms(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isDisabled=function(n){return Jo(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.handleDayClick=function(n,r){t.props.onDayClick&&t.props.onDayClick(n,r)},t.handleDayMouseEnter=function(n){t.props.onDayMouseEnter&&t.props.onDayMouseEnter(n)},t.handleWeekClick=function(n,r,s){for(var o,c,h,d=new Date(n),m=0;m<7;m++){var g=new Date(n);g.setDate(g.getDate()+m);var _=!t.isDisabled(g);if(_){d=g;break}}typeof t.props.onWeekSelect=="function"&&t.props.onWeekSelect(d,r,s),t.props.showWeekPicker&&t.handleDayClick(d,s),((o=t.props.shouldCloseOnSelect)!==null&&o!==void 0?o:e.defaultProps.shouldCloseOnSelect)&&((h=(c=t.props).setOpen)===null||h===void 0||h.call(c,!1))},t.formatWeekNumber=function(n){return t.props.formatWeekNumber?t.props.formatWeekNumber(n):Yre(n)},t.isWeekDisabled=function(){for(var n=t.startOfWeek(),r=Gl(n,6),s=new Date(n);s<=r;){if(!t.isDisabled(s))return!1;s=Gl(s,1)}return!0},t.renderDays=function(){var n=t.startOfWeek(),r=[],s=t.formatWeekNumber(n);if(t.props.showWeekNumber){var o=t.props.onWeekSelect||t.props.showWeekPicker?t.handleWeekClick.bind(t,n,s):void 0;r.push(Ue.createElement(use,Rn({key:"W"},e.defaultProps,t.props,{weekNumber:s,isWeekDisabled:t.isWeekDisabled(),date:n,onClick:o})))}return r.concat([0,1,2,3,4,5,6].map(function(c){var h=Gl(n,c);return Ue.createElement(cse,Rn({},e.defaultProps,t.props,{ariaLabelPrefixWhenEnabled:t.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:t.props.disabledDayAriaLabelPrefix,key:h.valueOf(),day:h,onClick:t.handleDayClick.bind(t,h),onMouseEnter:t.handleDayMouseEnter.bind(t,h)}))}))},t.startOfWeek=function(){return kf(t.props.day,t.props.locale,t.props.calendarStartDay)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Fn(t.startOfWeek(),t.props.selected)&&Fn(t.startOfWeek(),t.props.preSelection)},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var t={"react-datepicker__week":!0,"react-datepicker__week--selected":Fn(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},n=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return Ue.createElement("div",{className:Gr(t,n),role:"row"},this.renderDays())},e})(ne.Component),t_,fse=6,kg={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},C1=(t_={},t_[kg.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},t_[kg.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},t_[kg.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},t_),Zb=1;function EP(i,e){return i?kg.FOUR_COLUMNS:e?kg.TWO_COLUMNS:kg.THREE_COLUMNS}var dse=(function(i){Ms(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.MONTH_REFS=Wc([],Array(12),!0).map(function(){return ne.createRef()}),t.QUARTER_REFS=Wc([],Array(4),!0).map(function(){return ne.createRef()}),t.isDisabled=function(n){return Jo(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate,disabled:t.props.disabled})},t.isExcluded=function(n){return YR(n,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(n,r){var s,o;(o=(s=t.props).onDayClick)===null||o===void 0||o.call(s,n,r,t.props.orderInDisplay)},t.handleDayMouseEnter=function(n){var r,s;(s=(r=t.props).onDayMouseEnter)===null||s===void 0||s.call(r,n)},t.handleMouseLeave=function(){var n,r;(r=(n=t.props).onMouseLeave)===null||r===void 0||r.call(n)},t.isRangeStartMonth=function(n){var r=t.props,s=r.day,o=r.startDate,c=r.endDate;return!o||!c?!1:Ma(So(s,n),o)},t.isRangeStartQuarter=function(n){var r=t.props,s=r.day,o=r.startDate,c=r.endDate;return!o||!c?!1:WE(xg(s,n),o)},t.isRangeEndMonth=function(n){var r=t.props,s=r.day,o=r.startDate,c=r.endDate;return!o||!c?!1:Ma(So(s,n),c)},t.isRangeEndQuarter=function(n){var r=t.props,s=r.day,o=r.startDate,c=r.endDate;return!o||!c?!1:WE(xg(s,n),c)},t.isInSelectingRangeMonth=function(n){var r,s=t.props,o=s.day,c=s.selectsStart,h=s.selectsEnd,d=s.selectsRange,m=s.startDate,g=s.endDate,_=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return!(c||h||d)||!_?!1:c&&g?Wb(_,g,n,o):h&&m||d&&m&&!g?Wb(m,_,n,o):!1},t.isSelectingMonthRangeStart=function(n){var r;if(!t.isInSelectingRangeMonth(n))return!1;var s=t.props,o=s.day,c=s.startDate,h=s.selectsStart,d=So(o,n),m=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return h?Ma(d,m):Ma(d,c)},t.isSelectingMonthRangeEnd=function(n){var r;if(!t.isInSelectingRangeMonth(n))return!1;var s=t.props,o=s.day,c=s.endDate,h=s.selectsEnd,d=s.selectsRange,m=So(o,n),g=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return h||d?Ma(m,g):Ma(m,c)},t.isInSelectingRangeQuarter=function(n){var r,s=t.props,o=s.day,c=s.selectsStart,h=s.selectsEnd,d=s.selectsRange,m=s.startDate,g=s.endDate,_=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return!(c||h||d)||!_?!1:c&&g?Qb(_,g,n,o):h&&m||d&&m&&!g?Qb(m,_,n,o):!1},t.isWeekInMonth=function(n){var r=t.props.day,s=Gl(n,6);return Ma(n,r)||Ma(s,r)},t.isCurrentMonth=function(n,r){return Un(n)===Un(ti())&&r===Qa(ti())},t.isCurrentQuarter=function(n,r){return Un(n)===Un(ti())&&r===Df(ti())},t.isSelectedMonth=function(n,r,s){return Qa(s)===r&&Un(n)===Un(s)},t.isSelectMonthInList=function(n,r,s){return s.some(function(o){return t.isSelectedMonth(n,r,o)})},t.isSelectedQuarter=function(n,r,s){return Df(s)===r&&Un(n)===Un(s)},t.isSelectQuarterInList=function(n,r,s){return s.some(function(o){return t.isSelectedQuarter(n,r,o)})},t.isMonthSelected=function(){var n=t.props,r=n.day,s=n.selected,o=n.selectedDates,c=n.selectsMultiple,h=Qa(r);return c?o?.some(function(d){return t.isSelectedMonth(r,h,d)}):!!s&&t.isSelectedMonth(r,h,s)},t.isQuarterSelected=function(){var n=t.props,r=n.day,s=n.selected,o=n.selectedDates,c=n.selectsMultiple,h=Df(r);return c?o?.some(function(d){return t.isSelectedQuarter(r,h,d)}):!!s&&t.isSelectedQuarter(r,h,s)},t.renderWeeks=function(){if(!Xa(t.props.day))return[];for(var n=[],r=t.props.fixedHeight,s=0,o=!1,c=kf(ah(t.props.day),t.props.locale,t.props.calendarStartDay),h=function(M){return t.props.showWeekPicker?kf(M,t.props.locale,t.props.calendarStartDay):t.props.preSelection},d=function(M){return t.props.showWeekPicker?kf(M,t.props.locale,t.props.calendarStartDay):t.props.selected},m=t.props.selected?d(t.props.selected):void 0,g=t.props.preSelection?h(t.props.preSelection):void 0;n.push(Ue.createElement(hse,Rn({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:s,day:c,month:Qa(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:m,preSelection:g,showWeekNumber:t.props.showWeekNumbers}))),!o;){s++,c=kE(c,1);var _=r&&s>=fse,S=!r&&!t.isWeekInMonth(c);if(_||S)if(t.props.peekNextMonth)o=!0;else break}return n},t.onMonthClick=function(n,r){var s=t.isMonthDisabledForLabelDate(r),o=s.isDisabled,c=s.labelDate;o||t.handleDayClick(ah(c),n)},t.onMonthMouseEnter=function(n){var r=t.isMonthDisabledForLabelDate(n),s=r.isDisabled,o=r.labelDate;s||t.handleDayMouseEnter(ah(o))},t.handleMonthNavigation=function(n,r){var s,o,c,h;(o=(s=t.props).setPreSelection)===null||o===void 0||o.call(s,r),(h=(c=t.MONTH_REFS[n])===null||c===void 0?void 0:c.current)===null||h===void 0||h.focus()},t.handleKeyboardNavigation=function(n,r,s){var o,c=t.props,h=c.selected,d=c.preSelection,m=c.setPreSelection,g=c.minDate,_=c.maxDate,S=c.showFourColumnMonthYearPicker,M=c.showTwoColumnMonthYearPicker;if(d){var C=EP(S,M),w=t.getVerticalOffset(C),T=(o=C1[C])===null||o===void 0?void 0:o.grid,D=function(k,V,N){var O,z,W=V,q=N;switch(k){case yt.ArrowRight:W=Zl(V,Zb),q=N===11?0:N+Zb;break;case yt.ArrowLeft:W=Ep(V,Zb),q=N===0?11:N-Zb;break;case yt.ArrowUp:W=Ep(V,w),q=!((O=T?.[0])===null||O===void 0)&&O.includes(N)?N+12-w:N-w;break;case yt.ArrowDown:W=Zl(V,w),q=!((z=T?.[T.length-1])===null||z===void 0)&&z.includes(N)?N-12+w:N+w;break}return{newCalculatedDate:W,newCalculatedMonth:q}},I=function(k,V,N){for(var O=40,z=k,W=!1,q=0,he=D(z,V,N),fe=he.newCalculatedDate,H=he.newCalculatedMonth;!W;){if(q>=O){fe=V,H=N;break}if(g&&fe<g){z=yt.ArrowRight;var K=D(z,fe,H);fe=K.newCalculatedDate,H=K.newCalculatedMonth}if(_&&fe>_){z=yt.ArrowLeft;var K=D(z,fe,H);fe=K.newCalculatedDate,H=K.newCalculatedMonth}if(ese(fe,t.props)){var K=D(z,fe,H);fe=K.newCalculatedDate,H=K.newCalculatedMonth}else W=!0;q++}return{newCalculatedDate:fe,newCalculatedMonth:H}};if(r===yt.Enter){t.isMonthDisabled(s)||(t.onMonthClick(n,s),m?.(h));return}var L=I(r,d,s),j=L.newCalculatedDate,Y=L.newCalculatedMonth;switch(r){case yt.ArrowRight:case yt.ArrowLeft:case yt.ArrowUp:case yt.ArrowDown:t.handleMonthNavigation(Y,j);break}}},t.getVerticalOffset=function(n){var r,s;return(s=(r=C1[n])===null||r===void 0?void 0:r.verticalNavigationOffset)!==null&&s!==void 0?s:0},t.onMonthKeyDown=function(n,r){var s=t.props,o=s.disabledKeyboardNavigation,c=s.handleOnMonthKeyDown,h=n.key;h!==yt.Tab&&n.preventDefault(),o||t.handleKeyboardNavigation(n,h,r),c&&c(n)},t.onQuarterClick=function(n,r){var s=xg(t.props.day,r);Xb(s,t.props)||t.handleDayClick(uP(s),n)},t.onQuarterMouseEnter=function(n){var r=xg(t.props.day,n);Xb(r,t.props)||t.handleDayMouseEnter(uP(r))},t.handleQuarterNavigation=function(n,r){var s,o,c,h;t.isDisabled(r)||t.isExcluded(r)||((o=(s=t.props).setPreSelection)===null||o===void 0||o.call(s,r),(h=(c=t.QUARTER_REFS[n-1])===null||c===void 0?void 0:c.current)===null||h===void 0||h.focus())},t.onQuarterKeyDown=function(n,r){var s,o,c=n.key;if(!t.props.disabledKeyboardNavigation)switch(c){case yt.Enter:t.onQuarterClick(n,r),(o=(s=t.props).setPreSelection)===null||o===void 0||o.call(s,t.props.selected);break;case yt.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(r===4?1:r+1,PR(t.props.preSelection,1));break;case yt.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(r===1?4:r-1,NV(t.props.preSelection));break}},t.isMonthDisabledForLabelDate=function(n){var r,s=t.props,o=s.day,c=s.disabled,h=s.minDate,d=s.maxDate,m=s.excludeDates,g=s.includeDates,_=So(o,n);return c?{isDisabled:!0,labelDate:So(o,n)}:{isDisabled:(r=(h||d||m||g)&&WV(_,t.props))!==null&&r!==void 0?r:!1,labelDate:_}},t.isMonthDisabled=function(n){var r=t.isMonthDisabledForLabelDate(n).isDisabled;return r},t.getMonthClassNames=function(n){var r=t.props,s=r.day,o=r.startDate,c=r.endDate,h=r.preSelection,d=r.monthClassName,m=d?d(So(s,n)):void 0,g=t.getSelection();return Gr("react-datepicker__month-text","react-datepicker__month-".concat(n),m,{"react-datepicker__month-text--disabled":t.isMonthDisabled(n),"react-datepicker__month-text--selected":g?t.isSelectMonthInList(s,n,g):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&h&&t.isSelectedMonth(s,n,h)&&!t.isMonthSelected()&&!t.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":o&&c?Wb(o,c,n,s):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(n),"react-datepicker__month-text--range-end":t.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":t.isCurrentMonth(s,n)})},t.getTabIndex=function(n){if(t.props.preSelection==null)return"-1";var r=Qa(t.props.preSelection),s=t.isMonthDisabledForLabelDate(r).isDisabled,o=n===r&&!(s||t.props.disabledKeyboardNavigation)?"0":"-1";return o},t.getQuarterTabIndex=function(n){if(t.props.preSelection==null)return"-1";var r=Df(t.props.preSelection),s=Xb(t.props.day,t.props),o=n===r&&!(s||t.props.disabledKeyboardNavigation)?"0":"-1";return o},t.getAriaLabel=function(n){var r=t.props,s=r.chooseDayAriaLabelPrefix,o=s===void 0?"Choose":s,c=r.disabledDayAriaLabelPrefix,h=c===void 0?"Not available":c,d=r.day,m=r.locale,g=So(d,n),_=t.isDisabled(g)||t.isExcluded(g)?h:o;return"".concat(_," ").concat(Bi(g,"MMMM yyyy",m))},t.getQuarterClassNames=function(n){var r=t.props,s=r.day,o=r.startDate,c=r.endDate,h=r.minDate,d=r.maxDate,m=r.excludeDates,g=r.includeDates,_=r.filterDate,S=r.preSelection,M=r.disabledKeyboardNavigation,C=r.disabled,w=(h||d||m||g||_||C)&&Xb(xg(s,n),t.props),T=t.getSelection();return Gr("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":w,"react-datepicker__quarter-text--selected":T?t.isSelectQuarterInList(s,n,T):void 0,"react-datepicker__quarter-text--keyboard-selected":!M&&S&&t.isSelectedQuarter(s,n,S)&&!t.isQuarterSelected()&&!w,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":o&&c?Qb(o,c,n,s):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":t.isCurrentQuarter(s,n)})},t.getMonthContent=function(n){var r=t.props,s=r.showFullMonthYearPicker,o=r.renderMonthContent,c=r.locale,h=r.day,d=YV(n,c),m=qR(n,c);return o?o(n,d,m,h):s?m:d},t.getQuarterContent=function(n){var r,s=t.props,o=s.renderQuarterContent,c=s.locale,h=$re(n,c);return(r=o?.(n,h))!==null&&r!==void 0?r:h},t.renderMonths=function(){var n,r=t.props,s=r.showTwoColumnMonthYearPicker,o=r.showFourColumnMonthYearPicker,c=r.day,h=r.selected,d=(n=C1[EP(o,s)])===null||n===void 0?void 0:n.grid;return d?.map(function(m,g){return Ue.createElement("div",{className:"react-datepicker__month-wrapper",key:g},m.map(function(_,S){return Ue.createElement("div",{ref:t.MONTH_REFS[_],key:S,onClick:function(M){t.onMonthClick(M,_)},onKeyDown:function(M){ZV(M)&&(M.preventDefault(),M.key=yt.Enter),t.onMonthKeyDown(M,_)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(_)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(_)}:void 0,tabIndex:Number(t.getTabIndex(_)),className:t.getMonthClassNames(_),"aria-disabled":t.isMonthDisabled(_),role:"option","aria-label":t.getAriaLabel(_),"aria-current":t.isCurrentMonth(c,_)?"date":void 0,"aria-selected":h?t.isSelectedMonth(c,_,h):void 0},t.getMonthContent(_))}))})},t.renderQuarters=function(){var n=t.props,r=n.day,s=n.selected,o=[1,2,3,4];return Ue.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(c,h){return Ue.createElement("div",{key:h,ref:t.QUARTER_REFS[h],role:"option",onClick:function(d){t.onQuarterClick(d,c)},onKeyDown:function(d){t.onQuarterKeyDown(d,c)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(c)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(c)}:void 0,className:t.getQuarterClassNames(c),"aria-selected":s?t.isSelectedQuarter(r,c,s):void 0,tabIndex:Number(t.getQuarterTabIndex(c)),"aria-current":t.isCurrentQuarter(r,c)?"date":void 0},t.getQuarterContent(c))}))},t.getClassNames=function(){var n=t.props,r=n.selectingDate,s=n.selectsStart,o=n.selectsEnd,c=n.showMonthYearPicker,h=n.showQuarterYearPicker,d=n.showWeekPicker;return Gr("react-datepicker__month",{"react-datepicker__month--selecting-range":r&&(s||o)},{"react-datepicker__monthPicker":c},{"react-datepicker__quarterPicker":h},{"react-datepicker__weekPicker":d})},t}return e.prototype.getSelection=function(){var t=this.props,n=t.selected,r=t.selectedDates,s=t.selectsMultiple;if(s)return r;if(n)return[n]},e.prototype.render=function(){var t=this.props,n=t.showMonthYearPicker,r=t.showQuarterYearPicker,s=t.day,o=t.ariaLabelPrefix,c=o===void 0?"Month ":o,h=c?c.trim()+" ":"",d=Xa(s)?"".concat(h).concat(Bi(s,"MMMM, yyyy",this.props.locale)):"",m=n||r;return m?Ue.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":d,role:"listbox"},n?this.renderMonths():this.renderQuarters()):Ue.createElement("div",{role:"table"},this.props.dayNamesHeader&&Ue.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),this.props.monthHeader&&Ue.createElement("div",{role:"rowgroup"},this.props.monthHeader),Ue.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":d,role:"rowgroup"},this.renderWeeks()),this.props.monthFooter&&Ue.createElement("div",{role:"rowgroup"},this.props.monthFooter))},e})(ne.Component),pse=(function(i){Ms(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.monthOptionButtonsRef={},t.isSelectedMonth=function(n){return t.props.month===n},t.handleOptionKeyDown=function(n,r){var s;switch(r.key){case"Enter":r.preventDefault(),t.onChange(n);break;case"Escape":r.preventDefault(),t.props.onCancel();break;case"ArrowUp":case"ArrowDown":{r.preventDefault();var o=(n+(r.key==="ArrowUp"?-1:1)+t.props.monthNames.length)%t.props.monthNames.length;(s=t.monthOptionButtonsRef[o])===null||s===void 0||s.focus();break}}},t.renderOptions=function(){return t.monthOptionButtonsRef={},t.props.monthNames.map(function(n,r){return Ue.createElement("div",{ref:function(s){t.monthOptionButtonsRef[r]=s,t.isSelectedMonth(r)&&s?.focus()},role:"button",tabIndex:0,className:t.isSelectedMonth(r)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:t.onChange.bind(t,r),onKeyDown:t.handleOptionKeyDown.bind(t,r),"aria-selected":t.isSelectedMonth(r)?"true":void 0},t.isSelectedMonth(r)?Ue.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",n)})},t.onChange=function(n){return t.props.onChange(n)},t.handleClickOutside=function(){return t.props.onCancel()},t}return e.prototype.render=function(){return Ue.createElement(cM,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},e})(ne.Component),mse=(function(i){Ms(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(n){return n.map(function(r,s){return Ue.createElement("option",{key:r,value:s},r)})},t.renderSelectMode=function(n){return Ue.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(r){return t.onChange(parseInt(r.target.value))}},t.renderSelectOptions(n))},t.renderReadView=function(n,r){return Ue.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},Ue.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),Ue.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},r[t.props.month]))},t.renderDropdown=function(n){return Ue.createElement(pse,Rn({key:"dropdown"},t.props,{monthNames:n,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(n){var r=t.state.dropdownVisible,s=[t.renderReadView(!r,n)];return r&&s.unshift(t.renderDropdown(n)),s},t.onChange=function(n){t.toggleDropdown(),n!==t.props.month&&t.props.onChange(n)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return e.prototype.render=function(){var t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(s){return YV(s,t.props.locale)}:function(s){return qR(s,t.props.locale)}),r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode(n);break;case"select":r=this.renderSelectMode(n);break}return Ue.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},r)},e})(ne.Component),TP=5;function gse(i,e,t){for(var n=[],r=i??Xf(t,TP),s=e??jl(t,TP),o=ah(r),c=ah(s);!sh(o,c);)n.push(ti(o)),o=Zl(o,1);return n}var vse=(function(i){Ms(e,i);function e(t){var n=i.call(this,t)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(r){var s=IA(r),o=Vc(n.props.date,r)&&Ma(n.props.date,r);return Ue.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:s,onClick:n.onChange.bind(n,s),"aria-selected":o?"true":void 0},o?Ue.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",Bi(r,n.props.dateFormat,n.props.locale))})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:gse(n.props.minDate,n.props.maxDate,n.props.date)},n}return e.prototype.render=function(){var t=Gr({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return Ue.createElement(cM,{className:t,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(ne.Component),MP=5,yse=(function(i){Ms(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n,r,s=(n=t.props.minDate)!==null&&n!==void 0?n:Xf(t.props.date,MP),o=(r=t.props.maxDate)!==null&&r!==void 0?r:jl(t.props.date,MP),c=ah(s),h=ah(o),d=[];!sh(c,h);){var m=IA(c);d.push(Ue.createElement("option",{key:m,value:m},Bi(c,t.props.dateFormat,t.props.locale))),c=Zl(c,1)}return d},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return Ue.createElement("select",{value:IA(ah(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){var r=Bi(t.props.date,t.props.dateFormat,t.props.locale);return Ue.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},Ue.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),Ue.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},r))},t.renderDropdown=function(){return Ue.createElement(vse,Rn({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,r=[t.renderReadView(!n)];return n&&r.unshift(t.renderDropdown()),r},t.onChange=function(n){t.toggleDropdown();var r=ti(n);Vc(t.props.date,r)&&Ma(t.props.date,r)||t.props.onChange(r)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return e.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return Ue.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},t)},e})(ne.Component),_se=(function(i){Ms(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.state={height:null},t.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,r,s;t.list&&(t.list.scrollTop=(s=t.centerLi&&e.calcCenterPosition(t.props.monthRef?t.props.monthRef.clientHeight-((r=(n=t.header)===null||n===void 0?void 0:n.clientHeight)!==null&&r!==void 0?r:0):t.list.clientHeight,t.centerLi))!==null&&s!==void 0?s:0)})},t.handleClick=function(n){var r,s;(t.props.minTime||t.props.maxTime)&&mP(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&pP(n,t.props)||(s=(r=t.props).onChange)===null||s===void 0||s.call(r,n)},t.isSelectedTime=function(n){var r=vp(t.props.selected);return r&&QV(r,n)},t.isDisabledTime=function(n){return(t.props.minTime||t.props.maxTime)&&mP(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&pP(n,t.props)},t.liClasses=function(n){var r,s=["react-datepicker__time-list-item",t.props.timeClassName?t.props.timeClassName(n):void 0];return t.isSelectedTime(n)&&s.push("react-datepicker__time-list-item--selected"),t.isDisabledTime(n)&&s.push("react-datepicker__time-list-item--disabled"),t.props.injectTimes&&(Ws(n)*3600+Xs(n)*60+Uf(n))%(((r=t.props.intervals)!==null&&r!==void 0?r:e.defaultProps.intervals)*60)!==0&&s.push("react-datepicker__time-list-item--injected"),s.join(" ")},t.handleOnKeyDown=function(n,r){var s,o;n.key===yt.Space&&(n.preventDefault(),n.key=yt.Enter),(n.key===yt.ArrowUp||n.key===yt.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===yt.ArrowDown||n.key===yt.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===yt.Enter&&t.handleClick(r),(o=(s=t.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},t.renderTimes=function(){for(var n,r=[],s=typeof t.props.format=="string"?t.props.format:"p",o=(n=t.props.intervals)!==null&&n!==void 0?n:e.defaultProps.intervals,c=vp(t.props.selected)||vp(t.props.openToDate)||ti(),h=h_(c),d=t.props.injectTimes&&t.props.injectTimes.sort(function(w,T){return w.getTime()-T.getTime()}),m=60*lse(c),g=m/o,_=0;_<g;_++){var S=o0(h,_*o);if(r.push(S),d){var M=ose(h,S,_,o,d);r=r.concat(M)}}var C=r.reduce(function(w,T){return T.getTime()<=c.getTime()?T:w},r[0]);return r.map(function(w){return Ue.createElement("li",{key:w.valueOf(),onClick:t.handleClick.bind(t,w),className:t.liClasses(w),ref:function(T){w===C&&(t.centerLi=T)},onKeyDown:function(T){t.handleOnKeyDown(T,w)},tabIndex:w===C?0:-1,role:"option","aria-selected":t.isSelectedTime(w)?"true":void 0,"aria-disabled":t.isDisabledTime(w)?"true":void 0},Bi(w,s,t.props.locale))})},t.renderTimeCaption=function(){return t.props.showTimeCaption===!1?Ue.createElement(Ue.Fragment,null):Ue.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(t.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){t.header=n}},Ue.createElement("div",{className:"react-datepicker-time__header"},t.props.timeCaption))},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},e.prototype.componentWillUnmount=function(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()},e.prototype.observeDatePickerHeightChanges=function(){var t=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){t.updateContainerHeight()}),this.resizeObserver.observe(n))},e.prototype.updateContainerHeight=function(){if(this.props.monthRef&&this.header){var t=this.props.monthRef.clientHeight-this.header.clientHeight;this.state.height!==t&&this.setState({height:t})}},e.prototype.render=function(){var t=this,n,r=this.state.height;return Ue.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),Ue.createElement("div",{className:"react-datepicker__time"},Ue.createElement("div",{className:"react-datepicker__time-box"},Ue.createElement("ul",{className:"react-datepicker__time-list",ref:function(s){t.list=s},style:r?{height:r}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(t,n){return n.offsetTop-(t/2-n.clientHeight/2)},e})(ne.Component),wP=3,Sse=(function(i){Ms(e,i);function e(t){var n=i.call(this,t)||this;return n.YEAR_REFS=Wc([],Array(n.props.yearItemNumber),!0).map(function(){return ne.createRef()}),n.isDisabled=function(r){return Jo(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(r){return YR(r,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var r;return(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection},n.updateFocusOnPaginate=function(r){var s=function(){var o,c;(c=(o=n.YEAR_REFS[r])===null||o===void 0?void 0:o.current)===null||c===void 0||c.focus()};window.requestAnimationFrame(s)},n.handleYearClick=function(r,s){n.props.onDayClick&&n.props.onDayClick(r,s)},n.handleYearNavigation=function(r,s){var o,c,h,d,m=n.props,g=m.date,_=m.yearItemNumber;if(!(g===void 0||_===void 0)){var S=eh(g,_).startPeriod;n.isDisabled(s)||n.isExcluded(s)||((c=(o=n.props).setPreSelection)===null||c===void 0||c.call(o,s),r-S<0?n.updateFocusOnPaginate(_-(S-r)):r-S>=_?n.updateFocusOnPaginate(Math.abs(_-(r-S))):(d=(h=n.YEAR_REFS[r-S])===null||h===void 0?void 0:h.current)===null||d===void 0||d.focus())}},n.isSameDay=function(r,s){return Fn(r,s)},n.isCurrentYear=function(r){return r===Un(ti())},n.isRangeStart=function(r){return n.props.startDate&&n.props.endDate&&Vc(kc(ti(),r),n.props.startDate)},n.isRangeEnd=function(r){return n.props.startDate&&n.props.endDate&&Vc(kc(ti(),r),n.props.endDate)},n.isInRange=function(r){return Kb(r,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(r){var s=n.props,o=s.selectsStart,c=s.selectsEnd,h=s.selectsRange,d=s.startDate,m=s.endDate;return!(o||c||h)||!n.selectingDate()?!1:o&&m?Kb(r,n.selectingDate(),m):c&&d||h&&d&&!m?Kb(r,d,n.selectingDate()):!1},n.isSelectingRangeStart=function(r){var s;if(!n.isInSelectingRange(r))return!1;var o=n.props,c=o.startDate,h=o.selectsStart,d=kc(ti(),r);return h?Vc(d,(s=n.selectingDate())!==null&&s!==void 0?s:null):Vc(d,c??null)},n.isSelectingRangeEnd=function(r){var s;if(!n.isInSelectingRange(r))return!1;var o=n.props,c=o.endDate,h=o.selectsEnd,d=o.selectsRange,m=kc(ti(),r);return h||d?Vc(m,(s=n.selectingDate())!==null&&s!==void 0?s:null):Vc(m,c??null)},n.isKeyboardSelected=function(r){if(!(n.props.disabledKeyboardNavigation||n.props.date===void 0||n.props.preSelection==null)){var s=n.props,o=s.minDate,c=s.maxDate,h=s.excludeDates,d=s.includeDates,m=s.filterDate,g=s.selected,_=f_(kc(n.props.date,r)),S=(o||c||h||d||m)&&bx(r,n.props),M=!!g&&Fn(_,f_(g)),C=Fn(_,f_(n.props.preSelection));return!n.props.inline&&!M&&C&&!S}},n.isSelectedYear=function(r){var s=n.props,o=s.selectsMultiple,c=s.selected,h=s.selectedDates;return o?h?.some(function(d){return r===Un(d)}):!!c&&r===Un(c)},n.onYearClick=function(r,s){var o=n.props.date;o!==void 0&&n.handleYearClick(f_(kc(o,s)),r)},n.onYearKeyDown=function(r,s){var o,c,h=r.key,d=n.props,m=d.date,g=d.yearItemNumber,_=d.handleOnKeyDown;if(h!==yt.Tab&&r.preventDefault(),!n.props.disabledKeyboardNavigation)switch(h){case yt.Enter:if(n.props.selected==null)break;n.onYearClick(r,s),(c=(o=n.props).setPreSelection)===null||c===void 0||c.call(o,n.props.selected);break;case yt.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(s+1,jl(n.props.preSelection,1));break;case yt.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(s-1,Xf(n.props.preSelection,1));break;case yt.ArrowUp:{if(m===void 0||g===void 0||n.props.preSelection==null)break;var S=eh(m,g).startPeriod,M=wP,C=s-M;if(C<S){var w=g%M;s>=S&&s<S+w?M=w:M+=w,C=s-M}n.handleYearNavigation(C,Xf(n.props.preSelection,M));break}case yt.ArrowDown:{if(m===void 0||g===void 0||n.props.preSelection==null)break;var T=eh(m,g).endPeriod,M=wP,C=s+M;if(C>T){var w=g%M;s<=T&&s>T-w?M=w:M+=w,C=s+M}n.handleYearNavigation(C,jl(n.props.preSelection,M));break}}_&&_(r)},n.getYearClassNames=function(r){var s=n.props,o=s.date,c=s.disabled,h=s.minDate,d=s.maxDate,m=s.excludeDates,g=s.includeDates,_=s.filterDate,S=s.yearClassName;return Gr("react-datepicker__year-text","react-datepicker__year-".concat(r),o?S?.(kc(o,r)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(r),"react-datepicker__year-text--disabled":(h||d||m||g||_||c)&&bx(r,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(r),"react-datepicker__year-text--range-start":n.isRangeStart(r),"react-datepicker__year-text--range-end":n.isRangeEnd(r),"react-datepicker__year-text--in-range":n.isInRange(r),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(r),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(r),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(r),"react-datepicker__year-text--today":n.isCurrentYear(r)})},n.getYearTabIndex=function(r){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var s=Un(n.props.preSelection),o=bx(r,n.props);return r===s&&!o?"0":"-1"},n.getYearContent=function(r){return n.props.renderYearContent?n.props.renderYearContent(r):r},n}return e.prototype.render=function(){var t=this,n=[],r=this.props,s=r.date,o=r.yearItemNumber,c=r.onYearMouseEnter,h=r.onYearMouseLeave;if(s===void 0)return null;for(var d=eh(s,o),m=d.startPeriod,g=d.endPeriod,_=function(C){n.push(Ue.createElement("div",{ref:S.YEAR_REFS[C-m],onClick:function(w){t.onYearClick(w,C)},onKeyDown:function(w){ZV(w)&&(w.preventDefault(),w.key=yt.Enter),t.onYearKeyDown(w,C)},tabIndex:Number(S.getYearTabIndex(C)),className:S.getYearClassNames(C),onMouseEnter:S.props.usePointerEvent?void 0:function(w){return c(w,C)},onPointerEnter:S.props.usePointerEvent?function(w){return c(w,C)}:void 0,onMouseLeave:S.props.usePointerEvent?void 0:function(w){return h(w,C)},onPointerLeave:S.props.usePointerEvent?function(w){return h(w,C)}:void 0,key:C,"aria-current":S.isCurrentYear(C)?"date":void 0},S.getYearContent(C)))},S=this,M=m;M<=g;M++)_(M);return Ue.createElement("div",{className:"react-datepicker__year"},Ue.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},e})(ne.Component);function bse(i,e,t,n){for(var r=[],s=0;s<2*e+1;s++){var o=i+e-s,c=!0;t&&(c=Un(t)<=o),n&&c&&(c=Un(n)>=o),c&&r.push(o)}return r}var xse=(function(i){Ms(e,i);function e(t){var n=i.call(this,t)||this;n.yearOptionButtonsRef={},n.handleOptionKeyDown=function(c,h){var d;switch(h.key){case"Enter":h.preventDefault(),n.onChange(c);break;case"Escape":h.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":{h.preventDefault();var m=c+(h.key==="ArrowUp"?1:-1);n.yearOptionButtonsRef[m]&&((d=n.yearOptionButtonsRef[m])===null||d===void 0||d.focus());break}}},n.renderOptions=function(){n.yearOptionButtonsRef={};var c=n.props.year,h=n.state.yearsList.map(function(g){return Ue.createElement("div",{ref:function(_){n.yearOptionButtonsRef[g]=_,g===c&&_?.focus()},role:"button",tabIndex:0,className:c===g?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:g,onClick:n.onChange.bind(n,g),onKeyDown:n.handleOptionKeyDown.bind(n,g),"aria-selected":c===g?"true":void 0},c===g?Ue.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",g)}),d=n.props.minDate?Un(n.props.minDate):null,m=n.props.maxDate?Un(n.props.maxDate):null;return(!m||!n.state.yearsList.find(function(g){return g===m}))&&h.unshift(Ue.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},Ue.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!d||!n.state.yearsList.find(function(g){return g===d}))&&h.push(Ue.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},Ue.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),h},n.onChange=function(c){n.props.onChange(c)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(c){var h=n.state.yearsList.map(function(d){return d+c});n.setState({yearsList:h})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var r=t.yearDropdownItemNumber,s=t.scrollableYearDropdown,o=r||(s?10:5);return n.state={yearsList:bse(n.props.year,o,n.props.minDate,n.props.maxDate)},n.dropdownRef=ne.createRef(),n}return e.prototype.componentDidMount=function(){var t=this.dropdownRef.current;if(t){var n=t.children?Array.from(t.children):null,r=n?n.find(function(s){return s.ariaSelected}):null;t.scrollTop=r&&r instanceof HTMLElement?r.offsetTop+(r.clientHeight-t.clientHeight)/2:(t.scrollHeight-t.clientHeight)/2}},e.prototype.render=function(){var t=Gr({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return Ue.createElement(cM,{className:t,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(ne.Component),Ese=(function(i){Ms(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n=t.props.minDate?Un(t.props.minDate):1900,r=t.props.maxDate?Un(t.props.maxDate):2100,s=[],o=n;o<=r;o++)s.push(Ue.createElement("option",{key:o,value:o},o));return s},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return Ue.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){return Ue.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:t.toggleDropdown},Ue.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),Ue.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return Ue.createElement(xse,Rn({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,r=[t.renderReadView(!n)];return n&&r.unshift(t.renderDropdown()),r},t.onChange=function(n){t.toggleDropdown(),n!==t.props.year&&t.props.onChange(n)},t.toggleDropdown=function(n){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,n)})},t.handleYearChange=function(n,r){var s;(s=t.onSelect)===null||s===void 0||s.call(t,n,r),t.setOpen()},t.onSelect=function(n,r){var s,o;(o=(s=t.props).onSelect)===null||o===void 0||o.call(s,n,r)},t.setOpen=function(){var n,r;(r=(n=t.props).setOpen)===null||r===void 0||r.call(n,!0)},t}return e.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return Ue.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},t)},e})(ne.Component),Tse=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],JV="react-datepicker-ignore-onclickoutside",Mse=function(i){var e=(i.className||"").split(/\s+/);return Tse.some(function(t){return e.indexOf(t)>=0})},wse=(function(i){Ms(e,i);function e(t){var n=i.call(this,t)||this;return n.monthContainer=void 0,n.handleClickOutside=function(r){n.props.onClickOutside(r)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(r){var s,o;Mse(r.target)&&((o=(s=n.props).onDropdownFocus)===null||o===void 0||o.call(s,r))},n.getDateInView=function(){var r=n.props,s=r.preSelection,o=r.selected,c=r.openToDate,h=XV(n.props),d=KV(n.props),m=ti(),g=c||o||s;return g||(h&&Yc(m,h)?h:d&&sh(m,d)?d:m)},n.increaseMonth=function(){n.setState(function(r){var s=r.date;return{date:Zl(s,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(r){var s=r.date;return{date:Ep(s,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(r,s,o){n.props.onSelect(r,s,o),n.props.setPreSelection&&n.props.setPreSelection(r)},n.handleDayMouseEnter=function(r){n.setState({selectingDate:r}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(r,s){n.setState({selectingDate:kc(ti(),s)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(r,s)},n.handleYearMouseLeave=function(r,s){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(r,s)},n.handleYearChange=function(r){var s,o,c,h;(o=(s=n.props).onYearChange)===null||o===void 0||o.call(s,r),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(r),(h=(c=n.props).setOpen)===null||h===void 0||h.call(c,!0)),n.props.setPreSelection&&n.props.setPreSelection(r)},n.getEnabledPreSelectionDateForMonth=function(r){if(!Jo(r,n.props))return r;for(var s=ah(r),o=Kre(r),c=ate(o,s),h=null,d=0;d<=c;d++){var m=Gl(s,d);if(!Jo(m,n.props)){h=m;break}}return h},n.handleMonthChange=function(r){var s,o,c,h=(s=n.getEnabledPreSelectionDateForMonth(r))!==null&&s!==void 0?s:r;n.handleCustomMonthChange(h),n.props.adjustDateOnChange&&(n.props.onSelect(h),(c=(o=n.props).setOpen)===null||c===void 0||c.call(o,!0)),n.props.setPreSelection&&n.props.setPreSelection(h)},n.handleCustomMonthChange=function(r){var s,o;(o=(s=n.props).onMonthChange)===null||o===void 0||o.call(s,r),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(r){n.handleYearChange(r),n.handleMonthChange(r)},n.changeYear=function(r){n.setState(function(s){var o=s.date;return{date:kc(o,Number(r))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(r){n.setState(function(s){var o=s.date;return{date:So(o,Number(r))}},function(){var s,o;n.handleMonthChange(n.state.date),(o=(s=n.props).onMonthSelectedInChange)===null||o===void 0||o.call(s,0)})},n.changeMonthYear=function(r){n.setState(function(s){var o=s.date;return{date:kc(So(o,Qa(r)),Un(r))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(r,s){if(r===void 0&&(r=n.state.date),s===void 0&&(s=0),!Xa(r))return[];var o=n.props.disabled,c=kf(r,n.props.locale,n.props.calendarStartDay),h=[];return n.props.showWeekNumbers&&h.push(Ue.createElement("div",{key:"W",className:"react-datepicker__day-name ".concat(o?"react-datepicker__day-name--disabled":""),role:"columnheader"},Ue.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),Ue.createElement("span",{"aria-hidden":"true"},n.props.weekLabel||"#"))),h.concat([0,1,2,3,4,5,6].map(function(d){var m=Gl(c,d),g=n.formatWeekday(m,n.props.locale),_=Bi(m,"EEEE",n.props.locale),S=n.props.weekDayClassName?n.props.weekDayClassName(m):void 0;if(n.props.renderCustomDayName){var M=n.props.renderCustomDayName({day:m,shortName:g,fullName:_,locale:n.props.locale,customDayNameCount:s});return Ue.createElement("div",{key:d,role:"columnheader",className:Gr("react-datepicker__day-name",S,o?"react-datepicker__day-name--disabled":"")},M)}return Ue.createElement("div",{key:d,role:"columnheader",className:Gr("react-datepicker__day-name",S,o?"react-datepicker__day-name--disabled":"")},Ue.createElement("span",{className:"react-datepicker__sr-only"},_),Ue.createElement("span",{"aria-hidden":"true"},g))}))},n.formatWeekday=function(r,s){return n.props.formatWeekDay?Qre(r,n.props.formatWeekDay,s):n.props.useWeekdaysShort?Jre(r,s):Zre(r,s)},n.decreaseYear=function(){n.setState(function(r){var s,o=r.date;return{date:Xf(o,n.props.showYearPicker?(s=n.props.yearItemNumber)!==null&&s!==void 0?s:e.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var r,s,o;if(!n.props.renderCustomHeader){var c=(r=n.props.monthsShown)!==null&&r!==void 0?r:e.defaultProps.monthsShown,h=n.props.showPreviousMonths?c-1:0,d=(s=n.props.monthSelectedIn)!==null&&s!==void 0?s:h,m=Ep(n.state.date,d),g;switch(!0){case n.props.disabled:g=!0;break;case n.props.showMonthYearPicker:g=yP(n.state.date,n.props);break;case n.props.showYearPicker:g=ise(n.state.date,n.props);break;case n.props.showQuarterYearPicker:g=tse(n.state.date,n.props);break;default:g=gP(m,n.props);break}if(!(!((o=n.props.forceShowMonthNavigation)!==null&&o!==void 0?o:e.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&g||n.props.showTimeSelectOnly)){var _=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],S=["react-datepicker__navigation","react-datepicker__navigation--previous"],M=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(M=n.decreaseYear),g&&n.props.showDisabledMonthNavigation&&(S.push("react-datepicker__navigation--previous--disabled"),M=void 0);var C=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,w=n.props,T=w.previousMonthButtonLabel,D=T===void 0?e.defaultProps.previousMonthButtonLabel:T,I=w.previousYearButtonLabel,L=I===void 0?e.defaultProps.previousYearButtonLabel:I,j=n.props,Y=j.previousMonthAriaLabel,k=Y===void 0?typeof D=="string"?D:"Previous Month":Y,V=j.previousYearAriaLabel,N=V===void 0?typeof L=="string"?L:"Previous Year":V;return Ue.createElement("button",{type:"button",className:S.join(" "),onClick:M,onKeyDown:n.props.handleOnKeyDown,"aria-label":C?N:k},Ue.createElement("span",{className:_.join(" ")},C?L:D))}}},n.increaseYear=function(){n.setState(function(r){var s,o=r.date;return{date:jl(o,n.props.showYearPicker?(s=n.props.yearItemNumber)!==null&&s!==void 0?s:e.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var r;if(!n.props.renderCustomHeader){var s;switch(!0){case n.props.disabled:s=!0;break;case n.props.showMonthYearPicker:s=_P(n.state.date,n.props);break;case n.props.showYearPicker:s=rse(n.state.date,n.props);break;case n.props.showQuarterYearPicker:s=nse(n.state.date,n.props);break;default:s=vP(n.state.date,n.props);break}if(!(!((r=n.props.forceShowMonthNavigation)!==null&&r!==void 0?r:e.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&s||n.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],c=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var h=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(h=n.increaseYear),s&&n.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),h=void 0);var d=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,m=n.props,g=m.nextMonthButtonLabel,_=g===void 0?e.defaultProps.nextMonthButtonLabel:g,S=m.nextYearButtonLabel,M=S===void 0?e.defaultProps.nextYearButtonLabel:S,C=n.props,w=C.nextMonthAriaLabel,T=w===void 0?typeof _=="string"?_:"Next Month":w,D=C.nextYearAriaLabel,I=D===void 0?typeof M=="string"?M:"Next Year":D;return Ue.createElement("button",{type:"button",className:o.join(" "),onClick:h,onKeyDown:n.props.handleOnKeyDown,"aria-label":d?I:T},Ue.createElement("span",{className:c.join(" ")},d?M:_))}}},n.renderCurrentMonth=function(r){r===void 0&&(r=n.state.date);var s=["react-datepicker__current-month"];return n.props.showYearDropdown&&s.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&s.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&s.push("react-datepicker__current-month--hasMonthYearDropdown"),Ue.createElement("h2",{className:s.join(" ")},Xa(r)?Bi(r,n.props.dateFormat,n.props.locale):"")},n.renderYearDropdown=function(r){if(r===void 0&&(r=!1),!(!n.props.showYearDropdown||r))return Ue.createElement(Ese,Rn({},e.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:Un(n.state.date)}))},n.renderMonthDropdown=function(r){if(r===void 0&&(r=!1),!(!n.props.showMonthDropdown||r))return Ue.createElement(mse,Rn({},e.defaultProps,n.props,{month:Qa(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(r){if(r===void 0&&(r=!1),!(!n.props.showMonthYearDropdown||r))return Ue.createElement(yse,Rn({},e.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(r){n.props.onSelect(hP(),r),n.props.setPreSelection&&n.props.setPreSelection(hP())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return Ue.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDayNamesHeader=function(r,s){return s===void 0&&(s=0),Ue.createElement("div",{className:"react-datepicker__day-names",role:"row"},n.header(r,s))},n.renderDefaultHeader=function(r){var s=r.monthDate,o=r.i,c=Ue.createElement("div",{className:Gr("react-datepicker__header",{"react-datepicker__header--has-time-select":n.props.showTimeSelect,"react-datepicker__header--middle":n.props.monthHeaderPosition==="middle","react-datepicker__header--bottom":n.props.monthHeaderPosition==="bottom"})},n.renderCurrentMonth(s),Ue.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(o!==0),n.renderMonthYearDropdown(o!==0),n.renderYearDropdown(o!==0)));return n.props.monthHeaderPosition==="top"?c:Ue.createElement("div",{className:"react-datepicker__header-wrapper"},n.renderPreviousButton()||null,n.renderNextButton()||null,c)},n.renderCustomHeader=function(r){var s,o,c=r.monthDate,h=r.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var d=n.props,m=d.showYearPicker,g=d.yearItemNumber,_;if(m){var S=eh(c,g),M=S.startPeriod,C=S.endPeriod;_={startYear:M,endYear:C}}var w=gP(n.state.date,n.props),T=vP(n.state.date,n.props),D=yP(n.state.date,n.props),I=_P(n.state.date,n.props);return Ue.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(o=(s=n.props).renderCustomHeader)===null||o===void 0?void 0:o.call(s,Rn(Rn(Rn({},n.state),m&&{visibleYearsRange:_}),{customHeaderCount:h,monthDate:c,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:w,nextMonthButtonDisabled:T,prevYearButtonDisabled:D,nextYearButtonDisabled:I})))},n.renderYearHeader=function(r){var s=r.monthDate,o=n.props,c=o.showYearPicker,h=o.yearItemNumber,d=h===void 0?e.defaultProps.yearItemNumber:h,m=eh(s,d),g=m.startPeriod,_=m.endPeriod;return Ue.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},c?"".concat(g," - ").concat(_):Un(s))},n.renderHeader=function(r){var s=r.monthDate,o=r.i,c=o===void 0?0:o,h={monthDate:s,i:c};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(h);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(h);default:return n.renderDefaultHeader(h)}},n.renderMonths=function(){var r,s;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var o=[],c=(r=n.props.monthsShown)!==null&&r!==void 0?r:e.defaultProps.monthsShown,h=n.props.showPreviousMonths?c-1:0,d=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?jl(n.state.date,h):Ep(n.state.date,h),m=(s=n.props.monthSelectedIn)!==null&&s!==void 0?s:h,g=0;g<c;++g){var _=g-m+h,S=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?jl(d,_):Zl(d,_),M="month-".concat(g),C=g<c-1,w=g>0;o.push(Ue.createElement("div",{key:M,ref:function(T){n.monthContainer=T??void 0},className:"react-datepicker__month-container"},n.props.monthHeaderPosition==="top"&&n.renderHeader({monthDate:S,i:g}),Ue.createElement(dse,Rn({},e.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:S,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:g,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:C,monthShowsDuplicateDaysStart:w,dayNamesHeader:n.renderDayNamesHeader(S,g),monthHeader:n.props.monthHeaderPosition==="middle"?n.renderHeader({monthDate:S,i:g}):void 0,monthFooter:n.props.monthHeaderPosition==="bottom"?n.renderHeader({monthDate:S,i:g}):void 0}))))}return o}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return Ue.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),Ue.createElement(Sse,Rn({},e.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return Ue.createElement(_se,Rn({},e.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var r,s;if(n.props.showTimeInput){if(n.props.selectsRange){var o=n.props,c=o.startDate,h=o.endDate,d=c?new Date(c):void 0,m=d&&Xa(d)&&!!c,g=m?"".concat(vg(d.getHours()),":").concat(vg(d.getMinutes())):"",_=h?new Date(h):void 0,S=_&&Xa(_)&&!!h,M=S?"".concat(vg(_.getHours()),":").concat(vg(_.getMinutes())):"";return Ue.createElement(Ue.Fragment,null,Ue.createElement(A1,Rn({},e.defaultProps,n.props,{date:d,timeString:g,onChange:function(D){var I,L;(L=(I=n.props).onTimeChange)===null||L===void 0||L.call(I,D,"start")},timeInputLabel:((r=n.props.timeInputLabel)!==null&&r!==void 0?r:"Time")+" (Start)"})),Ue.createElement(A1,Rn({},e.defaultProps,n.props,{date:_,timeString:M,onChange:function(D){var I,L;(L=(I=n.props).onTimeChange)===null||L===void 0||L.call(I,D,"end")},timeInputLabel:((s=n.props.timeInputLabel)!==null&&s!==void 0?s:"Time")+" (End)"})))}var C=n.props.selected?new Date(n.props.selected):void 0,w=C&&Xa(C)&&!!n.props.selected,T=w?"".concat(vg(C.getHours()),":").concat(vg(C.getMinutes())):"";return Ue.createElement(A1,Rn({},e.defaultProps,n.props,{date:C,timeString:T,onChange:function(D){var I,L;(L=(I=n.props).onTimeChange)===null||L===void 0||L.call(I,D)}}))}},n.renderAriaLiveRegion=function(){var r;if(!Xa(n.state.date))return Ue.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"});var s=eh(n.state.date,(r=n.props.yearItemNumber)!==null&&r!==void 0?r:e.defaultProps.yearItemNumber),o=s.startPeriod,c=s.endPeriod,h;return n.props.showYearPicker?h="".concat(o," - ").concat(c):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?h=Un(n.state.date):h="".concat(qR(Qa(n.state.date),n.props.locale)," ").concat(Un(n.state.date)),Ue.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&h)},n.renderChildren=function(){if(n.props.children)return Ue.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=ne.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:JV,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:L0,monthHeaderPosition:"top"}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var t=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){t.setState({monthContainer:t.monthContainer})})())},e.prototype.componentDidUpdate=function(t){var n=this;if(this.props.preSelection&&Xa(this.props.preSelection)&&(!Fn(this.props.preSelection,t.preSelection)||this.props.monthSelectedIn!==t.monthSelectedIn)){var r=!Ma(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return r&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!Fn(this.props.openToDate,t.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var t=this.props.container||Fre;return Ue.createElement(cM,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},Ue.createElement("div",{style:{display:"contents"},ref:this.containerRef},Ue.createElement(t,{className:Gr("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly,inline:this.props.inline},this.renderAriaLiveRegion(),this.props.monthHeaderPosition==="top"&&this.renderPreviousButton(),this.props.monthHeaderPosition==="top"&&this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},e})(ne.Component),Ase=function(i){var e=i.icon,t=i.className,n=t===void 0?"":t,r=i.onClick,s="react-datepicker__calendar-icon";if(typeof e=="string")return Ue.createElement("i",{className:"".concat(s," ").concat(e," ").concat(n),"aria-hidden":"true",onClick:r});if(Ue.isValidElement(e)){var o=e;return Ue.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(s," ").concat(n),onClick:function(c){typeof o.props.onClick=="function"&&o.props.onClick(c),typeof r=="function"&&r(c)}})}return Ue.createElement("svg",{className:"".concat(s," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:r},Ue.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},$V=(function(i){Ms(e,i);function e(t){var n=i.call(this,t)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return IF.createPortal(this.props.children,this.el)},e})(ne.Component),Cse="[tabindex], a, button, input, select, textarea",Rse=function(i){return(i instanceof HTMLAnchorElement||!i.disabled)&&i.tabIndex!==-1},eB=(function(i){Ms(e,i);function e(t){var n=i.call(this,t)||this;return n.getTabChildren=function(){var r;return Array.prototype.slice.call((r=n.tabLoopRef.current)===null||r===void 0?void 0:r.querySelectorAll(Cse),1,-1).filter(Rse)},n.handleFocusStart=function(){var r=n.getTabChildren();r&&r.length>1&&r[r.length-1].focus()},n.handleFocusEnd=function(){var r=n.getTabChildren();r&&r.length>1&&r[0].focus()},n.tabLoopRef=ne.createRef(),n}return e.prototype.render=function(){var t;return((t=this.props.enableTabLoop)!==null&&t!==void 0?t:e.defaultProps.enableTabLoop)?Ue.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},Ue.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,Ue.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e})(ne.Component);function Dse(i){function e(t){var n,r=typeof t.hidePopper=="boolean"?t.hidePopper:!0,s=ne.useRef(null),o=zre(Rn({open:!r,whileElementsMounted:yre,placement:t.popperPlacement,middleware:Wc([Are({padding:15}),wre(10),Cre({element:s})],(n=t.popperModifiers)!==null&&n!==void 0?n:[],!0)},t.popperProps)),c=Rn(Rn({},t),{hidePopper:r,popperProps:Rn(Rn({},o),{arrowRef:s})});return Ue.createElement(i,Rn({},c))}return e.displayName="withFloating(".concat(i.displayName||i.name||"Component",")"),e}var Nse=function(i){var e=i.className,t=i.wrapperClassName,n=i.hidePopper,r=n===void 0?!0:n,s=i.popperComponent,o=i.targetComponent,c=i.enableTabLoop,h=i.popperOnKeyDown,d=i.portalId,m=i.portalHost,g=i.popperProps,_=i.showArrow,S=i.popperTargetRef,M=i.monthHeaderPosition;ne.useEffect(function(){S?.current&&g.refs.setPositionReference(S.current)},[S,g.refs]);var C=void 0;if(!r){var w=Gr("react-datepicker-popper",!_&&"react-datepicker-popper-offset",M==="middle"&&"react-datepicker-popper--header-middle",M==="bottom"&&"react-datepicker-popper--header-bottom",e);C=Ue.createElement(eB,{enableTabLoop:c},Ue.createElement("div",{ref:g.refs.setFloating,style:g.floatingStyles,className:w,"data-placement":g.placement,onKeyDown:h},s,_&&Ue.createElement(Ore,{ref:g.arrowRef,context:g.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}i.popperContainer&&(C=ne.createElement(i.popperContainer,{},C)),d&&!r&&(C=Ue.createElement($V,{portalId:d,portalHost:m},C));var T=Gr("react-datepicker-wrapper",t);return Ue.createElement(Ue.Fragment,null,Ue.createElement("div",{ref:g.refs.setReference,className:T},o),C)},Ise=Dse(Nse);function AP(i,e){return i&&e?Qa(i)!==Qa(e)||Un(i)!==Un(e):i!==e}var R1="Date input not valid.",Ose=(function(i){Ms(e,i);function e(t){var n=i.call(this,t)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){var r=n.props.timeZone,s=n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:ti();return r?cP(s,r):s},n.modifyHolidays=function(){var r;return(r=n.props.holidays)===null||r===void 0?void 0:r.reduce(function(s,o){var c=ip(o.date,"yyyy-MM-dd",void 0,!1);return c?Wc(Wc([],s,!0),[Rn(Rn({},o),{date:c})],!1):s},[])},n.calcInitialState=function(){var r=n.props.timeZone,s=n.getPreSelection(),o=XV(n.props),c=KV(n.props),h=o&&Yc(s,h_(o))?o:c&&sh(s,fP(c))?c:s,d=n.props.selectsRange?n.props.startDate:n.props.selected;return d&&r&&(d=cP(d,r)),{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:d??h,highlightDates:SP(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.getInputValue=function(){var r,s=n.props,o=s.locale,c=s.startDate,h=s.endDate,d=s.rangeSeparator,m=s.selected,g=s.selectedDates,_=s.selectsMultiple,S=s.selectsRange,M=s.formatMultipleDates,C=s.value,w=(r=n.props.dateFormat)!==null&&r!==void 0?r:e.defaultProps.dateFormat,T=n.state.inputValue;if(typeof C=="string")return C;if(typeof T=="string")return T;if(S)return jre(c,h,{dateFormat:w,locale:o,rangeSeparator:d});if(_){if(M){var D=function(I){return qa(I,{dateFormat:w,locale:o})};return M(g??[],D)}return qre(g??[],{dateFormat:w,locale:o})}return qa(m,{dateFormat:w,locale:o})},n.resetHiddenStatus=function(){n.setState(Rn(Rn({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(Rn(Rn({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var r,s;(s=(r=n.input)===null||r===void 0?void 0:r.focus)===null||s===void 0||s.call(r,{preventScroll:!0})},n.setBlur=function(){var r,s;(s=(r=n.input)===null||r===void 0?void 0:r.blur)===null||s===void 0||s.call(r),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(r,s){s===void 0&&(s=!1),n.setState({open:r,preSelection:r&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:D1},function(){r||n.setState(function(o){return{focused:s?o.focused:!1}},function(){!s&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return nu(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(r){var s,o,c=n.state.wasHidden,h=c?n.state.open:!0;c&&n.resetHiddenStatus(),n.state.preventFocus||((o=(s=n.props).onFocus)===null||o===void 0||o.call(s,r),h&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.resetInputValue=function(){n.setState(Rn(Rn({},n.state),{inputValue:null}))},n.handleBlur=function(r){var s,o;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((o=(s=n.props).onBlur)===null||o===void 0||o.call(s,r));var c=n.state.inputValue;if(typeof c=="string"&&c.length>0){var h=/[a-zA-Z0-9]/.test(c);!h&&n.props.selected&&n.setSelected(null,void 0,!0)}n.resetInputValue(),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(r){var s,o;(o=(s=n.props).onClickOutside)===null||o===void 0||o.call(s,r),!n.props.inline&&!r.defaultPrevented&&n.setOpen(!1),n.props.withPortal&&r.preventDefault()},n.handleChange=function(){for(var r,s,o,c,h,d,m,g,_=[],S=0;S<arguments.length;S++)_[S]=arguments[S];var M=_[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,_),!M||typeof M.isDefaultPrevented!="function"||M.isDefaultPrevented()))){n.setState({inputValue:M?.target instanceof HTMLInputElement?M.target.value:null,lastPreSelectChange:Pse});var C=n.props,w=C.selectsRange,T=C.startDate,D=C.endDate,I=(r=n.props.dateFormat)!==null&&r!==void 0?r:e.defaultProps.dateFormat,L=(s=n.props.strictParsing)!==null&&s!==void 0?s:e.defaultProps.strictParsing,j=M?.target instanceof HTMLInputElement?M.target.value:"";if(w){var Y=n.props.rangeSeparator,k=Y.trim(),V=j.split(I.includes(k)?Y:k,2).map(function(K){return K.trim()}),N=V[0],O=V[1],z=ip(N??"",I,n.props.locale,L),W=z?ip(O??"",I,n.props.locale,L):null,q=((o=vp(T))===null||o===void 0?void 0:o.getTime())!==z?.getTime(),he=((c=vp(D))===null||c===void 0?void 0:c.getTime())!==W?.getTime();if(!q&&!he||z&&Jo(z,n.props)||W&&Jo(W,n.props))return;z&&n.setState({preSelection:z}),(d=(h=n.props).onChange)===null||d===void 0||d.call(h,[z,W],M)}else{var fe=ip(j,I,n.props.locale,L,(m=n.props.selected)!==null&&m!==void 0?m:void 0);if(fe||!j)n.setSelected(fe,M,!0);else if(!n.props.inline){var H=Gre(j,(g=n.state.preSelection)!==null&&g!==void 0?g:void 0);H&&(!n.props.minDate||!Yc(H,n.props.minDate))&&(!n.props.maxDate||!sh(H,n.props.maxDate))&&n.setState({preSelection:H})}}}},n.handleSelect=function(r,s,o){var c;if(!n.props.readOnly){var h=n.props,d=h.selectsRange,m=h.startDate,g=h.endDate,_=h.locale,S=h.swapRange,M=(c=n.props.dateFormat)!==null&&c!==void 0?c:e.defaultProps.dateFormat,C=!d||m&&!g&&(S||!w1(r,m));if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&C&&n.sendFocusBackToInput(),n.props.onChangeRaw){var w=qa(r,{dateFormat:M,locale:_});n.props.onChangeRaw(s,{date:r,formattedDate:w})}n.setSelected(r,s,!1,o),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect?n.setPreSelection(r):C&&n.setOpen(!1)}},n.setSelected=function(r,s,o,c){var h,d,m=n.props.timeZone,g=r;if(g&&m&&(g=Xu(g,m)),n.props.showYearPicker){if(g!==null&&bx(Un(g),n.props))return}else if(n.props.showMonthYearPicker){if(g!==null&&WV(g,n.props))return}else if(g!==null&&Jo(g,n.props))return;var _=n.props,S=_.onChange,M=_.selectsRange,C=_.startDate,w=_.endDate,T=_.selectsMultiple,D=_.selectedDates,I=_.minTime,L=_.swapRange;if(!yp(n.props.selected,g)||n.props.allowSameDay||M||T)if(g!==null&&(n.props.selected&&(!o||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(g=Ku(g,{hour:Ws(n.props.selected),minute:Xs(n.props.selected),second:Uf(n.props.selected)})),!o&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&I&&(g=Ku(g,{hour:I.getHours(),minute:I.getMinutes(),second:I.getSeconds()})),n.props.inline||n.setState({preSelection:g}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:c})),M){var j=S,Y=!C&&!w,k=C&&!w,V=!C&&!!w,N=C&&w;Y?j?.([g,null],s):k?g===null?j?.([null,null],s):w1(g,C)?j?.(L?[g,C]:[g,null],s):j?.([C,g],s):V&&(g&&w1(g,w)?j?.([g,w],s):j?.([g,null],s)),N&&j?.([g,null],s)}else if(T){var O=S;if(g!==null)if(!D?.length)O?.([g],s);else{var z=D.some(function(q){return Fn(q,g)});if(z){var W=D.filter(function(q){return!Fn(q,g)});O?.(W,s)}else O?.(Wc(Wc([],D,!0),[g],!1),s)}}else S?.(g,s);o||((d=(h=n.props).onSelect)===null||d===void 0||d.call(h,g,s),n.setState({inputValue:null}))},n.setPreSelection=function(r){if(!n.props.readOnly){var s=nu(n.props.minDate),o=nu(n.props.maxDate),c=!0;if(r){var h=h_(r);if(s&&o)c=lp(r,n.props.minDate,n.props.maxDate);else if(s){var d=h_(n.props.minDate);c=sh(r,d)||yp(h,d)}else if(o){var m=fP(n.props.maxDate);c=Yc(r,m)||yp(h,m)}}c&&n.setState({preSelection:r})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(r,s){var o,c;if(!n.props.selectsMultiple){var h=n.props,d=h.selectsRange,m=h.startDate,g=h.endDate,_=h.onChange,S=h.timeZone;if(d){var M=_;if(s==="start"){if(m){var C=Ku(m,{hour:Ws(r),minute:Xs(r)});n.setState({preSelection:C}),S&&(C=Xu(C,S)),M?.([C,g?S?Xu(g,S):g:null],void 0)}}else if(s==="end"){if(g){var w=Ku(g,{hour:Ws(r),minute:Xs(r)});n.setState({preSelection:w}),S&&(w=Xu(w,S)),M?.([m?S?Xu(m,S):m:null,w],void 0)}}else{var T=m&&!g;if(T){var C=Ku(m,{hour:Ws(r),minute:Xs(r)});n.setState({preSelection:C}),S&&(C=Xu(C,S)),M?.([C,null],void 0)}else if(m&&g){var w=Ku(g,{hour:Ws(r),minute:Xs(r)});n.setState({preSelection:w}),S&&(w=Xu(w,S)),M?.([S?Xu(m,S):m,w],void 0)}else{var D=Ku(n.getPreSelection(),{hour:Ws(r),minute:Xs(r)});n.setState({preSelection:D})}}}else{var I=n.props.selected?n.props.selected:n.getPreSelection(),D=n.props.selected?r:Ku(I,{hour:Ws(r),minute:Xs(r)});n.setState({preSelection:D}),D&&S&&(D=Xu(D,S)),(c=(o=n.props).onChange)===null||c===void 0||c.call(o,D)}n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var r,s;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(s=(r=n.props).onInputClick)===null||s===void 0||s.call(r)},n.handleTimeOnlyArrowKey=function(r){var s,o,c,h,d=vp(n.props.selected)||n.state.preSelection||ti(),m=(s=n.props.timeIntervals)!==null&&s!==void 0?s:30,g=(o=n.props.dateFormat)!==null&&o!==void 0?o:e.defaultProps.dateFormat,_=Array.isArray(g)?g[0]:g,S=h_(d),M=Ws(d)*60+Xs(d),C=1440-m,w;if(r===yt.ArrowUp){var T=Math.max(0,M-m);w=o0(S,T)}else{var T=Math.min(C,M+m);w=o0(S,T)}var D=Bi(w,_||e.defaultProps.dateFormat,n.props.locale);if(n.setState({preSelection:w,inputValue:D}),!(n.props.selectsRange||n.props.selectsMultiple)){var I=n.props.selected?n.props.selected:n.getPreSelection(),L=n.props.selected?w:Ku(I,{hour:Ws(w),minute:Xs(w)});(h=(c=n.props).onChange)===null||h===void 0||h.call(c,L),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),requestAnimationFrame(function(){n.scrollToTimeOption(w)})}},n.handleTimeOnlyEnterKey=function(r){var s,o,c,h,d=r.target,m=d.value,g=(s=n.props.dateFormat)!==null&&s!==void 0?s:e.defaultProps.dateFormat,_=n.props.timeFormat||"p",S=n.state.preSelection||vp(n.props.selected)||ti(),M=ip(m,g,n.props.locale,(o=n.props.strictParsing)!==null&&o!==void 0?o:!1,S),C=S;if(M&&Xa(M))C=M;else{var w=((c=n.calendar)===null||c===void 0?void 0:c.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(".react-datepicker__time-list-item[tabindex='0']");if(w instanceof HTMLElement){var T=(h=w.textContent)===null||h===void 0?void 0:h.trim();if(T){var D=ip(T,_,n.props.locale,!1,S);D&&Xa(D)&&(C=D)}}}n.handleTimeChange(C),n.setOpen(!1),n.sendFocusBackToInput()},n.scrollToTimeOption=function(r){var s,o;if(!((s=n.calendar)===null||s===void 0)&&s.containerRef.current){for(var c=n.calendar.containerRef.current,h=Array.from(c.querySelectorAll(".react-datepicker__time-list-item")),d=null,m=1/0,g=n.props.timeFormat||"p",_=0,S=h;_<S.length;_++){var M=S[_],C=(o=M.textContent)===null||o===void 0?void 0:o.trim();if(C){var w=ip(C,g,n.props.locale,!1,r);if(w&&Xa(w)){if(QV(w,r)){d=M;break}var T=Math.abs(w.getTime()-r.getTime());T<m&&(m=T,d=M)}}}d&&(h.forEach(function(D){D.setAttribute("tabindex","-1")}),d.setAttribute("tabindex","0"),d.scrollIntoView({behavior:"smooth",block:"center"}))}},n.onInputKeyDown=function(r){var s,o,c,h,d,m;(o=(s=n.props).onKeyDown)===null||o===void 0||o.call(s,r);var g=r.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(g===yt.ArrowDown||g===yt.ArrowUp||g===yt.Enter)&&((c=n.onInputClick)===null||c===void 0||c.call(n));return}if(n.state.open&&n.props.showTimeSelectOnly){if(g===yt.ArrowDown||g===yt.ArrowUp){r.preventDefault(),n.handleTimeOnlyArrowKey(g);return}if(g===yt.Enter){r.preventDefault(),n.handleTimeOnlyEnterKey(r);return}}if(n.state.open){if(g===yt.ArrowDown||g===yt.ArrowUp){r.preventDefault();var _=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',S=((h=n.calendar)===null||h===void 0?void 0:h.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(_);S instanceof HTMLElement&&S.focus({preventScroll:!0});return}var M=ti(n.state.preSelection);g===yt.Enter?(r.preventDefault(),r.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===D1?(n.handleSelect(M,r),!n.props.shouldCloseOnSelect&&n.setPreSelection(M)):n.setOpen(!1)):g===yt.Escape?(r.preventDefault(),r.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):g===yt.Tab&&n.setOpen(!1),n.inputOk()||(m=(d=n.props).onInputError)===null||m===void 0||m.call(d,{code:1,msg:R1})}},n.onPortalKeyDown=function(r){var s=r.key;s===yt.Escape&&(r.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(r){var s,o,c,h,d,m,g=n.props,_=g.minDate,S=g.maxDate,M=g.disabledKeyboardNavigation,C=g.showWeekPicker,w=g.shouldCloseOnSelect,T=g.locale,D=g.calendarStartDay,I=g.adjustDateOnChange,L=g.inline;if((o=(s=n.props).onKeyDown)===null||o===void 0||o.call(s,r),!M){var j=r.key,Y=r.shiftKey,k=ti(n.state.preSelection),V=function(z,W){var q=W;switch(z){case yt.ArrowRight:q=C?kE(W,1):Gl(W,1);break;case yt.ArrowLeft:q=C?QO(W):sie(W);break;case yt.ArrowUp:q=QO(W);break;case yt.ArrowDown:q=kE(W,1);break;case yt.PageUp:q=Y?Xf(W,1):Ep(W,1);break;case yt.PageDown:q=Y?jl(W,1):Zl(W,1);break;case yt.Home:q=kf(W,T,D);break;case yt.End:q=Xre(W);break}return q},N=function(z,W){for(var q=40,he=z,fe=!1,H=0,K=V(z,W);!fe;){if(H>=q){K=W;break}_&&K<_&&(he=yt.ArrowRight,K=Jo(_,n.props)?V(he,K):_),S&&K>S&&(he=yt.ArrowLeft,K=Jo(S,n.props)?V(he,K):S),Jo(K,n.props)?((he===yt.PageUp||he===yt.Home)&&(he=yt.ArrowRight),(he===yt.PageDown||he===yt.End)&&(he=yt.ArrowLeft),K=V(he,K)):fe=!0,H++}return K};if(j===yt.Enter){r.preventDefault(),n.handleSelect(k,r),!w&&n.setPreSelection(k);return}else if(j===yt.Escape){r.preventDefault(),n.setOpen(!1),n.inputOk()||(h=(c=n.props).onInputError)===null||h===void 0||h.call(c,{code:1,msg:R1});return}var O=null;switch(j){case yt.ArrowLeft:case yt.ArrowRight:case yt.ArrowUp:case yt.ArrowDown:case yt.PageUp:case yt.PageDown:case yt.Home:case yt.End:O=N(j,k);break}if(!O){(m=(d=n.props).onInputError)===null||m===void 0||m.call(d,{code:1,msg:R1});return}r.preventDefault(),n.setState({lastPreSelectChange:D1}),I&&n.setSelected(O),n.setPreSelection(O),L&&n.setState({shouldFocusDayInline:!0})}},n.onPopperKeyDown=function(r){var s=r.key;s===yt.Escape&&(r.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(r){r&&r.preventDefault&&r.preventDefault(),n.sendFocusBackToInput();var s=n.props,o=s.selectsRange,c=s.onChange;c?.(o?[null,null]:null,r),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(r){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(r.target===document||r.target===document.documentElement||r.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(r)&&n.setOpen(!1)},n.handleMonthSelectedInChange=function(r){n.setState({monthSelectedIn:r})},n.renderCalendar=function(){var r,s;return!n.props.inline&&!n.isCalendarOpen()?null:Ue.createElement(wse,Rn({showMonthYearDropdown:void 0,ref:function(o){n.calendar=o}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(r=n.props.dateFormatCalendar)!==null&&r!==void 0?r:e.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:ase(n.modifyHolidays()),outsideClickIgnoreClass:n.props.outsideClickIgnoreClass,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(s=n.props.dropdownMode)!==null&&s!==void 0?s:e.defaultProps.dropdownMode,onMonthSelectedInChange:n.handleMonthSelectedInChange}),n.props.children)},n.renderAriaLiveRegion=function(){var r,s=n.props.locale,o=(r=n.props.dateFormat)!==null&&r!==void 0?r:e.defaultProps.dateFormat,c=n.props.showTimeInput||n.props.showTimeSelect,h=c?"PPPPp":"PPPP",d;return n.props.selectsRange?d="Selected start date: ".concat(qa(n.props.startDate,{dateFormat:h,locale:s}),". ").concat(n.props.endDate?"End date: "+qa(n.props.endDate,{dateFormat:h,locale:s}):""):n.props.showTimeSelectOnly?d="Selected time: ".concat(qa(n.props.selected,{dateFormat:o,locale:s})):n.props.showYearPicker?d="Selected year: ".concat(qa(n.props.selected,{dateFormat:"yyyy",locale:s})):n.props.showMonthYearPicker?d="Selected month: ".concat(qa(n.props.selected,{dateFormat:"MMMM yyyy",locale:s})):n.props.showQuarterYearPicker?d="Selected quarter: ".concat(qa(n.props.selected,{dateFormat:"yyyy, QQQ",locale:s})):d="Selected date: ".concat(qa(n.props.selected,{dateFormat:h,locale:s})),Ue.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},d)},n.renderDateInput=function(){var r,s,o,c,h,d,m,g=Gr(n.props.className,(r={},r[n.props.outsideClickIgnoreClass||e.defaultProps.outsideClickIgnoreClass]=n.state.open,r)),_=n.props.customInput||Ue.createElement("input",{type:"text"}),S=n.props.customInputRef||"ref",M={},C=(o=n.props["aria-describedby"])!==null&&o!==void 0?o:n.props.ariaDescribedBy,w=(c=n.props["aria-invalid"])!==null&&c!==void 0?c:n.props.ariaInvalid,T=(h=n.props["aria-label"])!==null&&h!==void 0?h:n.props.ariaLabel,D=(d=n.props["aria-labelledby"])!==null&&d!==void 0?d:n.props.ariaLabelledBy,I=(m=n.props["aria-required"])!==null&&m!==void 0?m:n.props.ariaRequired;return C!=null&&(M["aria-describedby"]=C),w!=null&&(M["aria-invalid"]=w),T!=null&&(M["aria-label"]=T),D!=null&&(M["aria-labelledby"]=D),I!=null&&(M["aria-required"]=I),ne.cloneElement(_,Rn((s={},s[S]=function(L){n.input=L},s.value=n.getInputValue(),s.onBlur=n.handleBlur,s.onChange=n.handleChange,s.onClick=n.onInputClick,s.onFocus=n.handleFocus,s.onKeyDown=n.onInputKeyDown,s.id=n.props.id,s.name=n.props.name,s.form=n.props.form,s.autoFocus=n.props.autoFocus,s.placeholder=n.props.placeholderText,s.disabled=n.props.disabled,s.autoComplete=n.props.autoComplete,s.className=Gr(_.props.className,g),s.title=n.props.title,s.readOnly=n.props.readOnly,s.required=n.props.required,s.tabIndex=n.props.tabIndex,s),M))},n.renderClearButton=function(){var r=n.props,s=r.isClearable,o=r.disabled,c=r.selected,h=r.startDate,d=r.endDate,m=r.clearButtonTitle,g=r.clearButtonClassName,_=g===void 0?"":g,S=r.ariaLabelClose,M=S===void 0?"Close":S,C=r.selectedDates,w=r.readOnly;return s&&!w&&(c!=null||h!=null||d!=null||C?.length)?Ue.createElement("button",{type:"button",className:Gr("react-datepicker__close-icon",_,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":M,onClick:n.onClearClick,title:m,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:JV,readOnly:!1,rangeSeparator:qV,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:L0,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(t,n){var r,s,o,c;this.props.selectsRange&&AP(t.startDate,this.props.startDate)?this.setPreSelection(this.props.startDate):AP(t.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&t.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),this.props.selectsRange&&n.open===!1&&this.state.open===!0&&this.state.monthSelectedIn!==0&&this.setState({monthSelectedIn:0}),t.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:SP(this.props.highlightDates)}),!n.focused&&!yp(t.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((s=(r=this.props).onCalendarOpen)===null||s===void 0||s.call(r)),n.open===!0&&this.state.open===!1&&((c=(o=this.props).onCalendarClose)===null||c===void 0||c.call(o)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var t=this.props,n=t.showIcon,r=t.icon,s=t.calendarIconClassname,o=t.calendarIconClassName,c=t.toggleCalendarOnIconClick,h=this.state.open;return s&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),Ue.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&Ue.createElement(Ase,Rn({icon:r,className:Gr(o,!o&&s,h&&"react-datepicker-ignore-onclickoutside")},c?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var t=this.renderCalendar();if(this.props.inline)return t;if(this.props.withPortal){var n=this.state.open?Ue.createElement(eB,{enableTabLoop:this.props.enableTabLoop},Ue.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},t)):null;return this.state.open&&this.props.portalId&&(n=Ue.createElement($V,Rn({portalId:this.props.portalId},this.props),n)),Ue.createElement(Ue.Fragment,null,this.renderInputContainer(),n)}return Ue.createElement(Ise,Rn({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:t,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow,monthHeaderPosition:this.props.monthHeaderPosition}))},e})(ne.Component),Pse="input",D1="navigate";const Lse={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},Use=(i,e,t)=>{let n;const r=Lse[i];return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",String(e)),t?.addSuffix?t.comparison&&t.comparison>0?"dans "+n:"il y a "+n:n},kse={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Vse={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Bse={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zse={date:Lg({formats:kse,defaultWidth:"full"}),time:Lg({formats:Vse,defaultWidth:"full"}),dateTime:Lg({formats:Bse,defaultWidth:"full"})},Fse={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},Hse=(i,e,t,n)=>Fse[i],Gse={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},jse={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},qse={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},Yse={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Wse={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},Xse=(i,e)=>{const t=Number(i),n=e?.unit;if(t===0)return"0";const r=["year","week","hour","minute","second"];let s;return t===1?s=n&&r.includes(n)?"re":"er":s="me",t+s},Kse=["MMM","MMMM"],Qse={preprocessor:(i,e)=>i.getDate()===1||!e.some(n=>n.isToken&&Kse.includes(n.value))?e:e.map(n=>n.isToken&&n.value==="do"?{isToken:!0,value:"d"}:n),ordinalNumber:Xse,era:zc({values:Gse,defaultWidth:"wide"}),quarter:zc({values:jse,defaultWidth:"wide",argumentCallback:i=>i-1}),month:zc({values:qse,defaultWidth:"wide"}),day:zc({values:Yse,defaultWidth:"wide"}),dayPeriod:zc({values:Wse,defaultWidth:"wide"})},Zse=/^(\d+)(ime|re|me|er|e)?/i,Jse=/\d+/i,$se={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},eae={any:[/^av/i,/^ap/i]},tae={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},nae={any:[/1/i,/2/i,/3/i,/4/i]},iae={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},rae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},sae={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},aae={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},oae={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},lae={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},cae={ordinalNumber:xV({matchPattern:Zse,parsePattern:Jse,valueCallback:i=>parseInt(i)}),era:Fc({matchPatterns:$se,defaultMatchWidth:"wide",parsePatterns:eae,defaultParseWidth:"any"}),quarter:Fc({matchPatterns:tae,defaultMatchWidth:"wide",parsePatterns:nae,defaultParseWidth:"any",valueCallback:i=>i+1}),month:Fc({matchPatterns:iae,defaultMatchWidth:"wide",parsePatterns:rae,defaultParseWidth:"any"}),day:Fc({matchPatterns:sae,defaultMatchWidth:"wide",parsePatterns:aae,defaultParseWidth:"any"}),dayPeriod:Fc({matchPatterns:oae,defaultMatchWidth:"any",parsePatterns:lae,defaultParseWidth:"any"})},uae={code:"fr",formatDistance:Use,formatLong:zse,formatRelative:Hse,localize:Qse,match:cae,options:{weekStartsOn:1,firstWeekContainsDate:4}};class k0{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const hae=()=>{if(!(typeof localStorage>"u"))return{get:i=>Promise.resolve(localStorage.getItem(i)),set:(i,e)=>Promise.resolve(localStorage.setItem(i,e)),remove:i=>Promise.resolve(localStorage.removeItem(i))}},Ss={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:hae()},WR=i=>i?typeof i=="string"?{publicKey:i}:i.toString()==="[object Object]"?i:{}:{},fae=(i,e="https://api.emailjs.com")=>{if(!i)return;const t=WR(i);Ss.publicKey=t.publicKey,Ss.blockHeadless=t.blockHeadless,Ss.storageProvider=t.storageProvider,Ss.blockList=t.blockList,Ss.limitRate=t.limitRate,Ss.origin=t.origin||e},tB=async(i,e,t={})=>{const n=await fetch(Ss.origin+i,{method:"POST",headers:t,body:e}),r=await n.text(),s=new k0(n.status,r);if(n.ok)return s;throw s},nB=(i,e,t)=>{if(!i||typeof i!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},dae=i=>{if(i&&i.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},iB=i=>i.webdriver||!i.languages||i.languages.length===0,rB=()=>new k0(451,"Unavailable For Headless Browser"),pae=(i,e)=>{if(!Array.isArray(i))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},mae=i=>!i.list?.length||!i.watchVariable,gae=(i,e)=>i instanceof FormData?i.get(e):i[e],sB=(i,e)=>{if(mae(i))return!1;pae(i.list,i.watchVariable);const t=gae(e,i.watchVariable);return typeof t!="string"?!1:i.list.includes(t)},aB=()=>new k0(403,"Forbidden"),vae=(i,e)=>{if(typeof i!="number"||i<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},yae=async(i,e,t)=>{const n=Number(await t.get(i)||0);return e-Date.now()+n},oB=async(i,e,t)=>{if(!e.throttle||!t)return!1;vae(e.throttle,e.id);const n=e.id||i;return await yae(n,e.throttle,t)>0?!0:(await t.set(n,Date.now().toString()),!1)},lB=()=>new k0(429,"Too Many Requests"),_ae=async(i,e,t,n)=>{const r=WR(n),s=r.publicKey||Ss.publicKey,o=r.blockHeadless||Ss.blockHeadless,c=r.storageProvider||Ss.storageProvider,h={...Ss.blockList,...r.blockList},d={...Ss.limitRate,...r.limitRate};return o&&iB(navigator)?Promise.reject(rB()):(nB(s,i,e),dae(t),t&&sB(h,t)?Promise.reject(aB()):await oB(location.pathname,d,c)?Promise.reject(lB()):tB("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:i,template_id:e,template_params:t}),{"Content-type":"application/json"}))},Sae=i=>{if(!i||i.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},bae=i=>typeof i=="string"?document.querySelector(i):i,xae=async(i,e,t,n)=>{const r=WR(n),s=r.publicKey||Ss.publicKey,o=r.blockHeadless||Ss.blockHeadless,c=Ss.storageProvider||r.storageProvider,h={...Ss.blockList,...r.blockList},d={...Ss.limitRate,...r.limitRate};if(o&&iB(navigator))return Promise.reject(rB());const m=bae(t);nB(s,i,e),Sae(m);const g=new FormData(m);return sB(h,g)?Promise.reject(aB()):await oB(location.pathname,d,c)?Promise.reject(lB()):(g.append("lib_version","4.4.1"),g.append("service_id",i),g.append("template_id",e),g.append("user_id",s),tB("/api/v1.0/email/send-form",g))},UA={init:fae,send:_ae,sendForm:xae,EmailJSResponseStatus:k0};function Eae(){const i=ne.useRef(),[e,t]=ne.useState({prenom:"",nom:"",email:"",telephone:"",service:"",date:"",heure:"",commentaires:""}),[n,r]=ne.useState(null),[s,o]=ne.useState([]),[c,h]=ne.useState(!1),[d,m]=ne.useState(null),[g,_]=ne.useState([]),[S,M]=ne.useState([]),[C,w]=ne.useState([]),T=H=>{const K=H.getFullYear(),J=String(H.getMonth()+1).padStart(2,"0"),oe=String(H.getDate()).padStart(2,"0");return`${K}-${J}-${oe}`};ne.useEffect(()=>{I(),D(),L()},[]);const D=async()=>{try{const H=Xl(_s,"settings","modelService"),K=await z_(H),J=K.exists()?K.data().isOpen:!1,oe=zN.filter(se=>!(se.isModelService&&!J));_(oe)}catch(H){console.error("Erreur vrification service modle:",H),_(zN.filter(K=>!K.isModelService))}},I=async()=>{try{const H=Xl(_s,"settings","weeklySchedule"),K=await z_(H);K.exists()?m(K.data()):m({monday:{open:!1,label:"Lundi"},tuesday:{open:!1,label:"Mardi"},wednesday:{open:!1,label:"Mercredi"},thursday:{open:!1,label:"Jeudi"},friday:{open:!1,label:"Vendredi"},saturday:{open:!0,label:"Samedi"},sunday:{open:!0,label:"Dimanche"}})}catch(H){console.error("Erreur chargement planning:",H),m({monday:{open:!1,label:"Lundi"},tuesday:{open:!1,label:"Mardi"},wednesday:{open:!1,label:"Mercredi"},thursday:{open:!1,label:"Jeudi"},friday:{open:!1,label:"Vendredi"},saturday:{open:!0,label:"Samedi"},sunday:{open:!0,label:"Dimanche"}})}},L=async()=>{try{const H=y_(hp(_s,"blockedDates")),K=await __(H),J=[],oe=[];K.forEach(se=>{const Z=se.data();Z.actionType==="open"?oe.push(Z.date):Z.allDay&&J.push(Z.date)}),M(J),w(oe)}catch(H){console.error("Erreur chargement dates bloques:",H)}},j=H=>{if(!d)return!1;const K=H.getDay(),oe={0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"}[K];return d[oe]?.open??!1},Y=H=>{const K=T(H);return C.includes(K)?!0:S.includes(K)?!1:j(H)},k=async(H,K,J)=>{try{const[oe,se]=K.split(":").map(Number),Z=oe*60+se,le=Z+J,Ce=y_(hp(_s,"reservations"),lw("date","==",H)),Te=await __(Ce);for(const Ye of Te.docs){const xe=Ye.data(),[Oe,rt]=xe.heure.split(":").map(Number),ft=Oe*60+rt,bt=ft+xe.duration;if(Z>=ft&&Z<bt||le>ft&&le<=bt||Z<=ft&&le>=bt)return!1}return!0}catch(oe){return console.error("Erreur lors de la vrification de disponibilit:",oe),!1}},V=async H=>{try{const K=y_(hp(_s,"blockedDates"),lw("date","==",H),lw("allDay","==",!1)),J=await __(K);let oe=[];return J.forEach(se=>{const Z=se.data();Z.blockedHours&&Array.isArray(Z.blockedHours)&&(oe=[...oe,...Z.blockedHours])}),oe}catch(K){return console.error("Erreur rcupration heures bloques:",K),[]}},N=ne.useCallback(async(H,K)=>{if(!K)return[];const J=[],oe=540,se=13.5*60,Z=840,le=1140,Ce=await V(K),Te=[];for(let Ye=oe;Ye+H<=se;Ye+=30){const xe=Math.floor(Ye/60),Oe=Ye%60,rt=`${xe.toString().padStart(2,"0")}:${Oe.toString().padStart(2,"0")}`;Ce.includes(rt)||Te.push(rt)}for(let Ye=Z;Ye+H<=le;Ye+=30){const xe=Math.floor(Ye/60),Oe=Ye%60,rt=`${xe.toString().padStart(2,"0")}:${Oe.toString().padStart(2,"0")}`;Ce.includes(rt)||Te.push(rt)}for(const Ye of Te)await k(K,Ye,H)&&J.push(Ye);return J},[]),O=async H=>{const K=H.target.value,J=g.find(oe=>oe.id===K);if(J&&bo("service_selected",{service_name:J.name,service_price:J.price}),t({...e,service:K,heure:""}),o([]),J&&e.date){const oe=await N(J.duration,e.date);o(oe)}},z=H=>{const{name:K,value:J}=H.target;t({...e,[K]:J})},W=async H=>{if(!H){r(null),t({...e,date:"",heure:""}),o([]);return}r(H);const K=T(H),J={...e,date:K,heure:""};if(t(J),bo("date_selected",{selected_date:K}),J.service){const oe=g.find(se=>se.id===J.service);if(oe){const se=await N(oe.duration,K);o(se)}}};ne.useEffect(()=>{(async()=>{if(e.service&&e.date){const K=g.find(J=>J.id===e.service);if(K){const J=await N(K.duration,e.date);o(J)}}})()},[e.service,e.date,g,N]);const q=async H=>{if(H.preventDefault(),!e.date){alert("Veuillez slectionner une date");return}h(!0);const K=g.find(oe=>oe.id===e.service);if(bo("booking_started",{service:K.name,service_price:K.price,date:e.date}),!await k(e.date,e.heure,K.duration)){bo("booking_slot_unavailable",{service:K.name,requested_date:e.date,requested_time:e.heure}),alert("Dsol, ce crneau vient d'tre rserv. Veuillez en choisir un autre."),h(!1);const oe=await N(K.duration,e.date);o(oe);return}try{await YL(hp(_s,"reservations"),{prenom:e.prenom,nom:e.nom,email:e.email,telephone:e.telephone,service:K.name,serviceId:e.service,date:e.date,heure:e.heure,duration:K.duration,commentaires:e.commentaires,timestamp:new Date,price:K.price,isModelBooking:K.isModelService||!1});const oe={to_name:e.prenom,from_name:`${e.prenom} ${e.nom}`,client_email:e.email,client_phone:e.telephone,service_name:`${K.name} - ${K.price}`,appointment_date:new Date(e.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),appointment_time:e.heure,comments:e.commentaires||"Aucun",address:"60 bd Pasteur 94260 - Sonner  Demoniere, prendre le 2me ascenseur prs des escaliers, sortir  gauche, sonner porte L",instructions:"Venez avec les cils propres et dmaquills. Attention : prsence de deux chats au domicile."};await UA.send("service_4t9ude2","template_z26jqp7",oe,"vSn8lOsAhAksc03kS"),await UA.send("service_4t9ude2","template_8smxy0b",oe,"vSn8lOsAhAksc03kS"),bo("purchase",{transaction_id:`booking_${Date.now()}`,value:parseFloat(K.price.replace("","")),currency:"EUR",items:[{item_id:K.id,item_name:K.name,price:parseFloat(K.price.replace("",""))}]}),bo("booking_completed",{service_name:K.name,service_id:K.id,service_price:K.price,booking_date:e.date,booking_time:e.heure,client_email:e.email}),alert("Rendez-vous confirm! Vous allez recevoir un email de confirmation."),t({prenom:"",nom:"",email:"",telephone:"",service:"",date:"",heure:"",commentaires:""}),r(null),o([])}catch(oe){console.error("Erreur:",oe),bo("booking_error",{error_message:oe.message,service:K.name,date:e.date,time:e.heure}),alert("Une erreur est survenue. Veuillez ressayer.")}finally{h(!1)}},he=()=>{if(!d)return"";const H=[];if(["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].forEach(oe=>{d[oe]?.open&&H.push(d[oe].label)}),H.length===0)return"Aucun jour d'ouverture configur";if(H.length===1)return H[0];if(H.length===2)return`${H[0]} et ${H[1]}`;const J=H.pop();return`${H.join(", ")} et ${J}`},fe=new Date;return fe.setFullYear(fe.getFullYear()+2),B.jsx("div",{className:"booking-container",id:"reservation",children:B.jsxs("form",{ref:i,onSubmit:q,className:"booking-form",children:[B.jsxs("div",{className:"form-row",children:[B.jsxs("div",{className:"form-group",children:[B.jsx("label",{htmlFor:"prenom",children:"Prnom "}),B.jsx("input",{type:"text",id:"prenom",name:"prenom",value:e.prenom,onChange:z,required:!0})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{htmlFor:"nom",children:"Nom "}),B.jsx("input",{type:"text",id:"nom",name:"nom",value:e.nom,onChange:z,required:!0})]})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{htmlFor:"email",children:"Email "}),B.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:z,required:!0})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{htmlFor:"telephone",children:"Tlphone "}),B.jsx("input",{type:"tel",id:"telephone",name:"telephone",value:e.telephone,onChange:z,required:!0})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{htmlFor:"service",children:[B.jsx("i",{className:"fas fa-sparkles"})," Service souhait"]}),B.jsxs("div",{className:"select-wrapper",children:[B.jsxs("select",{id:"service",name:"service",value:e.service,onChange:O,required:!0,children:[B.jsx("option",{value:"",children:"Choisir un service"}),g.map(H=>B.jsxs("option",{value:H.id,children:[H.name," - ",H.price]},H.id))]}),B.jsx("i",{className:"fas fa-chevron-down select-arrow"})]}),e.service&&B.jsx("p",{className:"service-description",children:g.find(H=>H.id===e.service)?.description})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{htmlFor:"date",children:[B.jsx("i",{className:"far fa-calendar-alt"})," Date souhaite"]}),d&&B.jsxs("p",{className:"opening-days-info",children:[B.jsx("i",{className:"fas fa-info-circle"})," Jours d'ouverture: ",B.jsx("strong",{children:he()})]}),B.jsxs("div",{className:"date-input-container",children:[B.jsx(Ose,{selected:n,onChange:W,filterDate:Y,minDate:new Date,maxDate:fe,locale:uae,dateFormat:"dd/MM/yyyy",placeholderText:"Slectionner une date",className:"date-picker-input",inline:!1,required:!0}),B.jsx("i",{className:"fas fa-calendar-alt date-calendar-icon"})]})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{htmlFor:"heure",children:[B.jsx("i",{className:"far fa-clock"})," Heure prfre"]}),B.jsxs("div",{className:"select-wrapper",children:[B.jsxs("select",{id:"heure",name:"heure",value:e.heure,onChange:z,disabled:!e.service||!e.date||s.length===0,required:!0,children:[B.jsx("option",{value:"",children:e.date?e.service?s.length===0?"Chargement des crneaux...":"Choisir un crneau":"Choisir d'abord un service":"Choisir d'abord une date"}),s.map(H=>B.jsx("option",{value:H,children:H},H))]},`slots-${e.date}-${e.service}-${s.join(",")}`),B.jsx("i",{className:"fas fa-chevron-down select-arrow"})]})]}),B.jsxs("div",{style:{background:"yellow",padding:"10px",margin:"10px 0",border:"2px solid red"},children:[B.jsx("p",{children:B.jsx("strong",{children:"DEBUG INFO:"})}),B.jsxs("p",{children:["Service: ",e.service||"AUCUN"]}),B.jsxs("p",{children:["Date: ",e.date||"AUCUNE"]}),B.jsxs("p",{children:["Date slectionne (objet): ",n?T(n):"NULL"]}),B.jsxs("p",{children:["Crneaux: ",s.length]}),B.jsxs("p",{children:["Liste: ",s.join(", ")||"VIDE"]})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{htmlFor:"commentaires",children:"Commentaires ou demandes spciales"}),B.jsx("textarea",{id:"commentaires",name:"commentaires",value:e.commentaires,onChange:z,rows:"4",placeholder:"Premire fois ? Allergies ? Prfrences particulires ?"})]}),B.jsxs("div",{className:"info-box",children:[B.jsxs("h4",{children:[B.jsx("i",{className:"fas fa-info-circle"})," Informations importantes:"]}),B.jsxs("ul",{children:[B.jsx("li",{children:"Venez avec les cils propres et dmaquills"}),B.jsx("li",{children:"Attention: prsence de deux chats au domicile"})]})]}),B.jsx("button",{type:"submit",className:"submit-button",disabled:c,children:c?B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"fas fa-spinner fa-spin"})," Envoi en cours..."]}):B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"far fa-calendar-check"})," Confirmer le Rendez-vous"]})})]})})}function Tae(){const[i,e]=ne.useState(!1),t=ne.useRef(null);return ne.useEffect(()=>{const n=new IntersectionObserver(([r])=>{r.isIntersecting&&(e(!0),n.unobserve(r.target))},{threshold:.3});return t.current&&n.observe(t.current),()=>n.disconnect()},[]),B.jsx("section",{id:"rservation",ref:t,children:B.jsxs("div",{className:`reservation-container ${i?"fade-in-up":""}`,children:[B.jsx("h2",{children:"Rservation"}),B.jsx(Eae,{})]})})}function Mae(){const i=ne.useRef(null),[e,t]=ne.useState(!1);return ne.useEffect(()=>{const n=()=>{if(!i.current)return;const r=i.current.getBoundingClientRect().top,s=window.innerHeight;if(r<=s*.8){t(!0);const o=document.querySelector(".section-before-footer");o&&o.classList.add("slide-up")}};return window.addEventListener("scroll",n),n(),()=>{window.removeEventListener("scroll",n)}},[]),B.jsx("section",{id:"contact",children:B.jsx("footer",{ref:i,className:`footer ${e?"footer-visible":""}`,children:B.jsxs("div",{className:"footer-content",children:[B.jsxs("div",{className:"footer-main",children:[B.jsxs("div",{className:"footer-section",children:[B.jsx("h3",{className:"footer-logo",children:"Shiynelly Lashes"}),B.jsx("p",{className:"footer-tagline",children:"Extensions de cils"}),B.jsxs("div",{className:"footer-social",children:[B.jsx("a",{href:"https://www.instagram.com/shiynellylashes/",onClick:()=>{bo("social_click",{platform:"instagram",location:"footer"})},target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",children:B.jsx("i",{className:"fab fa-instagram"})}),B.jsx("a",{href:"https://www.tiktok.com/@shiynellylashes",onClick:()=>{bo("social_click",{platform:"tiktok",location:"footer"})},target:"_blank",rel:"noopener noreferrer","aria-label":"TikTok",children:B.jsx("i",{className:"fab fa-tiktok"})})]})]}),B.jsxs("div",{className:"footer-section",children:[B.jsx("h4",{children:"Navigation"}),B.jsxs("ul",{children:[B.jsx("li",{children:B.jsx("a",{href:"/",children:"Accueil"})}),B.jsx("li",{children:B.jsx("a",{href:"#nosprestations",children:"Nos Prestations"})}),B.jsx("li",{children:B.jsx("a",{href:"#contact",children:"Contact"})}),B.jsx("li",{children:B.jsx("a",{href:"#rservation",children:"Rservation"})})]})]}),B.jsxs("div",{className:"footer-section",children:[B.jsx("h4",{children:"Services"}),B.jsxs("ul",{children:[B.jsx("li",{children:B.jsx("a",{href:"#nosprestations",children:"Cils  Cils"})}),B.jsx("li",{children:B.jsx("a",{href:"#nosprestations",children:"Pose Whispy"})}),B.jsx("li",{children:B.jsx("a",{href:"#nosprestations",children:"Pose Mixte"})}),B.jsx("li",{children:B.jsx("a",{href:"#nosprestations",children:"Pose Russe"})}),B.jsx("li",{children:B.jsx("a",{href:"#nosprestations",children:"Dpose"})}),B.jsx("li",{children:B.jsx("a",{href:"#nosprestations",children:"Clusters"})}),B.jsx("li",{children:B.jsx("a",{href:"#nosprestations",children:"Pose de Cils"})})]})]}),B.jsxs("div",{className:"footer-section",children:[B.jsx("h4",{children:"Contact"}),B.jsxs("ul",{className:"footer-contact",children:[B.jsxs("li",{children:[B.jsx("i",{className:"fas fa-map-marker-alt"}),B.jsx("span",{children:"94260 Fresnes, France"})]}),B.jsxs("li",{children:[B.jsx("i",{className:"fas fa-envelope"}),B.jsx("a",{href:"mailto:studiobynelly@gmail.com",className:"email-link",children:B.jsx("span",{children:"studiobynelly@gmail.com"})})]})]})]})]}),B.jsxs("div",{className:"footer-bottom",children:[B.jsx("p",{children:" 2026 Unix Creative Studio. Tous droits rservs."}),B.jsxs("div",{className:"footer-legal",children:[B.jsx("a",{href:"https://mixed-stoat-359.notion.site/Terms-and-Conditions-28788674cf3280a286eaf731367bed4b?source=copy_link",children:"Mentions lgales"}),B.jsx("span",{children:""}),B.jsx("a",{href:"https://mixed-stoat-359.notion.site/Privacy-Policy-28788674cf3280b3a03dd515020f46f2?source=copy_link",children:"Politique de confidentialit"})]})]})]})})})}function CP(){return ne.useEffect(()=>{try{typeof bo=="function"&&bo("page_view",{page_title:document.title,page_location:window.location.href})}catch(i){console.error("Analytics error:",i)}},[]),B.jsxs(B.Fragment,{children:[B.jsx(hq,{}),B.jsx(Qee,{}),B.jsx(Jee,{}),B.jsx(Tae,{}),B.jsx(Mae,{})]})}function wae({onLoginSuccess:i}){const[e,t]=ne.useState(""),[n,r]=ne.useState(""),[s,o]=ne.useState(""),[c,h]=ne.useState(!1),d=async m=>{m.preventDefault(),o(""),h(!0);try{await Yj(hx,e,n),i()}catch(g){o("Email ou mot de passe incorrect"),console.error("Login error:",g)}finally{h(!1)}};return B.jsx("div",{className:"admin-login-container",children:B.jsxs("div",{className:"admin-login-box",children:[B.jsx("h1",{children:" Admin Panel"}),B.jsx("p",{children:"Connexion requise"}),B.jsxs("form",{onSubmit:d,className:"admin-login-form",children:[B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"Email"}),B.jsx("input",{type:"email",value:e,onChange:m=>t(m.target.value),required:!0,placeholder:"votre@email.com"})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"Mot de passe"}),B.jsx("input",{type:"password",value:n,onChange:m=>r(m.target.value),required:!0,placeholder:""})]}),s&&B.jsx("div",{className:"error-message",children:s}),B.jsx("button",{type:"submit",disabled:c,className:"login-button",children:c?"Connexion...":"Se connecter"})]})]})})}function Aae(){const[i,e]=ne.useState([]),[t,n]=ne.useState(!0);ne.useEffect(()=>{r()},[]);const r=async()=>{try{const h=y_(hp(_s,"reservations"),HL("timestamp","desc")),d=await __(h),m=[],g=new Date;d.forEach(_=>{const S={id:_.id,..._.data()},M=new Date(S.date+"T"+S.heure);S.isPast=M<g,m.push(S)}),e(m)}catch(h){console.error("Erreur chargement rservations:",h)}finally{n(!1)}},s=async h=>{const d=i.find(m=>m.id===h);if(window.confirm("tes-vous sr de vouloir annuler cette rservation?"))try{await nA(Xl(_s,"reservations",h));try{const m={to_name:d.prenom,from_name:"Shiynelly Lashes",client_email:d.email,service_name:d.service,appointment_date:new Date(d.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),appointment_time:d.heure,booking_link:"https://shiynellylashes.com/#/"};await UA.send("service_4t9ude2","template_it6eot2",m,"vSn8lOsAhAksc03kS"),console.log("Email d'annulation envoy")}catch(m){console.error("Erreur email:",m)}e(i.filter(m=>m.id!==h)),alert("Rservation annule et email envoy au client")}catch(m){console.error("Erreur suppression:",m),alert("Erreur lors de l'annulation")}};if(t)return B.jsx("div",{className:"loading",children:"Chargement..."});const o=i.filter(h=>!h.isPast),c=i.filter(h=>h.isPast);return B.jsxs("div",{className:"bookings-list",children:[B.jsxs("h2",{children:[B.jsx("i",{className:"fa-solid fa-calendar-check"})," Rservations  venir (",o.length,")"]}),o.length===0?B.jsx("p",{className:"no-bookings",children:"Aucune rservation  venir"}):B.jsx("div",{className:"bookings-table",children:o.map(h=>B.jsxs("div",{className:"booking-card",children:[B.jsxs("div",{className:"booking-header",children:[B.jsxs("h3",{children:[h.prenom," ",h.nom]}),B.jsx("span",{className:"booking-service",children:h.service})]}),B.jsxs("div",{className:"booking-details",children:[B.jsxs("p",{children:[B.jsx("i",{className:"fa-solid fa-calendar"})," ",B.jsx("strong",{children:"Date:"})," ",new Date(h.date).toLocaleDateString("fr-FR")]}),B.jsxs("p",{children:[B.jsx("i",{className:"fa-solid fa-clock"})," ",B.jsx("strong",{children:"Heure:"})," ",h.heure]}),B.jsxs("p",{children:[B.jsx("i",{className:"fa-solid fa-envelope"})," ",B.jsx("strong",{children:"Email:"})," ",h.email]}),B.jsxs("p",{children:[B.jsx("i",{className:"fa-solid fa-phone"})," ",B.jsx("strong",{children:"Tlphone:"})," ",h.telephone]}),h.commentaires&&B.jsxs("p",{children:[B.jsx("i",{className:"fa-solid fa-comment"})," ",B.jsx("strong",{children:"Commentaires:"})," ",h.commentaires]})]}),B.jsxs("button",{onClick:()=>s(h.id),className:"delete-button",children:[B.jsx("i",{className:"fa-solid fa-trash-can"})," Annuler"]})]},h.id))}),c.length>0&&B.jsxs(B.Fragment,{children:[B.jsxs("h2",{style:{marginTop:"40px"},children:[B.jsx("i",{className:"fa-solid fa-circle-check"})," Rservations termines (",c.length,")"]}),B.jsx("div",{className:"bookings-table",children:c.map(h=>B.jsxs("div",{className:"booking-card booking-past",children:[B.jsxs("div",{className:"booking-header",children:[B.jsxs("h3",{children:[h.prenom," ",h.nom]}),B.jsxs("div",{className:"booking-header-badges",children:[B.jsx("span",{className:"booking-service booking-service-past",children:h.service}),B.jsxs("span",{className:"badge-completed",children:[B.jsx("i",{className:"fa-solid fa-circle-check"})," Termine"]})]})]}),B.jsxs("div",{className:"booking-details",children:[B.jsxs("p",{children:[B.jsx("i",{className:"fa-solid fa-calendar"})," ",B.jsx("strong",{children:"Date:"})," ",new Date(h.date).toLocaleDateString("fr-FR")]}),B.jsxs("p",{children:[B.jsx("i",{className:"fa-solid fa-clock"})," ",B.jsx("strong",{children:"Heure:"})," ",h.heure]}),B.jsxs("p",{children:[B.jsx("i",{className:"fa-solid fa-envelope"})," ",B.jsx("strong",{children:"Email:"})," ",h.email]}),B.jsxs("p",{children:[B.jsx("i",{className:"fa-solid fa-phone"})," ",B.jsx("strong",{children:"Tlphone:"})," ",h.telephone]}),h.commentaires&&B.jsxs("p",{children:[B.jsx("i",{className:"fa-solid fa-comment"})," ",B.jsx("strong",{children:"Commentaires:"})," ",h.commentaires]})]}),B.jsxs("button",{onClick:()=>s(h.id),className:"delete-button delete-button-past",children:[B.jsx("i",{className:"fa-solid fa-trash-can"})," Supprimer"]})]},h.id))})]})]})}function Cae(){const[i,e]=ne.useState([]),[t,n]=ne.useState(!0),[r,s]=ne.useState(!1),[o,c]=ne.useState("block"),[h,d]=ne.useState("single"),[m,g]=ne.useState(""),[_,S]=ne.useState(""),[M,C]=ne.useState(""),[w,T]=ne.useState(""),[D,I]=ne.useState("allDay"),[L,j]=ne.useState([]),Y=["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30"];ne.useEffect(()=>{k()},[]);const k=async()=>{try{const se=y_(hp(_s,"blockedDates"),HL("date","asc")),Z=await __(se),le=[];Z.forEach(Ce=>{le.push({id:Ce.id,...Ce.data()})}),e(le)}catch(se){console.error("Erreur chargement dates:",se)}finally{n(!1)}},V=se=>{L.includes(se)?j(L.filter(Z=>Z!==se)):j([...L,se])},N=(se,Z)=>{const le=[],Ce=new Date(se+"T00:00:00"),Te=new Date(Z+"T00:00:00");for(;Ce<=Te;)le.push(Ce.toISOString().split("T")[0]),Ce.setDate(Ce.getDate()+1);return le},O=async se=>{se.preventDefault();let Z=[];if(h==="range"){if(!_||!M){alert("Veuillez slectionner une date de dbut et de fin");return}if(new Date(_)>new Date(M)){alert("La date de dbut doit tre avant la date de fin");return}Z=N(_,M)}else{if(!m){alert("Veuillez slectionner une date");return}Z=[m]}if(D==="hours"&&L.length===0&&o==="block"){alert("Veuillez slectionner au moins une heure");return}try{const le=Z.map(async Ce=>{const Te={date:Ce,reason:w||(o==="open"?"Ouvert exceptionnellement":"Ferm"),allDay:D==="allDay",actionType:o};return D==="hours"&&(Te.blockedHours=L),h==="range"&&(Te.isRange=!0,Te.rangeStart=_,Te.rangeEnd=M),YL(hp(_s,"blockedDates"),Te)});await Promise.all(le),g(""),S(""),C(""),T(""),I("allDay"),j([]),d("single"),c("block"),s(!1),k(),alert(`${Z.length} date(s) ${o==="open"?"ouverte(s)":"bloque(s)"} avec succs!`)}catch(le){console.error("Erreur ajout date:",le),alert("Erreur lors de l'ajout: "+le.message)}},z=async se=>{if(window.confirm("Supprimer cette date?"))try{await nA(Xl(_s,"blockedDates",se)),e(i.filter(Z=>Z.id!==se)),alert("Date supprime!")}catch(Z){console.error("Erreur suppression:",Z),alert("Erreur lors de la suppression")}},W=async(se,Z)=>{if(window.confirm(`Supprimer toutes les dates du ${se} au ${Z}?`))try{const le=i.filter(Te=>Te.isRange&&Te.rangeStart===se&&Te.rangeEnd===Z),Ce=le.map(Te=>nA(Xl(_s,"blockedDates",Te.id)));await Promise.all(Ce),e(i.filter(Te=>!(Te.isRange&&Te.rangeStart===se&&Te.rangeEnd===Z))),alert(`Priode supprime (${le.length} dates)!`)}catch(le){console.error("Erreur suppression:",le),alert("Erreur lors de la suppression")}},q=()=>{const se={},Z=[];return i.forEach(le=>{if(le.isRange){const Ce=`${le.rangeStart}_${le.rangeEnd}_${le.reason}_${le.actionType}`;se[Ce]||(se[Ce]={rangeStart:le.rangeStart,rangeEnd:le.rangeEnd,reason:le.reason,allDay:le.allDay,blockedHours:le.blockedHours,actionType:le.actionType,dates:[]}),se[Ce].dates.push(le)}else Z.push(le)}),{ranges:Object.values(se),singles:Z}};if(t)return B.jsx("div",{className:"loading",children:"Chargement..."});const{ranges:he,singles:fe}=q(),H=he.filter(se=>se.actionType==="block"||!se.actionType),K=he.filter(se=>se.actionType==="open"),J=fe.filter(se=>se.actionType==="block"||!se.actionType),oe=fe.filter(se=>se.actionType==="open");return B.jsxs("div",{className:"blocked-dates-manager",children:[B.jsxs("div",{className:"section-header",children:[B.jsxs("h2",{children:[B.jsx("i",{className:"fa-solid fa-lock"})," Gestion des Dates (",i.length,")"]}),B.jsx("button",{onClick:()=>s(!r),className:"add-button",children:r?B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"fa-solid fa-xmark"})," Annuler"]}):B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"fa-solid fa-plus"})," Ajouter une date"]})})]}),r&&B.jsxs("form",{onSubmit:O,className:"block-date-form",children:[B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{children:[B.jsx("i",{className:"fa-solid fa-toggle-on"})," Action"]}),B.jsxs("div",{className:"radio-group",children:[B.jsxs("label",{className:"radio-label-primary",children:[B.jsx("input",{type:"radio",value:"block",checked:o==="block",onChange:se=>c(se.target.value)}),B.jsxs("span",{className:"block-badge",children:[B.jsx("i",{className:"fa-solid fa-lock"})," Bloquer (Fermer)"]})]}),B.jsxs("label",{className:"radio-label-success",children:[B.jsx("input",{type:"radio",value:"open",checked:o==="open",onChange:se=>c(se.target.value)}),B.jsxs("span",{className:"open-badge",children:[B.jsx("i",{className:"fa-solid fa-circle-check"})," Ouvrir exceptionnellement"]})]})]}),B.jsx("p",{className:"help-text",children:o==="block"?" Fermez des dates normalement ouvertes (ex: vacances, week-end de Nol)":"Ouvrez des dates normalement fermes (ex: vendredi exceptionnel)"})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{children:[B.jsx("i",{className:"fa-solid fa-calendar"})," Mode de slection"]}),B.jsxs("div",{className:"radio-group",children:[B.jsxs("label",{children:[B.jsx("input",{type:"radio",value:"single",checked:h==="single",onChange:se=>d(se.target.value)}),"Date unique"]}),B.jsxs("label",{children:[B.jsx("input",{type:"radio",value:"range",checked:h==="range",onChange:se=>d(se.target.value)}),"Priode (plusieurs jours)"]})]})]}),h==="single"?B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{children:[B.jsx("i",{className:"fa-solid fa-calendar-day"})," Date  ",o==="open"?"ouvrir":"bloquer"]}),B.jsx("input",{type:"date",value:m,onChange:se=>g(se.target.value),required:!0})]}):B.jsxs("div",{className:"form-row",children:[B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{children:[B.jsx("i",{className:"fa-solid fa-calendar-day"})," Date de dbut"]}),B.jsx("input",{type:"date",value:_,onChange:se=>S(se.target.value),required:!0})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{children:[B.jsx("i",{className:"fa-solid fa-calendar-day"})," Date de fin"]}),B.jsx("input",{type:"date",value:M,onChange:se=>C(se.target.value),required:!0})]})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{children:[B.jsx("i",{className:"fa-solid fa-comment"})," Raison"]}),B.jsx("input",{type:"text",value:w,onChange:se=>T(se.target.value),placeholder:o==="open"?"Ex: Vendredi exceptionnel, Jour fri compens":"Ex: Congs d't, Vacances de Nol"})]}),o==="block"&&B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{children:[B.jsx("i",{className:"fa-solid fa-clock"})," Type de blocage"]}),B.jsxs("div",{className:"radio-group",children:[B.jsxs("label",{children:[B.jsx("input",{type:"radio",value:"allDay",checked:D==="allDay",onChange:se=>I(se.target.value)}),"Toute la journe"]}),B.jsxs("label",{children:[B.jsx("input",{type:"radio",value:"hours",checked:D==="hours",onChange:se=>I(se.target.value)}),"Heures spcifiques"]})]})]}),D==="hours"&&B.jsxs("div",{className:"form-group",children:[B.jsx("label",{children:"Slectionnez les heures  bloquer:"}),B.jsx("div",{className:"hours-grid",children:Y.map(se=>B.jsx("button",{type:"button",onClick:()=>V(se),className:`hour-button ${L.includes(se)?"selected":""}`,children:se},se))})]})]}),B.jsx("button",{type:"submit",className:`submit-button ${o==="open"?"submit-open":"submit-block"}`,children:o==="open"?B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"fa-solid fa-lock-open"})," Ouvrir ",h==="range"?"cette priode":"cette date"]}):B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"fa-solid fa-lock"})," Bloquer ",h==="range"?"cette priode":"cette date"]})})]}),B.jsxs("div",{className:"blocked-dates-list",children:[(K.length>0||oe.length>0)&&B.jsxs("div",{className:"open-section",children:[B.jsxs("h3",{children:[B.jsx("i",{className:"fa-solid fa-lock-open"})," Dates Ouvertes Exceptionnellement"]}),K.length>0&&K.map((se,Z)=>B.jsxs("div",{className:"open-range-card",children:[B.jsxs("div",{className:"date-info",children:[B.jsxs("h3",{children:[B.jsx("i",{className:"fa-solid fa-calendar-days"})," Du ",new Date(se.rangeStart+"T00:00:00").toLocaleDateString("fr-FR")," au ",new Date(se.rangeEnd+"T00:00:00").toLocaleDateString("fr-FR")]}),B.jsx("p",{className:"reason",children:se.reason}),B.jsxs("p",{className:"date-count",children:[se.dates.length," jour(s) ouvert(s)"]}),B.jsxs("span",{className:"badge open-badge",children:[B.jsx("i",{className:"fa-solid fa-circle-check"})," Ouvert"]})]}),B.jsxs("button",{onClick:()=>W(se.rangeStart,se.rangeEnd),className:"delete-button",children:[B.jsx("i",{className:"fa-solid fa-trash-can"})," Supprimer"]})]},Z)),oe.length>0&&oe.map(se=>B.jsxs("div",{className:"open-date-card",children:[B.jsxs("div",{className:"date-info",children:[B.jsxs("h3",{children:[B.jsx("i",{className:"fa-solid fa-calendar-day"})," ",new Date(se.date+"T00:00:00").toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),B.jsx("p",{className:"reason",children:se.reason}),B.jsxs("span",{className:"badge open-badge",children:[B.jsx("i",{className:"fa-solid fa-circle-check"})," Ouvert"]})]}),B.jsxs("button",{onClick:()=>z(se.id),className:"delete-button",children:[B.jsx("i",{className:"fa-solid fa-trash-can"})," Supprimer"]})]},se.id))]}),(H.length>0||J.length>0)&&B.jsxs("div",{className:"blocked-section",children:[B.jsxs("h3",{children:[B.jsx("i",{className:"fa-solid fa-lock"})," Dates Bloques"]}),H.length>0&&H.map((se,Z)=>B.jsxs("div",{className:"blocked-range-card",children:[B.jsxs("div",{className:"date-info",children:[B.jsxs("h3",{children:[B.jsx("i",{className:"fa-solid fa-calendar-days"})," Du ",new Date(se.rangeStart+"T00:00:00").toLocaleDateString("fr-FR")," au ",new Date(se.rangeEnd+"T00:00:00").toLocaleDateString("fr-FR")]}),B.jsx("p",{className:"reason",children:se.reason}),B.jsxs("p",{className:"date-count",children:[se.dates.length," jour(s) bloqu(s)"]}),se.allDay?B.jsx("span",{className:"badge all-day",children:"Toute la journe"}):B.jsxs("div",{className:"blocked-hours",children:[B.jsx("span",{className:"badge",children:"Heures bloques:"}),B.jsx("div",{className:"hours-list",children:se.blockedHours?.map(le=>B.jsx("span",{className:"hour-tag",children:le},le))})]})]}),B.jsxs("button",{onClick:()=>W(se.rangeStart,se.rangeEnd),className:"delete-button",children:[B.jsx("i",{className:"fa-solid fa-trash-can"})," Supprimer"]})]},Z)),J.length>0&&J.map(se=>B.jsxs("div",{className:"blocked-date-card",children:[B.jsxs("div",{className:"date-info",children:[B.jsxs("h3",{children:[B.jsx("i",{className:"fa-solid fa-calendar-day"})," ",new Date(se.date+"T00:00:00").toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),B.jsx("p",{className:"reason",children:se.reason}),se.allDay?B.jsx("span",{className:"badge all-day",children:"Toute la journe"}):B.jsxs("div",{className:"blocked-hours",children:[B.jsx("span",{className:"badge",children:"Heures bloques:"}),B.jsx("div",{className:"hours-list",children:se.blockedHours?.map(Z=>B.jsx("span",{className:"hour-tag",children:Z},Z))})]})]}),B.jsxs("button",{onClick:()=>z(se.id),className:"delete-button",children:[B.jsx("i",{className:"fa-solid fa-trash-can"})," Supprimer"]})]},se.id))]}),i.length===0&&B.jsx("p",{className:"no-dates",children:"Aucune date configure"})]})]})}function Rae(){const[i,e]=ne.useState({monday:{open:!1,label:"Lundi"},tuesday:{open:!1,label:"Mardi"},wednesday:{open:!1,label:"Mercredi"},thursday:{open:!1,label:"Jeudi"},friday:{open:!1,label:"Vendredi"},saturday:{open:!0,label:"Samedi"},sunday:{open:!0,label:"Dimanche"}}),[t,n]=ne.useState(!0),[r,s]=ne.useState(!1);ne.useEffect(()=>{o()},[]);const o=async()=>{try{const m=Xl(_s,"settings","weeklySchedule"),g=await z_(m);if(g.exists()){const _=g.data();e(S=>({...S,..._}))}}catch(m){console.error("Erreur chargement planning hebdomadaire:",m)}finally{n(!1)}},c=async m=>{const g={...i,[m]:{...i[m],open:!i[m].open}};e(g);try{s(!0),await tA(Xl(_s,"settings","weeklySchedule"),g),alert(`${g[m].label} ${g[m].open?"ouvert":"ferm"}!`)}catch(_){console.error("Erreur sauvegarde:",_),alert("Erreur lors de la sauvegarde"),e(i)}finally{s(!1)}};if(t)return B.jsx("div",{className:"loading",children:"Chargement..."});const h=Object.values(i).filter(m=>m.open).length,d=7-h;return B.jsxs("div",{className:"weekly-availability",children:[B.jsxs("div",{className:"section-header",children:[B.jsxs("h2",{children:[B.jsx("i",{className:"fa-solid fa-calendar"})," Jours d'ouverture"]}),B.jsx("p",{className:"subtitle",children:"Slectionnez les jours o vous acceptez des rendez-vous"})]}),h===0&&B.jsxs("div",{className:"warning-box",children:[B.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),B.jsx("strong",{children:"Attention:"})," Aucun jour n'est ouvert. Les clients ne pourront pas rserver."]}),B.jsx("div",{className:"days-grid",children:Object.entries(i).map(([m,g])=>B.jsxs("div",{className:`day-card ${g.open?"open":"closed"}`,children:[B.jsxs("div",{className:"day-info",children:[B.jsx("h3",{children:g.label}),B.jsx("span",{className:`status ${g.open?"open":"closed"}`,children:g.open?B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"fa-solid fa-circle-check"})," Ouvert"]}):B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"fa-solid fa-circle-xmark"})," Ferm"]})})]}),B.jsx("button",{onClick:()=>c(m),disabled:r,className:`toggle-button ${g.open?"close":"open"}`,children:g.open?B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"fa-solid fa-xmark"})," Fermer"]}):B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"fa-solid fa-check"})," Ouvrir"]})})]},m))}),B.jsxs("div",{className:"summary-card",children:[B.jsxs("h3",{children:[B.jsx("i",{className:"fa-solid fa-chart-simple"})," Rsum"]}),B.jsxs("div",{className:"summary-content",children:[B.jsxs("div",{className:"summary-item",children:[B.jsx("span",{className:"label",children:"Jours ouverts:"}),B.jsxs("span",{className:"value open",children:[h," jour",h>1?"s":""]})]}),B.jsxs("div",{className:"summary-item",children:[B.jsx("span",{className:"label",children:"Jours ferms:"}),B.jsxs("span",{className:"value closed",children:[d," jour",d>1?"s":""]})]})]})]}),B.jsxs("div",{className:"info-box",children:[B.jsxs("p",{children:[B.jsx("i",{className:"fa-solid fa-lightbulb"})," ",B.jsx("strong",{children:"Comment a marche:"})]}),B.jsxs("ul",{children:[B.jsx("li",{children:"Par dfaut, tous les jours sont ferms"}),B.jsx("li",{children:"Ouvrez uniquement les jours o vous travaillez"}),B.jsx("li",{children:"Les clients ne pourront rserver QUE sur les jours ouverts"}),B.jsx("li",{children:`Pour bloquer une date spcifique (vacances), utilisez l'onglet "Dates Bloques"`})]})]})]})}function Dae(){const[i,e]=ne.useState(!1),[t,n]=ne.useState(!0),[r,s]=ne.useState(!1);ne.useEffect(()=>{o()},[]);const o=async()=>{try{const h=Xl(_s,"settings","modelService"),d=await z_(h);d.exists()?e(d.data().isOpen||!1):(await tA(h,{isOpen:!1}),e(!1))}catch(h){console.error("Erreur chargement:",h)}finally{n(!1)}},c=async()=>{s(!0);try{const h=!i;await tA(Xl(_s,"settings","modelService"),{isOpen:h,lastUpdated:new Date}),e(h),alert(h?" Service Modle ACTIV - Les clients peuvent maintenant rserver!":" Service Modle DSACTIV - Les clients ne peuvent plus rserver.")}catch(h){console.error("Erreur:",h),alert("Erreur lors de la mise  jour")}finally{s(!1)}};return t?B.jsx("div",{className:"loading",children:"Chargement..."}):B.jsxs("div",{className:"toggle-model-service",children:[B.jsx("div",{className:"section-header",children:B.jsxs("h2",{children:[B.jsx("i",{className:"fa-solid fa-toggle-on"})," Service Modle - Disponibilit"]})}),B.jsxs("div",{className:"toggle-container",children:[B.jsxs("div",{className:`status-card ${i?"open":"closed"}`,children:[B.jsx("div",{className:"status-icon",children:i?B.jsx("i",{className:"fa-solid fa-lock-open"}):B.jsx("i",{className:"fa-solid fa-lock"})}),B.jsxs("div",{className:"status-content",children:[B.jsx("h3",{children:"Service Modle Gratuit"}),B.jsx("p",{className:"status-text",children:i?B.jsxs(B.Fragment,{children:[B.jsx("span",{className:"status-badge open",children:" OUVERT"}),"Les clients peuvent rserver ce service gratuitement via le formulaire de rservation."]}):B.jsxs(B.Fragment,{children:[B.jsx("span",{className:"status-badge closed",children:" FERM"}),"Les clients voient ce service mais ne peuvent pas le rserver pour le moment."]})}),B.jsxs("div",{className:"info-box",children:[B.jsx("i",{className:"fa-solid fa-info-circle"}),B.jsxs("div",{children:[B.jsx("strong",{children:"Comment a marche?"}),B.jsxs("ul",{children:[B.jsxs("li",{children:[B.jsx("strong",{children:"OUVERT:"})," Le service apparat dans le formulaire de rservation. Les clients peuvent prendre rendez-vous gratuitement."]}),B.jsxs("li",{children:[B.jsx("strong",{children:"FERM:"}),' Le service est visible dans "Nos Prestations" avec un badge "Actuellement indisponible". Les clients ne peuvent pas le rserver.']})]})]})]}),B.jsx("button",{onClick:c,className:`toggle-button ${i?"close-button":"open-button"}`,disabled:r,children:r?B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"fa-solid fa-spinner fa-spin"})," Mise  jour..."]}):i?B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"fa-solid fa-lock"})," Fermer le Service Modle"]}):B.jsxs(B.Fragment,{children:[B.jsx("i",{className:"fa-solid fa-lock-open"})," Ouvrir le Service Modle"]})})]})]}),B.jsxs("div",{className:"preview-section",children:[B.jsxs("h4",{children:[B.jsx("i",{className:"fa-solid fa-eye"})," Ce que voient les clients:"]}),B.jsxs("div",{className:"preview-cards",children:[B.jsxs("div",{className:"preview-card",children:[B.jsx("h5",{children:' Dans "Nos Prestations"'}),B.jsxs("div",{className:"preview-content",children:[B.jsx("p",{children:B.jsx("strong",{children:"Modle - Entranement"})}),B.jsx("p",{className:"preview-price",children:"Gratuit"}),i?B.jsxs("span",{className:"preview-badge open",children:[B.jsx("i",{className:"fa-solid fa-circle-check"})," Disponible"]}):B.jsx("span",{className:"preview-badge closed",children:"Actuellement indisponible"})]})]}),B.jsxs("div",{className:"preview-card",children:[B.jsx("h5",{children:" Dans le Formulaire de Rservation"}),B.jsx("div",{className:"preview-content",children:i?B.jsxs(B.Fragment,{children:[B.jsxs("p",{className:"preview-success",children:[B.jsx("i",{className:"fa-solid fa-circle-check"})," ",B.jsx("strong",{children:"Le service apparat"})," dans la liste des services disponibles"]}),B.jsx("p",{children:"Les clients peuvent le slectionner et rserver"})]}):B.jsxs(B.Fragment,{children:[B.jsxs("p",{className:"preview-info",children:[" ",B.jsx("strong",{children:"Le service N'apparat PAS"})," dans la liste"]}),B.jsx("p",{children:"Les clients ne peuvent pas le rserver"})]})})]})]})]})]})]})}function Nae(){const[i,e]=ne.useState(null),[t,n]=ne.useState(!0),[r,s]=ne.useState("bookings");ne.useEffect(()=>{const c=Kj(hx,h=>{e(h),n(!1)});return()=>c()},[]);const o=async()=>{try{await Qj(hx)}catch(c){console.error("Erreur dconnexion:",c)}};return t?B.jsx("div",{className:"loading",children:"Chargement..."}):i?B.jsxs("div",{className:"admin-panel",children:[B.jsxs("header",{className:"admin-header",children:[B.jsx("h1",{children:"Admin Panel - Shiynelly Lashes"}),B.jsxs("div",{className:"admin-nav",children:[B.jsxs("button",{className:`nav-btn ${r==="bookings"?"active":""}`,onClick:()=>s("bookings"),children:[B.jsx("i",{className:"fa-solid fa-calendar-check"})," Rservations"]}),B.jsxs("button",{className:`nav-btn ${r==="weekly"?"active":""}`,onClick:()=>s("weekly"),children:[B.jsx("i",{className:"fa-solid fa-calendar"})," Jours d'ouverture"]}),B.jsxs("button",{className:`nav-btn ${r==="blocked"?"active":""}`,onClick:()=>s("blocked"),children:[B.jsx("i",{className:"fa-solid fa-lock"})," Dates Bloques"]}),B.jsxs("button",{className:`nav-btn ${r==="toggle-model"?"active":""}`,onClick:()=>s("toggle-model"),children:[B.jsx("i",{className:"fa-solid fa-toggle-on"})," Service Modle"]}),B.jsxs("button",{onClick:o,className:"logout-button",children:[B.jsx("i",{className:"fa-solid fa-arrow-right-from-bracket"})," Dconnexion"]})]})]}),B.jsxs("main",{className:"admin-content",children:[r==="bookings"&&B.jsx(Aae,{}),r==="weekly"&&B.jsx(Rae,{}),r==="blocked"&&B.jsx(Cae,{}),r==="toggle-model"&&B.jsx(Dae,{})]})]}):B.jsx(wae,{onLoginSuccess:()=>e(hx.currentUser)})}function Iae(){return B.jsx(xF,{children:B.jsxs($z,{children:[B.jsx(Jb,{path:"/",element:B.jsx(CP,{})}),B.jsx(Jb,{path:"/admin",element:B.jsx(Nae,{})}),B.jsx(Jb,{path:"*",element:B.jsx(CP,{})})]})})}lz.createRoot(document.getElementById("root")).render(B.jsx(ne.StrictMode,{children:B.jsx(Iae,{})}));
