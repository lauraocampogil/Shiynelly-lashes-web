(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function iM(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var MT={exports:{}},py={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw;function CP(){if(Yw)return py;Yw=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:i,type:n,key:l,ref:s!==void 0?s:null,props:a}}return py.Fragment=e,py.jsx=t,py.jsxs=t,py}var Kw;function IP(){return Kw||(Kw=1,MT.exports=CP()),MT.exports}var H=IP(),wT={exports:{}},hn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function DP(){if(Qw)return hn;Qw=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),S=Symbol.iterator;function T(J){return J===null||typeof J!="object"?null:(J=S&&J[S]||J["@@iterator"],typeof J=="function"?J:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,w={};function b(J,le,De){this.props=J,this.context=le,this.refs=w,this.updater=De||M}b.prototype.isReactComponent={},b.prototype.setState=function(J,le){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,le,"setState")},b.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function D(){}D.prototype=b.prototype;function V(J,le,De){this.props=J,this.context=le,this.refs=w,this.updater=De||M}var z=V.prototype=new D;z.constructor=V,C(z,b.prototype),z.isPureReactComponent=!0;var j=Array.isArray;function G(){}var P={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function I(J,le,De){var Re=De.ref;return{$$typeof:i,type:J,key:le,ref:Re!==void 0?Re:null,props:De}}function O(J,le){return I(J.type,le,J.props)}function F(J){return typeof J=="object"&&J!==null&&J.$$typeof===i}function Y(J){var le={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(De){return le[De]})}var q=/\/+/g;function de(J,le){return typeof J=="object"&&J!==null&&J.key!=null?Y(""+J.key):le.toString(36)}function ge(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(G,G):(J.status="pending",J.then(function(le){J.status==="pending"&&(J.status="fulfilled",J.value=le)},function(le){J.status==="pending"&&(J.status="rejected",J.reason=le)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function X(J,le,De,Re,nt){var Te=typeof J;(Te==="undefined"||Te==="boolean")&&(J=null);var Le=!1;if(J===null)Le=!0;else switch(Te){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(J.$$typeof){case i:case e:Le=!0;break;case y:return Le=J._init,X(Le(J._payload),le,De,Re,nt)}}if(Le)return nt=nt(J),Le=Re===""?"."+de(J,0):Re,j(nt)?(De="",Le!=null&&(De=Le.replace(q,"$&/")+"/"),X(nt,le,De,"",function(bt){return bt})):nt!=null&&(F(nt)&&(nt=O(nt,De+(nt.key==null||J&&J.key===nt.key?"":(""+nt.key).replace(q,"$&/")+"/")+Le)),le.push(nt)),1;Le=0;var at=Re===""?".":Re+":";if(j(J))for(var pt=0;pt<J.length;pt++)Re=J[pt],Te=at+de(Re,pt),Le+=X(Re,le,De,Te,nt);else if(pt=T(J),typeof pt=="function")for(J=pt.call(J),pt=0;!(Re=J.next()).done;)Re=Re.value,Te=at+de(Re,pt++),Le+=X(Re,le,De,Te,nt);else if(Te==="object"){if(typeof J.then=="function")return X(ge(J),le,De,Re,nt);throw le=String(J),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return Le}function ee(J,le,De){if(J==null)return J;var Re=[],nt=0;return X(J,Re,"","",function(Te){return le.call(De,Te,nt++)}),Re}function ne(J){if(J._status===-1){var le=J._result;le=le(),le.then(function(De){(J._status===0||J._status===-1)&&(J._status=1,J._result=De)},function(De){(J._status===0||J._status===-1)&&(J._status=2,J._result=De)}),J._status===-1&&(J._status=0,J._result=le)}if(J._status===1)return J._result.default;throw J._result}var pe=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},re={map:ee,forEach:function(J,le,De){ee(J,function(){le.apply(this,arguments)},De)},count:function(J){var le=0;return ee(J,function(){le++}),le},toArray:function(J){return ee(J,function(le){return le})||[]},only:function(J){if(!F(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return hn.Activity=_,hn.Children=re,hn.Component=b,hn.Fragment=t,hn.Profiler=s,hn.PureComponent=V,hn.StrictMode=n,hn.Suspense=d,hn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,hn.__COMPILER_RUNTIME={__proto__:null,c:function(J){return P.H.useMemoCache(J)}},hn.cache=function(J){return function(){return J.apply(null,arguments)}},hn.cacheSignal=function(){return null},hn.cloneElement=function(J,le,De){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var Re=C({},J.props),nt=J.key;if(le!=null)for(Te in le.key!==void 0&&(nt=""+le.key),le)!L.call(le,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&le.ref===void 0||(Re[Te]=le[Te]);var Te=arguments.length-2;if(Te===1)Re.children=De;else if(1<Te){for(var Le=Array(Te),at=0;at<Te;at++)Le[at]=arguments[at+2];Re.children=Le}return I(J.type,nt,Re)},hn.createContext=function(J){return J={$$typeof:l,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:a,_context:J},J},hn.createElement=function(J,le,De){var Re,nt={},Te=null;if(le!=null)for(Re in le.key!==void 0&&(Te=""+le.key),le)L.call(le,Re)&&Re!=="key"&&Re!=="__self"&&Re!=="__source"&&(nt[Re]=le[Re]);var Le=arguments.length-2;if(Le===1)nt.children=De;else if(1<Le){for(var at=Array(Le),pt=0;pt<Le;pt++)at[pt]=arguments[pt+2];nt.children=at}if(J&&J.defaultProps)for(Re in Le=J.defaultProps,Le)nt[Re]===void 0&&(nt[Re]=Le[Re]);return I(J,Te,nt)},hn.createRef=function(){return{current:null}},hn.forwardRef=function(J){return{$$typeof:u,render:J}},hn.isValidElement=F,hn.lazy=function(J){return{$$typeof:y,_payload:{_status:-1,_result:J},_init:ne}},hn.memo=function(J,le){return{$$typeof:p,type:J,compare:le===void 0?null:le}},hn.startTransition=function(J){var le=P.T,De={};P.T=De;try{var Re=J(),nt=P.S;nt!==null&&nt(De,Re),typeof Re=="object"&&Re!==null&&typeof Re.then=="function"&&Re.then(G,pe)}catch(Te){pe(Te)}finally{le!==null&&De.types!==null&&(le.types=De.types),P.T=le}},hn.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},hn.use=function(J){return P.H.use(J)},hn.useActionState=function(J,le,De){return P.H.useActionState(J,le,De)},hn.useCallback=function(J,le){return P.H.useCallback(J,le)},hn.useContext=function(J){return P.H.useContext(J)},hn.useDebugValue=function(){},hn.useDeferredValue=function(J,le){return P.H.useDeferredValue(J,le)},hn.useEffect=function(J,le){return P.H.useEffect(J,le)},hn.useEffectEvent=function(J){return P.H.useEffectEvent(J)},hn.useId=function(){return P.H.useId()},hn.useImperativeHandle=function(J,le,De){return P.H.useImperativeHandle(J,le,De)},hn.useInsertionEffect=function(J,le){return P.H.useInsertionEffect(J,le)},hn.useLayoutEffect=function(J,le){return P.H.useLayoutEffect(J,le)},hn.useMemo=function(J,le){return P.H.useMemo(J,le)},hn.useOptimistic=function(J,le){return P.H.useOptimistic(J,le)},hn.useReducer=function(J,le,De){return P.H.useReducer(J,le,De)},hn.useRef=function(J){return P.H.useRef(J)},hn.useState=function(J){return P.H.useState(J)},hn.useSyncExternalStore=function(J,le,De){return P.H.useSyncExternalStore(J,le,De)},hn.useTransition=function(){return P.H.useTransition()},hn.version="19.2.0",hn}var Zw;function Bm(){return Zw||(Zw=1,wT.exports=DP()),wT.exports}var ce=Bm();const NP=iM(ce);var RT={exports:{}},my={},CT={exports:{}},IT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw;function OP(){return Jw||(Jw=1,(function(i){function e(X,ee){var ne=X.length;X.push(ee);e:for(;0<ne;){var pe=ne-1>>>1,re=X[pe];if(0<s(re,ee))X[pe]=ee,X[ne]=re,ne=pe;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var ee=X[0],ne=X.pop();if(ne!==ee){X[0]=ne;e:for(var pe=0,re=X.length,J=re>>>1;pe<J;){var le=2*(pe+1)-1,De=X[le],Re=le+1,nt=X[Re];if(0>s(De,ne))Re<re&&0>s(nt,De)?(X[pe]=nt,X[Re]=ne,pe=Re):(X[pe]=De,X[le]=ne,pe=le);else if(Re<re&&0>s(nt,ne))X[pe]=nt,X[Re]=ne,pe=Re;else break e}}return ee}function s(X,ee){var ne=X.sortIndex-ee.sortIndex;return ne!==0?ne:X.id-ee.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();i.unstable_now=function(){return l.now()-u}}var d=[],p=[],y=1,_=null,S=3,T=!1,M=!1,C=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function z(X){for(var ee=t(p);ee!==null;){if(ee.callback===null)n(p);else if(ee.startTime<=X)n(p),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(p)}}function j(X){if(C=!1,z(X),!M)if(t(d)!==null)M=!0,G||(G=!0,Y());else{var ee=t(p);ee!==null&&ge(j,ee.startTime-X)}}var G=!1,P=-1,L=5,I=-1;function O(){return w?!0:!(i.unstable_now()-I<L)}function F(){if(w=!1,G){var X=i.unstable_now();I=X;var ee=!0;try{e:{M=!1,C&&(C=!1,D(P),P=-1),T=!0;var ne=S;try{t:{for(z(X),_=t(d);_!==null&&!(_.expirationTime>X&&O());){var pe=_.callback;if(typeof pe=="function"){_.callback=null,S=_.priorityLevel;var re=pe(_.expirationTime<=X);if(X=i.unstable_now(),typeof re=="function"){_.callback=re,z(X),ee=!0;break t}_===t(d)&&n(d),z(X)}else n(d);_=t(d)}if(_!==null)ee=!0;else{var J=t(p);J!==null&&ge(j,J.startTime-X),ee=!1}}break e}finally{_=null,S=ne,T=!1}ee=void 0}}finally{ee?Y():G=!1}}}var Y;if(typeof V=="function")Y=function(){V(F)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,de=q.port2;q.port1.onmessage=F,Y=function(){de.postMessage(null)}}else Y=function(){b(F,0)};function ge(X,ee){P=b(function(){X(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(X){switch(S){case 1:case 2:case 3:var ee=3;break;default:ee=S}var ne=S;S=ee;try{return X()}finally{S=ne}},i.unstable_requestPaint=function(){w=!0},i.unstable_runWithPriority=function(X,ee){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ne=S;S=X;try{return ee()}finally{S=ne}},i.unstable_scheduleCallback=function(X,ee,ne){var pe=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?pe+ne:pe):ne=pe,X){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ne+re,X={id:y++,callback:ee,priorityLevel:X,startTime:ne,expirationTime:re,sortIndex:-1},ne>pe?(X.sortIndex=ne,e(p,X),t(d)===null&&X===t(p)&&(C?(D(P),P=-1):C=!0,ge(j,ne-pe))):(X.sortIndex=re,e(d,X),M||T||(M=!0,G||(G=!0,Y()))),X},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(X){var ee=S;return function(){var ne=S;S=ee;try{return X.apply(this,arguments)}finally{S=ne}}}})(IT)),IT}var $w;function UP(){return $w||($w=1,CT.exports=OP()),CT.exports}var DT={exports:{}},br={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eR;function LP(){if(eR)return br;eR=1;var i=Bm();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:d,containerInfo:p,implementation:y}}var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return br.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,br.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(d,p,null,y)},br.flushSync=function(d){var p=l.T,y=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=p,n.p=y,n.d.f()}},br.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(d,p))},br.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},br.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var y=p.as,_=u(y,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?n.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:T}):y==="script"&&n.d.X(d,{crossOrigin:_,integrity:S,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},br.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=u(p.as,p.crossOrigin);n.d.M(d,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(d)},br.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=u(y,p.crossOrigin);n.d.L(d,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},br.preloadModule=function(d,p){if(typeof d=="string")if(p){var y=u(p.as,p.crossOrigin);n.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(d)},br.requestFormReset=function(d){n.d.r(d)},br.unstable_batchedUpdates=function(d,p){return d(p)},br.useFormState=function(d,p,y){return l.H.useFormState(d,p,y)},br.useFormStatus=function(){return l.H.useHostTransitionStatus()},br.version="19.2.0",br}var tR;function PP(){if(tR)return DT.exports;tR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),DT.exports=LP(),DT.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nR;function VP(){if(nR)return my;nR=1;var i=UP(),e=Bm(),t=PP();function n(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,f=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(f=o.return),r=o.return;while(r)}return o.tag===3?f:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function u(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(n(188))}function p(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(n(188));return o!==r?null:r}for(var f=r,m=o;;){var E=f.return;if(E===null)break;var A=E.alternate;if(A===null){if(m=E.return,m!==null){f=m;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===f)return d(E),r;if(A===m)return d(E),o;A=A.sibling}throw Error(n(188))}if(f.return!==m.return)f=E,m=A;else{for(var B=!1,K=E.child;K;){if(K===f){B=!0,f=E,m=A;break}if(K===m){B=!0,m=E,f=A;break}K=K.sibling}if(!B){for(K=A.child;K;){if(K===f){B=!0,f=A,m=E;break}if(K===m){B=!0,m=A,f=E;break}K=K.sibling}if(!B)throw Error(n(189))}}if(f.alternate!==m)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?r:o}function y(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=y(r),o!==null)return o;r=r.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),V=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function Y(r){return r===null||typeof r!="object"?null:(r=F&&r[F]||r["@@iterator"],typeof r=="function"?r:null)}var q=Symbol.for("react.client.reference");function de(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===q?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case b:return"Profiler";case w:return"StrictMode";case j:return"Suspense";case G:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case M:return"Portal";case V:return r.displayName||"Context";case D:return(r._context.displayName||"Context")+".Consumer";case z:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case P:return o=r.displayName||null,o!==null?o:de(r.type)||"Memo";case L:o=r._payload,r=r._init;try{return de(r(o))}catch{}}return null}var ge=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},pe=[],re=-1;function J(r){return{current:r}}function le(r){0>re||(r.current=pe[re],pe[re]=null,re--)}function De(r,o){re++,pe[re]=r.current,r.current=o}var Re=J(null),nt=J(null),Te=J(null),Le=J(null);function at(r,o){switch(De(Te,o),De(nt,r),De(Re,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?yw(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=yw(o),r=_w(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}le(Re),De(Re,r)}function pt(){le(Re),le(nt),le(Te)}function bt(r){r.memoizedState!==null&&De(Le,r);var o=Re.current,f=_w(o,r.type);o!==f&&(De(nt,r),De(Re,f))}function Zt(r){nt.current===r&&(le(Re),le(nt)),Le.current===r&&(le(Le),uy._currentValue=ne)}var An,se;function qe(r){if(An===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);An=o&&o[1]||"",se=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+An+r+se}var ke=!1;function Be(r,o){if(!r||ke)return"";ke=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var Ye=function(){throw Error()};if(Object.defineProperty(Ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ye,[])}catch(Ue){var Ie=Ue}Reflect.construct(r,[],Ye)}else{try{Ye.call()}catch(Ue){Ie=Ue}r.call(Ye.prototype)}}else{try{throw Error()}catch(Ue){Ie=Ue}(Ye=r())&&typeof Ye.catch=="function"&&Ye.catch(function(){})}}catch(Ue){if(Ue&&Ie&&typeof Ue.stack=="string")return[Ue.stack,Ie.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=m.DetermineComponentFrameRoot(),B=A[0],K=A[1];if(B&&K){var oe=B.split(`
`),Me=K.split(`
`);for(E=m=0;m<oe.length&&!oe[m].includes("DetermineComponentFrameRoot");)m++;for(;E<Me.length&&!Me[E].includes("DetermineComponentFrameRoot");)E++;if(m===oe.length||E===Me.length)for(m=oe.length-1,E=Me.length-1;1<=m&&0<=E&&oe[m]!==Me[E];)E--;for(;1<=m&&0<=E;m--,E--)if(oe[m]!==Me[E]){if(m!==1||E!==1)do if(m--,E--,0>E||oe[m]!==Me[E]){var ze=`
`+oe[m].replace(" at new "," at ");return r.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",r.displayName)),ze}while(1<=m&&0<=E);break}}}finally{ke=!1,Error.prepareStackTrace=f}return(f=r?r.displayName||r.name:"")?qe(f):""}function Ve(r,o){switch(r.tag){case 26:case 27:case 5:return qe(r.type);case 16:return qe("Lazy");case 13:return r.child!==o&&o!==null?qe("Suspense Fallback"):qe("Suspense");case 19:return qe("SuspenseList");case 0:case 15:return Be(r.type,!1);case 11:return Be(r.type.render,!1);case 1:return Be(r.type,!0);case 31:return qe("Activity");default:return""}}function ut(r){try{var o="",f=null;do o+=Ve(r,f),f=r,r=r.return;while(r);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var je=Object.prototype.hasOwnProperty,Qe=i.unstable_scheduleCallback,Vt=i.unstable_cancelCallback,Wt=i.unstable_shouldYield,te=i.unstable_requestPaint,W=i.unstable_now,Se=i.unstable_getCurrentPriorityLevel,Oe=i.unstable_ImmediatePriority,Ze=i.unstable_UserBlockingPriority,Pe=i.unstable_NormalPriority,It=i.unstable_LowPriority,lt=i.unstable_IdlePriority,Mt=i.log,wt=i.unstable_setDisableYieldValue,Ke=null,st=null;function Ct(r){if(typeof Mt=="function"&&wt(r),st&&typeof st.setStrictMode=="function")try{st.setStrictMode(Ke,r)}catch{}}var mt=Math.clz32?Math.clz32:he,dt=Math.log,Gt=Math.LN2;function he(r){return r>>>=0,r===0?32:31-(dt(r)/Gt|0)|0}var tt=256,ot=262144,ft=4194304;function et(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Fe(r,o,f){var m=r.pendingLanes;if(m===0)return 0;var E=0,A=r.suspendedLanes,B=r.pingedLanes;r=r.warmLanes;var K=m&134217727;return K!==0?(m=K&~A,m!==0?E=et(m):(B&=K,B!==0?E=et(B):f||(f=K&~r,f!==0&&(E=et(f))))):(K=m&~A,K!==0?E=et(K):B!==0?E=et(B):f||(f=m&~r,f!==0&&(E=et(f)))),E===0?0:o!==0&&o!==E&&(o&A)===0&&(A=E&-E,f=o&-o,A>=f||A===32&&(f&4194048)!==0)?o:E}function vt(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function qt(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rn(){var r=ft;return ft<<=1,(ft&62914560)===0&&(ft=4194304),r}function sn(r){for(var o=[],f=0;31>f;f++)o.push(r);return o}function as(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function js(r,o,f,m,E,A){var B=r.pendingLanes;r.pendingLanes=f,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=f,r.entangledLanes&=f,r.errorRecoveryDisabledLanes&=f,r.shellSuspendCounter=0;var K=r.entanglements,oe=r.expirationTimes,Me=r.hiddenUpdates;for(f=B&~f;0<f;){var ze=31-mt(f),Ye=1<<ze;K[ze]=0,oe[ze]=-1;var Ie=Me[ze];if(Ie!==null)for(Me[ze]=null,ze=0;ze<Ie.length;ze++){var Ue=Ie[ze];Ue!==null&&(Ue.lane&=-536870913)}f&=~Ye}m!==0&&Ia(r,m,0),A!==0&&E===0&&r.tag!==0&&(r.suspendedLanes|=A&~(B&~o))}function Ia(r,o,f){r.pendingLanes|=o,r.suspendedLanes&=~o;var m=31-mt(o);r.entangledLanes|=o,r.entanglements[m]=r.entanglements[m]|1073741824|f&261930}function qs(r,o){var f=r.entangledLanes|=o;for(r=r.entanglements;f;){var m=31-mt(f),E=1<<m;E&o|r[m]&o&&(r[m]|=o),f&=~E}}function Da(r,o){var f=o&-o;return f=(f&42)!==0?1:Ss(f),(f&(r.suspendedLanes|o))!==0?0:f}function Ss(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Pr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ds(){var r=ee.p;return r!==0?r:(r=window.event,r===void 0?32:Hw(r.type))}function Ci(r,o){var f=ee.p;try{return ee.p=r,o()}finally{ee.p=f}}var $i=Math.random().toString(36).slice(2),ln="__reactFiber$"+$i,xi="__reactProps$"+$i,lr="__reactContainer$"+$i,No="__reactEvents$"+$i,Tu="__reactListeners$"+$i,bu="__reactHandles$"+$i,xl="__reactResources$"+$i,cr="__reactMarker$"+$i;function Q(r){delete r[ln],delete r[xi],delete r[No],delete r[Tu],delete r[bu]}function fe(r){var o=r[ln];if(o)return o;for(var f=r.parentNode;f;){if(o=f[lr]||f[ln]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(r=Aw(r);r!==null;){if(f=r[ln])return f;r=Aw(r)}return o}r=f,f=r.parentNode}return null}function Ee(r){if(r=r[ln]||r[lr]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function Ae(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(n(33))}function me(r){var o=r[xl];return o||(o=r[xl]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function We(r){r[cr]=!0}var ht=new Set,xt={};function gt(r,o){Nt(r,o),Nt(r+"Capture",o)}function Nt(r,o){for(xt[r]=o,r=0;r<o.length;r++)ht.add(o[r])}var Ft=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ut={},cn={};function Nn(r){return je.call(cn,r)?!0:je.call(Ut,r)?!1:Ft.test(r)?cn[r]=!0:(Ut[r]=!0,!1)}function Qn(r,o,f){if(Nn(o))if(f===null)r.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+f)}}function gn(r,o,f){if(f===null)r.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+f)}}function Xt(r,o,f,m){if(m===null)r.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(f);return}r.setAttributeNS(o,f,""+m)}}function St(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function jn(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function vn(r,o,f){var m=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,A=m.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return E.call(this)},set:function(B){f=""+B,A.call(this,B)}}),Object.defineProperty(r,o,{enumerable:m.enumerable}),{getValue:function(){return f},setValue:function(B){f=""+B},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function rn(r){if(!r._valueTracker){var o=jn(r)?"checked":"value";r._valueTracker=vn(r,o,""+r[o])}}function Xs(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var f=o.getValue(),m="";return r&&(m=jn(r)?r.checked?"true":"false":r.value),r=m,r!==f?(o.setValue(r),!0):!1}function ui(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ur=/[\n"\\]/g;function Sn(r){return r.replace(ur,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Wi(r,o,f,m,E,A,B,K){r.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?r.type=B:r.removeAttribute("type"),o!=null?B==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+St(o)):r.value!==""+St(o)&&(r.value=""+St(o)):B!=="submit"&&B!=="reset"||r.removeAttribute("value"),o!=null?Ii(r,B,St(o)):f!=null?Ii(r,B,St(f)):m!=null&&r.removeAttribute("value"),E==null&&A!=null&&(r.defaultChecked=!!A),E!=null&&(r.checked=E&&typeof E!="function"&&typeof E!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?r.name=""+St(K):r.removeAttribute("name")}function os(r,o,f,m,E,A,B,K){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.type=A),o!=null||f!=null){if(!(A!=="submit"&&A!=="reset"||o!=null)){rn(r);return}f=f!=null?""+St(f):"",o=o!=null?""+St(o):f,K||o===r.value||(r.value=o),r.defaultValue=o}m=m??E,m=typeof m!="function"&&typeof m!="symbol"&&!!m,r.checked=K?r.checked:!!m,r.defaultChecked=!!m,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(r.name=B),rn(r)}function Ii(r,o,f){o==="number"&&ui(r.ownerDocument)===r||r.defaultValue===""+f||(r.defaultValue=""+f)}function Ti(r,o,f,m){if(r=r.options,o){o={};for(var E=0;E<f.length;E++)o["$"+f[E]]=!0;for(f=0;f<r.length;f++)E=o.hasOwnProperty("$"+r[f].value),r[f].selected!==E&&(r[f].selected=E),E&&m&&(r[f].defaultSelected=!0)}else{for(f=""+St(f),o=null,E=0;E<r.length;E++){if(r[E].value===f){r[E].selected=!0,m&&(r[E].defaultSelected=!0);return}o!==null||r[E].disabled||(o=r[E])}o!==null&&(o.selected=!0)}}function Oo(r,o,f){if(o!=null&&(o=""+St(o),o!==r.value&&(r.value=o),f==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=f!=null?""+St(f):""}function Vi(r,o,f,m){if(o==null){if(m!=null){if(f!=null)throw Error(n(92));if(ge(m)){if(1<m.length)throw Error(n(93));m=m[0]}f=m}f==null&&(f=""),o=f}f=St(o),r.defaultValue=f,m=r.textContent,m===f&&m!==""&&m!==null&&(r.value=m),rn(r)}function Ws(r,o){if(o){var f=r.firstChild;if(f&&f===r.lastChild&&f.nodeType===3){f.nodeValue=o;return}}r.textContent=o}var xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tl(r,o,f){var m=o.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":m?r.setProperty(o,f):typeof f!="number"||f===0||xc.has(o)?o==="float"?r.cssFloat=f:r[o]=(""+f).trim():r[o]=f+"px"}function Au(r,o,f){if(o!=null&&typeof o!="object")throw Error(n(62));if(r=r.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?r.setProperty(m,""):m==="float"?r.cssFloat="":r[m]="");for(var E in o)m=o[E],o.hasOwnProperty(E)&&f[E]!==m&&Tl(r,E,m)}else for(var A in o)o.hasOwnProperty(A)&&Tl(r,A,o[A])}function bl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tc(r){return Uo.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ca(){}var bc=null;function Vr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Lo=null,ua=null;function Al(r){var o=Ee(r);if(o&&(r=o.stateNode)){var f=r[xi]||null;e:switch(r=o.stateNode,o.type){case"input":if(Wi(r,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),o=f.name,f.type==="radio"&&o!=null){for(f=r;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Sn(""+o)+'"][type="radio"]'),o=0;o<f.length;o++){var m=f[o];if(m!==r&&m.form===r.form){var E=m[xi]||null;if(!E)throw Error(n(90));Wi(m,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(o=0;o<f.length;o++)m=f[o],m.form===r.form&&Xs(m)}break e;case"textarea":Oo(r,f.value,f.defaultValue);break e;case"select":o=f.value,o!=null&&Ti(r,!!f.multiple,o,!1)}}}var Ac=!1;function Po(r,o,f){if(Ac)return r(o,f);Ac=!0;try{var m=r(o);return m}finally{if(Ac=!1,(Lo!==null||ua!==null)&&(Z(),Lo&&(o=Lo,r=ua,ua=Lo=null,Al(o),r)))for(o=0;o<r.length;o++)Al(r[o])}}function zr(r,o){var f=r.stateNode;if(f===null)return null;var m=f[xi]||null;if(m===null)return null;f=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(f&&typeof f!="function")throw Error(n(231,o,typeof f));return f}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ml=!1;if(Br)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){Ml=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{Ml=!1}var eo=null,Mu=null,Na=null;function Mc(){if(Na)return Na;var r,o=Mu,f=o.length,m,E="value"in eo?eo.value:eo.textContent,A=E.length;for(r=0;r<f&&o[r]===E[r];r++);var B=f-r;for(m=1;m<=B&&o[f-m]===E[A-m];m++);return Na=E.slice(r,1<m?1-m:void 0)}function to(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function no(){return!0}function ha(){return!1}function es(r){function o(f,m,E,A,B){this._reactName=f,this._targetInst=E,this.type=m,this.nativeEvent=A,this.target=B,this.currentTarget=null;for(var K in r)r.hasOwnProperty(K)&&(f=r[K],this[K]=f?f(A):A[K]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?no:ha,this.isPropagationStopped=ha,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=no)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=no)},persist:function(){},isPersistent:no}),o}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oa=es(io),hr=_({},io,{view:0,detail:0}),wl=es(hr),Vo,Rl,Ua,wc=_({},hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ro,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ua&&(Ua&&r.type==="mousemove"?(Vo=r.screenX-Ua.screenX,Rl=r.screenY-Ua.screenY):Rl=Vo=0,Ua=r),Vo)},movementY:function(r){return"movementY"in r?r.movementY:Rl}}),$h=es(wc),bi=_({},wc,{dataTransfer:0}),ef=es(bi),tf=_({},hr,{relatedTarget:0}),Cl=es(tf),wu=_({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),nf=es(wu),so=_({},io,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ru=es(so),sf=_({},io,{data:0}),La=es(sf),rf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function af(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Iu[r])?!!o[r]:!1}function ro(){return af}var Es=_({},hr,{key:function(r){if(r.key){var o=rf[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=to(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Cu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ro,charCode:function(r){return r.type==="keypress"?to(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?to(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Du=es(Es),of=_({},wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pa=es(of),v=_({},hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ro}),N=es(v),k=_({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),$=es(k),xe=_({},wc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ce=es(xe),rt=_({},io,{newState:0,oldState:0}),an=es(rt),Ai=[9,13,27,32],Cn=Br&&"CompositionEvent"in window,oi=null;Br&&"documentMode"in document&&(oi=document.documentMode);var ls=Br&&"TextEvent"in window&&!oi,gi=Br&&(!Cn||oi&&8<oi&&11>=oi),fr=" ",fa=!1;function zo(r,o){switch(r){case"keyup":return Ai.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ao(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Il=!1;function Vd(r,o){switch(r){case"compositionend":return ao(o);case"keypress":return o.which!==32?null:(fa=!0,fr);case"textInput":return r=o.data,r===fr&&fa?null:r;default:return null}}function tv(r,o){if(Il)return r==="compositionend"||!Cn&&zo(r,o)?(r=Mc(),Na=Mu=eo=null,Il=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return gi&&o.locale!=="ko"?null:o.data;default:return null}}var Fr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sg(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Fr[r.type]:o==="textarea"}function zd(r,o,f,m){Lo?ua?ua.push(m):ua=[m]:Lo=m,o=Xv(o,"onChange"),0<o.length&&(f=new Oa("onChange","change",null,f,m),r.push({event:f,listeners:o}))}var Nu=null,Ou=null;function rg(r){hw(r,0)}function Uu(r){var o=Ae(r);if(Xs(o))return r}function ag(r,o){if(r==="change")return o}var lf=!1;if(Br){var Rc;if(Br){var yi="oninput"in document;if(!yi){var nv=document.createElement("div");nv.setAttribute("oninput","return;"),yi=typeof nv.oninput=="function"}Rc=yi}else Rc=!1;lf=Rc&&(!document.documentMode||9<document.documentMode)}function iv(){Nu&&(Nu.detachEvent("onpropertychange",og),Ou=Nu=null)}function og(r){if(r.propertyName==="value"&&Uu(Ou)){var o=[];zd(o,Ou,r,Vr(r)),Po(rg,o)}}function cf(r,o,f){r==="focusin"?(iv(),Nu=o,Ou=f,Nu.attachEvent("onpropertychange",og)):r==="focusout"&&iv()}function Dl(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Uu(Ou)}function sv(r,o){if(r==="click")return Uu(o)}function rv(r,o){if(r==="input"||r==="change")return Uu(o)}function Cc(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var _i=typeof Object.is=="function"?Object.is:Cc;function Lu(r,o){if(_i(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var f=Object.keys(r),m=Object.keys(o);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var E=f[m];if(!je.call(o,E)||!_i(r[E],o[E]))return!1}return!0}function lg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function cg(r,o){var f=lg(r);r=0;for(var m;f;){if(f.nodeType===3){if(m=r+f.textContent.length,r<=o&&m>=o)return{node:f,offset:o-r};r=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=lg(f)}}function Bd(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Bd(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Fd(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=ui(r.document);o instanceof r.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)r=o.contentWindow;else break;o=ui(r.document)}return o}function Pu(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var av=Br&&"documentMode"in document&&11>=document.documentMode,Vu=null,Hd=null,zu=null,Hr=!1;function kd(r,o,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Hr||Vu==null||Vu!==ui(m)||(m=Vu,"selectionStart"in m&&Pu(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),zu&&Lu(zu,m)||(zu=m,m=Xv(Hd,"onSelect"),0<m.length&&(o=new Oa("onSelect","select",null,o,f),r.push({event:o,listeners:m}),o.target=Vu)))}function Nl(r,o){var f={};return f[r.toLowerCase()]=o.toLowerCase(),f["Webkit"+r]="webkit"+o,f["Moz"+r]="moz"+o,f}var Bu={animationend:Nl("Animation","AnimationEnd"),animationiteration:Nl("Animation","AnimationIteration"),animationstart:Nl("Animation","AnimationStart"),transitionrun:Nl("Transition","TransitionRun"),transitionstart:Nl("Transition","TransitionStart"),transitioncancel:Nl("Transition","TransitionCancel"),transitionend:Nl("Transition","TransitionEnd")},uf={},Ys={};Br&&(Ys=document.createElement("div").style,"AnimationEvent"in window||(delete Bu.animationend.animation,delete Bu.animationiteration.animation,delete Bu.animationstart.animation),"TransitionEvent"in window||delete Bu.transitionend.transition);function Ol(r){if(uf[r])return uf[r];if(!Bu[r])return r;var o=Bu[r],f;for(f in o)if(o.hasOwnProperty(f)&&f in Ys)return uf[r]=o[f];return r}var dr=Ol("animationend"),ug=Ol("animationiteration"),oo=Ol("animationstart"),Fu=Ol("transitionrun"),Ul=Ol("transitionstart"),hg=Ol("transitioncancel"),Gd=Ol("transitionend"),Bo=new Map,jd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jd.push("scrollEnd");function Ns(r,o){Bo.set(r,o),gt(o,[r])}var Ll=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},cs=[],Ic=0,qd=0;function Pl(){for(var r=Ic,o=qd=Ic=0;o<r;){var f=cs[o];cs[o++]=null;var m=cs[o];cs[o++]=null;var E=cs[o];cs[o++]=null;var A=cs[o];if(cs[o++]=null,m!==null&&E!==null){var B=m.pending;B===null?E.next=E:(E.next=B.next,B.next=E),m.pending=E}A!==0&&Xd(f,E,A)}}function hf(r,o,f,m){cs[Ic++]=r,cs[Ic++]=o,cs[Ic++]=f,cs[Ic++]=m,qd|=m,r.lanes|=m,r=r.alternate,r!==null&&(r.lanes|=m)}function Hu(r,o,f,m){return hf(r,o,f,m),ku(r)}function Vl(r,o){return hf(r,null,null,o),ku(r)}function Xd(r,o,f){r.lanes|=f;var m=r.alternate;m!==null&&(m.lanes|=f);for(var E=!1,A=r.return;A!==null;)A.childLanes|=f,m=A.alternate,m!==null&&(m.childLanes|=f),A.tag===22&&(r=A.stateNode,r===null||r._visibility&1||(E=!0)),r=A,A=A.return;return r.tag===3?(A=r.stateNode,E&&o!==null&&(E=31-mt(f),r=A.hiddenUpdates,m=r[E],m===null?r[E]=[o]:m.push(o),o.lane=f|536870912),A):null}function ku(r){if(50<Wc)throw Wc=0,Yc=null,Error(n(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var zl={};function ov(r,o,f,m){this.tag=r,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(r,o,f,m){return new ov(r,o,f,m)}function Qs(r){return r=r.prototype,!(!r||!r.isReactComponent)}function lo(r,o){var f=r.alternate;return f===null?(f=Ks(r.tag,o,r.key,r.mode),f.elementType=r.elementType,f.type=r.type,f.stateNode=r.stateNode,f.alternate=r,r.alternate=f):(f.pendingProps=o,f.type=r.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=r.flags&65011712,f.childLanes=r.childLanes,f.lanes=r.lanes,f.child=r.child,f.memoizedProps=r.memoizedProps,f.memoizedState=r.memoizedState,f.updateQueue=r.updateQueue,o=r.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=r.sibling,f.index=r.index,f.ref=r.ref,f.refCleanup=r.refCleanup,f}function Os(r,o){r.flags&=65011714;var f=r.alternate;return f===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=f.childLanes,r.lanes=f.lanes,r.child=f.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=f.memoizedProps,r.memoizedState=f.memoizedState,r.updateQueue=f.updateQueue,r.type=f.type,o=f.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function ff(r,o,f,m,E,A){var B=0;if(m=r,typeof r=="function")Qs(r)&&(B=1);else if(typeof r=="string")B=yP(r,f,Re.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=Ks(31,f,o,E),r.elementType=I,r.lanes=A,r;case C:return Fo(f.children,E,A,o);case w:B=8,E|=24;break;case b:return r=Ks(12,f,o,E|2),r.elementType=b,r.lanes=A,r;case j:return r=Ks(13,f,o,E),r.elementType=j,r.lanes=A,r;case G:return r=Ks(19,f,o,E),r.elementType=G,r.lanes=A,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case V:B=10;break e;case D:B=9;break e;case z:B=11;break e;case P:B=14;break e;case L:B=16,m=null;break e}B=29,f=Error(n(130,r===null?"null":typeof r,"")),m=null}return o=Ks(B,f,o,E),o.elementType=r,o.type=m,o.lanes=A,o}function Fo(r,o,f,m){return r=Ks(7,r,m,o),r.lanes=f,r}function Wd(r,o,f){return r=Ks(6,r,null,o),r.lanes=f,r}function lv(r){var o=Ks(18,null,null,0);return o.stateNode=r,o}function Va(r,o,f){return o=Ks(4,r.children!==null?r.children:[],r.key,o),o.lanes=f,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var fg=new WeakMap;function pr(r,o){if(typeof r=="object"&&r!==null){var f=fg.get(r);return f!==void 0?f:(o={value:r,source:o,stack:ut(o)},fg.set(r,o),o)}return{value:r,source:o,stack:ut(o)}}var za=[],Dc=0,df=null,Gu=0,kr=[],mr=0,co=null,uo=1,ho="";function Ho(r,o){za[Dc++]=Gu,za[Dc++]=df,df=r,Gu=o}function dg(r,o,f){kr[mr++]=uo,kr[mr++]=ho,kr[mr++]=co,co=r;var m=uo;r=ho;var E=32-mt(m)-1;m&=~(1<<E),f+=1;var A=32-mt(o)+E;if(30<A){var B=E-E%5;A=(m&(1<<B)-1).toString(32),m>>=B,E-=B,uo=1<<32-mt(o)+E|f<<E|m,ho=A+r}else uo=1<<A|f<<E|m,ho=r}function Yd(r){r.return!==null&&(Ho(r,1),dg(r,1,0))}function Bl(r){for(;r===df;)df=za[--Dc],za[Dc]=null,Gu=za[--Dc],za[Dc]=null;for(;r===co;)co=kr[--mr],kr[mr]=null,ho=kr[--mr],kr[mr]=null,uo=kr[--mr],kr[mr]=null}function pf(r,o){kr[mr++]=uo,kr[mr++]=ho,kr[mr++]=co,uo=o.id,ho=o.overflow,co=r}var us=null,hi=null,In=!1,ko=null,hs=!1,Kd=Error(n(519));function Mn(r){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mf(pr(o,r)),Kd}function Qd(r){var o=r.stateNode,f=r.type,m=r.memoizedProps;switch(o[ln]=r,o[xi]=m,f){case"dialog":Dn("cancel",o),Dn("close",o);break;case"iframe":case"object":case"embed":Dn("load",o);break;case"video":case"audio":for(f=0;f<ry.length;f++)Dn(ry[f],o);break;case"source":Dn("error",o);break;case"img":case"image":case"link":Dn("error",o),Dn("load",o);break;case"details":Dn("toggle",o);break;case"input":Dn("invalid",o),os(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Dn("invalid",o);break;case"textarea":Dn("invalid",o),Vi(o,m.value,m.defaultValue,m.children)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||o.textContent===""+f||m.suppressHydrationWarning===!0||mw(o.textContent,f)?(m.popover!=null&&(Dn("beforetoggle",o),Dn("toggle",o)),m.onScroll!=null&&Dn("scroll",o),m.onScrollEnd!=null&&Dn("scrollend",o),m.onClick!=null&&(o.onclick=ca),o=!0):o=!1,o||Mn(r,!0)}function cv(r){for(us=r.return;us;)switch(us.tag){case 5:case 31:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:us=us.return}}function Nc(r){if(r!==us)return!1;if(!In)return cv(r),In=!0,!1;var o=r.tag,f;if((f=o!==3&&o!==27)&&((f=o===5)&&(f=r.type,f=!(f!=="form"&&f!=="button")||hT(r.type,r.memoizedProps)),f=!f),f&&hi&&Mn(r),cv(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));hi=bw(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));hi=bw(r)}else o===27?(o=hi,lh(r.type)?(r=gT,gT=null,hi=r):hi=o):hi=us?To(r.stateNode.nextSibling):null;return!0}function Oc(){hi=us=null,In=!1}function pg(){var r=ko;return r!==null&&(Bs===null?Bs=r:Bs.push.apply(Bs,r),ko=null),r}function mf(r){ko===null?ko=[r]:ko.push(r)}var mg=J(null),Go=null,Us=null;function jo(r,o,f){De(mg,o._currentValue),o._currentValue=f}function da(r){r._currentValue=mg.current,le(mg)}function qo(r,o,f){for(;r!==null;){var m=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),r===f)break;r=r.return}}function Zd(r,o,f,m){var E=r.child;for(E!==null&&(E.return=r);E!==null;){var A=E.dependencies;if(A!==null){var B=E.child;A=A.firstContext;e:for(;A!==null;){var K=A;A=E;for(var oe=0;oe<o.length;oe++)if(K.context===o[oe]){A.lanes|=f,K=A.alternate,K!==null&&(K.lanes|=f),qo(A.return,f,r),m||(B=null);break e}A=K.next}}else if(E.tag===18){if(B=E.return,B===null)throw Error(n(341));B.lanes|=f,A=B.alternate,A!==null&&(A.lanes|=f),qo(B,f,r),B=null}else B=E.child;if(B!==null)B.return=E;else for(B=E;B!==null;){if(B===r){B=null;break}if(E=B.sibling,E!==null){E.return=B.return,B=E;break}B=B.return}E=B}}function Fl(r,o,f,m){r=null;for(var E=o,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var B=E.alternate;if(B===null)throw Error(n(387));if(B=B.memoizedProps,B!==null){var K=E.type;_i(E.pendingProps.value,B.value)||(r!==null?r.push(K):r=[K])}}else if(E===Le.current){if(B=E.alternate,B===null)throw Error(n(387));B.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(r!==null?r.push(uy):r=[uy])}E=E.return}r!==null&&Zd(o,r,f,m),o.flags|=262144}function ju(r){for(r=r.firstContext;r!==null;){if(!_i(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Uc(r){Go=r,Us=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function fs(r){return gg(Go,r)}function gf(r,o){return Go===null&&Uc(r),gg(r,o)}function gg(r,o){var f=o._currentValue;if(o={context:o,memoizedValue:f,next:null},Us===null){if(r===null)throw Error(n(308));Us=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Us=Us.next=o;return f}var uv=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(f,m){r.push(m)}};this.abort=function(){o.aborted=!0,r.forEach(function(f){return f()})}},hv=i.unstable_scheduleCallback,yg=i.unstable_NormalPriority,zt={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _g(){return{controller:new uv,data:new Map,refCount:0}}function xs(r){r.refCount--,r.refCount===0&&hv(yg,function(){r.controller.abort()})}var Lc=null,vg=0,Xo=0,Ba=null;function qu(r,o){if(Lc===null){var f=Lc=[];vg=0,Xo=nT(),Ba={status:"pending",value:void 0,then:function(m){f.push(m)}}}return vg++,o.then(Sg,Sg),o}function Sg(){if(--vg===0&&Lc!==null){Ba!==null&&(Ba.status="fulfilled");var r=Lc;Lc=null,Xo=0,Ba=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function Eg(r,o){var f=[],m={status:"pending",value:null,reason:null,then:function(E){f.push(E)}};return r.then(function(){m.status="fulfilled",m.value=o;for(var E=0;E<f.length;E++)(0,f[E])(o)},function(E){for(m.status="rejected",m.reason=E,E=0;E<f.length;E++)(0,f[E])(void 0)}),m}var fv=X.S;X.S=function(r,o){rh=W(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&qu(r,o),fv!==null&&fv(r,o)};var Hl=J(null);function fo(){var r=Hl.current;return r!==null?r:Jn.pooledCache}function Xu(r,o){o===null?De(Hl,Hl.current):De(Hl,o.pool)}function Jd(){var r=fo();return r===null?null:{parent:zt._currentValue,pool:r}}var kl=Error(n(460)),yf=Error(n(474)),Fa=Error(n(542)),_f={then:function(){}};function dv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function xg(r,o,f){switch(f=r[f],f===void 0?r.push(o):f!==o&&(o.then(ca,ca),o=f),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Tg(r),r;default:if(typeof o.status=="string")o.then(ca,ca);else{if(r=Jn,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=o,r.status="pending",r.then(function(m){if(o.status==="pending"){var E=o;E.status="fulfilled",E.value=m}},function(m){if(o.status==="pending"){var E=o;E.status="rejected",E.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Tg(r),r}throw jt=o,kl}}function Pc(r){try{var o=r._init;return o(r._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(jt=f,kl):f}}var jt=null;function $d(){if(jt===null)throw Error(n(459));var r=jt;return jt=null,r}function Tg(r){if(r===kl||r===Fa)throw Error(n(483))}var Gl=null,jl=0;function ep(r){var o=jl;return jl+=1,Gl===null&&(Gl=[]),xg(Gl,r,o)}function vf(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Sf(r,o){throw o.$$typeof===S?Error(n(525)):(r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function Wu(r){function o(_e,ue){if(r){var be=_e.deletions;be===null?(_e.deletions=[ue],_e.flags|=16):be.push(ue)}}function f(_e,ue){if(!r)return null;for(;ue!==null;)o(_e,ue),ue=ue.sibling;return null}function m(_e){for(var ue=new Map;_e!==null;)_e.key!==null?ue.set(_e.key,_e):ue.set(_e.index,_e),_e=_e.sibling;return ue}function E(_e,ue){return _e=lo(_e,ue),_e.index=0,_e.sibling=null,_e}function A(_e,ue,be){return _e.index=be,r?(be=_e.alternate,be!==null?(be=be.index,be<ue?(_e.flags|=67108866,ue):be):(_e.flags|=67108866,ue)):(_e.flags|=1048576,ue)}function B(_e){return r&&_e.alternate===null&&(_e.flags|=67108866),_e}function K(_e,ue,be,Ge){return ue===null||ue.tag!==6?(ue=Wd(be,_e.mode,Ge),ue.return=_e,ue):(ue=E(ue,be),ue.return=_e,ue)}function oe(_e,ue,be,Ge){var Ht=be.type;return Ht===C?ze(_e,ue,be.props.children,Ge,be.key):ue!==null&&(ue.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===L&&Pc(Ht)===ue.type)?(ue=E(ue,be.props),vf(ue,be),ue.return=_e,ue):(ue=ff(be.type,be.key,be.props,null,_e.mode,Ge),vf(ue,be),ue.return=_e,ue)}function Me(_e,ue,be,Ge){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==be.containerInfo||ue.stateNode.implementation!==be.implementation?(ue=Va(be,_e.mode,Ge),ue.return=_e,ue):(ue=E(ue,be.children||[]),ue.return=_e,ue)}function ze(_e,ue,be,Ge,Ht){return ue===null||ue.tag!==7?(ue=Fo(be,_e.mode,Ge,Ht),ue.return=_e,ue):(ue=E(ue,be),ue.return=_e,ue)}function Ye(_e,ue,be){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ue=Wd(""+ue,_e.mode,be),ue.return=_e,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case T:return be=ff(ue.type,ue.key,ue.props,null,_e.mode,be),vf(be,ue),be.return=_e,be;case M:return ue=Va(ue,_e.mode,be),ue.return=_e,ue;case L:return ue=Pc(ue),Ye(_e,ue,be)}if(ge(ue)||Y(ue))return ue=Fo(ue,_e.mode,be,null),ue.return=_e,ue;if(typeof ue.then=="function")return Ye(_e,ep(ue),be);if(ue.$$typeof===V)return Ye(_e,gf(_e,ue),be);Sf(_e,ue)}return null}function Ie(_e,ue,be,Ge){var Ht=ue!==null?ue.key:null;if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return Ht!==null?null:K(_e,ue,""+be,Ge);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case T:return be.key===Ht?oe(_e,ue,be,Ge):null;case M:return be.key===Ht?Me(_e,ue,be,Ge):null;case L:return be=Pc(be),Ie(_e,ue,be,Ge)}if(ge(be)||Y(be))return Ht!==null?null:ze(_e,ue,be,Ge,null);if(typeof be.then=="function")return Ie(_e,ue,ep(be),Ge);if(be.$$typeof===V)return Ie(_e,ue,gf(_e,be),Ge);Sf(_e,be)}return null}function Ue(_e,ue,be,Ge,Ht){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return _e=_e.get(be)||null,K(ue,_e,""+Ge,Ht);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case T:return _e=_e.get(Ge.key===null?be:Ge.key)||null,oe(ue,_e,Ge,Ht);case M:return _e=_e.get(Ge.key===null?be:Ge.key)||null,Me(ue,_e,Ge,Ht);case L:return Ge=Pc(Ge),Ue(_e,ue,be,Ge,Ht)}if(ge(Ge)||Y(Ge))return _e=_e.get(be)||null,ze(ue,_e,Ge,Ht,null);if(typeof Ge.then=="function")return Ue(_e,ue,be,ep(Ge),Ht);if(Ge.$$typeof===V)return Ue(_e,ue,be,gf(ue,Ge),Ht);Sf(ue,Ge)}return null}function Dt(_e,ue,be,Ge){for(var Ht=null,ei=null,Lt=ue,xn=ue=0,Ln=null;Lt!==null&&xn<be.length;xn++){Lt.index>xn?(Ln=Lt,Lt=null):Ln=Lt.sibling;var ti=Ie(_e,Lt,be[xn],Ge);if(ti===null){Lt===null&&(Lt=Ln);break}r&&Lt&&ti.alternate===null&&o(_e,Lt),ue=A(ti,ue,xn),ei===null?Ht=ti:ei.sibling=ti,ei=ti,Lt=Ln}if(xn===be.length)return f(_e,Lt),In&&Ho(_e,xn),Ht;if(Lt===null){for(;xn<be.length;xn++)Lt=Ye(_e,be[xn],Ge),Lt!==null&&(ue=A(Lt,ue,xn),ei===null?Ht=Lt:ei.sibling=Lt,ei=Lt);return In&&Ho(_e,xn),Ht}for(Lt=m(Lt);xn<be.length;xn++)Ln=Ue(Lt,_e,xn,be[xn],Ge),Ln!==null&&(r&&Ln.alternate!==null&&Lt.delete(Ln.key===null?xn:Ln.key),ue=A(Ln,ue,xn),ei===null?Ht=Ln:ei.sibling=Ln,ei=Ln);return r&&Lt.forEach(function(dh){return o(_e,dh)}),In&&Ho(_e,xn),Ht}function Yt(_e,ue,be,Ge){if(be==null)throw Error(n(151));for(var Ht=null,ei=null,Lt=ue,xn=ue=0,Ln=null,ti=be.next();Lt!==null&&!ti.done;xn++,ti=be.next()){Lt.index>xn?(Ln=Lt,Lt=null):Ln=Lt.sibling;var dh=Ie(_e,Lt,ti.value,Ge);if(dh===null){Lt===null&&(Lt=Ln);break}r&&Lt&&dh.alternate===null&&o(_e,Lt),ue=A(dh,ue,xn),ei===null?Ht=dh:ei.sibling=dh,ei=dh,Lt=Ln}if(ti.done)return f(_e,Lt),In&&Ho(_e,xn),Ht;if(Lt===null){for(;!ti.done;xn++,ti=be.next())ti=Ye(_e,ti.value,Ge),ti!==null&&(ue=A(ti,ue,xn),ei===null?Ht=ti:ei.sibling=ti,ei=ti);return In&&Ho(_e,xn),Ht}for(Lt=m(Lt);!ti.done;xn++,ti=be.next())ti=Ue(Lt,_e,xn,ti.value,Ge),ti!==null&&(r&&ti.alternate!==null&&Lt.delete(ti.key===null?xn:ti.key),ue=A(ti,ue,xn),ei===null?Ht=ti:ei.sibling=ti,ei=ti);return r&&Lt.forEach(function(RP){return o(_e,RP)}),In&&Ho(_e,xn),Ht}function pi(_e,ue,be,Ge){if(typeof be=="object"&&be!==null&&be.type===C&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case T:e:{for(var Ht=be.key;ue!==null;){if(ue.key===Ht){if(Ht=be.type,Ht===C){if(ue.tag===7){f(_e,ue.sibling),Ge=E(ue,be.props.children),Ge.return=_e,_e=Ge;break e}}else if(ue.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===L&&Pc(Ht)===ue.type){f(_e,ue.sibling),Ge=E(ue,be.props),vf(Ge,be),Ge.return=_e,_e=Ge;break e}f(_e,ue);break}else o(_e,ue);ue=ue.sibling}be.type===C?(Ge=Fo(be.props.children,_e.mode,Ge,be.key),Ge.return=_e,_e=Ge):(Ge=ff(be.type,be.key,be.props,null,_e.mode,Ge),vf(Ge,be),Ge.return=_e,_e=Ge)}return B(_e);case M:e:{for(Ht=be.key;ue!==null;){if(ue.key===Ht)if(ue.tag===4&&ue.stateNode.containerInfo===be.containerInfo&&ue.stateNode.implementation===be.implementation){f(_e,ue.sibling),Ge=E(ue,be.children||[]),Ge.return=_e,_e=Ge;break e}else{f(_e,ue);break}else o(_e,ue);ue=ue.sibling}Ge=Va(be,_e.mode,Ge),Ge.return=_e,_e=Ge}return B(_e);case L:return be=Pc(be),pi(_e,ue,be,Ge)}if(ge(be))return Dt(_e,ue,be,Ge);if(Y(be)){if(Ht=Y(be),typeof Ht!="function")throw Error(n(150));return be=Ht.call(be),Yt(_e,ue,be,Ge)}if(typeof be.then=="function")return pi(_e,ue,ep(be),Ge);if(be.$$typeof===V)return pi(_e,ue,gf(_e,be),Ge);Sf(_e,be)}return typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint"?(be=""+be,ue!==null&&ue.tag===6?(f(_e,ue.sibling),Ge=E(ue,be),Ge.return=_e,_e=Ge):(f(_e,ue),Ge=Wd(be,_e.mode,Ge),Ge.return=_e,_e=Ge),B(_e)):f(_e,ue)}return function(_e,ue,be,Ge){try{jl=0;var Ht=pi(_e,ue,be,Ge);return Gl=null,Ht}catch(Lt){if(Lt===kl||Lt===Fa)throw Lt;var ei=Ks(29,Lt,null,_e.mode);return ei.lanes=Ge,ei.return=_e,ei}finally{}}}var Vc=Wu(!0),pv=Wu(!1),ql=!1;function bg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ag(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function po(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Wo(r,o,f){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(On&2)!==0){var E=m.pending;return E===null?o.next=o:(o.next=E.next,E.next=o),m.pending=o,o=ku(r),Xd(r,null,f),o}return hf(r,m,o,f),ku(r)}function Xl(r,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194048)!==0)){var m=o.lanes;m&=r.pendingLanes,f|=m,o.lanes=f,qs(r,f)}}function tp(r,o){var f=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var E=null,A=null;if(f=f.firstBaseUpdate,f!==null){do{var B={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};A===null?E=A=B:A=A.next=B,f=f.next}while(f!==null);A===null?E=A=o:A=A.next=o}else E=A=o;f={baseState:m.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:m.shared,callbacks:m.callbacks},r.updateQueue=f;return}r=f.lastBaseUpdate,r===null?f.firstBaseUpdate=o:r.next=o,f.lastBaseUpdate=o}var Mg=!1;function Ef(){if(Mg){var r=Ba;if(r!==null)throw r}}function zc(r,o,f,m){Mg=!1;var E=r.updateQueue;ql=!1;var A=E.firstBaseUpdate,B=E.lastBaseUpdate,K=E.shared.pending;if(K!==null){E.shared.pending=null;var oe=K,Me=oe.next;oe.next=null,B===null?A=Me:B.next=Me,B=oe;var ze=r.alternate;ze!==null&&(ze=ze.updateQueue,K=ze.lastBaseUpdate,K!==B&&(K===null?ze.firstBaseUpdate=Me:K.next=Me,ze.lastBaseUpdate=oe))}if(A!==null){var Ye=E.baseState;B=0,ze=Me=oe=null,K=A;do{var Ie=K.lane&-536870913,Ue=Ie!==K.lane;if(Ue?(wn&Ie)===Ie:(m&Ie)===Ie){Ie!==0&&Ie===Xo&&(Mg=!0),ze!==null&&(ze=ze.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var Dt=r,Yt=K;Ie=o;var pi=f;switch(Yt.tag){case 1:if(Dt=Yt.payload,typeof Dt=="function"){Ye=Dt.call(pi,Ye,Ie);break e}Ye=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Yt.payload,Ie=typeof Dt=="function"?Dt.call(pi,Ye,Ie):Dt,Ie==null)break e;Ye=_({},Ye,Ie);break e;case 2:ql=!0}}Ie=K.callback,Ie!==null&&(r.flags|=64,Ue&&(r.flags|=8192),Ue=E.callbacks,Ue===null?E.callbacks=[Ie]:Ue.push(Ie))}else Ue={lane:Ie,tag:K.tag,payload:K.payload,callback:K.callback,next:null},ze===null?(Me=ze=Ue,oe=Ye):ze=ze.next=Ue,B|=Ie;if(K=K.next,K===null){if(K=E.shared.pending,K===null)break;Ue=K,K=Ue.next,Ue.next=null,E.lastBaseUpdate=Ue,E.shared.pending=null}}while(!0);ze===null&&(oe=Ye),E.baseState=oe,E.firstBaseUpdate=Me,E.lastBaseUpdate=ze,A===null&&(E.shared.lanes=0),$r|=B,r.lanes=B,r.memoizedState=Ye}}function mo(r,o){if(typeof r!="function")throw Error(n(191,r));r.call(o)}function Ts(r,o){var f=r.callbacks;if(f!==null)for(r.callbacks=null,r=0;r<f.length;r++)mo(f[r],o)}var Gr=J(null),Zs=J(0);function wg(r,o){r=ki,De(Zs,r),De(Gr,o),ki=r|o.baseLanes}function Rg(){De(Zs,ki),De(Gr,Gr.current)}function Ls(){ki=Zs.current,le(Gr),le(Zs)}var ts=J(null),pa=null;function Wl(r){var o=r.alternate;De(Di,Di.current&1),De(ts,r),pa===null&&(o===null||Gr.current!==null||o.memoizedState!==null)&&(pa=r)}function Cg(r){De(Di,Di.current),De(ts,r),pa===null&&(pa=r)}function mv(r){r.tag===22?(De(Di,Di.current),De(ts,r),pa===null&&(pa=r)):Yo()}function Yo(){De(Di,Di.current),De(ts,ts.current)}function jr(r){le(ts),pa===r&&(pa=null),le(Di)}var Di=J(0);function np(r){for(var o=r;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||pT(f)||mT(f)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var gr=0,Kt=null,si=null,Yi=null,ip=!1,go=!1,Bc=!1,sp=0,xf=0,yo=null,Xx=0;function Ni(){throw Error(n(321))}function Ig(r,o){if(o===null)return!1;for(var f=0;f<o.length&&f<r.length;f++)if(!_i(r[f],o[f]))return!1;return!0}function Dg(r,o,f,m,E,A){return gr=A,Kt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,X.H=r===null||r.memoizedState===null?Lv:Qu,Bc=!1,A=f(m,E),Bc=!1,go&&(A=yv(o,f,m,E)),gv(r),A}function gv(r){X.H=wf;var o=si!==null&&si.next!==null;if(gr=0,Yi=si=Kt=null,ip=!1,xf=0,yo=null,o)throw Error(n(300));r===null||vi||(r=r.dependencies,r!==null&&ju(r)&&(vi=!0))}function yv(r,o,f,m){Kt=r;var E=0;do{if(go&&(yo=null),xf=0,go=!1,25<=E)throw Error(n(301));if(E+=1,Yi=si=null,r.updateQueue!=null){var A=r.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}X.H=Rf,A=o(f,m)}while(go);return A}function Wx(){var r=X.H,o=r.useState()[0];return o=typeof o.then=="function"?bf(o):o,r=r.useState()[0],(si!==null?si.memoizedState:null)!==r&&(Kt.flags|=1024),o}function Ng(){var r=sp!==0;return sp=0,r}function Og(r,o,f){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~f}function Ug(r){if(ip){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}ip=!1}gr=0,Yi=si=Kt=null,go=!1,xf=sp=0,yo=null}function Js(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yi===null?Kt.memoizedState=Yi=r:Yi=Yi.next=r,Yi}function zi(){if(si===null){var r=Kt.alternate;r=r!==null?r.memoizedState:null}else r=si.next;var o=Yi===null?Kt.memoizedState:Yi.next;if(o!==null)Yi=o,si=r;else{if(r===null)throw Kt.alternate===null?Error(n(467)):Error(n(310));si=r,r={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},Yi===null?Kt.memoizedState=Yi=r:Yi=Yi.next=r}return Yi}function Tf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bf(r){var o=xf;return xf+=1,yo===null&&(yo=[]),r=xg(yo,r,o),o=Kt,(Yi===null?o.memoizedState:Yi.next)===null&&(o=o.alternate,X.H=o===null||o.memoizedState===null?Lv:Qu),r}function rp(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return bf(r);if(r.$$typeof===V)return fs(r)}throw Error(n(438,String(r)))}function Lg(r){var o=null,f=Kt.updateQueue;if(f!==null&&(o=f.memoCache),o==null){var m=Kt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(E){return E.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),f===null&&(f=Tf(),Kt.updateQueue=f),f.memoCache=o,f=o.data[o.index],f===void 0)for(f=o.data[o.index]=Array(r),m=0;m<r;m++)f[m]=O;return o.index++,f}function Ko(r,o){return typeof o=="function"?o(r):o}function ap(r){var o=zi();return Pg(o,si,r)}function Pg(r,o,f){var m=r.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=f;var E=r.baseQueue,A=m.pending;if(A!==null){if(E!==null){var B=E.next;E.next=A.next,A.next=B}o.baseQueue=E=A,m.pending=null}if(A=r.baseState,E===null)r.memoizedState=A;else{o=E.next;var K=B=null,oe=null,Me=o,ze=!1;do{var Ye=Me.lane&-536870913;if(Ye!==Me.lane?(wn&Ye)===Ye:(gr&Ye)===Ye){var Ie=Me.revertLane;if(Ie===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,gesture:null,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null}),Ye===Xo&&(ze=!0);else if((gr&Ie)===Ie){Me=Me.next,Ie===Xo&&(ze=!0);continue}else Ye={lane:0,revertLane:Me.revertLane,gesture:null,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null},oe===null?(K=oe=Ye,B=A):oe=oe.next=Ye,Kt.lanes|=Ie,$r|=Ie;Ye=Me.action,Bc&&f(A,Ye),A=Me.hasEagerState?Me.eagerState:f(A,Ye)}else Ie={lane:Ye,revertLane:Me.revertLane,gesture:Me.gesture,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null},oe===null?(K=oe=Ie,B=A):oe=oe.next=Ie,Kt.lanes|=Ye,$r|=Ye;Me=Me.next}while(Me!==null&&Me!==o);if(oe===null?B=A:oe.next=K,!_i(A,r.memoizedState)&&(vi=!0,ze&&(f=Ba,f!==null)))throw f;r.memoizedState=A,r.baseState=B,r.baseQueue=oe,m.lastRenderedState=A}return E===null&&(m.lanes=0),[r.memoizedState,m.dispatch]}function op(r){var o=zi(),f=o.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=r;var m=f.dispatch,E=f.pending,A=o.memoizedState;if(E!==null){f.pending=null;var B=E=E.next;do A=r(A,B.action),B=B.next;while(B!==E);_i(A,o.memoizedState)||(vi=!0),o.memoizedState=A,o.baseQueue===null&&(o.baseState=A),f.lastRenderedState=A}return[A,m]}function Vg(r,o,f){var m=Kt,E=zi(),A=In;if(A){if(f===void 0)throw Error(n(407));f=f()}else f=o();var B=!_i((si||E).memoizedState,f);if(B&&(E.memoizedState=f,vi=!0),E=E.queue,kg(Bg.bind(null,m,E,r),[r]),E.getSnapshot!==o||B||Yi!==null&&Yi.memoizedState.tag&1){if(m.flags|=2048,Yu(9,{destroy:void 0},zg.bind(null,m,E,f,o),null),Jn===null)throw Error(n(349));A||(gr&127)!==0||_v(m,o,f)}return f}function _v(r,o,f){r.flags|=16384,r={getSnapshot:o,value:f},o=Kt.updateQueue,o===null?(o=Tf(),Kt.updateQueue=o,o.stores=[r]):(f=o.stores,f===null?o.stores=[r]:f.push(r))}function zg(r,o,f,m){o.value=f,o.getSnapshot=m,Fg(o)&&lp(r)}function Bg(r,o,f){return f(function(){Fg(o)&&lp(r)})}function Fg(r){var o=r.getSnapshot;r=r.value;try{var f=o();return!_i(r,f)}catch{return!0}}function lp(r){var o=Vl(r,2);o!==null&&h(o,r,2)}function Af(r){var o=Js();if(typeof r=="function"){var f=r;if(r=f(),Bc){Ct(!0);try{f()}finally{Ct(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:r},o}function vv(r,o,f,m){return r.baseState=f,Pg(r,si,typeof m=="function"?m:Ko)}function Yx(r,o,f,m,E){if(Qo(r))throw Error(n(485));if(r=o.action,r!==null){var A={payload:E,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){A.listeners.push(B)}};X.T!==null?f(!0):A.isTransition=!1,m(A),f=o.pending,f===null?(A.next=o.pending=A,Sv(o,A)):(A.next=f.next,o.pending=f.next=A)}}function Sv(r,o){var f=o.action,m=o.payload,E=r.state;if(o.isTransition){var A=X.T,B={};X.T=B;try{var K=f(E,m),oe=X.S;oe!==null&&oe(B,K),Ev(r,o,K)}catch(Me){cp(r,o,Me)}finally{A!==null&&B.types!==null&&(A.types=B.types),X.T=A}}else try{A=f(E,m),Ev(r,o,A)}catch(Me){cp(r,o,Me)}}function Ev(r,o,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){Hg(r,o,m)},function(m){return cp(r,o,m)}):Hg(r,o,f)}function Hg(r,o,f){o.status="fulfilled",o.value=f,xv(o),r.state=f,o=r.pending,o!==null&&(f=o.next,f===o?r.pending=null:(f=f.next,o.next=f,Sv(r,f)))}function cp(r,o,f){var m=r.pending;if(r.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=f,xv(o),o=o.next;while(o!==m)}r.action=null}function xv(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function Tv(r,o){return o}function bv(r,o){if(In){var f=Jn.formState;if(f!==null){e:{var m=Kt;if(In){if(hi){t:{for(var E=hi,A=hs;E.nodeType!==8;){if(!A){E=null;break t}if(E=To(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){hi=To(E.nextSibling),m=E.data==="F!";break e}}Mn(m)}m=!1}m&&(o=f[0])}}return f=Js(),f.memoizedState=f.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tv,lastRenderedState:o},f.queue=m,f=Uv.bind(null,Kt,m),m.dispatch=f,m=Af(!1),A=Mf.bind(null,Kt,!1,m.queue),m=Js(),E={state:o,dispatch:null,action:r,pending:null},m.queue=E,f=Yx.bind(null,Kt,E,A,f),E.dispatch=f,m.memoizedState=r,[o,f,!1]}function Av(r){var o=zi();return Mv(o,si,r)}function Mv(r,o,f){if(o=Pg(r,o,Tv)[0],r=ap(Ko)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=bf(o)}catch(B){throw B===kl?Fa:B}else m=o;o=zi();var E=o.queue,A=E.dispatch;return f!==o.memoizedState&&(Kt.flags|=2048,Yu(9,{destroy:void 0},Kx.bind(null,E,f),null)),[m,A,r]}function Kx(r,o){r.action=o}function wv(r){var o=zi(),f=si;if(f!==null)return Mv(o,f,r);zi(),o=o.memoizedState,f=zi();var m=f.queue.dispatch;return f.memoizedState=r,[o,m,!1]}function Yu(r,o,f,m){return r={tag:r,create:f,deps:m,inst:o,next:null},o=Kt.updateQueue,o===null&&(o=Tf(),Kt.updateQueue=o),f=o.lastEffect,f===null?o.lastEffect=r.next=r:(m=f.next,f.next=r,r.next=m,o.lastEffect=r),r}function Rv(){return zi().memoizedState}function up(r,o,f,m){var E=Js();Kt.flags|=r,E.memoizedState=Yu(1|o,{destroy:void 0},f,m===void 0?null:m)}function hp(r,o,f,m){var E=zi();m=m===void 0?null:m;var A=E.memoizedState.inst;si!==null&&m!==null&&Ig(m,si.memoizedState.deps)?E.memoizedState=Yu(o,A,f,m):(Kt.flags|=r,E.memoizedState=Yu(1|o,A,f,m))}function Cv(r,o){up(8390656,8,r,o)}function kg(r,o){hp(2048,8,r,o)}function Iv(r){Kt.flags|=4;var o=Kt.updateQueue;if(o===null)o=Tf(),Kt.updateQueue=o,o.events=[r];else{var f=o.events;f===null?o.events=[r]:f.push(r)}}function Dv(r){var o=zi().memoizedState;return Iv({ref:o,nextImpl:r}),function(){if((On&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function Nv(r,o){return hp(4,2,r,o)}function qr(r,o){return hp(4,4,r,o)}function Gg(r,o){if(typeof o=="function"){r=r();var f=o(r);return function(){typeof f=="function"?f():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function fp(r,o,f){f=f!=null?f.concat([r]):null,hp(4,4,Gg.bind(null,o,r),f)}function dp(){}function jg(r,o){var f=zi();o=o===void 0?null:o;var m=f.memoizedState;return o!==null&&Ig(o,m[1])?m[0]:(f.memoizedState=[r,o],r)}function qg(r,o){var f=zi();o=o===void 0?null:o;var m=f.memoizedState;if(o!==null&&Ig(o,m[1]))return m[0];if(m=r(),Bc){Ct(!0);try{r()}finally{Ct(!1)}}return f.memoizedState=[m,o],m}function Xg(r,o,f){return f===void 0||(gr&1073741824)!==0&&(wn&261930)===0?r.memoizedState=o:(r.memoizedState=f,r=c(),Kt.lanes|=r,$r|=r,f)}function Wg(r,o,f,m){return _i(f,o)?f:Gr.current!==null?(r=Xg(r,f,m),_i(r,o)||(vi=!0),r):(gr&42)===0||(gr&1073741824)!==0&&(wn&261930)===0?(vi=!0,r.memoizedState=f):(r=c(),Kt.lanes|=r,$r|=r,o)}function Yg(r,o,f,m,E){var A=ee.p;ee.p=A!==0&&8>A?A:8;var B=X.T,K={};X.T=K,Mf(r,!1,o,f);try{var oe=E(),Me=X.S;if(Me!==null&&Me(K,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var ze=Eg(oe,m);Ku(r,o,ze,er(r))}else Ku(r,o,m,er(r))}catch(Ye){Ku(r,o,{then:function(){},status:"rejected",reason:Ye},er())}finally{ee.p=A,B!==null&&K.types!==null&&(B.types=K.types),X.T=B}}function Qx(){}function Kg(r,o,f,m){if(r.tag!==5)throw Error(n(476));var E=Ov(r).queue;Yg(r,E,o,ne,f===null?Qx:function(){return Qg(r),f(m)})}function Ov(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:ne},next:null};var f={};return o.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:f},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function Qg(r){var o=Ov(r);o.next===null&&(o=r.alternate.memoizedState),Ku(r,o.next.queue,{},er())}function Zg(){return fs(uy)}function bs(){return zi().memoizedState}function Jg(){return zi().memoizedState}function Zx(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var f=er();r=po(f);var m=Wo(o,r,f);m!==null&&(h(m,o,f),Xl(m,o,f)),o={cache:_g()},r.payload=o;return}o=o.return}}function Jx(r,o,f){var m=er();f={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Qo(r)?Fc(o,f):(f=Hu(r,o,f,m),f!==null&&(h(f,r,m),yr(f,o,m)))}function Uv(r,o,f){var m=er();Ku(r,o,f,m)}function Ku(r,o,f,m){var E={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Qo(r))Fc(o,E);else{var A=r.alternate;if(r.lanes===0&&(A===null||A.lanes===0)&&(A=o.lastRenderedReducer,A!==null))try{var B=o.lastRenderedState,K=A(B,f);if(E.hasEagerState=!0,E.eagerState=K,_i(K,B))return hf(r,o,E,0),Jn===null&&Pl(),!1}catch{}finally{}if(f=Hu(r,o,E,m),f!==null)return h(f,r,m),yr(f,o,m),!0}return!1}function Mf(r,o,f,m){if(m={lane:2,revertLane:nT(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Qo(r)){if(o)throw Error(n(479))}else o=Hu(r,f,m,2),o!==null&&h(o,r,2)}function Qo(r){var o=r.alternate;return r===Kt||o!==null&&o===Kt}function Fc(r,o){go=ip=!0;var f=r.pending;f===null?o.next=o:(o.next=f.next,f.next=o),r.pending=o}function yr(r,o,f){if((f&4194048)!==0){var m=o.lanes;m&=r.pendingLanes,f|=m,o.lanes=f,qs(r,f)}}var wf={readContext:fs,use:rp,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useLayoutEffect:Ni,useInsertionEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useSyncExternalStore:Ni,useId:Ni,useHostTransitionStatus:Ni,useFormState:Ni,useActionState:Ni,useOptimistic:Ni,useMemoCache:Ni,useCacheRefresh:Ni};wf.useEffectEvent=Ni;var Lv={readContext:fs,use:rp,useCallback:function(r,o){return Js().memoizedState=[r,o===void 0?null:o],r},useContext:fs,useEffect:Cv,useImperativeHandle:function(r,o,f){f=f!=null?f.concat([r]):null,up(4194308,4,Gg.bind(null,o,r),f)},useLayoutEffect:function(r,o){return up(4194308,4,r,o)},useInsertionEffect:function(r,o){up(4,2,r,o)},useMemo:function(r,o){var f=Js();o=o===void 0?null:o;var m=r();if(Bc){Ct(!0);try{r()}finally{Ct(!1)}}return f.memoizedState=[m,o],m},useReducer:function(r,o,f){var m=Js();if(f!==void 0){var E=f(o);if(Bc){Ct(!0);try{f(o)}finally{Ct(!1)}}}else E=o;return m.memoizedState=m.baseState=E,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:E},m.queue=r,r=r.dispatch=Jx.bind(null,Kt,r),[m.memoizedState,r]},useRef:function(r){var o=Js();return r={current:r},o.memoizedState=r},useState:function(r){r=Af(r);var o=r.queue,f=Uv.bind(null,Kt,o);return o.dispatch=f,[r.memoizedState,f]},useDebugValue:dp,useDeferredValue:function(r,o){var f=Js();return Xg(f,r,o)},useTransition:function(){var r=Af(!1);return r=Yg.bind(null,Kt,r.queue,!0,!1),Js().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,f){var m=Kt,E=Js();if(In){if(f===void 0)throw Error(n(407));f=f()}else{if(f=o(),Jn===null)throw Error(n(349));(wn&127)!==0||_v(m,o,f)}E.memoizedState=f;var A={value:f,getSnapshot:o};return E.queue=A,Cv(Bg.bind(null,m,A,r),[r]),m.flags|=2048,Yu(9,{destroy:void 0},zg.bind(null,m,A,f,o),null),f},useId:function(){var r=Js(),o=Jn.identifierPrefix;if(In){var f=ho,m=uo;f=(m&~(1<<32-mt(m)-1)).toString(32)+f,o="_"+o+"R_"+f,f=sp++,0<f&&(o+="H"+f.toString(32)),o+="_"}else f=Xx++,o="_"+o+"r_"+f.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Zg,useFormState:bv,useActionState:bv,useOptimistic:function(r){var o=Js();o.memoizedState=o.baseState=r;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=f,o=Mf.bind(null,Kt,!0,f),f.dispatch=o,[r,o]},useMemoCache:Lg,useCacheRefresh:function(){return Js().memoizedState=Zx.bind(null,Kt)},useEffectEvent:function(r){var o=Js(),f={impl:r};return o.memoizedState=f,function(){if((On&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},Qu={readContext:fs,use:rp,useCallback:jg,useContext:fs,useEffect:kg,useImperativeHandle:fp,useInsertionEffect:Nv,useLayoutEffect:qr,useMemo:qg,useReducer:ap,useRef:Rv,useState:function(){return ap(Ko)},useDebugValue:dp,useDeferredValue:function(r,o){var f=zi();return Wg(f,si.memoizedState,r,o)},useTransition:function(){var r=ap(Ko)[0],o=zi().memoizedState;return[typeof r=="boolean"?r:bf(r),o]},useSyncExternalStore:Vg,useId:bs,useHostTransitionStatus:Zg,useFormState:Av,useActionState:Av,useOptimistic:function(r,o){var f=zi();return vv(f,si,r,o)},useMemoCache:Lg,useCacheRefresh:Jg};Qu.useEffectEvent=Dv;var Rf={readContext:fs,use:rp,useCallback:jg,useContext:fs,useEffect:kg,useImperativeHandle:fp,useInsertionEffect:Nv,useLayoutEffect:qr,useMemo:qg,useReducer:op,useRef:Rv,useState:function(){return op(Ko)},useDebugValue:dp,useDeferredValue:function(r,o){var f=zi();return si===null?Xg(f,r,o):Wg(f,si.memoizedState,r,o)},useTransition:function(){var r=op(Ko)[0],o=zi().memoizedState;return[typeof r=="boolean"?r:bf(r),o]},useSyncExternalStore:Vg,useId:bs,useHostTransitionStatus:Zg,useFormState:wv,useActionState:wv,useOptimistic:function(r,o){var f=zi();return si!==null?vv(f,si,r,o):(f.baseState=r,[r,f.queue.dispatch])},useMemoCache:Lg,useCacheRefresh:Jg};Rf.useEffectEvent=Dv;function Zu(r,o,f,m){o=r.memoizedState,f=f(m,o),f=f==null?o:_({},o,f),r.memoizedState=f,r.lanes===0&&(r.updateQueue.baseState=f)}var Cf={enqueueSetState:function(r,o,f){r=r._reactInternals;var m=er(),E=po(m);E.payload=o,f!=null&&(E.callback=f),o=Wo(r,E,m),o!==null&&(h(o,r,m),Xl(o,r,m))},enqueueReplaceState:function(r,o,f){r=r._reactInternals;var m=er(),E=po(m);E.tag=1,E.payload=o,f!=null&&(E.callback=f),o=Wo(r,E,m),o!==null&&(h(o,r,m),Xl(o,r,m))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var f=er(),m=po(f);m.tag=2,o!=null&&(m.callback=o),o=Wo(r,m,f),o!==null&&(h(o,r,f),Xl(o,r,f))}};function Pv(r,o,f,m,E,A,B){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,A,B):o.prototype&&o.prototype.isPureReactComponent?!Lu(f,m)||!Lu(E,A):!0}function Vv(r,o,f,m){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,m),o.state!==r&&Cf.enqueueReplaceState(o,o.state,null)}function As(r,o){var f=o;if("ref"in o){f={};for(var m in o)m!=="ref"&&(f[m]=o[m])}if(r=r.defaultProps){f===o&&(f=_({},f));for(var E in r)f[E]===void 0&&(f[E]=r[E])}return f}function $g(r){Ll(r)}function zv(r){console.error(r)}function pp(r){Ll(r)}function mp(r,o){try{var f=r.onUncaughtError;f(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function Bv(r,o,f){try{var m=r.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function ey(r,o,f){return f=po(f),f.tag=3,f.payload={element:null},f.callback=function(){mp(r,o)},f}function Ju(r){return r=po(r),r.tag=3,r}function _r(r,o,f,m){var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var A=m.value;r.payload=function(){return E(A)},r.callback=function(){Bv(o,f,m)}}var B=f.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(r.callback=function(){Bv(o,f,m),typeof E!="function"&&(xo===null?xo=new Set([this]):xo.add(this));var K=m.stack;this.componentDidCatch(m.value,{componentStack:K!==null?K:""})})}function Xr(r,o,f,m,E){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=f.alternate,o!==null&&Fl(o,f,E,!0),f=ts.current,f!==null){switch(f.tag){case 31:case 13:return pa===null?nn():f.alternate===null&&$n===0&&($n=3),f.flags&=-257,f.flags|=65536,f.lanes=E,m===_f?f.flags|=16384:(o=f.updateQueue,o===null?f.updateQueue=new Set([m]):o.add(m),$x(r,m,E)),!1;case 22:return f.flags|=65536,m===_f?f.flags|=16384:(o=f.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=o):(f=o.retryQueue,f===null?o.retryQueue=new Set([m]):f.add(m)),$x(r,m,E)),!1}throw Error(n(435,f.tag))}return $x(r,m,E),nn(),!1}if(In)return o=ts.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=E,m!==Kd&&(r=Error(n(422),{cause:m}),mf(pr(r,f)))):(m!==Kd&&(o=Error(n(423),{cause:m}),mf(pr(o,f))),r=r.current.alternate,r.flags|=65536,E&=-E,r.lanes|=E,m=pr(m,f),E=ey(r.stateNode,m,E),tp(r,E),$n!==4&&($n=2)),!1;var A=Error(n(520),{cause:m});if(A=pr(A,f),qa===null?qa=[A]:qa.push(A),$n!==4&&($n=2),o===null)return!0;m=pr(m,f),f=o;do{switch(f.tag){case 3:return f.flags|=65536,r=E&-E,f.lanes|=r,r=ey(f.stateNode,m,r),tp(f,r),!1;case 1:if(o=f.type,A=f.stateNode,(f.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(xo===null||!xo.has(A))))return f.flags|=65536,E&=-E,f.lanes|=E,E=Ju(E),_r(E,r,f,m),tp(f,E),!1}f=f.return}while(f!==null);return!1}var gp=Error(n(461)),vi=!1;function Oi(r,o,f,m){o.child=r===null?pv(o,null,f,m):Vc(o,r.child,f,m)}function If(r,o,f,m,E){f=f.render;var A=o.ref;if("ref"in m){var B={};for(var K in m)K!=="ref"&&(B[K]=m[K])}else B=m;return Uc(o),m=Dg(r,o,f,B,A,E),K=Ng(),r!==null&&!vi?(Og(r,o,E),Ga(r,o,E)):(In&&K&&Yd(o),o.flags|=1,Oi(r,o,m,E),o.child)}function Df(r,o,f,m,E){if(r===null){var A=f.type;return typeof A=="function"&&!Qs(A)&&A.defaultProps===void 0&&f.compare===null?(o.tag=15,o.type=A,Wr(r,o,A,m,E)):(r=ff(f.type,null,m,o,o.mode,E),r.ref=o.ref,r.return=o,o.child=r)}if(A=r.child,!Kl(r,E)){var B=A.memoizedProps;if(f=f.compare,f=f!==null?f:Lu,f(B,m)&&r.ref===o.ref)return Ga(r,o,E)}return o.flags|=1,r=lo(A,m),r.ref=o.ref,r.return=o,o.child=r}function Wr(r,o,f,m,E){if(r!==null){var A=r.memoizedProps;if(Lu(A,m)&&r.ref===o.ref)if(vi=!1,o.pendingProps=m=A,Kl(r,E))(r.flags&131072)!==0&&(vi=!0);else return o.lanes=r.lanes,Ga(r,o,E)}return $u(r,o,f,m,E)}function Yr(r,o,f,m){var E=m.children,A=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(A=A!==null?A.baseLanes|f:f,r!==null){for(m=o.child=r.child,E=0;m!==null;)E=E|m.lanes|m.childLanes,m=m.sibling;m=E&~A}else m=0,o.child=null;return _o(r,o,A,f,m)}if((f&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Xu(o,A!==null?A.cachePool:null),A!==null?wg(o,A):Rg(),mv(o);else return m=o.lanes=536870912,_o(r,o,A!==null?A.baseLanes|f:f,f,m)}else A!==null?(Xu(o,A.cachePool),wg(o,A),Yo(),o.memoizedState=null):(r!==null&&Xu(o,null),Rg(),Yo());return Oi(r,o,E,f),o.child}function Ha(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function _o(r,o,f,m,E){var A=fo();return A=A===null?null:{parent:zt._currentValue,pool:A},o.memoizedState={baseLanes:f,cachePool:A},r!==null&&Xu(o,null),Rg(),mv(o),r!==null&&Fl(r,o,m,!0),o.childLanes=E,null}function ma(r,o){return o=eh({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function ds(r,o,f){return Vc(o,r.child,null,f),r=ma(o,o.pendingProps),r.flags|=2,jr(o),o.memoizedState=null,r}function Nf(r,o,f){var m=o.pendingProps,E=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(In){if(m.mode==="hidden")return r=ma(o,m),o.lanes=536870912,Ha(null,r);if(Cg(o),(r=hi)?(r=Tw(r,hs),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:co!==null?{id:uo,overflow:ho}:null,retryLane:536870912,hydrationErrors:null},f=lv(r),f.return=o,o.child=f,us=o,hi=null)):r=null,r===null)throw Mn(o);return o.lanes=536870912,null}return ma(o,m)}var A=r.memoizedState;if(A!==null){var B=A.dehydrated;if(Cg(o),E)if(o.flags&256)o.flags&=-257,o=ds(r,o,f);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(n(558));else if(vi||Fl(r,o,f,!1),E=(f&r.childLanes)!==0,vi||E){if(m=Jn,m!==null&&(B=Da(m,f),B!==0&&B!==A.retryLane))throw A.retryLane=B,Vl(r,B),h(m,r,B),gp;nn(),o=ds(r,o,f)}else r=A.treeContext,hi=To(B.nextSibling),us=o,In=!0,ko=null,hs=!1,r!==null&&pf(o,r),o=ma(o,m),o.flags|=4096;return o}return r=lo(r.child,{mode:m.mode,children:m.children}),r.ref=o.ref,o.child=r,r.return=o,r}function ka(r,o){var f=o.ref;if(f===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(r===null||r.ref!==f)&&(o.flags|=4194816)}}function $u(r,o,f,m,E){return Uc(o),f=Dg(r,o,f,m,void 0,E),m=Ng(),r!==null&&!vi?(Og(r,o,E),Ga(r,o,E)):(In&&m&&Yd(o),o.flags|=1,Oi(r,o,f,E),o.child)}function Ps(r,o,f,m,E,A){return Uc(o),o.updateQueue=null,f=yv(o,m,f,E),gv(r),m=Ng(),r!==null&&!vi?(Og(r,o,A),Ga(r,o,A)):(In&&m&&Yd(o),o.flags|=1,Oi(r,o,f,A),o.child)}function Ms(r,o,f,m,E){if(Uc(o),o.stateNode===null){var A=zl,B=f.contextType;typeof B=="object"&&B!==null&&(A=fs(B)),A=new f(m,A),o.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Cf,o.stateNode=A,A._reactInternals=o,A=o.stateNode,A.props=m,A.state=o.memoizedState,A.refs={},bg(o),B=f.contextType,A.context=typeof B=="object"&&B!==null?fs(B):zl,A.state=o.memoizedState,B=f.getDerivedStateFromProps,typeof B=="function"&&(Zu(o,f,B,m),A.state=o.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(B=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),B!==A.state&&Cf.enqueueReplaceState(A,A.state,null),zc(o,m,A,E),Ef(),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(r===null){A=o.stateNode;var K=o.memoizedProps,oe=As(f,K);A.props=oe;var Me=A.context,ze=f.contextType;B=zl,typeof ze=="object"&&ze!==null&&(B=fs(ze));var Ye=f.getDerivedStateFromProps;ze=typeof Ye=="function"||typeof A.getSnapshotBeforeUpdate=="function",K=o.pendingProps!==K,ze||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(K||Me!==B)&&Vv(o,A,m,B),ql=!1;var Ie=o.memoizedState;A.state=Ie,zc(o,m,A,E),Ef(),Me=o.memoizedState,K||Ie!==Me||ql?(typeof Ye=="function"&&(Zu(o,f,Ye,m),Me=o.memoizedState),(oe=ql||Pv(o,f,oe,m,Ie,Me,B))?(ze||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(o.flags|=4194308)):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=Me),A.props=m,A.state=Me,A.context=B,m=oe):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{A=o.stateNode,Ag(r,o),B=o.memoizedProps,ze=As(f,B),A.props=ze,Ye=o.pendingProps,Ie=A.context,Me=f.contextType,oe=zl,typeof Me=="object"&&Me!==null&&(oe=fs(Me)),K=f.getDerivedStateFromProps,(Me=typeof K=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(B!==Ye||Ie!==oe)&&Vv(o,A,m,oe),ql=!1,Ie=o.memoizedState,A.state=Ie,zc(o,m,A,E),Ef();var Ue=o.memoizedState;B!==Ye||Ie!==Ue||ql||r!==null&&r.dependencies!==null&&ju(r.dependencies)?(typeof K=="function"&&(Zu(o,f,K,m),Ue=o.memoizedState),(ze=ql||Pv(o,f,ze,m,Ie,Ue,oe)||r!==null&&r.dependencies!==null&&ju(r.dependencies))?(Me||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,Ue,oe),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,Ue,oe)),typeof A.componentDidUpdate=="function"&&(o.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof A.componentDidUpdate!="function"||B===r.memoizedProps&&Ie===r.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||B===r.memoizedProps&&Ie===r.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Ue),A.props=m,A.state=Ue,A.context=oe,m=ze):(typeof A.componentDidUpdate!="function"||B===r.memoizedProps&&Ie===r.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||B===r.memoizedProps&&Ie===r.memoizedState||(o.flags|=1024),m=!1)}return A=m,ka(r,o),m=(o.flags&128)!==0,A||m?(A=o.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:A.render(),o.flags|=1,r!==null&&m?(o.child=Vc(o,r.child,null,E),o.child=Vc(o,null,f,E)):Oi(r,o,f,E),o.memoizedState=A.state,r=o.child):r=Ga(r,o,E),r}function Bn(r,o,f,m){return Oc(),o.flags|=256,Oi(r,o,f,m),o.child}var Kr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ga(r){return{baseLanes:r,cachePool:Jd()}}function Of(r,o,f){return r=r!==null?r.childLanes&~f:0,o&&(r|=Un),r}function Qr(r,o,f){var m=o.pendingProps,E=!1,A=(o.flags&128)!==0,B;if((B=A)||(B=r!==null&&r.memoizedState===null?!1:(Di.current&2)!==0),B&&(E=!0,o.flags&=-129),B=(o.flags&32)!==0,o.flags&=-33,r===null){if(In){if(E?Wl(o):Yo(),(r=hi)?(r=Tw(r,hs),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:co!==null?{id:uo,overflow:ho}:null,retryLane:536870912,hydrationErrors:null},f=lv(r),f.return=o,o.child=f,us=o,hi=null)):r=null,r===null)throw Mn(o);return mT(r)?o.lanes=32:o.lanes=536870912,null}var K=m.children;return m=m.fallback,E?(Yo(),E=o.mode,K=eh({mode:"hidden",children:K},E),m=Fo(m,E,f,null),K.return=o,m.return=o,K.sibling=m,o.child=K,m=o.child,m.memoizedState=ga(f),m.childLanes=Of(r,B,f),o.memoizedState=Kr,Ha(null,m)):(Wl(o),Yl(o,K))}var oe=r.memoizedState;if(oe!==null&&(K=oe.dehydrated,K!==null)){if(A)o.flags&256?(Wl(o),o.flags&=-257,o=th(r,o,f)):o.memoizedState!==null?(Yo(),o.child=r.child,o.flags|=128,o=null):(Yo(),K=m.fallback,E=o.mode,m=eh({mode:"visible",children:m.children},E),K=Fo(K,E,f,null),K.flags|=2,m.return=o,K.return=o,m.sibling=K,o.child=m,Vc(o,r.child,null,f),m=o.child,m.memoizedState=ga(f),m.childLanes=Of(r,B,f),o.memoizedState=Kr,o=Ha(null,m));else if(Wl(o),mT(K)){if(B=K.nextSibling&&K.nextSibling.dataset,B)var Me=B.dgst;B=Me,m=Error(n(419)),m.stack="",m.digest=B,mf({value:m,source:null,stack:null}),o=th(r,o,f)}else if(vi||Fl(r,o,f,!1),B=(f&r.childLanes)!==0,vi||B){if(B=Jn,B!==null&&(m=Da(B,f),m!==0&&m!==oe.retryLane))throw oe.retryLane=m,Vl(r,m),h(B,r,m),gp;pT(K)||nn(),o=th(r,o,f)}else pT(K)?(o.flags|=192,o.child=r.child,o=null):(r=oe.treeContext,hi=To(K.nextSibling),us=o,In=!0,ko=null,hs=!1,r!==null&&pf(o,r),o=Yl(o,m.children),o.flags|=4096);return o}return E?(Yo(),K=m.fallback,E=o.mode,oe=r.child,Me=oe.sibling,m=lo(oe,{mode:"hidden",children:m.children}),m.subtreeFlags=oe.subtreeFlags&65011712,Me!==null?K=lo(Me,K):(K=Fo(K,E,f,null),K.flags|=2),K.return=o,m.return=o,m.sibling=K,o.child=m,Ha(null,m),m=o.child,K=r.child.memoizedState,K===null?K=ga(f):(E=K.cachePool,E!==null?(oe=zt._currentValue,E=E.parent!==oe?{parent:oe,pool:oe}:E):E=Jd(),K={baseLanes:K.baseLanes|f,cachePool:E}),m.memoizedState=K,m.childLanes=Of(r,B,f),o.memoizedState=Kr,Ha(r.child,m)):(Wl(o),f=r.child,r=f.sibling,f=lo(f,{mode:"visible",children:m.children}),f.return=o,f.sibling=null,r!==null&&(B=o.deletions,B===null?(o.deletions=[r],o.flags|=16):B.push(r)),o.child=f,o.memoizedState=null,f)}function Yl(r,o){return o=eh({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function eh(r,o){return r=Ks(22,r,null,o),r.lanes=0,r}function th(r,o,f){return Vc(o,r.child,null,f),r=Yl(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function Hc(r,o,f){r.lanes|=o;var m=r.alternate;m!==null&&(m.lanes|=o),qo(r.return,o,f)}function Uf(r,o,f,m,E,A){var B=r.memoizedState;B===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:E,treeForkCount:A}:(B.isBackwards=o,B.rendering=null,B.renderingStartTime=0,B.last=m,B.tail=f,B.tailMode=E,B.treeForkCount=A)}function Lf(r,o,f){var m=o.pendingProps,E=m.revealOrder,A=m.tail;m=m.children;var B=Di.current,K=(B&2)!==0;if(K?(B=B&1|2,o.flags|=128):B&=1,De(Di,B),Oi(r,o,m,f),m=In?Gu:0,!K&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Hc(r,f,o);else if(r.tag===19)Hc(r,f,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(E){case"forwards":for(f=o.child,E=null;f!==null;)r=f.alternate,r!==null&&np(r)===null&&(E=f),f=f.sibling;f=E,f===null?(E=o.child,o.child=null):(E=f.sibling,f.sibling=null),Uf(o,!1,E,f,A,m);break;case"backwards":case"unstable_legacy-backwards":for(f=null,E=o.child,o.child=null;E!==null;){if(r=E.alternate,r!==null&&np(r)===null){o.child=E;break}r=E.sibling,E.sibling=f,f=E,E=r}Uf(o,!0,f,null,A,m);break;case"together":Uf(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function Ga(r,o,f){if(r!==null&&(o.dependencies=r.dependencies),$r|=o.lanes,(f&o.childLanes)===0)if(r!==null){if(Fl(r,o,f,!1),(f&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,f=lo(r,r.pendingProps),o.child=f,f.return=o;r.sibling!==null;)r=r.sibling,f=f.sibling=lo(r,r.pendingProps),f.return=o;f.sibling=null}return o.child}function Kl(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&ju(r)))}function Pf(r,o,f){switch(o.tag){case 3:at(o,o.stateNode.containerInfo),jo(o,zt,r.memoizedState.cache),Oc();break;case 27:case 5:bt(o);break;case 4:at(o,o.stateNode.containerInfo);break;case 10:jo(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Cg(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Wl(o),o.flags|=128,null):(f&o.child.childLanes)!==0?Qr(r,o,f):(Wl(o),r=Ga(r,o,f),r!==null?r.sibling:null);Wl(o);break;case 19:var E=(r.flags&128)!==0;if(m=(f&o.childLanes)!==0,m||(Fl(r,o,f,!1),m=(f&o.childLanes)!==0),E){if(m)return Lf(r,o,f);o.flags|=128}if(E=o.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),De(Di,Di.current),m)break;return null;case 22:return o.lanes=0,Yr(r,o,f,o.pendingProps);case 24:jo(o,zt,r.memoizedState.cache)}return Ga(r,o,f)}function yp(r,o,f){if(r!==null)if(r.memoizedProps!==o.pendingProps)vi=!0;else{if(!Kl(r,f)&&(o.flags&128)===0)return vi=!1,Pf(r,o,f);vi=(r.flags&131072)!==0}else vi=!1,In&&(o.flags&1048576)!==0&&dg(o,Gu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(r=Pc(o.elementType),o.type=r,typeof r=="function")Qs(r)?(m=As(r,m),o.tag=1,o=Ms(null,o,r,m,f)):(o.tag=0,o=$u(null,o,r,m,f));else{if(r!=null){var E=r.$$typeof;if(E===z){o.tag=11,o=If(null,o,r,m,f);break e}else if(E===P){o.tag=14,o=Df(null,o,r,m,f);break e}}throw o=de(r)||r,Error(n(306,o,""))}}return o;case 0:return $u(r,o,o.type,o.pendingProps,f);case 1:return m=o.type,E=As(m,o.pendingProps),Ms(r,o,m,E,f);case 3:e:{if(at(o,o.stateNode.containerInfo),r===null)throw Error(n(387));m=o.pendingProps;var A=o.memoizedState;E=A.element,Ag(r,o),zc(o,m,null,f);var B=o.memoizedState;if(m=B.cache,jo(o,zt,m),m!==A.cache&&Zd(o,[zt],f,!0),Ef(),m=B.element,A.isDehydrated)if(A={element:m,isDehydrated:!1,cache:B.cache},o.updateQueue.baseState=A,o.memoizedState=A,o.flags&256){o=Bn(r,o,m,f);break e}else if(m!==E){E=pr(Error(n(424)),o),mf(E),o=Bn(r,o,m,f);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(hi=To(r.firstChild),us=o,In=!0,ko=null,hs=!0,f=pv(o,null,m,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Oc(),m===E){o=Ga(r,o,f);break e}Oi(r,o,m,f)}o=o.child}return o;case 26:return ka(r,o),r===null?(f=Cw(o.type,null,o.pendingProps,null))?o.memoizedState=f:In||(f=o.type,r=o.pendingProps,m=Wv(Te.current).createElement(f),m[ln]=o,m[xi]=r,tr(m,f,r),We(m),o.stateNode=m):o.memoizedState=Cw(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return bt(o),r===null&&In&&(m=o.stateNode=Mw(o.type,o.pendingProps,Te.current),us=o,hs=!0,E=hi,lh(o.type)?(gT=E,hi=To(m.firstChild)):hi=E),Oi(r,o,o.pendingProps.children,f),ka(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&In&&((E=m=hi)&&(m=sP(m,o.type,o.pendingProps,hs),m!==null?(o.stateNode=m,us=o,hi=To(m.firstChild),hs=!1,E=!0):E=!1),E||Mn(o)),bt(o),E=o.type,A=o.pendingProps,B=r!==null?r.memoizedProps:null,m=A.children,hT(E,A)?m=null:B!==null&&hT(E,B)&&(o.flags|=32),o.memoizedState!==null&&(E=Dg(r,o,Wx,null,null,f),uy._currentValue=E),ka(r,o),Oi(r,o,m,f),o.child;case 6:return r===null&&In&&((r=f=hi)&&(f=rP(f,o.pendingProps,hs),f!==null?(o.stateNode=f,us=o,hi=null,r=!0):r=!1),r||Mn(o)),null;case 13:return Qr(r,o,f);case 4:return at(o,o.stateNode.containerInfo),m=o.pendingProps,r===null?o.child=Vc(o,null,m,f):Oi(r,o,m,f),o.child;case 11:return If(r,o,o.type,o.pendingProps,f);case 7:return Oi(r,o,o.pendingProps,f),o.child;case 8:return Oi(r,o,o.pendingProps.children,f),o.child;case 12:return Oi(r,o,o.pendingProps.children,f),o.child;case 10:return m=o.pendingProps,jo(o,o.type,m.value),Oi(r,o,m.children,f),o.child;case 9:return E=o.type._context,m=o.pendingProps.children,Uc(o),E=fs(E),m=m(E),o.flags|=1,Oi(r,o,m,f),o.child;case 14:return Df(r,o,o.type,o.pendingProps,f);case 15:return Wr(r,o,o.type,o.pendingProps,f);case 19:return Lf(r,o,f);case 31:return Nf(r,o,f);case 22:return Yr(r,o,f,o.pendingProps);case 24:return Uc(o),m=fs(zt),r===null?(E=fo(),E===null&&(E=Jn,A=_g(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=f),E=A),o.memoizedState={parent:m,cache:E},bg(o),jo(o,zt,E)):((r.lanes&f)!==0&&(Ag(r,o),zc(o,null,null,f),Ef()),E=r.memoizedState,A=o.memoizedState,E.parent!==m?(E={parent:m,cache:m},o.memoizedState=E,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=E),jo(o,zt,m)):(m=A.cache,jo(o,zt,m),m!==E.cache&&Zd(o,[zt],f,!0))),Oi(r,o,o.pendingProps.children,f),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function vr(r){r.flags|=4}function Ql(r,o,f,m,E){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(E&335544128)===E)if(r.stateNode.complete)r.flags|=8192;else if(ct())r.flags|=8192;else throw jt=_f,yf}else r.flags&=-16777217}function Zo(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Uw(o))if(ct())r.flags|=8192;else throw jt=_f,yf}function nh(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Rn():536870912,r.lanes|=o,ea|=o)}function Vf(r,o){if(!In)switch(r.tailMode){case"hidden":o=r.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?r.tail=null:f.sibling=null;break;case"collapsed":f=r.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function ni(r){var o=r.alternate!==null&&r.alternate.child===r.child,f=0,m=0;if(o)for(var E=r.child;E!==null;)f|=E.lanes|E.childLanes,m|=E.subtreeFlags&65011712,m|=E.flags&65011712,E.return=r,E=E.sibling;else for(E=r.child;E!==null;)f|=E.lanes|E.childLanes,m|=E.subtreeFlags,m|=E.flags,E.return=r,E=E.sibling;return r.subtreeFlags|=m,r.childLanes=f,o}function ty(r,o,f){var m=o.pendingProps;switch(Bl(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ni(o),null;case 1:return ni(o),null;case 3:return f=o.stateNode,m=null,r!==null&&(m=r.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),da(zt),pt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Nc(o)?vr(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,pg())),ni(o),null;case 26:var E=o.type,A=o.memoizedState;return r===null?(vr(o),A!==null?(ni(o),Zo(o,A)):(ni(o),Ql(o,E,null,m,f))):A?A!==r.memoizedState?(vr(o),ni(o),Zo(o,A)):(ni(o),o.flags&=-16777217):(r=r.memoizedProps,r!==m&&vr(o),ni(o),Ql(o,E,r,m,f)),null;case 27:if(Zt(o),f=Te.current,E=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==m&&vr(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return ni(o),null}r=Re.current,Nc(o)?Qd(o):(r=Mw(E,m,f),o.stateNode=r,vr(o))}return ni(o),null;case 5:if(Zt(o),E=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==m&&vr(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return ni(o),null}if(A=Re.current,Nc(o))Qd(o);else{var B=Wv(Te.current);switch(A){case 1:A=B.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:A=B.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":A=B.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":A=B.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":A=B.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof m.is=="string"?B.createElement("select",{is:m.is}):B.createElement("select"),m.multiple?A.multiple=!0:m.size&&(A.size=m.size);break;default:A=typeof m.is=="string"?B.createElement(E,{is:m.is}):B.createElement(E)}}A[ln]=o,A[xi]=m;e:for(B=o.child;B!==null;){if(B.tag===5||B.tag===6)A.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===o)break e;for(;B.sibling===null;){if(B.return===null||B.return===o)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}o.stateNode=A;e:switch(tr(A,E,m),E){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&vr(o)}}return ni(o),Ql(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,f),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==m&&vr(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(r=Te.current,Nc(o)){if(r=o.stateNode,f=o.memoizedProps,m=null,E=us,E!==null)switch(E.tag){case 27:case 5:m=E.memoizedProps}r[ln]=o,r=!!(r.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||mw(r.nodeValue,f)),r||Mn(o,!0)}else r=Wv(r).createTextNode(m),r[ln]=o,o.stateNode=r}return ni(o),null;case 31:if(f=o.memoizedState,r===null||r.memoizedState!==null){if(m=Nc(o),f!==null){if(r===null){if(!m)throw Error(n(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[ln]=o}else Oc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ni(o),r=!1}else f=pg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),r=!0;if(!r)return o.flags&256?(jr(o),o):(jr(o),null);if((o.flags&128)!==0)throw Error(n(558))}return ni(o),null;case 13:if(m=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(E=Nc(o),m!==null&&m.dehydrated!==null){if(r===null){if(!E)throw Error(n(318));if(E=o.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[ln]=o}else Oc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ni(o),E=!1}else E=pg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=E),E=!0;if(!E)return o.flags&256?(jr(o),o):(jr(o),null)}return jr(o),(o.flags&128)!==0?(o.lanes=f,o):(f=m!==null,r=r!==null&&r.memoizedState!==null,f&&(m=o.child,E=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(E=m.alternate.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==E&&(m.flags|=2048)),f!==r&&f&&(o.child.flags|=8192),nh(o,o.updateQueue),ni(o),null);case 4:return pt(),r===null&&aT(o.stateNode.containerInfo),ni(o),null;case 10:return da(o.type),ni(o),null;case 19:if(le(Di),m=o.memoizedState,m===null)return ni(o),null;if(E=(o.flags&128)!==0,A=m.rendering,A===null)if(E)Vf(m,!1);else{if($n!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(A=np(r),A!==null){for(o.flags|=128,Vf(m,!1),r=A.updateQueue,o.updateQueue=r,nh(o,r),o.subtreeFlags=0,r=f,f=o.child;f!==null;)Os(f,r),f=f.sibling;return De(Di,Di.current&1|2),In&&Ho(o,m.treeForkCount),o.child}r=r.sibling}m.tail!==null&&W()>ta&&(o.flags|=128,E=!0,Vf(m,!1),o.lanes=4194304)}else{if(!E)if(r=np(A),r!==null){if(o.flags|=128,E=!0,r=r.updateQueue,o.updateQueue=r,nh(o,r),Vf(m,!0),m.tail===null&&m.tailMode==="hidden"&&!A.alternate&&!In)return ni(o),null}else 2*W()-m.renderingStartTime>ta&&f!==536870912&&(o.flags|=128,E=!0,Vf(m,!1),o.lanes=4194304);m.isBackwards?(A.sibling=o.child,o.child=A):(r=m.last,r!==null?r.sibling=A:o.child=A,m.last=A)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=W(),r.sibling=null,f=Di.current,De(Di,E?f&1|2:f&1),In&&Ho(o,m.treeForkCount),r):(ni(o),null);case 22:case 23:return jr(o),Ls(),m=o.memoizedState!==null,r!==null?r.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(f&536870912)!==0&&(o.flags&128)===0&&(ni(o),o.subtreeFlags&6&&(o.flags|=8192)):ni(o),f=o.updateQueue,f!==null&&nh(o,f.retryQueue),f=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048),r!==null&&le(Hl),null;case 24:return f=null,r!==null&&(f=r.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),da(zt),ni(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function _p(r,o){switch(Bl(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return da(zt),pt(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Zt(o),null;case 31:if(o.memoizedState!==null){if(jr(o),o.alternate===null)throw Error(n(340));Oc()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(jr(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Oc()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return le(Di),null;case 4:return pt(),null;case 10:return da(o.type),null;case 22:case 23:return jr(o),Ls(),r!==null&&le(Hl),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return da(zt),null;case 25:return null;default:return null}}function kc(r,o){switch(Bl(o),o.tag){case 3:da(zt),pt();break;case 26:case 27:case 5:Zt(o);break;case 4:pt();break;case 31:o.memoizedState!==null&&jr(o);break;case 13:jr(o);break;case 19:le(Di);break;case 10:da(o.type);break;case 22:case 23:jr(o),Ls(),r!==null&&le(Hl);break;case 24:da(zt)}}function vo(r,o){try{var f=o.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var E=m.next;f=E;do{if((f.tag&r)===r){m=void 0;var A=f.create,B=f.inst;m=A(),B.destroy=m}f=f.next}while(f!==E)}}catch(K){li(o,o.return,K)}}function ya(r,o,f){try{var m=o.updateQueue,E=m!==null?m.lastEffect:null;if(E!==null){var A=E.next;m=A;do{if((m.tag&r)===r){var B=m.inst,K=B.destroy;if(K!==void 0){B.destroy=void 0,E=o;var oe=f,Me=K;try{Me()}catch(ze){li(E,oe,ze)}}}m=m.next}while(m!==A)}}catch(ze){li(o,o.return,ze)}}function Zl(r){var o=r.updateQueue;if(o!==null){var f=r.stateNode;try{Ts(o,f)}catch(m){li(r,r.return,m)}}}function ny(r,o,f){f.props=As(r.type,r.memoizedProps),f.state=r.memoizedState;try{f.componentWillUnmount()}catch(m){li(r,o,m)}}function So(r,o){try{var f=r.ref;if(f!==null){switch(r.tag){case 26:case 27:case 5:var m=r.stateNode;break;case 30:m=r.stateNode;break;default:m=r.stateNode}typeof f=="function"?r.refCleanup=f(m):f.current=m}}catch(E){li(r,o,E)}}function Zr(r,o){var f=r.ref,m=r.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(E){li(r,o,E)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(E){li(r,o,E)}else f.current=null}function Jr(r){var o=r.type,f=r.memoizedProps,m=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(E){li(r,r.return,E)}}function _a(r,o,f){try{var m=r.stateNode;JL(m,r.type,f,o),m[xi]=o}catch(E){li(r,r.return,E)}}function Ki(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&lh(r.type)||r.tag===4}function Eo(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Ki(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&lh(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function dn(r,o,f){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(r,o):(o=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,o.appendChild(r),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=ca));else if(m!==4&&(m===27&&lh(r.type)&&(f=r.stateNode,o=null),r=r.child,r!==null))for(dn(r,o,f),r=r.sibling;r!==null;)dn(r,o,f),r=r.sibling}function Xn(r,o,f){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?f.insertBefore(r,o):f.appendChild(r);else if(m!==4&&(m===27&&lh(r.type)&&(f=r.stateNode),r=r.child,r!==null))for(Xn(r,o,f),r=r.sibling;r!==null;)Xn(r,o,f),r=r.sibling}function Bi(r){var o=r.stateNode,f=r.memoizedProps;try{for(var m=r.type,E=o.attributes;E.length;)o.removeAttributeNode(E[0]);tr(o,m,f),o[ln]=r,o[xi]=f}catch(A){li(r,r.return,A)}}var va=!1,Si=!1,Jo=!1,zf=typeof WeakSet=="function"?WeakSet:Set,Ui=null;function ih(r,o){if(r=r.containerInfo,cT=e0,r=Fd(r),Pu(r)){if("selectionStart"in r)var f={start:r.selectionStart,end:r.selectionEnd};else e:{f=(f=r.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var E=m.anchorOffset,A=m.focusNode;m=m.focusOffset;try{f.nodeType,A.nodeType}catch{f=null;break e}var B=0,K=-1,oe=-1,Me=0,ze=0,Ye=r,Ie=null;t:for(;;){for(var Ue;Ye!==f||E!==0&&Ye.nodeType!==3||(K=B+E),Ye!==A||m!==0&&Ye.nodeType!==3||(oe=B+m),Ye.nodeType===3&&(B+=Ye.nodeValue.length),(Ue=Ye.firstChild)!==null;)Ie=Ye,Ye=Ue;for(;;){if(Ye===r)break t;if(Ie===f&&++Me===E&&(K=B),Ie===A&&++ze===m&&(oe=B),(Ue=Ye.nextSibling)!==null)break;Ye=Ie,Ie=Ye.parentNode}Ye=Ue}f=K===-1||oe===-1?null:{start:K,end:oe}}else f=null}f=f||{start:0,end:0}}else f=null;for(uT={focusedElem:r,selectionRange:f},e0=!1,Ui=o;Ui!==null;)if(o=Ui,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Ui=r;else for(;Ui!==null;){switch(o=Ui,A=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(f=0;f<r.length;f++)E=r[f],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&A!==null){r=void 0,f=o,E=A.memoizedProps,A=A.memoizedState,m=f.stateNode;try{var Dt=As(f.type,E);r=m.getSnapshotBeforeUpdate(Dt,A),m.__reactInternalSnapshotBeforeUpdate=r}catch(Yt){li(f,f.return,Yt)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,f=r.nodeType,f===9)dT(r);else if(f===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":dT(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=o.sibling,r!==null){r.return=o.return,Ui=r;break}Ui=o.return}}function Fv(r,o,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:$o(r,f),m&4&&vo(5,f);break;case 1:if($o(r,f),m&4)if(r=f.stateNode,o===null)try{r.componentDidMount()}catch(B){li(f,f.return,B)}else{var E=As(f.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(E,o,r.__reactInternalSnapshotBeforeUpdate)}catch(B){li(f,f.return,B)}}m&64&&Zl(f),m&512&&So(f,f.return);break;case 3:if($o(r,f),m&64&&(r=f.updateQueue,r!==null)){if(o=null,f.child!==null)switch(f.child.tag){case 27:case 5:o=f.child.stateNode;break;case 1:o=f.child.stateNode}try{Ts(r,o)}catch(B){li(f,f.return,B)}}break;case 27:o===null&&m&4&&Bi(f);case 26:case 5:$o(r,f),o===null&&m&4&&Jr(f),m&512&&So(f,f.return);break;case 12:$o(r,f);break;case 31:$o(r,f),m&4&&Sp(r,f);break;case 13:$o(r,f),m&4&&iy(r,f),m&64&&(r=f.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(f=FL.bind(null,f),aP(r,f))));break;case 22:if(m=f.memoizedState!==null||va,!m){o=o!==null&&o.memoizedState!==null||Si,E=va;var A=Si;va=m,(Si=o)&&!A?Zn(r,f,(f.subtreeFlags&8772)!==0):$o(r,f),va=E,Si=A}break;case 30:break;default:$o(r,f)}}function vp(r){var o=r.alternate;o!==null&&(r.alternate=null,vp(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Q(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Fn=null,Qi=!1;function Vs(r,o,f){for(f=f.child;f!==null;)Jl(r,o,f),f=f.sibling}function Jl(r,o,f){if(st&&typeof st.onCommitFiberUnmount=="function")try{st.onCommitFiberUnmount(Ke,f)}catch{}switch(f.tag){case 26:Si||Zr(f,o),Vs(r,o,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Si||Zr(f,o);var m=Fn,E=Qi;lh(f.type)&&(Fn=f.stateNode,Qi=!1),Vs(r,o,f),oy(f.stateNode),Fn=m,Qi=E;break;case 5:Si||Zr(f,o);case 6:if(m=Fn,E=Qi,Fn=null,Vs(r,o,f),Fn=m,Qi=E,Fn!==null)if(Qi)try{(Fn.nodeType===9?Fn.body:Fn.nodeName==="HTML"?Fn.ownerDocument.body:Fn).removeChild(f.stateNode)}catch(A){li(f,o,A)}else try{Fn.removeChild(f.stateNode)}catch(A){li(f,o,A)}break;case 18:Fn!==null&&(Qi?(r=Fn,Ew(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,f.stateNode),Dp(r)):Ew(Fn,f.stateNode));break;case 4:m=Fn,E=Qi,Fn=f.stateNode.containerInfo,Qi=!0,Vs(r,o,f),Fn=m,Qi=E;break;case 0:case 11:case 14:case 15:ya(2,f,o),Si||ya(4,f,o),Vs(r,o,f);break;case 1:Si||(Zr(f,o),m=f.stateNode,typeof m.componentWillUnmount=="function"&&ny(f,o,m)),Vs(r,o,f);break;case 21:Vs(r,o,f);break;case 22:Si=(m=Si)||f.memoizedState!==null,Vs(r,o,f),Si=m;break;default:Vs(r,o,f)}}function Sp(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Dp(r)}catch(f){li(o,o.return,f)}}}function iy(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Dp(r)}catch(f){li(o,o.return,f)}}function Hv(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new zf),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new zf),o;default:throw Error(n(435,r.tag))}}function Fi(r,o){var f=Hv(r);o.forEach(function(m){if(!f.has(m)){f.add(m);var E=HL.bind(null,r,m);m.then(E,E)}})}function zs(r,o){var f=o.deletions;if(f!==null)for(var m=0;m<f.length;m++){var E=f[m],A=r,B=o,K=B;e:for(;K!==null;){switch(K.tag){case 27:if(lh(K.type)){Fn=K.stateNode,Qi=!1;break e}break;case 5:Fn=K.stateNode,Qi=!1;break e;case 3:case 4:Fn=K.stateNode.containerInfo,Qi=!0;break e}K=K.return}if(Fn===null)throw Error(n(160));Jl(A,B,E),Fn=null,Qi=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)$l(o,r),o=o.sibling}var Sr=null;function $l(r,o){var f=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:zs(o,r),Li(r),m&4&&(ya(3,r,r.return),vo(3,r),ya(5,r,r.return));break;case 1:zs(o,r),Li(r),m&512&&(Si||f===null||Zr(f,f.return)),m&64&&va&&(r=r.updateQueue,r!==null&&(m=r.callbacks,m!==null&&(f=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var E=Sr;if(zs(o,r),Li(r),m&512&&(Si||f===null||Zr(f,f.return)),m&4){var A=f!==null?f.memoizedState:null;if(m=r.memoizedState,f===null)if(m===null)if(r.stateNode===null){e:{m=r.type,f=r.memoizedProps,E=E.ownerDocument||E;t:switch(m){case"title":A=E.getElementsByTagName("title")[0],(!A||A[cr]||A[ln]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(m),E.head.insertBefore(A,E.querySelector("head > title"))),tr(A,m,f),A[ln]=r,We(A),m=A;break e;case"link":var B=Nw("link","href",E).get(m+(f.href||""));if(B){for(var K=0;K<B.length;K++)if(A=B[K],A.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&A.getAttribute("rel")===(f.rel==null?null:f.rel)&&A.getAttribute("title")===(f.title==null?null:f.title)&&A.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){B.splice(K,1);break t}}A=E.createElement(m),tr(A,m,f),E.head.appendChild(A);break;case"meta":if(B=Nw("meta","content",E).get(m+(f.content||""))){for(K=0;K<B.length;K++)if(A=B[K],A.getAttribute("content")===(f.content==null?null:""+f.content)&&A.getAttribute("name")===(f.name==null?null:f.name)&&A.getAttribute("property")===(f.property==null?null:f.property)&&A.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&A.getAttribute("charset")===(f.charSet==null?null:f.charSet)){B.splice(K,1);break t}}A=E.createElement(m),tr(A,m,f),E.head.appendChild(A);break;default:throw Error(n(468,m))}A[ln]=r,We(A),m=A}r.stateNode=m}else Ow(E,r.type,r.stateNode);else r.stateNode=Dw(E,m,r.memoizedProps);else A!==m?(A===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):A.count--,m===null?Ow(E,r.type,r.stateNode):Dw(E,m,r.memoizedProps)):m===null&&r.stateNode!==null&&_a(r,r.memoizedProps,f.memoizedProps)}break;case 27:zs(o,r),Li(r),m&512&&(Si||f===null||Zr(f,f.return)),f!==null&&m&4&&_a(r,r.memoizedProps,f.memoizedProps);break;case 5:if(zs(o,r),Li(r),m&512&&(Si||f===null||Zr(f,f.return)),r.flags&32){E=r.stateNode;try{Ws(E,"")}catch(Dt){li(r,r.return,Dt)}}m&4&&r.stateNode!=null&&(E=r.memoizedProps,_a(r,E,f!==null?f.memoizedProps:E)),m&1024&&(Jo=!0);break;case 6:if(zs(o,r),Li(r),m&4){if(r.stateNode===null)throw Error(n(162));m=r.memoizedProps,f=r.stateNode;try{f.nodeValue=m}catch(Dt){li(r,r.return,Dt)}}break;case 3:if(Qv=null,E=Sr,Sr=Yv(o.containerInfo),zs(o,r),Sr=E,Li(r),m&4&&f!==null&&f.memoizedState.isDehydrated)try{Dp(o.containerInfo)}catch(Dt){li(r,r.return,Dt)}Jo&&(Jo=!1,kv(r));break;case 4:m=Sr,Sr=Yv(r.stateNode.containerInfo),zs(o,r),Li(r),Sr=m;break;case 12:zs(o,r),Li(r);break;case 31:zs(o,r),Li(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,Fi(r,m)));break;case 13:zs(o,r),Li(r),r.child.flags&8192&&r.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(nl=W()),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,Fi(r,m)));break;case 22:E=r.memoizedState!==null;var oe=f!==null&&f.memoizedState!==null,Me=va,ze=Si;if(va=Me||E,Si=ze||oe,zs(o,r),Si=ze,va=Me,Li(r),m&8192)e:for(o=r.stateNode,o._visibility=E?o._visibility&-2:o._visibility|1,E&&(f===null||oe||va||Si||Gc(r)),f=null,o=r;;){if(o.tag===5||o.tag===26){if(f===null){oe=f=o;try{if(A=oe.stateNode,E)B=A.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{K=oe.stateNode;var Ye=oe.memoizedProps.style,Ie=Ye!=null&&Ye.hasOwnProperty("display")?Ye.display:null;K.style.display=Ie==null||typeof Ie=="boolean"?"":(""+Ie).trim()}}catch(Dt){li(oe,oe.return,Dt)}}}else if(o.tag===6){if(f===null){oe=o;try{oe.stateNode.nodeValue=E?"":oe.memoizedProps}catch(Dt){li(oe,oe.return,Dt)}}}else if(o.tag===18){if(f===null){oe=o;try{var Ue=oe.stateNode;E?xw(Ue,!0):xw(oe.stateNode,!1)}catch(Dt){li(oe,oe.return,Dt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;f===o&&(f=null),o=o.return}f===o&&(f=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=r.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,Fi(r,f))));break;case 19:zs(o,r),Li(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,Fi(r,m)));break;case 30:break;case 21:break;default:zs(o,r),Li(r)}}function Li(r){var o=r.flags;if(o&2){try{for(var f,m=r.return;m!==null;){if(Ki(m)){f=m;break}m=m.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var E=f.stateNode,A=Eo(r);Xn(r,A,E);break;case 5:var B=f.stateNode;f.flags&32&&(Ws(B,""),f.flags&=-33);var K=Eo(r);Xn(r,K,B);break;case 3:case 4:var oe=f.stateNode.containerInfo,Me=Eo(r);dn(r,Me,oe);break;default:throw Error(n(161))}}catch(ze){li(r,r.return,ze)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function kv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;kv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function $o(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Fv(r,o.alternate,o),o=o.sibling}function Gc(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:ya(4,o,o.return),Gc(o);break;case 1:Zr(o,o.return);var f=o.stateNode;typeof f.componentWillUnmount=="function"&&ny(o,o.return,f),Gc(o);break;case 27:oy(o.stateNode);case 26:case 5:Zr(o,o.return),Gc(o);break;case 22:o.memoizedState===null&&Gc(o);break;case 30:Gc(o);break;default:Gc(o)}r=r.sibling}}function Zn(r,o,f){for(f=f&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,E=r,A=o,B=A.flags;switch(A.tag){case 0:case 11:case 15:Zn(E,A,f),vo(4,A);break;case 1:if(Zn(E,A,f),m=A,E=m.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Me){li(m,m.return,Me)}if(m=A,E=m.updateQueue,E!==null){var K=m.stateNode;try{var oe=E.shared.hiddenCallbacks;if(oe!==null)for(E.shared.hiddenCallbacks=null,E=0;E<oe.length;E++)mo(oe[E],K)}catch(Me){li(m,m.return,Me)}}f&&B&64&&Zl(A),So(A,A.return);break;case 27:Bi(A);case 26:case 5:Zn(E,A,f),f&&m===null&&B&4&&Jr(A),So(A,A.return);break;case 12:Zn(E,A,f);break;case 31:Zn(E,A,f),f&&B&4&&Sp(E,A);break;case 13:Zn(E,A,f),f&&B&4&&iy(E,A);break;case 22:A.memoizedState===null&&Zn(E,A,f),So(A,A.return);break;case 30:break;default:Zn(E,A,f)}o=o.sibling}}function Ep(r,o){var f=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==f&&(r!=null&&r.refCount++,f!=null&&xs(f))}function el(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&xs(r))}function ns(r,o,f,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Mi(r,o,f,m),o=o.sibling}function Mi(r,o,f,m){var E=o.flags;switch(o.tag){case 0:case 11:case 15:ns(r,o,f,m),E&2048&&vo(9,o);break;case 1:ns(r,o,f,m);break;case 3:ns(r,o,f,m),E&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&xs(r)));break;case 12:if(E&2048){ns(r,o,f,m),r=o.stateNode;try{var A=o.memoizedProps,B=A.id,K=A.onPostCommit;typeof K=="function"&&K(B,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(oe){li(o,o.return,oe)}}else ns(r,o,f,m);break;case 31:ns(r,o,f,m);break;case 13:ns(r,o,f,m);break;case 23:break;case 22:A=o.stateNode,B=o.alternate,o.memoizedState!==null?A._visibility&2?ns(r,o,f,m):sh(r,o):A._visibility&2?ns(r,o,f,m):(A._visibility|=2,ec(r,o,f,m,(o.subtreeFlags&10256)!==0||!1)),E&2048&&Ep(B,o);break;case 24:ns(r,o,f,m),E&2048&&el(o.alternate,o);break;default:ns(r,o,f,m)}}function ec(r,o,f,m,E){for(E=E&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var A=r,B=o,K=f,oe=m,Me=B.flags;switch(B.tag){case 0:case 11:case 15:ec(A,B,K,oe,E),vo(8,B);break;case 23:break;case 22:var ze=B.stateNode;B.memoizedState!==null?ze._visibility&2?ec(A,B,K,oe,E):sh(A,B):(ze._visibility|=2,ec(A,B,K,oe,E)),E&&Me&2048&&Ep(B.alternate,B);break;case 24:ec(A,B,K,oe,E),E&&Me&2048&&el(B.alternate,B);break;default:ec(A,B,K,oe,E)}o=o.sibling}}function sh(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var f=r,m=o,E=m.flags;switch(m.tag){case 22:sh(f,m),E&2048&&Ep(m.alternate,m);break;case 24:sh(f,m),E&2048&&el(m.alternate,m);break;default:sh(f,m)}o=o.sibling}}var Pi=8192;function jc(r,o,f){if(r.subtreeFlags&Pi)for(r=r.child;r!==null;)Hi(r,o,f),r=r.sibling}function Hi(r,o,f){switch(r.tag){case 26:jc(r,o,f),r.flags&Pi&&r.memoizedState!==null&&_P(f,Sr,r.memoizedState,r.memoizedProps);break;case 5:jc(r,o,f);break;case 3:case 4:var m=Sr;Sr=Yv(r.stateNode.containerInfo),jc(r,o,f),Sr=m;break;case 22:r.memoizedState===null&&(m=r.alternate,m!==null&&m.memoizedState!==null?(m=Pi,Pi=16777216,jc(r,o,f),Pi=m):jc(r,o,f));break;default:jc(r,o,f)}}function Er(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function $s(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var m=o[f];Ui=m,Bf(m,r)}Er(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)qc(r),r=r.sibling}function qc(r){switch(r.tag){case 0:case 11:case 15:$s(r),r.flags&2048&&ya(9,r,r.return);break;case 3:$s(r);break;case 12:$s(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,xp(r)):$s(r);break;default:$s(r)}}function xp(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var m=o[f];Ui=m,Bf(m,r)}Er(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:ya(8,o,o.return),xp(o);break;case 22:f=o.stateNode,f._visibility&2&&(f._visibility&=-3,xp(o));break;default:xp(o)}r=r.sibling}}function Bf(r,o){for(;Ui!==null;){var f=Ui;switch(f.tag){case 0:case 11:case 15:ya(8,f,o);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:xs(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,Ui=m;else e:for(f=r;Ui!==null;){m=Ui;var E=m.sibling,A=m.return;if(vp(m),m===f){Ui=null;break e}if(E!==null){E.return=A,Ui=E;break e}Ui=A}}}var Tp={getCacheForType:function(r){var o=fs(zt),f=o.data.get(r);return f===void 0&&(f=r(),o.data.set(r,f)),f},cacheSignal:function(){return fs(zt).controller.signal}},bp=typeof WeakMap=="function"?WeakMap:Map,On=0,Jn=null,pn=null,wn=0,Bt=0,bn=null,on=!1,En=!1,ri=!1,ki=0,$n=0,$r=0,tl=0,ja=0,Un=0,ea=0,qa=null,Bs=null,xr=!1,nl=0,rh=0,ta=1/0,ah=null,xo=null,wi=0,Xa=null,na=null,Sa=0,il=0,Xc=null,Ap=null,Wc=0,Yc=null;function er(){return(On&2)!==0&&wn!==0?wn&-wn:X.T!==null?nT():Ds()}function c(){if(Un===0)if((wn&536870912)===0||In){var r=ot;ot<<=1,(ot&3932160)===0&&(ot=262144),Un=r}else Un=536870912;return r=ts.current,r!==null&&(r.flags|=32),Un}function h(r,o,f){(r===Jn&&(Bt===2||Bt===9)||r.cancelPendingCommit!==null)&&(ve(r,0),U(r,wn,Un,!1)),as(r,f),((On&2)===0||r!==Jn)&&(r===Jn&&((On&2)===0&&(tl|=f),$n===4&&U(r,wn,Un,!1)),tc(r))}function g(r,o,f){if((On&6)!==0)throw Error(n(327));var m=!f&&(o&127)===0&&(o&r.expiredLanes)===0||vt(r,o),E=m?Kc(r,o):Tr(r,o,!0),A=m;do{if(E===0){En&&!m&&U(r,o,0,!1);break}else{if(f=r.current.alternate,A&&!R(f)){E=Tr(r,o,!1),A=!1;continue}if(E===2){if(A=o,r.errorRecoveryDisabledLanes&A)var B=0;else B=r.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){o=B;e:{var K=r;E=qa;var oe=K.current.memoizedState.isDehydrated;if(oe&&(ve(K,B).flags|=256),B=Tr(K,B,!1),B!==2){if(ri&&!oe){K.errorRecoveryDisabledLanes|=A,tl|=A,E=4;break e}A=Bs,Bs=E,A!==null&&(Bs===null?Bs=A:Bs.push.apply(Bs,A))}E=B}if(A=!1,E!==2)continue}}if(E===1){ve(r,0),U(r,o,0,!0);break}e:{switch(m=r,A=E,A){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:U(m,o,Un,!on);break e;case 2:Bs=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(E=nl+300-W(),10<E)){if(U(m,o,Un,!on),Fe(m,0,!0)!==0)break e;Sa=o,m.timeoutHandle=vw(x.bind(null,m,f,Bs,ah,xr,o,Un,tl,ea,on,A,"Throttled",-0,0),E);break e}x(m,f,Bs,ah,xr,o,Un,tl,ea,on,A,null,-0,0)}}break}while(!0);tc(r)}function x(r,o,f,m,E,A,B,K,oe,Me,ze,Ye,Ie,Ue){if(r.timeoutHandle=-1,Ye=o.subtreeFlags,Ye&8192||(Ye&16785408)===16785408){Ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ca},Hi(o,A,Ye);var Dt=(A&62914560)===A?nl-W():(A&4194048)===A?rh-W():0;if(Dt=vP(Ye,Dt),Dt!==null){Sa=A,r.cancelPendingCommit=Dt(Qt.bind(null,r,o,A,f,m,E,B,K,oe,ze,Ye,null,Ie,Ue)),U(r,A,B,!Me);return}}Qt(r,o,A,f,m,E,B,K,oe)}function R(r){for(var o=r;;){var f=o.tag;if((f===0||f===11||f===15)&&o.flags&16384&&(f=o.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var E=f[m],A=E.getSnapshot;E=E.value;try{if(!_i(A(),E))return!1}catch{return!1}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function U(r,o,f,m){o&=~ja,o&=~tl,r.suspendedLanes|=o,r.pingedLanes&=~o,m&&(r.warmLanes|=o),m=r.expirationTimes;for(var E=o;0<E;){var A=31-mt(E),B=1<<A;m[A]=-1,E&=~B}f!==0&&Ia(r,f,o)}function Z(){return(On&6)===0?(sy(0),!1):!0}function ae(){if(pn!==null){if(Bt===0)var r=pn.return;else r=pn,Us=Go=null,Ug(r),Gl=null,jl=0,r=pn;for(;r!==null;)kc(r.alternate,r),r=r.return;pn=null}}function ve(r,o){var f=r.timeoutHandle;f!==-1&&(r.timeoutHandle=-1,tP(f)),f=r.cancelPendingCommit,f!==null&&(r.cancelPendingCommit=null,f()),Sa=0,ae(),Jn=r,pn=f=lo(r.current,null),wn=o,Bt=0,bn=null,on=!1,En=vt(r,o),ri=!1,ea=Un=ja=tl=$r=$n=0,Bs=qa=null,xr=!1,(o&8)!==0&&(o|=o&32);var m=r.entangledLanes;if(m!==0)for(r=r.entanglements,m&=o;0<m;){var E=31-mt(m),A=1<<E;o|=r[E],m&=~A}return ki=o,Pl(),f}function He(r,o){Kt=null,X.H=wf,o===kl||o===Fa?(o=$d(),Bt=3):o===yf?(o=$d(),Bt=4):Bt=o===gp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,bn=o,pn===null&&($n=1,mp(r,pr(o,r.current)))}function ct(){var r=ts.current;return r===null?!0:(wn&4194048)===wn?pa===null:(wn&62914560)===wn||(wn&536870912)!==0?r===pa:!1}function yt(){var r=X.H;return X.H=wf,r===null?wf:r}function Et(){var r=X.A;return X.A=Tp,r}function nn(){$n=4,on||(wn&4194048)!==wn&&ts.current!==null||(En=!0),($r&134217727)===0&&(tl&134217727)===0||Jn===null||U(Jn,wn,Un,!1)}function Tr(r,o,f){var m=On;On|=2;var E=yt(),A=Et();(Jn!==r||wn!==o)&&(ah=null,ve(r,o)),o=!1;var B=$n;e:do try{if(Bt!==0&&pn!==null){var K=pn,oe=bn;switch(Bt){case 8:ae(),B=6;break e;case 3:case 2:case 9:case 6:ts.current===null&&(o=!0);var Me=Bt;if(Bt=0,bn=null,it(r,K,oe,Me),f&&En){B=0;break e}break;default:Me=Bt,Bt=0,bn=null,it(r,K,oe,Me)}}Ff(),B=$n;break}catch(ze){He(r,ze)}while(!0);return o&&r.shellSuspendCounter++,Us=Go=null,On=m,X.H=E,X.A=A,pn===null&&(Jn=null,wn=0,Pl()),B}function Ff(){for(;pn!==null;)ye(pn)}function Kc(r,o){var f=On;On|=2;var m=yt(),E=Et();Jn!==r||wn!==o?(ah=null,ta=W()+500,ve(r,o)):En=vt(r,o);e:do try{if(Bt!==0&&pn!==null){o=pn;var A=bn;t:switch(Bt){case 1:Bt=0,bn=null,it(r,o,A,1);break;case 2:case 9:if(dv(A)){Bt=0,bn=null,Ne(o);break}o=function(){Bt!==2&&Bt!==9||Jn!==r||(Bt=7),tc(r)},A.then(o,o);break e;case 3:Bt=7;break e;case 4:Bt=5;break e;case 7:dv(A)?(Bt=0,bn=null,Ne(o)):(Bt=0,bn=null,it(r,o,A,7));break;case 5:var B=null;switch(pn.tag){case 26:B=pn.memoizedState;case 5:case 27:var K=pn;if(B?Uw(B):K.stateNode.complete){Bt=0,bn=null;var oe=K.sibling;if(oe!==null)pn=oe;else{var Me=K.return;Me!==null?(pn=Me,Pt(Me)):pn=null}break t}}Bt=0,bn=null,it(r,o,A,5);break;case 6:Bt=0,bn=null,it(r,o,A,6);break;case 8:ae(),$n=6;break e;default:throw Error(n(462))}}we();break}catch(ze){He(r,ze)}while(!0);return Us=Go=null,X.H=m,X.A=E,On=f,pn!==null?0:(Jn=null,wn=0,Pl(),$n)}function we(){for(;pn!==null&&!Wt();)ye(pn)}function ye(r){var o=yp(r.alternate,r,ki);r.memoizedProps=r.pendingProps,o===null?Pt(r):pn=o}function Ne(r){var o=r,f=o.alternate;switch(o.tag){case 15:case 0:o=Ps(f,o,o.pendingProps,o.type,void 0,wn);break;case 11:o=Ps(f,o,o.pendingProps,o.type.render,o.ref,wn);break;case 5:Ug(o);default:kc(f,o),o=pn=Os(o,ki),o=yp(f,o,ki)}r.memoizedProps=r.pendingProps,o===null?Pt(r):pn=o}function it(r,o,f,m){Us=Go=null,Ug(o),Gl=null,jl=0;var E=o.return;try{if(Xr(r,E,o,f,wn)){$n=1,mp(r,pr(f,r.current)),pn=null;return}}catch(A){if(E!==null)throw pn=E,A;$n=1,mp(r,pr(f,r.current)),pn=null;return}o.flags&32768?(In||m===1?r=!0:En||(wn&536870912)!==0?r=!1:(on=r=!0,(m===2||m===9||m===3||m===6)&&(m=ts.current,m!==null&&m.tag===13&&(m.flags|=16384))),fi(o,r)):Pt(o)}function Pt(r){var o=r;do{if((o.flags&32768)!==0){fi(o,on);return}r=o.return;var f=ty(o.alternate,o,ki);if(f!==null){pn=f;return}if(o=o.sibling,o!==null){pn=o;return}pn=o=r}while(o!==null);$n===0&&($n=5)}function fi(r,o){do{var f=_p(r.alternate,r);if(f!==null){f.flags&=32767,pn=f;return}if(f=r.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!o&&(r=r.sibling,r!==null)){pn=r;return}pn=r=f}while(r!==null);$n=6,pn=null}function Qt(r,o,f,m,E,A,B,K,oe){r.cancelPendingCommit=null;do Mp();while(wi!==0);if((On&6)!==0)throw Error(n(327));if(o!==null){if(o===r.current)throw Error(n(177));if(A=o.lanes|o.childLanes,A|=qd,js(r,f,A,B,K,oe),r===Jn&&(pn=Jn=null,wn=0),na=o,Xa=r,Sa=f,il=A,Xc=E,Ap=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,kL(Pe,function(){return nw(),null})):(r.callbackNode=null,r.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=X.T,X.T=null,E=ee.p,ee.p=2,B=On,On|=4;try{ih(r,o,f)}finally{On=B,ee.p=E,X.T=m}}wi=1,Hn(),is(),kn()}}function Hn(){if(wi===1){wi=0;var r=Xa,o=na,f=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||f){f=X.T,X.T=null;var m=ee.p;ee.p=2;var E=On;On|=4;try{$l(o,r);var A=uT,B=Fd(r.containerInfo),K=A.focusedElem,oe=A.selectionRange;if(B!==K&&K&&K.ownerDocument&&Bd(K.ownerDocument.documentElement,K)){if(oe!==null&&Pu(K)){var Me=oe.start,ze=oe.end;if(ze===void 0&&(ze=Me),"selectionStart"in K)K.selectionStart=Me,K.selectionEnd=Math.min(ze,K.value.length);else{var Ye=K.ownerDocument||document,Ie=Ye&&Ye.defaultView||window;if(Ie.getSelection){var Ue=Ie.getSelection(),Dt=K.textContent.length,Yt=Math.min(oe.start,Dt),pi=oe.end===void 0?Yt:Math.min(oe.end,Dt);!Ue.extend&&Yt>pi&&(B=pi,pi=Yt,Yt=B);var _e=cg(K,Yt),ue=cg(K,pi);if(_e&&ue&&(Ue.rangeCount!==1||Ue.anchorNode!==_e.node||Ue.anchorOffset!==_e.offset||Ue.focusNode!==ue.node||Ue.focusOffset!==ue.offset)){var be=Ye.createRange();be.setStart(_e.node,_e.offset),Ue.removeAllRanges(),Yt>pi?(Ue.addRange(be),Ue.extend(ue.node,ue.offset)):(be.setEnd(ue.node,ue.offset),Ue.addRange(be))}}}}for(Ye=[],Ue=K;Ue=Ue.parentNode;)Ue.nodeType===1&&Ye.push({element:Ue,left:Ue.scrollLeft,top:Ue.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<Ye.length;K++){var Ge=Ye[K];Ge.element.scrollLeft=Ge.left,Ge.element.scrollTop=Ge.top}}e0=!!cT,uT=cT=null}finally{On=E,ee.p=m,X.T=f}}r.current=o,wi=2}}function is(){if(wi===2){wi=0;var r=Xa,o=na,f=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||f){f=X.T,X.T=null;var m=ee.p;ee.p=2;var E=On;On|=4;try{Fv(r,o.alternate,o)}finally{On=E,ee.p=m,X.T=f}}wi=3}}function kn(){if(wi===4||wi===3){wi=0,te();var r=Xa,o=na,f=Sa,m=Ap;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?wi=5:(wi=0,na=Xa=null,sl(r,r.pendingLanes));var E=r.pendingLanes;if(E===0&&(xo=null),Pr(f),o=o.stateNode,st&&typeof st.onCommitFiberRoot=="function")try{st.onCommitFiberRoot(Ke,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=X.T,E=ee.p,ee.p=2,X.T=null;try{for(var A=r.onRecoverableError,B=0;B<m.length;B++){var K=m[B];A(K.value,{componentStack:K.stack})}}finally{X.T=o,ee.p=E}}(Sa&3)!==0&&Mp(),tc(r),E=r.pendingLanes,(f&261930)!==0&&(E&42)!==0?r===Yc?Wc++:(Wc=0,Yc=r):Wc=0,sy(0)}}function sl(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,xs(o)))}function Mp(){return Hn(),is(),kn(),nw()}function nw(){if(wi!==5)return!1;var r=Xa,o=il;il=0;var f=Pr(Sa),m=X.T,E=ee.p;try{ee.p=32>f?32:f,X.T=null,f=Xc,Xc=null;var A=Xa,B=Sa;if(wi=0,na=Xa=null,Sa=0,(On&6)!==0)throw Error(n(331));var K=On;if(On|=4,qc(A.current),Mi(A,A.current,B,f),On=K,sy(0,!1),st&&typeof st.onPostCommitFiberRoot=="function")try{st.onPostCommitFiberRoot(Ke,A)}catch{}return!0}finally{ee.p=E,X.T=m,sl(r,o)}}function iw(r,o,f){o=pr(f,o),o=ey(r.stateNode,o,2),r=Wo(r,o,2),r!==null&&(as(r,2),tc(r))}function li(r,o,f){if(r.tag===3)iw(r,r,f);else for(;o!==null;){if(o.tag===3){iw(o,r,f);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(xo===null||!xo.has(m))){r=pr(f,r),f=Ju(2),m=Wo(o,f,2),m!==null&&(_r(f,m,o,r),as(m,2),tc(m));break}}o=o.return}}function $x(r,o,f){var m=r.pingCache;if(m===null){m=r.pingCache=new bp;var E=new Set;m.set(o,E)}else E=m.get(o),E===void 0&&(E=new Set,m.set(o,E));E.has(f)||(ri=!0,E.add(f),r=BL.bind(null,r,o,f),o.then(r,r))}function BL(r,o,f){var m=r.pingCache;m!==null&&m.delete(o),r.pingedLanes|=r.suspendedLanes&f,r.warmLanes&=~f,Jn===r&&(wn&f)===f&&($n===4||$n===3&&(wn&62914560)===wn&&300>W()-nl?(On&2)===0&&ve(r,0):ja|=f,ea===wn&&(ea=0)),tc(r)}function sw(r,o){o===0&&(o=Rn()),r=Vl(r,o),r!==null&&(as(r,o),tc(r))}function FL(r){var o=r.memoizedState,f=0;o!==null&&(f=o.retryLane),sw(r,f)}function HL(r,o){var f=0;switch(r.tag){case 31:case 13:var m=r.stateNode,E=r.memoizedState;E!==null&&(f=E.retryLane);break;case 19:m=r.stateNode;break;case 22:m=r.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(o),sw(r,f)}function kL(r,o){return Qe(r,o)}var Gv=null,wp=null,eT=!1,jv=!1,tT=!1,oh=0;function tc(r){r!==wp&&r.next===null&&(wp===null?Gv=wp=r:wp=wp.next=r),jv=!0,eT||(eT=!0,jL())}function sy(r,o){if(!tT&&jv){tT=!0;do for(var f=!1,m=Gv;m!==null;){if(r!==0){var E=m.pendingLanes;if(E===0)var A=0;else{var B=m.suspendedLanes,K=m.pingedLanes;A=(1<<31-mt(42|r)+1)-1,A&=E&~(B&~K),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(f=!0,lw(m,A))}else A=wn,A=Fe(m,m===Jn?A:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(A&3)===0||vt(m,A)||(f=!0,lw(m,A));m=m.next}while(f);tT=!1}}function GL(){rw()}function rw(){jv=eT=!1;var r=0;oh!==0&&eP()&&(r=oh);for(var o=W(),f=null,m=Gv;m!==null;){var E=m.next,A=aw(m,o);A===0?(m.next=null,f===null?Gv=E:f.next=E,E===null&&(wp=f)):(f=m,(r!==0||(A&3)!==0)&&(jv=!0)),m=E}wi!==0&&wi!==5||sy(r),oh!==0&&(oh=0)}function aw(r,o){for(var f=r.suspendedLanes,m=r.pingedLanes,E=r.expirationTimes,A=r.pendingLanes&-62914561;0<A;){var B=31-mt(A),K=1<<B,oe=E[B];oe===-1?((K&f)===0||(K&m)!==0)&&(E[B]=qt(K,o)):oe<=o&&(r.expiredLanes|=K),A&=~K}if(o=Jn,f=wn,f=Fe(r,r===o?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m=r.callbackNode,f===0||r===o&&(Bt===2||Bt===9)||r.cancelPendingCommit!==null)return m!==null&&m!==null&&Vt(m),r.callbackNode=null,r.callbackPriority=0;if((f&3)===0||vt(r,f)){if(o=f&-f,o===r.callbackPriority)return o;switch(m!==null&&Vt(m),Pr(f)){case 2:case 8:f=Ze;break;case 32:f=Pe;break;case 268435456:f=lt;break;default:f=Pe}return m=ow.bind(null,r),f=Qe(f,m),r.callbackPriority=o,r.callbackNode=f,o}return m!==null&&m!==null&&Vt(m),r.callbackPriority=2,r.callbackNode=null,2}function ow(r,o){if(wi!==0&&wi!==5)return r.callbackNode=null,r.callbackPriority=0,null;var f=r.callbackNode;if(Mp()&&r.callbackNode!==f)return null;var m=wn;return m=Fe(r,r===Jn?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m===0?null:(g(r,m,o),aw(r,W()),r.callbackNode!=null&&r.callbackNode===f?ow.bind(null,r):null)}function lw(r,o){if(Mp())return null;g(r,o,!0)}function jL(){nP(function(){(On&6)!==0?Qe(Oe,GL):rw()})}function nT(){if(oh===0){var r=Xo;r===0&&(r=tt,tt<<=1,(tt&261888)===0&&(tt=256)),oh=r}return oh}function cw(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Tc(""+r)}function uw(r,o){var f=o.ownerDocument.createElement("input");return f.name=o.name,f.value=o.value,r.id&&f.setAttribute("form",r.id),o.parentNode.insertBefore(f,o),r=new FormData(r),f.parentNode.removeChild(f),r}function qL(r,o,f,m,E){if(o==="submit"&&f&&f.stateNode===E){var A=cw((E[xi]||null).action),B=m.submitter;B&&(o=(o=B[xi]||null)?cw(o.formAction):B.getAttribute("formAction"),o!==null&&(A=o,B=null));var K=new Oa("action","action",null,m,E);r.push({event:K,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(oh!==0){var oe=B?uw(E,B):new FormData(E);Kg(f,{pending:!0,data:oe,method:E.method,action:A},null,oe)}}else typeof A=="function"&&(K.preventDefault(),oe=B?uw(E,B):new FormData(E),Kg(f,{pending:!0,data:oe,method:E.method,action:A},A,oe))},currentTarget:E}]})}}for(var iT=0;iT<jd.length;iT++){var sT=jd[iT],XL=sT.toLowerCase(),WL=sT[0].toUpperCase()+sT.slice(1);Ns(XL,"on"+WL)}Ns(dr,"onAnimationEnd"),Ns(ug,"onAnimationIteration"),Ns(oo,"onAnimationStart"),Ns("dblclick","onDoubleClick"),Ns("focusin","onFocus"),Ns("focusout","onBlur"),Ns(Fu,"onTransitionRun"),Ns(Ul,"onTransitionStart"),Ns(hg,"onTransitionCancel"),Ns(Gd,"onTransitionEnd"),Nt("onMouseEnter",["mouseout","mouseover"]),Nt("onMouseLeave",["mouseout","mouseover"]),Nt("onPointerEnter",["pointerout","pointerover"]),Nt("onPointerLeave",["pointerout","pointerover"]),gt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gt("onBeforeInput",["compositionend","keypress","textInput","paste"]),gt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ry="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ry));function hw(r,o){o=(o&4)!==0;for(var f=0;f<r.length;f++){var m=r[f],E=m.event;m=m.listeners;e:{var A=void 0;if(o)for(var B=m.length-1;0<=B;B--){var K=m[B],oe=K.instance,Me=K.currentTarget;if(K=K.listener,oe!==A&&E.isPropagationStopped())break e;A=K,E.currentTarget=Me;try{A(E)}catch(ze){Ll(ze)}E.currentTarget=null,A=oe}else for(B=0;B<m.length;B++){if(K=m[B],oe=K.instance,Me=K.currentTarget,K=K.listener,oe!==A&&E.isPropagationStopped())break e;A=K,E.currentTarget=Me;try{A(E)}catch(ze){Ll(ze)}E.currentTarget=null,A=oe}}}}function Dn(r,o){var f=o[No];f===void 0&&(f=o[No]=new Set);var m=r+"__bubble";f.has(m)||(fw(o,r,2,!1),f.add(m))}function rT(r,o,f){var m=0;o&&(m|=4),fw(f,r,m,o)}var qv="_reactListening"+Math.random().toString(36).slice(2);function aT(r){if(!r[qv]){r[qv]=!0,ht.forEach(function(f){f!=="selectionchange"&&(YL.has(f)||rT(f,!1,r),rT(f,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[qv]||(o[qv]=!0,rT("selectionchange",!1,o))}}function fw(r,o,f,m){switch(Hw(o)){case 2:var E=xP;break;case 8:E=TP;break;default:E=ET}f=E.bind(null,o,f,r),E=void 0,!Ml||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(E=!0),m?E!==void 0?r.addEventListener(o,f,{capture:!0,passive:E}):r.addEventListener(o,f,!0):E!==void 0?r.addEventListener(o,f,{passive:E}):r.addEventListener(o,f,!1)}function oT(r,o,f,m,E){var A=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var B=m.tag;if(B===3||B===4){var K=m.stateNode.containerInfo;if(K===E)break;if(B===4)for(B=m.return;B!==null;){var oe=B.tag;if((oe===3||oe===4)&&B.stateNode.containerInfo===E)return;B=B.return}for(;K!==null;){if(B=fe(K),B===null)return;if(oe=B.tag,oe===5||oe===6||oe===26||oe===27){m=A=B;continue e}K=K.parentNode}}m=m.return}Po(function(){var Me=A,ze=Vr(f),Ye=[];e:{var Ie=Bo.get(r);if(Ie!==void 0){var Ue=Oa,Dt=r;switch(r){case"keypress":if(to(f)===0)break e;case"keydown":case"keyup":Ue=Du;break;case"focusin":Dt="focus",Ue=Cl;break;case"focusout":Dt="blur",Ue=Cl;break;case"beforeblur":case"afterblur":Ue=Cl;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=$h;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=ef;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=N;break;case dr:case ug:case oo:Ue=nf;break;case Gd:Ue=$;break;case"scroll":case"scrollend":Ue=wl;break;case"wheel":Ue=Ce;break;case"copy":case"cut":case"paste":Ue=Ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=Pa;break;case"toggle":case"beforetoggle":Ue=an}var Yt=(o&4)!==0,pi=!Yt&&(r==="scroll"||r==="scrollend"),_e=Yt?Ie!==null?Ie+"Capture":null:Ie;Yt=[];for(var ue=Me,be;ue!==null;){var Ge=ue;if(be=Ge.stateNode,Ge=Ge.tag,Ge!==5&&Ge!==26&&Ge!==27||be===null||_e===null||(Ge=zr(ue,_e),Ge!=null&&Yt.push(ay(ue,Ge,be))),pi)break;ue=ue.return}0<Yt.length&&(Ie=new Ue(Ie,Dt,null,f,ze),Ye.push({event:Ie,listeners:Yt}))}}if((o&7)===0){e:{if(Ie=r==="mouseover"||r==="pointerover",Ue=r==="mouseout"||r==="pointerout",Ie&&f!==bc&&(Dt=f.relatedTarget||f.fromElement)&&(fe(Dt)||Dt[lr]))break e;if((Ue||Ie)&&(Ie=ze.window===ze?ze:(Ie=ze.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,Ue?(Dt=f.relatedTarget||f.toElement,Ue=Me,Dt=Dt?fe(Dt):null,Dt!==null&&(pi=a(Dt),Yt=Dt.tag,Dt!==pi||Yt!==5&&Yt!==27&&Yt!==6)&&(Dt=null)):(Ue=null,Dt=Me),Ue!==Dt)){if(Yt=$h,Ge="onMouseLeave",_e="onMouseEnter",ue="mouse",(r==="pointerout"||r==="pointerover")&&(Yt=Pa,Ge="onPointerLeave",_e="onPointerEnter",ue="pointer"),pi=Ue==null?Ie:Ae(Ue),be=Dt==null?Ie:Ae(Dt),Ie=new Yt(Ge,ue+"leave",Ue,f,ze),Ie.target=pi,Ie.relatedTarget=be,Ge=null,fe(ze)===Me&&(Yt=new Yt(_e,ue+"enter",Dt,f,ze),Yt.target=be,Yt.relatedTarget=pi,Ge=Yt),pi=Ge,Ue&&Dt)t:{for(Yt=KL,_e=Ue,ue=Dt,be=0,Ge=_e;Ge;Ge=Yt(Ge))be++;Ge=0;for(var Ht=ue;Ht;Ht=Yt(Ht))Ge++;for(;0<be-Ge;)_e=Yt(_e),be--;for(;0<Ge-be;)ue=Yt(ue),Ge--;for(;be--;){if(_e===ue||ue!==null&&_e===ue.alternate){Yt=_e;break t}_e=Yt(_e),ue=Yt(ue)}Yt=null}else Yt=null;Ue!==null&&dw(Ye,Ie,Ue,Yt,!1),Dt!==null&&pi!==null&&dw(Ye,pi,Dt,Yt,!0)}}e:{if(Ie=Me?Ae(Me):window,Ue=Ie.nodeName&&Ie.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&Ie.type==="file")var ei=ag;else if(sg(Ie))if(lf)ei=rv;else{ei=Dl;var Lt=cf}else Ue=Ie.nodeName,!Ue||Ue.toLowerCase()!=="input"||Ie.type!=="checkbox"&&Ie.type!=="radio"?Me&&bl(Me.elementType)&&(ei=ag):ei=sv;if(ei&&(ei=ei(r,Me))){zd(Ye,ei,f,ze);break e}Lt&&Lt(r,Ie,Me),r==="focusout"&&Me&&Ie.type==="number"&&Me.memoizedProps.value!=null&&Ii(Ie,"number",Ie.value)}switch(Lt=Me?Ae(Me):window,r){case"focusin":(sg(Lt)||Lt.contentEditable==="true")&&(Vu=Lt,Hd=Me,zu=null);break;case"focusout":zu=Hd=Vu=null;break;case"mousedown":Hr=!0;break;case"contextmenu":case"mouseup":case"dragend":Hr=!1,kd(Ye,f,ze);break;case"selectionchange":if(av)break;case"keydown":case"keyup":kd(Ye,f,ze)}var xn;if(Cn)e:{switch(r){case"compositionstart":var Ln="onCompositionStart";break e;case"compositionend":Ln="onCompositionEnd";break e;case"compositionupdate":Ln="onCompositionUpdate";break e}Ln=void 0}else Il?zo(r,f)&&(Ln="onCompositionEnd"):r==="keydown"&&f.keyCode===229&&(Ln="onCompositionStart");Ln&&(gi&&f.locale!=="ko"&&(Il||Ln!=="onCompositionStart"?Ln==="onCompositionEnd"&&Il&&(xn=Mc()):(eo=ze,Mu="value"in eo?eo.value:eo.textContent,Il=!0)),Lt=Xv(Me,Ln),0<Lt.length&&(Ln=new La(Ln,r,null,f,ze),Ye.push({event:Ln,listeners:Lt}),xn?Ln.data=xn:(xn=ao(f),xn!==null&&(Ln.data=xn)))),(xn=ls?Vd(r,f):tv(r,f))&&(Ln=Xv(Me,"onBeforeInput"),0<Ln.length&&(Lt=new La("onBeforeInput","beforeinput",null,f,ze),Ye.push({event:Lt,listeners:Ln}),Lt.data=xn)),qL(Ye,r,Me,f,ze)}hw(Ye,o)})}function ay(r,o,f){return{instance:r,listener:o,currentTarget:f}}function Xv(r,o){for(var f=o+"Capture",m=[];r!==null;){var E=r,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=zr(r,f),E!=null&&m.unshift(ay(r,E,A)),E=zr(r,o),E!=null&&m.push(ay(r,E,A))),r.tag===3)return m;r=r.return}return[]}function KL(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function dw(r,o,f,m,E){for(var A=o._reactName,B=[];f!==null&&f!==m;){var K=f,oe=K.alternate,Me=K.stateNode;if(K=K.tag,oe!==null&&oe===m)break;K!==5&&K!==26&&K!==27||Me===null||(oe=Me,E?(Me=zr(f,A),Me!=null&&B.unshift(ay(f,Me,oe))):E||(Me=zr(f,A),Me!=null&&B.push(ay(f,Me,oe)))),f=f.return}B.length!==0&&r.push({event:o,listeners:B})}var QL=/\r\n?/g,ZL=/\u0000|\uFFFD/g;function pw(r){return(typeof r=="string"?r:""+r).replace(QL,`
`).replace(ZL,"")}function mw(r,o){return o=pw(o),pw(r)===o}function di(r,o,f,m,E,A){switch(f){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Ws(r,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Ws(r,""+m);break;case"className":gn(r,"class",m);break;case"tabIndex":gn(r,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":gn(r,f,m);break;case"style":Au(r,m,A);break;case"data":if(o!=="object"){gn(r,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||f!=="href")){r.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(f);break}m=Tc(""+m),r.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){r.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(f==="formAction"?(o!=="input"&&di(r,o,"name",E.name,E,null),di(r,o,"formEncType",E.formEncType,E,null),di(r,o,"formMethod",E.formMethod,E,null),di(r,o,"formTarget",E.formTarget,E,null)):(di(r,o,"encType",E.encType,E,null),di(r,o,"method",E.method,E,null),di(r,o,"target",E.target,E,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(f);break}m=Tc(""+m),r.setAttribute(f,m);break;case"onClick":m!=null&&(r.onclick=ca);break;case"onScroll":m!=null&&Dn("scroll",r);break;case"onScrollEnd":m!=null&&Dn("scrollend",r);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(f=m.__html,f!=null){if(E.children!=null)throw Error(n(60));r.innerHTML=f}}break;case"multiple":r.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":r.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){r.removeAttribute("xlink:href");break}f=Tc(""+m),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(f,""+m):r.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(f,""):r.removeAttribute(f);break;case"capture":case"download":m===!0?r.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(f,m):r.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?r.setAttribute(f,m):r.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?r.removeAttribute(f):r.setAttribute(f,m);break;case"popover":Dn("beforetoggle",r),Dn("toggle",r),Qn(r,"popover",m);break;case"xlinkActuate":Xt(r,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Xt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Xt(r,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Xt(r,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Xt(r,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Xt(r,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Xt(r,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Xt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Xt(r,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Qn(r,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Jh.get(f)||f,Qn(r,f,m))}}function lT(r,o,f,m,E,A){switch(f){case"style":Au(r,m,A);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(f=m.__html,f!=null){if(E.children!=null)throw Error(n(60));r.innerHTML=f}}break;case"children":typeof m=="string"?Ws(r,m):(typeof m=="number"||typeof m=="bigint")&&Ws(r,""+m);break;case"onScroll":m!=null&&Dn("scroll",r);break;case"onScrollEnd":m!=null&&Dn("scrollend",r);break;case"onClick":m!=null&&(r.onclick=ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xt.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(E=f.endsWith("Capture"),o=f.slice(2,E?f.length-7:void 0),A=r[xi]||null,A=A!=null?A[f]:null,typeof A=="function"&&r.removeEventListener(o,A,E),typeof m=="function")){typeof A!="function"&&A!==null&&(f in r?r[f]=null:r.hasAttribute(f)&&r.removeAttribute(f)),r.addEventListener(o,m,E);break e}f in r?r[f]=m:m===!0?r.setAttribute(f,""):Qn(r,f,m)}}}function tr(r,o,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dn("error",r),Dn("load",r);var m=!1,E=!1,A;for(A in f)if(f.hasOwnProperty(A)){var B=f[A];if(B!=null)switch(A){case"src":m=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:di(r,o,A,B,f,null)}}E&&di(r,o,"srcSet",f.srcSet,f,null),m&&di(r,o,"src",f.src,f,null);return;case"input":Dn("invalid",r);var K=A=B=E=null,oe=null,Me=null;for(m in f)if(f.hasOwnProperty(m)){var ze=f[m];if(ze!=null)switch(m){case"name":E=ze;break;case"type":B=ze;break;case"checked":oe=ze;break;case"defaultChecked":Me=ze;break;case"value":A=ze;break;case"defaultValue":K=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(n(137,o));break;default:di(r,o,m,ze,f,null)}}os(r,A,K,oe,Me,B,E,!1);return;case"select":Dn("invalid",r),m=B=A=null;for(E in f)if(f.hasOwnProperty(E)&&(K=f[E],K!=null))switch(E){case"value":A=K;break;case"defaultValue":B=K;break;case"multiple":m=K;default:di(r,o,E,K,f,null)}o=A,f=B,r.multiple=!!m,o!=null?Ti(r,!!m,o,!1):f!=null&&Ti(r,!!m,f,!0);return;case"textarea":Dn("invalid",r),A=E=m=null;for(B in f)if(f.hasOwnProperty(B)&&(K=f[B],K!=null))switch(B){case"value":m=K;break;case"defaultValue":E=K;break;case"children":A=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(91));break;default:di(r,o,B,K,f,null)}Vi(r,m,E,A);return;case"option":for(oe in f)if(f.hasOwnProperty(oe)&&(m=f[oe],m!=null))switch(oe){case"selected":r.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:di(r,o,oe,m,f,null)}return;case"dialog":Dn("beforetoggle",r),Dn("toggle",r),Dn("cancel",r),Dn("close",r);break;case"iframe":case"object":Dn("load",r);break;case"video":case"audio":for(m=0;m<ry.length;m++)Dn(ry[m],r);break;case"image":Dn("error",r),Dn("load",r);break;case"details":Dn("toggle",r);break;case"embed":case"source":case"link":Dn("error",r),Dn("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Me in f)if(f.hasOwnProperty(Me)&&(m=f[Me],m!=null))switch(Me){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:di(r,o,Me,m,f,null)}return;default:if(bl(o)){for(ze in f)f.hasOwnProperty(ze)&&(m=f[ze],m!==void 0&&lT(r,o,ze,m,f,void 0));return}}for(K in f)f.hasOwnProperty(K)&&(m=f[K],m!=null&&di(r,o,K,m,f,null))}function JL(r,o,f,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,B=null,K=null,oe=null,Me=null,ze=null;for(Ue in f){var Ye=f[Ue];if(f.hasOwnProperty(Ue)&&Ye!=null)switch(Ue){case"checked":break;case"value":break;case"defaultValue":oe=Ye;default:m.hasOwnProperty(Ue)||di(r,o,Ue,null,m,Ye)}}for(var Ie in m){var Ue=m[Ie];if(Ye=f[Ie],m.hasOwnProperty(Ie)&&(Ue!=null||Ye!=null))switch(Ie){case"type":A=Ue;break;case"name":E=Ue;break;case"checked":Me=Ue;break;case"defaultChecked":ze=Ue;break;case"value":B=Ue;break;case"defaultValue":K=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(n(137,o));break;default:Ue!==Ye&&di(r,o,Ie,Ue,m,Ye)}}Wi(r,B,K,oe,Me,ze,A,E);return;case"select":Ue=B=K=Ie=null;for(A in f)if(oe=f[A],f.hasOwnProperty(A)&&oe!=null)switch(A){case"value":break;case"multiple":Ue=oe;default:m.hasOwnProperty(A)||di(r,o,A,null,m,oe)}for(E in m)if(A=m[E],oe=f[E],m.hasOwnProperty(E)&&(A!=null||oe!=null))switch(E){case"value":Ie=A;break;case"defaultValue":K=A;break;case"multiple":B=A;default:A!==oe&&di(r,o,E,A,m,oe)}o=K,f=B,m=Ue,Ie!=null?Ti(r,!!f,Ie,!1):!!m!=!!f&&(o!=null?Ti(r,!!f,o,!0):Ti(r,!!f,f?[]:"",!1));return;case"textarea":Ue=Ie=null;for(K in f)if(E=f[K],f.hasOwnProperty(K)&&E!=null&&!m.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:di(r,o,K,null,m,E)}for(B in m)if(E=m[B],A=f[B],m.hasOwnProperty(B)&&(E!=null||A!=null))switch(B){case"value":Ie=E;break;case"defaultValue":Ue=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(n(91));break;default:E!==A&&di(r,o,B,E,m,A)}Oo(r,Ie,Ue);return;case"option":for(var Dt in f)if(Ie=f[Dt],f.hasOwnProperty(Dt)&&Ie!=null&&!m.hasOwnProperty(Dt))switch(Dt){case"selected":r.selected=!1;break;default:di(r,o,Dt,null,m,Ie)}for(oe in m)if(Ie=m[oe],Ue=f[oe],m.hasOwnProperty(oe)&&Ie!==Ue&&(Ie!=null||Ue!=null))switch(oe){case"selected":r.selected=Ie&&typeof Ie!="function"&&typeof Ie!="symbol";break;default:di(r,o,oe,Ie,m,Ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Yt in f)Ie=f[Yt],f.hasOwnProperty(Yt)&&Ie!=null&&!m.hasOwnProperty(Yt)&&di(r,o,Yt,null,m,Ie);for(Me in m)if(Ie=m[Me],Ue=f[Me],m.hasOwnProperty(Me)&&Ie!==Ue&&(Ie!=null||Ue!=null))switch(Me){case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(n(137,o));break;default:di(r,o,Me,Ie,m,Ue)}return;default:if(bl(o)){for(var pi in f)Ie=f[pi],f.hasOwnProperty(pi)&&Ie!==void 0&&!m.hasOwnProperty(pi)&&lT(r,o,pi,void 0,m,Ie);for(ze in m)Ie=m[ze],Ue=f[ze],!m.hasOwnProperty(ze)||Ie===Ue||Ie===void 0&&Ue===void 0||lT(r,o,ze,Ie,m,Ue);return}}for(var _e in f)Ie=f[_e],f.hasOwnProperty(_e)&&Ie!=null&&!m.hasOwnProperty(_e)&&di(r,o,_e,null,m,Ie);for(Ye in m)Ie=m[Ye],Ue=f[Ye],!m.hasOwnProperty(Ye)||Ie===Ue||Ie==null&&Ue==null||di(r,o,Ye,Ie,m,Ue)}function gw(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $L(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,f=performance.getEntriesByType("resource"),m=0;m<f.length;m++){var E=f[m],A=E.transferSize,B=E.initiatorType,K=E.duration;if(A&&K&&gw(B)){for(B=0,K=E.responseEnd,m+=1;m<f.length;m++){var oe=f[m],Me=oe.startTime;if(Me>K)break;var ze=oe.transferSize,Ye=oe.initiatorType;ze&&gw(Ye)&&(oe=oe.responseEnd,B+=ze*(oe<K?1:(K-Me)/(oe-Me)))}if(--m,o+=8*(A+B)/(E.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var cT=null,uT=null;function Wv(r){return r.nodeType===9?r:r.ownerDocument}function yw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _w(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function hT(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var fT=null;function eP(){var r=window.event;return r&&r.type==="popstate"?r===fT?!1:(fT=r,!0):(fT=null,!1)}var vw=typeof setTimeout=="function"?setTimeout:void 0,tP=typeof clearTimeout=="function"?clearTimeout:void 0,Sw=typeof Promise=="function"?Promise:void 0,nP=typeof queueMicrotask=="function"?queueMicrotask:typeof Sw<"u"?function(r){return Sw.resolve(null).then(r).catch(iP)}:vw;function iP(r){setTimeout(function(){throw r})}function lh(r){return r==="head"}function Ew(r,o){var f=o,m=0;do{var E=f.nextSibling;if(r.removeChild(f),E&&E.nodeType===8)if(f=E.data,f==="/$"||f==="/&"){if(m===0){r.removeChild(E),Dp(o);return}m--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")m++;else if(f==="html")oy(r.ownerDocument.documentElement);else if(f==="head"){f=r.ownerDocument.head,oy(f);for(var A=f.firstChild;A;){var B=A.nextSibling,K=A.nodeName;A[cr]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&A.rel.toLowerCase()==="stylesheet"||f.removeChild(A),A=B}}else f==="body"&&oy(r.ownerDocument.body);f=E}while(f);Dp(o)}function xw(r,o){var f=r;r=0;do{var m=f.nextSibling;if(f.nodeType===1?o?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(o?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),m&&m.nodeType===8)if(f=m.data,f==="/$"){if(r===0)break;r--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||r++;f=m}while(f)}function dT(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var f=o;switch(o=o.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":dT(f),Q(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}r.removeChild(f)}}function sP(r,o,f,m){for(;r.nodeType===1;){var E=f;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(m){if(!r[cr])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(A=r.getAttribute("rel"),A==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(A!==E.rel||r.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||r.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||r.getAttribute("title")!==(E.title==null?null:E.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(A=r.getAttribute("src"),(A!==(E.src==null?null:E.src)||r.getAttribute("type")!==(E.type==null?null:E.type)||r.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&r.getAttribute("name")===A)return r}else return r;if(r=To(r.nextSibling),r===null)break}return null}function rP(r,o,f){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!f||(r=To(r.nextSibling),r===null))return null;return r}function Tw(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=To(r.nextSibling),r===null))return null;return r}function pT(r){return r.data==="$?"||r.data==="$~"}function mT(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function aP(r,o){var f=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||f.readyState!=="loading")o();else{var m=function(){o(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),r._reactRetry=m}}function To(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var gT=null;function bw(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var f=r.data;if(f==="/$"||f==="/&"){if(o===0)return To(r.nextSibling);o--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||o++}r=r.nextSibling}return null}function Aw(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var f=r.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(o===0)return r;o--}else f!=="/$"&&f!=="/&"||o++}r=r.previousSibling}return null}function Mw(r,o,f){switch(o=Wv(f),r){case"html":if(r=o.documentElement,!r)throw Error(n(452));return r;case"head":if(r=o.head,!r)throw Error(n(453));return r;case"body":if(r=o.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function oy(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Q(r)}var bo=new Map,ww=new Set;function Yv(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Qc=ee.d;ee.d={f:oP,r:lP,D:cP,C:uP,L:hP,m:fP,X:pP,S:dP,M:mP};function oP(){var r=Qc.f(),o=Z();return r||o}function lP(r){var o=Ee(r);o!==null&&o.tag===5&&o.type==="form"?Qg(o):Qc.r(r)}var Rp=typeof document>"u"?null:document;function Rw(r,o,f){var m=Rp;if(m&&typeof o=="string"&&o){var E=Sn(o);E='link[rel="'+r+'"][href="'+E+'"]',typeof f=="string"&&(E+='[crossorigin="'+f+'"]'),ww.has(E)||(ww.add(E),r={rel:r,crossOrigin:f,href:o},m.querySelector(E)===null&&(o=m.createElement("link"),tr(o,"link",r),We(o),m.head.appendChild(o)))}}function cP(r){Qc.D(r),Rw("dns-prefetch",r,null)}function uP(r,o){Qc.C(r,o),Rw("preconnect",r,o)}function hP(r,o,f){Qc.L(r,o,f);var m=Rp;if(m&&r&&o){var E='link[rel="preload"][as="'+Sn(o)+'"]';o==="image"&&f&&f.imageSrcSet?(E+='[imagesrcset="'+Sn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(E+='[imagesizes="'+Sn(f.imageSizes)+'"]')):E+='[href="'+Sn(r)+'"]';var A=E;switch(o){case"style":A=Cp(r);break;case"script":A=Ip(r)}bo.has(A)||(r=_({rel:"preload",href:o==="image"&&f&&f.imageSrcSet?void 0:r,as:o},f),bo.set(A,r),m.querySelector(E)!==null||o==="style"&&m.querySelector(ly(A))||o==="script"&&m.querySelector(cy(A))||(o=m.createElement("link"),tr(o,"link",r),We(o),m.head.appendChild(o)))}}function fP(r,o){Qc.m(r,o);var f=Rp;if(f&&r){var m=o&&typeof o.as=="string"?o.as:"script",E='link[rel="modulepreload"][as="'+Sn(m)+'"][href="'+Sn(r)+'"]',A=E;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Ip(r)}if(!bo.has(A)&&(r=_({rel:"modulepreload",href:r},o),bo.set(A,r),f.querySelector(E)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(cy(A)))return}m=f.createElement("link"),tr(m,"link",r),We(m),f.head.appendChild(m)}}}function dP(r,o,f){Qc.S(r,o,f);var m=Rp;if(m&&r){var E=me(m).hoistableStyles,A=Cp(r);o=o||"default";var B=E.get(A);if(!B){var K={loading:0,preload:null};if(B=m.querySelector(ly(A)))K.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":o},f),(f=bo.get(A))&&yT(r,f);var oe=B=m.createElement("link");We(oe),tr(oe,"link",r),oe._p=new Promise(function(Me,ze){oe.onload=Me,oe.onerror=ze}),oe.addEventListener("load",function(){K.loading|=1}),oe.addEventListener("error",function(){K.loading|=2}),K.loading|=4,Kv(B,o,m)}B={type:"stylesheet",instance:B,count:1,state:K},E.set(A,B)}}}function pP(r,o){Qc.X(r,o);var f=Rp;if(f&&r){var m=me(f).hoistableScripts,E=Ip(r),A=m.get(E);A||(A=f.querySelector(cy(E)),A||(r=_({src:r,async:!0},o),(o=bo.get(E))&&_T(r,o),A=f.createElement("script"),We(A),tr(A,"link",r),f.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(E,A))}}function mP(r,o){Qc.M(r,o);var f=Rp;if(f&&r){var m=me(f).hoistableScripts,E=Ip(r),A=m.get(E);A||(A=f.querySelector(cy(E)),A||(r=_({src:r,async:!0,type:"module"},o),(o=bo.get(E))&&_T(r,o),A=f.createElement("script"),We(A),tr(A,"link",r),f.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(E,A))}}function Cw(r,o,f,m){var E=(E=Te.current)?Yv(E):null;if(!E)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(o=Cp(f.href),f=me(E).hoistableStyles,m=f.get(o),m||(m={type:"style",instance:null,count:0,state:null},f.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){r=Cp(f.href);var A=me(E).hoistableStyles,B=A.get(r);if(B||(E=E.ownerDocument||E,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(r,B),(A=E.querySelector(ly(r)))&&!A._p&&(B.instance=A,B.state.loading=5),bo.has(r)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},bo.set(r,f),A||gP(E,r,f,B.state))),o&&m===null)throw Error(n(528,""));return B}if(o&&m!==null)throw Error(n(529,""));return null;case"script":return o=f.async,f=f.src,typeof f=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ip(f),f=me(E).hoistableScripts,m=f.get(o),m||(m={type:"script",instance:null,count:0,state:null},f.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function Cp(r){return'href="'+Sn(r)+'"'}function ly(r){return'link[rel="stylesheet"]['+r+"]"}function Iw(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function gP(r,o,f,m){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=r.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),tr(o,"link",f),We(o),r.head.appendChild(o))}function Ip(r){return'[src="'+Sn(r)+'"]'}function cy(r){return"script[async]"+r}function Dw(r,o,f){if(o.count++,o.instance===null)switch(o.type){case"style":var m=r.querySelector('style[data-href~="'+Sn(f.href)+'"]');if(m)return o.instance=m,We(m),m;var E=_({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(r.ownerDocument||r).createElement("style"),We(m),tr(m,"style",E),Kv(m,f.precedence,r),o.instance=m;case"stylesheet":E=Cp(f.href);var A=r.querySelector(ly(E));if(A)return o.state.loading|=4,o.instance=A,We(A),A;m=Iw(f),(E=bo.get(E))&&yT(m,E),A=(r.ownerDocument||r).createElement("link"),We(A);var B=A;return B._p=new Promise(function(K,oe){B.onload=K,B.onerror=oe}),tr(A,"link",m),o.state.loading|=4,Kv(A,f.precedence,r),o.instance=A;case"script":return A=Ip(f.src),(E=r.querySelector(cy(A)))?(o.instance=E,We(E),E):(m=f,(E=bo.get(A))&&(m=_({},f),_T(m,E)),r=r.ownerDocument||r,E=r.createElement("script"),We(E),tr(E,"link",m),r.head.appendChild(E),o.instance=E);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,Kv(m,f.precedence,r));return o.instance}function Kv(r,o,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=m.length?m[m.length-1]:null,A=E,B=0;B<m.length;B++){var K=m[B];if(K.dataset.precedence===o)A=K;else if(A!==E)break}A?A.parentNode.insertBefore(r,A.nextSibling):(o=f.nodeType===9?f.head:f,o.insertBefore(r,o.firstChild))}function yT(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function _T(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Qv=null;function Nw(r,o,f){if(Qv===null){var m=new Map,E=Qv=new Map;E.set(f,m)}else E=Qv,m=E.get(f),m||(m=new Map,E.set(f,m));if(m.has(r))return m;for(m.set(r,null),f=f.getElementsByTagName(r),E=0;E<f.length;E++){var A=f[E];if(!(A[cr]||A[ln]||r==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var B=A.getAttribute(o)||"";B=r+B;var K=m.get(B);K?K.push(A):m.set(B,[A])}}return m}function Ow(r,o,f){r=r.ownerDocument||r,r.head.insertBefore(f,o==="title"?r.querySelector("head > title"):null)}function yP(r,o,f){if(f===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Uw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function _P(r,o,f,m){if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var E=Cp(m.href),A=o.querySelector(ly(E));if(A){o=A._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=Zv.bind(r),o.then(r,r)),f.state.loading|=4,f.instance=A,We(A);return}A=o.ownerDocument||o,m=Iw(m),(E=bo.get(E))&&yT(m,E),A=A.createElement("link"),We(A);var B=A;B._p=new Promise(function(K,oe){B.onload=K,B.onerror=oe}),tr(A,"link",m),f.instance=A}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(f,o),(o=f.state.preload)&&(f.state.loading&3)===0&&(r.count++,f=Zv.bind(r),o.addEventListener("load",f),o.addEventListener("error",f))}}var vT=0;function vP(r,o){return r.stylesheets&&r.count===0&&$v(r,r.stylesheets),0<r.count||0<r.imgCount?function(f){var m=setTimeout(function(){if(r.stylesheets&&$v(r,r.stylesheets),r.unsuspend){var A=r.unsuspend;r.unsuspend=null,A()}},6e4+o);0<r.imgBytes&&vT===0&&(vT=62500*$L());var E=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&$v(r,r.stylesheets),r.unsuspend)){var A=r.unsuspend;r.unsuspend=null,A()}},(r.imgBytes>vT?50:800)+o);return r.unsuspend=f,function(){r.unsuspend=null,clearTimeout(m),clearTimeout(E)}}:null}function Zv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$v(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Jv=null;function $v(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Jv=new Map,o.forEach(SP,r),Jv=null,Zv.call(r))}function SP(r,o){if(!(o.state.loading&4)){var f=Jv.get(r);if(f)var m=f.get(null);else{f=new Map,Jv.set(r,f);for(var E=r.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var B=E[A];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(f.set(B.dataset.precedence,B),m=B)}m&&f.set(null,m)}E=o.instance,B=E.getAttribute("data-precedence"),A=f.get(B)||m,A===m&&f.set(null,E),f.set(B,E),this.count++,m=Zv.bind(this),E.addEventListener("load",m),E.addEventListener("error",m),A?A.parentNode.insertBefore(E,A.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(E,r.firstChild)),o.state.loading|=4}}var uy={$$typeof:V,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function EP(r,o,f,m,E,A,B,K,oe){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sn(0),this.hiddenUpdates=sn(null),this.identifierPrefix=m,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=oe,this.incompleteTransitions=new Map}function Lw(r,o,f,m,E,A,B,K,oe,Me,ze,Ye){return r=new EP(r,o,f,B,oe,Me,ze,Ye,K),o=1,A===!0&&(o|=24),A=Ks(3,null,null,o),r.current=A,A.stateNode=r,o=_g(),o.refCount++,r.pooledCache=o,o.refCount++,A.memoizedState={element:m,isDehydrated:f,cache:o},bg(A),r}function Pw(r){return r?(r=zl,r):zl}function Vw(r,o,f,m,E,A){E=Pw(E),m.context===null?m.context=E:m.pendingContext=E,m=po(o),m.payload={element:f},A=A===void 0?null:A,A!==null&&(m.callback=A),f=Wo(r,m,o),f!==null&&(h(f,r,o),Xl(f,r,o))}function zw(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var f=r.retryLane;r.retryLane=f!==0&&f<o?f:o}}function ST(r,o){zw(r,o),(r=r.alternate)&&zw(r,o)}function Bw(r){if(r.tag===13||r.tag===31){var o=Vl(r,67108864);o!==null&&h(o,r,67108864),ST(r,67108864)}}function Fw(r){if(r.tag===13||r.tag===31){var o=er();o=Ss(o);var f=Vl(r,o);f!==null&&h(f,r,o),ST(r,o)}}var e0=!0;function xP(r,o,f,m){var E=X.T;X.T=null;var A=ee.p;try{ee.p=2,ET(r,o,f,m)}finally{ee.p=A,X.T=E}}function TP(r,o,f,m){var E=X.T;X.T=null;var A=ee.p;try{ee.p=8,ET(r,o,f,m)}finally{ee.p=A,X.T=E}}function ET(r,o,f,m){if(e0){var E=xT(m);if(E===null)oT(r,o,m,t0,f),kw(r,m);else if(AP(E,r,o,f,m))m.stopPropagation();else if(kw(r,m),o&4&&-1<bP.indexOf(r)){for(;E!==null;){var A=Ee(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var B=et(A.pendingLanes);if(B!==0){var K=A;for(K.pendingLanes|=2,K.entangledLanes|=2;B;){var oe=1<<31-mt(B);K.entanglements[1]|=oe,B&=~oe}tc(A),(On&6)===0&&(ta=W()+500,sy(0))}}break;case 31:case 13:K=Vl(A,2),K!==null&&h(K,A,2),Z(),ST(A,2)}if(A=xT(m),A===null&&oT(r,o,m,t0,f),A===E)break;E=A}E!==null&&m.stopPropagation()}else oT(r,o,m,null,f)}}function xT(r){return r=Vr(r),TT(r)}var t0=null;function TT(r){if(t0=null,r=fe(r),r!==null){var o=a(r);if(o===null)r=null;else{var f=o.tag;if(f===13){if(r=l(o),r!==null)return r;r=null}else if(f===31){if(r=u(o),r!==null)return r;r=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return t0=r,null}function Hw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case Oe:return 2;case Ze:return 8;case Pe:case It:return 32;case lt:return 268435456;default:return 32}default:return 32}}var bT=!1,ch=null,uh=null,hh=null,hy=new Map,fy=new Map,fh=[],bP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kw(r,o){switch(r){case"focusin":case"focusout":ch=null;break;case"dragenter":case"dragleave":uh=null;break;case"mouseover":case"mouseout":hh=null;break;case"pointerover":case"pointerout":hy.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":fy.delete(o.pointerId)}}function dy(r,o,f,m,E,A){return r===null||r.nativeEvent!==A?(r={blockedOn:o,domEventName:f,eventSystemFlags:m,nativeEvent:A,targetContainers:[E]},o!==null&&(o=Ee(o),o!==null&&Bw(o)),r):(r.eventSystemFlags|=m,o=r.targetContainers,E!==null&&o.indexOf(E)===-1&&o.push(E),r)}function AP(r,o,f,m,E){switch(o){case"focusin":return ch=dy(ch,r,o,f,m,E),!0;case"dragenter":return uh=dy(uh,r,o,f,m,E),!0;case"mouseover":return hh=dy(hh,r,o,f,m,E),!0;case"pointerover":var A=E.pointerId;return hy.set(A,dy(hy.get(A)||null,r,o,f,m,E)),!0;case"gotpointercapture":return A=E.pointerId,fy.set(A,dy(fy.get(A)||null,r,o,f,m,E)),!0}return!1}function Gw(r){var o=fe(r.target);if(o!==null){var f=a(o);if(f!==null){if(o=f.tag,o===13){if(o=l(f),o!==null){r.blockedOn=o,Ci(r.priority,function(){Fw(f)});return}}else if(o===31){if(o=u(f),o!==null){r.blockedOn=o,Ci(r.priority,function(){Fw(f)});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){r.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}r.blockedOn=null}function n0(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var f=xT(r.nativeEvent);if(f===null){f=r.nativeEvent;var m=new f.constructor(f.type,f);bc=m,f.target.dispatchEvent(m),bc=null}else return o=Ee(f),o!==null&&Bw(o),r.blockedOn=f,!1;o.shift()}return!0}function jw(r,o,f){n0(r)&&f.delete(o)}function MP(){bT=!1,ch!==null&&n0(ch)&&(ch=null),uh!==null&&n0(uh)&&(uh=null),hh!==null&&n0(hh)&&(hh=null),hy.forEach(jw),fy.forEach(jw)}function i0(r,o){r.blockedOn===o&&(r.blockedOn=null,bT||(bT=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,MP)))}var s0=null;function qw(r){s0!==r&&(s0=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){s0===r&&(s0=null);for(var o=0;o<r.length;o+=3){var f=r[o],m=r[o+1],E=r[o+2];if(typeof m!="function"){if(TT(m||f)===null)continue;break}var A=Ee(f);A!==null&&(r.splice(o,3),o-=3,Kg(A,{pending:!0,data:E,method:f.method,action:m},m,E))}}))}function Dp(r){function o(oe){return i0(oe,r)}ch!==null&&i0(ch,r),uh!==null&&i0(uh,r),hh!==null&&i0(hh,r),hy.forEach(o),fy.forEach(o);for(var f=0;f<fh.length;f++){var m=fh[f];m.blockedOn===r&&(m.blockedOn=null)}for(;0<fh.length&&(f=fh[0],f.blockedOn===null);)Gw(f),f.blockedOn===null&&fh.shift();if(f=(r.ownerDocument||r).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var E=f[m],A=f[m+1],B=E[xi]||null;if(typeof A=="function")B||qw(f);else if(B){var K=null;if(A&&A.hasAttribute("formAction")){if(E=A,B=A[xi]||null)K=B.formAction;else if(TT(E)!==null)continue}else K=B.action;typeof K=="function"?f[m+1]=K:(f.splice(m,3),m-=3),qw(f)}}}function Xw(){function r(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(B){return E=B})},focusReset:"manual",scroll:"manual"})}function o(){E!==null&&(E(),E=null),m||setTimeout(f,20)}function f(){if(!m&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,E=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(f,100),function(){m=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),E!==null&&(E(),E=null)}}}function AT(r){this._internalRoot=r}r0.prototype.render=AT.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));var f=o.current,m=er();Vw(f,m,r,o,null,null)},r0.prototype.unmount=AT.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Vw(r.current,2,null,r,null,null),Z(),o[lr]=null}};function r0(r){this._internalRoot=r}r0.prototype.unstable_scheduleHydration=function(r){if(r){var o=Ds();r={blockedOn:null,target:r,priority:o};for(var f=0;f<fh.length&&o!==0&&o<fh[f].priority;f++);fh.splice(f,0,r),f===0&&Gw(r)}};var Ww=e.version;if(Ww!=="19.2.0")throw Error(n(527,Ww,"19.2.0"));ee.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=p(o),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var wP={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var a0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!a0.isDisabled&&a0.supportsFiber)try{Ke=a0.inject(wP),st=a0}catch{}}return my.createRoot=function(r,o){if(!s(r))throw Error(n(299));var f=!1,m="",E=$g,A=zv,B=pp;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(E=o.onUncaughtError),o.onCaughtError!==void 0&&(A=o.onCaughtError),o.onRecoverableError!==void 0&&(B=o.onRecoverableError)),o=Lw(r,1,!1,null,null,f,m,null,E,A,B,Xw),r[lr]=o.current,aT(r),new AT(o)},my.hydrateRoot=function(r,o,f){if(!s(r))throw Error(n(299));var m=!1,E="",A=$g,B=zv,K=pp,oe=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(E=f.identifierPrefix),f.onUncaughtError!==void 0&&(A=f.onUncaughtError),f.onCaughtError!==void 0&&(B=f.onCaughtError),f.onRecoverableError!==void 0&&(K=f.onRecoverableError),f.formState!==void 0&&(oe=f.formState)),o=Lw(r,1,!0,o,f??null,m,E,oe,A,B,K,Xw),o.context=Pw(null),f=o.current,m=er(),m=Ss(m),E=po(m),E.callback=null,Wo(f,E,m),f=m,o.current.lanes=f,as(o,f),tc(o),r[lr]=o.current,aT(r),new r0(o)},my.version="19.2.0",my}var iR;function zP(){if(iR)return RT.exports;iR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),RT.exports=VP(),RT.exports}var BP=zP();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var sR="popstate";function FP(i={}){function e(s,a){let{pathname:l="/",search:u="",hash:d=""}=bd(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),sA("",{pathname:l,search:u,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=s.location.href,p=d.indexOf("#");u=p===-1?d:d.slice(0,p)}return u+"#"+(typeof a=="string"?a:n_(a))}function n(s,a){ml(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return kP(e,t,n,i)}function qi(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ml(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HP(){return Math.random().toString(36).substring(2,10)}function rR(i,e){return{usr:i.state,key:i.key,idx:e}}function sA(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?bd(e):e,state:t,key:e&&e.key||n||HP()}}function n_({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function bd(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function kP(i,e,t,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,l=s.history,u="POP",d=null,p=y();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function y(){return(l.state||{idx:null}).idx}function _(){u="POP";let w=y(),b=w==null?null:w-p;p=w,d&&d({action:u,location:C.location,delta:b})}function S(w,b){u="PUSH";let D=sA(C.location,w,b);t&&t(D,w),p=y()+1;let V=rR(D,p),z=C.createHref(D);try{l.pushState(V,"",z)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(z)}a&&d&&d({action:u,location:C.location,delta:1})}function T(w,b){u="REPLACE";let D=sA(C.location,w,b);t&&t(D,w),p=y();let V=rR(D,p),z=C.createHref(D);l.replaceState(V,"",z),a&&d&&d({action:u,location:C.location,delta:0})}function M(w){return GP(w)}let C={get action(){return u},get location(){return i(s,l)},listen(w){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(sR,_),d=w,()=>{s.removeEventListener(sR,_),d=null}},createHref(w){return e(s,w)},createURL:M,encodeLocation(w){let b=M(w);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:S,replace:T,go(w){return l.go(w)}};return C}function GP(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),qi(t,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:n_(i);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function YI(i,e,t="/"){return jP(i,e,t,!1)}function jP(i,e,t,n){let s=typeof e=="string"?bd(e):e,a=fu(s.pathname||"/",t);if(a==null)return null;let l=KI(i);qP(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let p=n4(a);u=e4(l[d],p,n)}return u}function KI(i,e=[],t=[],n="",s=!1){let a=(l,u,d=s,p)=>{let y={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(n)&&d)return;qi(y.relativePath.startsWith(n),`Absolute route path "${y.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(n.length)}let _=lu([n,y.relativePath]),S=t.concat(y);l.children&&l.children.length>0&&(qi(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),KI(l.children,e,S,_,d)),!(l.path==null&&!l.index)&&e.push({path:_,score:JP(_,l.index),routesMeta:S})};return i.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))a(l,u);else for(let d of QI(l.path))a(l,u,!0,d)}),e}function QI(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let l=QI(n.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...l),u.map(d=>i.startsWith("/")&&d===""?"/":d)}function qP(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:$P(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var XP=/^:[\w-]+$/,WP=3,YP=2,KP=1,QP=10,ZP=-2,aR=i=>i==="*";function JP(i,e){let t=i.split("/"),n=t.length;return t.some(aR)&&(n+=ZP),e&&(n+=YP),t.filter(s=>!aR(s)).reduce((s,a)=>s+(XP.test(a)?WP:a===""?KP:QP),n)}function $P(i,e){return i.length===e.length&&i.slice(0,-1).every((n,s)=>n===e[s])?i[i.length-1]-e[e.length-1]:0}function e4(i,e,t=!1){let{routesMeta:n}=i,s={},a="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],p=u===n.length-1,y=a==="/"?e:e.slice(a.length)||"/",_=MS({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),S=d.route;if(!_&&p&&t&&!n[n.length-1].route.index&&(_=MS({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!_)return null;Object.assign(s,_.params),l.push({params:s,pathname:lu([a,_.pathname]),pathnameBase:a4(lu([a,_.pathnameBase])),route:S}),_.pathnameBase!=="/"&&(a=lu([a,_.pathnameBase]))}return l}function MS(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=t4(i.path,i.caseSensitive,i.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((p,{paramName:y,isOptional:_},S)=>{if(y==="*"){let M=u[S]||"";l=a.slice(0,a.length-M.length).replace(/(.)\/+$/,"$1")}const T=u[S];return _&&!T?p[y]=void 0:p[y]=(T||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:i}}function t4(i,e=!1,t=!0){ml(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function n4(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ml(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function fu(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function i4(i,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof i=="string"?bd(i):i;return{pathname:t?t.startsWith("/")?t:s4(t,e):e,search:o4(n),hash:l4(s)}}function s4(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function NT(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function r4(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ZI(i){let e=r4(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function JI(i,e,t,n=!1){let s;typeof i=="string"?s=bd(i):(s={...i},qi(!s.pathname||!s.pathname.includes("?"),NT("?","pathname","search",s)),qi(!s.pathname||!s.pathname.includes("#"),NT("#","pathname","hash",s)),qi(!s.search||!s.search.includes("#"),NT("#","search","hash",s)));let a=i===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=t;else{let _=e.length-1;if(!n&&l.startsWith("..")){let S=l.split("/");for(;S[0]==="..";)S.shift(),_-=1;s.pathname=S.join("/")}u=_>=0?e[_]:"/"}let d=i4(s,u),p=l&&l!=="/"&&l.endsWith("/"),y=(a||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}var lu=i=>i.join("/").replace(/\/\/+/g,"/"),a4=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),o4=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,l4=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function c4(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var $I=["POST","PUT","PATCH","DELETE"];new Set($I);var u4=["GET",...$I];new Set(u4);var Fm=ce.createContext(null);Fm.displayName="DataRouter";var FE=ce.createContext(null);FE.displayName="DataRouterState";ce.createContext(!1);var eD=ce.createContext({isTransitioning:!1});eD.displayName="ViewTransition";var h4=ce.createContext(new Map);h4.displayName="Fetchers";var f4=ce.createContext(null);f4.displayName="Await";var vc=ce.createContext(null);vc.displayName="Navigation";var D_=ce.createContext(null);D_.displayName="Location";var xu=ce.createContext({outlet:null,matches:[],isDataRoute:!1});xu.displayName="Route";var sM=ce.createContext(null);sM.displayName="RouteError";function d4(i,{relative:e}={}){qi(N_(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=ce.useContext(vc),{hash:s,pathname:a,search:l}=O_(i,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:lu([t,a])),n.createHref({pathname:u,search:l,hash:s})}function N_(){return ce.useContext(D_)!=null}function Ad(){return qi(N_(),"useLocation() may be used only in the context of a <Router> component."),ce.useContext(D_).location}var tD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nD(i){ce.useContext(vc).static||ce.useLayoutEffect(i)}function p4(){let{isDataRoute:i}=ce.useContext(xu);return i?w4():m4()}function m4(){qi(N_(),"useNavigate() may be used only in the context of a <Router> component.");let i=ce.useContext(Fm),{basename:e,navigator:t}=ce.useContext(vc),{matches:n}=ce.useContext(xu),{pathname:s}=Ad(),a=JSON.stringify(ZI(n)),l=ce.useRef(!1);return nD(()=>{l.current=!0}),ce.useCallback((d,p={})=>{if(ml(l.current,tD),!l.current)return;if(typeof d=="number"){t.go(d);return}let y=JI(d,JSON.parse(a),s,p.relative==="path");i==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:lu([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,a,s,i])}ce.createContext(null);function O_(i,{relative:e}={}){let{matches:t}=ce.useContext(xu),{pathname:n}=Ad(),s=JSON.stringify(ZI(t));return ce.useMemo(()=>JI(i,JSON.parse(s),n,e==="path"),[i,s,n,e])}function g4(i,e){return iD(i,e)}function iD(i,e,t,n,s){qi(N_(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=ce.useContext(vc),{matches:l}=ce.useContext(xu),u=l[l.length-1],d=u?u.params:{},p=u?u.pathname:"/",y=u?u.pathnameBase:"/",_=u&&u.route;{let D=_&&_.path||"";sD(p,!_||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let S=Ad(),T;if(e){let D=typeof e=="string"?bd(e):e;qi(y==="/"||D.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${D.pathname}" was given in the \`location\` prop.`),T=D}else T=S;let M=T.pathname||"/",C=M;if(y!=="/"){let D=y.replace(/^\//,"").split("/");C="/"+M.replace(/^\//,"").split("/").slice(D.length).join("/")}let w=YI(i,{pathname:C});ml(_||w!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),ml(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=E4(w&&w.map(D=>Object.assign({},D,{params:Object.assign({},d,D.params),pathname:lu([y,a.encodeLocation?a.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?y:lu([y,a.encodeLocation?a.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),l,t,n,s);return e&&b?ce.createElement(D_.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},b):b}function y4(){let i=M4(),e=c4(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",i),l=ce.createElement(ce.Fragment,null,ce.createElement("p",null," Hey developer "),ce.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ce.createElement("code",{style:a},"ErrorBoundary")," or"," ",ce.createElement("code",{style:a},"errorElement")," prop on your route.")),ce.createElement(ce.Fragment,null,ce.createElement("h2",null,"Unexpected Application Error!"),ce.createElement("h3",{style:{fontStyle:"italic"}},e),t?ce.createElement("pre",{style:s},t):null,l)}var _4=ce.createElement(y4,null),v4=class extends ce.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.unstable_onError?this.props.unstable_onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?ce.createElement(xu.Provider,{value:this.props.routeContext},ce.createElement(sM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function S4({routeContext:i,match:e,children:t}){let n=ce.useContext(Fm);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),ce.createElement(xu.Provider,{value:i},t)}function E4(i,e=[],t=null,n=null,s=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,l=t?.errors;if(l!=null){let p=a.findIndex(y=>y.route.id&&l?.[y.route.id]!==void 0);qi(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let u=!1,d=-1;if(t)for(let p=0;p<a.length;p++){let y=a[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=p),y.route.id){let{loaderData:_,errors:S}=t,T=y.route.loader&&!_.hasOwnProperty(y.route.id)&&(!S||S[y.route.id]===void 0);if(y.route.lazy||T){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,y,_)=>{let S,T=!1,M=null,C=null;t&&(S=l&&y.route.id?l[y.route.id]:void 0,M=y.route.errorElement||_4,u&&(d<0&&_===0?(sD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,C=null):d===_&&(T=!0,C=y.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,_+1)),b=()=>{let D;return S?D=M:T?D=C:y.route.Component?D=ce.createElement(y.route.Component,null):y.route.element?D=y.route.element:D=p,ce.createElement(S4,{match:y,routeContext:{outlet:p,matches:w,isDataRoute:t!=null},children:D})};return t&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?ce.createElement(v4,{location:t.location,revalidation:t.revalidation,component:M,error:S,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:n}):b()},null)}function rM(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function x4(i){let e=ce.useContext(Fm);return qi(e,rM(i)),e}function T4(i){let e=ce.useContext(FE);return qi(e,rM(i)),e}function b4(i){let e=ce.useContext(xu);return qi(e,rM(i)),e}function aM(i){let e=b4(i),t=e.matches[e.matches.length-1];return qi(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function A4(){return aM("useRouteId")}function M4(){let i=ce.useContext(sM),e=T4("useRouteError"),t=aM("useRouteError");return i!==void 0?i:e.errors?.[t]}function w4(){let{router:i}=x4("useNavigate"),e=aM("useNavigate"),t=ce.useRef(!1);return nD(()=>{t.current=!0}),ce.useCallback(async(s,a={})=>{ml(t.current,tD),t.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:e,...a}))},[i,e])}var oR={};function sD(i,e,t){!e&&!oR[i]&&(oR[i]=!0,ml(!1,t))}ce.memo(R4);function R4({routes:i,future:e,state:t,unstable_onError:n}){return iD(i,void 0,t,n,e)}function oS(i){qi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function C4({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:a=!1}){qi(!N_(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=i.replace(/^\/*/,"/"),u=ce.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof t=="string"&&(t=bd(t));let{pathname:d="/",search:p="",hash:y="",state:_=null,key:S="default"}=t,T=ce.useMemo(()=>{let M=fu(d,l);return M==null?null:{location:{pathname:M,search:p,hash:y,state:_,key:S},navigationType:n}},[l,d,p,y,_,S,n]);return ml(T!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:ce.createElement(vc.Provider,{value:u},ce.createElement(D_.Provider,{children:e,value:T}))}function I4({children:i,location:e}){return g4(rA(i),e)}function rA(i,e=[]){let t=[];return ce.Children.forEach(i,(n,s)=>{if(!ce.isValidElement(n))return;let a=[...e,s];if(n.type===ce.Fragment){t.push.apply(t,rA(n.props.children,a));return}qi(n.type===oS,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qi(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=rA(n.props.children,a)),t.push(l)}),t}var lS="get",cS="application/x-www-form-urlencoded";function HE(i){return i!=null&&typeof i.tagName=="string"}function D4(i){return HE(i)&&i.tagName.toLowerCase()==="button"}function N4(i){return HE(i)&&i.tagName.toLowerCase()==="form"}function O4(i){return HE(i)&&i.tagName.toLowerCase()==="input"}function U4(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function L4(i,e){return i.button===0&&(!e||e==="_self")&&!U4(i)}var o0=null;function P4(){if(o0===null)try{new FormData(document.createElement("form"),0),o0=!1}catch{o0=!0}return o0}var V4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function OT(i){return i!=null&&!V4.has(i)?(ml(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cS}"`),null):i}function z4(i,e){let t,n,s,a,l;if(N4(i)){let u=i.getAttribute("action");n=u?fu(u,e):null,t=i.getAttribute("method")||lS,s=OT(i.getAttribute("enctype"))||cS,a=new FormData(i)}else if(D4(i)||O4(i)&&(i.type==="submit"||i.type==="image")){let u=i.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=i.getAttribute("formaction")||u.getAttribute("action");if(n=d?fu(d,e):null,t=i.getAttribute("formmethod")||u.getAttribute("method")||lS,s=OT(i.getAttribute("formenctype"))||OT(u.getAttribute("enctype"))||cS,a=new FormData(u,i),!P4()){let{name:p,type:y,value:_}=i;if(y==="image"){let S=p?`${p}.`:"";a.append(`${S}x`,"0"),a.append(`${S}y`,"0")}else p&&a.append(p,_)}}else{if(HE(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=lS,n=null,s=cS,l=i}return a&&s==="text/plain"&&(l=a,a=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function oM(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function B4(i,e,t){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&fu(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function F4(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function H4(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function k4(i,e,t){let n=await Promise.all(i.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await F4(a,t);return l.links?l.links():[]}return[]}));return X4(n.flat(1).filter(H4).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function lR(i,e,t,n,s,a){let l=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,u=(d,p)=>t[p].pathname!==d.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,p)=>l(d,p)||u(d,p)):a==="data"?e.filter((d,p)=>{let y=n.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(l(d,p)||u(d,p))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function G4(i,e,{includeHydrateFallback:t}={}){return j4(i.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function j4(i){return[...new Set(i)]}function q4(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function X4(i,e){let t=new Set;return new Set(e),i.reduce((n,s)=>{let a=JSON.stringify(q4(s));return t.has(a)||(t.add(a),n.push({key:a,link:s})),n},[])}function rD(){let i=ce.useContext(Fm);return oM(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function W4(){let i=ce.useContext(FE);return oM(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var lM=ce.createContext(void 0);lM.displayName="FrameworkContext";function aD(){let i=ce.useContext(lM);return oM(i,"You must render this element inside a <HydratedRouter> element"),i}function Y4(i,e){let t=ce.useContext(lM),[n,s]=ce.useState(!1),[a,l]=ce.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:p,onMouseLeave:y,onTouchStart:_}=e,S=ce.useRef(null);ce.useEffect(()=>{if(i==="render"&&l(!0),i==="viewport"){let C=b=>{b.forEach(D=>{l(D.isIntersecting)})},w=new IntersectionObserver(C,{threshold:.5});return S.current&&w.observe(S.current),()=>{w.disconnect()}}},[i]),ce.useEffect(()=>{if(n){let C=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(C)}}},[n]);let T=()=>{s(!0)},M=()=>{s(!1),l(!1)};return t?i!=="intent"?[a,S,{}]:[a,S,{onFocus:gy(u,T),onBlur:gy(d,M),onMouseEnter:gy(p,T),onMouseLeave:gy(y,M),onTouchStart:gy(_,T)}]:[!1,S,{}]}function gy(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function K4({page:i,...e}){let{router:t}=rD(),n=ce.useMemo(()=>YI(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?ce.createElement(Z4,{page:i,matches:n,...e}):null}function Q4(i){let{manifest:e,routeModules:t}=aD(),[n,s]=ce.useState([]);return ce.useEffect(()=>{let a=!1;return k4(i,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[i,e,t]),n}function Z4({page:i,matches:e,...t}){let n=Ad(),{manifest:s,routeModules:a}=aD(),{basename:l}=rD(),{loaderData:u,matches:d}=W4(),p=ce.useMemo(()=>lR(i,e,d,s,n,"data"),[i,e,d,s,n]),y=ce.useMemo(()=>lR(i,e,d,s,n,"assets"),[i,e,d,s,n]),_=ce.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let M=new Set,C=!1;if(e.forEach(b=>{let D=s.routes[b.route.id];!D||!D.hasLoader||(!p.some(V=>V.route.id===b.route.id)&&b.route.id in u&&a[b.route.id]?.shouldRevalidate||D.hasClientLoader?C=!0:M.add(b.route.id))}),M.size===0)return[];let w=B4(i,l,"data");return C&&M.size>0&&w.searchParams.set("_routes",e.filter(b=>M.has(b.route.id)).map(b=>b.route.id).join(",")),[w.pathname+w.search]},[l,u,n,s,p,e,i,a]),S=ce.useMemo(()=>G4(y,s),[y,s]),T=Q4(y);return ce.createElement(ce.Fragment,null,_.map(M=>ce.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),S.map(M=>ce.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),T.map(({key:M,link:C})=>ce.createElement("link",{key:M,nonce:t.nonce,...C})))}function J4(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var oD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oD&&(window.__reactRouterVersion="7.9.4")}catch{}function $4({basename:i,children:e,window:t}){let n=ce.useRef();n.current==null&&(n.current=FP({window:t,v5Compat:!0}));let s=n.current,[a,l]=ce.useState({action:s.action,location:s.location}),u=ce.useCallback(d=>{ce.startTransition(()=>l(d))},[l]);return ce.useLayoutEffect(()=>s.listen(u),[s,u]),ce.createElement(C4,{basename:i,children:e,location:a.location,navigationType:a.action,navigator:s})}var lD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cD=ce.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:a,replace:l,state:u,target:d,to:p,preventScrollReset:y,viewTransition:_,...S},T){let{basename:M}=ce.useContext(vc),C=typeof p=="string"&&lD.test(p),w,b=!1;if(typeof p=="string"&&C&&(w=p,oD))try{let I=new URL(window.location.href),O=p.startsWith("//")?new URL(I.protocol+p):new URL(p),F=fu(O.pathname,M);O.origin===I.origin&&F!=null?p=F+O.search+O.hash:b=!0}catch{ml(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=d4(p,{relative:s}),[V,z,j]=Y4(n,S),G=iV(p,{replace:l,state:u,target:d,preventScrollReset:y,relative:s,viewTransition:_});function P(I){e&&e(I),I.defaultPrevented||G(I)}let L=ce.createElement("a",{...S,...j,href:w||D,onClick:b||a?e:P,ref:J4(T,z),target:d,"data-discover":!C&&t==="render"?"true":void 0});return V&&!C?ce.createElement(ce.Fragment,null,L,ce.createElement(K4,{page:D})):L});cD.displayName="Link";var eV=ce.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:a,to:l,viewTransition:u,children:d,...p},y){let _=O_(l,{relative:p.relative}),S=Ad(),T=ce.useContext(FE),{navigator:M,basename:C}=ce.useContext(vc),w=T!=null&&lV(_)&&u===!0,b=M.encodeLocation?M.encodeLocation(_).pathname:_.pathname,D=S.pathname,V=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(D=D.toLowerCase(),V=V?V.toLowerCase():null,b=b.toLowerCase()),V&&C&&(V=fu(V,C)||V);const z=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let j=D===b||!s&&D.startsWith(b)&&D.charAt(z)==="/",G=V!=null&&(V===b||!s&&V.startsWith(b)&&V.charAt(b.length)==="/"),P={isActive:j,isPending:G,isTransitioning:w},L=j?e:void 0,I;typeof n=="function"?I=n(P):I=[n,j?"active":null,G?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(P):a;return ce.createElement(cD,{...p,"aria-current":L,className:I,ref:y,style:O,to:l,viewTransition:u},typeof d=="function"?d(P):d)});eV.displayName="NavLink";var tV=ce.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:a,method:l=lS,action:u,onSubmit:d,relative:p,preventScrollReset:y,viewTransition:_,...S},T)=>{let M=aV(),C=oV(u,{relative:p}),w=l.toLowerCase()==="get"?"get":"post",b=typeof u=="string"&&lD.test(u),D=V=>{if(d&&d(V),V.defaultPrevented)return;V.preventDefault();let z=V.nativeEvent.submitter,j=z?.getAttribute("formmethod")||l;M(z||V.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:s,state:a,relative:p,preventScrollReset:y,viewTransition:_})};return ce.createElement("form",{ref:T,method:w,action:C,onSubmit:n?d:D,...S,"data-discover":!b&&i==="render"?"true":void 0})});tV.displayName="Form";function nV(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uD(i){let e=ce.useContext(Fm);return qi(e,nV(i)),e}function iV(i,{target:e,replace:t,state:n,preventScrollReset:s,relative:a,viewTransition:l}={}){let u=p4(),d=Ad(),p=O_(i,{relative:a});return ce.useCallback(y=>{if(L4(y,e)){y.preventDefault();let _=t!==void 0?t:n_(d)===n_(p);u(i,{replace:_,state:n,preventScrollReset:s,relative:a,viewTransition:l})}},[d,u,p,t,n,e,i,s,a,l])}var sV=0,rV=()=>`__${String(++sV)}__`;function aV(){let{router:i}=uD("useSubmit"),{basename:e}=ce.useContext(vc),t=A4();return ce.useCallback(async(n,s={})=>{let{action:a,method:l,encType:u,formData:d,body:p}=z4(n,e);if(s.navigate===!1){let y=s.fetcherKey||rV();await i.fetch(y,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:p,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await i.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:p,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,e,t])}function oV(i,{relative:e}={}){let{basename:t}=ce.useContext(vc),n=ce.useContext(xu);qi(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...O_(i||".",{relative:e})},l=Ad();if(i==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(y=>y==="")){u.delete("index"),d.filter(_=>_).forEach(_=>u.append("index",_));let y=u.toString();a.search=y?`?${y}`:""}}return(!i||i===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:lu([t,a.pathname])),n_(a)}function lV(i,{relative:e}={}){let t=ce.useContext(eD);qi(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=uD("useViewTransitionState"),s=O_(i,{relative:e});if(!t.isTransitioning)return!1;let a=fu(t.currentLocation.pathname,n)||t.currentLocation.pathname,l=fu(t.nextLocation.pathname,n)||t.nextLocation.pathname;return MS(s.pathname,l)!=null||MS(s.pathname,a)!=null}const cV=()=>{};var cR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=function(i){const e=[];let t=0;for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},uV=function(i){const e=[];let t=0,n=0;for(;t<i.length;){const s=i[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=i[t++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=i[t++],l=i[t++],u=i[t++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const a=i[t++],l=i[t++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},fD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<i.length;s+=3){const a=i[s],l=s+1<i.length,u=l?i[s+1]:0,d=s+2<i.length,p=d?i[s+2]:0,y=a>>2,_=(a&3)<<4|u>>4;let S=(u&15)<<2|p>>6,T=p&63;d||(T=64,l||(S=64)),n.push(t[y],t[_],t[S],t[T])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(hD(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):uV(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<i.length;){const a=t[i.charAt(s++)],u=s<i.length?t[i.charAt(s)]:0;++s;const p=s<i.length?t[i.charAt(s)]:64;++s;const _=s<i.length?t[i.charAt(s)]:64;if(++s,a==null||u==null||p==null||_==null)throw new hV;const S=a<<2|u>>4;if(n.push(S),p!==64){const T=u<<4&240|p>>2;if(n.push(T),_!==64){const M=p<<6&192|_;n.push(M)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class hV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fV=function(i){const e=hD(i);return fD.encodeByteArray(e,!0)},wS=function(i){return fV(i).replace(/\./g,"")},dD=function(i){try{return fD.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=()=>dV().__FIREBASE_DEFAULTS__,mV=()=>{if(typeof process>"u"||typeof cR>"u")return;const i=cR.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},gV=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&dD(i[1]);return e&&JSON.parse(e)},kE=()=>{try{return cV()||pV()||mV()||gV()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},pD=i=>kE()?.emulatorHosts?.[i],yV=i=>{const e=pD(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},mD=()=>kE()?.config,gD=i=>kE()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yD(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=i.iat||0,a=i.sub||i.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...i};return[wS(JSON.stringify(t)),wS(JSON.stringify(l)),""].join(".")}const Fy={};function SV(){const i={prod:[],emulator:[]};for(const e of Object.keys(Fy))Fy[e]?i.emulator.push(e):i.prod.push(e);return i}function EV(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let uR=!1;function _D(i,e){if(typeof window>"u"||typeof document>"u"||!Hm(window.location.host)||Fy[i]===e||Fy[i]||uR)return;Fy[i]=e;function t(S){return`__firebase__banner__${S}`}const n="__firebase__banner",a=SV().prod.length>0;function l(){const S=document.getElementById(n);S&&S.remove()}function u(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function d(S,T){S.setAttribute("width","24"),S.setAttribute("id",T),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{uR=!0,l()},S}function y(S,T){S.setAttribute("id",T),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function _(){const S=EV(n),T=t("text"),M=document.getElementById(T)||document.createElement("span"),C=t("learnmore"),w=document.getElementById(C)||document.createElement("a"),b=t("preprendIcon"),D=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const V=S.element;u(V),y(w,C);const z=p();d(D,b),V.append(D,M,w,z),document.body.appendChild(V)}a?(M.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ur())}function TV(){const i=kE()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cM(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function AV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MV(){const i=Ur();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function wV(){return!TV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uM(){try{return typeof indexedDB=="object"}catch{return!1}}function hM(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}function vD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV="FirebaseError";class Sl extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=RV,Object.setPrototypeOf(this,Sl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Md.prototype.create)}}class Md{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?CV(a,n):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new Sl(s,u,n)}}function CV(i,e){return i.replace(IV,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const IV=/\{\$([^}]+)}/g;function DV(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Vh(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const a=i[s],l=e[s];if(hR(a)&&hR(l)){if(!Vh(a,l))return!1}else if(a!==l)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function hR(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(i){const e=[];for(const[t,n]of Object.entries(i))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Dy(i){const e={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,a]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Ny(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function NV(i,e){const t=new OV(i,e);return t.subscribe.bind(t)}class OV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");UV(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=UT),s.error===void 0&&(s.error=UT),s.complete===void 0&&(s.complete=UT);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UV(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function UT(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV=1e3,PV=2,VV=14400*1e3,zV=.5;function fR(i,e=LV,t=PV){const n=e*Math.pow(t,i),s=Math.round(zV*n*(Math.random()-.5)*2);return Math.min(VV,n+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(i){return i&&i._delegate?i._delegate:i}class gl{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BV=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new _V;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HV(e))try{this.getOrInitializeService({instanceIdentifier:td})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=td){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=td){return this.instances.has(e)}getOptions(e=td){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);n===u&&l.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const a=this.instances.get(n);return a&&e(a,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:FV(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=td){return this.component?this.component.multipleInstances?e:td:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function FV(i){return i===td?void 0:i}function HV(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new BV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pn;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Pn||(Pn={}));const GV={debug:Pn.DEBUG,verbose:Pn.VERBOSE,info:Pn.INFO,warn:Pn.WARN,error:Pn.ERROR,silent:Pn.SILENT},jV=Pn.INFO,qV={[Pn.DEBUG]:"log",[Pn.VERBOSE]:"log",[Pn.INFO]:"info",[Pn.WARN]:"warn",[Pn.ERROR]:"error"},XV=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),s=qV[e];if(s)console[s](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class GE{constructor(e){this.name=e,this._logLevel=jV,this._logHandler=XV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pn.DEBUG,...e),this._logHandler(this,Pn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pn.VERBOSE,...e),this._logHandler(this,Pn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pn.INFO,...e),this._logHandler(this,Pn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pn.WARN,...e),this._logHandler(this,Pn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pn.ERROR,...e),this._logHandler(this,Pn.ERROR,...e)}}const WV=(i,e)=>e.some(t=>i instanceof t);let dR,pR;function YV(){return dR||(dR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KV(){return pR||(pR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SD=new WeakMap,aA=new WeakMap,ED=new WeakMap,LT=new WeakMap,fM=new WeakMap;function QV(i){const e=new Promise((t,n)=>{const s=()=>{i.removeEventListener("success",a),i.removeEventListener("error",l)},a=()=>{t(Nh(i.result)),s()},l=()=>{n(i.error),s()};i.addEventListener("success",a),i.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&SD.set(t,i)}).catch(()=>{}),fM.set(e,i),e}function ZV(i){if(aA.has(i))return;const e=new Promise((t,n)=>{const s=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",l),i.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{n(i.error||new DOMException("AbortError","AbortError")),s()};i.addEventListener("complete",a),i.addEventListener("error",l),i.addEventListener("abort",l)});aA.set(i,e)}let oA={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return aA.get(i);if(e==="objectStoreNames")return i.objectStoreNames||ED.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Nh(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function JV(i){oA=i(oA)}function $V(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(PT(this),e,...t);return ED.set(n,e.sort?e.sort():[e]),Nh(n)}:KV().includes(i)?function(...e){return i.apply(PT(this),e),Nh(SD.get(this))}:function(...e){return Nh(i.apply(PT(this),e))}}function ez(i){return typeof i=="function"?$V(i):(i instanceof IDBTransaction&&ZV(i),WV(i,YV())?new Proxy(i,oA):i)}function Nh(i){if(i instanceof IDBRequest)return QV(i);if(LT.has(i))return LT.get(i);const e=ez(i);return e!==i&&(LT.set(i,e),fM.set(e,i)),e}const PT=i=>fM.get(i);function xD(i,e,{blocked:t,upgrade:n,blocking:s,terminated:a}={}){const l=indexedDB.open(i,e),u=Nh(l);return n&&l.addEventListener("upgradeneeded",d=>{n(Nh(l.result),d.oldVersion,d.newVersion,Nh(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const tz=["get","getKey","getAll","getAllKeys","count"],nz=["put","add","delete","clear"],VT=new Map;function mR(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(VT.get(e))return VT.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=nz.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||tz.includes(t)))return;const a=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return n&&(p=p.index(u.shift())),(await Promise.all([p[t](...u),s&&d.done]))[0]};return VT.set(e,a),a}JV(i=>({...i,get:(e,t,n)=>mR(e,t)||i.get(e,t,n),has:(e,t)=>!!mR(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sz(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function sz(i){return i.getComponent()?.type==="VERSION"}const lA="@firebase/app",gR="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=new GE("@firebase/app"),rz="@firebase/app-compat",az="@firebase/analytics-compat",oz="@firebase/analytics",lz="@firebase/app-check-compat",cz="@firebase/app-check",uz="@firebase/auth",hz="@firebase/auth-compat",fz="@firebase/database",dz="@firebase/data-connect",pz="@firebase/database-compat",mz="@firebase/functions",gz="@firebase/functions-compat",yz="@firebase/installations",_z="@firebase/installations-compat",vz="@firebase/messaging",Sz="@firebase/messaging-compat",Ez="@firebase/performance",xz="@firebase/performance-compat",Tz="@firebase/remote-config",bz="@firebase/remote-config-compat",Az="@firebase/storage",Mz="@firebase/storage-compat",wz="@firebase/firestore",Rz="@firebase/ai",Cz="@firebase/firestore-compat",Iz="firebase",Dz="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="[DEFAULT]",Nz={[lA]:"fire-core",[rz]:"fire-core-compat",[oz]:"fire-analytics",[az]:"fire-analytics-compat",[cz]:"fire-app-check",[lz]:"fire-app-check-compat",[uz]:"fire-auth",[hz]:"fire-auth-compat",[fz]:"fire-rtdb",[dz]:"fire-data-connect",[pz]:"fire-rtdb-compat",[mz]:"fire-fn",[gz]:"fire-fn-compat",[yz]:"fire-iid",[_z]:"fire-iid-compat",[vz]:"fire-fcm",[Sz]:"fire-fcm-compat",[Ez]:"fire-perf",[xz]:"fire-perf-compat",[Tz]:"fire-rc",[bz]:"fire-rc-compat",[Az]:"fire-gcs",[Mz]:"fire-gcs-compat",[wz]:"fire-fst",[Cz]:"fire-fst-compat",[Rz]:"fire-vertex","fire-js":"fire-js",[Iz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new Map,Oz=new Map,uA=new Map;function yR(i,e){try{i.container.addComponent(e)}catch(t){du.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function gc(i){const e=i.name;if(uA.has(e))return du.debug(`There were multiple attempts to register component ${e}.`),!1;uA.set(e,i);for(const t of RS.values())yR(t,i);for(const t of Oz.values())yR(t,i);return!0}function wd(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function ul(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oh=new Md("app","Firebase",Uz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new gl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=Dz;function TD(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n={name:cA,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw Oh.create("bad-app-name",{appName:String(s)});if(t||(t=mD()),!t)throw Oh.create("no-options");const a=RS.get(s);if(a){if(Vh(t,a.options)&&Vh(n,a.config))return a;throw Oh.create("duplicate-app",{appName:s})}const l=new kV(s);for(const d of uA.values())l.addComponent(d);const u=new Lz(t,n,l);return RS.set(s,u),u}function dM(i=cA){const e=RS.get(i);if(!e&&i===cA&&mD())return TD();if(!e)throw Oh.create("no-app",{appName:i});return e}function Co(i,e,t){let n=Nz[i]??i;t&&(n+=`-${t}`);const s=n.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${n}" with version "${e}":`];s&&l.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),du.warn(l.join(" "));return}gc(new gl(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz="firebase-heartbeat-database",Vz=1,i_="firebase-heartbeat-store";let zT=null;function bD(){return zT||(zT=xD(Pz,Vz,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(i_)}catch(t){console.warn(t)}}}}).catch(i=>{throw Oh.create("idb-open",{originalErrorMessage:i.message})})),zT}async function zz(i){try{const t=(await bD()).transaction(i_),n=await t.objectStore(i_).get(AD(i));return await t.done,n}catch(e){if(e instanceof Sl)du.warn(e.message);else{const t=Oh.create("idb-get",{originalErrorMessage:e?.message});du.warn(t.message)}}}async function _R(i,e){try{const n=(await bD()).transaction(i_,"readwrite");await n.objectStore(i_).put(e,AD(i)),await n.done}catch(t){if(t instanceof Sl)du.warn(t.message);else{const n=Oh.create("idb-set",{originalErrorMessage:t?.message});du.warn(n.message)}}}function AD(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bz=1024,Fz=30;class Hz{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Gz(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=vR();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>Fz){const s=jz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){du.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=vR(),{heartbeatsToSend:t,unsentEntries:n}=kz(this._heartbeatsCache.heartbeats),s=wS(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return du.warn(e),""}}}function vR(){return new Date().toISOString().substring(0,10)}function kz(i,e=Bz){const t=[];let n=i.slice();for(const s of i){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),SR(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),SR(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class Gz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uM()?hM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await zz(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return _R(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return _R(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function SR(i){return wS(JSON.stringify({version:2,heartbeats:i})).length}function jz(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let n=1;n<i.length;n++)i[n].date<t&&(t=i[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(i){gc(new gl("platform-logger",e=>new iz(e),"PRIVATE")),gc(new gl("heartbeat",e=>new Hz(e),"PRIVATE")),Co(lA,gR,i),Co(lA,gR,"esm2020"),Co("fire-js","")}qz("");var Xz="firebase",Wz="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Co(Xz,Wz,"app");var ER=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uh,MD;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,L){function I(){}I.prototype=L.prototype,P.F=L.prototype,P.prototype=new I,P.prototype.constructor=P,P.D=function(O,F,Y){for(var q=Array(arguments.length-2),de=2;de<arguments.length;de++)q[de-2]=arguments[de];return L.prototype[F].apply(O,q)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,L,I){I||(I=0);const O=Array(16);if(typeof L=="string")for(var F=0;F<16;++F)O[F]=L.charCodeAt(I++)|L.charCodeAt(I++)<<8|L.charCodeAt(I++)<<16|L.charCodeAt(I++)<<24;else for(F=0;F<16;++F)O[F]=L[I++]|L[I++]<<8|L[I++]<<16|L[I++]<<24;L=P.g[0],I=P.g[1],F=P.g[2];let Y=P.g[3],q;q=L+(Y^I&(F^Y))+O[0]+3614090360&4294967295,L=I+(q<<7&4294967295|q>>>25),q=Y+(F^L&(I^F))+O[1]+3905402710&4294967295,Y=L+(q<<12&4294967295|q>>>20),q=F+(I^Y&(L^I))+O[2]+606105819&4294967295,F=Y+(q<<17&4294967295|q>>>15),q=I+(L^F&(Y^L))+O[3]+3250441966&4294967295,I=F+(q<<22&4294967295|q>>>10),q=L+(Y^I&(F^Y))+O[4]+4118548399&4294967295,L=I+(q<<7&4294967295|q>>>25),q=Y+(F^L&(I^F))+O[5]+1200080426&4294967295,Y=L+(q<<12&4294967295|q>>>20),q=F+(I^Y&(L^I))+O[6]+2821735955&4294967295,F=Y+(q<<17&4294967295|q>>>15),q=I+(L^F&(Y^L))+O[7]+4249261313&4294967295,I=F+(q<<22&4294967295|q>>>10),q=L+(Y^I&(F^Y))+O[8]+1770035416&4294967295,L=I+(q<<7&4294967295|q>>>25),q=Y+(F^L&(I^F))+O[9]+2336552879&4294967295,Y=L+(q<<12&4294967295|q>>>20),q=F+(I^Y&(L^I))+O[10]+4294925233&4294967295,F=Y+(q<<17&4294967295|q>>>15),q=I+(L^F&(Y^L))+O[11]+2304563134&4294967295,I=F+(q<<22&4294967295|q>>>10),q=L+(Y^I&(F^Y))+O[12]+1804603682&4294967295,L=I+(q<<7&4294967295|q>>>25),q=Y+(F^L&(I^F))+O[13]+4254626195&4294967295,Y=L+(q<<12&4294967295|q>>>20),q=F+(I^Y&(L^I))+O[14]+2792965006&4294967295,F=Y+(q<<17&4294967295|q>>>15),q=I+(L^F&(Y^L))+O[15]+1236535329&4294967295,I=F+(q<<22&4294967295|q>>>10),q=L+(F^Y&(I^F))+O[1]+4129170786&4294967295,L=I+(q<<5&4294967295|q>>>27),q=Y+(I^F&(L^I))+O[6]+3225465664&4294967295,Y=L+(q<<9&4294967295|q>>>23),q=F+(L^I&(Y^L))+O[11]+643717713&4294967295,F=Y+(q<<14&4294967295|q>>>18),q=I+(Y^L&(F^Y))+O[0]+3921069994&4294967295,I=F+(q<<20&4294967295|q>>>12),q=L+(F^Y&(I^F))+O[5]+3593408605&4294967295,L=I+(q<<5&4294967295|q>>>27),q=Y+(I^F&(L^I))+O[10]+38016083&4294967295,Y=L+(q<<9&4294967295|q>>>23),q=F+(L^I&(Y^L))+O[15]+3634488961&4294967295,F=Y+(q<<14&4294967295|q>>>18),q=I+(Y^L&(F^Y))+O[4]+3889429448&4294967295,I=F+(q<<20&4294967295|q>>>12),q=L+(F^Y&(I^F))+O[9]+568446438&4294967295,L=I+(q<<5&4294967295|q>>>27),q=Y+(I^F&(L^I))+O[14]+3275163606&4294967295,Y=L+(q<<9&4294967295|q>>>23),q=F+(L^I&(Y^L))+O[3]+4107603335&4294967295,F=Y+(q<<14&4294967295|q>>>18),q=I+(Y^L&(F^Y))+O[8]+1163531501&4294967295,I=F+(q<<20&4294967295|q>>>12),q=L+(F^Y&(I^F))+O[13]+2850285829&4294967295,L=I+(q<<5&4294967295|q>>>27),q=Y+(I^F&(L^I))+O[2]+4243563512&4294967295,Y=L+(q<<9&4294967295|q>>>23),q=F+(L^I&(Y^L))+O[7]+1735328473&4294967295,F=Y+(q<<14&4294967295|q>>>18),q=I+(Y^L&(F^Y))+O[12]+2368359562&4294967295,I=F+(q<<20&4294967295|q>>>12),q=L+(I^F^Y)+O[5]+4294588738&4294967295,L=I+(q<<4&4294967295|q>>>28),q=Y+(L^I^F)+O[8]+2272392833&4294967295,Y=L+(q<<11&4294967295|q>>>21),q=F+(Y^L^I)+O[11]+1839030562&4294967295,F=Y+(q<<16&4294967295|q>>>16),q=I+(F^Y^L)+O[14]+4259657740&4294967295,I=F+(q<<23&4294967295|q>>>9),q=L+(I^F^Y)+O[1]+2763975236&4294967295,L=I+(q<<4&4294967295|q>>>28),q=Y+(L^I^F)+O[4]+1272893353&4294967295,Y=L+(q<<11&4294967295|q>>>21),q=F+(Y^L^I)+O[7]+4139469664&4294967295,F=Y+(q<<16&4294967295|q>>>16),q=I+(F^Y^L)+O[10]+3200236656&4294967295,I=F+(q<<23&4294967295|q>>>9),q=L+(I^F^Y)+O[13]+681279174&4294967295,L=I+(q<<4&4294967295|q>>>28),q=Y+(L^I^F)+O[0]+3936430074&4294967295,Y=L+(q<<11&4294967295|q>>>21),q=F+(Y^L^I)+O[3]+3572445317&4294967295,F=Y+(q<<16&4294967295|q>>>16),q=I+(F^Y^L)+O[6]+76029189&4294967295,I=F+(q<<23&4294967295|q>>>9),q=L+(I^F^Y)+O[9]+3654602809&4294967295,L=I+(q<<4&4294967295|q>>>28),q=Y+(L^I^F)+O[12]+3873151461&4294967295,Y=L+(q<<11&4294967295|q>>>21),q=F+(Y^L^I)+O[15]+530742520&4294967295,F=Y+(q<<16&4294967295|q>>>16),q=I+(F^Y^L)+O[2]+3299628645&4294967295,I=F+(q<<23&4294967295|q>>>9),q=L+(F^(I|~Y))+O[0]+4096336452&4294967295,L=I+(q<<6&4294967295|q>>>26),q=Y+(I^(L|~F))+O[7]+1126891415&4294967295,Y=L+(q<<10&4294967295|q>>>22),q=F+(L^(Y|~I))+O[14]+2878612391&4294967295,F=Y+(q<<15&4294967295|q>>>17),q=I+(Y^(F|~L))+O[5]+4237533241&4294967295,I=F+(q<<21&4294967295|q>>>11),q=L+(F^(I|~Y))+O[12]+1700485571&4294967295,L=I+(q<<6&4294967295|q>>>26),q=Y+(I^(L|~F))+O[3]+2399980690&4294967295,Y=L+(q<<10&4294967295|q>>>22),q=F+(L^(Y|~I))+O[10]+4293915773&4294967295,F=Y+(q<<15&4294967295|q>>>17),q=I+(Y^(F|~L))+O[1]+2240044497&4294967295,I=F+(q<<21&4294967295|q>>>11),q=L+(F^(I|~Y))+O[8]+1873313359&4294967295,L=I+(q<<6&4294967295|q>>>26),q=Y+(I^(L|~F))+O[15]+4264355552&4294967295,Y=L+(q<<10&4294967295|q>>>22),q=F+(L^(Y|~I))+O[6]+2734768916&4294967295,F=Y+(q<<15&4294967295|q>>>17),q=I+(Y^(F|~L))+O[13]+1309151649&4294967295,I=F+(q<<21&4294967295|q>>>11),q=L+(F^(I|~Y))+O[4]+4149444226&4294967295,L=I+(q<<6&4294967295|q>>>26),q=Y+(I^(L|~F))+O[11]+3174756917&4294967295,Y=L+(q<<10&4294967295|q>>>22),q=F+(L^(Y|~I))+O[2]+718787259&4294967295,F=Y+(q<<15&4294967295|q>>>17),q=I+(Y^(F|~L))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+L&4294967295,P.g[1]=P.g[1]+(F+(q<<21&4294967295|q>>>11))&4294967295,P.g[2]=P.g[2]+F&4294967295,P.g[3]=P.g[3]+Y&4294967295}n.prototype.v=function(P,L){L===void 0&&(L=P.length);const I=L-this.blockSize,O=this.C;let F=this.h,Y=0;for(;Y<L;){if(F==0)for(;Y<=I;)s(this,P,Y),Y+=this.blockSize;if(typeof P=="string"){for(;Y<L;)if(O[F++]=P.charCodeAt(Y++),F==this.blockSize){s(this,O),F=0;break}}else for(;Y<L;)if(O[F++]=P[Y++],F==this.blockSize){s(this,O),F=0;break}}this.h=F,this.o+=L},n.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var L=1;L<P.length-8;++L)P[L]=0;L=this.o*8;for(var I=P.length-8;I<P.length;++I)P[I]=L&255,L/=256;for(this.v(P),P=Array(16),L=0,I=0;I<4;++I)for(let O=0;O<32;O+=8)P[L++]=this.g[I]>>>O&255;return P};function a(P,L){var I=u;return Object.prototype.hasOwnProperty.call(I,P)?I[P]:I[P]=L(P)}function l(P,L){this.h=L;const I=[];let O=!0;for(let F=P.length-1;F>=0;F--){const Y=P[F]|0;O&&Y==L||(I[F]=Y,O=!1)}this.g=I}var u={};function d(P){return-128<=P&&P<128?a(P,function(L){return new l([L|0],L<0?-1:0)}):new l([P|0],P<0?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return _;if(P<0)return w(p(-P));const L=[];let I=1;for(let O=0;P>=I;O++)L[O]=P/I|0,I*=4294967296;return new l(L,0)}function y(P,L){if(P.length==0)throw Error("number format error: empty string");if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(P.charAt(0)=="-")return w(y(P.substring(1),L));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(L,8));let O=_;for(let Y=0;Y<P.length;Y+=8){var F=Math.min(8,P.length-Y);const q=parseInt(P.substring(Y,Y+F),L);F<8?(F=p(Math.pow(L,F)),O=O.j(F).add(p(q))):(O=O.j(I),O=O.add(p(q)))}return O}var _=d(0),S=d(1),T=d(16777216);i=l.prototype,i.m=function(){if(C(this))return-w(this).m();let P=0,L=1;for(let I=0;I<this.g.length;I++){const O=this.i(I);P+=(O>=0?O:4294967296+O)*L,L*=4294967296}return P},i.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(M(this))return"0";if(C(this))return"-"+w(this).toString(P);const L=p(Math.pow(P,6));var I=this;let O="";for(;;){const F=z(I,L).g;I=b(I,F.j(L));let Y=((I.g.length>0?I.g[0]:I.h)>>>0).toString(P);if(I=F,M(I))return Y+O;for(;Y.length<6;)Y="0"+Y;O=Y+O}},i.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function M(P){if(P.h!=0)return!1;for(let L=0;L<P.g.length;L++)if(P.g[L]!=0)return!1;return!0}function C(P){return P.h==-1}i.l=function(P){return P=b(this,P),C(P)?-1:M(P)?0:1};function w(P){const L=P.g.length,I=[];for(let O=0;O<L;O++)I[O]=~P.g[O];return new l(I,~P.h).add(S)}i.abs=function(){return C(this)?w(this):this},i.add=function(P){const L=Math.max(this.g.length,P.g.length),I=[];let O=0;for(let F=0;F<=L;F++){let Y=O+(this.i(F)&65535)+(P.i(F)&65535),q=(Y>>>16)+(this.i(F)>>>16)+(P.i(F)>>>16);O=q>>>16,Y&=65535,q&=65535,I[F]=q<<16|Y}return new l(I,I[I.length-1]&-2147483648?-1:0)};function b(P,L){return P.add(w(L))}i.j=function(P){if(M(this)||M(P))return _;if(C(this))return C(P)?w(this).j(w(P)):w(w(this).j(P));if(C(P))return w(this.j(w(P)));if(this.l(T)<0&&P.l(T)<0)return p(this.m()*P.m());const L=this.g.length+P.g.length,I=[];for(var O=0;O<2*L;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(let F=0;F<P.g.length;F++){const Y=this.i(O)>>>16,q=this.i(O)&65535,de=P.i(F)>>>16,ge=P.i(F)&65535;I[2*O+2*F]+=q*ge,D(I,2*O+2*F),I[2*O+2*F+1]+=Y*ge,D(I,2*O+2*F+1),I[2*O+2*F+1]+=q*de,D(I,2*O+2*F+1),I[2*O+2*F+2]+=Y*de,D(I,2*O+2*F+2)}for(P=0;P<L;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=L;P<2*L;P++)I[P]=0;return new l(I,0)};function D(P,L){for(;(P[L]&65535)!=P[L];)P[L+1]+=P[L]>>>16,P[L]&=65535,L++}function V(P,L){this.g=P,this.h=L}function z(P,L){if(M(L))throw Error("division by zero");if(M(P))return new V(_,_);if(C(P))return L=z(w(P),L),new V(w(L.g),w(L.h));if(C(L))return L=z(P,w(L)),new V(w(L.g),L.h);if(P.g.length>30){if(C(P)||C(L))throw Error("slowDivide_ only works with positive integers.");for(var I=S,O=L;O.l(P)<=0;)I=j(I),O=j(O);var F=G(I,1),Y=G(O,1);for(O=G(O,2),I=G(I,2);!M(O);){var q=Y.add(O);q.l(P)<=0&&(F=F.add(I),Y=q),O=G(O,1),I=G(I,1)}return L=b(P,F.j(L)),new V(F,L)}for(F=_;P.l(L)>=0;){for(I=Math.max(1,Math.floor(P.m()/L.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),Y=p(I),q=Y.j(L);C(q)||q.l(P)>0;)I-=O,Y=p(I),q=Y.j(L);M(Y)&&(Y=S),F=F.add(Y),P=b(P,q)}return new V(F,P)}i.B=function(P){return z(this,P).h},i.and=function(P){const L=Math.max(this.g.length,P.g.length),I=[];for(let O=0;O<L;O++)I[O]=this.i(O)&P.i(O);return new l(I,this.h&P.h)},i.or=function(P){const L=Math.max(this.g.length,P.g.length),I=[];for(let O=0;O<L;O++)I[O]=this.i(O)|P.i(O);return new l(I,this.h|P.h)},i.xor=function(P){const L=Math.max(this.g.length,P.g.length),I=[];for(let O=0;O<L;O++)I[O]=this.i(O)^P.i(O);return new l(I,this.h^P.h)};function j(P){const L=P.g.length+1,I=[];for(let O=0;O<L;O++)I[O]=P.i(O)<<1|P.i(O-1)>>>31;return new l(I,P.h)}function G(P,L){const I=L>>5;L%=32;const O=P.g.length-I,F=[];for(let Y=0;Y<O;Y++)F[Y]=L>0?P.i(Y+I)>>>L|P.i(Y+I+1)<<32-L:P.i(Y+I);return new l(F,P.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,MD=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,Uh=l}).apply(typeof ER<"u"?ER:typeof self<"u"?self:typeof window<"u"?window:{});var l0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wD,Oy,RD,uS,hA,CD,ID,DD;(function(){var i,e=Object.defineProperty;function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof l0=="object"&&l0];for(var N=0;N<v.length;++N){var k=v[N];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var n=t(this);function s(v,N){if(N)e:{var k=n;v=v.split(".");for(var $=0;$<v.length-1;$++){var xe=v[$];if(!(xe in k))break e;k=k[xe]}v=v[v.length-1],$=k[v],N=N($),N!=$&&N!=null&&e(k,v,{configurable:!0,writable:!0,value:N})}}s("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(v){return v||function(N){var k=[],$;for($ in N)Object.prototype.hasOwnProperty.call(N,$)&&k.push([$,N[$]]);return k}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(v){var N=typeof v;return N=="object"&&v!=null||N=="function"}function d(v,N,k){return v.call.apply(v.bind,arguments)}function p(v,N,k){return p=d,p.apply(null,arguments)}function y(v,N){var k=Array.prototype.slice.call(arguments,1);return function(){var $=k.slice();return $.push.apply($,arguments),v.apply(this,$)}}function _(v,N){function k(){}k.prototype=N.prototype,v.Z=N.prototype,v.prototype=new k,v.prototype.constructor=v,v.Ob=function($,xe,Ce){for(var rt=Array(arguments.length-2),an=2;an<arguments.length;an++)rt[an-2]=arguments[an];return N.prototype[xe].apply($,rt)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function T(v){const N=v.length;if(N>0){const k=Array(N);for(let $=0;$<N;$++)k[$]=v[$];return k}return[]}function M(v,N){for(let $=1;$<arguments.length;$++){const xe=arguments[$];var k=typeof xe;if(k=k!="object"?k:xe?Array.isArray(xe)?"array":k:"null",k=="array"||k=="object"&&typeof xe.length=="number"){k=v.length||0;const Ce=xe.length||0;v.length=k+Ce;for(let rt=0;rt<Ce;rt++)v[k+rt]=xe[rt]}else v.push(xe)}}class C{constructor(N,k){this.i=N,this.j=k,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function w(v){l.setTimeout(()=>{throw v},0)}function b(){var v=P;let N=null;return v.g&&(N=v.g,v.g=v.g.next,v.g||(v.h=null),N.next=null),N}class D{constructor(){this.h=this.g=null}add(N,k){const $=V.get();$.set(N,k),this.h?this.h.next=$:this.g=$,this.h=$}}var V=new C(()=>new z,v=>v.reset());class z{constructor(){this.next=this.g=this.h=null}set(N,k){this.h=N,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let j,G=!1,P=new D,L=()=>{const v=Promise.resolve(void 0);j=()=>{v.then(I)}};function I(){for(var v;v=b();){try{v.h.call(v.g)}catch(k){w(k)}var N=V;N.j(v),N.h<100&&(N.h++,v.next=N.g,N.g=v)}G=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(v,N){this.type=v,this.g=this.target=N,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var Y=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var v=!1,N=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const k=()=>{};l.addEventListener("test",k,N),l.removeEventListener("test",k,N)}catch{}return v})();function q(v){return/^[\s\xa0]*$/.test(v)}function de(v,N){F.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,N)}_(de,F),de.prototype.init=function(v,N){const k=this.type=v.type,$=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=N,N=v.relatedTarget,N||(k=="mouseover"?N=v.fromElement:k=="mouseout"&&(N=v.toElement)),this.relatedTarget=N,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),X=0;function ee(v,N,k,$,xe){this.listener=v,this.proxy=null,this.src=N,this.type=k,this.capture=!!$,this.ha=xe,this.key=++X,this.da=this.fa=!1}function ne(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function pe(v,N,k){for(const $ in v)N.call(k,v[$],$,v)}function re(v,N){for(const k in v)N.call(void 0,v[k],k,v)}function J(v){const N={};for(const k in v)N[k]=v[k];return N}const le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function De(v,N){let k,$;for(let xe=1;xe<arguments.length;xe++){$=arguments[xe];for(k in $)v[k]=$[k];for(let Ce=0;Ce<le.length;Ce++)k=le[Ce],Object.prototype.hasOwnProperty.call($,k)&&(v[k]=$[k])}}function Re(v){this.src=v,this.g={},this.h=0}Re.prototype.add=function(v,N,k,$,xe){const Ce=v.toString();v=this.g[Ce],v||(v=this.g[Ce]=[],this.h++);const rt=Te(v,N,$,xe);return rt>-1?(N=v[rt],k||(N.fa=!1)):(N=new ee(N,this.src,Ce,!!$,xe),N.fa=k,v.push(N)),N};function nt(v,N){const k=N.type;if(k in v.g){var $=v.g[k],xe=Array.prototype.indexOf.call($,N,void 0),Ce;(Ce=xe>=0)&&Array.prototype.splice.call($,xe,1),Ce&&(ne(N),v.g[k].length==0&&(delete v.g[k],v.h--))}}function Te(v,N,k,$){for(let xe=0;xe<v.length;++xe){const Ce=v[xe];if(!Ce.da&&Ce.listener==N&&Ce.capture==!!k&&Ce.ha==$)return xe}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),at={};function pt(v,N,k,$,xe){if(Array.isArray(N)){for(let Ce=0;Ce<N.length;Ce++)pt(v,N[Ce],k,$,xe);return null}return k=ut(k),v&&v[ge]?v.J(N,k,u($)?!!$.capture:!1,xe):bt(v,N,k,!1,$,xe)}function bt(v,N,k,$,xe,Ce){if(!N)throw Error("Invalid event type");const rt=u(xe)?!!xe.capture:!!xe;let an=Be(v);if(an||(v[Le]=an=new Re(v)),k=an.add(N,k,$,rt,Ce),k.proxy)return k;if($=Zt(),k.proxy=$,$.src=v,$.listener=k,v.addEventListener)Y||(xe=rt),xe===void 0&&(xe=!1),v.addEventListener(N.toString(),$,xe);else if(v.attachEvent)v.attachEvent(qe(N.toString()),$);else if(v.addListener&&v.removeListener)v.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Zt(){function v(k){return N.call(v.src,v.listener,k)}const N=ke;return v}function An(v,N,k,$,xe){if(Array.isArray(N))for(var Ce=0;Ce<N.length;Ce++)An(v,N[Ce],k,$,xe);else $=u($)?!!$.capture:!!$,k=ut(k),v&&v[ge]?(v=v.i,Ce=String(N).toString(),Ce in v.g&&(N=v.g[Ce],k=Te(N,k,$,xe),k>-1&&(ne(N[k]),Array.prototype.splice.call(N,k,1),N.length==0&&(delete v.g[Ce],v.h--)))):v&&(v=Be(v))&&(N=v.g[N.toString()],v=-1,N&&(v=Te(N,k,$,xe)),(k=v>-1?N[v]:null)&&se(k))}function se(v){if(typeof v!="number"&&v&&!v.da){var N=v.src;if(N&&N[ge])nt(N.i,v);else{var k=v.type,$=v.proxy;N.removeEventListener?N.removeEventListener(k,$,v.capture):N.detachEvent?N.detachEvent(qe(k),$):N.addListener&&N.removeListener&&N.removeListener($),(k=Be(N))?(nt(k,v),k.h==0&&(k.src=null,N[Le]=null)):ne(v)}}}function qe(v){return v in at?at[v]:at[v]="on"+v}function ke(v,N){if(v.da)v=!0;else{N=new de(N,this);const k=v.listener,$=v.ha||v.src;v.fa&&se(v),v=k.call($,N)}return v}function Be(v){return v=v[Le],v instanceof Re?v:null}var Ve="__closure_events_fn_"+(Math.random()*1e9>>>0);function ut(v){return typeof v=="function"?v:(v[Ve]||(v[Ve]=function(N){return v.handleEvent(N)}),v[Ve])}function je(){O.call(this),this.i=new Re(this),this.M=this,this.G=null}_(je,O),je.prototype[ge]=!0,je.prototype.removeEventListener=function(v,N,k,$){An(this,v,N,k,$)};function Qe(v,N){var k,$=v.G;if($)for(k=[];$;$=$.G)k.push($);if(v=v.M,$=N.type||N,typeof N=="string")N=new F(N,v);else if(N instanceof F)N.target=N.target||v;else{var xe=N;N=new F($,v),De(N,xe)}xe=!0;let Ce,rt;if(k)for(rt=k.length-1;rt>=0;rt--)Ce=N.g=k[rt],xe=Vt(Ce,$,!0,N)&&xe;if(Ce=N.g=v,xe=Vt(Ce,$,!0,N)&&xe,xe=Vt(Ce,$,!1,N)&&xe,k)for(rt=0;rt<k.length;rt++)Ce=N.g=k[rt],xe=Vt(Ce,$,!1,N)&&xe}je.prototype.N=function(){if(je.Z.N.call(this),this.i){var v=this.i;for(const N in v.g){const k=v.g[N];for(let $=0;$<k.length;$++)ne(k[$]);delete v.g[N],v.h--}}this.G=null},je.prototype.J=function(v,N,k,$){return this.i.add(String(v),N,!1,k,$)},je.prototype.K=function(v,N,k,$){return this.i.add(String(v),N,!0,k,$)};function Vt(v,N,k,$){if(N=v.i.g[String(N)],!N)return!0;N=N.concat();let xe=!0;for(let Ce=0;Ce<N.length;++Ce){const rt=N[Ce];if(rt&&!rt.da&&rt.capture==k){const an=rt.listener,Ai=rt.ha||rt.src;rt.fa&&nt(v.i,rt),xe=an.call(Ai,$)!==!1&&xe}}return xe&&!$.defaultPrevented}function Wt(v,N){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=p(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:l.setTimeout(v,N||0)}function te(v){v.g=Wt(()=>{v.g=null,v.i&&(v.i=!1,te(v))},v.l);const N=v.h;v.h=null,v.m.apply(null,N)}class W extends O{constructor(N,k){super(),this.m=N,this.l=k,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:te(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Se(v){O.call(this),this.h=v,this.g={}}_(Se,O);var Oe=[];function Ze(v){pe(v.g,function(N,k){this.g.hasOwnProperty(k)&&se(N)},v),v.g={}}Se.prototype.N=function(){Se.Z.N.call(this),Ze(this)},Se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pe=l.JSON.stringify,It=l.JSON.parse,lt=class{stringify(v){return l.JSON.stringify(v,void 0)}parse(v){return l.JSON.parse(v,void 0)}};function Mt(){}function wt(){}var Ke={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function st(){F.call(this,"d")}_(st,F);function Ct(){F.call(this,"c")}_(Ct,F);var mt={},dt=null;function Gt(){return dt=dt||new je}mt.Ia="serverreachability";function he(v){F.call(this,mt.Ia,v)}_(he,F);function tt(v){const N=Gt();Qe(N,new he(N))}mt.STAT_EVENT="statevent";function ot(v,N){F.call(this,mt.STAT_EVENT,v),this.stat=N}_(ot,F);function ft(v){const N=Gt();Qe(N,new ot(N,v))}mt.Ja="timingevent";function et(v,N){F.call(this,mt.Ja,v),this.size=N}_(et,F);function Fe(v,N){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){v()},N)}function vt(){this.g=!0}vt.prototype.ua=function(){this.g=!1};function qt(v,N,k,$,xe,Ce){v.info(function(){if(v.g)if(Ce){var rt="",an=Ce.split("&");for(let Cn=0;Cn<an.length;Cn++){var Ai=an[Cn].split("=");if(Ai.length>1){const oi=Ai[0];Ai=Ai[1];const ls=oi.split("_");rt=ls.length>=2&&ls[1]=="type"?rt+(oi+"="+Ai+"&"):rt+(oi+"=redacted&")}}}else rt=null;else rt=Ce;return"XMLHTTP REQ ("+$+") [attempt "+xe+"]: "+N+`
`+k+`
`+rt})}function Rn(v,N,k,$,xe,Ce,rt){v.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+xe+"]: "+N+`
`+k+`
`+Ce+" "+rt})}function sn(v,N,k,$){v.info(function(){return"XMLHTTP TEXT ("+N+"): "+js(v,k)+($?" "+$:"")})}function as(v,N){v.info(function(){return"TIMEOUT: "+N})}vt.prototype.info=function(){};function js(v,N){if(!v.g)return N;if(!N)return null;try{const Ce=JSON.parse(N);if(Ce){for(v=0;v<Ce.length;v++)if(Array.isArray(Ce[v])){var k=Ce[v];if(!(k.length<2)){var $=k[1];if(Array.isArray($)&&!($.length<1)){var xe=$[0];if(xe!="noop"&&xe!="stop"&&xe!="close")for(let rt=1;rt<$.length;rt++)$[rt]=""}}}}return Pe(Ce)}catch{return N}}var Ia={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Da;function Ss(){}_(Ss,Mt),Ss.prototype.g=function(){return new XMLHttpRequest},Da=new Ss;function Pr(v){return encodeURIComponent(String(v))}function Ds(v){var N=1;v=v.split(":");const k=[];for(;N>0&&v.length;)k.push(v.shift()),N--;return v.length&&k.push(v.join(":")),k}function Ci(v,N,k,$){this.j=v,this.i=N,this.l=k,this.S=$||1,this.V=new Se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $i}function $i(){this.i=null,this.g="",this.h=!1}var ln={},xi={};function lr(v,N,k){v.M=1,v.A=Xs(Xt(N)),v.u=k,v.R=!0,No(v,null)}function No(v,N){v.F=Date.now(),cr(v),v.B=Xt(v.A);var k=v.B,$=v.S;Array.isArray($)||($=[String($)]),bl(k.i,"t",$),v.C=0,k=v.j.L,v.h=new $i,v.g=Iu(v.j,k?N:null,!v.u),v.P>0&&(v.O=new W(p(v.Y,v,v.g),v.P)),N=v.V,k=v.g,$=v.ba;var xe="readystatechange";Array.isArray(xe)||(xe&&(Oe[0]=xe.toString()),xe=Oe);for(let Ce=0;Ce<xe.length;Ce++){const rt=pt(k,xe[Ce],$||N.handleEvent,!1,N.h||N);if(!rt)break;N.g[rt.key]=rt}N=v.J?J(v.J):{},v.u?(v.v||(v.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,N)):(v.v="GET",v.g.ea(v.B,v.v,null,N)),tt(),qt(v.i,v.v,v.B,v.l,v.S,v.u)}Ci.prototype.ba=function(v){v=v.target;const N=this.O;N&&ha(v)==3?N.j():this.Y(v)},Ci.prototype.Y=function(v){try{if(v==this.g)e:{const an=ha(this.g),Ai=this.g.ya(),Cn=this.g.ca();if(!(an<3)&&(an!=3||this.g&&(this.h.h||this.g.la()||es(this.g)))){this.K||an!=4||Ai==7||(Ai==8||Cn<=0?tt(3):tt(2)),fe(this);var N=this.g.ca();this.X=N;var k=Tu(this);if(this.o=N==200,Rn(this.i,this.v,this.B,this.l,this.S,an,N),this.o){if(this.U&&!this.L){t:{if(this.g){var $,xe=this.g;if(($=xe.g?xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q($)){var Ce=$;break t}}Ce=null}if(v=Ce)sn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,me(this,v);else{this.o=!1,this.m=3,ft(12),Ae(this),Ee(this);break e}}if(this.R){v=!0;let oi;for(;!this.K&&this.C<k.length;)if(oi=xl(this,k),oi==xi){an==4&&(this.m=4,ft(14),v=!1),sn(this.i,this.l,null,"[Incomplete Response]");break}else if(oi==ln){this.m=4,ft(15),sn(this.i,this.l,k,"[Invalid Chunk]"),v=!1;break}else sn(this.i,this.l,oi,null),me(this,oi);if(bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||k.length!=0||this.h.h||(this.m=1,ft(16),v=!1),this.o=this.o&&v,!v)sn(this.i,this.l,k,"[Invalid Chunked Response]"),Ae(this),Ee(this);else if(k.length>0&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.aa&&!rt.P&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),wu(rt),rt.P=!0,ft(11))}}else sn(this.i,this.l,k,null),me(this,k);an==4&&Ae(this),this.o&&!this.K&&(an==4?Ru(this.j,this):(this.o=!1,cr(this)))}else io(this.g),N==400&&k.indexOf("Unknown SID")>0?(this.m=3,ft(12)):(this.m=0,ft(13)),Ae(this),Ee(this)}}}catch{}finally{}};function Tu(v){if(!bu(v))return v.g.la();const N=es(v.g);if(N==="")return"";let k="";const $=N.length,xe=ha(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return Ae(v),Ee(v),"";v.h.i=new l.TextDecoder}for(let Ce=0;Ce<$;Ce++)v.h.h=!0,k+=v.h.i.decode(N[Ce],{stream:!(xe&&Ce==$-1)});return N.length=0,v.h.g+=k,v.C=0,v.h.g}function bu(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function xl(v,N){var k=v.C,$=N.indexOf(`
`,k);return $==-1?xi:(k=Number(N.substring(k,$)),isNaN(k)?ln:($+=1,$+k>N.length?xi:(N=N.slice($,$+k),v.C=$+k,N)))}Ci.prototype.cancel=function(){this.K=!0,Ae(this)};function cr(v){v.T=Date.now()+v.H,Q(v,v.H)}function Q(v,N){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Fe(p(v.aa,v),N)}function fe(v){v.D&&(l.clearTimeout(v.D),v.D=null)}Ci.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(as(this.i,this.B),this.M!=2&&(tt(),ft(17)),Ae(this),this.m=2,Ee(this)):Q(this,this.T-v)};function Ee(v){v.j.I==0||v.K||Ru(v.j,v)}function Ae(v){fe(v);var N=v.O;N&&typeof N.dispose=="function"&&N.dispose(),v.O=null,Ze(v.V),v.g&&(N=v.g,v.g=null,N.abort(),N.dispose())}function me(v,N){try{var k=v.j;if(k.I!=0&&(k.g==v||Nt(k.h,v))){if(!v.L&&Nt(k.h,v)&&k.I==3){try{var $=k.Ba.g.parse(N)}catch{$=null}if(Array.isArray($)&&$.length==3){var xe=$;if(xe[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<v.F)so(k),Vo(k);else break e;Cl(k),ft(18)}}else k.xa=xe[1],0<k.xa-k.K&&xe[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=Fe(p(k.Va,k),6e3));gt(k.h)<=1&&k.ta&&(k.ta=void 0)}else La(k,11)}else if((v.L||k.g==v)&&so(k),!q(N))for(xe=k.Ba.g.parse(N),N=0;N<xe.length;N++){let Cn=xe[N];const oi=Cn[0];if(!(oi<=k.K))if(k.K=oi,Cn=Cn[1],k.I==2)if(Cn[0]=="c"){k.M=Cn[1],k.ba=Cn[2];const ls=Cn[3];ls!=null&&(k.ka=ls,k.j.info("VER="+k.ka));const gi=Cn[4];gi!=null&&(k.za=gi,k.j.info("SVER="+k.za));const fr=Cn[5];fr!=null&&typeof fr=="number"&&fr>0&&($=1.5*fr,k.O=$,k.j.info("backChannelRequestTimeoutMs_="+$)),$=k;const fa=v.g;if(fa){const zo=fa.g?fa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var Ce=$.h;Ce.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(Ce.j=Ce.l,Ce.g=new Set,Ce.h&&(Ft(Ce,Ce.h),Ce.h=null))}if($.G){const ao=fa.g?fa.g.getResponseHeader("X-HTTP-Session-Id"):null;ao&&($.wa=ao,rn($.J,$.G,ao))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-v.F,k.j.info("Handshake RTT: "+k.T+"ms")),$=k;var rt=v;if($.na=Cu($,$.L?$.ba:null,$.W),rt.L){Ut($.h,rt);var an=rt,Ai=$.O;Ai&&(an.H=Ai),an.D&&(fe(an),cr(an)),$.g=rt}else tf($);k.i.length>0&&Ua(k)}else Cn[0]!="stop"&&Cn[0]!="close"||La(k,7);else k.I==3&&(Cn[0]=="stop"||Cn[0]=="close"?Cn[0]=="stop"?La(k,7):wl(k):Cn[0]!="noop"&&k.l&&k.l.qa(Cn),k.A=0)}}tt(4)}catch{}}var We=class{constructor(v,N){this.g=v,this.map=N}};function ht(v){this.l=v||10,l.PerformanceNavigationTiming?(v=l.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xt(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function gt(v){return v.h?1:v.g?v.g.size:0}function Nt(v,N){return v.h?v.h==N:v.g?v.g.has(N):!1}function Ft(v,N){v.g?v.g.add(N):v.h=N}function Ut(v,N){v.h&&v.h==N?v.h=null:v.g&&v.g.has(N)&&v.g.delete(N)}ht.prototype.cancel=function(){if(this.i=cn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function cn(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let N=v.i;for(const k of v.g.values())N=N.concat(k.G);return N}return T(v.i)}var Nn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qn(v,N){if(v){v=v.split("&");for(let k=0;k<v.length;k++){const $=v[k].indexOf("=");let xe,Ce=null;$>=0?(xe=v[k].substring(0,$),Ce=v[k].substring($+1)):xe=v[k],N(xe,Ce?decodeURIComponent(Ce.replace(/\+/g," ")):"")}}}function gn(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;v instanceof gn?(this.l=v.l,St(this,v.j),this.o=v.o,this.g=v.g,jn(this,v.u),this.h=v.h,vn(this,Jh(v.i)),this.m=v.m):v&&(N=String(v).match(Nn))?(this.l=!1,St(this,N[1]||"",!0),this.o=ui(N[2]||""),this.g=ui(N[3]||"",!0),jn(this,N[4]),this.h=ui(N[5]||"",!0),vn(this,N[6]||"",!0),this.m=ui(N[7]||"")):(this.l=!1,this.i=new Vi(null,this.l))}gn.prototype.toString=function(){const v=[];var N=this.j;N&&v.push(ur(N,Wi,!0),":");var k=this.g;return(k||N=="file")&&(v.push("//"),(N=this.o)&&v.push(ur(N,Wi,!0),"@"),v.push(Pr(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&v.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&v.push("/"),v.push(ur(k,k.charAt(0)=="/"?Ii:os,!0))),(k=this.i.toString())&&v.push("?",k),(k=this.m)&&v.push("#",ur(k,Oo)),v.join("")},gn.prototype.resolve=function(v){const N=Xt(this);let k=!!v.j;k?St(N,v.j):k=!!v.o,k?N.o=v.o:k=!!v.g,k?N.g=v.g:k=v.u!=null;var $=v.h;if(k)jn(N,v.u);else if(k=!!v.h){if($.charAt(0)!="/")if(this.g&&!this.h)$="/"+$;else{var xe=N.h.lastIndexOf("/");xe!=-1&&($=N.h.slice(0,xe+1)+$)}if(xe=$,xe==".."||xe==".")$="";else if(xe.indexOf("./")!=-1||xe.indexOf("/.")!=-1){$=xe.lastIndexOf("/",0)==0,xe=xe.split("/");const Ce=[];for(let rt=0;rt<xe.length;){const an=xe[rt++];an=="."?$&&rt==xe.length&&Ce.push(""):an==".."?((Ce.length>1||Ce.length==1&&Ce[0]!="")&&Ce.pop(),$&&rt==xe.length&&Ce.push("")):(Ce.push(an),$=!0)}$=Ce.join("/")}else $=xe}return k?N.h=$:k=v.i.toString()!=="",k?vn(N,Jh(v.i)):k=!!v.m,k&&(N.m=v.m),N};function Xt(v){return new gn(v)}function St(v,N,k){v.j=k?ui(N,!0):N,v.j&&(v.j=v.j.replace(/:$/,""))}function jn(v,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);v.u=N}else v.u=null}function vn(v,N,k){N instanceof Vi?(v.i=N,Tc(v.i,v.l)):(k||(N=ur(N,Ti)),v.i=new Vi(N,v.l))}function rn(v,N,k){v.i.set(N,k)}function Xs(v){return rn(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function ui(v,N){return v?N?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function ur(v,N,k){return typeof v=="string"?(v=encodeURI(v).replace(N,Sn),k&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Sn(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Wi=/[#\/\?@]/g,os=/[#\?:]/g,Ii=/[#\?]/g,Ti=/[#\?@]/g,Oo=/#/g;function Vi(v,N){this.h=this.g=null,this.i=v||null,this.j=!!N}function Ws(v){v.g||(v.g=new Map,v.h=0,v.i&&Qn(v.i,function(N,k){v.add(decodeURIComponent(N.replace(/\+/g," ")),k)}))}i=Vi.prototype,i.add=function(v,N){Ws(this),this.i=null,v=Uo(this,v);let k=this.g.get(v);return k||this.g.set(v,k=[]),k.push(N),this.h+=1,this};function xc(v,N){Ws(v),N=Uo(v,N),v.g.has(N)&&(v.i=null,v.h-=v.g.get(N).length,v.g.delete(N))}function Tl(v,N){return Ws(v),N=Uo(v,N),v.g.has(N)}i.forEach=function(v,N){Ws(this),this.g.forEach(function(k,$){k.forEach(function(xe){v.call(N,xe,$,this)},this)},this)};function Au(v,N){Ws(v);let k=[];if(typeof N=="string")Tl(v,N)&&(k=k.concat(v.g.get(Uo(v,N))));else for(v=Array.from(v.g.values()),N=0;N<v.length;N++)k=k.concat(v[N]);return k}i.set=function(v,N){return Ws(this),this.i=null,v=Uo(this,v),Tl(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[N]),this.h+=1,this},i.get=function(v,N){return v?(v=Au(this,v),v.length>0?String(v[0]):N):N};function bl(v,N,k){xc(v,N),k.length>0&&(v.i=null,v.g.set(Uo(v,N),T(k)),v.h+=k.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],N=Array.from(this.g.keys());for(let $=0;$<N.length;$++){var k=N[$];const xe=Pr(k);k=Au(this,k);for(let Ce=0;Ce<k.length;Ce++){let rt=xe;k[Ce]!==""&&(rt+="="+Pr(k[Ce])),v.push(rt)}}return this.i=v.join("&")};function Jh(v){const N=new Vi;return N.i=v.i,v.g&&(N.g=new Map(v.g),N.h=v.h),N}function Uo(v,N){return N=String(N),v.j&&(N=N.toLowerCase()),N}function Tc(v,N){N&&!v.j&&(Ws(v),v.i=null,v.g.forEach(function(k,$){const xe=$.toLowerCase();$!=xe&&(xc(this,$),bl(this,xe,k))},v)),v.j=N}function ca(v,N){const k=new vt;if(l.Image){const $=new Image;$.onload=y(Vr,k,"TestLoadImage: loaded",!0,N,$),$.onerror=y(Vr,k,"TestLoadImage: error",!1,N,$),$.onabort=y(Vr,k,"TestLoadImage: abort",!1,N,$),$.ontimeout=y(Vr,k,"TestLoadImage: timeout",!1,N,$),l.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=v}else N(!1)}function bc(v,N){const k=new vt,$=new AbortController,xe=setTimeout(()=>{$.abort(),Vr(k,"TestPingServer: timeout",!1,N)},1e4);fetch(v,{signal:$.signal}).then(Ce=>{clearTimeout(xe),Ce.ok?Vr(k,"TestPingServer: ok",!0,N):Vr(k,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(xe),Vr(k,"TestPingServer: error",!1,N)})}function Vr(v,N,k,$,xe){try{xe&&(xe.onload=null,xe.onerror=null,xe.onabort=null,xe.ontimeout=null),$(k)}catch{}}function Lo(){this.g=new lt}function ua(v){this.i=v.Sb||null,this.h=v.ab||!1}_(ua,Mt),ua.prototype.g=function(){return new Al(this.i,this.h)};function Al(v,N){je.call(this),this.H=v,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Al,je),i=Al.prototype,i.open=function(v,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=N,this.readyState=1,zr(this)},i.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(N.body=v),(this.H||l).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Po(this)),this.readyState=0},i.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,zr(this)),this.g&&(this.readyState=3,zr(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ac(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ac(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}i.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var N=v.value?v.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!v.done}))&&(this.response=this.responseText+=N)}v.done?Po(this):zr(this),this.readyState==3&&Ac(this)}},i.Oa=function(v){this.g&&(this.response=this.responseText=v,Po(this))},i.Na=function(v){this.g&&(this.response=v,Po(this))},i.ga=function(){this.g&&Po(this)};function Po(v){v.readyState=4,v.l=null,v.j=null,v.B=null,zr(v)}i.setRequestHeader=function(v,N){this.A.append(v,N)},i.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],N=this.h.entries();for(var k=N.next();!k.done;)k=k.value,v.push(k[0]+": "+k[1]),k=N.next();return v.join(`\r
`)};function zr(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Al.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Br(v){let N="";return pe(v,function(k,$){N+=$,N+=":",N+=k,N+=`\r
`}),N}function Ml(v,N,k){e:{for($ in k){var $=!1;break e}$=!0}$||(k=Br(k),typeof v=="string"?k!=null&&Pr(k):rn(v,N,k))}function ii(v){je.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(ii,je);var eo=/^https?$/i,Mu=["POST","PUT"];i=ii.prototype,i.Fa=function(v){this.H=v},i.ea=function(v,N,k,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);N=N?N.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Da.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(N,String(v),!0),this.B=!1}catch(Ce){Na(this,Ce);return}if(v=k||"",k=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var xe in $)k.set(xe,$[xe]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const Ce of $.keys())k.set(Ce,$.get(Ce));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(k.keys()).find(Ce=>Ce.toLowerCase()=="content-type"),xe=l.FormData&&v instanceof l.FormData,!(Array.prototype.indexOf.call(Mu,N,void 0)>=0)||$||xe||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ce,rt]of k)this.g.setRequestHeader(Ce,rt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(Ce){Na(this,Ce)}};function Na(v,N){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=N,v.o=5,Mc(v),no(v)}function Mc(v){v.A||(v.A=!0,Qe(v,"complete"),Qe(v,"error"))}i.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,Qe(this,"complete"),Qe(this,"abort"),no(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),no(this,!0)),ii.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?to(this):this.Xa())},i.Xa=function(){to(this)};function to(v){if(v.h&&typeof a<"u"){if(v.v&&ha(v)==4)setTimeout(v.Ca.bind(v),0);else if(Qe(v,"readystatechange"),ha(v)==4){v.h=!1;try{const Ce=v.ca();e:switch(Ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var k;if(!(k=N)){var $;if($=Ce===0){let rt=String(v.D).match(Nn)[1]||null;!rt&&l.self&&l.self.location&&(rt=l.self.location.protocol.slice(0,-1)),$=!eo.test(rt?rt.toLowerCase():"")}k=$}if(k)Qe(v,"complete"),Qe(v,"success");else{v.o=6;try{var xe=ha(v)>2?v.g.statusText:""}catch{xe=""}v.l=xe+" ["+v.ca()+"]",Mc(v)}}finally{no(v)}}}}function no(v,N){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const k=v.g;v.g=null,N||Qe(v,"ready");try{k.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ha(v){return v.g?v.g.readyState:0}i.ca=function(){try{return ha(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(v){if(this.g){var N=this.g.responseText;return v&&N.indexOf(v)==0&&(N=N.substring(v.length)),It(N)}};function es(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function io(v){const N={};v=(v.g&&ha(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<v.length;$++){if(q(v[$]))continue;var k=Ds(v[$]);const xe=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const Ce=N[xe]||[];N[xe]=Ce,Ce.push(k)}re(N,function($){return $.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oa(v,N,k){return k&&k.internalChannelParams&&k.internalChannelParams[v]||N}function hr(v){this.za=0,this.i=[],this.j=new vt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oa("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oa("baseRetryDelayMs",5e3,v),this.Za=Oa("retryDelaySeedMs",1e4,v),this.Ta=Oa("forwardChannelMaxRetries",2,v),this.va=Oa("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new ht(v&&v.concurrentRequestLimit),this.Ba=new Lo,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=hr.prototype,i.ka=8,i.I=1,i.connect=function(v,N,k,$){ft(0),this.W=v,this.H=N||{},k&&$!==void 0&&(this.H.OSID=k,this.H.OAID=$),this.F=this.X,this.J=Cu(this,null,this.W),Ua(this)};function wl(v){if(Rl(v),v.I==3){var N=v.V++,k=Xt(v.J);if(rn(k,"SID",v.M),rn(k,"RID",N),rn(k,"TYPE","terminate"),bi(v,k),N=new Ci(v,v.j,N),N.M=2,N.A=Xs(Xt(k)),k=!1,l.navigator&&l.navigator.sendBeacon)try{k=l.navigator.sendBeacon(N.A.toString(),"")}catch{}!k&&l.Image&&(new Image().src=N.A,k=!0),k||(N.g=Iu(N.j,null),N.g.ea(N.A)),N.F=Date.now(),cr(N)}rf(v)}function Vo(v){v.g&&(wu(v),v.g.cancel(),v.g=null)}function Rl(v){Vo(v),v.v&&(l.clearTimeout(v.v),v.v=null),so(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&l.clearTimeout(v.m),v.m=null)}function Ua(v){if(!xt(v.h)&&!v.m){v.m=!0;var N=v.Ea;j||L(),G||(j(),G=!0),P.add(N,v),v.D=0}}function wc(v,N){return gt(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=N.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Fe(p(v.Ea,v,N),sf(v,v.D)),v.D++,!0)}i.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const xe=new Ci(this,this.j,v);let Ce=this.o;if(this.U&&(Ce?(Ce=J(Ce),De(Ce,this.U)):Ce=this.U),this.u!==null||this.R||(xe.J=Ce,Ce=null),this.S)e:{for(var N=0,k=0;k<this.i.length;k++){t:{var $=this.i[k];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(N+=$,N>4096){N=k;break e}if(N===4096||k===this.i.length-1){N=k+1;break e}}N=1e3}else N=1e3;N=ef(this,xe,N),k=Xt(this.J),rn(k,"RID",v),rn(k,"CVER",22),this.G&&rn(k,"X-HTTP-Session-Id",this.G),bi(this,k),Ce&&(this.R?N="headers="+Pr(Br(Ce))+"&"+N:this.u&&Ml(k,this.u,Ce)),Ft(this.h,xe),this.Ra&&rn(k,"TYPE","init"),this.S?(rn(k,"$req",N),rn(k,"SID","null"),xe.U=!0,lr(xe,k,null)):lr(xe,k,N),this.I=2}}else this.I==3&&(v?$h(this,v):this.i.length==0||xt(this.h)||$h(this))};function $h(v,N){var k;N?k=N.l:k=v.V++;const $=Xt(v.J);rn($,"SID",v.M),rn($,"RID",k),rn($,"AID",v.K),bi(v,$),v.u&&v.o&&Ml($,v.u,v.o),k=new Ci(v,v.j,k,v.D+1),v.u===null&&(k.J=v.o),N&&(v.i=N.G.concat(v.i)),N=ef(v,k,1e3),k.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Ft(v.h,k),lr(k,$,N)}function bi(v,N){v.H&&pe(v.H,function(k,$){rn(N,$,k)}),v.l&&pe({},function(k,$){rn(N,$,k)})}function ef(v,N,k){k=Math.min(v.i.length,k);const $=v.l?p(v.l.Ka,v.l,v):null;e:{var xe=v.i;let an=-1;for(;;){const Ai=["count="+k];an==-1?k>0?(an=xe[0].g,Ai.push("ofs="+an)):an=0:Ai.push("ofs="+an);let Cn=!0;for(let oi=0;oi<k;oi++){var Ce=xe[oi].g;const ls=xe[oi].map;if(Ce-=an,Ce<0)an=Math.max(0,xe[oi].g-100),Cn=!1;else try{Ce="req"+Ce+"_"||"";try{var rt=ls instanceof Map?ls:Object.entries(ls);for(const[gi,fr]of rt){let fa=fr;u(fr)&&(fa=Pe(fr)),Ai.push(Ce+gi+"="+encodeURIComponent(fa))}}catch(gi){throw Ai.push(Ce+"type="+encodeURIComponent("_badmap")),gi}}catch{$&&$(ls)}}if(Cn){rt=Ai.join("&");break e}}rt=void 0}return v=v.i.splice(0,k),N.G=v,rt}function tf(v){if(!v.g&&!v.v){v.Y=1;var N=v.Da;j||L(),G||(j(),G=!0),P.add(N,v),v.A=0}}function Cl(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Fe(p(v.Da,v),sf(v,v.A)),v.A++,!0)}i.Da=function(){if(this.v=null,nf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Fe(p(this.Wa,this),v)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ft(10),Vo(this),nf(this))};function wu(v){v.B!=null&&(l.clearTimeout(v.B),v.B=null)}function nf(v){v.g=new Ci(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var N=Xt(v.na);rn(N,"RID","rpc"),rn(N,"SID",v.M),rn(N,"AID",v.K),rn(N,"CI",v.F?"0":"1"),!v.F&&v.ia&&rn(N,"TO",v.ia),rn(N,"TYPE","xmlhttp"),bi(v,N),v.u&&v.o&&Ml(N,v.u,v.o),v.O&&(v.g.H=v.O);var k=v.g;v=v.ba,k.M=1,k.A=Xs(Xt(N)),k.u=null,k.R=!0,No(k,v)}i.Va=function(){this.C!=null&&(this.C=null,Vo(this),Cl(this),ft(19))};function so(v){v.C!=null&&(l.clearTimeout(v.C),v.C=null)}function Ru(v,N){var k=null;if(v.g==N){so(v),wu(v),v.g=null;var $=2}else if(Nt(v.h,N))k=N.G,Ut(v.h,N),$=1;else return;if(v.I!=0){if(N.o)if($==1){k=N.u?N.u.length:0,N=Date.now()-N.F;var xe=v.D;$=Gt(),Qe($,new et($,k)),Ua(v)}else tf(v);else if(xe=N.m,xe==3||xe==0&&N.X>0||!($==1&&wc(v,N)||$==2&&Cl(v)))switch(k&&k.length>0&&(N=v.h,N.i=N.i.concat(k)),xe){case 1:La(v,5);break;case 4:La(v,10);break;case 3:La(v,6);break;default:La(v,2)}}}function sf(v,N){let k=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(k*=2),k*N}function La(v,N){if(v.j.info("Error code "+N),N==2){var k=p(v.bb,v),$=v.Ua;const xe=!$;$=new gn($||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||St($,"https"),Xs($),xe?ca($.toString(),k):bc($.toString(),k)}else ft(2);v.I=0,v.l&&v.l.pa(N),rf(v),Rl(v)}i.bb=function(v){v?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function rf(v){if(v.I=0,v.ja=[],v.l){const N=cn(v.h);(N.length!=0||v.i.length!=0)&&(M(v.ja,N),M(v.ja,v.i),v.h.i.length=0,T(v.i),v.i.length=0),v.l.oa()}}function Cu(v,N,k){var $=k instanceof gn?Xt(k):new gn(k);if($.g!="")N&&($.g=N+"."+$.g),jn($,$.u);else{var xe=l.location;$=xe.protocol,N=N?N+"."+xe.hostname:xe.hostname,xe=+xe.port;const Ce=new gn(null);$&&St(Ce,$),N&&(Ce.g=N),xe&&jn(Ce,xe),k&&(Ce.h=k),$=Ce}return k=v.G,N=v.wa,k&&N&&rn($,k,N),rn($,"VER",v.ka),bi(v,$),$}function Iu(v,N,k){if(N&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=v.Aa&&!v.ma?new ii(new ua({ab:k})):new ii(v.ma),N.Fa(v.L),N}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function af(){}i=af.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function ro(){}ro.prototype.g=function(v,N){return new Es(v,N)};function Es(v,N){je.call(this),this.g=new hr(N),this.l=v,this.h=N&&N.messageUrlParams||null,v=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(v?v["X-WebChannel-Content-Type"]=N.messageContentType:v={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(v?v["X-WebChannel-Client-Profile"]=N.sa:v={"X-WebChannel-Client-Profile":N.sa}),this.g.U=v,(v=N&&N.Qb)&&!q(v)&&(this.g.u=v),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!q(N)&&(this.g.G=N,v=this.h,v!==null&&N in v&&(v=this.h,N in v&&delete v[N])),this.j=new Pa(this)}_(Es,je),Es.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Es.prototype.close=function(){wl(this.g)},Es.prototype.o=function(v){var N=this.g;if(typeof v=="string"){var k={};k.__data__=v,v=k}else this.v&&(k={},k.__data__=Pe(v),v=k);N.i.push(new We(N.Ya++,v)),N.I==3&&Ua(N)},Es.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,Es.Z.N.call(this)};function Du(v){st.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var N=v.__sm__;if(N){e:{for(const k in N){v=k;break e}v=void 0}(this.i=v)&&(v=this.i,N=N!==null&&v in N?N[v]:void 0),this.data=N}else this.data=v}_(Du,st);function of(){Ct.call(this),this.status=1}_(of,Ct);function Pa(v){this.g=v}_(Pa,af),Pa.prototype.ra=function(){Qe(this.g,"a")},Pa.prototype.qa=function(v){Qe(this.g,new Du(v))},Pa.prototype.pa=function(v){Qe(this.g,new of)},Pa.prototype.oa=function(){Qe(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,Es.prototype.send=Es.prototype.o,Es.prototype.open=Es.prototype.m,Es.prototype.close=Es.prototype.close,DD=function(){return new ro},ID=function(){return Gt()},CD=mt,hA={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ia.NO_ERROR=0,Ia.TIMEOUT=8,Ia.HTTP_ERROR=6,uS=Ia,qs.COMPLETE="complete",RD=qs,wt.EventType=Ke,Ke.OPEN="a",Ke.CLOSE="b",Ke.ERROR="c",Ke.MESSAGE="d",je.prototype.listen=je.prototype.J,Oy=wt,ii.prototype.listenOnce=ii.prototype.K,ii.prototype.getLastError=ii.prototype.Ha,ii.prototype.getLastErrorCode=ii.prototype.ya,ii.prototype.getStatus=ii.prototype.ca,ii.prototype.getResponseJson=ii.prototype.La,ii.prototype.getResponseText=ii.prototype.la,ii.prototype.send=ii.prototype.ea,ii.prototype.setWithCredentials=ii.prototype.Fa,wD=ii}).apply(typeof l0<"u"?l0:typeof self<"u"?self:typeof window<"u"?window:{});const xR="@firebase/firestore",TR="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gm="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new GE("@firebase/firestore");function im(){return pd.logLevel}function Rt(i,...e){if(pd.logLevel<=Pn.DEBUG){const t=e.map(pM);pd.debug(`Firestore (${Gm}): ${i}`,...t)}}function pu(i,...e){if(pd.logLevel<=Pn.ERROR){const t=e.map(pM);pd.error(`Firestore (${Gm}): ${i}`,...t)}}function Em(i,...e){if(pd.logLevel<=Pn.WARN){const t=e.map(pM);pd.warn(`Firestore (${Gm}): ${i}`,...t)}}function pM(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(i,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,ND(i,n,t)}function ND(i,e,t){let n=`FIRESTORE (${Gm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw pu(n),new Error(n)}function ai(i,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,i||ND(e,s,n)}function fn(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tt extends Sl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cr.UNAUTHENTICATED)))}shutdown(){}}class Kz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Qz{constructor(e){this.t=e,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ai(this.o===void 0,42304);let n=this.i;const s=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let a=new cu;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new cu,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{Rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(Rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new cu)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(Rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ai(typeof n.accessToken=="string",31837,{l:n}),new OD(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ai(e===null||typeof e=="string",2055,{h:e}),new Cr(e)}}class Zz{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Jz{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Zz(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $z{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ul(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ai(this.o===void 0,3512);const n=a=>{a.error!=null&&Rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,Rt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const s=a=>{Rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bR(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ai(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new bR(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eB(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=eB(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<t&&(n+=e.charAt(s[a]%62))}return n}}function Vn(i,e){return i<e?-1:i>e?1:0}function fA(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++){const s=i.charAt(n),a=e.charAt(n);if(s!==a)return BT(s)===BT(a)?Vn(s,a):BT(s)?1:-1}return Vn(i.length,e.length)}const tB=55296,nB=57343;function BT(i){const e=i.charCodeAt(0);return e>=tB&&e<=nB}function xm(i,e,t){return i.length===e.length&&i.every(((n,s)=>t(n,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="__name__";class sc{constructor(e,t,n){t===void 0?t=0:t>e.length&&en(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&en(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return sc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sc?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const a=sc.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Vn(e.length,t.length)}static compareSegments(e,t){const n=sc.isNumericId(e),s=sc.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?sc.extractNumericId(e).compare(sc.extractNumericId(t)):fA(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Uh.fromString(e.substring(4,e.length-2))}}class Ei extends sc{construct(e,t,n){return new Ei(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Tt(Xe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new Ei(t)}static emptyPath(){return new Ei([])}}const iB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sr extends sc{construct(e,t,n){return new sr(e,t,n)}static isValidIdentifier(e){return iB.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===AR}static keyField(){return new sr([AR])}static fromServerFormat(e){const t=[];let n="",s=0;const a=()=>{if(n.length===0)throw new Tt(Xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Tt(Xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Tt(Xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(n+=u,s++):(a(),s++)}if(a(),l)throw new Tt(Xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sr(t)}static emptyPath(){return new sr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.path=e}static fromPath(e){return new kt(Ei.fromString(e))}static fromName(e){return new kt(Ei.fromString(e).popFirst(5))}static empty(){return new kt(Ei.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ei.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ei.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new kt(new Ei(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(i,e,t){if(!t)throw new Tt(Xe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function sB(i,e,t,n){if(e===!0&&n===!0)throw new Tt(Xe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function MR(i){if(!kt.isDocumentKey(i))throw new Tt(Xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function wR(i){if(kt.isDocumentKey(i))throw new Tt(Xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function LD(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function jE(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":en(12329,{type:typeof i})}function mu(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Tt(Xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jE(i);throw new Tt(Xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(i,e){const t={typeString:i};return e&&(t.value=e),t}function L_(i,e){if(!LD(i))throw new Tt(Xe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in i)){t=`JSON missing required field: '${n}'`;break}const l=i[n];if(s&&typeof l!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${n}' field to equal '${a.value}'`;break}}if(t)throw new Tt(Xe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=-62135596800,CR=1e6;class Ri{static now(){return Ri.fromMillis(Date.now())}static fromDate(e){return Ri.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*CR);return new Ri(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Tt(Xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Tt(Xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<RR)throw new Tt(Xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Tt(Xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CR}_compareTo(e){return this.seconds===e.seconds?Vn(this.nanoseconds,e.nanoseconds):Vn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ri._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(L_(e,Ri._jsonSchema))return new Ri(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-RR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ri._jsonSchemaVersion="firestore/timestamp/1.0",Ri._jsonSchema={type:ys("string",Ri._jsonSchemaVersion),seconds:ys("number"),nanoseconds:ys("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{static fromTimestamp(e){return new un(e)}static min(){return new un(new Ri(0,0))}static max(){return new un(new Ri(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=-1;function rB(i,e){const t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,s=un.fromTimestamp(n===1e9?new Ri(t+1,0):new Ri(t,n));return new zh(s,kt.empty(),e)}function aB(i){return new zh(i.readTime,i.key,s_)}class zh{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new zh(un.min(),kt.empty(),s_)}static max(){return new zh(un.max(),kt.empty(),s_)}}function oB(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=kt.comparator(i.documentKey,e.documentKey),t!==0?t:Vn(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jm(i){if(i.code!==Xe.FAILED_PRECONDITION||i.message!==lB)throw i;Rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&en(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Je(((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Je?t:Je.resolve(t)}catch(t){return Je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Je.reject(t)}static resolve(e){return new Je(((t,n)=>{t(e)}))}static reject(e){return new Je(((t,n)=>{n(e)}))}static waitFor(e){return new Je(((t,n)=>{let s=0,a=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++a,l&&a===s&&t()}),(d=>n(d)))})),l=!0,a===s&&t()}))}static or(e){let t=Je.resolve(!1);for(const n of e)t=t.next((s=>s?Je.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,a)=>{n.push(t.call(this,s,a))})),this.waitFor(n)}static mapArray(e,t){return new Je(((n,s)=>{const a=e.length,l=new Array(a);let u=0;for(let d=0;d<a;d++){const p=d;t(e[p]).next((y=>{l[p]=y,++u,u===a&&n(l)}),(y=>s(y)))}}))}static doWhile(e,t){return new Je(((n,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):n()};a()}))}}function uB(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function qm(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qE.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=-1;function XE(i){return i==null}function CS(i){return i===0&&1/i==-1/0}function hB(i){return typeof i=="number"&&Number.isInteger(i)&&!CS(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="";function fB(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=IR(e)),e=dB(i.get(t),e);return IR(e)}function dB(i,e){let t=e;const n=i.length;for(let s=0;s<n;s++){const a=i.charAt(s);switch(a){case"\0":t+="";break;case PD:t+="";break;default:t+=a}}return t}function IR(i){return i+PD+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Rd(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function VD(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t){this.comparator=e,this.root=t||nr.EMPTY}insert(e,t){return new Xi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new Xi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new c0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new c0(this.root,e,this.comparator,!1)}getReverseIterator(){return new c0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new c0(this.root,e,this.comparator,!0)}}class c0{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nr{constructor(e,t,n,s,a){this.key=e,this.value=t,this.color=n??nr.RED,this.left=s??nr.EMPTY,this.right=a??nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,a){return new nr(e??this.key,t??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,n),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return nr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw en(43730,{key:this.key,value:this.value});if(this.right.isRed())throw en(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw en(27949);return e+(this.isRed()?0:1)}}nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw en(57766)}get value(){throw en(16141)}get color(){throw en(16727)}get left(){throw en(29726)}get right(){throw en(36894)}copy(e,t,n,s,a){return this}insert(e,t,n){return new nr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.comparator=e,this.data=new Xi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new NR(this.data.getIterator())}getIteratorFrom(e){return new NR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Rs)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rs(this.comparator);return t.data=e,t}}class NR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this.fields=e,e.sort(sr.comparator)}static empty(){return new hl([])}unionWith(e){let t=new Rs(sr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new hl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xm(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new zD("Invalid base64 string: "+a):a}})(e);return new or(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}or.EMPTY_BYTE_STRING=new or("");const pB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bh(i){if(ai(!!i,39018),typeof i=="string"){let e=0;const t=pB.exec(i);if(ai(!!t,46558,{timestamp:i}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:rs(i.seconds),nanos:rs(i.nanos)}}function rs(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Fh(i){return typeof i=="string"?or.fromBase64String(i):or.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="server_timestamp",FD="__type__",HD="__previous_value__",kD="__local_write_time__";function yM(i){return(i?.mapValue?.fields||{})[FD]?.stringValue===BD}function WE(i){const e=i.mapValue.fields[HD];return yM(e)?WE(e):e}function r_(i){const e=Bh(i.mapValue.fields[kD].timestampValue);return new Ri(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e,t,n,s,a,l,u,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y}}const IS="(default)";class a_{constructor(e,t){this.projectId=e,this.database=t||IS}static empty(){return new a_("","")}get isDefaultDatabase(){return this.database===IS}isEqual(e){return e instanceof a_&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="__type__",gB="__max__",u0={mapValue:{}},jD="__vector__",DS="value";function Hh(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?yM(i)?4:_B(i)?9007199254740991:yB(i)?10:11:en(28295,{value:i})}function yc(i,e){if(i===e)return!0;const t=Hh(i);if(t!==Hh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return r_(i).isEqual(r_(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Bh(s.timestampValue),u=Bh(a.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(s,a){return Fh(s.bytesValue).isEqual(Fh(a.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(s,a){return rs(s.geoPointValue.latitude)===rs(a.geoPointValue.latitude)&&rs(s.geoPointValue.longitude)===rs(a.geoPointValue.longitude)})(i,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return rs(s.integerValue)===rs(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=rs(s.doubleValue),u=rs(a.doubleValue);return l===u?CS(l)===CS(u):isNaN(l)&&isNaN(u)}return!1})(i,e);case 9:return xm(i.arrayValue.values||[],e.arrayValue.values||[],yc);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},u=a.mapValue.fields||{};if(DR(l)!==DR(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!yc(l[d],u[d])))return!1;return!0})(i,e);default:return en(52216,{left:i})}}function o_(i,e){return(i.values||[]).find((t=>yc(t,e)))!==void 0}function Tm(i,e){if(i===e)return 0;const t=Hh(i),n=Hh(e);if(t!==n)return Vn(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vn(i.booleanValue,e.booleanValue);case 2:return(function(a,l){const u=rs(a.integerValue||a.doubleValue),d=rs(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(i,e);case 3:return OR(i.timestampValue,e.timestampValue);case 4:return OR(r_(i),r_(e));case 5:return fA(i.stringValue,e.stringValue);case 6:return(function(a,l){const u=Fh(a),d=Fh(l);return u.compareTo(d)})(i.bytesValue,e.bytesValue);case 7:return(function(a,l){const u=a.split("/"),d=l.split("/");for(let p=0;p<u.length&&p<d.length;p++){const y=Vn(u[p],d[p]);if(y!==0)return y}return Vn(u.length,d.length)})(i.referenceValue,e.referenceValue);case 8:return(function(a,l){const u=Vn(rs(a.latitude),rs(l.latitude));return u!==0?u:Vn(rs(a.longitude),rs(l.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return UR(i.arrayValue,e.arrayValue);case 10:return(function(a,l){const u=a.fields||{},d=l.fields||{},p=u[DS]?.arrayValue,y=d[DS]?.arrayValue,_=Vn(p?.values?.length||0,y?.values?.length||0);return _!==0?_:UR(p,y)})(i.mapValue,e.mapValue);case 11:return(function(a,l){if(a===u0.mapValue&&l===u0.mapValue)return 0;if(a===u0.mapValue)return 1;if(l===u0.mapValue)return-1;const u=a.fields||{},d=Object.keys(u),p=l.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let _=0;_<d.length&&_<y.length;++_){const S=fA(d[_],y[_]);if(S!==0)return S;const T=Tm(u[d[_]],p[y[_]]);if(T!==0)return T}return Vn(d.length,y.length)})(i.mapValue,e.mapValue);default:throw en(23264,{he:t})}}function OR(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Vn(i,e);const t=Bh(i),n=Bh(e),s=Vn(t.seconds,n.seconds);return s!==0?s:Vn(t.nanos,n.nanos)}function UR(i,e){const t=i.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const a=Tm(t[s],n[s]);if(a)return a}return Vn(t.length,n.length)}function bm(i){return dA(i)}function dA(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const n=Bh(t);return`time(${n.seconds},${n.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Fh(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return kt.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let n="[",s=!0;for(const a of t.values||[])s?s=!1:n+=",",n+=dA(a);return n+"]"})(i.arrayValue):"mapValue"in i?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of n)a?a=!1:s+=",",s+=`${l}:${dA(t.fields[l])}`;return s+"}"})(i.mapValue):en(61005,{value:i})}function hS(i){switch(Hh(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=WE(i);return e?16+hS(e):16;case 5:return 2*i.stringValue.length;case 6:return Fh(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,a)=>s+hS(a)),0)})(i.arrayValue);case 10:case 11:return(function(n){let s=0;return Rd(n.fields,((a,l)=>{s+=a.length+hS(l)})),s})(i.mapValue);default:throw en(13486,{value:i})}}function LR(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function pA(i){return!!i&&"integerValue"in i}function _M(i){return!!i&&"arrayValue"in i}function PR(i){return!!i&&"nullValue"in i}function VR(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function fS(i){return!!i&&"mapValue"in i}function yB(i){return(i?.mapValue?.fields||{})[GD]?.stringValue===jD}function Hy(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Rd(i.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Hy(n))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hy(i.arrayValue.values[t]);return e}return{...i}}function _B(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===gB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.value=e}static empty(){return new Mo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!fS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hy(t)}setAll(e){let t=sr.emptyPath(),n={},s=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,n,s),n={},s=[],t=u.popLast()}l?n[u.lastSegment()]=Hy(l):s.push(u.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,n,s)}delete(e){const t=this.field(e.popLast());fS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];fS(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Rd(t,((s,a)=>e[s]=a));for(const s of n)delete e[s]}clone(){return new Mo(Hy(this.value))}}function qD(i){const e=[];return Rd(i.fields,((t,n)=>{const s=new sr([t]);if(fS(n)){const a=qD(n.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new hl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,t,n,s,a,l,u){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=a,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Dr(e,0,un.min(),un.min(),un.min(),Mo.empty(),0)}static newFoundDocument(e,t,n,s){return new Dr(e,1,t,un.min(),n,s,0)}static newNoDocument(e,t){return new Dr(e,2,t,un.min(),un.min(),Mo.empty(),0)}static newUnknownDocument(e,t){return new Dr(e,3,t,un.min(),un.min(),Mo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(un.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=un.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,t){this.position=e,this.inclusive=t}}function zR(i,e,t){let n=0;for(let s=0;s<i.position.length;s++){const a=e[s],l=i.position[s];if(a.field.isKeyField()?n=kt.comparator(kt.fromName(l.referenceValue),t.key):n=Tm(l,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function BR(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!yc(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,t="asc"){this.field=e,this.dir=t}}function vB(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{}class gs extends XD{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new EB(e,t,n):t==="array-contains"?new bB(e,n):t==="in"?new AB(e,n):t==="not-in"?new MB(e,n):t==="array-contains-any"?new wB(e,n):new gs(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new xB(e,n):new TB(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Tm(t,this.value)):t!==null&&Hh(this.value)===Hh(t)&&this.matchesComparison(Tm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return en(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yl extends XD{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new yl(e,t)}matches(e){return WD(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function WD(i){return i.op==="and"}function YD(i){return SB(i)&&WD(i)}function SB(i){for(const e of i.filters)if(e instanceof yl)return!1;return!0}function mA(i){if(i instanceof gs)return i.field.canonicalString()+i.op.toString()+bm(i.value);if(YD(i))return i.filters.map((e=>mA(e))).join(",");{const e=i.filters.map((t=>mA(t))).join(",");return`${i.op}(${e})`}}function KD(i,e){return i instanceof gs?(function(n,s){return s instanceof gs&&n.op===s.op&&n.field.isEqual(s.field)&&yc(n.value,s.value)})(i,e):i instanceof yl?(function(n,s){return s instanceof yl&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((a,l,u)=>a&&KD(l,s.filters[u])),!0):!1})(i,e):void en(19439)}function QD(i){return i instanceof gs?(function(t){return`${t.field.canonicalString()} ${t.op} ${bm(t.value)}`})(i):i instanceof yl?(function(t){return t.op.toString()+" {"+t.getFilters().map(QD).join(" ,")+"}"})(i):"Filter"}class EB extends gs{constructor(e,t,n){super(e,t,n),this.key=kt.fromName(n.referenceValue)}matches(e){const t=kt.comparator(e.key,this.key);return this.matchesComparison(t)}}class xB extends gs{constructor(e,t){super(e,"in",t),this.keys=ZD("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class TB extends gs{constructor(e,t){super(e,"not-in",t),this.keys=ZD("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ZD(i,e){return(e.arrayValue?.values||[]).map((t=>kt.fromName(t.referenceValue)))}class bB extends gs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _M(t)&&o_(t.arrayValue,this.value)}}class AB extends gs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&o_(this.value.arrayValue,t)}}class MB extends gs{constructor(e,t){super(e,"not-in",t)}matches(e){if(o_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!o_(this.value.arrayValue,t)}}class wB extends gs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_M(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>o_(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,t=null,n=[],s=[],a=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=l,this.endAt=u,this.Te=null}}function FR(i,e=null,t=[],n=[],s=null,a=null,l=null){return new RB(i,e,t,n,s,a,l)}function vM(i){const e=fn(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>mA(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),XE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>bm(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>bm(n))).join(",")),e.Te=t}return e.Te}function SM(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!vB(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!KD(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!BR(i.startAt,e.startAt)&&BR(i.endAt,e.endAt)}function gA(i){return kt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,t=null,n=[],s=[],a=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function CB(i,e,t,n,s,a,l,u){return new Xm(i,e,t,n,s,a,l,u)}function EM(i){return new Xm(i)}function HR(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function JD(i){return i.collectionGroup!==null}function ky(i){const e=fn(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Rs(sr.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(u=u.add(p.field))}))})),u})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new l_(a,n))})),t.has(sr.keyField().canonicalString())||e.Ie.push(new l_(sr.keyField(),n))}return e.Ie}function lc(i){const e=fn(i);return e.Ee||(e.Ee=IB(e,ky(i))),e.Ee}function IB(i,e){if(i.limitType==="F")return FR(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new l_(s.field,a)}));const t=i.endAt?new NS(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new NS(i.startAt.position,i.startAt.inclusive):null;return FR(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function yA(i,e){const t=i.filters.concat([e]);return new Xm(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function _A(i,e,t){return new Xm(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function YE(i,e){return SM(lc(i),lc(e))&&i.limitType===e.limitType}function $D(i){return`${vM(lc(i))}|lt:${i.limitType}`}function sm(i){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>QD(s))).join(", ")}]`),XE(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>bm(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>bm(s))).join(",")),`Target(${n})`})(lc(i))}; limitType=${i.limitType})`}function KE(i,e){return e.isFoundDocument()&&(function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):kt.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(i,e)&&(function(n,s){for(const a of ky(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(i,e)&&(function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0})(i,e)&&(function(n,s){return!(n.startAt&&!(function(l,u,d){const p=zR(l,u,d);return l.inclusive?p<=0:p<0})(n.startAt,ky(n),s)||n.endAt&&!(function(l,u,d){const p=zR(l,u,d);return l.inclusive?p>=0:p>0})(n.endAt,ky(n),s))})(i,e)}function DB(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function eN(i){return(e,t)=>{let n=!1;for(const s of ky(i)){const a=NB(s,e,t);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function NB(i,e,t){const n=i.field.isKeyField()?kt.comparator(e.key,t.key):(function(a,l,u){const d=l.data.field(a),p=u.data.field(a);return d!==null&&p!==null?Tm(d,p):en(42886)})(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return en(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Rd(this.inner,((t,n)=>{for(const[s,a]of n)e(s,a)}))}isEmpty(){return VD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB=new Xi(kt.comparator);function gu(){return OB}const tN=new Xi(kt.comparator);function Uy(...i){let e=tN;for(const t of i)e=e.insert(t.key,t);return e}function nN(i){let e=tN;return i.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function rd(){return Gy()}function iN(){return Gy()}function Gy(){return new Cd((i=>i.toString()),((i,e)=>i.isEqual(e)))}const UB=new Xi(kt.comparator),LB=new Rs(kt.comparator);function zn(...i){let e=LB;for(const t of i)e=e.add(t);return e}const PB=new Rs(Vn);function VB(){return PB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:CS(e)?"-0":e}}function sN(i){return{integerValue:""+i}}function zB(i,e){return hB(e)?sN(e):xM(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this._=void 0}}function BB(i,e,t){return i instanceof OS?(function(s,a){const l={fields:{[FD]:{stringValue:BD},[kD]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&yM(a)&&(a=WE(a)),a&&(l.fields[HD]=a),{mapValue:l}})(t,e):i instanceof c_?aN(i,e):i instanceof u_?oN(i,e):(function(s,a){const l=rN(s,a),u=kR(l)+kR(s.Ae);return pA(l)&&pA(s.Ae)?sN(u):xM(s.serializer,u)})(i,e)}function FB(i,e,t){return i instanceof c_?aN(i,e):i instanceof u_?oN(i,e):t}function rN(i,e){return i instanceof US?(function(n){return pA(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class OS extends QE{}class c_ extends QE{constructor(e){super(),this.elements=e}}function aN(i,e){const t=lN(e);for(const n of i.elements)t.some((s=>yc(s,n)))||t.push(n);return{arrayValue:{values:t}}}class u_ extends QE{constructor(e){super(),this.elements=e}}function oN(i,e){let t=lN(e);for(const n of i.elements)t=t.filter((s=>!yc(s,n)));return{arrayValue:{values:t}}}class US extends QE{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function kR(i){return rs(i.integerValue||i.doubleValue)}function lN(i){return _M(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function HB(i,e){return i.field.isEqual(e.field)&&(function(n,s){return n instanceof c_&&s instanceof c_||n instanceof u_&&s instanceof u_?xm(n.elements,s.elements,yc):n instanceof US&&s instanceof US?yc(n.Ae,s.Ae):n instanceof OS&&s instanceof OS})(i.transform,e.transform)}class kB{constructor(e,t){this.version=e,this.transformResults=t}}class pl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pl}static exists(e){return new pl(void 0,e)}static updateTime(e){return new pl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dS(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class ZE{}function cN(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new TM(i.key,pl.none()):new P_(i.key,i.data,pl.none());{const t=i.data,n=Mo.empty();let s=new Rs(sr.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?n.delete(a):n.set(a,l),s=s.add(a)}return new Id(i.key,n,new hl(s.toArray()),pl.none())}}function GB(i,e,t){i instanceof P_?(function(s,a,l){const u=s.value.clone(),d=jR(s.fieldTransforms,a,l.transformResults);u.setAll(d),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(i,e,t):i instanceof Id?(function(s,a,l){if(!dS(s.precondition,a))return void a.convertToUnknownDocument(l.version);const u=jR(s.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(uN(s)),d.setAll(u),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(i,e,t):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function jy(i,e,t,n){return i instanceof P_?(function(a,l,u,d){if(!dS(a.precondition,l))return u;const p=a.value.clone(),y=qR(a.fieldTransforms,d,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(i,e,t,n):i instanceof Id?(function(a,l,u,d){if(!dS(a.precondition,l))return u;const p=qR(a.fieldTransforms,d,l),y=l.data;return y.setAll(uN(a)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((_=>_.field)))})(i,e,t,n):(function(a,l,u){return dS(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(i,e,t)}function jB(i,e){let t=null;for(const n of i.fieldTransforms){const s=e.data.field(n.field),a=rN(n.transform,s||null);a!=null&&(t===null&&(t=Mo.empty()),t.set(n.field,a))}return t||null}function GR(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&xm(n,s,((a,l)=>HB(a,l)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class P_ extends ZE{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Id extends ZE{constructor(e,t,n,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function uN(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=i.data.field(t);e.set(t,n)}})),e}function jR(i,e,t){const n=new Map;ai(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let s=0;s<t.length;s++){const a=i[s],l=a.transform,u=e.data.field(a.field);n.set(a.field,FB(l,u,t[s]))}return n}function qR(i,e,t){const n=new Map;for(const s of i){const a=s.transform,l=t.data.field(s.field);n.set(s.field,BB(a,l,e))}return n}class TM extends ZE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qB extends ZE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&GB(a,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=jy(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=jy(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=iN();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let u=this.applyToLocalView(l,a.mutatedFields);u=t.has(s.key)?null:u;const d=cN(l,u);d!==null&&n.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(un.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),zn())}isEqual(e){return this.batchId===e.batchId&&xm(this.mutations,e.mutations,((t,n)=>GR(t,n)))&&xm(this.baseMutations,e.baseMutations,((t,n)=>GR(t,n)))}}class bM{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){ai(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=(function(){return UB})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,n[l].version);return new bM(e,t,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ms,qn;function KB(i){switch(i){case Xe.OK:return en(64938);case Xe.CANCELLED:case Xe.UNKNOWN:case Xe.DEADLINE_EXCEEDED:case Xe.RESOURCE_EXHAUSTED:case Xe.INTERNAL:case Xe.UNAVAILABLE:case Xe.UNAUTHENTICATED:return!1;case Xe.INVALID_ARGUMENT:case Xe.NOT_FOUND:case Xe.ALREADY_EXISTS:case Xe.PERMISSION_DENIED:case Xe.FAILED_PRECONDITION:case Xe.ABORTED:case Xe.OUT_OF_RANGE:case Xe.UNIMPLEMENTED:case Xe.DATA_LOSS:return!0;default:return en(15467,{code:i})}}function hN(i){if(i===void 0)return pu("GRPC error has no .code"),Xe.UNKNOWN;switch(i){case ms.OK:return Xe.OK;case ms.CANCELLED:return Xe.CANCELLED;case ms.UNKNOWN:return Xe.UNKNOWN;case ms.DEADLINE_EXCEEDED:return Xe.DEADLINE_EXCEEDED;case ms.RESOURCE_EXHAUSTED:return Xe.RESOURCE_EXHAUSTED;case ms.INTERNAL:return Xe.INTERNAL;case ms.UNAVAILABLE:return Xe.UNAVAILABLE;case ms.UNAUTHENTICATED:return Xe.UNAUTHENTICATED;case ms.INVALID_ARGUMENT:return Xe.INVALID_ARGUMENT;case ms.NOT_FOUND:return Xe.NOT_FOUND;case ms.ALREADY_EXISTS:return Xe.ALREADY_EXISTS;case ms.PERMISSION_DENIED:return Xe.PERMISSION_DENIED;case ms.FAILED_PRECONDITION:return Xe.FAILED_PRECONDITION;case ms.ABORTED:return Xe.ABORTED;case ms.OUT_OF_RANGE:return Xe.OUT_OF_RANGE;case ms.UNIMPLEMENTED:return Xe.UNIMPLEMENTED;case ms.DATA_LOSS:return Xe.DATA_LOSS;default:return en(39323,{code:i})}}(qn=ms||(ms={}))[qn.OK=0]="OK",qn[qn.CANCELLED=1]="CANCELLED",qn[qn.UNKNOWN=2]="UNKNOWN",qn[qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qn[qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qn[qn.NOT_FOUND=5]="NOT_FOUND",qn[qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",qn[qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",qn[qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",qn[qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qn[qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qn[qn.ABORTED=10]="ABORTED",qn[qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",qn[qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",qn[qn.INTERNAL=13]="INTERNAL",qn[qn.UNAVAILABLE=14]="UNAVAILABLE",qn[qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB=new Uh([4294967295,4294967295],0);function XR(i){const e=QB().encode(i),t=new MD;return t.update(e),new Uint8Array(t.digest())}function WR(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Uh([t,n],0),new Uh([s,a],0)]}class AM{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ly(`Invalid padding: ${t}`);if(n<0)throw new Ly(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Ly(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Ly(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Uh.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(Uh.fromNumber(n)));return s.compare(ZB)===1&&(s=new Uh([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=XR(e),[n,s]=WR(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(n,s,a);if(!this.we(l))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new AM(a,s,t);return n.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const t=XR(e),[n,s]=WR(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(n,s,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ly extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,n,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,V_.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new JE(un.min(),s,new Xi(Vn),gu(),zn())}}class V_{constructor(e,t,n,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new V_(n,t,zn(),zn(),zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class fN{constructor(e,t){this.targetId=e,this.Ce=t}}class dN{constructor(e,t,n=or.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class YR{constructor(){this.ve=0,this.Fe=KR(),this.Me=or.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=zn(),t=zn(),n=zn();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:en(38017,{changeType:a})}})),new V_(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=KR()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ai(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JB{constructor(e){this.Ge=e,this.ze=new Map,this.je=gu(),this.Je=h0(),this.He=h0(),this.Ye=new Xi(Vn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:en(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(gA(a))if(n===0){const l=new kt(a.path);this.et(t,l,Dr.newNoDocument(l,un.min()))}else ai(n===1,20013,{expectedCount:n});else{const l=this._t(t);if(l!==n){const u=this.ut(e),d=u?this.ct(u,e,l):1;if(d!==0){this.it(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=t;let l,u;try{l=Fh(n).toUint8Array()}catch(d){if(d instanceof zD)return Em("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new AM(l,s,a)}catch(d){return Em(d instanceof Ly?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach((a=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const u=this.ot(l);if(u){if(a.current&&gA(u.target)){const d=new kt(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Dr.newNoDocument(d,e))}a.Be&&(t.set(l,a.ke()),a.qe())}}));let n=zn();this.He.forEach(((a,l)=>{let u=!0;l.forEachWhile((d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const s=new JE(e,t,this.Ye,this.je,n);return this.je=gu(),this.Je=h0(),this.He=h0(),this.Ye=new Xi(Vn),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new YR,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Rs(Vn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Rs(Vn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Rt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new YR),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function h0(){return new Xi(kt.comparator)}function KR(){return new Xi(kt.comparator)}const $B={asc:"ASCENDING",desc:"DESCENDING"},eF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tF={and:"AND",or:"OR"};class nF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vA(i,e){return i.useProto3Json||XE(e)?e:{value:e}}function LS(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pN(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function iF(i,e){return LS(i,e.toTimestamp())}function cc(i){return ai(!!i,49232),un.fromTimestamp((function(t){const n=Bh(t);return new Ri(n.seconds,n.nanos)})(i))}function MM(i,e){return SA(i,e).canonicalString()}function SA(i,e){const t=(function(s){return new Ei(["projects",s.projectId,"databases",s.database])})(i).child("documents");return e===void 0?t:t.child(e)}function mN(i){const e=Ei.fromString(i);return ai(SN(e),10190,{key:e.toString()}),e}function EA(i,e){return MM(i.databaseId,e.path)}function FT(i,e){const t=mN(e);if(t.get(1)!==i.databaseId.projectId)throw new Tt(Xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Tt(Xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new kt(yN(t))}function gN(i,e){return MM(i.databaseId,e)}function sF(i){const e=mN(i);return e.length===4?Ei.emptyPath():yN(e)}function xA(i){return new Ei(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function yN(i){return ai(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function QR(i,e,t){return{name:EA(i,e),fields:t.value.mapValue.fields}}function rF(i,e){let t;if("targetChange"in e){e.targetChange;const n=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:en(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(p,y){return p.useProto3Json?(ai(y===void 0||typeof y=="string",58123),or.fromBase64String(y||"")):(ai(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),or.fromUint8Array(y||new Uint8Array))})(i,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(p){const y=p.code===void 0?Xe.UNKNOWN:hN(p.code);return new Tt(y,p.message||"")})(l);t=new dN(n,s,a,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=FT(i,n.document.name),a=cc(n.document.updateTime),l=n.document.createTime?cc(n.document.createTime):un.min(),u=new Mo({mapValue:{fields:n.document.fields}}),d=Dr.newFoundDocument(s,a,l,u),p=n.targetIds||[],y=n.removedTargetIds||[];t=new pS(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=FT(i,n.document),a=n.readTime?cc(n.readTime):un.min(),l=Dr.newNoDocument(s,a),u=n.removedTargetIds||[];t=new pS([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=FT(i,n.document),a=n.removedTargetIds||[];t=new pS([],a,s,null)}else{if(!("filter"in e))return en(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,l=new YB(s,a),u=n.targetId;t=new fN(u,l)}}return t}function aF(i,e){let t;if(e instanceof P_)t={update:QR(i,e.key,e.value)};else if(e instanceof TM)t={delete:EA(i,e.key)};else if(e instanceof Id)t={update:QR(i,e.key,e.data),updateMask:mF(e.fieldMask)};else{if(!(e instanceof qB))return en(16599,{Vt:e.type});t={verify:EA(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(a,l){const u=l.transform;if(u instanceof OS)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof c_)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof u_)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof US)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw en(20930,{transform:l.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:iF(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:en(27497)})(i,e.precondition)),t}function oF(i,e){return i&&i.length>0?(ai(e!==void 0,14353),i.map((t=>(function(s,a){let l=s.updateTime?cc(s.updateTime):cc(a);return l.isEqual(un.min())&&(l=cc(a)),new kB(l,s.transformResults||[])})(t,e)))):[]}function lF(i,e){return{documents:[gN(i,e.path)]}}function cF(i,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=gN(i,s);const a=(function(p){if(p.length!==0)return vN(yl.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((y=>(function(S){return{field:rm(S.field),direction:fF(S.dir)}})(y)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=vA(i,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function uF(i){let e=sF(i.parent);const t=i.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){ai(n===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(_){const S=_N(_);return S instanceof yl&&YD(S)?S.getFilters():[S]})(t.where));let l=[];t.orderBy&&(l=(function(_){return _.map((S=>(function(M){return new l_(am(M.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(S)))})(t.orderBy));let u=null;t.limit&&(u=(function(_){let S;return S=typeof _=="object"?_.value:_,XE(S)?null:S})(t.limit));let d=null;t.startAt&&(d=(function(_){const S=!!_.before,T=_.values||[];return new NS(T,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(_){const S=!_.before,T=_.values||[];return new NS(T,S)})(t.endAt)),CB(e,s,l,a,u,"F",d,p)}function hF(i,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return en(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _N(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=am(t.unaryFilter.field);return gs.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=am(t.unaryFilter.field);return gs.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=am(t.unaryFilter.field);return gs.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=am(t.unaryFilter.field);return gs.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return en(61313);default:return en(60726)}})(i):i.fieldFilter!==void 0?(function(t){return gs.create(am(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return en(58110);default:return en(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return yl.create(t.compositeFilter.filters.map((n=>_N(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return en(1026)}})(t.compositeFilter.op))})(i):en(30097,{filter:i})}function fF(i){return $B[i]}function dF(i){return eF[i]}function pF(i){return tF[i]}function rm(i){return{fieldPath:i.canonicalString()}}function am(i){return sr.fromServerFormat(i.fieldPath)}function vN(i){return i instanceof gs?(function(t){if(t.op==="=="){if(VR(t.value))return{unaryFilter:{field:rm(t.field),op:"IS_NAN"}};if(PR(t.value))return{unaryFilter:{field:rm(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(VR(t.value))return{unaryFilter:{field:rm(t.field),op:"IS_NOT_NAN"}};if(PR(t.value))return{unaryFilter:{field:rm(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rm(t.field),op:dF(t.op),value:t.value}}})(i):i instanceof yl?(function(t){const n=t.getFilters().map((s=>vN(s)));return n.length===1?n[0]:{compositeFilter:{op:pF(t.op),filters:n}}})(i):en(54877,{filter:i})}function mF(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function SN(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,t,n,s,a=un.min(),l=un.min(),u=or.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Ih(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.yt=e}}function yF(i){const e=uF({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?_A(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(){this.Cn=new vF}addToCollectionParentIndex(e,t){return this.Cn.add(t),Je.resolve()}getCollectionParents(e,t){return Je.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Je.resolve()}deleteFieldIndex(e,t){return Je.resolve()}deleteAllFieldIndexes(e){return Je.resolve()}createTargetIndexes(e,t){return Je.resolve()}getDocumentsMatchingTarget(e,t){return Je.resolve(null)}getIndexType(e,t){return Je.resolve(0)}getFieldIndexes(e,t){return Je.resolve([])}getNextCollectionGroupToUpdate(e){return Je.resolve(null)}getMinOffset(e,t){return Je.resolve(zh.min())}getMinOffsetFromCollectionGroup(e,t){return Je.resolve(zh.min())}updateCollectionGroup(e,t,n){return Je.resolve()}updateIndexEntries(e,t){return Je.resolve()}}class vF{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new Rs(Ei.comparator),a=!s.has(n);return this.index[t]=s.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Rs(Ei.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EN=41943040;class Ta{static withCacheSize(e){return new Ta(e,Ta.DEFAULT_COLLECTION_PERCENTILE,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ta.DEFAULT_COLLECTION_PERCENTILE=10,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ta.DEFAULT=new Ta(EN,Ta.DEFAULT_COLLECTION_PERCENTILE,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ta.DISABLED=new Ta(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Am(0)}static cr(){return new Am(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="LruGarbageCollector",SF=1048576;function $R([i,e],[t,n]){const s=Vn(i,t);return s===0?Vn(e,n):s}class EF{constructor(e){this.Ir=e,this.buffer=new Rs($R),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();$R(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xF{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Rt(JR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){qm(t)?Rt(JR,"Ignoring IndexedDB error during garbage collection: ",t):await jm(t)}await this.Vr(3e5)}))}}class TF{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return Je.resolve(qE.ce);const n=new EF(t);return this.mr.forEachTarget(e,(s=>n.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>n.Ar(s))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Rt("LruGarbageCollector","Garbage collection skipped; disabled"),Je.resolve(ZR)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZR):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,a,l,u,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(Rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),s=this.params.maximumSequenceNumbersToCollect):s=_,l=Date.now(),this.nthSequenceNumber(e,s)))).next((_=>(n=_,u=Date.now(),this.removeTargets(e,n,t)))).next((_=>(a=_,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((_=>(p=Date.now(),im()<=Pn.DEBUG&&Rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${a} targets in `+(d-u)+`ms
	Removed ${_} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),Je.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:_}))))}}function bF(i,e){return new TF(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(){this.changes=new Cd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Je.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&jy(n.mutation,s,hl.empty(),Ri.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,zn()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=zn()){const s=rd();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((a=>{let l=Uy();return a.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const n=rd();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,zn())))}populateOverlays(e,t,n){const s=[];return n.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,n,s){let a=gu();const l=Gy(),u=(function(){return Gy()})();return t.forEach(((d,p)=>{const y=n.get(p.key);s.has(p.key)&&(y===void 0||y.mutation instanceof Id)?a=a.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),jy(y.mutation,p,y.mutation.getFieldMask(),Ri.now())):l.set(p.key,hl.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((p,y)=>l.set(p,y))),t.forEach(((p,y)=>u.set(p,new MF(y,l.get(p)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=Gy();let s=new Xi(((l,u)=>l-u)),a=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((d=>{const p=t.get(d);if(p===null)return;let y=n.get(d)||hl.empty();y=u.applyToLocalView(p,y),n.set(d,y);const _=(s.get(u.batchId)||zn()).add(d);s=s.insert(u.batchId,_)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),p=d.key,y=d.value,_=iN();y.forEach((S=>{if(!a.has(S)){const T=cN(t.get(S),n.get(S));T!==null&&_.set(S,T),a=a.add(S)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,_))}return Je.waitFor(l)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(l){return kt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-a.size):Je.resolve(rd());let u=s_,d=a;return l.next((p=>Je.forEach(p,((y,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),a.get(y)?Je.resolve():this.remoteDocumentCache.getEntry(e,y).next((S=>{d=d.insert(y,S)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,d,p,zn()))).next((y=>({batchId:u,changes:nN(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new kt(t)).next((n=>{let s=Uy();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const a=t.collectionGroup;let l=Uy();return this.indexManager.getCollectionParents(e,a).next((u=>Je.forEach(u,(d=>{const p=(function(_,S){return new Xm(S,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,n,s).next((y=>{y.forEach(((_,S)=>{l=l.insert(_,S)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,s)))).next((l=>{a.forEach(((d,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,Dr.newInvalidDocument(y)))}));let u=Uy();return l.forEach(((d,p)=>{const y=a.get(d);y!==void 0&&jy(y.mutation,p,hl.empty(),Ri.now()),KE(t,p)&&(u=u.insert(d,p))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Je.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:cc(s.createTime)}})(t)),Je.resolve()}getNamedQuery(e,t){return Je.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:yF(s.bundledQuery),readTime:cc(s.readTime)}})(t)),Je.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(){this.overlays=new Xi(kt.comparator),this.qr=new Map}getOverlay(e,t){return Je.resolve(this.overlays.get(t))}getOverlays(e,t){const n=rd();return Je.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&n.set(s,a)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,a)=>{this.St(e,t,a)})),Je.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(n)),Je.resolve()}getOverlaysForCollection(e,t,n){const s=rd(),a=t.length+1,l=new kt(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&d.largestBatchId>n&&s.set(d.getKey(),d)}return Je.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let a=new Xi(((p,y)=>p-y));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>n){let y=a.get(p.largestBatchId);y===null&&(y=rd(),a=a.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const u=rd(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,y)=>u.set(p,y))),!(u.size()>=s)););return Je.resolve(u)}St(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new WB(t,n));let a=this.qr.get(t);a===void 0&&(a=zn(),this.qr.set(t,a)),this.qr.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(){this.sessionToken=or.EMPTY_BYTE_STRING}getSessionToken(e){return Je.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Je.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(){this.Qr=new Rs(Hs.$r),this.Ur=new Rs(Hs.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Hs(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new Hs(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new kt(new Ei([])),n=new Hs(t,e),s=new Hs(t,e+1),a=[];return this.Ur.forEachInRange([n,s],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new kt(new Ei([])),n=new Hs(t,e),s=new Hs(t,e+1);let a=zn();return this.Ur.forEachInRange([n,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Hs(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Hs{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return kt.comparator(e.key,t.key)||Vn(e.Yr,t.Yr)}static Kr(e,t){return Vn(e.Yr,t.Yr)||kt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Rs(Hs.$r)}checkEmpty(e){return Je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new XB(a,t,n,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new Hs(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Je.resolve(l)}lookupMutationBatch(e,t){return Je.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),a=s<0?0:s;return Je.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Je.resolve(this.mutationQueue.length===0?gM:this.tr-1)}getAllMutationBatches(e){return Je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Hs(t,0),s=new Hs(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,s],(l=>{const u=this.Xr(l.Yr);a.push(u)})),Je.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Rs(Vn);return t.forEach((s=>{const a=new Hs(s,0),l=new Hs(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(u=>{n=n.add(u.Yr)}))})),Je.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let a=n;kt.isDocumentKey(a)||(a=a.child(""));const l=new Hs(new kt(a),0);let u=new Rs(Vn);return this.Zr.forEachWhile((d=>{const p=d.key.path;return!!n.isPrefixOf(p)&&(p.length===s&&(u=u.add(d.Yr)),!0)}),l),Je.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const s=this.Xr(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ai(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Je.forEach(t.mutations,(s=>{const a=new Hs(s.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new Hs(t,0),s=this.Zr.firstAfterOrEqual(n);return Je.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Je.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e){this.ri=e,this.docs=(function(){return new Xi(kt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),a=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Je.resolve(n?n.document.mutableCopy():Dr.newInvalidDocument(t))}getEntries(e,t){let n=gu();return t.forEach((s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():Dr.newInvalidDocument(s))})),Je.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let a=gu();const l=t.path,u=new kt(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||oB(aB(y),n)<=0||(s.has(y.key)||KE(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return Je.resolve(a)}getAllFromCollectionGroup(e,t,n,s){en(9500)}ii(e,t){return Je.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new OF(this)}getSize(e){return Je.resolve(this.size)}}class OF extends AF{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)})),Je.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e){this.persistence=e,this.si=new Cd((t=>vM(t)),SM),this.lastRemoteSnapshotVersion=un.min(),this.highestTargetId=0,this.oi=0,this._i=new wM,this.targetCount=0,this.ai=Am.ur()}forEachTarget(e,t){return this.si.forEach(((n,s)=>t(s))),Je.resolve()}getLastRemoteSnapshotVersion(e){return Je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Je.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Je.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Am(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Je.resolve()}updateTargetData(e,t){return this.Pr(t),Je.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Je.resolve()}removeTargets(e,t,n){let s=0;const a=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),Je.waitFor(a).next((()=>s))}getTargetCount(e){return Je.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Je.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Je.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),Je.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Je.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Je.resolve(n)}containsKey(e,t){return Je.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t){this.ui={},this.overlays={},this.ci=new qE(0),this.li=!1,this.li=!0,this.hi=new IF,this.referenceDelegate=e(this),this.Pi=new UF(this),this.indexManager=new _F,this.remoteDocumentCache=(function(s){return new NF(s)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new gF(t),this.Ii=new RF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new DF(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Rt("MemoryPersistence","Starting transaction:",e);const s=new LF(this.ci.next());return this.referenceDelegate.Ei(),n(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ai(e,t){return Je.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class LF extends cB{constructor(e){super(),this.currentSequenceNumber=e}}class RM{constructor(e){this.persistence=e,this.Ri=new wM,this.Vi=null}static mi(e){return new RM(e)}get fi(){if(this.Vi)return this.Vi;throw en(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Je.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Je.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Je.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.fi.add(a.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Je.forEach(this.fi,(n=>{const s=kt.fromPath(n);return this.gi(e,s).next((a=>{a||t.removeEntry(s,un.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Je.or([()=>Je.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class PS{constructor(e,t){this.persistence=e,this.pi=new Cd((n=>fB(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=bF(this,t)}static mi(e,t){return new PS(e,t)}Ei(){}di(e){return Je.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return Je.forEach(this.pi,((n,s)=>this.br(e,n,s).next((a=>a?Je.resolve():t(s)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((u=>{u||(n++,a.removeEntry(l,un.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Je.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Je.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Je.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Je.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hS(e.data.value)),t}br(e,t,n){return Je.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return Je.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=zn(),s=zn();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new CM(e,t.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return wV()?8:uB(Ur())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const a={result:null};return this.ys(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,t,s,n).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new PF;return this.Ss(e,t,l).next((u=>{if(a.result=u,this.Vs)return this.bs(e,t,l,u.size)}))})).next((()=>a.result))}bs(e,t,n,s){return n.documentReadCount<this.fs?(im()<=Pn.DEBUG&&Rt("QueryEngine","SDK will not create cache indexes for query:",sm(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Je.resolve()):(im()<=Pn.DEBUG&&Rt("QueryEngine","Query:",sm(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(im()<=Pn.DEBUG&&Rt("QueryEngine","The SDK decides to create cache indexes for query:",sm(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lc(t))):Je.resolve())}ys(e,t){if(HR(t))return Je.resolve(null);let n=lc(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=_A(t,null,"F"),n=lc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const l=zn(...a);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,n).next((d=>{const p=this.Ds(t,u);return this.Cs(t,p,l,d.readTime)?this.ys(e,_A(t,null,"F")):this.vs(e,p,t,d)}))))})))))}ws(e,t,n,s){return HR(t)||s.isEqual(un.min())?Je.resolve(null):this.ps.getDocuments(e,n).next((a=>{const l=this.Ds(t,a);return this.Cs(t,l,n,s)?Je.resolve(null):(im()<=Pn.DEBUG&&Rt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),sm(t)),this.vs(e,l,t,rB(s,s_)).next((u=>u)))}))}Ds(e,t){let n=new Rs(eN(e));return t.forEach(((s,a)=>{KE(e,a)&&(n=n.add(a))})),n}Cs(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,t,n){return im()<=Pn.DEBUG&&Rt("QueryEngine","Using full collection scan to execute query:",sm(t)),this.ps.getDocumentsMatchingQuery(e,t,zh.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM="LocalStore",zF=3e8;class BF{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Xi(Vn),this.xs=new Cd((a=>vM(a)),SM),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wF(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function FF(i,e,t,n){return new BF(i,e,t,n)}async function TN(i,e){const t=fn(i);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((a=>(s=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((a=>{const l=[],u=[];let d=zn();for(const p of s){l.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of a){u.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return t.localDocuments.getDocuments(n,d).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:u})))}))}))}function HF(i,e){const t=fn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,p,y){const _=p.batch,S=_.keys();let T=Je.resolve();return S.forEach((M=>{T=T.next((()=>y.getEntry(d,M))).next((C=>{const w=p.docVersions.get(M);ai(w!==null,48541),C.version.compareTo(w)<0&&(_.applyToRemoteDocument(C,p),C.isValidDocument()&&(C.setReadTime(p.commitVersion),y.addEntry(C)))}))})),T.next((()=>u.mutationQueue.removeMutationBatch(d,_)))})(t,n,e,a).next((()=>a.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let d=zn();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function bN(i){const e=fn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function kF(i,e){const t=fn(i),n=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((y,_)=>{const S=s.get(_);if(!S)return;u.push(t.Pi.removeMatchingKeys(a,y.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(a,y.addedDocuments,_))));let T=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?T=T.withResumeToken(or.EMPTY_BYTE_STRING,un.min()).withLastLimboFreeSnapshotVersion(un.min()):y.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(y.resumeToken,n)),s=s.insert(_,T),(function(C,w,b){return C.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=zF?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0})(S,T,y)&&u.push(t.Pi.updateTargetData(a,T))}));let d=gu(),p=zn();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),u.push(GF(a,l,e.documentUpdates).next((y=>{d=y.ks,p=y.qs}))),!n.isEqual(un.min())){const y=t.Pi.getLastRemoteSnapshotVersion(a).next((_=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n)));u.push(y)}return Je.waitFor(u).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,d,p))).next((()=>d))})).then((a=>(t.Ms=s,a)))}function GF(i,e,t){let n=zn(),s=zn();return t.forEach((a=>n=n.add(a))),e.getEntries(i,n).next((a=>{let l=gu();return t.forEach(((u,d)=>{const p=a.get(u);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(un.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):Rt(IM,"Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function jF(i,e){const t=fn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=gM),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function qF(i,e){const t=fn(i);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.Pi.getTargetData(n,e).next((a=>a?(s=a,Je.resolve(s)):t.Pi.allocateTargetId(n).next((l=>(s=new Ih(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function TA(i,e,t){const n=fn(i),s=n.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,(l=>n.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!qm(l))throw l;Rt(IM,`Failed to update sequence numbers for target ${e}: ${l}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function eC(i,e,t){const n=fn(i);let s=un.min(),a=zn();return n.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,p,y){const _=fn(d),S=_.xs.get(y);return S!==void 0?Je.resolve(_.Ms.get(S)):_.Pi.getTargetData(p,y)})(n,l,lc(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(l,u.targetId).next((d=>{a=d}))})).next((()=>n.Fs.getDocumentsMatchingQuery(l,e,t?s:un.min(),t?a:zn()))).next((u=>(XF(n,DB(e),u),{documents:u,Qs:a})))))}function XF(i,e,t){let n=i.Os.get(e)||un.min();t.forEach(((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),i.Os.set(e,n)}class tC{constructor(){this.activeTargetIds=VB()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WF{constructor(){this.Mo=new tC,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tC,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="ConnectivityMonitor";class iC{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Rt(nC,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Rt(nC,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f0=null;function bA(){return f0===null?f0=(function(){return 268435456+Math.round(2147483648*Math.random())})():f0++,"0x"+f0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="RestConnection",KF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QF{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===IS?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,t,n,s,a){const l=bA(),u=this.zo(e,t.toUriEncodedString());Rt(HT,`Sending RPC '${e}' ${l}:`,u,n);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,a);const{host:p}=new URL(u),y=Hm(p);return this.Jo(e,u,d,n,y).then((_=>(Rt(HT,`Received RPC '${e}' ${l}: `,_),_)),(_=>{throw Em(HT,`RPC '${e}' ${l} failed with error: `,_,"url: ",u,"request:",n),_}))}Ho(e,t,n,s,a,l){return this.Go(e,t,n,s,a)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),n&&n.headers.forEach(((s,a)=>e[a]=s))}zo(e,t){const n=KF[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="WebChannelConnection";class JF extends QF{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,a){const l=bA();return new Promise(((u,d)=>{const p=new wD;p.setWithCredentials(!0),p.listenOnce(RD.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case uS.NO_ERROR:const _=p.getResponseJson();Rt(Ar,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),u(_);break;case uS.TIMEOUT:Rt(Ar,`RPC '${e}' ${l} timed out`),d(new Tt(Xe.DEADLINE_EXCEEDED,"Request time out"));break;case uS.HTTP_ERROR:const S=p.getStatus();if(Rt(Ar,`RPC '${e}' ${l} failed with status:`,S,"response text:",p.getResponseText()),S>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const M=T?.error;if(M&&M.status&&M.message){const C=(function(b){const D=b.toLowerCase().replace(/_/g,"-");return Object.values(Xe).indexOf(D)>=0?D:Xe.UNKNOWN})(M.status);d(new Tt(C,M.message))}else d(new Tt(Xe.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new Tt(Xe.UNAVAILABLE,"Connection failed."));break;default:en(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Rt(Ar,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(s);Rt(Ar,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",y,n,15)}))}T_(e,t,n){const s=bA(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=DD(),u=ID(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const y=a.join("");Rt(Ar,`Creating RPC '${e}' stream ${s}: ${y}`,d);const _=l.createWebChannel(y,d);this.I_(_);let S=!1,T=!1;const M=new ZF({Yo:w=>{T?Rt(Ar,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(S||(Rt(Ar,`Opening RPC '${e}' stream ${s} transport.`),_.open(),S=!0),Rt(Ar,`RPC '${e}' stream ${s} sending:`,w),_.send(w))},Zo:()=>_.close()}),C=(w,b,D)=>{w.listen(b,(V=>{try{D(V)}catch(z){setTimeout((()=>{throw z}),0)}}))};return C(_,Oy.EventType.OPEN,(()=>{T||(Rt(Ar,`RPC '${e}' stream ${s} transport opened.`),M.o_())})),C(_,Oy.EventType.CLOSE,(()=>{T||(T=!0,Rt(Ar,`RPC '${e}' stream ${s} transport closed`),M.a_(),this.E_(_))})),C(_,Oy.EventType.ERROR,(w=>{T||(T=!0,Em(Ar,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),M.a_(new Tt(Xe.UNAVAILABLE,"The operation could not be completed")))})),C(_,Oy.EventType.MESSAGE,(w=>{if(!T){const b=w.data[0];ai(!!b,16349);const D=b,V=D?.error||D[0]?.error;if(V){Rt(Ar,`RPC '${e}' stream ${s} received error:`,V);const z=V.status;let j=(function(L){const I=ms[L];if(I!==void 0)return hN(I)})(z),G=V.message;j===void 0&&(j=Xe.INTERNAL,G="Unknown error status: "+z+" with message "+V.message),T=!0,M.a_(new Tt(j,G)),_.close()}else Rt(Ar,`RPC '${e}' stream ${s} received:`,b),M.u_(b)}})),C(u,CD.STAT_EVENT,(w=>{w.stat===hA.PROXY?Rt(Ar,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===hA.NOPROXY&&Rt(Ar,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function kT(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(i){return new nF(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,t,n=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&Rt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="PersistentStream";class MN{constructor(e,t,n,s,a,l,u,d){this.Mi=e,this.S_=n,this.b_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new AN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Xe.RESOURCE_EXHAUSTED?(pu(t.toString()),pu("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.D_===t&&this.G_(n,s)}),(n=>{e((()=>{const s=new Tt(Xe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{n((()=>this.z_(s)))})),this.stream.onMessage((s=>{n((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Rt(sC,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Rt(sC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $F extends MN{constructor(e,t,n,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=rF(this.serializer,e),n=(function(a){if(!("targetChange"in a))return un.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?un.min():l.readTime?cc(l.readTime):un.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=xA(this.serializer),t.addTarget=(function(a,l){let u;const d=l.target;if(u=gA(d)?{documents:lF(a,d)}:{query:cF(a,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=pN(a,l.resumeToken);const p=vA(a,l.expectedCount);p!==null&&(u.expectedCount=p)}else if(l.snapshotVersion.compareTo(un.min())>0){u.readTime=LS(a,l.snapshotVersion.toTimestamp());const p=vA(a,l.expectedCount);p!==null&&(u.expectedCount=p)}return u})(this.serializer,e);const n=hF(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=xA(this.serializer),t.removeTarget=e,this.q_(t)}}class e5 extends MN{constructor(e,t,n,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ai(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ai(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ai(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=oF(e.writeResults,e.commitTime),n=cc(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=xA(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>aF(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{}class n5 extends t5{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Tt(Xe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,SA(t,n),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Tt(Xe.UNKNOWN,a.toString())}))}Ho(e,t,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,SA(t,n),s,l,u,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Tt(Xe.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class i5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pu(t),this.aa=!1):Rt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="RemoteStore";class s5{constructor(e,t,n,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{n.enqueueAndForget((async()=>{Dd(this)&&(Rt(md,"Restarting streams for network reachability change."),await(async function(d){const p=fn(d);p.Ea.add(4),await z_(p),p.Ra.set("Unknown"),p.Ea.delete(4),await ex(p)})(this))}))})),this.Ra=new i5(n,s)}}async function ex(i){if(Dd(i))for(const e of i.da)await e(!0)}async function z_(i){for(const e of i.da)await e(!1)}function wN(i,e){const t=fn(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),UM(t)?OM(t):Wm(t).O_()&&NM(t,e))}function DM(i,e){const t=fn(i),n=Wm(t);t.Ia.delete(e),n.O_()&&RN(t,e),t.Ia.size===0&&(n.O_()?n.L_():Dd(t)&&t.Ra.set("Unknown"))}function NM(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(un.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wm(i).Y_(e)}function RN(i,e){i.Va.Ue(e),Wm(i).Z_(e)}function OM(i){i.Va=new JB({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Wm(i).start(),i.Ra.ua()}function UM(i){return Dd(i)&&!Wm(i).x_()&&i.Ia.size>0}function Dd(i){return fn(i).Ea.size===0}function CN(i){i.Va=void 0}async function r5(i){i.Ra.set("Online")}async function a5(i){i.Ia.forEach(((e,t)=>{NM(i,e)}))}async function o5(i,e){CN(i),UM(i)?(i.Ra.ha(e),OM(i)):i.Ra.set("Unknown")}async function l5(i,e,t){if(i.Ra.set("Online"),e instanceof dN&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const u of a.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))})(i,e)}catch(n){Rt(md,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await VS(i,n)}else if(e instanceof pS?i.Va.Ze(e):e instanceof fN?i.Va.st(e):i.Va.tt(e),!t.isEqual(un.min()))try{const n=await bN(i.localStore);t.compareTo(n)>=0&&await(function(a,l){const u=a.Va.Tt(l);return u.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=a.Ia.get(p);y&&a.Ia.set(p,y.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,p)=>{const y=a.Ia.get(d);if(!y)return;a.Ia.set(d,y.withResumeToken(or.EMPTY_BYTE_STRING,y.snapshotVersion)),RN(a,d);const _=new Ih(y.target,d,p,y.sequenceNumber);NM(a,_)})),a.remoteSyncer.applyRemoteEvent(u)})(i,t)}catch(n){Rt(md,"Failed to raise snapshot:",n),await VS(i,n)}}async function VS(i,e,t){if(!qm(e))throw e;i.Ea.add(1),await z_(i),i.Ra.set("Offline"),t||(t=()=>bN(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Rt(md,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await ex(i)}))}function IN(i,e){return e().catch((t=>VS(i,t,e)))}async function tx(i){const e=fn(i),t=kh(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gM;for(;c5(e);)try{const s=await jF(e.localStore,n);if(s===null){e.Ta.length===0&&t.L_();break}n=s.batchId,u5(e,s)}catch(s){await VS(e,s)}DN(e)&&NN(e)}function c5(i){return Dd(i)&&i.Ta.length<10}function u5(i,e){i.Ta.push(e);const t=kh(i);t.O_()&&t.X_&&t.ea(e.mutations)}function DN(i){return Dd(i)&&!kh(i).x_()&&i.Ta.length>0}function NN(i){kh(i).start()}async function h5(i){kh(i).ra()}async function f5(i){const e=kh(i);for(const t of i.Ta)e.ea(t.mutations)}async function d5(i,e,t){const n=i.Ta.shift(),s=bM.from(n,e,t);await IN(i,(()=>i.remoteSyncer.applySuccessfulWrite(s))),await tx(i)}async function p5(i,e){e&&kh(i).X_&&await(async function(n,s){if((function(l){return KB(l)&&l!==Xe.ABORTED})(s.code)){const a=n.Ta.shift();kh(n).B_(),await IN(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s))),await tx(n)}})(i,e),DN(i)&&NN(i)}async function rC(i,e){const t=fn(i);t.asyncQueue.verifyOperationInProgress(),Rt(md,"RemoteStore received new credentials");const n=Dd(t);t.Ea.add(3),await z_(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ex(t)}async function m5(i,e){const t=fn(i);e?(t.Ea.delete(2),await ex(t)):e||(t.Ea.add(2),await z_(t),t.Ra.set("Unknown"))}function Wm(i){return i.ma||(i.ma=(function(t,n,s){const a=fn(t);return a.sa(),new $F(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(i.datastore,i.asyncQueue,{Xo:r5.bind(null,i),t_:a5.bind(null,i),r_:o5.bind(null,i),H_:l5.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),UM(i)?OM(i):i.Ra.set("Unknown")):(await i.ma.stop(),CN(i))}))),i.ma}function kh(i){return i.fa||(i.fa=(function(t,n,s){const a=fn(t);return a.sa(),new e5(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:h5.bind(null,i),r_:p5.bind(null,i),ta:f5.bind(null,i),na:d5.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await tx(i)):(await i.fa.stop(),i.Ta.length>0&&(Rt(md,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,t,n,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new cu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,a){const l=Date.now()+n,u=new LM(e,t,l,s,a);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Tt(Xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function PM(i,e){if(pu("AsyncQueue",`${e}: ${i}`),qm(i))return new Tt(Xe.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{static emptySet(e){return new pm(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||kt.comparator(t.key,n.key):(t,n)=>kt.comparator(t.key,n.key),this.keyedMap=Uy(),this.sortedSet=new Xi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new pm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.ga=new Xi(kt.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):en(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Mm{constructor(e,t,n,s,a,l,u,d,p){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,n,s,a){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new Mm(e,t,pm.emptySet(t),l,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&YE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class y5{constructor(){this.queries=oC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const s=fn(t),a=s.queries;s.queries=oC(),a.forEach(((l,u)=>{for(const d of u.Sa)d.onError(n)}))})(this,new Tt(Xe.ABORTED,"Firestore shutting down"))}}function oC(){return new Cd((i=>$D(i)),YE)}async function ON(i,e){const t=fn(i);let n=3;const s=e.query;let a=t.queries.get(s);a?!a.ba()&&e.Da()&&(n=2):(a=new g5,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=PM(l,`Initialization of query '${sm(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&VM(t)}async function UN(i,e){const t=fn(i),n=e.query;let s=3;const a=t.queries.get(n);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function _5(i,e){const t=fn(i);let n=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const u of l.Sa)u.Fa(s)&&(n=!0);l.wa=s}}n&&VM(t)}function v5(i,e,t){const n=fn(i),s=n.queries.get(e);if(s)for(const a of s.Sa)a.onError(t);n.queries.delete(e)}function VM(i){i.Ca.forEach((e=>{e.next()}))}var AA,lC;(lC=AA||(AA={})).Ma="default",lC.Cache="cache";class LN{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Mm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Mm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==AA.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.key=e}}class VN{constructor(e){this.key=e}}class S5{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=zn(),this.mutatedKeys=zn(),this.eu=eN(e),this.tu=new pm(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new aC,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,_)=>{const S=s.get(y),T=KE(this.query,_)?_:null,M=!!S&&this.mutatedKeys.has(S.key),C=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let w=!1;S&&T?S.data.isEqual(T.data)?M!==C&&(n.track({type:3,doc:T}),w=!0):this.su(S,T)||(n.track({type:2,doc:T}),w=!0,(d&&this.eu(T,d)>0||p&&this.eu(T,p)<0)&&(u=!0)):!S&&T?(n.track({type:0,doc:T}),w=!0):S&&!T&&(n.track({type:1,doc:S}),w=!0,(d||p)&&(u=!0)),w&&(T?(l=l.add(T),a=C?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),n.track({type:1,doc:y})}return{tu:l,iu:n,Cs:u,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((y,_)=>(function(T,M){const C=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return en(20277,{Rt:w})}};return C(T)-C(M)})(y.type,_.type)||this.eu(y.doc,_.doc))),this.ou(n),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new Mm(this.query,e.tu,a,l,e.mutatedKeys,d===0,p,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=zn(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new VN(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new PN(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=zn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Mm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zM="SyncEngine";class E5{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class x5{constructor(e){this.key=e,this.hu=!1}}class T5{constructor(e,t,n,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Cd((u=>$D(u)),YE),this.Iu=new Map,this.Eu=new Set,this.du=new Xi(kt.comparator),this.Au=new Map,this.Ru=new wM,this.Vu={},this.mu=new Map,this.fu=Am.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function b5(i,e,t=!0){const n=GN(i);let s;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await zN(n,e,t,!0),s}async function A5(i,e){const t=GN(i);await zN(t,e,!0,!1)}async function zN(i,e,t,n){const s=await qF(i.localStore,lc(e)),a=s.targetId,l=i.sharedClientState.addLocalQueryTarget(a,t);let u;return n&&(u=await M5(i,e,a,l==="current",s.resumeToken)),i.isPrimaryClient&&t&&wN(i.remoteStore,s),u}async function M5(i,e,t,n,s){i.pu=(_,S,T)=>(async function(C,w,b,D){let V=w.view.ru(b);V.Cs&&(V=await eC(C.localStore,w.query,!1).then((({documents:P})=>w.view.ru(P,V))));const z=D&&D.targetChanges.get(w.targetId),j=D&&D.targetMismatches.get(w.targetId)!=null,G=w.view.applyChanges(V,C.isPrimaryClient,z,j);return uC(C,w.targetId,G.au),G.snapshot})(i,_,S,T);const a=await eC(i.localStore,e,!0),l=new S5(e,a.Qs),u=l.ru(a.documents),d=V_.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",s),p=l.applyChanges(u,i.isPrimaryClient,d);uC(i,t,p.au);const y=new E5(e,t,l);return i.Tu.set(e,y),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),p.snapshot}async function w5(i,e,t){const n=fn(i),s=n.Tu.get(e),a=n.Iu.get(s.targetId);if(a.length>1)return n.Iu.set(s.targetId,a.filter((l=>!YE(l,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await TA(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&DM(n.remoteStore,s.targetId),MA(n,s.targetId)})).catch(jm)):(MA(n,s.targetId),await TA(n.localStore,s.targetId,!0))}async function R5(i,e){const t=fn(i),n=t.Tu.get(e),s=t.Iu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),DM(t.remoteStore,n.targetId))}async function C5(i,e,t){const n=P5(i);try{const s=await(function(l,u){const d=fn(l),p=Ri.now(),y=u.reduce(((T,M)=>T.add(M.key)),zn());let _,S;return d.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let M=gu(),C=zn();return d.Ns.getEntries(T,y).next((w=>{M=w,M.forEach(((b,D)=>{D.isValidDocument()||(C=C.add(b))}))})).next((()=>d.localDocuments.getOverlayedDocuments(T,M))).next((w=>{_=w;const b=[];for(const D of u){const V=jB(D,_.get(D.key).overlayedDocument);V!=null&&b.push(new Id(D.key,V,qD(V.value.mapValue),pl.exists(!0)))}return d.mutationQueue.addMutationBatch(T,p,b,u)})).next((w=>{S=w;const b=w.applyToLocalDocumentSet(_,C);return d.documentOverlayCache.saveOverlays(T,w.batchId,b)}))})).then((()=>({batchId:S.batchId,changes:nN(_)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new Xi(Vn)),p=p.insert(u,d),l.Vu[l.currentUser.toKey()]=p})(n,s.batchId,t),await B_(n,s.changes),await tx(n.remoteStore)}catch(s){const a=PM(s,"Failed to persist write");t.reject(a)}}async function BN(i,e){const t=fn(i);try{const n=await kF(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=t.Au.get(a);l&&(ai(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?ai(l.hu,14607):s.removedDocuments.size>0&&(ai(l.hu,42227),l.hu=!1))})),await B_(t,n,e)}catch(n){await jm(n)}}function cC(i,e,t){const n=fn(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Tu.forEach(((a,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=fn(l);d.onlineState=u;let p=!1;d.queries.forEach(((y,_)=>{for(const S of _.Sa)S.va(u)&&(p=!0)})),p&&VM(d)})(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function I5(i,e,t){const n=fn(i);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Au.get(e),a=s&&s.key;if(a){let l=new Xi(kt.comparator);l=l.insert(a,Dr.newNoDocument(a,un.min()));const u=zn().add(a),d=new JE(un.min(),new Map,new Xi(Vn),l,u);await BN(n,d),n.du=n.du.remove(a),n.Au.delete(e),BM(n)}else await TA(n.localStore,e,!1).then((()=>MA(n,e,t))).catch(jm)}async function D5(i,e){const t=fn(i),n=e.batch.batchId;try{const s=await HF(t.localStore,e);HN(t,n,null),FN(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await B_(t,s)}catch(s){await jm(s)}}async function N5(i,e,t){const n=fn(i);try{const s=await(function(l,u){const d=fn(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return d.mutationQueue.lookupMutationBatch(p,u).next((_=>(ai(_!==null,37113),y=_.keys(),d.mutationQueue.removeMutationBatch(p,_)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>d.localDocuments.getDocuments(p,y)))}))})(n.localStore,e);HN(n,e,t),FN(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await B_(n,s)}catch(s){await jm(s)}}function FN(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function HN(i,e,t){const n=fn(i);let s=n.Vu[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function MA(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const n of i.Iu.get(e))i.Tu.delete(n),t&&i.Pu.yu(n,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((n=>{i.Ru.containsKey(n)||kN(i,n)}))}function kN(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(DM(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),BM(i))}function uC(i,e,t){for(const n of t)n instanceof PN?(i.Ru.addReference(n.key,e),O5(i,n)):n instanceof VN?(Rt(zM,"Document no longer in limbo: "+n.key),i.Ru.removeReference(n.key,e),i.Ru.containsKey(n.key)||kN(i,n.key)):en(19791,{wu:n})}function O5(i,e){const t=e.key,n=t.path.canonicalString();i.du.get(t)||i.Eu.has(n)||(Rt(zM,"New document in limbo: "+t),i.Eu.add(n),BM(i))}function BM(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new kt(Ei.fromString(e)),n=i.fu.next();i.Au.set(n,new x5(t)),i.du=i.du.insert(t,n),wN(i.remoteStore,new Ih(lc(EM(t.path)),n,"TargetPurposeLimboResolution",qE.ce))}}async function B_(i,e,t){const n=fn(i),s=[],a=[],l=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,d)=>{l.push(n.pu(d,e,t).then((p=>{if((p||t)&&n.isPrimaryClient){const y=p?!p.fromCache:t?.targetChanges.get(d.targetId)?.current;n.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(p){s.push(p);const y=CM.As(d.targetId,p);a.push(y)}})))})),await Promise.all(l),n.Pu.H_(s),await(async function(d,p){const y=fn(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>Je.forEach(p,(S=>Je.forEach(S.Es,(T=>y.persistence.referenceDelegate.addReference(_,S.targetId,T))).next((()=>Je.forEach(S.ds,(T=>y.persistence.referenceDelegate.removeReference(_,S.targetId,T)))))))))}catch(_){if(!qm(_))throw _;Rt(IM,"Failed to update sequence numbers: "+_)}for(const _ of p){const S=_.targetId;if(!_.fromCache){const T=y.Ms.get(S),M=T.snapshotVersion,C=T.withLastLimboFreeSnapshotVersion(M);y.Ms=y.Ms.insert(S,C)}}})(n.localStore,a))}async function U5(i,e){const t=fn(i);if(!t.currentUser.isEqual(e)){Rt(zM,"User change. New user:",e.toKey());const n=await TN(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((u=>{u.forEach((d=>{d.reject(new Tt(Xe.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await B_(t,n.Ls)}}function L5(i,e){const t=fn(i),n=t.Au.get(e);if(n&&n.hu)return zn().add(n.key);{let s=zn();const a=t.Iu.get(e);if(!a)return s;for(const l of a){const u=t.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function GN(i){const e=fn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=BN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I5.bind(null,e),e.Pu.H_=_5.bind(null,e.eventManager),e.Pu.yu=v5.bind(null,e.eventManager),e}function P5(i){const e=fn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N5.bind(null,e),e}class zS{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$E(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return FF(this.persistence,new VF,e.initialUser,this.serializer)}Cu(e){return new xN(RM.mi,this.serializer)}Du(e){return new WF}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zS.provider={build:()=>new zS};class V5 extends zS{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ai(this.persistence.referenceDelegate instanceof PS,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new xF(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ta.withCacheSize(this.cacheSizeBytes):Ta.DEFAULT;return new xN((n=>PS.mi(n,t)),this.serializer)}}class wA{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>cC(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=U5.bind(null,this.syncEngine),await m5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new y5})()}createDatastore(e){const t=$E(e.databaseInfo.databaseId),n=(function(a){return new JF(a)})(e.databaseInfo);return(function(a,l,u,d){return new n5(a,l,u,d)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,a,l,u){return new s5(n,s,a,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>cC(this.syncEngine,t,0)),(function(){return iC.v()?new iC:new YF})())}createSyncEngine(e,t){return(function(s,a,l,u,d,p,y){const _=new T5(s,a,l,u,d,p);return y&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=fn(t);Rt(md,"RemoteStore shutting down."),n.Ea.add(5),await z_(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}wA.provider={build:()=>new wA};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pu("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="FirestoreClient";class z5{constructor(e,t,n,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=Cr.UNAUTHENTICATED,this.clientId=mM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async l=>{Rt(Gh,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(n,(l=>(Rt(Gh,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=PM(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function GT(i,e){i.asyncQueue.verifyOperationInProgress(),Rt(Gh,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener((async s=>{n.isEqual(s)||(await TN(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function hC(i,e){i.asyncQueue.verifyOperationInProgress();const t=await B5(i);Rt(Gh,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((n=>rC(e.remoteStore,n))),i.setAppCheckTokenChangeListener(((n,s)=>rC(e.remoteStore,s))),i._onlineComponents=e}async function B5(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Rt(Gh,"Using user provided OfflineComponentProvider");try{await GT(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Xe.FAILED_PRECONDITION||s.code===Xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Em("Error using user provided cache. Falling back to memory cache: "+t),await GT(i,new zS)}}else Rt(Gh,"Using default OfflineComponentProvider"),await GT(i,new V5(void 0));return i._offlineComponents}async function qN(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Rt(Gh,"Using user provided OnlineComponentProvider"),await hC(i,i._uninitializedComponentsProvider._online)):(Rt(Gh,"Using default OnlineComponentProvider"),await hC(i,new wA))),i._onlineComponents}function F5(i){return qN(i).then((e=>e.syncEngine))}async function XN(i){const e=await qN(i),t=e.eventManager;return t.onListen=b5.bind(null,e.syncEngine),t.onUnlisten=w5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=A5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=R5.bind(null,e.syncEngine),t}function H5(i,e,t={}){const n=new cu;return i.asyncQueue.enqueueAndForget((async()=>(function(a,l,u,d,p){const y=new jN({next:S=>{y.Nu(),l.enqueueAndForget((()=>UN(a,_)));const T=S.docs.has(u);!T&&S.fromCache?p.reject(new Tt(Xe.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&S.fromCache&&d&&d.source==="server"?p.reject(new Tt(Xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),_=new LN(EM(u.path),y,{includeMetadataChanges:!0,qa:!0});return ON(a,_)})(await XN(i),i.asyncQueue,e,t,n))),n.promise}function k5(i,e,t={}){const n=new cu;return i.asyncQueue.enqueueAndForget((async()=>(function(a,l,u,d,p){const y=new jN({next:S=>{y.Nu(),l.enqueueAndForget((()=>UN(a,_))),S.fromCache&&d.source==="server"?p.reject(new Tt(Xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),_=new LN(u,y,{includeMetadataChanges:!0,qa:!0});return ON(a,_)})(await XN(i),i.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="firestore.googleapis.com",dC=!0;class pC{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Tt(Xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YN,this.ssl=dC}else this.host=e.host,this.ssl=e.ssl??dC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SF)throw new Tt(Xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WN(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Tt(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Tt(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Tt(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nx{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Tt(Xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Tt(Xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Yz;switch(n.type){case"firstParty":return new Jz(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Tt(Xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=fC.get(t);n&&(Rt("ComponentProvider","Removing Datastore"),fC.delete(t),n.terminate())})(this),Promise.resolve()}}function G5(i,e,t,n={}){i=mu(i,nx);const s=Hm(e),a=i._getSettings(),l={...a,emulatorOptions:i._getEmulatorOptions()},u=`${e}:${t}`;s&&(yD(`https://${u}`),_D("Firestore",!0)),a.host!==YN&&a.host!==u&&Em("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...a,host:u,ssl:s,emulatorOptions:n};if(!Vh(d,l)&&(i._setSettings(d),n.mockUserToken)){let p,y;if(typeof n.mockUserToken=="string")p=n.mockUserToken,y=Cr.MOCK_USER;else{p=vV(n.mockUserToken,i._app?.options.projectId);const _=n.mockUserToken.sub||n.mockUserToken.user_id;if(!_)throw new Tt(Xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Cr(_)}i._authCredentials=new Kz(new OD(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Nd(this.firestore,e,this._query)}}class _s{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _s(this.firestore,e,this._key)}toJSON(){return{type:_s._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(L_(t,_s._jsonSchema))return new _s(e,n||null,new kt(Ei.fromString(t.referencePath)))}}_s._jsonSchemaVersion="firestore/documentReference/1.0",_s._jsonSchema={type:ys("string",_s._jsonSchemaVersion),referencePath:ys("string")};class Lh extends Nd{constructor(e,t,n){super(e,t,EM(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _s(this.firestore,null,new kt(e))}withConverter(e){return new Lh(this.firestore,e,this._path)}}function Th(i,e,...t){if(i=Gs(i),UD("collection","path",e),i instanceof nx){const n=Ei.fromString(e,...t);return wR(n),new Lh(i,null,n)}{if(!(i instanceof _s||i instanceof Lh))throw new Tt(Xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Ei.fromString(e,...t));return wR(n),new Lh(i.firestore,null,n)}}function gd(i,e,...t){if(i=Gs(i),arguments.length===1&&(e=mM.newId()),UD("doc","path",e),i instanceof nx){const n=Ei.fromString(e,...t);return MR(n),new _s(i,null,new kt(n))}{if(!(i instanceof _s||i instanceof Lh))throw new Tt(Xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Ei.fromString(e,...t));return MR(n),new _s(i.firestore,i instanceof Lh?i.converter:null,new kt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="AsyncQueue";class gC{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new AN(this,"async_queue_retry"),this._c=()=>{const n=kT();n&&Rt(mC,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=kT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=kT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new cu;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qm(e))throw e;Rt(mC,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,pu("INTERNAL UNHANDLED ERROR: ",yC(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=LM.createAndSchedule(this,e,t,n,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&en(47125,{Pc:yC(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function yC(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Ym extends nx{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new gC,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gC(e),this._firestoreClient=void 0,await e}}}function j5(i,e){const t=typeof i=="object"?i:dM(),n=typeof i=="string"?i:IS,s=wd(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=yV("firestore");a&&G5(s,...a)}return s}function FM(i){if(i._terminated)throw new Tt(Xe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||q5(i),i._firestoreClient}function q5(i){const e=i._freezeSettings(),t=(function(s,a,l,u){return new mB(s,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,WN(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new z5(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(s){const a=s?._online.build();return{_offline:s?._offline.build(a),_online:a}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wo(or.fromBase64String(e))}catch(t){throw new Tt(Xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wo(or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wo._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(L_(e,wo._jsonSchema))return wo.fromBase64String(e.bytes)}}wo._jsonSchemaVersion="firestore/bytes/1.0",wo._jsonSchema={type:ys("string",wo._jsonSchemaVersion),bytes:ys("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Tt(Xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Tt(Xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Tt(Xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Vn(this._lat,e._lat)||Vn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:uc._jsonSchemaVersion}}static fromJSON(e){if(L_(e,uc._jsonSchema))return new uc(e.latitude,e.longitude)}}uc._jsonSchemaVersion="firestore/geoPoint/1.0",uc._jsonSchema={type:ys("string",uc._jsonSchemaVersion),latitude:ys("number"),longitude:ys("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(L_(e,hc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new hc(e.vectorValues);throw new Tt(Xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hc._jsonSchemaVersion="firestore/vectorValue/1.0",hc._jsonSchema={type:ys("string",hc._jsonSchemaVersion),vectorValues:ys("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=/^__.*__$/;class W5{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Id(e,this.data,this.fieldMask,t,this.fieldTransforms):new P_(e,this.data,t,this.fieldTransforms)}}function QN(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw en(40011,{Ac:i})}}class kM{constructor(e,t,n,s,a,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new kM({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return BS(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(QN(this.Ac)&&X5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Y5{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||$E(e)}Cc(e,t,n,s=!1){return new kM({Ac:e,methodName:t,Dc:n,path:sr.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GM(i){const e=i._freezeSettings(),t=$E(i._databaseId);return new Y5(i._databaseId,!!e.ignoreUndefinedProperties,t)}function ZN(i,e,t,n,s,a={}){const l=i.Cc(a.merge||a.mergeFields?2:0,e,t,s);e3("Data must be an object, but it was:",l,n);const u=JN(n,l);let d,p;if(a.merge)d=new hl(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const _ of a.mergeFields){const S=Q5(e,_,t);if(!l.contains(S))throw new Tt(Xe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);J5(y,S)||y.push(S)}d=new hl(y),p=l.fieldTransforms.filter((_=>d.covers(_.field)))}else d=null,p=l.fieldTransforms;return new W5(new Mo(u),d,p)}function K5(i,e,t,n=!1){return jM(t,i.Cc(n?4:3,e))}function jM(i,e){if($N(i=Gs(i)))return e3("Unsupported field value:",e,i),JN(i,e);if(i instanceof KN)return(function(n,s){if(!QN(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,s){const a=[];let l=0;for(const u of n){let d=jM(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}})(i,e)}return(function(n,s){if((n=Gs(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return zB(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Ri.fromDate(n);return{timestampValue:LS(s.serializer,a)}}if(n instanceof Ri){const a=new Ri(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:LS(s.serializer,a)}}if(n instanceof uc)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof wo)return{bytesValue:pN(s.serializer,n._byteString)};if(n instanceof _s){const a=s.databaseId,l=n.firestore._databaseId;if(!l.isEqual(a))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:MM(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof hc)return(function(l,u){return{mapValue:{fields:{[GD]:{stringValue:jD},[DS]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw u.Sc("VectorValues must only contain numeric values.");return xM(u.serializer,p)}))}}}}}})(n,s);throw s.Sc(`Unsupported field value: ${jE(n)}`)})(i,e)}function JN(i,e){const t={};return VD(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rd(i,((n,s)=>{const a=jM(s,e.mc(n));a!=null&&(t[n]=a)})),{mapValue:{fields:t}}}function $N(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ri||i instanceof uc||i instanceof wo||i instanceof _s||i instanceof KN||i instanceof hc)}function e3(i,e,t){if(!$N(t)||!LD(t)){const n=jE(t);throw n==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+n)}}function Q5(i,e,t){if((e=Gs(e))instanceof HM)return e._internalPath;if(typeof e=="string")return t3(i,e);throw BS("Field path arguments must be of type string or ",i,!1,void 0,t)}const Z5=new RegExp("[~\\*/\\[\\]]");function t3(i,e,t){if(e.search(Z5)>=0)throw BS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new HM(...e.split("."))._internalPath}catch{throw BS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function BS(i,e,t,n,s){const a=n&&!n.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${n}`),l&&(d+=` in document ${s}`),d+=")"),new Tt(Xe.INVALID_ARGUMENT,u+i+d)}function J5(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,t,n,s,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new _s(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ix("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $5 extends n3{data(){return super.data()}}function ix(i,e){return typeof e=="string"?t3(i,e):e instanceof HM?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Tt(Xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qM{}class i3 extends qM{}function om(i,e,...t){let n=[];e instanceof qM&&n.push(e),n=n.concat(t),(function(a){const l=a.filter((d=>d instanceof XM)).length,u=a.filter((d=>d instanceof sx)).length;if(l>1||l>0&&u>0)throw new Tt(Xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)i=s._apply(i);return i}class sx extends i3{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new sx(e,t,n)}_apply(e){const t=this._parse(e);return r3(e._query,t),new Nd(e.firestore,e.converter,yA(e._query,t))}_parse(e){const t=GM(e.firestore);return(function(a,l,u,d,p,y,_){let S;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Tt(Xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){vC(_,y);const M=[];for(const C of _)M.push(_C(d,a,C));S={arrayValue:{values:M}}}else S=_C(d,a,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||vC(_,y),S=K5(u,l,_,y==="in"||y==="not-in");return gs.create(p,y,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function yy(i,e,t){const n=e,s=ix("where",i);return sx._create(s,n,t)}class XM extends qM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new XM(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:yl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let l=s;const u=a.getFlattenedFilters();for(const d of u)r3(l,d),l=yA(l,d)})(e._query,t),new Nd(e.firestore,e.converter,yA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class WM extends i3{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new WM(e,t)}_apply(e){const t=(function(s,a,l){if(s.startAt!==null)throw new Tt(Xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Tt(Xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new l_(a,l)})(e._query,this._field,this._direction);return new Nd(e.firestore,e.converter,(function(s,a){const l=s.explicitOrderBy.concat([a]);return new Xm(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function s3(i,e="asc"){const t=e,n=ix("orderBy",i);return WM._create(n,t)}function _C(i,e,t){if(typeof(t=Gs(t))=="string"){if(t==="")throw new Tt(Xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JD(e)&&t.indexOf("/")!==-1)throw new Tt(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Ei.fromString(t));if(!kt.isDocumentKey(n))throw new Tt(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return LR(i,new kt(n))}if(t instanceof _s)return LR(i,t._key);throw new Tt(Xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jE(t)}.`)}function vC(i,e){if(!Array.isArray(i)||i.length===0)throw new Tt(Xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function r3(i,e){const t=(function(s,a){for(const l of s)for(const u of l.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null})(i.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Tt(Xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Tt(Xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class t6{convertValue(e,t="none"){switch(Hh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw en(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Rd(e,((s,a)=>{n[s]=this.convertValue(a,t)})),n}convertVectorValue(e){const t=e.fields?.[DS].arrayValue?.values?.map((n=>rs(n.doubleValue)));return new hc(t)}convertGeoPoint(e){return new uc(rs(e.latitude),rs(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=WE(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(r_(e));default:return null}}convertTimestamp(e){const t=Bh(e);return new Ri(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ei.fromString(e);ai(SN(n),9688,{name:e});const s=new a_(n.get(1),n.get(3)),a=new kt(n.popFirst(5));return s.isEqual(t)||pu(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(i,e,t){let n;return n=i?i.toFirestore(e):e,n}class Py{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ud extends n3{constructor(e,t,n,s,a,l){super(e,t,n,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(ix("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Tt(Xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ud._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ud._jsonSchemaVersion="firestore/documentSnapshot/1.0",ud._jsonSchema={type:ys("string",ud._jsonSchemaVersion),bundleSource:ys("string","DocumentSnapshot"),bundleName:ys("string"),bundle:ys("string")};class mS extends ud{data(e={}){return super.data(e)}}class mm{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Py(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new mS(this._firestore,this._userDataWriter,n.key,n,new Py(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Tt(Xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new mS(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Py(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const d=new mS(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Py(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,y=-1;return u.type!==0&&(p=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),y=l.indexOf(u.doc.key)),{type:n6(u.type),doc:d,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Tt(Xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=mm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mM.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function n6(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return en(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(i){i=mu(i,_s);const e=mu(i.firestore,Ym);return H5(FM(e),i._key).then((t=>s6(e,i,t)))}mm._jsonSchemaVersion="firestore/querySnapshot/1.0",mm._jsonSchema={type:ys("string",mm._jsonSchemaVersion),bundleSource:ys("string","QuerySnapshot"),bundleName:ys("string"),bundle:ys("string")};class l3 extends t6{constructor(e){super(),this.firestore=e}convertBytes(e){return new wo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _s(this.firestore,null,t)}}function lm(i){i=mu(i,Nd);const e=mu(i.firestore,Ym),t=FM(e),n=new l3(e);return e6(i._query),k5(t,i._query).then((s=>new mm(e,n,i,s)))}function i6(i,e,t){i=mu(i,_s);const n=mu(i.firestore,Ym),s=a3(i.converter,e);return YM(n,[ZN(GM(n),"setDoc",i._key,s,i.converter!==null,t).toMutation(i._key,pl.none())])}function RA(i){return YM(mu(i.firestore,Ym),[new TM(i._key,pl.none())])}function c3(i,e){const t=mu(i.firestore,Ym),n=gd(i),s=a3(i.converter,e);return YM(t,[ZN(GM(i.firestore),"addDoc",n._key,s,i.converter!==null,{}).toMutation(n._key,pl.exists(!1))]).then((()=>n))}function YM(i,e){return(function(n,s){const a=new cu;return n.asyncQueue.enqueueAndForget((async()=>C5(await F5(n),s,a))),a.promise})(FM(i),e)}function s6(i,e,t){const n=t.docs.get(e._key),s=new l3(i);return new ud(i,s,e._key,n,new Py(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Gm=s})(km),gc(new gl("firestore",((n,{instanceIdentifier:s,options:a})=>{const l=n.getProvider("app").getImmediate(),u=new Ym(new Qz(n.getProvider("auth-internal")),new $z(l,n.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Tt(Xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new a_(p.options.projectId,y)})(l,s),l);return a={useFetchStreams:t,...a},u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),Co(xR,TR,e),Co(xR,TR,"esm2020")})();const u3="@firebase/installations",KM="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=1e4,f3=`w:${KM}`,d3="FIS_v2",r6="https://firebaseinstallations.googleapis.com/v1",a6=3600*1e3,o6="installations",l6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},yd=new Md(o6,l6,c6);function p3(i){return i instanceof Sl&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3({projectId:i}){return`${r6}/projects/${i}/installations`}function g3(i){return{token:i.token,requestStatus:2,expiresIn:h6(i.expiresIn),creationTime:Date.now()}}async function y3(i,e){const n=(await e.json()).error;return yd.create("request-failed",{requestName:i,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function _3({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function u6(i,{refreshToken:e}){const t=_3(i);return t.append("Authorization",f6(e)),t}async function v3(i){const e=await i();return e.status>=500&&e.status<600?i():e}function h6(i){return Number(i.replace("s","000"))}function f6(i){return`${d3} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d6({appConfig:i,heartbeatServiceProvider:e},{fid:t}){const n=m3(i),s=_3(i),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={fid:t,authVersion:d3,appId:i.appId,sdkVersion:f3},u={method:"POST",headers:s,body:JSON.stringify(l)},d=await v3(()=>fetch(n,u));if(d.ok){const p=await d.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:g3(p.authToken)}}else throw await y3("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=/^[cdef][\w-]{21}$/,CA="";function g6(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const t=y6(i);return m6.test(t)?t:CA}catch{return CA}}function y6(i){return p6(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=new Map;function x3(i,e){const t=rx(i);T3(t,e),_6(t,e)}function T3(i,e){const t=E3.get(i);if(t)for(const n of t)n(e)}function _6(i,e){const t=v6();t&&t.postMessage({key:i,fid:e}),S6()}let ad=null;function v6(){return!ad&&"BroadcastChannel"in self&&(ad=new BroadcastChannel("[Firebase] FID Change"),ad.onmessage=i=>{T3(i.data.key,i.data.fid)}),ad}function S6(){E3.size===0&&ad&&(ad.close(),ad=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="firebase-installations-database",x6=1,_d="firebase-installations-store";let jT=null;function QM(){return jT||(jT=xD(E6,x6,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(_d)}}})),jT}async function FS(i,e){const t=rx(i),s=(await QM()).transaction(_d,"readwrite"),a=s.objectStore(_d),l=await a.get(t);return await a.put(e,t),await s.done,(!l||l.fid!==e.fid)&&x3(i,e.fid),e}async function b3(i){const e=rx(i),n=(await QM()).transaction(_d,"readwrite");await n.objectStore(_d).delete(e),await n.done}async function ax(i,e){const t=rx(i),s=(await QM()).transaction(_d,"readwrite"),a=s.objectStore(_d),l=await a.get(t),u=e(l);return u===void 0?await a.delete(t):await a.put(u,t),await s.done,u&&(!l||l.fid!==u.fid)&&x3(i,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZM(i){let e;const t=await ax(i.appConfig,n=>{const s=T6(n),a=b6(i,s);return e=a.registrationPromise,a.installationEntry});return t.fid===CA?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function T6(i){const e=i||{fid:g6(),registrationStatus:0};return A3(e)}function b6(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(yd.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=A6(i,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:M6(i)}:{installationEntry:e}}async function A6(i,e){try{const t=await d6(i,e);return FS(i.appConfig,t)}catch(t){throw p3(t)&&t.customData.serverCode===409?await b3(i.appConfig):await FS(i.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function M6(i){let e=await SC(i.appConfig);for(;e.registrationStatus===1;)await S3(100),e=await SC(i.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await ZM(i);return n||t}return e}function SC(i){return ax(i,e=>{if(!e)throw yd.create("installation-not-found");return A3(e)})}function A3(i){return w6(i)?{fid:i.fid,registrationStatus:0}:i}function w6(i){return i.registrationStatus===1&&i.registrationTime+h3<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R6({appConfig:i,heartbeatServiceProvider:e},t){const n=C6(i,t),s=u6(i,t),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={installation:{sdkVersion:f3,appId:i.appId}},u={method:"POST",headers:s,body:JSON.stringify(l)},d=await v3(()=>fetch(n,u));if(d.ok){const p=await d.json();return g3(p)}else throw await y3("Generate Auth Token",d)}function C6(i,{fid:e}){return`${m3(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(i,e=!1){let t;const n=await ax(i.appConfig,a=>{if(!M3(a))throw yd.create("not-registered");const l=a.authToken;if(!e&&N6(l))return a;if(l.requestStatus===1)return t=I6(i,e),a;{if(!navigator.onLine)throw yd.create("app-offline");const u=U6(a);return t=D6(i,u),u}});return t?await t:n.authToken}async function I6(i,e){let t=await EC(i.appConfig);for(;t.authToken.requestStatus===1;)await S3(100),t=await EC(i.appConfig);const n=t.authToken;return n.requestStatus===0?JM(i,e):n}function EC(i){return ax(i,e=>{if(!M3(e))throw yd.create("not-registered");const t=e.authToken;return L6(t)?{...e,authToken:{requestStatus:0}}:e})}async function D6(i,e){try{const t=await R6(i,e),n={...e,authToken:t};return await FS(i.appConfig,n),t}catch(t){if(p3(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await b3(i.appConfig);else{const n={...e,authToken:{requestStatus:0}};await FS(i.appConfig,n)}throw t}}function M3(i){return i!==void 0&&i.registrationStatus===2}function N6(i){return i.requestStatus===2&&!O6(i)}function O6(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+a6}function U6(i){const e={requestStatus:1,requestTime:Date.now()};return{...i,authToken:e}}function L6(i){return i.requestStatus===1&&i.requestTime+h3<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P6(i){const e=i,{installationEntry:t,registrationPromise:n}=await ZM(e);return n?n.catch(console.error):JM(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V6(i,e=!1){const t=i;return await z6(t),(await JM(t,e)).token}async function z6(i){const{registrationPromise:e}=await ZM(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(i){if(!i||!i.options)throw qT("App Configuration");if(!i.name)throw qT("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!i.options[t])throw qT(t);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function qT(i){return yd.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3="installations",F6="installations-internal",H6=i=>{const e=i.getProvider("app").getImmediate(),t=B6(e),n=wd(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},k6=i=>{const e=i.getProvider("app").getImmediate(),t=wd(e,w3).getImmediate();return{getId:()=>P6(t),getToken:s=>V6(t,s)}};function G6(){gc(new gl(w3,H6,"PUBLIC")),gc(new gl(F6,k6,"PRIVATE"))}G6();Co(u3,KM);Co(u3,KM,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="analytics",j6="firebase_id",q6="origin",X6=60*1e3,W6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$M="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new GE("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Za=new Md("analytics","Analytics",Y6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(i){if(!i.startsWith($M)){const e=Za.create("invalid-gtag-resource",{gtagURL:i});return aa.warn(e.message),""}return i}function R3(i){return Promise.all(i.map(e=>e.catch(t=>t)))}function Q6(i,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(i,e)),t}function Z6(i,e){const t=Q6("firebase-js-sdk-policy",{createScriptURL:K6}),n=document.createElement("script"),s=`${$M}?l=${i}&id=${e}`;n.src=t?t?.createScriptURL(s):s,n.async=!0,document.head.appendChild(n)}function J6(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function $6(i,e,t,n,s,a){const l=n[s];try{if(l)await e[l];else{const d=(await R3(t)).find(p=>p.measurementId===s);d&&await e[d.appId]}}catch(u){aa.error(u)}i("config",s,a)}async function eH(i,e,t,n,s){try{let a=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const u=await R3(t);for(const d of l){const p=u.find(_=>_.measurementId===d),y=p&&e[p.appId];if(y)a.push(y);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),i("event",n,s||{})}catch(a){aa.error(a)}}function tH(i,e,t,n){async function s(a,...l){try{if(a==="event"){const[u,d]=l;await eH(i,e,t,u,d)}else if(a==="config"){const[u,d]=l;await $6(i,e,t,n,u,d)}else if(a==="consent"){const[u,d]=l;i("consent",u,d)}else if(a==="get"){const[u,d,p]=l;i("get",u,d,p)}else if(a==="set"){const[u]=l;i("set",u)}else i(a,...l)}catch(u){aa.error(u)}}return s}function nH(i,e,t,n,s){let a=function(...l){window[n].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=tH(a,i,e,t),{gtagCore:a,wrappedGtag:window[s]}}function iH(i){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes($M)&&t.src.includes(i))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sH=30,rH=1e3;class aH{constructor(e={},t=rH){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const C3=new aH;function oH(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function lH(i){const{appId:e,apiKey:t}=i,n={method:"GET",headers:oH(t)},s=W6.replace("{app-id}",e),a=await fetch(s,n);if(a.status!==200&&a.status!==304){let l="";try{const u=await a.json();u.error?.message&&(l=u.error.message)}catch{}throw Za.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function cH(i,e=C3,t){const{appId:n,apiKey:s,measurementId:a}=i.options;if(!n)throw Za.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:n};throw Za.create("no-api-key")}const l=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new fH;return setTimeout(async()=>{u.abort()},X6),I3({appId:n,apiKey:s,measurementId:a},l,u,e)}async function I3(i,{throttleEndTimeMillis:e,backoffCount:t},n,s=C3){const{appId:a,measurementId:l}=i;try{await uH(n,e)}catch(u){if(l)return aa.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:a,measurementId:l};throw u}try{const u=await lH(i);return s.deleteThrottleMetadata(a),u}catch(u){const d=u;if(!hH(d)){if(s.deleteThrottleMetadata(a),l)return aa.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:a,measurementId:l};throw u}const p=Number(d?.customData?.httpStatus)===503?fR(t,s.intervalMillis,sH):fR(t,s.intervalMillis),y={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return s.setThrottleMetadata(a,y),aa.debug(`Calling attemptFetch again in ${p} millis`),I3(i,y,n,s)}}function uH(i,e){return new Promise((t,n)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(t,s);i.addEventListener(()=>{clearTimeout(a),n(Za.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function hH(i){if(!(i instanceof Sl)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class fH{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function dH(i,e,t,n,s){if(s&&s.global){i("event",t,n);return}else{const a=await e,l={...n,send_to:a};i("event",t,l)}}async function pH(i,e,t,n){if(n&&n.global){const s={};for(const a of Object.keys(t))s[`user_properties.${a}`]=t[a];return i("set",s),Promise.resolve()}else{const s=await e;i("config",s,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mH(){if(uM())try{await hM()}catch(i){return aa.warn(Za.create("indexeddb-unavailable",{errorInfo:i?.toString()}).message),!1}else return aa.warn(Za.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function gH(i,e,t,n,s,a,l){const u=cH(i);u.then(S=>{t[S.measurementId]=S.appId,i.options.measurementId&&S.measurementId!==i.options.measurementId&&aa.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>aa.error(S)),e.push(u);const d=mH().then(S=>{if(S)return n.getId()}),[p,y]=await Promise.all([u,d]);iH(a)||Z6(a,p.measurementId),s("js",new Date);const _=l?.config??{};return _[q6]="firebase",_.update=!0,y!=null&&(_[j6]=y),s("config",p.measurementId,_),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(e){this.app=e}_delete(){return delete gm[this.app.options.appId],Promise.resolve()}}let gm={},xC=[];const TC={};let XT="dataLayer",_H="gtag",bC,e1,AC=!1;function vH(){const i=[];if(cM()&&i.push("This is a browser extension environment."),vD()||i.push("Cookies are not available."),i.length>0){const e=i.map((n,s)=>`(${s+1}) ${n}`).join(" "),t=Za.create("invalid-analytics-context",{errorInfo:e});aa.warn(t.message)}}function SH(i,e,t){vH();const n=i.options.appId;if(!n)throw Za.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)aa.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Za.create("no-api-key");if(gm[n]!=null)throw Za.create("already-exists",{id:n});if(!AC){J6(XT);const{wrappedGtag:a,gtagCore:l}=nH(gm,xC,TC,XT,_H);e1=a,bC=l,AC=!0}return gm[n]=gH(i,xC,TC,e,bC,XT,t),new yH(i)}function EH(i=dM()){i=Gs(i);const e=wd(i,HS);return e.isInitialized()?e.getImmediate():xH(i)}function xH(i,e={}){const t=wd(i,HS);if(t.isInitialized()){const s=t.getImmediate();if(Vh(e,t.getOptions()))return s;throw Za.create("already-initialized")}return t.initialize({options:e})}async function TH(){if(cM()||!vD()||!uM())return!1;try{return await hM()}catch{return!1}}function bH(i,e,t){i=Gs(i),pH(e1,gm[i.app.options.appId],e,t).catch(n=>aa.error(n))}function D3(i,e,t,n){i=Gs(i),dH(e1,gm[i.app.options.appId],e,t,n).catch(s=>aa.error(s))}const MC="@firebase/analytics",wC="0.10.19";function AH(){gc(new gl(HS,(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return SH(n,s,t)},"PUBLIC")),gc(new gl("analytics-internal",i,"PRIVATE")),Co(MC,wC),Co(MC,wC,"esm2020");function i(e){try{const t=e.getProvider(HS).getImmediate();return{logEvent:(n,s,a)=>D3(t,n,s,a),setUserProperties:(n,s)=>bH(t,n,s)}}catch(t){throw Za.create("interop-component-reg-failed",{reason:t})}}}AH();function N3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MH=N3,O3=new Md("auth","Firebase",N3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=new GE("@firebase/auth");function wH(i,...e){kS.logLevel<=Pn.WARN&&kS.warn(`Auth (${km}): ${i}`,...e)}function gS(i,...e){kS.logLevel<=Pn.ERROR&&kS.error(`Auth (${km}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(i,...e){throw t1(i,...e)}function fc(i,...e){return t1(i,...e)}function U3(i,e,t){const n={...MH(),[e]:t};return new Md("auth","Firebase",n).create(e,{appName:i.name})}function Ph(i){return U3(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function t1(i,...e){if(typeof i!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return O3.create(i,...e)}function $t(i,e,...t){if(!i)throw t1(e,...t)}function au(i){const e="INTERNAL ASSERTION FAILED: "+i;throw gS(e),new Error(e)}function yu(i,e){i||au(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(){return typeof self<"u"&&self.location?.href||""}function RH(){return RC()==="http:"||RC()==="https:"}function RC(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RH()||cM()||"connection"in navigator)?navigator.onLine:!0}function IH(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,t){this.shortDelay=e,this.longDelay=t,yu(t>e,"Short delay should be less than long delay!"),this.isMobile=xV()||AV()}get(){return CH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(i,e){yu(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;au("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;au("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;au("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OH=new F_(3e4,6e4);function Od(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Wh(i,e,t,n,s={}){return P3(i,s,async()=>{let a={},l={};n&&(e==="GET"?l=n:a={body:JSON.stringify(n)});const u=U_({key:i.config.apiKey,...l}).slice(1),d=await i._getAdditionalHeaders();d["Content-Type"]="application/json",i.languageCode&&(d["X-Firebase-Locale"]=i.languageCode);const p={method:e,headers:d,...a};return bV()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&Hm(i.emulatorConfig.host)&&(p.credentials="include"),L3.fetch()(await V3(i,i.config.apiHost,t,u),p)})}async function P3(i,e,t){i._canInitEmulator=!1;const n={...DH,...e};try{const s=new LH(i),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw d0(i,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const u=a.ok?l.errorMessage:l.error.message,[d,p]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw d0(i,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw d0(i,"email-already-in-use",l);if(d==="USER_DISABLED")throw d0(i,"user-disabled",l);const y=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw U3(i,y,p);_l(i,y)}}catch(s){if(s instanceof Sl)throw s;_l(i,"network-request-failed",{message:String(s)})}}async function ox(i,e,t,n,s={}){const a=await Wh(i,e,t,n,s);return"mfaPendingCredential"in a&&_l(i,"multi-factor-auth-required",{_serverResponse:a}),a}async function V3(i,e,t,n){const s=`${e}${t}?${n}`,a=i,l=a.config.emulator?n1(i.config,s):`${i.config.apiScheme}://${s}`;return NH.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function UH(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LH{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(fc(this.auth,"network-request-failed")),OH.get())})}}function d0(i,e,t){const n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=fc(i,e,n);return s.customData._tokenResponse=t,s}function CC(i){return i!==void 0&&i.enterprise!==void 0}class PH{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return UH(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VH(i,e){return Wh(i,"GET","/v2/recaptchaConfig",Od(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zH(i,e){return Wh(i,"POST","/v1/accounts:delete",e)}async function GS(i,e){return Wh(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BH(i,e=!1){const t=Gs(i),n=await t.getIdToken(e),s=i1(n);$t(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a?.sign_in_provider;return{claims:s,token:n,authTime:qy(WT(s.auth_time)),issuedAtTime:qy(WT(s.iat)),expirationTime:qy(WT(s.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function WT(i){return Number(i)*1e3}function i1(i){const[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return gS("JWT malformed, contained fewer than 3 sections"),null;try{const s=dD(t);return s?JSON.parse(s):(gS("Failed to decode base64 JWT payload"),null)}catch(s){return gS("Caught error parsing JWT payload as JSON",s?.toString()),null}}function IC(i){const e=i1(i);return $t(e,"internal-error"),$t(typeof e.exp<"u","internal-error"),$t(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h_(i,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Sl&&FH(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function FH({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qy(this.lastLoginAt),this.creationTime=qy(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(i){const e=i.auth,t=await i.getIdToken(),n=await h_(i,GS(e,{idToken:t}));$t(n?.users.length,e,"internal-error");const s=n.users[0];i._notifyReloadListener(s);const a=s.providerUserInfo?.length?z3(s.providerUserInfo):[],l=GH(i.providerData,a),u=i.isAnonymous,d=!(i.email&&s.passwordHash)&&!l?.length,p=u?d:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new DA(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(i,y)}async function kH(i){const e=Gs(i);await jS(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GH(i,e){return[...i.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function z3(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jH(i,e){const t=await P3(i,{},async()=>{const n=U_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=i.config,l=await V3(i,s,"/v1/token",`key=${a}`),u=await i._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:n};return i.emulatorConfig&&Hm(i.emulatorConfig.host)&&(d.credentials="include"),L3.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qH(i,e){return Wh(i,"POST","/v2/accounts:revokeToken",Od(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$t(e.idToken,"internal-error"),$t(typeof e.idToken<"u","internal-error"),$t(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$t(e.length!==0,"internal-error");const t=IC(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:a}=await jH(e,t);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:a}=t,l=new ym;return n&&($t(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),s&&($t(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&($t(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ym,this.toJSON())}_performRefresh(){return au("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(i,e){$t(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class fl{constructor({uid:e,auth:t,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new HH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new DA(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await h_(this,this.stsTokenManager.getToken(this.auth,e));return $t(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return BH(this,e)}reload(){return kH(this)}_assign(e){this!==e&&($t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fl({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await jS(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ul(this.auth.app))return Promise.reject(Ph(this.auth));const e=await this.getIdToken();return await h_(this,zH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,p=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:_,emailVerified:S,isAnonymous:T,providerData:M,stsTokenManager:C}=t;$t(_&&C,e,"internal-error");const w=ym.fromJSON(this.name,C);$t(typeof _=="string",e,"internal-error"),ph(n,e.name),ph(s,e.name),$t(typeof S=="boolean",e,"internal-error"),$t(typeof T=="boolean",e,"internal-error"),ph(a,e.name),ph(l,e.name),ph(u,e.name),ph(d,e.name),ph(p,e.name),ph(y,e.name);const b=new fl({uid:_,auth:e,email:s,emailVerified:S,displayName:n,isAnonymous:T,photoURL:l,phoneNumber:a,tenantId:u,stsTokenManager:w,createdAt:p,lastLoginAt:y});return M&&Array.isArray(M)&&(b.providerData=M.map(D=>({...D}))),d&&(b._redirectEventId=d),b}static async _fromIdTokenResponse(e,t,n=!1){const s=new ym;s.updateFromServerResponse(t);const a=new fl({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await jS(a),a}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];$t(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?z3(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!a?.length,u=new ym;u.updateFromIdToken(n);const d=new fl({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new DA(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new Map;function ou(i){yu(i instanceof Function,"Expected a class definition");let e=DC.get(i);return e?(yu(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,DC.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}B3.type="NONE";const NC=B3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(i,e,t){return`firebase:${i}:${e}:${t}`}class _m{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=yS(this.userKey,s.apiKey,a),this.fullPersistenceKey=yS("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await GS(this.auth,{idToken:e}).catch(()=>{});return t?fl._fromGetAccountInfoResponse(this.auth,t,e):null}return fl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new _m(ou(NC),e,n);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||ou(NC);const l=yS(n,e.config.apiKey,e.name);let u=null;for(const p of t)try{const y=await p._get(l);if(y){let _;if(typeof y=="string"){const S=await GS(e,{idToken:y}).catch(()=>{});if(!S)break;_=await fl._fromGetAccountInfoResponse(e,S,y)}else _=fl._fromJSON(e,y);p!==a&&(u=_),a=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new _m(a,e,n):(a=d[0],u&&await a._set(l,u.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new _m(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(G3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(q3(e))return"Blackberry";if(X3(e))return"Webos";if(H3(e))return"Safari";if((e.includes("chrome/")||k3(e))&&!e.includes("edge/"))return"Chrome";if(j3(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if(n?.length===2)return n[1]}return"Other"}function F3(i=Ur()){return/firefox\//i.test(i)}function H3(i=Ur()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function k3(i=Ur()){return/crios\//i.test(i)}function G3(i=Ur()){return/iemobile/i.test(i)}function j3(i=Ur()){return/android/i.test(i)}function q3(i=Ur()){return/blackberry/i.test(i)}function X3(i=Ur()){return/webos/i.test(i)}function s1(i=Ur()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function XH(i=Ur()){return s1(i)&&!!window.navigator?.standalone}function WH(){return MV()&&document.documentMode===10}function W3(i=Ur()){return s1(i)||j3(i)||X3(i)||q3(i)||/windows phone/i.test(i)||G3(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(i,e=[]){let t;switch(i){case"Browser":t=OC(Ur());break;case"Worker":t=`${OC(Ur())}-${i}`;break;default:t=i}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${km}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((l,u)=>{try{const d=e(a);l(d)}catch(d){u(d)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KH(i,e={}){return Wh(i,"GET","/v2/passwordPolicy",Od(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QH=6;class ZH{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??QH,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JH{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new UC(this),this.idTokenSubscription=new UC(this),this.beforeStateQueue=new YH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ou(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await _m.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await GS(this,{idToken:e}),n=await fl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ul(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=n?._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(n=u.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return $t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jS(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ul(this.app))return Promise.reject(Ph(this));const t=e?Gs(e):null;return t&&$t(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ul(this.app)?Promise.reject(Ph(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ul(this.app)?Promise.reject(Ph(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ou(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KH(this),t=new ZH(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Md("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await qH(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ou(e)||this._popupRedirectResolver;$t(t,this,"argument-error"),this.redirectPersistenceManager=await _m.create(this,[ou(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if($t(u,this,"internal-error"),u.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(ul(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wH(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Km(i){return Gs(i)}class UC{constructor(e){this.auth=e,this.observer=null,this.addObserver=NV(t=>this.observer=t)}get next(){return $t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $H(i){lx=i}function K3(i){return lx.loadJS(i)}function ek(){return lx.recaptchaEnterpriseScript}function tk(){return lx.gapiScript}function nk(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class ik{constructor(){this.enterprise=new sk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class sk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const rk="recaptcha-enterprise",Q3="NO_RECAPTCHA";class ak{constructor(e){this.type=rk,this.auth=Km(e)}async verify(e="verify",t=!1){async function n(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,u)=>{VH(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const p=new PH(d);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(d=>{u(d)})})}function s(a,l,u){const d=window.grecaptcha;CC(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(Q3)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ik().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{n(this.auth).then(u=>{if(!t&&CC(window.grecaptcha))s(u,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=ek();d.length!==0&&(d+=u),K3(d).then(()=>{s(u,a,l)}).catch(p=>{l(p)})}}).catch(u=>{l(u)})})}}async function LC(i,e,t,n=!1,s=!1){const a=new ak(i);let l;if(s)l=Q3;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,p=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function PC(i,e,t,n,s){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await LC(i,e,t,t==="getOobCode");return n(i,a)}else return n(i,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await LC(i,e,t,t==="getOobCode");return n(i,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(i,e){const t=wd(i,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Vh(a,e??{}))return s;_l(s,"already-initialized")}return t.initialize({options:e})}function lk(i,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(ou);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e?.popupRedirectResolver)}function ck(i,e,t){const n=Km(i);$t(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,a=Z3(e),{host:l,port:u}=uk(e),d=u===null?"":`:${u}`,p={url:`${a}//${l}${d}/`},y=Object.freeze({host:l,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){$t(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),$t(Vh(p,n.config.emulator)&&Vh(y,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=p,n.emulatorConfig=y,n.settings.appVerificationDisabledForTesting=!0,Hm(l)?(yD(`${a}//${l}${d}`),_D("Auth",!0)):hk()}function Z3(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function uk(i){const e=Z3(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:VC(n.substr(a.length+1))}}else{const[a,l]=n.split(":");return{host:a,port:VC(l)}}}function VC(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function hk(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return au("not implemented")}_getIdTokenResponse(e){return au("not implemented")}_linkToIdToken(e,t){return au("not implemented")}_getReauthenticationResolver(e){return au("not implemented")}}async function fk(i,e){return Wh(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(i,e){return ox(i,"POST","/v1/accounts:signInWithPassword",Od(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pk(i,e){return ox(i,"POST","/v1/accounts:signInWithEmailLink",Od(i,e))}async function mk(i,e){return ox(i,"POST","/v1/accounts:signInWithEmailLink",Od(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_ extends r1{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new f_(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new f_(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return PC(e,t,"signInWithPassword",dk);case"emailLink":return pk(e,{email:this._email,oobCode:this._password});default:_l(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return PC(e,n,"signUpPassword",fk);case"emailLink":return mk(e,{idToken:t,email:this._email,oobCode:this._password});default:_l(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vm(i,e){return ox(i,"POST","/v1/accounts:signInWithIdp",Od(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="http://localhost";class vd extends r1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_l("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...a}=t;if(!n||!s)return null;const l=new vd(n,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return vm(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,vm(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vm(e,t)}buildRequest(){const e={requestUri:gk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=U_(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _k(i){const e=Dy(Ny(i)).link,t=e?Dy(Ny(e)).deep_link_id:null,n=Dy(Ny(i)).deep_link_id;return(n?Dy(Ny(n)).link:null)||n||t||e||i}class a1{constructor(e){const t=Dy(Ny(e)),n=t.apiKey??null,s=t.oobCode??null,a=yk(t.mode??null);$t(n&&s&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=_k(e);try{return new a1(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this.providerId=Qm.PROVIDER_ID}static credential(e,t){return f_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=a1.parseLink(t);return $t(n,"argument-error"),f_._fromEmailAndCode(e,n.code,n.tenantId)}}Qm.PROVIDER_ID="password";Qm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_ extends J3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends H_{constructor(){super("facebook.com")}static credential(e){return vd._fromParams({providerId:bh.PROVIDER_ID,signInMethod:bh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bh.credentialFromTaggedObject(e)}static credentialFromError(e){return bh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bh.credential(e.oauthAccessToken)}catch{return null}}}bh.FACEBOOK_SIGN_IN_METHOD="facebook.com";bh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends H_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vd._fromParams({providerId:Ah.PROVIDER_ID,signInMethod:Ah.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ah.credentialFromTaggedObject(e)}static credentialFromError(e){return Ah.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ah.credential(t,n)}catch{return null}}}Ah.GOOGLE_SIGN_IN_METHOD="google.com";Ah.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends H_{constructor(){super("github.com")}static credential(e){return vd._fromParams({providerId:Mh.PROVIDER_ID,signInMethod:Mh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mh.credentialFromTaggedObject(e)}static credentialFromError(e){return Mh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mh.credential(e.oauthAccessToken)}catch{return null}}}Mh.GITHUB_SIGN_IN_METHOD="github.com";Mh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends H_{constructor(){super("twitter.com")}static credential(e,t){return vd._fromParams({providerId:wh.PROVIDER_ID,signInMethod:wh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wh.credentialFromTaggedObject(e)}static credentialFromError(e){return wh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return wh.credential(t,n)}catch{return null}}}wh.TWITTER_SIGN_IN_METHOD="twitter.com";wh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const a=await fl._fromIdTokenResponse(e,n,s),l=zC(n);return new wm({user:a,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=zC(n);return new wm({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function zC(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS extends Sl{constructor(e,t,n,s){super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,qS.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new qS(e,t,n,s)}}function $3(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?qS._fromErrorAndOperation(i,a,e,n):a})}async function vk(i,e,t=!1){const n=await h_(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return wm._forOperation(i,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(i,e,t=!1){const{auth:n}=i;if(ul(n.app))return Promise.reject(Ph(n));const s="reauthenticate";try{const a=await h_(i,$3(n,s,e,i),t);$t(a.idToken,n,"internal-error");const l=i1(a.idToken);$t(l,n,"internal-error");const{sub:u}=l;return $t(i.uid===u,n,"user-mismatch"),wm._forOperation(i,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&_l(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eO(i,e,t=!1){if(ul(i.app))return Promise.reject(Ph(i));const n="signIn",s=await $3(i,n,e),a=await wm._fromIdTokenResponse(i,n,s);return t||await i._updateCurrentUser(a.user),a}async function Ek(i,e){return eO(Km(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(i){const e=Km(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Tk(i,e,t){return ul(i.app)?Promise.reject(Ph(i)):Ek(Gs(i),Qm.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&xk(i),n})}function bk(i,e,t,n){return Gs(i).onIdTokenChanged(e,t,n)}function Ak(i,e,t){return Gs(i).beforeAuthStateChanged(e,t)}function Mk(i,e,t,n){return Gs(i).onAuthStateChanged(e,t,n)}function wk(i){return Gs(i).signOut()}const XS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(XS,"1"),this.storage.removeItem(XS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=1e3,Ck=10;class nO extends tO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},a=this.storage.getItem(n);WH()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Ck):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},Rk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nO.type="LOCAL";const Ik=nO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO extends tO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iO.type="SESSION";const sO=iO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new cx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const u=Array.from(l).map(async p=>p(t.origin,a)),d=await Dk(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((u,d)=>{const p=o1("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},n);l={messageChannel:s,onMessage(_){const S=_;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(S.data.response);break;default:clearTimeout(y),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(){return window}function Ok(i){dc().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(){return typeof dc().WorkerGlobalScope<"u"&&typeof dc().importScripts=="function"}async function Uk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Lk(){return navigator?.serviceWorker?.controller||null}function Pk(){return rO()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO="firebaseLocalStorageDb",Vk=1,WS="firebaseLocalStorage",oO="fbase_key";class k_{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ux(i,e){return i.transaction([WS],e?"readwrite":"readonly").objectStore(WS)}function zk(){const i=indexedDB.deleteDatabase(aO);return new k_(i).toPromise()}function NA(){const i=indexedDB.open(aO,Vk);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(WS,{keyPath:oO})}catch(s){t(s)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(WS)?e(n):(n.close(),await zk(),e(await NA()))})})}async function BC(i,e,t){const n=ux(i,!0).put({[oO]:e,value:t});return new k_(n).toPromise()}async function Bk(i,e){const t=ux(i,!1).get(e),n=await new k_(t).toPromise();return n===void 0?null:n.value}function FC(i,e){const t=ux(i,!0).delete(e);return new k_(t).toPromise()}const Fk=800,Hk=3;class lO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await NA(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>Hk)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cx._getInstance(Pk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Uk(),!this.activeServiceWorker)return;this.sender=new Nk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Lk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await NA();return await BC(e,XS,"1"),await FC(e,XS),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>BC(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>Bk(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>FC(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=ux(s,!1).getAll();return new k_(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Fk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lO.type="LOCAL";const kk=lO;new F_(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(i,e){return e?ou(e):($t(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1 extends r1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vm(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jk(i){return eO(i.auth,new l1(i),i.bypassAuthState)}function qk(i){const{auth:e,user:t}=i;return $t(t,e,"internal-error"),Sk(t,new l1(i),i.bypassAuthState)}async function Xk(i){const{auth:e,user:t}=i;return $t(t,e,"internal-error"),vk(t,new l1(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,t,n,s,a=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:a,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jk;case"linkViaPopup":case"linkViaRedirect":return Xk;case"reauthViaPopup":case"reauthViaRedirect":return qk;default:_l(this.auth,"internal-error")}}resolve(e){yu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=new F_(2e3,1e4);class cm extends cO{constructor(e,t,n,s,a){super(e,t,s,a),this.provider=n,this.authWindow=null,this.pollId=null,cm.currentPopupAction&&cm.currentPopupAction.cancel(),cm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $t(e,this.auth,"internal-error"),e}async onExecution(){yu(this.filter.length===1,"Popup operations only handle one event");const e=o1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cm.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Wk.get())};e()}}cm.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="pendingRedirect",_S=new Map;class Kk extends cO{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=_S.get(this.auth._key());if(!e){try{const n=await Qk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}_S.set(this.auth._key(),e)}return this.bypassAuthState||_S.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Qk(i,e){const t=$k(e),n=Jk(i);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function Zk(i,e){_S.set(i._key(),e)}function Jk(i){return ou(i._redirectPersistence)}function $k(i){return yS(Yk,i.config.apiKey,i.name)}async function e8(i,e,t=!1){if(ul(i.app))return Promise.reject(Ph(i));const n=Km(i),s=Gk(n,e),l=await new Kk(n,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=600*1e3;class n8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!uO(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(fc(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=t8&&this.cachedEventUids.clear(),this.cachedEventUids.has(HC(e))}saveEventToCache(e){this.cachedEventUids.add(HC(e)),this.lastProcessedEventTime=Date.now()}}function HC(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function uO({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function i8(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uO(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s8(i,e={}){return Wh(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a8=/^https?/;async function o8(i){if(i.config.emulator)return;const{authorizedDomains:e}=await s8(i);for(const t of e)try{if(l8(t))return}catch{}_l(i,"unauthorized-domain")}function l8(i){const e=IA(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){const l=new URL(i);return l.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!a8.test(t))return!1;if(r8.test(i))return n===i;const s=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=new F_(3e4,6e4);function kC(){const i=dc().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function u8(i){return new Promise((e,t)=>{function n(){kC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kC(),t(fc(i,"network-request-failed"))},timeout:c8.get()})}if(dc().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(dc().gapi?.load)n();else{const s=nk("iframefcb");return dc()[s]=()=>{gapi.load?n():t(fc(i,"network-request-failed"))},K3(`${tk()}?onload=${s}`).catch(a=>t(a))}}).catch(e=>{throw vS=null,e})}let vS=null;function h8(i){return vS=vS||u8(i),vS}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8=new F_(5e3,15e3),d8="__/auth/iframe",p8="emulator/auth/iframe",m8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},g8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function y8(i){const e=i.config;$t(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?n1(e,p8):`https://${i.config.authDomain}/${d8}`,n={apiKey:e.apiKey,appName:i.name,v:km},s=g8.get(i.config.apiHost);s&&(n.eid=s);const a=i._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${U_(n).slice(1)}`}async function _8(i){const e=await h8(i),t=dc().gapi;return $t(t,i,"internal-error"),e.open({where:document.body,url:y8(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:m8,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const l=fc(i,"network-request-failed"),u=dc().setTimeout(()=>{a(l)},f8.get());function d(){dc().clearTimeout(u),s(n)}n.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S8=500,E8=600,x8="_blank",T8="http://localhost";class GC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function b8(i,e,t,n=S8,s=E8){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const d={...v8,width:n.toString(),height:s.toString(),top:a,left:l},p=Ur().toLowerCase();t&&(u=k3(p)?x8:t),F3(p)&&(e=e||T8,d.scrollbars="yes");const y=Object.entries(d).reduce((S,[T,M])=>`${S}${T}=${M},`,"");if(XH(p)&&u!=="_self")return A8(e||"",u),new GC(null);const _=window.open(e||"",u,y);$t(_,i,"popup-blocked");try{_.focus()}catch{}return new GC(_)}function A8(i,e){const t=document.createElement("a");t.href=i,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8="__/auth/handler",w8="emulator/auth/handler",R8=encodeURIComponent("fac");async function jC(i,e,t,n,s,a){$t(i.config.authDomain,i,"auth-domain-config-required"),$t(i.config.apiKey,i,"invalid-api-key");const l={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:km,eventId:s};if(e instanceof J3){e.setDefaultLanguage(i.languageCode),l.providerId=e.providerId||"",DV(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))l[y]=_}if(e instanceof H_){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(l.scopes=y.join(","))}i.tenantId&&(l.tid=i.tenantId);const u=l;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const d=await i._getAppCheckToken(),p=d?`#${R8}=${encodeURIComponent(d)}`:"";return`${C8(i)}?${U_(u).slice(1)}${p}`}function C8({config:i}){return i.emulator?n1(i,w8):`https://${i.authDomain}/${M8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="webStorageSupport";class I8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sO,this._completeRedirectFn=e8,this._overrideRedirectResult=Zk}async _openPopup(e,t,n,s){yu(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await jC(e,t,n,IA(),s);return b8(e,a,o1())}async _openRedirect(e,t,n,s){await this._originValidation(e);const a=await jC(e,t,n,IA(),s);return Ok(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(yu(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await _8(e),n=new n8(e);return t.register("authEvent",s=>($t(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(YT,{type:YT},s=>{const a=s?.[0]?.[YT];a!==void 0&&t(!!a),_l(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=o8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return W3()||H3()||s1()}}const D8=I8;var qC="@firebase/auth",XC="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function U8(i){gc(new gl("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=n.options;$t(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:l,authDomain:u,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y3(i)},p=new JH(n,s,a,d);return lk(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),gc(new gl("auth-internal",e=>{const t=Km(e.getProvider("auth").getImmediate());return(n=>new N8(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Co(qC,XC,O8(i)),Co(qC,XC,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8=300,P8=gD("authIdTokenMaxAge")||L8;let WC=null;const V8=i=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>P8)return;const s=t?.token;WC!==s&&(WC=s,await fetch(i,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function z8(i=dM()){const e=wd(i,"auth");if(e.isInitialized())return e.getImmediate();const t=ok(i,{popupRedirectResolver:D8,persistence:[kk,Ik,sO]}),n=gD("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const l=V8(a.toString());Ak(t,l,()=>l(t.currentUser)),bk(t,u=>l(u))}}const s=pD("auth");return s&&ck(t,`http://${s}`),t}function B8(){return document.getElementsByTagName("head")?.[0]??document}$H({loadJS(i){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=s=>{const a=fc("internal-error");a.customData=s,t(a)},n.type="text/javascript",n.charset="UTF-8",B8().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});U8("Browser");const F8={apiKey:"AIzaSyDnRuB2qnluisfHOqNEfAUM8XR_3u6gg6k",authDomain:"shiynelly-lashes.firebaseapp.com",projectId:"shiynelly-lashes",storageBucket:"shiynelly-lashes.firebasestorage.app",messagingSenderId:"753067897077",appId:"1:753067897077:web:6478e1936121d108ec55bc",measurementId:"G-FR2YC35HHN"},c1=TD(F8),Aa=j5(c1),SS=z8(c1);let OA=null;TH().then(i=>{i&&(OA=EH(c1))});const Ka=(i,e={})=>{try{OA&&D3(OA,i,e)}catch(t){console.warn("Analytics event failed:",t)}},H8="/assets/Logo-SL-white-nobg-BjJ9TJUJ.png",Np=[{name:"Home",path:"/"},{name:"Nos Prestations",path:"#nosprestations"},{name:"Contact",path:"#contact"},{name:"Rservation",path:"#rservation"}],KT=[{title:"Cils  Cils",description:"Une extension par cil naturel pour un look subtil et lgant",price:"20",result:"Des cils allongs, un regard sublim, tout en finesse"},{title:"Pose Whispy",description:"Des cils de longueurs varies qui apportent volume, intensit et dimension au regard",price:"15",result:"Un regard harmonieux alliant naturel et intensit"},{title:"Pose Russe",description:"Consiste  appliquer des ventails dextensions prforms (bouquets) sur chaque cil naturel",price:"20",result:"Un regard fourni, harmonieux et glamour, avec une tenue longue dure"},{title:"Dpose",description:"La dpose de cils permet de retirer en douceur les extensions sans abmer les cils naturels, grce  un dissolvant professionnel adapt",price:"10",result:"Des cils naturels prservs et prts pour une nouvelle pose"},{title:"Clusters",description:"La pose de clusters consiste  appliquer des petits bouquets de cils prts  poser sur la base des cils naturels",price:"8",result:"Regard intense et fourni, parfait pour une beaut express"}],_y=[{id:"cil-a-cil",name:"Cils  Cils",price:"20",duration:210,description:"La pose cil  cil consiste  appliquer une extension sur chaque cil naturel pour un regard naturel, lgant et structur."},{id:"pose-whispy",name:"Pose Whispy ",price:"15",duration:240,description:'La pose Whispy, aussi appele effet "foxy eyes" ou "spiky", se caractrise par des pics de longueurs varies.'},{id:"pose-russe",name:"Pose Russe",price:"20",duration:270,description:"La pose russe en bouquet consiste  appliquer des ventails d'extensions prforms sur chaque cil naturel."},{id:"clusters",name:"Clusters (venir avec la bote)",price:"8",duration:120,description:"La pose de clusters consiste  appliquer des petits bouquets de cils prts  poser."},{id:"depose",name:"Dpose",price:"10",duration:90,description:"La dpose de cils permet de retirer en douceur les extensions sans abmer les cils naturels."}];function k8(){const[i,e]=ce.useState(!1),t=()=>{e(!i)},n=()=>{e(!1)};return H.jsxs(H.Fragment,{children:[H.jsx("nav",{className:"navbar",children:H.jsxs("div",{className:"navbar-container",children:[H.jsxs("a",{href:"./",className:"navbar-logo",children:[H.jsx("img",{src:H8,alt:"Shiynelly Lashes Logo"}),H.jsx("p",{className:"logo-text",children:"Shiynelly Lashes"})]}),H.jsxs("div",{className:"navbar-links",children:[Np.slice(0,3).map((s,a)=>H.jsx("a",{href:s.path,className:"nav-link",children:s.name},a)),H.jsx("a",{href:Np[3].path,className:"nav-button",children:Np[3].name})]}),H.jsxs("button",{className:`hamburger ${i?"active":""}`,onClick:t,"aria-label":"Toggle menu",children:[H.jsx("span",{className:"hamburger-line"}),H.jsx("span",{className:"hamburger-line"})]})]})}),H.jsx("div",{className:`sidebar-overlay ${i?"active":""}`,onClick:n}),H.jsxs("div",{className:`sidebar-menu ${i?"active":""}`,children:[H.jsxs("div",{className:"sidebar-header",children:[H.jsx("h2",{children:"Menu"}),H.jsx("button",{className:"close-button",onClick:n,children:""})]}),H.jsxs("div",{className:"sidebar-links",children:[Np.slice(0,3).map((s,a)=>H.jsx("a",{href:s.path,className:"sidebar-link",onClick:n,children:s.name},a)),H.jsx("a",{href:Np[3].path,className:"sidebar-button",onClick:n,children:Np[3].name})]})]})]})}var QT={exports:{}},Zc={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YC;function G8(){return YC||(YC=1,Zc.ConcurrentRoot=1,Zc.ContinuousEventPriority=8,Zc.DefaultEventPriority=32,Zc.DiscreteEventPriority=2,Zc.IdleEventPriority=268435456,Zc.LegacyRoot=0,Zc.NoEventPriority=0),Zc}var KC;function j8(){return KC||(KC=1,QT.exports=G8()),QT.exports}var ES=j8();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const hx="180",q8={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},X8={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},hO=0,UA=1,fO=2,W8=3,dO=0,fx=1,Xy=2,ll=3,_u=0,oa=1,rc=2,uu=0,hd=1,LA=2,PA=3,VA=4,pO=5,Rh=100,mO=101,gO=102,yO=103,_O=104,vO=200,SO=201,EO=202,xO=203,YS=204,KS=205,TO=206,bO=207,AO=208,MO=209,wO=210,RO=211,CO=212,IO=213,DO=214,QS=0,ZS=1,JS=2,Sd=3,$S=4,eE=5,tE=6,nE=7,G_=0,NO=1,OO=2,pc=0,UO=1,LO=2,PO=3,u1=4,VO=5,zO=6,BO=7,zA="attached",FO="detached",dx=300,vu=301,jh=302,d_=303,p_=304,Zm=306,m_=1e3,Ro=1001,g_=1002,rr=1003,h1=1004,Y8=1004,um=1005,K8=1005,ws=1006,Wy=1007,Q8=1007,ac=1008,Z8=1008,Io=1009,f1=1010,d1=1011,Rm=1012,px=1013,Su=1014,wa=1015,Jm=1016,mx=1017,gx=1018,Cm=1020,p1=35902,m1=35899,g1=1021,y1=1022,Nr=1023,Im=1026,Dm=1027,yx=1028,j_=1029,_1=1030,_x=1031,J8=1032,vx=1033,Yy=33776,Ky=33777,Qy=33778,Zy=33779,iE=35840,sE=35841,rE=35842,aE=35843,oE=36196,lE=37492,cE=37496,uE=37808,hE=37809,fE=37810,dE=37811,pE=37812,mE=37813,gE=37814,yE=37815,_E=37816,vE=37817,SE=37818,EE=37819,xE=37820,TE=37821,bE=36492,AE=36494,ME=36495,wE=36283,RE=36284,CE=36285,IE=36286,HO=2200,kO=2201,GO=2202,y_=2300,DE=2301,xS=2302,od=2400,ld=2401,__=2402,Sx=2500,v1=2501,$8=0,eG=1,tG=2,jO=3200,qO=3201,nG=3202,iG=3203,Yh=0,XO=1,su="",Ir="srgb",qh="srgb-linear",v_="linear",ci="srgb",sG=0,nd=7680,rG=7681,aG=7682,oG=7683,lG=34055,cG=34056,uG=5386,hG=512,fG=513,dG=514,pG=515,mG=516,gG=517,yG=518,BA=519,WO=512,YO=513,KO=514,S1=515,QO=516,ZO=517,JO=518,$O=519,S_=35044,_G=35048,vG=35040,SG=35045,EG=35049,xG=35041,TG=35046,bG=35050,AG=35042,MG="100",FA="300 es",Qa=2e3,Nm=2001,wG={COMPUTE:"compute",RENDER:"render"},RG={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},CG={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};class Sc{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const s=n[e];if(s!==void 0){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let a=0,l=s.length;a<l;a++)s[a].call(this,e);e.target=null}}}const Mr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let QC=1234567;const fd=Math.PI/180,Om=180/Math.PI;function Ja(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Mr[i&255]+Mr[i>>8&255]+Mr[i>>16&255]+Mr[i>>24&255]+"-"+Mr[e&255]+Mr[e>>8&255]+"-"+Mr[e>>16&15|64]+Mr[e>>24&255]+"-"+Mr[t&63|128]+Mr[t>>8&255]+"-"+Mr[t>>16&255]+Mr[t>>24&255]+Mr[n&255]+Mr[n>>8&255]+Mr[n>>16&255]+Mr[n>>24&255]).toLowerCase()}function Jt(i,e,t){return Math.max(e,Math.min(t,i))}function E1(i,e){return(i%e+e)%e}function IG(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function DG(i,e,t){return i!==e?(t-i)/(e-i):0}function Jy(i,e,t){return(1-t)*i+t*e}function NG(i,e,t,n){return Jy(i,e,1-Math.exp(-t*n))}function OG(i,e=1){return e-Math.abs(E1(i,e*2)-e)}function UG(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function LG(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function PG(i,e){return i+Math.floor(Math.random()*(e-i+1))}function VG(i,e){return i+Math.random()*(e-i)}function zG(i){return i*(.5-Math.random())}function BG(i){i!==void 0&&(QC=i);let e=QC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function FG(i){return i*fd}function HG(i){return i*Om}function kG(i){return(i&i-1)===0&&i!==0}function GG(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function jG(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function qG(i,e,t,n,s){const a=Math.cos,l=Math.sin,u=a(t/2),d=l(t/2),p=a((e+n)/2),y=l((e+n)/2),_=a((e-n)/2),S=l((e-n)/2),T=a((n-e)/2),M=l((n-e)/2);switch(s){case"XYX":i.set(u*y,d*_,d*S,u*p);break;case"YZY":i.set(d*S,u*y,d*_,u*p);break;case"ZXZ":i.set(d*_,d*S,u*y,u*p);break;case"XZX":i.set(u*y,d*M,d*T,u*p);break;case"YXY":i.set(d*T,u*y,d*M,u*p);break;case"ZYZ":i.set(d*M,d*T,u*y,u*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function ra(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function yn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const XG={DEG2RAD:fd,RAD2DEG:Om,generateUUID:Ja,clamp:Jt,euclideanModulo:E1,mapLinear:IG,inverseLerp:DG,lerp:Jy,damp:NG,pingpong:OG,smoothstep:UG,smootherstep:LG,randInt:PG,randFloat:VG,randFloatSpread:zG,seededRandom:BG,degToRad:FG,radToDeg:HG,isPowerOfTwo:kG,ceilPowerOfTwo:GG,floorPowerOfTwo:jG,setQuaternionFromProperEuler:qG,normalize:yn,denormalize:ra};class $e{constructor(e=0,t=0){$e.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Jt(this.x,e.x,t.x),this.y=Jt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Jt(this.x,e,t),this.y=Jt(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Jt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Jt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),a=this.x-e.x,l=this.y-e.y;return this.x=a*n-l*s+e.x,this.y=a*s+l*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ra{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,a,l,u){let d=n[s+0],p=n[s+1],y=n[s+2],_=n[s+3];const S=a[l+0],T=a[l+1],M=a[l+2],C=a[l+3];if(u===0){e[t+0]=d,e[t+1]=p,e[t+2]=y,e[t+3]=_;return}if(u===1){e[t+0]=S,e[t+1]=T,e[t+2]=M,e[t+3]=C;return}if(_!==C||d!==S||p!==T||y!==M){let w=1-u;const b=d*S+p*T+y*M+_*C,D=b>=0?1:-1,V=1-b*b;if(V>Number.EPSILON){const j=Math.sqrt(V),G=Math.atan2(j,b*D);w=Math.sin(w*G)/j,u=Math.sin(u*G)/j}const z=u*D;if(d=d*w+S*z,p=p*w+T*z,y=y*w+M*z,_=_*w+C*z,w===1-u){const j=1/Math.sqrt(d*d+p*p+y*y+_*_);d*=j,p*=j,y*=j,_*=j}}e[t]=d,e[t+1]=p,e[t+2]=y,e[t+3]=_}static multiplyQuaternionsFlat(e,t,n,s,a,l){const u=n[s],d=n[s+1],p=n[s+2],y=n[s+3],_=a[l],S=a[l+1],T=a[l+2],M=a[l+3];return e[t]=u*M+y*_+d*T-p*S,e[t+1]=d*M+y*S+p*_-u*T,e[t+2]=p*M+y*T+u*S-d*_,e[t+3]=y*M-u*_-d*S-p*T,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,a=e._z,l=e._order,u=Math.cos,d=Math.sin,p=u(n/2),y=u(s/2),_=u(a/2),S=d(n/2),T=d(s/2),M=d(a/2);switch(l){case"XYZ":this._x=S*y*_+p*T*M,this._y=p*T*_-S*y*M,this._z=p*y*M+S*T*_,this._w=p*y*_-S*T*M;break;case"YXZ":this._x=S*y*_+p*T*M,this._y=p*T*_-S*y*M,this._z=p*y*M-S*T*_,this._w=p*y*_+S*T*M;break;case"ZXY":this._x=S*y*_-p*T*M,this._y=p*T*_+S*y*M,this._z=p*y*M+S*T*_,this._w=p*y*_-S*T*M;break;case"ZYX":this._x=S*y*_-p*T*M,this._y=p*T*_+S*y*M,this._z=p*y*M-S*T*_,this._w=p*y*_+S*T*M;break;case"YZX":this._x=S*y*_+p*T*M,this._y=p*T*_+S*y*M,this._z=p*y*M-S*T*_,this._w=p*y*_-S*T*M;break;case"XZY":this._x=S*y*_-p*T*M,this._y=p*T*_-S*y*M,this._z=p*y*M+S*T*_,this._w=p*y*_+S*T*M;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],a=t[8],l=t[1],u=t[5],d=t[9],p=t[2],y=t[6],_=t[10],S=n+u+_;if(S>0){const T=.5/Math.sqrt(S+1);this._w=.25/T,this._x=(y-d)*T,this._y=(a-p)*T,this._z=(l-s)*T}else if(n>u&&n>_){const T=2*Math.sqrt(1+n-u-_);this._w=(y-d)/T,this._x=.25*T,this._y=(s+l)/T,this._z=(a+p)/T}else if(u>_){const T=2*Math.sqrt(1+u-n-_);this._w=(a-p)/T,this._x=(s+l)/T,this._y=.25*T,this._z=(d+y)/T}else{const T=2*Math.sqrt(1+_-n-u);this._w=(l-s)/T,this._x=(a+p)/T,this._y=(d+y)/T,this._z=.25*T}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Jt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,a=e._z,l=e._w,u=t._x,d=t._y,p=t._z,y=t._w;return this._x=n*y+l*u+s*p-a*d,this._y=s*y+l*d+a*u-n*p,this._z=a*y+l*p+n*d-s*u,this._w=l*y-n*u-s*d-a*p,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,a=this._z,l=this._w;let u=l*e._w+n*e._x+s*e._y+a*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=n,this._y=s,this._z=a,this;const d=1-u*u;if(d<=Number.EPSILON){const T=1-t;return this._w=T*l+t*this._w,this._x=T*n+t*this._x,this._y=T*s+t*this._y,this._z=T*a+t*this._z,this.normalize(),this}const p=Math.sqrt(d),y=Math.atan2(p,u),_=Math.sin((1-t)*y)/p,S=Math.sin(t*y)/p;return this._w=l*_+this._w*S,this._x=n*_+this._x*S,this._y=s*_+this._y*S,this._z=a*_+this._z*S,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),a=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ie{constructor(e=0,t=0,n=0){ie.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ZC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ZC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*s,this.y=a[1]*t+a[4]*n+a[7]*s,this.z=a[2]*t+a[5]*n+a[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,a=e.elements,l=1/(a[3]*t+a[7]*n+a[11]*s+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*s+a[12])*l,this.y=(a[1]*t+a[5]*n+a[9]*s+a[13])*l,this.z=(a[2]*t+a[6]*n+a[10]*s+a[14])*l,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,a=e.x,l=e.y,u=e.z,d=e.w,p=2*(l*s-u*n),y=2*(u*t-a*s),_=2*(a*n-l*t);return this.x=t+d*p+l*_-u*y,this.y=n+d*y+u*p-a*_,this.z=s+d*_+a*y-l*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*s,this.y=a[1]*t+a[5]*n+a[9]*s,this.z=a[2]*t+a[6]*n+a[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Jt(this.x,e.x,t.x),this.y=Jt(this.y,e.y,t.y),this.z=Jt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Jt(this.x,e,t),this.y=Jt(this.y,e,t),this.z=Jt(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Jt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,a=e.z,l=t.x,u=t.y,d=t.z;return this.x=s*d-a*u,this.y=a*l-n*d,this.z=n*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ZT.copy(this).projectOnVector(e),this.sub(ZT)}reflect(e){return this.sub(ZT.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Jt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ZT=new ie,ZC=new Ra;class mn{constructor(e,t,n,s,a,l,u,d,p){mn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,a,l,u,d,p)}set(e,t,n,s,a,l,u,d,p){const y=this.elements;return y[0]=e,y[1]=s,y[2]=u,y[3]=t,y[4]=a,y[5]=d,y[6]=n,y[7]=l,y[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,a=this.elements,l=n[0],u=n[3],d=n[6],p=n[1],y=n[4],_=n[7],S=n[2],T=n[5],M=n[8],C=s[0],w=s[3],b=s[6],D=s[1],V=s[4],z=s[7],j=s[2],G=s[5],P=s[8];return a[0]=l*C+u*D+d*j,a[3]=l*w+u*V+d*G,a[6]=l*b+u*z+d*P,a[1]=p*C+y*D+_*j,a[4]=p*w+y*V+_*G,a[7]=p*b+y*z+_*P,a[2]=S*C+T*D+M*j,a[5]=S*w+T*V+M*G,a[8]=S*b+T*z+M*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],l=e[4],u=e[5],d=e[6],p=e[7],y=e[8];return t*l*y-t*u*p-n*a*y+n*u*d+s*a*p-s*l*d}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],l=e[4],u=e[5],d=e[6],p=e[7],y=e[8],_=y*l-u*p,S=u*d-y*a,T=p*a-l*d,M=t*_+n*S+s*T;if(M===0)return this.set(0,0,0,0,0,0,0,0,0);const C=1/M;return e[0]=_*C,e[1]=(s*p-y*n)*C,e[2]=(u*n-s*l)*C,e[3]=S*C,e[4]=(y*t-s*d)*C,e[5]=(s*a-u*t)*C,e[6]=T*C,e[7]=(n*d-p*t)*C,e[8]=(l*t-n*a)*C,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,a,l,u){const d=Math.cos(a),p=Math.sin(a);return this.set(n*d,n*p,-n*(d*l+p*u)+l+e,-s*p,s*d,-s*(-p*l+d*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(JT.makeScale(e,t)),this}rotate(e){return this.premultiply(JT.makeRotation(-e)),this}translate(e,t){return this.premultiply(JT.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const JT=new mn;function eU(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const WG={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function hm(i,e){return new WG[i](e)}function E_(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function tU(){const i=E_("canvas");return i.style.display="block",i}const JC={};function x_(i){i in JC||(JC[i]=!0,console.warn(i))}function YG(i,e,t){return new Promise(function(n,s){function a(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:n()}}setTimeout(a,t)})}const $C=new mn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),e2=new mn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function KG(){const i={enabled:!0,workingColorSpace:qh,spaces:{},convert:function(s,a,l){return this.enabled===!1||a===l||!a||!l||(this.spaces[a].transfer===ci&&(s.r=hu(s.r),s.g=hu(s.g),s.b=hu(s.b)),this.spaces[a].primaries!==this.spaces[l].primaries&&(s.applyMatrix3(this.spaces[a].toXYZ),s.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===ci&&(s.r=Sm(s.r),s.g=Sm(s.g),s.b=Sm(s.b))),s},workingToColorSpace:function(s,a){return this.convert(s,this.workingColorSpace,a)},colorSpaceToWorking:function(s,a){return this.convert(s,a,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===su?v_:this.spaces[s].transfer},getToneMappingMode:function(s){return this.spaces[s].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(s,a=this.workingColorSpace){return s.fromArray(this.spaces[a].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,a,l){return s.copy(this.spaces[a].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,a){return x_("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(s,a)},toWorkingColorSpace:function(s,a){return x_("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(s,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[qh]:{primaries:e,whitePoint:n,transfer:v_,toXYZ:$C,fromXYZ:e2,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Ir},outputColorSpaceConfig:{drawingBufferColorSpace:Ir}},[Ir]:{primaries:e,whitePoint:n,transfer:ci,toXYZ:$C,fromXYZ:e2,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Ir}}}),i}const Gn=KG();function hu(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Sm(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Op;class nU{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Op===void 0&&(Op=E_("canvas")),Op.width=e.width,Op.height=e.height;const s=Op.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),n=Op}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=E_("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),a=s.data;for(let l=0;l<a.length;l++)a[l]=hu(a[l]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(hu(t[n]/255)*255):t[n]=hu(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let QG=0;class Dh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:QG++}),this.uuid=Ja(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let a;if(Array.isArray(s)){a=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?a.push($T(s[l].image)):a.push($T(s[l]))}else a=$T(s);n.url=a}return t||(e.images[this.uuid]=n),n}}function $T(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?nU.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ZG=0;const eb=new ie;class Ji extends Sc{constructor(e=Ji.DEFAULT_IMAGE,t=Ji.DEFAULT_MAPPING,n=Ro,s=Ro,a=ws,l=ac,u=Nr,d=Io,p=Ji.DEFAULT_ANISOTROPY,y=su){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ZG++}),this.uuid=Ja(),this.name="",this.source=new Dh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=a,this.minFilter=l,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=d,this.offset=new $e(0,0),this.repeat=new $e(1,1),this.center=new $e(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new mn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=y,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(eb).x}get height(){return this.source.getSize(eb).y}get depth(){return this.source.getSize(eb).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}s&&n&&s.isVector2&&n.isVector2||s&&n&&s.isVector3&&n.isVector3||s&&n&&s.isMatrix3&&n.isMatrix3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==dx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case m_:e.x=e.x-Math.floor(e.x);break;case Ro:e.x=e.x<0?0:1;break;case g_:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case m_:e.y=e.y-Math.floor(e.y);break;case Ro:e.y=e.y<0?0:1;break;case g_:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ji.DEFAULT_IMAGE=null;Ji.DEFAULT_MAPPING=dx;Ji.DEFAULT_ANISOTROPY=1;class Yn{constructor(e=0,t=0,n=0,s=1){Yn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,a=this.w,l=e.elements;return this.x=l[0]*t+l[4]*n+l[8]*s+l[12]*a,this.y=l[1]*t+l[5]*n+l[9]*s+l[13]*a,this.z=l[2]*t+l[6]*n+l[10]*s+l[14]*a,this.w=l[3]*t+l[7]*n+l[11]*s+l[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,a;const d=e.elements,p=d[0],y=d[4],_=d[8],S=d[1],T=d[5],M=d[9],C=d[2],w=d[6],b=d[10];if(Math.abs(y-S)<.01&&Math.abs(_-C)<.01&&Math.abs(M-w)<.01){if(Math.abs(y+S)<.1&&Math.abs(_+C)<.1&&Math.abs(M+w)<.1&&Math.abs(p+T+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const V=(p+1)/2,z=(T+1)/2,j=(b+1)/2,G=(y+S)/4,P=(_+C)/4,L=(M+w)/4;return V>z&&V>j?V<.01?(n=0,s=.707106781,a=.707106781):(n=Math.sqrt(V),s=G/n,a=P/n):z>j?z<.01?(n=.707106781,s=0,a=.707106781):(s=Math.sqrt(z),n=G/s,a=L/s):j<.01?(n=.707106781,s=.707106781,a=0):(a=Math.sqrt(j),n=P/a,s=L/a),this.set(n,s,a,t),this}let D=Math.sqrt((w-M)*(w-M)+(_-C)*(_-C)+(S-y)*(S-y));return Math.abs(D)<.001&&(D=1),this.x=(w-M)/D,this.y=(_-C)/D,this.z=(S-y)/D,this.w=Math.acos((p+T+b-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Jt(this.x,e.x,t.x),this.y=Jt(this.y,e.y,t.y),this.z=Jt(this.z,e.z,t.z),this.w=Jt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Jt(this.x,e,t),this.y=Jt(this.y,e,t),this.z=Jt(this.z,e,t),this.w=Jt(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Jt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class x1 extends Sc{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ws,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new Yn(0,0,e,t),this.scissorTest=!1,this.viewport=new Yn(0,0,e,t);const s={width:e,height:t,depth:n.depth},a=new Ji(s);this.textures=[];const l=n.count;for(let u=0;u<l;u++)this.textures[u]=a.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:ws,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,a=this.textures.length;s<a;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=n,this.textures[s].isArrayTexture=this.textures[s].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const s=Object.assign({},e.textures[t].image);this.textures[t].source=new Dh(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class _c extends x1{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Ex extends Ji{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=rr,this.minFilter=rr,this.wrapR=Ro,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class JG extends _c{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Ex(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class xx extends Ji{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=rr,this.minFilter=rr,this.wrapR=Ro,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $G extends _c{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new xx(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Or{constructor(e=new ie(1/0,1/0,1/0),t=new ie(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(rl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(rl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=rl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const a=n.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let l=0,u=a.count;l<u;l++)e.isMesh===!0?e.getVertexPosition(l,rl):rl.fromBufferAttribute(a,l),rl.applyMatrix4(e.matrixWorld),this.expandByPoint(rl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),p0.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),p0.copy(n.boundingBox)),p0.applyMatrix4(e.matrixWorld),this.union(p0)}const s=e.children;for(let a=0,l=s.length;a<l;a++)this.expandByObject(s[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,rl),rl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(vy),m0.subVectors(this.max,vy),Up.subVectors(e.a,vy),Lp.subVectors(e.b,vy),Pp.subVectors(e.c,vy),mh.subVectors(Lp,Up),gh.subVectors(Pp,Lp),Hf.subVectors(Up,Pp);let t=[0,-mh.z,mh.y,0,-gh.z,gh.y,0,-Hf.z,Hf.y,mh.z,0,-mh.x,gh.z,0,-gh.x,Hf.z,0,-Hf.x,-mh.y,mh.x,0,-gh.y,gh.x,0,-Hf.y,Hf.x,0];return!tb(t,Up,Lp,Pp,m0)||(t=[1,0,0,0,1,0,0,0,1],!tb(t,Up,Lp,Pp,m0))?!1:(g0.crossVectors(mh,gh),t=[g0.x,g0.y,g0.z],tb(t,Up,Lp,Pp,m0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,rl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(rl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Jc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Jc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Jc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Jc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Jc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Jc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Jc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Jc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Jc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Jc=[new ie,new ie,new ie,new ie,new ie,new ie,new ie,new ie],rl=new ie,p0=new Or,Up=new ie,Lp=new ie,Pp=new ie,mh=new ie,gh=new ie,Hf=new ie,vy=new ie,m0=new ie,g0=new ie,kf=new ie;function tb(i,e,t,n,s){for(let a=0,l=i.length-3;a<=l;a+=3){kf.fromArray(i,a);const u=s.x*Math.abs(kf.x)+s.y*Math.abs(kf.y)+s.z*Math.abs(kf.z),d=e.dot(kf),p=t.dot(kf),y=n.dot(kf);if(Math.max(-Math.max(d,p,y),Math.min(d,p,y))>u)return!1}return!0}const e9=new Or,Sy=new ie,nb=new ie;class ar{constructor(e=new ie,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):e9.setFromPoints(e).getCenter(n);let s=0;for(let a=0,l=e.length;a<l;a++)s=Math.max(s,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Sy.subVectors(e,this.center);const t=Sy.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(Sy,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(nb.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Sy.copy(e.center).add(nb)),this.expandByPoint(Sy.copy(e.center).sub(nb))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const $c=new ie,ib=new ie,y0=new ie,yh=new ie,sb=new ie,_0=new ie,rb=new ie;class $m{constructor(e=new ie,t=new ie(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$c)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$c.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($c.copy(this.origin).addScaledVector(this.direction,t),$c.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){ib.copy(e).add(t).multiplyScalar(.5),y0.copy(t).sub(e).normalize(),yh.copy(this.origin).sub(ib);const a=e.distanceTo(t)*.5,l=-this.direction.dot(y0),u=yh.dot(this.direction),d=-yh.dot(y0),p=yh.lengthSq(),y=Math.abs(1-l*l);let _,S,T,M;if(y>0)if(_=l*d-u,S=l*u-d,M=a*y,_>=0)if(S>=-M)if(S<=M){const C=1/y;_*=C,S*=C,T=_*(_+l*S+2*u)+S*(l*_+S+2*d)+p}else S=a,_=Math.max(0,-(l*S+u)),T=-_*_+S*(S+2*d)+p;else S=-a,_=Math.max(0,-(l*S+u)),T=-_*_+S*(S+2*d)+p;else S<=-M?(_=Math.max(0,-(-l*a+u)),S=_>0?-a:Math.min(Math.max(-a,-d),a),T=-_*_+S*(S+2*d)+p):S<=M?(_=0,S=Math.min(Math.max(-a,-d),a),T=S*(S+2*d)+p):(_=Math.max(0,-(l*a+u)),S=_>0?a:Math.min(Math.max(-a,-d),a),T=-_*_+S*(S+2*d)+p);else S=l>0?-a:a,_=Math.max(0,-(l*S+u)),T=-_*_+S*(S+2*d)+p;return n&&n.copy(this.origin).addScaledVector(this.direction,_),s&&s.copy(ib).addScaledVector(y0,S),T}intersectSphere(e,t){$c.subVectors(e.center,this.origin);const n=$c.dot(this.direction),s=$c.dot($c)-n*n,a=e.radius*e.radius;if(s>a)return null;const l=Math.sqrt(a-s),u=n-l,d=n+l;return d<0?null:u<0?this.at(d,t):this.at(u,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,a,l,u,d;const p=1/this.direction.x,y=1/this.direction.y,_=1/this.direction.z,S=this.origin;return p>=0?(n=(e.min.x-S.x)*p,s=(e.max.x-S.x)*p):(n=(e.max.x-S.x)*p,s=(e.min.x-S.x)*p),y>=0?(a=(e.min.y-S.y)*y,l=(e.max.y-S.y)*y):(a=(e.max.y-S.y)*y,l=(e.min.y-S.y)*y),n>l||a>s||((a>n||isNaN(n))&&(n=a),(l<s||isNaN(s))&&(s=l),_>=0?(u=(e.min.z-S.z)*_,d=(e.max.z-S.z)*_):(u=(e.max.z-S.z)*_,d=(e.min.z-S.z)*_),n>d||u>s)||((u>n||n!==n)&&(n=u),(d<s||s!==s)&&(s=d),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return this.intersectBox(e,$c)!==null}intersectTriangle(e,t,n,s,a){sb.subVectors(t,e),_0.subVectors(n,e),rb.crossVectors(sb,_0);let l=this.direction.dot(rb),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;yh.subVectors(this.origin,e);const d=u*this.direction.dot(_0.crossVectors(yh,_0));if(d<0)return null;const p=u*this.direction.dot(sb.cross(yh));if(p<0||d+p>l)return null;const y=-u*yh.dot(rb);return y<0?null:this.at(y/l,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class tn{constructor(e,t,n,s,a,l,u,d,p,y,_,S,T,M,C,w){tn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,a,l,u,d,p,y,_,S,T,M,C,w)}set(e,t,n,s,a,l,u,d,p,y,_,S,T,M,C,w){const b=this.elements;return b[0]=e,b[4]=t,b[8]=n,b[12]=s,b[1]=a,b[5]=l,b[9]=u,b[13]=d,b[2]=p,b[6]=y,b[10]=_,b[14]=S,b[3]=T,b[7]=M,b[11]=C,b[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new tn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/Vp.setFromMatrixColumn(e,0).length(),a=1/Vp.setFromMatrixColumn(e,1).length(),l=1/Vp.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*l,t[9]=n[9]*l,t[10]=n[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,a=e.z,l=Math.cos(n),u=Math.sin(n),d=Math.cos(s),p=Math.sin(s),y=Math.cos(a),_=Math.sin(a);if(e.order==="XYZ"){const S=l*y,T=l*_,M=u*y,C=u*_;t[0]=d*y,t[4]=-d*_,t[8]=p,t[1]=T+M*p,t[5]=S-C*p,t[9]=-u*d,t[2]=C-S*p,t[6]=M+T*p,t[10]=l*d}else if(e.order==="YXZ"){const S=d*y,T=d*_,M=p*y,C=p*_;t[0]=S+C*u,t[4]=M*u-T,t[8]=l*p,t[1]=l*_,t[5]=l*y,t[9]=-u,t[2]=T*u-M,t[6]=C+S*u,t[10]=l*d}else if(e.order==="ZXY"){const S=d*y,T=d*_,M=p*y,C=p*_;t[0]=S-C*u,t[4]=-l*_,t[8]=M+T*u,t[1]=T+M*u,t[5]=l*y,t[9]=C-S*u,t[2]=-l*p,t[6]=u,t[10]=l*d}else if(e.order==="ZYX"){const S=l*y,T=l*_,M=u*y,C=u*_;t[0]=d*y,t[4]=M*p-T,t[8]=S*p+C,t[1]=d*_,t[5]=C*p+S,t[9]=T*p-M,t[2]=-p,t[6]=u*d,t[10]=l*d}else if(e.order==="YZX"){const S=l*d,T=l*p,M=u*d,C=u*p;t[0]=d*y,t[4]=C-S*_,t[8]=M*_+T,t[1]=_,t[5]=l*y,t[9]=-u*y,t[2]=-p*y,t[6]=T*_+M,t[10]=S-C*_}else if(e.order==="XZY"){const S=l*d,T=l*p,M=u*d,C=u*p;t[0]=d*y,t[4]=-_,t[8]=p*y,t[1]=S*_+C,t[5]=l*y,t[9]=T*_-M,t[2]=M*_-T,t[6]=u*y,t[10]=C*_+S}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(t9,e,n9)}lookAt(e,t,n){const s=this.elements;return Wa.subVectors(e,t),Wa.lengthSq()===0&&(Wa.z=1),Wa.normalize(),_h.crossVectors(n,Wa),_h.lengthSq()===0&&(Math.abs(n.z)===1?Wa.x+=1e-4:Wa.z+=1e-4,Wa.normalize(),_h.crossVectors(n,Wa)),_h.normalize(),v0.crossVectors(Wa,_h),s[0]=_h.x,s[4]=v0.x,s[8]=Wa.x,s[1]=_h.y,s[5]=v0.y,s[9]=Wa.y,s[2]=_h.z,s[6]=v0.z,s[10]=Wa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,a=this.elements,l=n[0],u=n[4],d=n[8],p=n[12],y=n[1],_=n[5],S=n[9],T=n[13],M=n[2],C=n[6],w=n[10],b=n[14],D=n[3],V=n[7],z=n[11],j=n[15],G=s[0],P=s[4],L=s[8],I=s[12],O=s[1],F=s[5],Y=s[9],q=s[13],de=s[2],ge=s[6],X=s[10],ee=s[14],ne=s[3],pe=s[7],re=s[11],J=s[15];return a[0]=l*G+u*O+d*de+p*ne,a[4]=l*P+u*F+d*ge+p*pe,a[8]=l*L+u*Y+d*X+p*re,a[12]=l*I+u*q+d*ee+p*J,a[1]=y*G+_*O+S*de+T*ne,a[5]=y*P+_*F+S*ge+T*pe,a[9]=y*L+_*Y+S*X+T*re,a[13]=y*I+_*q+S*ee+T*J,a[2]=M*G+C*O+w*de+b*ne,a[6]=M*P+C*F+w*ge+b*pe,a[10]=M*L+C*Y+w*X+b*re,a[14]=M*I+C*q+w*ee+b*J,a[3]=D*G+V*O+z*de+j*ne,a[7]=D*P+V*F+z*ge+j*pe,a[11]=D*L+V*Y+z*X+j*re,a[15]=D*I+V*q+z*ee+j*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],a=e[12],l=e[1],u=e[5],d=e[9],p=e[13],y=e[2],_=e[6],S=e[10],T=e[14],M=e[3],C=e[7],w=e[11],b=e[15];return M*(+a*d*_-s*p*_-a*u*S+n*p*S+s*u*T-n*d*T)+C*(+t*d*T-t*p*S+a*l*S-s*l*T+s*p*y-a*d*y)+w*(+t*p*_-t*u*T-a*l*_+n*l*T+a*u*y-n*p*y)+b*(-s*u*y-t*d*_+t*u*S+s*l*_-n*l*S+n*d*y)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],l=e[4],u=e[5],d=e[6],p=e[7],y=e[8],_=e[9],S=e[10],T=e[11],M=e[12],C=e[13],w=e[14],b=e[15],D=_*w*p-C*S*p+C*d*T-u*w*T-_*d*b+u*S*b,V=M*S*p-y*w*p-M*d*T+l*w*T+y*d*b-l*S*b,z=y*C*p-M*_*p+M*u*T-l*C*T-y*u*b+l*_*b,j=M*_*d-y*C*d-M*u*S+l*C*S+y*u*w-l*_*w,G=t*D+n*V+s*z+a*j;if(G===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/G;return e[0]=D*P,e[1]=(C*S*a-_*w*a-C*s*T+n*w*T+_*s*b-n*S*b)*P,e[2]=(u*w*a-C*d*a+C*s*p-n*w*p-u*s*b+n*d*b)*P,e[3]=(_*d*a-u*S*a-_*s*p+n*S*p+u*s*T-n*d*T)*P,e[4]=V*P,e[5]=(y*w*a-M*S*a+M*s*T-t*w*T-y*s*b+t*S*b)*P,e[6]=(M*d*a-l*w*a-M*s*p+t*w*p+l*s*b-t*d*b)*P,e[7]=(l*S*a-y*d*a+y*s*p-t*S*p-l*s*T+t*d*T)*P,e[8]=z*P,e[9]=(M*_*a-y*C*a-M*n*T+t*C*T+y*n*b-t*_*b)*P,e[10]=(l*C*a-M*u*a+M*n*p-t*C*p-l*n*b+t*u*b)*P,e[11]=(y*u*a-l*_*a-y*n*p+t*_*p+l*n*T-t*u*T)*P,e[12]=j*P,e[13]=(y*C*s-M*_*s+M*n*S-t*C*S-y*n*w+t*_*w)*P,e[14]=(M*u*s-l*C*s-M*n*d+t*C*d+l*n*w-t*u*w)*P,e[15]=(l*_*s-y*u*s+y*n*d-t*_*d-l*n*S+t*u*S)*P,this}scale(e){const t=this.elements,n=e.x,s=e.y,a=e.z;return t[0]*=n,t[4]*=s,t[8]*=a,t[1]*=n,t[5]*=s,t[9]*=a,t[2]*=n,t[6]*=s,t[10]*=a,t[3]*=n,t[7]*=s,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),a=1-n,l=e.x,u=e.y,d=e.z,p=a*l,y=a*u;return this.set(p*l+n,p*u-s*d,p*d+s*u,0,p*u+s*d,y*u+n,y*d-s*l,0,p*d-s*u,y*d+s*l,a*d*d+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,a,l){return this.set(1,n,a,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,a=t._x,l=t._y,u=t._z,d=t._w,p=a+a,y=l+l,_=u+u,S=a*p,T=a*y,M=a*_,C=l*y,w=l*_,b=u*_,D=d*p,V=d*y,z=d*_,j=n.x,G=n.y,P=n.z;return s[0]=(1-(C+b))*j,s[1]=(T+z)*j,s[2]=(M-V)*j,s[3]=0,s[4]=(T-z)*G,s[5]=(1-(S+b))*G,s[6]=(w+D)*G,s[7]=0,s[8]=(M+V)*P,s[9]=(w-D)*P,s[10]=(1-(S+C))*P,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let a=Vp.set(s[0],s[1],s[2]).length();const l=Vp.set(s[4],s[5],s[6]).length(),u=Vp.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),e.x=s[12],e.y=s[13],e.z=s[14],al.copy(this);const p=1/a,y=1/l,_=1/u;return al.elements[0]*=p,al.elements[1]*=p,al.elements[2]*=p,al.elements[4]*=y,al.elements[5]*=y,al.elements[6]*=y,al.elements[8]*=_,al.elements[9]*=_,al.elements[10]*=_,t.setFromRotationMatrix(al),n.x=a,n.y=l,n.z=u,this}makePerspective(e,t,n,s,a,l,u=Qa,d=!1){const p=this.elements,y=2*a/(t-e),_=2*a/(n-s),S=(t+e)/(t-e),T=(n+s)/(n-s);let M,C;if(d)M=a/(l-a),C=l*a/(l-a);else if(u===Qa)M=-(l+a)/(l-a),C=-2*l*a/(l-a);else if(u===Nm)M=-l/(l-a),C=-l*a/(l-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return p[0]=y,p[4]=0,p[8]=S,p[12]=0,p[1]=0,p[5]=_,p[9]=T,p[13]=0,p[2]=0,p[6]=0,p[10]=M,p[14]=C,p[3]=0,p[7]=0,p[11]=-1,p[15]=0,this}makeOrthographic(e,t,n,s,a,l,u=Qa,d=!1){const p=this.elements,y=2/(t-e),_=2/(n-s),S=-(t+e)/(t-e),T=-(n+s)/(n-s);let M,C;if(d)M=1/(l-a),C=l/(l-a);else if(u===Qa)M=-2/(l-a),C=-(l+a)/(l-a);else if(u===Nm)M=-1/(l-a),C=-a/(l-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return p[0]=y,p[4]=0,p[8]=0,p[12]=S,p[1]=0,p[5]=_,p[9]=0,p[13]=T,p[2]=0,p[6]=0,p[10]=M,p[14]=C,p[3]=0,p[7]=0,p[11]=0,p[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Vp=new ie,al=new tn,t9=new ie(0,0,0),n9=new ie(1,1,1),_h=new ie,v0=new ie,Wa=new ie,t2=new tn,n2=new Ra;class $a{constructor(e=0,t=0,n=0,s=$a.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,a=s[0],l=s[4],u=s[8],d=s[1],p=s[5],y=s[9],_=s[2],S=s[6],T=s[10];switch(t){case"XYZ":this._y=Math.asin(Jt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-y,T),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(S,p),this._z=0);break;case"YXZ":this._x=Math.asin(-Jt(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(u,T),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-_,a),this._z=0);break;case"ZXY":this._x=Math.asin(Jt(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(-_,T),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(d,a));break;case"ZYX":this._y=Math.asin(-Jt(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(S,T),this._z=Math.atan2(d,a)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(Jt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-y,p),this._y=Math.atan2(-_,a)):(this._x=0,this._y=Math.atan2(u,T));break;case"XZY":this._z=Math.asin(-Jt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(S,p),this._y=Math.atan2(u,a)):(this._x=Math.atan2(-y,T),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return t2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t2,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return n2.setFromEuler(this),this.setFromQuaternion(n2,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}$a.DEFAULT_ORDER="XYZ";class Um{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let i9=0;const i2=new ie,zp=new Ra,eu=new tn,S0=new ie,Ey=new ie,s9=new ie,r9=new Ra,s2=new ie(1,0,0),r2=new ie(0,1,0),a2=new ie(0,0,1),o2={type:"added"},a9={type:"removed"},Bp={type:"childadded",child:null},ab={type:"childremoved",child:null};class Kn extends Sc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:i9++}),this.uuid=Ja(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Kn.DEFAULT_UP.clone();const e=new ie,t=new $a,n=new Ra,s=new ie(1,1,1);function a(){n.setFromEuler(t,!1)}function l(){t.setFromQuaternion(n,void 0,!1)}t._onChange(a),n._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new tn},normalMatrix:{value:new mn}}),this.matrix=new tn,this.matrixWorld=new tn,this.matrixAutoUpdate=Kn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Kn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Um,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return zp.setFromAxisAngle(e,t),this.quaternion.multiply(zp),this}rotateOnWorldAxis(e,t){return zp.setFromAxisAngle(e,t),this.quaternion.premultiply(zp),this}rotateX(e){return this.rotateOnAxis(s2,e)}rotateY(e){return this.rotateOnAxis(r2,e)}rotateZ(e){return this.rotateOnAxis(a2,e)}translateOnAxis(e,t){return i2.copy(e).applyQuaternion(this.quaternion),this.position.add(i2.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(s2,e)}translateY(e){return this.translateOnAxis(r2,e)}translateZ(e){return this.translateOnAxis(a2,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(eu.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?S0.copy(e):S0.set(e,t,n);const s=this.parent;this.updateWorldMatrix(!0,!1),Ey.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?eu.lookAt(Ey,S0,this.up):eu.lookAt(S0,Ey,this.up),this.quaternion.setFromRotationMatrix(eu),s&&(eu.extractRotation(s.matrixWorld),zp.setFromRotationMatrix(eu),this.quaternion.premultiply(zp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(o2),Bp.child=e,this.dispatchEvent(Bp),Bp.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(a9),ab.child=e,this.dispatchEvent(ab),ab.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),eu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),eu.multiply(e.parent.matrixWorld)),e.applyMatrix4(eu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(o2),Bp.child=e,this.dispatchEvent(Bp),Bp.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,s=this.children.length;n<s;n++){const l=this.children[n].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const s=this.children;for(let a=0,l=s.length;a<l;a++)s[a].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ey,e,s9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ey,r9,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let a=0,l=s.length;a<l;a++)s[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(u=>({...u,boundingBox:u.boundingBox?u.boundingBox.toJSON():void 0,boundingSphere:u.boundingSphere?u.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(u=>({...u})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(e),s.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function a(u,d){return u[d.uuid]===void 0&&(u[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const d=u.shapes;if(Array.isArray(d))for(let p=0,y=d.length;p<y;p++){const _=d[p];a(e.shapes,_)}else a(e.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let d=0,p=this.material.length;d<p;d++)u.push(a(e.materials,this.material[d]));s.material=u}else s.material=a(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const d=this.animations[u];s.animations.push(a(e.animations,d))}}if(t){const u=l(e.geometries),d=l(e.materials),p=l(e.textures),y=l(e.images),_=l(e.shapes),S=l(e.skeletons),T=l(e.animations),M=l(e.nodes);u.length>0&&(n.geometries=u),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),y.length>0&&(n.images=y),_.length>0&&(n.shapes=_),S.length>0&&(n.skeletons=S),T.length>0&&(n.animations=T),M.length>0&&(n.nodes=M)}return n.object=s,n;function l(u){const d=[];for(const p in u){const y=u[p];delete y.metadata,d.push(y)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}Kn.DEFAULT_UP=new ie(0,1,0);Kn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Kn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ol=new ie,tu=new ie,ob=new ie,nu=new ie,Fp=new ie,Hp=new ie,l2=new ie,lb=new ie,cb=new ie,ub=new ie,hb=new Yn,fb=new Yn,db=new Yn;class Ma{constructor(e=new ie,t=new ie,n=new ie){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),ol.subVectors(e,t),s.cross(ol);const a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}static getBarycoord(e,t,n,s,a){ol.subVectors(s,t),tu.subVectors(n,t),ob.subVectors(e,t);const l=ol.dot(ol),u=ol.dot(tu),d=ol.dot(ob),p=tu.dot(tu),y=tu.dot(ob),_=l*p-u*u;if(_===0)return a.set(0,0,0),null;const S=1/_,T=(p*d-u*y)*S,M=(l*y-u*d)*S;return a.set(1-T-M,M,T)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,nu)===null?!1:nu.x>=0&&nu.y>=0&&nu.x+nu.y<=1}static getInterpolation(e,t,n,s,a,l,u,d){return this.getBarycoord(e,t,n,s,nu)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(a,nu.x),d.addScaledVector(l,nu.y),d.addScaledVector(u,nu.z),d)}static getInterpolatedAttribute(e,t,n,s,a,l){return hb.setScalar(0),fb.setScalar(0),db.setScalar(0),hb.fromBufferAttribute(e,t),fb.fromBufferAttribute(e,n),db.fromBufferAttribute(e,s),l.setScalar(0),l.addScaledVector(hb,a.x),l.addScaledVector(fb,a.y),l.addScaledVector(db,a.z),l}static isFrontFacing(e,t,n,s){return ol.subVectors(n,t),tu.subVectors(e,t),ol.cross(tu).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ol.subVectors(this.c,this.b),tu.subVectors(this.a,this.b),ol.cross(tu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ma.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ma.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,s,a){return Ma.getInterpolation(e,this.a,this.b,this.c,t,n,s,a)}containsPoint(e){return Ma.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ma.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,a=this.c;let l,u;Fp.subVectors(s,n),Hp.subVectors(a,n),lb.subVectors(e,n);const d=Fp.dot(lb),p=Hp.dot(lb);if(d<=0&&p<=0)return t.copy(n);cb.subVectors(e,s);const y=Fp.dot(cb),_=Hp.dot(cb);if(y>=0&&_<=y)return t.copy(s);const S=d*_-y*p;if(S<=0&&d>=0&&y<=0)return l=d/(d-y),t.copy(n).addScaledVector(Fp,l);ub.subVectors(e,a);const T=Fp.dot(ub),M=Hp.dot(ub);if(M>=0&&T<=M)return t.copy(a);const C=T*p-d*M;if(C<=0&&p>=0&&M<=0)return u=p/(p-M),t.copy(n).addScaledVector(Hp,u);const w=y*M-T*_;if(w<=0&&_-y>=0&&T-M>=0)return l2.subVectors(a,s),u=(_-y)/(_-y+(T-M)),t.copy(s).addScaledVector(l2,u);const b=1/(w+C+S);return l=C*b,u=S*b,t.copy(n).addScaledVector(Fp,l).addScaledVector(Hp,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const iU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vh={h:0,s:0,l:0},E0={h:0,s:0,l:0};function pb(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class At{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ir){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Gn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,s=Gn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Gn.colorSpaceToWorking(this,s),this}setHSL(e,t,n,s=Gn.workingColorSpace){if(e=E1(e,1),t=Jt(t,0,1),n=Jt(n,0,1),t===0)this.r=this.g=this.b=n;else{const a=n<=.5?n*(1+t):n+t-n*t,l=2*n-a;this.r=pb(l,a,e+1/3),this.g=pb(l,a,e),this.b=pb(l,a,e-1/3)}return Gn.colorSpaceToWorking(this,s),this}setStyle(e,t=Ir){function n(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=s[1],l=a.length;if(l===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ir){const n=iU[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=hu(e.r),this.g=hu(e.g),this.b=hu(e.b),this}copyLinearToSRGB(e){return this.r=Sm(e.r),this.g=Sm(e.g),this.b=Sm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ir){return Gn.workingToColorSpace(wr.copy(this),e),Math.round(Jt(wr.r*255,0,255))*65536+Math.round(Jt(wr.g*255,0,255))*256+Math.round(Jt(wr.b*255,0,255))}getHexString(e=Ir){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Gn.workingColorSpace){Gn.workingToColorSpace(wr.copy(this),t);const n=wr.r,s=wr.g,a=wr.b,l=Math.max(n,s,a),u=Math.min(n,s,a);let d,p;const y=(u+l)/2;if(u===l)d=0,p=0;else{const _=l-u;switch(p=y<=.5?_/(l+u):_/(2-l-u),l){case n:d=(s-a)/_+(s<a?6:0);break;case s:d=(a-n)/_+2;break;case a:d=(n-s)/_+4;break}d/=6}return e.h=d,e.s=p,e.l=y,e}getRGB(e,t=Gn.workingColorSpace){return Gn.workingToColorSpace(wr.copy(this),t),e.r=wr.r,e.g=wr.g,e.b=wr.b,e}getStyle(e=Ir){Gn.workingToColorSpace(wr.copy(this),e);const t=wr.r,n=wr.g,s=wr.b;return e!==Ir?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(vh),this.setHSL(vh.h+e,vh.s+t,vh.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(vh),e.getHSL(E0);const n=Jy(vh.h,E0.h,t),s=Jy(vh.s,E0.s,t),a=Jy(vh.l,E0.l,t);return this.setHSL(n,s,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,a=e.elements;return this.r=a[0]*t+a[3]*n+a[6]*s,this.g=a[1]*t+a[4]*n+a[7]*s,this.b=a[2]*t+a[5]*n+a[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const wr=new At;At.NAMES=iU;let o9=0;class Lr extends Sc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:o9++}),this.uuid=Ja(),this.name="",this.type="Material",this.blending=hd,this.side=_u,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=YS,this.blendDst=KS,this.blendEquation=Rh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new At(0,0,0),this.blendAlpha=0,this.depthFunc=Sd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=BA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=nd,this.stencilZFail=nd,this.stencilZPass=nd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==hd&&(n.blending=this.blending),this.side!==_u&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==YS&&(n.blendSrc=this.blendSrc),this.blendDst!==KS&&(n.blendDst=this.blendDst),this.blendEquation!==Rh&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Sd&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==BA&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==nd&&(n.stencilFail=this.stencilFail),this.stencilZFail!==nd&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==nd&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(a){const l=[];for(const u in a){const d=a[u];delete d.metadata,l.push(d)}return l}if(t){const a=s(e.textures),l=s(e.images);a.length>0&&(n.textures=a),l.length>0&&(n.images=l)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const s=t.length;n=new Array(s);for(let a=0;a!==s;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Kh extends Lr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new At(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $a,this.combine=G_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ru=l9();function l9(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(n[d]=0,n[d|256]=32768,s[d]=24,s[d|256]=24):p<-14?(n[d]=1024>>-p-14,n[d|256]=1024>>-p-14|32768,s[d]=-p-1,s[d|256]=-p-1):p<=15?(n[d]=p+15<<10,n[d|256]=p+15<<10|32768,s[d]=13,s[d|256]=13):p<128?(n[d]=31744,n[d|256]=64512,s[d]=24,s[d|256]=24):(n[d]=31744,n[d|256]=64512,s[d]=13,s[d|256]=13)}const a=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,y=0;for(;(p&8388608)===0;)p<<=1,y-=8388608;p&=-8388609,y+=947912704,a[d]=p|y}for(let d=1024;d<2048;++d)a[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)l[d]=d<<23;l[31]=1199570944,l[32]=2147483648;for(let d=33;d<63;++d)l[d]=2147483648+(d-32<<23);l[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(u[d]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:s,mantissaTable:a,exponentTable:l,offsetTable:u}}function xa(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Jt(i,-65504,65504),ru.floatView[0]=i;const e=ru.uint32View[0],t=e>>23&511;return ru.baseTable[t]+((e&8388607)>>ru.shiftTable[t])}function Vy(i){const e=i>>10;return ru.uint32View[0]=ru.mantissaTable[ru.offsetTable[e]+(i&1023)]+ru.exponentTable[e],ru.floatView[0]}class c9{static toHalfFloat(e){return xa(e)}static fromHalfFloat(e){return Vy(e)}}const ps=new ie,x0=new $e;let u9=0;class mi{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:u9++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=S_,this.updateRanges=[],this.gpuType=wa,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,a=this.itemSize;s<a;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)x0.fromBufferAttribute(this,t),x0.applyMatrix3(e),this.setXY(t,x0.x,x0.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ps.fromBufferAttribute(this,t),ps.applyMatrix3(e),this.setXYZ(t,ps.x,ps.y,ps.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ps.fromBufferAttribute(this,t),ps.applyMatrix4(e),this.setXYZ(t,ps.x,ps.y,ps.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ps.fromBufferAttribute(this,t),ps.applyNormalMatrix(e),this.setXYZ(t,ps.x,ps.y,ps.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ps.fromBufferAttribute(this,t),ps.transformDirection(e),this.setXYZ(t,ps.x,ps.y,ps.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ra(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=yn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ra(t,this.array)),t}setX(e,t){return this.normalized&&(t=yn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ra(t,this.array)),t}setY(e,t){return this.normalized&&(t=yn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ra(t,this.array)),t}setZ(e,t){return this.normalized&&(t=yn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ra(t,this.array)),t}setW(e,t){return this.normalized&&(t=yn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=yn(t,this.array),n=yn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=yn(t,this.array),n=yn(n,this.array),s=yn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,a){return e*=this.itemSize,this.normalized&&(t=yn(t,this.array),n=yn(n,this.array),s=yn(s,this.array),a=yn(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==S_&&(e.usage=this.usage),e}}class h9 extends mi{constructor(e,t,n){super(new Int8Array(e),t,n)}}class f9 extends mi{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class d9 extends mi{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class p9 extends mi{constructor(e,t,n){super(new Int16Array(e),t,n)}}class T1 extends mi{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class m9 extends mi{constructor(e,t,n){super(new Int32Array(e),t,n)}}class b1 extends mi{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class g9 extends mi{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Vy(this.array[e*this.itemSize]);return this.normalized&&(t=ra(t,this.array)),t}setX(e,t){return this.normalized&&(t=yn(t,this.array)),this.array[e*this.itemSize]=xa(t),this}getY(e){let t=Vy(this.array[e*this.itemSize+1]);return this.normalized&&(t=ra(t,this.array)),t}setY(e,t){return this.normalized&&(t=yn(t,this.array)),this.array[e*this.itemSize+1]=xa(t),this}getZ(e){let t=Vy(this.array[e*this.itemSize+2]);return this.normalized&&(t=ra(t,this.array)),t}setZ(e,t){return this.normalized&&(t=yn(t,this.array)),this.array[e*this.itemSize+2]=xa(t),this}getW(e){let t=Vy(this.array[e*this.itemSize+3]);return this.normalized&&(t=ra(t,this.array)),t}setW(e,t){return this.normalized&&(t=yn(t,this.array)),this.array[e*this.itemSize+3]=xa(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=yn(t,this.array),n=yn(n,this.array)),this.array[e+0]=xa(t),this.array[e+1]=xa(n),this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=yn(t,this.array),n=yn(n,this.array),s=yn(s,this.array)),this.array[e+0]=xa(t),this.array[e+1]=xa(n),this.array[e+2]=xa(s),this}setXYZW(e,t,n,s,a){return e*=this.itemSize,this.normalized&&(t=yn(t,this.array),n=yn(n,this.array),s=yn(s,this.array),a=yn(a,this.array)),this.array[e+0]=xa(t),this.array[e+1]=xa(n),this.array[e+2]=xa(s),this.array[e+3]=xa(a),this}}class Ot extends mi{constructor(e,t,n){super(new Float32Array(e),t,n)}}let y9=0;const Ao=new tn,mb=new Kn,kp=new ie,Ya=new Or,xy=new Or,Fs=new ie;class _n extends Sc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:y9++}),this.uuid=Ja(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(eU(e)?b1:T1)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const a=new mn().getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ao.makeRotationFromQuaternion(e),this.applyMatrix4(Ao),this}rotateX(e){return Ao.makeRotationX(e),this.applyMatrix4(Ao),this}rotateY(e){return Ao.makeRotationY(e),this.applyMatrix4(Ao),this}rotateZ(e){return Ao.makeRotationZ(e),this.applyMatrix4(Ao),this}translate(e,t,n){return Ao.makeTranslation(e,t,n),this.applyMatrix4(Ao),this}scale(e,t,n){return Ao.makeScale(e,t,n),this.applyMatrix4(Ao),this}lookAt(e){return mb.lookAt(e),mb.updateMatrix(),this.applyMatrix4(mb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kp).negate(),this.translate(kp.x,kp.y,kp.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let s=0,a=e.length;s<a;s++){const l=e[s];n.push(l.x,l.y,l.z||0)}this.setAttribute("position",new Ot(n,3))}else{const n=Math.min(e.length,t.count);for(let s=0;s<n;s++){const a=e[s];t.setXYZ(s,a.x,a.y,a.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Or);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ie(-1/0,-1/0,-1/0),new ie(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const a=t[n];Ya.setFromBufferAttribute(a),this.morphTargetsRelative?(Fs.addVectors(this.boundingBox.min,Ya.min),this.boundingBox.expandByPoint(Fs),Fs.addVectors(this.boundingBox.max,Ya.max),this.boundingBox.expandByPoint(Fs)):(this.boundingBox.expandByPoint(Ya.min),this.boundingBox.expandByPoint(Ya.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ar);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ie,1/0);return}if(e){const n=this.boundingSphere.center;if(Ya.setFromBufferAttribute(e),t)for(let a=0,l=t.length;a<l;a++){const u=t[a];xy.setFromBufferAttribute(u),this.morphTargetsRelative?(Fs.addVectors(Ya.min,xy.min),Ya.expandByPoint(Fs),Fs.addVectors(Ya.max,xy.max),Ya.expandByPoint(Fs)):(Ya.expandByPoint(xy.min),Ya.expandByPoint(xy.max))}Ya.getCenter(n);let s=0;for(let a=0,l=e.count;a<l;a++)Fs.fromBufferAttribute(e,a),s=Math.max(s,n.distanceToSquared(Fs));if(t)for(let a=0,l=t.length;a<l;a++){const u=t[a],d=this.morphTargetsRelative;for(let p=0,y=u.count;p<y;p++)Fs.fromBufferAttribute(u,p),d&&(kp.fromBufferAttribute(e,p),Fs.add(kp)),s=Math.max(s,n.distanceToSquared(Fs))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,s=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new mi(new Float32Array(4*n.count),4));const l=this.getAttribute("tangent"),u=[],d=[];for(let L=0;L<n.count;L++)u[L]=new ie,d[L]=new ie;const p=new ie,y=new ie,_=new ie,S=new $e,T=new $e,M=new $e,C=new ie,w=new ie;function b(L,I,O){p.fromBufferAttribute(n,L),y.fromBufferAttribute(n,I),_.fromBufferAttribute(n,O),S.fromBufferAttribute(a,L),T.fromBufferAttribute(a,I),M.fromBufferAttribute(a,O),y.sub(p),_.sub(p),T.sub(S),M.sub(S);const F=1/(T.x*M.y-M.x*T.y);isFinite(F)&&(C.copy(y).multiplyScalar(M.y).addScaledVector(_,-T.y).multiplyScalar(F),w.copy(_).multiplyScalar(T.x).addScaledVector(y,-M.x).multiplyScalar(F),u[L].add(C),u[I].add(C),u[O].add(C),d[L].add(w),d[I].add(w),d[O].add(w))}let D=this.groups;D.length===0&&(D=[{start:0,count:e.count}]);for(let L=0,I=D.length;L<I;++L){const O=D[L],F=O.start,Y=O.count;for(let q=F,de=F+Y;q<de;q+=3)b(e.getX(q+0),e.getX(q+1),e.getX(q+2))}const V=new ie,z=new ie,j=new ie,G=new ie;function P(L){j.fromBufferAttribute(s,L),G.copy(j);const I=u[L];V.copy(I),V.sub(j.multiplyScalar(j.dot(I))).normalize(),z.crossVectors(G,I);const F=z.dot(d[L])<0?-1:1;l.setXYZW(L,V.x,V.y,V.z,F)}for(let L=0,I=D.length;L<I;++L){const O=D[L],F=O.start,Y=O.count;for(let q=F,de=F+Y;q<de;q+=3)P(e.getX(q+0)),P(e.getX(q+1)),P(e.getX(q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new mi(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let S=0,T=n.count;S<T;S++)n.setXYZ(S,0,0,0);const s=new ie,a=new ie,l=new ie,u=new ie,d=new ie,p=new ie,y=new ie,_=new ie;if(e)for(let S=0,T=e.count;S<T;S+=3){const M=e.getX(S+0),C=e.getX(S+1),w=e.getX(S+2);s.fromBufferAttribute(t,M),a.fromBufferAttribute(t,C),l.fromBufferAttribute(t,w),y.subVectors(l,a),_.subVectors(s,a),y.cross(_),u.fromBufferAttribute(n,M),d.fromBufferAttribute(n,C),p.fromBufferAttribute(n,w),u.add(y),d.add(y),p.add(y),n.setXYZ(M,u.x,u.y,u.z),n.setXYZ(C,d.x,d.y,d.z),n.setXYZ(w,p.x,p.y,p.z)}else for(let S=0,T=t.count;S<T;S+=3)s.fromBufferAttribute(t,S+0),a.fromBufferAttribute(t,S+1),l.fromBufferAttribute(t,S+2),y.subVectors(l,a),_.subVectors(s,a),y.cross(_),n.setXYZ(S+0,y.x,y.y,y.z),n.setXYZ(S+1,y.x,y.y,y.z),n.setXYZ(S+2,y.x,y.y,y.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Fs.fromBufferAttribute(e,t),Fs.normalize(),e.setXYZ(t,Fs.x,Fs.y,Fs.z)}toNonIndexed(){function e(u,d){const p=u.array,y=u.itemSize,_=u.normalized,S=new p.constructor(d.length*y);let T=0,M=0;for(let C=0,w=d.length;C<w;C++){u.isInterleavedBufferAttribute?T=d[C]*u.data.stride+u.offset:T=d[C]*y;for(let b=0;b<y;b++)S[M++]=p[T++]}return new mi(S,y,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new _n,n=this.index.array,s=this.attributes;for(const u in s){const d=s[u],p=e(d,n);t.setAttribute(u,p)}const a=this.morphAttributes;for(const u in a){const d=[],p=a[u];for(let y=0,_=p.length;y<_;y++){const S=p[y],T=e(S,n);d.push(T)}t.morphAttributes[u]=d}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,d=l.length;u<d;u++){const p=l[u];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(e[p]=d[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const d in n){const p=n[d];e.data.attributes[d]=p.toJSON(e.data)}const s={};let a=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],y=[];for(let _=0,S=p.length;_<S;_++){const T=p[_];y.push(T.toJSON(e.data))}y.length>0&&(s[d]=y,a=!0)}a&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere=u.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const s=e.attributes;for(const p in s){const y=s[p];this.setAttribute(p,y.clone(t))}const a=e.morphAttributes;for(const p in a){const y=[],_=a[p];for(let S=0,T=_.length;S<T;S++)y.push(_[S].clone(t));this.morphAttributes[p]=y}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,y=l.length;p<y;p++){const _=l[p];this.addGroup(_.start,_.count,_.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const c2=new tn,Gf=new $m,T0=new ar,u2=new ie,b0=new ie,A0=new ie,M0=new ie,gb=new ie,w0=new ie,h2=new ie,R0=new ie;class vs extends Kn{constructor(e=new _n,t=new Kh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=s.length;a<l;a++){const u=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=a}}}}getVertexPosition(e,t){const n=this.geometry,s=n.attributes.position,a=n.morphAttributes.position,l=n.morphTargetsRelative;t.fromBufferAttribute(s,e);const u=this.morphTargetInfluences;if(a&&u){w0.set(0,0,0);for(let d=0,p=a.length;d<p;d++){const y=u[d],_=a[d];y!==0&&(gb.fromBufferAttribute(_,e),l?w0.addScaledVector(gb,y):w0.addScaledVector(gb.sub(t),y))}t.add(w0)}return t}raycast(e,t){const n=this.geometry,s=this.material,a=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),T0.copy(n.boundingSphere),T0.applyMatrix4(a),Gf.copy(e.ray).recast(e.near),!(T0.containsPoint(Gf.origin)===!1&&(Gf.intersectSphere(T0,u2)===null||Gf.origin.distanceToSquared(u2)>(e.far-e.near)**2))&&(c2.copy(a).invert(),Gf.copy(e.ray).applyMatrix4(c2),!(n.boundingBox!==null&&Gf.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Gf)))}_computeIntersections(e,t,n){let s;const a=this.geometry,l=this.material,u=a.index,d=a.attributes.position,p=a.attributes.uv,y=a.attributes.uv1,_=a.attributes.normal,S=a.groups,T=a.drawRange;if(u!==null)if(Array.isArray(l))for(let M=0,C=S.length;M<C;M++){const w=S[M],b=l[w.materialIndex],D=Math.max(w.start,T.start),V=Math.min(u.count,Math.min(w.start+w.count,T.start+T.count));for(let z=D,j=V;z<j;z+=3){const G=u.getX(z),P=u.getX(z+1),L=u.getX(z+2);s=C0(this,b,e,n,p,y,_,G,P,L),s&&(s.faceIndex=Math.floor(z/3),s.face.materialIndex=w.materialIndex,t.push(s))}}else{const M=Math.max(0,T.start),C=Math.min(u.count,T.start+T.count);for(let w=M,b=C;w<b;w+=3){const D=u.getX(w),V=u.getX(w+1),z=u.getX(w+2);s=C0(this,l,e,n,p,y,_,D,V,z),s&&(s.faceIndex=Math.floor(w/3),t.push(s))}}else if(d!==void 0)if(Array.isArray(l))for(let M=0,C=S.length;M<C;M++){const w=S[M],b=l[w.materialIndex],D=Math.max(w.start,T.start),V=Math.min(d.count,Math.min(w.start+w.count,T.start+T.count));for(let z=D,j=V;z<j;z+=3){const G=z,P=z+1,L=z+2;s=C0(this,b,e,n,p,y,_,G,P,L),s&&(s.faceIndex=Math.floor(z/3),s.face.materialIndex=w.materialIndex,t.push(s))}}else{const M=Math.max(0,T.start),C=Math.min(d.count,T.start+T.count);for(let w=M,b=C;w<b;w+=3){const D=w,V=w+1,z=w+2;s=C0(this,l,e,n,p,y,_,D,V,z),s&&(s.faceIndex=Math.floor(w/3),t.push(s))}}}}function _9(i,e,t,n,s,a,l,u){let d;if(e.side===oa?d=n.intersectTriangle(l,a,s,!0,u):d=n.intersectTriangle(s,a,l,e.side===_u,u),d===null)return null;R0.copy(u),R0.applyMatrix4(i.matrixWorld);const p=t.ray.origin.distanceTo(R0);return p<t.near||p>t.far?null:{distance:p,point:R0.clone(),object:i}}function C0(i,e,t,n,s,a,l,u,d,p){i.getVertexPosition(u,b0),i.getVertexPosition(d,A0),i.getVertexPosition(p,M0);const y=_9(i,e,t,n,b0,A0,M0,h2);if(y){const _=new ie;Ma.getBarycoord(h2,b0,A0,M0,_),s&&(y.uv=Ma.getInterpolatedAttribute(s,u,d,p,_,new $e)),a&&(y.uv1=Ma.getInterpolatedAttribute(a,u,d,p,_,new $e)),l&&(y.normal=Ma.getInterpolatedAttribute(l,u,d,p,_,new ie),y.normal.dot(n.direction)>0&&y.normal.multiplyScalar(-1));const S={a:u,b:d,c:p,normal:new ie,materialIndex:0};Ma.getNormal(b0,A0,M0,S.normal),y.face=S,y.barycoord=_}return y}class Ud extends _n{constructor(e=1,t=1,n=1,s=1,a=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:a,depthSegments:l};const u=this;s=Math.floor(s),a=Math.floor(a),l=Math.floor(l);const d=[],p=[],y=[],_=[];let S=0,T=0;M("z","y","x",-1,-1,n,t,e,l,a,0),M("z","y","x",1,-1,n,t,-e,l,a,1),M("x","z","y",1,1,e,n,t,s,l,2),M("x","z","y",1,-1,e,n,-t,s,l,3),M("x","y","z",1,-1,e,t,n,s,a,4),M("x","y","z",-1,-1,e,t,-n,s,a,5),this.setIndex(d),this.setAttribute("position",new Ot(p,3)),this.setAttribute("normal",new Ot(y,3)),this.setAttribute("uv",new Ot(_,2));function M(C,w,b,D,V,z,j,G,P,L,I){const O=z/P,F=j/L,Y=z/2,q=j/2,de=G/2,ge=P+1,X=L+1;let ee=0,ne=0;const pe=new ie;for(let re=0;re<X;re++){const J=re*F-q;for(let le=0;le<ge;le++){const De=le*O-Y;pe[C]=De*D,pe[w]=J*V,pe[b]=de,p.push(pe.x,pe.y,pe.z),pe[C]=0,pe[w]=0,pe[b]=G>0?1:-1,y.push(pe.x,pe.y,pe.z),_.push(le/P),_.push(1-re/L),ee+=1}}for(let re=0;re<L;re++)for(let J=0;J<P;J++){const le=S+J+ge*re,De=S+J+ge*(re+1),Re=S+(J+1)+ge*(re+1),nt=S+(J+1)+ge*re;d.push(le,De,nt),d.push(De,Re,nt),ne+=6}u.addGroup(T,ne,I),T+=ne,S+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ud(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Lm(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const s=i[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function sa(i){const e={};for(let t=0;t<i.length;t++){const n=Lm(i[t]);for(const s in n)e[s]=n[s]}return e}function v9(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function sU(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Gn.workingColorSpace}const rU={clone:Lm,merge:sa};var S9=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,E9=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class vl extends Lr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=S9,this.fragmentShader=E9,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Lm(e.uniforms),this.uniformsGroups=v9(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const l=this.uniforms[s].value;l&&l.isTexture?t.uniforms[s]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[s]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[s]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[s]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[s]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[s]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[s]={type:"m4",value:l.toArray()}:t.uniforms[s]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Tx extends Kn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new tn,this.projectionMatrix=new tn,this.projectionMatrixInverse=new tn,this.coordinateSystem=Qa,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Sh=new ie,f2=new $e,d2=new $e;class ks extends Tx{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Om*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(fd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Om*2*Math.atan(Math.tan(fd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Sh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Sh.x,Sh.y).multiplyScalar(-e/Sh.z),Sh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Sh.x,Sh.y).multiplyScalar(-e/Sh.z)}getViewSize(e,t){return this.getViewBounds(e,f2,d2),t.subVectors(d2,f2)}setViewOffset(e,t,n,s,a,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(fd*.5*this.fov)/this.zoom,n=2*t,s=this.aspect*n,a=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const d=l.fullWidth,p=l.fullHeight;a+=l.offsetX*s/d,t-=l.offsetY*n/p,s*=l.width/d,n*=l.height/p}const u=this.filmOffset;u!==0&&(a+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+s,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Gp=-90,jp=1;class aU extends Kn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new ks(Gp,jp,e,t);s.layers=this.layers,this.add(s);const a=new ks(Gp,jp,e,t);a.layers=this.layers,this.add(a);const l=new ks(Gp,jp,e,t);l.layers=this.layers,this.add(l);const u=new ks(Gp,jp,e,t);u.layers=this.layers,this.add(u);const d=new ks(Gp,jp,e,t);d.layers=this.layers,this.add(d);const p=new ks(Gp,jp,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,s,a,l,u,d]=t;for(const p of t)this.remove(p);if(e===Qa)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(e===Nm)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,l,u,d,p,y]=this.children,_=e.getRenderTarget(),S=e.getActiveCubeFace(),T=e.getActiveMipmapLevel(),M=e.xr.enabled;e.xr.enabled=!1;const C=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,s),e.render(t,a),e.setRenderTarget(n,1,s),e.render(t,l),e.setRenderTarget(n,2,s),e.render(t,u),e.setRenderTarget(n,3,s),e.render(t,d),e.setRenderTarget(n,4,s),e.render(t,p),n.texture.generateMipmaps=C,e.setRenderTarget(n,5,s),e.render(t,y),e.setRenderTarget(_,S,T),e.xr.enabled=M,n.texture.needsPMREMUpdate=!0}}class q_ extends Ji{constructor(e=[],t=vu,n,s,a,l,u,d,p,y){super(e,t,n,s,a,l,u,d,p,y),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class oU extends _c{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];this.texture=new q_(s),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Ud(5,5,5),a=new vl({name:"CubemapFromEquirect",uniforms:Lm(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:oa,blending:uu});a.uniforms.tEquirect.value=t;const l=new vs(s,a),u=t.minFilter;return t.minFilter===ac&&(t.minFilter=ws),new aU(1,10,this).update(e,l),t.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(e,t=!0,n=!0,s=!0){const a=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,n,s);e.setRenderTarget(a)}}class fm extends Kn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const x9={type:"move"};class TS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new fm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new fm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ie,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ie),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new fm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ie,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ie),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let s=null,a=null,l=null;const u=this._targetRay,d=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){l=!0;for(const C of e.hand.values()){const w=t.getJointPose(C,n),b=this._getHandJoint(p,C);w!==null&&(b.matrix.fromArray(w.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=w.radius),b.visible=w!==null}const y=p.joints["index-finger-tip"],_=p.joints["thumb-tip"],S=y.position.distanceTo(_.position),T=.02,M=.005;p.inputState.pinching&&S>T+M?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&S<=T-M&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),a!==null&&(d.matrix.fromArray(a.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,a.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(a.linearVelocity)):d.hasLinearVelocity=!1,a.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(a.angularVelocity)):d.hasAngularVelocity=!1));u!==null&&(s=t.getPose(e.targetRaySpace,n),s===null&&a!==null&&(s=a),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(x9)))}return u!==null&&(u.visible=s!==null),d!==null&&(d.visible=a!==null),p!==null&&(p.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new fm;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class bx{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new At(e),this.density=t}clone(){return new bx(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Ax{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new At(e),this.near=t,this.far=n}clone(){return new Ax(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class A1 extends Kn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new $a,this.environmentIntensity=1,this.environmentRotation=new $a,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Mx{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=S_,this.updateRanges=[],this.version=0,this.uuid=Ja()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let s=0,a=this.stride;s<a;s++)this.array[e+s]=t.array[n+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ja()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ja()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ia=new ie;class Ed{constructor(e,t,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.applyMatrix4(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.applyNormalMatrix(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.transformDirection(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=ra(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=yn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=yn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=yn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=yn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=yn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ra(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ra(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ra(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ra(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=yn(t,this.array),n=yn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=yn(t,this.array),n=yn(n,this.array),s=yn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this}setXYZW(e,t,n,s,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=yn(t,this.array),n=yn(n,this.array),s=yn(s,this.array),a=yn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[s+a])}return new mi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ed(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[s+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class M1 extends Lr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new At(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let qp;const Ty=new ie,Xp=new ie,Wp=new ie,Yp=new $e,by=new $e,lU=new tn,I0=new ie,Ay=new ie,D0=new ie,p2=new $e,yb=new $e,m2=new $e;class cU extends Kn{constructor(e=new M1){if(super(),this.isSprite=!0,this.type="Sprite",qp===void 0){qp=new _n;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Mx(t,5);qp.setIndex([0,1,2,0,2,3]),qp.setAttribute("position",new Ed(n,3,0,!1)),qp.setAttribute("uv",new Ed(n,2,3,!1))}this.geometry=qp,this.material=e,this.center=new $e(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Xp.setFromMatrixScale(this.matrixWorld),lU.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Wp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Xp.multiplyScalar(-Wp.z);const n=this.material.rotation;let s,a;n!==0&&(a=Math.cos(n),s=Math.sin(n));const l=this.center;N0(I0.set(-.5,-.5,0),Wp,l,Xp,s,a),N0(Ay.set(.5,-.5,0),Wp,l,Xp,s,a),N0(D0.set(.5,.5,0),Wp,l,Xp,s,a),p2.set(0,0),yb.set(1,0),m2.set(1,1);let u=e.ray.intersectTriangle(I0,Ay,D0,!1,Ty);if(u===null&&(N0(Ay.set(-.5,.5,0),Wp,l,Xp,s,a),yb.set(0,1),u=e.ray.intersectTriangle(I0,D0,Ay,!1,Ty),u===null))return;const d=e.ray.origin.distanceTo(Ty);d<e.near||d>e.far||t.push({distance:d,point:Ty.clone(),uv:Ma.getInterpolation(Ty,I0,Ay,D0,p2,yb,m2,new $e),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function N0(i,e,t,n,s,a){Yp.subVectors(i,t).addScalar(.5).multiply(n),s!==void 0?(by.x=a*Yp.x-s*Yp.y,by.y=s*Yp.x+a*Yp.y):by.copy(Yp),i.copy(e),i.x+=by.x,i.y+=by.y,i.applyMatrix4(lU)}const O0=new ie,g2=new ie;class uU extends Kn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,s=t.length;n<s;n++){const a=t[n];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const s=this.levels;let a;for(a=0;a<s.length&&!(t<s[a].distance);a++);return s.splice(a,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const s=t.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,s;for(n=1,s=t.length;n<s;n++){let a=t[n].distance;if(t[n].object.visible&&(a-=a*t[n].hysteresis),e<a)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){O0.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(O0);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){O0.setFromMatrixPosition(e.matrixWorld),g2.setFromMatrixPosition(this.matrixWorld);const n=O0.distanceTo(g2)/e.zoom;t[0].object.visible=!0;let s,a;for(s=1,a=t.length;s<a;s++){let l=t[s].distance;if(t[s].object.visible&&(l-=l*t[s].hysteresis),n>=l)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<a;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let s=0,a=n.length;s<a;s++){const l=n[s];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}}const y2=new ie,_2=new Yn,v2=new Yn,T9=new ie,S2=new tn,U0=new ie,_b=new ar,E2=new tn,vb=new $m;class hU extends vs{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=zA,this.bindMatrix=new tn,this.bindMatrixInverse=new tn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Or),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,U0),this.boundingBox.expandByPoint(U0)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ar),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,U0),this.boundingSphere.expandByPoint(U0)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_b.copy(this.boundingSphere),_b.applyMatrix4(s),e.ray.intersectsSphere(_b)!==!1&&(E2.copy(s).invert(),vb.copy(e.ray).applyMatrix4(E2),!(this.boundingBox!==null&&vb.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,vb)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Yn,t=this.geometry.attributes.skinWeight;for(let n=0,s=t.count;n<s;n++){e.fromBufferAttribute(t,n);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===zA?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===FO?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,s=this.geometry;_2.fromBufferAttribute(s.attributes.skinIndex,e),v2.fromBufferAttribute(s.attributes.skinWeight,e),y2.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const l=v2.getComponent(a);if(l!==0){const u=_2.getComponent(a);S2.multiplyMatrices(n.bones[u].matrixWorld,n.boneInverses[u]),t.addScaledVector(T9.copy(y2).applyMatrix4(S2),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class w1 extends Kn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class mc extends Ji{constructor(e=null,t=1,n=1,s,a,l,u,d,p=rr,y=rr,_,S){super(null,l,u,d,p,y,s,a,_,S),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const x2=new tn,b9=new tn;class wx{constructor(e=[],t=[]){this.uuid=Ja(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new tn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new tn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let a=0,l=e.length;a<l;a++){const u=e[a]?e[a].matrixWorld:b9;x2.multiplyMatrices(u,t[a]),x2.toArray(n,a*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new wx(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new mc(t,e,e,Nr,wa);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,s=e.bones.length;n<s;n++){const a=e.bones[n];let l=t[a];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),l=new w1),this.bones.push(l),this.boneInverses.push(new tn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let s=0,a=t.length;s<a;s++){const l=t[s];e.bones.push(l.uuid);const u=n[s];e.boneInverses.push(u.toArray())}return e}}class Pm extends mi{constructor(e,t,n,s=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Kp=new tn,T2=new tn,L0=[],b2=new Or,A9=new tn,My=new vs,wy=new ar;class fU extends vs{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Pm(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,A9)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Or),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Kp),b2.copy(e.boundingBox).applyMatrix4(Kp),this.boundingBox.union(b2)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ar),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Kp),wy.copy(e.boundingSphere).applyMatrix4(Kp),this.boundingSphere.union(wy)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,s=this.morphTexture.source.data.data,a=n.length+1,l=e*a+1;for(let u=0;u<n.length;u++)n[u]=s[l+u]}raycast(e,t){const n=this.matrixWorld,s=this.count;if(My.geometry=this.geometry,My.material=this.material,My.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),wy.copy(this.boundingSphere),wy.applyMatrix4(n),e.ray.intersectsSphere(wy)!==!1))for(let a=0;a<s;a++){this.getMatrixAt(a,Kp),T2.multiplyMatrices(n,Kp),My.matrixWorld=T2,My.raycast(e,L0);for(let l=0,u=L0.length;l<u;l++){const d=L0[l];d.instanceId=a,d.object=this,t.push(d)}L0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Pm(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new mc(new Float32Array(s*this.count),s,this.count,yx,wa));const a=this.morphTexture.source.data.data;let l=0;for(let p=0;p<n.length;p++)l+=n[p];const u=this.geometry.morphTargetsRelative?1:1-l,d=s*e;a[d]=u,a.set(n,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Sb=new ie,M9=new ie,w9=new mn;class xh{constructor(e=new ie(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=Sb.subVectors(n,t).cross(M9.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Sb),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?null:t.copy(e.start).addScaledVector(n,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||w9.getNormalMatrix(e),s=this.coplanarPoint(Sb).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const jf=new ar,R9=new $e(.5,.5),P0=new ie;class eg{constructor(e=new xh,t=new xh,n=new xh,s=new xh,a=new xh,l=new xh){this.planes=[e,t,n,s,a,l]}set(e,t,n,s,a,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(n),u[3].copy(s),u[4].copy(a),u[5].copy(l),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Qa,n=!1){const s=this.planes,a=e.elements,l=a[0],u=a[1],d=a[2],p=a[3],y=a[4],_=a[5],S=a[6],T=a[7],M=a[8],C=a[9],w=a[10],b=a[11],D=a[12],V=a[13],z=a[14],j=a[15];if(s[0].setComponents(p-l,T-y,b-M,j-D).normalize(),s[1].setComponents(p+l,T+y,b+M,j+D).normalize(),s[2].setComponents(p+u,T+_,b+C,j+V).normalize(),s[3].setComponents(p-u,T-_,b-C,j-V).normalize(),n)s[4].setComponents(d,S,w,z).normalize(),s[5].setComponents(p-d,T-S,b-w,j-z).normalize();else if(s[4].setComponents(p-d,T-S,b-w,j-z).normalize(),t===Qa)s[5].setComponents(p+d,T+S,b+w,j+z).normalize();else if(t===Nm)s[5].setComponents(d,S,w,z).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),jf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),jf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(jf)}intersectsSprite(e){jf.center.set(0,0,0);const t=R9.distanceTo(e.center);return jf.radius=.7071067811865476+t,jf.applyMatrix4(e.matrixWorld),this.intersectsSphere(jf)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(P0.x=s.normal.x>0?e.max.x:e.min.x,P0.y=s.normal.y>0?e.max.y:e.min.y,P0.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(P0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const nc=new tn,ic=new eg;class Rx{constructor(){this.coordinateSystem=Qa}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(nc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ic.setFromProjectionMatrix(nc,s.coordinateSystem,s.reversedDepth),ic.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(nc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ic.setFromProjectionMatrix(nc,s.coordinateSystem,s.reversedDepth),ic.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(nc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ic.setFromProjectionMatrix(nc,s.coordinateSystem,s.reversedDepth),ic.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(nc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ic.setFromProjectionMatrix(nc,s.coordinateSystem,s.reversedDepth),ic.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(nc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ic.setFromProjectionMatrix(nc,s.coordinateSystem,s.reversedDepth),ic.containsPoint(e))return!0}return!1}clone(){return new Rx}}function Eb(i,e){return i-e}function C9(i,e){return i.z-e.z}function I9(i,e){return e.z-i.z}class D9{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,s){const a=this.pool,l=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const u=a[this.index];l.push(u),this.index++,u.start=e,u.count=t,u.z=n,u.index=s}reset(){this.list.length=0,this.index=0}}const Ea=new tn,N9=new At(1,1,1),A2=new eg,O9=new Rx,V0=new Or,qf=new ar,Ry=new ie,M2=new ie,U9=new ie,xb=new D9,Rr=new vs,z0=[];function L9(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const s=i.count;for(let a=0;a<s;a++)for(let l=0;l<n;l++)e.setComponent(a+t,l,i.getComponent(a,l))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function Xf(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class dU extends vs{constructor(e,t,n=t*2,s){super(new _n,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new mc(t,e,e,Nr,wa);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new mc(t,e,e,j_,Su);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new mc(t,e,e,Nr,wa);n.colorSpace=Gn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:u,itemSize:d,normalized:p}=l,y=new u.constructor(n*d),_=new mi(y,d,p);t.setAttribute(a,_)}if(e.getIndex()!==null){const a=n>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new mi(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=e.getAttribute(n),a=t.getAttribute(n);if(s.itemSize!==a.itemSize||s.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Or);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const a=t[n].geometryIndex;this.getMatrixAt(n,Ea),this.getBoundingBoxAt(a,V0).applyMatrix4(Ea),e.union(V0)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ar);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const a=t[n].geometryIndex;this.getMatrixAt(n,Ea),this.getBoundingSphereAt(a,qf).applyMatrix4(Ea),e.union(qf)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Eb),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const a=this._matricesTexture;Ea.identity().toArray(a.image.data,s*16),a.needsUpdate=!0;const l=this._colorsTexture;return l&&(N9.toArray(l.image.data,s*4),l.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const l=e.getIndex();if(l!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?l.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Eb),d=this._availableGeometryIds.shift(),a[d]=s):(d=this._geometryCount,this._geometryCount++,a.push(s)),this.setGeometryAt(d,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,s=n.getIndex()!==null,a=n.getIndex(),l=t.getIndex(),u=this._geometryInfo[e];if(s&&l.count>u.reservedIndexCount||t.attributes.position.count>u.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=u.vertexStart,p=u.reservedVertexCount;u.vertexCount=t.getAttribute("position").count;for(const y in n.attributes){const _=t.getAttribute(y),S=n.getAttribute(y);L9(_,S,d);const T=_.itemSize;for(let M=_.count,C=p;M<C;M++){const w=d+M;for(let b=0;b<T;b++)S.setComponent(w,b,0)}S.needsUpdate=!0,S.addUpdateRange(d*T,p*T)}if(s){const y=u.indexStart,_=u.reservedIndexCount;u.indexCount=t.getIndex().count;for(let S=0;S<l.count;S++)a.setX(y+S,d+l.getX(S));for(let S=l.count,T=_;S<T;S++)a.setX(y+S,d);a.needsUpdate=!0,a.addUpdateRange(y,u.reservedIndexCount)}return u.start=s?u.indexStart:u.vertexStart,u.count=s?u.indexCount:u.vertexCount,u.boundingBox=null,t.boundingBox!==null&&(u.boundingBox=t.boundingBox.clone()),u.boundingSphere=null,t.boundingSphere!==null&&(u.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let s=0,a=n.length;s<a;s++)n[s].active&&n[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,s=n.map((l,u)=>u).sort((l,u)=>n[l].vertexStart-n[u].vertexStart),a=this.geometry;for(let l=0,u=n.length;l<u;l++){const d=s[l],p=n[d];if(p.active!==!1){if(a.index!==null){if(p.indexStart!==t){const{indexStart:y,vertexStart:_,reservedIndexCount:S}=p,T=a.index,M=T.array,C=e-_;for(let w=y;w<y+S;w++)M[w]=M[w]+C;T.array.copyWithin(t,y,y+S),T.addUpdateRange(t,S),p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:y,reservedVertexCount:_}=p,S=a.attributes;for(const T in S){const M=S[T],{array:C,itemSize:w}=M;C.copyWithin(e*w,y*w,(y+_)*w),M.addUpdateRange(e*w,_*w)}p.vertexStart=e}e+=p.reservedVertexCount,p.start=a.index?p.indexStart:p.vertexStart,this._nextIndexStart=a.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const a=new Or,l=n.index,u=n.attributes.position;for(let d=s.start,p=s.start+s.count;d<p;d++){let y=d;l&&(y=l.getX(y)),a.expandByPoint(Ry.fromBufferAttribute(u,y))}s.boundingBox=a}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const a=new ar;this.getBoundingBoxAt(e,V0),V0.getCenter(a.center);const l=n.index,u=n.attributes.position;let d=0;for(let p=s.start,y=s.start+s.count;p<y;p++){let _=p;l&&(_=l.getX(_)),Ry.fromBufferAttribute(u,_),d=Math.max(d,a.center.distanceToSquared(Ry))}a.radius=Math.sqrt(d),s.boundingSphere=a}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(Eb);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),a=new Int32Array(e);Xf(this._multiDrawCounts,s),Xf(this._multiDrawStarts,a),this._multiDrawCounts=s,this._multiDrawStarts=a,this._maxInstanceCount=e;const l=this._indirectTexture,u=this._matricesTexture,d=this._colorsTexture;l.dispose(),this._initIndirectTexture(),Xf(l.image.data,this._indirectTexture.image.data),u.dispose(),this._initMatricesTexture(),Xf(u.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),Xf(d.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(u=>u.active);if(Math.max(...n.map(u=>u.vertexStart+u.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(d=>d.indexStart+d.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new _n,this._initializeGeometry(a));const l=this.geometry;a.index&&Xf(a.index.array,l.index.array);for(const u in a.attributes)Xf(a.attributes[u].array,l.attributes[u].array)}raycast(e,t){const n=this._instanceInfo,s=this._geometryInfo,a=this.matrixWorld,l=this.geometry;Rr.material=this.material,Rr.geometry.index=l.index,Rr.geometry.attributes=l.attributes,Rr.geometry.boundingBox===null&&(Rr.geometry.boundingBox=new Or),Rr.geometry.boundingSphere===null&&(Rr.geometry.boundingSphere=new ar);for(let u=0,d=n.length;u<d;u++){if(!n[u].visible||!n[u].active)continue;const p=n[u].geometryIndex,y=s[p];Rr.geometry.setDrawRange(y.start,y.count),this.getMatrixAt(u,Rr.matrixWorld).premultiply(a),this.getBoundingBoxAt(p,Rr.geometry.boundingBox),this.getBoundingSphereAt(p,Rr.geometry.boundingSphere),Rr.raycast(e,z0);for(let _=0,S=z0.length;_<S;_++){const T=z0[_];T.object=this,T.batchId=u,t.push(T)}z0.length=0}Rr.material=null,Rr.geometry.index=null,Rr.geometry.attributes={},Rr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,s,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=s.getIndex(),u=l===null?1:l.array.BYTES_PER_ELEMENT,d=this._instanceInfo,p=this._multiDrawStarts,y=this._multiDrawCounts,_=this._geometryInfo,S=this.perObjectFrustumCulled,T=this._indirectTexture,M=T.image.data,C=n.isArrayCamera?O9:A2;S&&!n.isArrayCamera&&(Ea.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),A2.setFromProjectionMatrix(Ea,n.coordinateSystem,n.reversedDepth));let w=0;if(this.sortObjects){Ea.copy(this.matrixWorld).invert(),Ry.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Ea),M2.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Ea);for(let V=0,z=d.length;V<z;V++)if(d[V].visible&&d[V].active){const j=d[V].geometryIndex;this.getMatrixAt(V,Ea),this.getBoundingSphereAt(j,qf).applyMatrix4(Ea);let G=!1;if(S&&(G=!C.intersectsSphere(qf,n)),!G){const P=_[j],L=U9.subVectors(qf.center,Ry).dot(M2);xb.push(P.start,P.count,L,V)}}const b=xb.list,D=this.customSort;D===null?b.sort(a.transparent?I9:C9):D.call(this,b,n);for(let V=0,z=b.length;V<z;V++){const j=b[V];p[w]=j.start*u,y[w]=j.count,M[w]=j.index,w++}xb.reset()}else for(let b=0,D=d.length;b<D;b++)if(d[b].visible&&d[b].active){const V=d[b].geometryIndex;let z=!1;if(S&&(this.getMatrixAt(b,Ea),this.getBoundingSphereAt(V,qf).applyMatrix4(Ea),z=!C.intersectsSphere(qf,n)),!z){const j=_[V];p[w]=j.start*u,y[w]=j.count,M[w]=b,w++}}T.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,n,s,a,l){this.onBeforeRender(e,null,s,a,l)}}class la extends Lr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new At(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const NE=new ie,OE=new ie,w2=new tn,Cy=new $m,B0=new ar,Tb=new ie,R2=new ie;class Xh extends Kn{constructor(e=new _n,t=new la){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let s=1,a=t.count;s<a;s++)NE.fromBufferAttribute(t,s-1),OE.fromBufferAttribute(t,s),n[s]=n[s-1],n[s]+=NE.distanceTo(OE);e.setAttribute("lineDistance",new Ot(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,a=e.params.Line.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),B0.copy(n.boundingSphere),B0.applyMatrix4(s),B0.radius+=a,e.ray.intersectsSphere(B0)===!1)return;w2.copy(s).invert(),Cy.copy(e.ray).applyMatrix4(w2);const u=a/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=this.isLineSegments?2:1,y=n.index,S=n.attributes.position;if(y!==null){const T=Math.max(0,l.start),M=Math.min(y.count,l.start+l.count);for(let C=T,w=M-1;C<w;C+=p){const b=y.getX(C),D=y.getX(C+1),V=F0(this,e,Cy,d,b,D,C);V&&t.push(V)}if(this.isLineLoop){const C=y.getX(M-1),w=y.getX(T),b=F0(this,e,Cy,d,C,w,M-1);b&&t.push(b)}}else{const T=Math.max(0,l.start),M=Math.min(S.count,l.start+l.count);for(let C=T,w=M-1;C<w;C+=p){const b=F0(this,e,Cy,d,C,C+1,C);b&&t.push(b)}if(this.isLineLoop){const C=F0(this,e,Cy,d,M-1,T,M-1);C&&t.push(C)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=s.length;a<l;a++){const u=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=a}}}}}function F0(i,e,t,n,s,a,l){const u=i.geometry.attributes.position;if(NE.fromBufferAttribute(u,s),OE.fromBufferAttribute(u,a),t.distanceSqToSegment(NE,OE,Tb,R2)>n)return;Tb.applyMatrix4(i.matrixWorld);const p=e.ray.origin.distanceTo(Tb);if(!(p<e.near||p>e.far))return{distance:p,point:R2.clone().applyMatrix4(i.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:i}}const C2=new ie,I2=new ie;class Ec extends Xh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let s=0,a=t.count;s<a;s+=2)C2.fromBufferAttribute(t,s),I2.fromBufferAttribute(t,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+C2.distanceTo(I2);e.setAttribute("lineDistance",new Ot(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class pU extends Xh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class R1 extends Lr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new At(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const D2=new tn,HA=new $m,H0=new ar,k0=new ie;class mU extends Kn{constructor(e=new _n,t=new R1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,a=e.params.Points.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),H0.copy(n.boundingSphere),H0.applyMatrix4(s),H0.radius+=a,e.ray.intersectsSphere(H0)===!1)return;D2.copy(s).invert(),HA.copy(e.ray).applyMatrix4(D2);const u=a/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=n.index,_=n.attributes.position;if(p!==null){const S=Math.max(0,l.start),T=Math.min(p.count,l.start+l.count);for(let M=S,C=T;M<C;M++){const w=p.getX(M);k0.fromBufferAttribute(_,w),N2(k0,w,d,s,e,t,this)}}else{const S=Math.max(0,l.start),T=Math.min(_.count,l.start+l.count);for(let M=S,C=T;M<C;M++)k0.fromBufferAttribute(_,M),N2(k0,M,d,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=s.length;a<l;a++){const u=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=a}}}}}function N2(i,e,t,n,s,a,l){const u=HA.distanceSqToPoint(i);if(u<t){const d=new ie;HA.closestPointToPoint(i,d),d.applyMatrix4(n);const p=s.ray.origin.distanceTo(d);if(p<s.near||p>s.far)return;a.push({distance:p,distanceToRay:Math.sqrt(u),point:d,index:e,face:null,faceIndex:null,barycoord:null,object:l})}}class gU extends Ji{constructor(e,t,n,s,a=ws,l=ws,u,d,p){super(e,t,n,s,a,l,u,d,p),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const y=this;function _(){y.needsUpdate=!0,y._requestVideoFrameCallbackId=e.requestVideoFrameCallback(_)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(_))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class P9 extends gU{constructor(e,t,n,s,a,l,u,d){super({},e,t,n,s,a,l,u,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class V9 extends Ji{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=rr,this.minFilter=rr,this.generateMipmaps=!1,this.needsUpdate=!0}}class Cx extends Ji{constructor(e,t,n,s,a,l,u,d,p,y,_,S){super(null,l,u,d,p,y,s,a,_,S),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class z9 extends Cx{constructor(e,t,n,s,a,l){super(e,t,n,a,l),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Ro,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class B9 extends Cx{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,vu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class F9 extends Ji{constructor(e,t,n,s,a,l,u,d,p){super(e,t,n,s,a,l,u,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class C1 extends Ji{constructor(e,t,n=Su,s,a,l,u=rr,d=rr,p,y=Im,_=1){if(y!==Im&&y!==Dm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const S={width:e,height:t,depth:_};super(S,s,a,l,u,d,y,n,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Dh(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class I1 extends Ji{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Ix extends _n{constructor(e=1,t=1,n=4,s=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:s,heightSegments:a},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),s=Math.max(3,Math.floor(s)),a=Math.max(1,Math.floor(a));const l=[],u=[],d=[],p=[],y=t/2,_=Math.PI/2*e,S=t,T=2*_+S,M=n*2+a,C=s+1,w=new ie,b=new ie;for(let D=0;D<=M;D++){let V=0,z=0,j=0,G=0;if(D<=n){const I=D/n,O=I*Math.PI/2;z=-y-e*Math.cos(O),j=e*Math.sin(O),G=-e*Math.cos(O),V=I*_}else if(D<=n+a){const I=(D-n)/a;z=-y+I*t,j=e,G=0,V=_+I*S}else{const I=(D-n-a)/n,O=I*Math.PI/2;z=y+e*Math.sin(O),j=e*Math.cos(O),G=e*Math.sin(O),V=_+S+I*_}const P=Math.max(0,Math.min(1,V/T));let L=0;D===0?L=.5/s:D===M&&(L=-.5/s);for(let I=0;I<=s;I++){const O=I/s,F=O*Math.PI*2,Y=Math.sin(F),q=Math.cos(F);b.x=-j*q,b.y=z,b.z=j*Y,u.push(b.x,b.y,b.z),w.set(-j*q,G,j*Y),w.normalize(),d.push(w.x,w.y,w.z),p.push(O+L,P)}if(D>0){const I=(D-1)*C;for(let O=0;O<s;O++){const F=I+O,Y=I+O+1,q=D*C+O,de=D*C+O+1;l.push(F,Y,q),l.push(Y,de,q)}}}this.setIndex(l),this.setAttribute("position",new Ot(u,3)),this.setAttribute("normal",new Ot(d,3)),this.setAttribute("uv",new Ot(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ix(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Dx extends _n{constructor(e=1,t=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:s},t=Math.max(3,t);const a=[],l=[],u=[],d=[],p=new ie,y=new $e;l.push(0,0,0),u.push(0,0,1),d.push(.5,.5);for(let _=0,S=3;_<=t;_++,S+=3){const T=n+_/t*s;p.x=e*Math.cos(T),p.y=e*Math.sin(T),l.push(p.x,p.y,p.z),u.push(0,0,1),y.x=(l[S]/e+1)/2,y.y=(l[S+1]/e+1)/2,d.push(y.x,y.y)}for(let _=1;_<=t;_++)a.push(_,_+1,0);this.setIndex(a),this.setAttribute("position",new Ot(l,3)),this.setAttribute("normal",new Ot(u,3)),this.setAttribute("uv",new Ot(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dx(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class X_ extends _n{constructor(e=1,t=1,n=1,s=32,a=1,l=!1,u=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:s,heightSegments:a,openEnded:l,thetaStart:u,thetaLength:d};const p=this;s=Math.floor(s),a=Math.floor(a);const y=[],_=[],S=[],T=[];let M=0;const C=[],w=n/2;let b=0;D(),l===!1&&(e>0&&V(!0),t>0&&V(!1)),this.setIndex(y),this.setAttribute("position",new Ot(_,3)),this.setAttribute("normal",new Ot(S,3)),this.setAttribute("uv",new Ot(T,2));function D(){const z=new ie,j=new ie;let G=0;const P=(t-e)/n;for(let L=0;L<=a;L++){const I=[],O=L/a,F=O*(t-e)+e;for(let Y=0;Y<=s;Y++){const q=Y/s,de=q*d+u,ge=Math.sin(de),X=Math.cos(de);j.x=F*ge,j.y=-O*n+w,j.z=F*X,_.push(j.x,j.y,j.z),z.set(ge,P,X).normalize(),S.push(z.x,z.y,z.z),T.push(q,1-O),I.push(M++)}C.push(I)}for(let L=0;L<s;L++)for(let I=0;I<a;I++){const O=C[I][L],F=C[I+1][L],Y=C[I+1][L+1],q=C[I][L+1];(e>0||I!==0)&&(y.push(O,F,q),G+=3),(t>0||I!==a-1)&&(y.push(F,Y,q),G+=3)}p.addGroup(b,G,0),b+=G}function V(z){const j=M,G=new $e,P=new ie;let L=0;const I=z===!0?e:t,O=z===!0?1:-1;for(let Y=1;Y<=s;Y++)_.push(0,w*O,0),S.push(0,O,0),T.push(.5,.5),M++;const F=M;for(let Y=0;Y<=s;Y++){const de=Y/s*d+u,ge=Math.cos(de),X=Math.sin(de);P.x=I*X,P.y=w*O,P.z=I*ge,_.push(P.x,P.y,P.z),S.push(0,O,0),G.x=ge*.5+.5,G.y=X*.5*O+.5,T.push(G.x,G.y),M++}for(let Y=0;Y<s;Y++){const q=j+Y,de=F+Y;z===!0?y.push(de,de+1,q):y.push(de+1,de,q),L+=3}p.addGroup(b,L,z===!0?1:2),b+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new X_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class W_ extends X_{constructor(e=1,t=1,n=32,s=1,a=!1,l=0,u=Math.PI*2){super(0,e,t,n,s,a,l,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:u}}static fromJSON(e){return new W_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Qh extends _n{constructor(e=[],t=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:s};const a=[],l=[];u(s),p(n),y(),this.setAttribute("position",new Ot(a,3)),this.setAttribute("normal",new Ot(a.slice(),3)),this.setAttribute("uv",new Ot(l,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function u(D){const V=new ie,z=new ie,j=new ie;for(let G=0;G<t.length;G+=3)T(t[G+0],V),T(t[G+1],z),T(t[G+2],j),d(V,z,j,D)}function d(D,V,z,j){const G=j+1,P=[];for(let L=0;L<=G;L++){P[L]=[];const I=D.clone().lerp(z,L/G),O=V.clone().lerp(z,L/G),F=G-L;for(let Y=0;Y<=F;Y++)Y===0&&L===G?P[L][Y]=I:P[L][Y]=I.clone().lerp(O,Y/F)}for(let L=0;L<G;L++)for(let I=0;I<2*(G-L)-1;I++){const O=Math.floor(I/2);I%2===0?(S(P[L][O+1]),S(P[L+1][O]),S(P[L][O])):(S(P[L][O+1]),S(P[L+1][O+1]),S(P[L+1][O]))}}function p(D){const V=new ie;for(let z=0;z<a.length;z+=3)V.x=a[z+0],V.y=a[z+1],V.z=a[z+2],V.normalize().multiplyScalar(D),a[z+0]=V.x,a[z+1]=V.y,a[z+2]=V.z}function y(){const D=new ie;for(let V=0;V<a.length;V+=3){D.x=a[V+0],D.y=a[V+1],D.z=a[V+2];const z=w(D)/2/Math.PI+.5,j=b(D)/Math.PI+.5;l.push(z,1-j)}M(),_()}function _(){for(let D=0;D<l.length;D+=6){const V=l[D+0],z=l[D+2],j=l[D+4],G=Math.max(V,z,j),P=Math.min(V,z,j);G>.9&&P<.1&&(V<.2&&(l[D+0]+=1),z<.2&&(l[D+2]+=1),j<.2&&(l[D+4]+=1))}}function S(D){a.push(D.x,D.y,D.z)}function T(D,V){const z=D*3;V.x=e[z+0],V.y=e[z+1],V.z=e[z+2]}function M(){const D=new ie,V=new ie,z=new ie,j=new ie,G=new $e,P=new $e,L=new $e;for(let I=0,O=0;I<a.length;I+=9,O+=6){D.set(a[I+0],a[I+1],a[I+2]),V.set(a[I+3],a[I+4],a[I+5]),z.set(a[I+6],a[I+7],a[I+8]),G.set(l[O+0],l[O+1]),P.set(l[O+2],l[O+3]),L.set(l[O+4],l[O+5]),j.copy(D).add(V).add(z).divideScalar(3);const F=w(j);C(G,O+0,D,F),C(P,O+2,V,F),C(L,O+4,z,F)}}function C(D,V,z,j){j<0&&D.x===1&&(l[V]=D.x-1),z.x===0&&z.z===0&&(l[V]=j/2/Math.PI+.5)}function w(D){return Math.atan2(D.z,-D.x)}function b(D){return Math.atan2(-D.y,Math.sqrt(D.x*D.x+D.z*D.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qh(e.vertices,e.indices,e.radius,e.details)}}class Nx extends Qh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=1/n,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Nx(e.radius,e.detail)}}const G0=new ie,j0=new ie,bb=new ie,q0=new Ma;class yU extends _n{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),a=Math.cos(fd*t),l=e.getIndex(),u=e.getAttribute("position"),d=l?l.count:u.count,p=[0,0,0],y=["a","b","c"],_=new Array(3),S={},T=[];for(let M=0;M<d;M+=3){l?(p[0]=l.getX(M),p[1]=l.getX(M+1),p[2]=l.getX(M+2)):(p[0]=M,p[1]=M+1,p[2]=M+2);const{a:C,b:w,c:b}=q0;if(C.fromBufferAttribute(u,p[0]),w.fromBufferAttribute(u,p[1]),b.fromBufferAttribute(u,p[2]),q0.getNormal(bb),_[0]=`${Math.round(C.x*s)},${Math.round(C.y*s)},${Math.round(C.z*s)}`,_[1]=`${Math.round(w.x*s)},${Math.round(w.y*s)},${Math.round(w.z*s)}`,_[2]=`${Math.round(b.x*s)},${Math.round(b.y*s)},${Math.round(b.z*s)}`,!(_[0]===_[1]||_[1]===_[2]||_[2]===_[0]))for(let D=0;D<3;D++){const V=(D+1)%3,z=_[D],j=_[V],G=q0[y[D]],P=q0[y[V]],L=`${z}_${j}`,I=`${j}_${z}`;I in S&&S[I]?(bb.dot(S[I].normal)<=a&&(T.push(G.x,G.y,G.z),T.push(P.x,P.y,P.z)),S[I]=null):L in S||(S[L]={index0:p[D],index1:p[V],normal:bb.clone()})}}for(const M in S)if(S[M]){const{index0:C,index1:w}=S[M];G0.fromBufferAttribute(u,C),j0.fromBufferAttribute(u,w),T.push(G0.x,G0.y,G0.z),T.push(j0.x,j0.y,j0.z)}this.setAttribute("position",new Ot(T,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class El{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,s=this.getPoint(0),a=0;t.push(0);for(let l=1;l<=e;l++)n=this.getPoint(l/e),a+=n.distanceTo(s),t.push(a),s=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let s=0;const a=n.length;let l;t?l=t:l=e*n[a-1];let u=0,d=a-1,p;for(;u<=d;)if(s=Math.floor(u+(d-u)/2),p=n[s]-l,p<0)u=s+1;else if(p>0)d=s-1;else{d=s;break}if(s=d,n[s]===l)return s/(a-1);const y=n[s],S=n[s+1]-y,T=(l-y)/S;return(s+T)/(a-1)}getTangent(e,t){let s=e-1e-4,a=e+1e-4;s<0&&(s=0),a>1&&(a=1);const l=this.getPoint(s),u=this.getPoint(a),d=t||(l.isVector2?new $e:new ie);return d.copy(u).sub(l).normalize(),d}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new ie,s=[],a=[],l=[],u=new ie,d=new tn;for(let T=0;T<=e;T++){const M=T/e;s[T]=this.getTangentAt(M,new ie)}a[0]=new ie,l[0]=new ie;let p=Number.MAX_VALUE;const y=Math.abs(s[0].x),_=Math.abs(s[0].y),S=Math.abs(s[0].z);y<=p&&(p=y,n.set(1,0,0)),_<=p&&(p=_,n.set(0,1,0)),S<=p&&n.set(0,0,1),u.crossVectors(s[0],n).normalize(),a[0].crossVectors(s[0],u),l[0].crossVectors(s[0],a[0]);for(let T=1;T<=e;T++){if(a[T]=a[T-1].clone(),l[T]=l[T-1].clone(),u.crossVectors(s[T-1],s[T]),u.length()>Number.EPSILON){u.normalize();const M=Math.acos(Jt(s[T-1].dot(s[T]),-1,1));a[T].applyMatrix4(d.makeRotationAxis(u,M))}l[T].crossVectors(s[T],a[T])}if(t===!0){let T=Math.acos(Jt(a[0].dot(a[e]),-1,1));T/=e,s[0].dot(u.crossVectors(a[0],a[e]))>0&&(T=-T);for(let M=1;M<=e;M++)a[M].applyMatrix4(d.makeRotationAxis(s[M],T*M)),l[M].crossVectors(s[M],a[M])}return{tangents:s,normals:a,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ox extends El{constructor(e=0,t=0,n=1,s=1,a=0,l=Math.PI*2,u=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=s,this.aStartAngle=a,this.aEndAngle=l,this.aClockwise=u,this.aRotation=d}getPoint(e,t=new $e){const n=t,s=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const l=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=s;for(;a>s;)a-=s;a<Number.EPSILON&&(l?a=0:a=s),this.aClockwise===!0&&!l&&(a===s?a=-s:a=a-s);const u=this.aStartAngle+e*a;let d=this.aX+this.xRadius*Math.cos(u),p=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const y=Math.cos(this.aRotation),_=Math.sin(this.aRotation),S=d-this.aX,T=p-this.aY;d=S*y-T*_+this.aX,p=S*_+T*y+this.aY}return n.set(d,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class _U extends Ox{constructor(e,t,n,s,a,l){super(e,t,n,n,s,a,l),this.isArcCurve=!0,this.type="ArcCurve"}}function D1(){let i=0,e=0,t=0,n=0;function s(a,l,u,d){i=a,e=u,t=-3*a+3*l-2*u-d,n=2*a-2*l+u+d}return{initCatmullRom:function(a,l,u,d,p){s(l,u,p*(u-a),p*(d-l))},initNonuniformCatmullRom:function(a,l,u,d,p,y,_){let S=(l-a)/p-(u-a)/(p+y)+(u-l)/y,T=(u-l)/y-(d-l)/(y+_)+(d-u)/_;S*=y,T*=y,s(l,u,S,T)},calc:function(a){const l=a*a,u=l*a;return i+e*a+t*l+n*u}}}const X0=new ie,Ab=new D1,Mb=new D1,wb=new D1;class vU extends El{constructor(e=[],t=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=s}getPoint(e,t=new ie){const n=t,s=this.points,a=s.length,l=(a-(this.closed?0:1))*e;let u=Math.floor(l),d=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/a)+1)*a:d===0&&u===a-1&&(u=a-2,d=1);let p,y;this.closed||u>0?p=s[(u-1)%a]:(X0.subVectors(s[0],s[1]).add(s[0]),p=X0);const _=s[u%a],S=s[(u+1)%a];if(this.closed||u+2<a?y=s[(u+2)%a]:(X0.subVectors(s[a-1],s[a-2]).add(s[a-1]),y=X0),this.curveType==="centripetal"||this.curveType==="chordal"){const T=this.curveType==="chordal"?.5:.25;let M=Math.pow(p.distanceToSquared(_),T),C=Math.pow(_.distanceToSquared(S),T),w=Math.pow(S.distanceToSquared(y),T);C<1e-4&&(C=1),M<1e-4&&(M=C),w<1e-4&&(w=C),Ab.initNonuniformCatmullRom(p.x,_.x,S.x,y.x,M,C,w),Mb.initNonuniformCatmullRom(p.y,_.y,S.y,y.y,M,C,w),wb.initNonuniformCatmullRom(p.z,_.z,S.z,y.z,M,C,w)}else this.curveType==="catmullrom"&&(Ab.initCatmullRom(p.x,_.x,S.x,y.x,this.tension),Mb.initCatmullRom(p.y,_.y,S.y,y.y,this.tension),wb.initCatmullRom(p.z,_.z,S.z,y.z,this.tension));return n.set(Ab.calc(d),Mb.calc(d),wb.calc(d)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new ie().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function O2(i,e,t,n,s){const a=(n-e)*.5,l=(s-t)*.5,u=i*i,d=i*u;return(2*t-2*n+a+l)*d+(-3*t+3*n-2*a-l)*u+a*i+t}function H9(i,e){const t=1-i;return t*t*e}function k9(i,e){return 2*(1-i)*i*e}function G9(i,e){return i*i*e}function $y(i,e,t,n){return H9(i,e)+k9(i,t)+G9(i,n)}function j9(i,e){const t=1-i;return t*t*t*e}function q9(i,e){const t=1-i;return 3*t*t*i*e}function X9(i,e){return 3*(1-i)*i*i*e}function W9(i,e){return i*i*i*e}function e_(i,e,t,n,s){return j9(i,e)+q9(i,t)+X9(i,n)+W9(i,s)}class N1 extends El{constructor(e=new $e,t=new $e,n=new $e,s=new $e){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new $e){const n=t,s=this.v0,a=this.v1,l=this.v2,u=this.v3;return n.set(e_(e,s.x,a.x,l.x,u.x),e_(e,s.y,a.y,l.y,u.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class SU extends El{constructor(e=new ie,t=new ie,n=new ie,s=new ie){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new ie){const n=t,s=this.v0,a=this.v1,l=this.v2,u=this.v3;return n.set(e_(e,s.x,a.x,l.x,u.x),e_(e,s.y,a.y,l.y,u.y),e_(e,s.z,a.z,l.z,u.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class O1 extends El{constructor(e=new $e,t=new $e){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new $e){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new $e){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class EU extends El{constructor(e=new ie,t=new ie){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ie){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ie){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class U1 extends El{constructor(e=new $e,t=new $e,n=new $e){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new $e){const n=t,s=this.v0,a=this.v1,l=this.v2;return n.set($y(e,s.x,a.x,l.x),$y(e,s.y,a.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class L1 extends El{constructor(e=new ie,t=new ie,n=new ie){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ie){const n=t,s=this.v0,a=this.v1,l=this.v2;return n.set($y(e,s.x,a.x,l.x),$y(e,s.y,a.y,l.y),$y(e,s.z,a.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class P1 extends El{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new $e){const n=t,s=this.points,a=(s.length-1)*e,l=Math.floor(a),u=a-l,d=s[l===0?l:l-1],p=s[l],y=s[l>s.length-2?s.length-1:l+1],_=s[l>s.length-3?s.length-1:l+2];return n.set(O2(u,d.x,p.x,y.x,_.x),O2(u,d.y,p.y,y.y,_.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new $e().fromArray(s))}return this}}var UE=Object.freeze({__proto__:null,ArcCurve:_U,CatmullRomCurve3:vU,CubicBezierCurve:N1,CubicBezierCurve3:SU,EllipseCurve:Ox,LineCurve:O1,LineCurve3:EU,QuadraticBezierCurve:U1,QuadraticBezierCurve3:L1,SplineCurve:P1});class xU extends El{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new UE[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),s=this.getCurveLengths();let a=0;for(;a<s.length;){if(s[a]>=n){const l=s[a]-n,u=this.curves[a],d=u.getLength(),p=d===0?0:1-l/d;return u.getPointAt(p,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,s=this.curves.length;n<s;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let s=0,a=this.curves;s<a.length;s++){const l=a[s],u=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,d=l.getPoints(u);for(let p=0;p<d.length;p++){const y=d[p];n&&n.equals(y)||(t.push(y),n=y)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(new UE[s.type]().fromJSON(s))}return this}}class LE extends xU{constructor(e){super(),this.type="Path",this.currentPoint=new $e,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new O1(this.currentPoint.clone(),new $e(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,s){const a=new U1(this.currentPoint.clone(),new $e(e,t),new $e(n,s));return this.curves.push(a),this.currentPoint.set(n,s),this}bezierCurveTo(e,t,n,s,a,l){const u=new N1(this.currentPoint.clone(),new $e(e,t),new $e(n,s),new $e(a,l));return this.curves.push(u),this.currentPoint.set(a,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new P1(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,s,a,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+u,t+d,n,s,a,l),this}absarc(e,t,n,s,a,l){return this.absellipse(e,t,n,n,s,a,l),this}ellipse(e,t,n,s,a,l,u,d){const p=this.currentPoint.x,y=this.currentPoint.y;return this.absellipse(e+p,t+y,n,s,a,l,u,d),this}absellipse(e,t,n,s,a,l,u,d){const p=new Ox(e,t,n,s,a,l,u,d);if(this.curves.length>0){const _=p.getPoint(0);_.equals(this.currentPoint)||this.lineTo(_.x,_.y)}this.curves.push(p);const y=p.getPoint(1);return this.currentPoint.copy(y),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class dd extends LE{constructor(e){super(e),this.uuid=Ja(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,s=this.holes.length;n<s;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(new LE().fromJSON(s))}return this}}function Y9(i,e,t=2){const n=e&&e.length,s=n?e[0]*t:i.length;let a=TU(i,0,s,t,!0);const l=[];if(!a||a.next===a.prev)return l;let u,d,p;if(n&&(a=$9(i,e,a,t)),i.length>80*t){u=1/0,d=1/0;let y=-1/0,_=-1/0;for(let S=t;S<s;S+=t){const T=i[S],M=i[S+1];T<u&&(u=T),M<d&&(d=M),T>y&&(y=T),M>_&&(_=M)}p=Math.max(y-u,_-d),p=p!==0?32767/p:0}return T_(a,l,t,u,d,p,0),l}function TU(i,e,t,n,s){let a;if(s===u7(i,e,t,n)>0)for(let l=e;l<t;l+=n)a=U2(l/n|0,i[l],i[l+1],a);else for(let l=t-n;l>=e;l-=n)a=U2(l/n|0,i[l],i[l+1],a);return a&&Vm(a,a.next)&&(A_(a),a=a.next),a}function xd(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(Vm(t,t.next)||ji(t.prev,t,t.next)===0)){if(A_(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function T_(i,e,t,n,s,a,l){if(!i)return;!l&&a&&s7(i,n,s,a);let u=i;for(;i.prev!==i.next;){const d=i.prev,p=i.next;if(a?Q9(i,n,s,a):K9(i)){e.push(d.i,i.i,p.i),A_(i),i=p.next,u=p.next;continue}if(i=p,i===u){l?l===1?(i=Z9(xd(i),e),T_(i,e,t,n,s,a,2)):l===2&&J9(i,e,t,n,s,a):T_(xd(i),e,t,n,s,a,1);break}}}function K9(i){const e=i.prev,t=i,n=i.next;if(ji(e,t,n)>=0)return!1;const s=e.x,a=t.x,l=n.x,u=e.y,d=t.y,p=n.y,y=Math.min(s,a,l),_=Math.min(u,d,p),S=Math.max(s,a,l),T=Math.max(u,d,p);let M=n.next;for(;M!==e;){if(M.x>=y&&M.x<=S&&M.y>=_&&M.y<=T&&zy(s,u,a,d,l,p,M.x,M.y)&&ji(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function Q9(i,e,t,n){const s=i.prev,a=i,l=i.next;if(ji(s,a,l)>=0)return!1;const u=s.x,d=a.x,p=l.x,y=s.y,_=a.y,S=l.y,T=Math.min(u,d,p),M=Math.min(y,_,S),C=Math.max(u,d,p),w=Math.max(y,_,S),b=kA(T,M,e,t,n),D=kA(C,w,e,t,n);let V=i.prevZ,z=i.nextZ;for(;V&&V.z>=b&&z&&z.z<=D;){if(V.x>=T&&V.x<=C&&V.y>=M&&V.y<=w&&V!==s&&V!==l&&zy(u,y,d,_,p,S,V.x,V.y)&&ji(V.prev,V,V.next)>=0||(V=V.prevZ,z.x>=T&&z.x<=C&&z.y>=M&&z.y<=w&&z!==s&&z!==l&&zy(u,y,d,_,p,S,z.x,z.y)&&ji(z.prev,z,z.next)>=0))return!1;z=z.nextZ}for(;V&&V.z>=b;){if(V.x>=T&&V.x<=C&&V.y>=M&&V.y<=w&&V!==s&&V!==l&&zy(u,y,d,_,p,S,V.x,V.y)&&ji(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;z&&z.z<=D;){if(z.x>=T&&z.x<=C&&z.y>=M&&z.y<=w&&z!==s&&z!==l&&zy(u,y,d,_,p,S,z.x,z.y)&&ji(z.prev,z,z.next)>=0)return!1;z=z.nextZ}return!0}function Z9(i,e){let t=i;do{const n=t.prev,s=t.next.next;!Vm(n,s)&&AU(n,t,t.next,s)&&b_(n,s)&&b_(s,n)&&(e.push(n.i,t.i,s.i),A_(t),A_(t.next),t=i=s),t=t.next}while(t!==i);return xd(t)}function J9(i,e,t,n,s,a){let l=i;do{let u=l.next.next;for(;u!==l.prev;){if(l.i!==u.i&&o7(l,u)){let d=MU(l,u);l=xd(l,l.next),d=xd(d,d.next),T_(l,e,t,n,s,a,0),T_(d,e,t,n,s,a,0);return}u=u.next}l=l.next}while(l!==i)}function $9(i,e,t,n){const s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a]*n,d=a<l-1?e[a+1]*n:i.length,p=TU(i,u,d,n,!1);p===p.next&&(p.steiner=!0),s.push(a7(p))}s.sort(e7);for(let a=0;a<s.length;a++)t=t7(s[a],t);return t}function e7(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(e.next.y-e.y)/(e.next.x-e.x);t=n-s}return t}function t7(i,e){const t=n7(i,e);if(!t)return e;const n=MU(t,i);return xd(n,n.next),xd(t,t.next)}function n7(i,e){let t=e;const n=i.x,s=i.y;let a=-1/0,l;if(Vm(i,t))return t;do{if(Vm(i,t.next))return t.next;if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const _=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(_<=n&&_>a&&(a=_,l=t.x<t.next.x?t:t.next,_===n))return l}t=t.next}while(t!==e);if(!l)return null;const u=l,d=l.x,p=l.y;let y=1/0;t=l;do{if(n>=t.x&&t.x>=d&&n!==t.x&&bU(s<p?n:a,s,d,p,s<p?a:n,s,t.x,t.y)){const _=Math.abs(s-t.y)/(n-t.x);b_(t,i)&&(_<y||_===y&&(t.x>l.x||t.x===l.x&&i7(l,t)))&&(l=t,y=_)}t=t.next}while(t!==u);return l}function i7(i,e){return ji(i.prev,i,e.prev)<0&&ji(e.next,i,i.next)<0}function s7(i,e,t,n){let s=i;do s.z===0&&(s.z=kA(s.x,s.y,e,t,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,r7(s)}function r7(i){let e,t=1;do{let n=i,s;i=null;let a=null;for(e=0;n;){e++;let l=n,u=0;for(let p=0;p<t&&(u++,l=l.nextZ,!!l);p++);let d=t;for(;u>0||d>0&&l;)u!==0&&(d===0||!l||n.z<=l.z)?(s=n,n=n.nextZ,u--):(s=l,l=l.nextZ,d--),a?a.nextZ=s:i=s,s.prevZ=a,a=s;n=l}a.nextZ=null,t*=2}while(e>1);return i}function kA(i,e,t,n,s){return i=(i-t)*s|0,e=(e-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function a7(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function bU(i,e,t,n,s,a,l,u){return(s-l)*(e-u)>=(i-l)*(a-u)&&(i-l)*(n-u)>=(t-l)*(e-u)&&(t-l)*(a-u)>=(s-l)*(n-u)}function zy(i,e,t,n,s,a,l,u){return!(i===l&&e===u)&&bU(i,e,t,n,s,a,l,u)}function o7(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!l7(i,e)&&(b_(i,e)&&b_(e,i)&&c7(i,e)&&(ji(i.prev,i,e.prev)||ji(i,e.prev,e))||Vm(i,e)&&ji(i.prev,i,i.next)>0&&ji(e.prev,e,e.next)>0)}function ji(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Vm(i,e){return i.x===e.x&&i.y===e.y}function AU(i,e,t,n){const s=Y0(ji(i,e,t)),a=Y0(ji(i,e,n)),l=Y0(ji(t,n,i)),u=Y0(ji(t,n,e));return!!(s!==a&&l!==u||s===0&&W0(i,t,e)||a===0&&W0(i,n,e)||l===0&&W0(t,i,n)||u===0&&W0(t,e,n))}function W0(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Y0(i){return i>0?1:i<0?-1:0}function l7(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&AU(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function b_(i,e){return ji(i.prev,i,i.next)<0?ji(i,e,i.next)>=0&&ji(i,i.prev,e)>=0:ji(i,e,i.prev)<0||ji(i,i.next,e)<0}function c7(i,e){let t=i,n=!1;const s=(i.x+e.x)/2,a=(i.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&s<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function MU(i,e){const t=GA(i.i,i.x,i.y),n=GA(e.i,e.x,e.y),s=i.next,a=e.prev;return i.next=e,e.prev=i,t.next=s,s.prev=t,n.next=t,t.prev=n,a.next=n,n.prev=a,n}function U2(i,e,t,n){const s=GA(i,e,t);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function A_(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function GA(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function u7(i,e,t,n){let s=0;for(let a=e,l=t-n;a<t;a+=n)s+=(i[l]-i[a])*(i[a+1]+i[l+1]),l=a;return s}class h7{static triangulate(e,t,n=2){return Y9(e,t,n)}}class dl{static area(e){const t=e.length;let n=0;for(let s=t-1,a=0;a<t;s=a++)n+=e[s].x*e[a].y-e[a].x*e[s].y;return n*.5}static isClockWise(e){return dl.area(e)<0}static triangulateShape(e,t){const n=[],s=[],a=[];L2(e),P2(n,e);let l=e.length;t.forEach(L2);for(let d=0;d<t.length;d++)s.push(l),l+=t[d].length,P2(n,t[d]);const u=h7.triangulate(n,s);for(let d=0;d<u.length;d+=3)a.push(u.slice(d,d+3));return a}}function L2(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function P2(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class Ux extends _n{constructor(e=new dd([new $e(.5,.5),new $e(-.5,.5),new $e(-.5,-.5),new $e(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,s=[],a=[];for(let u=0,d=e.length;u<d;u++){const p=e[u];l(p)}this.setAttribute("position",new Ot(s,3)),this.setAttribute("uv",new Ot(a,2)),this.computeVertexNormals();function l(u){const d=[],p=t.curveSegments!==void 0?t.curveSegments:12,y=t.steps!==void 0?t.steps:1,_=t.depth!==void 0?t.depth:1;let S=t.bevelEnabled!==void 0?t.bevelEnabled:!0,T=t.bevelThickness!==void 0?t.bevelThickness:.2,M=t.bevelSize!==void 0?t.bevelSize:T-.1,C=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const b=t.extrudePath,D=t.UVGenerator!==void 0?t.UVGenerator:f7;let V,z=!1,j,G,P,L;b&&(V=b.getSpacedPoints(y),z=!0,S=!1,j=b.computeFrenetFrames(y,!1),G=new ie,P=new ie,L=new ie),S||(w=0,T=0,M=0,C=0);const I=u.extractPoints(p);let O=I.shape;const F=I.holes;if(!dl.isClockWise(O)){O=O.reverse();for(let qe=0,ke=F.length;qe<ke;qe++){const Be=F[qe];dl.isClockWise(Be)&&(F[qe]=Be.reverse())}}function q(qe){const Be=10000000000000001e-36;let Ve=qe[0];for(let ut=1;ut<=qe.length;ut++){const je=ut%qe.length,Qe=qe[je],Vt=Qe.x-Ve.x,Wt=Qe.y-Ve.y,te=Vt*Vt+Wt*Wt,W=Math.max(Math.abs(Qe.x),Math.abs(Qe.y),Math.abs(Ve.x),Math.abs(Ve.y)),Se=Be*W*W;if(te<=Se){qe.splice(je,1),ut--;continue}Ve=Qe}}q(O),F.forEach(q);const de=F.length,ge=O;for(let qe=0;qe<de;qe++){const ke=F[qe];O=O.concat(ke)}function X(qe,ke,Be){return ke||console.error("THREE.ExtrudeGeometry: vec does not exist"),qe.clone().addScaledVector(ke,Be)}const ee=O.length;function ne(qe,ke,Be){let Ve,ut,je;const Qe=qe.x-ke.x,Vt=qe.y-ke.y,Wt=Be.x-qe.x,te=Be.y-qe.y,W=Qe*Qe+Vt*Vt,Se=Qe*te-Vt*Wt;if(Math.abs(Se)>Number.EPSILON){const Oe=Math.sqrt(W),Ze=Math.sqrt(Wt*Wt+te*te),Pe=ke.x-Vt/Oe,It=ke.y+Qe/Oe,lt=Be.x-te/Ze,Mt=Be.y+Wt/Ze,wt=((lt-Pe)*te-(Mt-It)*Wt)/(Qe*te-Vt*Wt);Ve=Pe+Qe*wt-qe.x,ut=It+Vt*wt-qe.y;const Ke=Ve*Ve+ut*ut;if(Ke<=2)return new $e(Ve,ut);je=Math.sqrt(Ke/2)}else{let Oe=!1;Qe>Number.EPSILON?Wt>Number.EPSILON&&(Oe=!0):Qe<-Number.EPSILON?Wt<-Number.EPSILON&&(Oe=!0):Math.sign(Vt)===Math.sign(te)&&(Oe=!0),Oe?(Ve=-Vt,ut=Qe,je=Math.sqrt(W)):(Ve=Qe,ut=Vt,je=Math.sqrt(W/2))}return new $e(Ve/je,ut/je)}const pe=[];for(let qe=0,ke=ge.length,Be=ke-1,Ve=qe+1;qe<ke;qe++,Be++,Ve++)Be===ke&&(Be=0),Ve===ke&&(Ve=0),pe[qe]=ne(ge[qe],ge[Be],ge[Ve]);const re=[];let J,le=pe.concat();for(let qe=0,ke=de;qe<ke;qe++){const Be=F[qe];J=[];for(let Ve=0,ut=Be.length,je=ut-1,Qe=Ve+1;Ve<ut;Ve++,je++,Qe++)je===ut&&(je=0),Qe===ut&&(Qe=0),J[Ve]=ne(Be[Ve],Be[je],Be[Qe]);re.push(J),le=le.concat(J)}let De;if(w===0)De=dl.triangulateShape(ge,F);else{const qe=[],ke=[];for(let Be=0;Be<w;Be++){const Ve=Be/w,ut=T*Math.cos(Ve*Math.PI/2),je=M*Math.sin(Ve*Math.PI/2)+C;for(let Qe=0,Vt=ge.length;Qe<Vt;Qe++){const Wt=X(ge[Qe],pe[Qe],je);pt(Wt.x,Wt.y,-ut),Ve===0&&qe.push(Wt)}for(let Qe=0,Vt=de;Qe<Vt;Qe++){const Wt=F[Qe];J=re[Qe];const te=[];for(let W=0,Se=Wt.length;W<Se;W++){const Oe=X(Wt[W],J[W],je);pt(Oe.x,Oe.y,-ut),Ve===0&&te.push(Oe)}Ve===0&&ke.push(te)}}De=dl.triangulateShape(qe,ke)}const Re=De.length,nt=M+C;for(let qe=0;qe<ee;qe++){const ke=S?X(O[qe],le[qe],nt):O[qe];z?(P.copy(j.normals[0]).multiplyScalar(ke.x),G.copy(j.binormals[0]).multiplyScalar(ke.y),L.copy(V[0]).add(P).add(G),pt(L.x,L.y,L.z)):pt(ke.x,ke.y,0)}for(let qe=1;qe<=y;qe++)for(let ke=0;ke<ee;ke++){const Be=S?X(O[ke],le[ke],nt):O[ke];z?(P.copy(j.normals[qe]).multiplyScalar(Be.x),G.copy(j.binormals[qe]).multiplyScalar(Be.y),L.copy(V[qe]).add(P).add(G),pt(L.x,L.y,L.z)):pt(Be.x,Be.y,_/y*qe)}for(let qe=w-1;qe>=0;qe--){const ke=qe/w,Be=T*Math.cos(ke*Math.PI/2),Ve=M*Math.sin(ke*Math.PI/2)+C;for(let ut=0,je=ge.length;ut<je;ut++){const Qe=X(ge[ut],pe[ut],Ve);pt(Qe.x,Qe.y,_+Be)}for(let ut=0,je=F.length;ut<je;ut++){const Qe=F[ut];J=re[ut];for(let Vt=0,Wt=Qe.length;Vt<Wt;Vt++){const te=X(Qe[Vt],J[Vt],Ve);z?pt(te.x,te.y+V[y-1].y,V[y-1].x+Be):pt(te.x,te.y,_+Be)}}}Te(),Le();function Te(){const qe=s.length/3;if(S){let ke=0,Be=ee*ke;for(let Ve=0;Ve<Re;Ve++){const ut=De[Ve];bt(ut[2]+Be,ut[1]+Be,ut[0]+Be)}ke=y+w*2,Be=ee*ke;for(let Ve=0;Ve<Re;Ve++){const ut=De[Ve];bt(ut[0]+Be,ut[1]+Be,ut[2]+Be)}}else{for(let ke=0;ke<Re;ke++){const Be=De[ke];bt(Be[2],Be[1],Be[0])}for(let ke=0;ke<Re;ke++){const Be=De[ke];bt(Be[0]+ee*y,Be[1]+ee*y,Be[2]+ee*y)}}n.addGroup(qe,s.length/3-qe,0)}function Le(){const qe=s.length/3;let ke=0;at(ge,ke),ke+=ge.length;for(let Be=0,Ve=F.length;Be<Ve;Be++){const ut=F[Be];at(ut,ke),ke+=ut.length}n.addGroup(qe,s.length/3-qe,1)}function at(qe,ke){let Be=qe.length;for(;--Be>=0;){const Ve=Be;let ut=Be-1;ut<0&&(ut=qe.length-1);for(let je=0,Qe=y+w*2;je<Qe;je++){const Vt=ee*je,Wt=ee*(je+1),te=ke+Ve+Vt,W=ke+ut+Vt,Se=ke+ut+Wt,Oe=ke+Ve+Wt;Zt(te,W,Se,Oe)}}}function pt(qe,ke,Be){d.push(qe),d.push(ke),d.push(Be)}function bt(qe,ke,Be){An(qe),An(ke),An(Be);const Ve=s.length/3,ut=D.generateTopUV(n,s,Ve-3,Ve-2,Ve-1);se(ut[0]),se(ut[1]),se(ut[2])}function Zt(qe,ke,Be,Ve){An(qe),An(ke),An(Ve),An(ke),An(Be),An(Ve);const ut=s.length/3,je=D.generateSideWallUV(n,s,ut-6,ut-3,ut-2,ut-1);se(je[0]),se(je[1]),se(je[3]),se(je[1]),se(je[2]),se(je[3])}function An(qe){s.push(d[qe*3+0]),s.push(d[qe*3+1]),s.push(d[qe*3+2])}function se(qe){a.push(qe.x),a.push(qe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return d7(t,n,e)}static fromJSON(e,t){const n=[];for(let a=0,l=e.shapes.length;a<l;a++){const u=t[e.shapes[a]];n.push(u)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new UE[s.type]().fromJSON(s)),new Ux(n,e.options)}}const f7={generateTopUV:function(i,e,t,n,s){const a=e[t*3],l=e[t*3+1],u=e[n*3],d=e[n*3+1],p=e[s*3],y=e[s*3+1];return[new $e(a,l),new $e(u,d),new $e(p,y)]},generateSideWallUV:function(i,e,t,n,s,a){const l=e[t*3],u=e[t*3+1],d=e[t*3+2],p=e[n*3],y=e[n*3+1],_=e[n*3+2],S=e[s*3],T=e[s*3+1],M=e[s*3+2],C=e[a*3],w=e[a*3+1],b=e[a*3+2];return Math.abs(u-y)<Math.abs(l-p)?[new $e(l,1-d),new $e(p,1-_),new $e(S,1-M),new $e(C,1-b)]:[new $e(u,1-d),new $e(y,1-_),new $e(T,1-M),new $e(w,1-b)]}};function d7(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const a=i[n];t.shapes.push(a.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Lx extends Qh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Lx(e.radius,e.detail)}}class Px extends _n{constructor(e=[new $e(0,-.5),new $e(.5,0),new $e(0,.5)],t=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:s},t=Math.floor(t),s=Jt(s,0,Math.PI*2);const a=[],l=[],u=[],d=[],p=[],y=1/t,_=new ie,S=new $e,T=new ie,M=new ie,C=new ie;let w=0,b=0;for(let D=0;D<=e.length-1;D++)switch(D){case 0:w=e[D+1].x-e[D].x,b=e[D+1].y-e[D].y,T.x=b*1,T.y=-w,T.z=b*0,C.copy(T),T.normalize(),d.push(T.x,T.y,T.z);break;case e.length-1:d.push(C.x,C.y,C.z);break;default:w=e[D+1].x-e[D].x,b=e[D+1].y-e[D].y,T.x=b*1,T.y=-w,T.z=b*0,M.copy(T),T.x+=C.x,T.y+=C.y,T.z+=C.z,T.normalize(),d.push(T.x,T.y,T.z),C.copy(M)}for(let D=0;D<=t;D++){const V=n+D*y*s,z=Math.sin(V),j=Math.cos(V);for(let G=0;G<=e.length-1;G++){_.x=e[G].x*z,_.y=e[G].y,_.z=e[G].x*j,l.push(_.x,_.y,_.z),S.x=D/t,S.y=G/(e.length-1),u.push(S.x,S.y);const P=d[3*G+0]*z,L=d[3*G+1],I=d[3*G+0]*j;p.push(P,L,I)}}for(let D=0;D<t;D++)for(let V=0;V<e.length-1;V++){const z=V+D*e.length,j=z,G=z+e.length,P=z+e.length+1,L=z+1;a.push(j,G,L),a.push(P,L,G)}this.setIndex(a),this.setAttribute("position",new Ot(l,3)),this.setAttribute("uv",new Ot(u,2)),this.setAttribute("normal",new Ot(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Px(e.points,e.segments,e.phiStart,e.phiLength)}}class Y_ extends Qh{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Y_(e.radius,e.detail)}}class tg extends _n{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const a=e/2,l=t/2,u=Math.floor(n),d=Math.floor(s),p=u+1,y=d+1,_=e/u,S=t/d,T=[],M=[],C=[],w=[];for(let b=0;b<y;b++){const D=b*S-l;for(let V=0;V<p;V++){const z=V*_-a;M.push(z,-D,0),C.push(0,0,1),w.push(V/u),w.push(1-b/d)}}for(let b=0;b<d;b++)for(let D=0;D<u;D++){const V=D+p*b,z=D+p*(b+1),j=D+1+p*(b+1),G=D+1+p*b;T.push(V,z,G),T.push(z,j,G)}this.setIndex(T),this.setAttribute("position",new Ot(M,3)),this.setAttribute("normal",new Ot(C,3)),this.setAttribute("uv",new Ot(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tg(e.width,e.height,e.widthSegments,e.heightSegments)}}class Vx extends _n{constructor(e=.5,t=1,n=32,s=1,a=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:s,thetaStart:a,thetaLength:l},n=Math.max(3,n),s=Math.max(1,s);const u=[],d=[],p=[],y=[];let _=e;const S=(t-e)/s,T=new ie,M=new $e;for(let C=0;C<=s;C++){for(let w=0;w<=n;w++){const b=a+w/n*l;T.x=_*Math.cos(b),T.y=_*Math.sin(b),d.push(T.x,T.y,T.z),p.push(0,0,1),M.x=(T.x/t+1)/2,M.y=(T.y/t+1)/2,y.push(M.x,M.y)}_+=S}for(let C=0;C<s;C++){const w=C*(n+1);for(let b=0;b<n;b++){const D=b+w,V=D,z=D+n+1,j=D+n+2,G=D+1;u.push(V,z,G),u.push(z,j,G)}}this.setIndex(u),this.setAttribute("position",new Ot(d,3)),this.setAttribute("normal",new Ot(p,3)),this.setAttribute("uv",new Ot(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vx(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class zx extends _n{constructor(e=new dd([new $e(0,.5),new $e(-.5,-.5),new $e(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],s=[],a=[],l=[];let u=0,d=0;if(Array.isArray(e)===!1)p(e);else for(let y=0;y<e.length;y++)p(e[y]),this.addGroup(u,d,y),u+=d,d=0;this.setIndex(n),this.setAttribute("position",new Ot(s,3)),this.setAttribute("normal",new Ot(a,3)),this.setAttribute("uv",new Ot(l,2));function p(y){const _=s.length/3,S=y.extractPoints(t);let T=S.shape;const M=S.holes;dl.isClockWise(T)===!1&&(T=T.reverse());for(let w=0,b=M.length;w<b;w++){const D=M[w];dl.isClockWise(D)===!0&&(M[w]=D.reverse())}const C=dl.triangulateShape(T,M);for(let w=0,b=M.length;w<b;w++){const D=M[w];T=T.concat(D)}for(let w=0,b=T.length;w<b;w++){const D=T[w];s.push(D.x,D.y,0),a.push(0,0,1),l.push(D.x,D.y)}for(let w=0,b=C.length;w<b;w++){const D=C[w],V=D[0]+_,z=D[1]+_,j=D[2]+_;n.push(V,z,j),d+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return p7(t,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const l=t[e.shapes[s]];n.push(l)}return new zx(n,e.curveSegments)}}function p7(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const s=i[t];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e}class K_ extends _n{constructor(e=1,t=32,n=16,s=0,a=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:s,phiLength:a,thetaStart:l,thetaLength:u},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const d=Math.min(l+u,Math.PI);let p=0;const y=[],_=new ie,S=new ie,T=[],M=[],C=[],w=[];for(let b=0;b<=n;b++){const D=[],V=b/n;let z=0;b===0&&l===0?z=.5/t:b===n&&d===Math.PI&&(z=-.5/t);for(let j=0;j<=t;j++){const G=j/t;_.x=-e*Math.cos(s+G*a)*Math.sin(l+V*u),_.y=e*Math.cos(l+V*u),_.z=e*Math.sin(s+G*a)*Math.sin(l+V*u),M.push(_.x,_.y,_.z),S.copy(_).normalize(),C.push(S.x,S.y,S.z),w.push(G+z,1-V),D.push(p++)}y.push(D)}for(let b=0;b<n;b++)for(let D=0;D<t;D++){const V=y[b][D+1],z=y[b][D],j=y[b+1][D],G=y[b+1][D+1];(b!==0||l>0)&&T.push(V,z,G),(b!==n-1||d<Math.PI)&&T.push(z,j,G)}this.setIndex(T),this.setAttribute("position",new Ot(M,3)),this.setAttribute("normal",new Ot(C,3)),this.setAttribute("uv",new Ot(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new K_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Bx extends Qh{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Bx(e.radius,e.detail)}}class Fx extends _n{constructor(e=1,t=.4,n=12,s=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:s,arc:a},n=Math.floor(n),s=Math.floor(s);const l=[],u=[],d=[],p=[],y=new ie,_=new ie,S=new ie;for(let T=0;T<=n;T++)for(let M=0;M<=s;M++){const C=M/s*a,w=T/n*Math.PI*2;_.x=(e+t*Math.cos(w))*Math.cos(C),_.y=(e+t*Math.cos(w))*Math.sin(C),_.z=t*Math.sin(w),u.push(_.x,_.y,_.z),y.x=e*Math.cos(C),y.y=e*Math.sin(C),S.subVectors(_,y).normalize(),d.push(S.x,S.y,S.z),p.push(M/s),p.push(T/n)}for(let T=1;T<=n;T++)for(let M=1;M<=s;M++){const C=(s+1)*T+M-1,w=(s+1)*(T-1)+M-1,b=(s+1)*(T-1)+M,D=(s+1)*T+M;l.push(C,w,D),l.push(w,b,D)}this.setIndex(l),this.setAttribute("position",new Ot(u,3)),this.setAttribute("normal",new Ot(d,3)),this.setAttribute("uv",new Ot(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fx(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Hx extends _n{constructor(e=1,t=.4,n=64,s=8,a=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:s,p:a,q:l},n=Math.floor(n),s=Math.floor(s);const u=[],d=[],p=[],y=[],_=new ie,S=new ie,T=new ie,M=new ie,C=new ie,w=new ie,b=new ie;for(let V=0;V<=n;++V){const z=V/n*a*Math.PI*2;D(z,a,l,e,T),D(z+.01,a,l,e,M),w.subVectors(M,T),b.addVectors(M,T),C.crossVectors(w,b),b.crossVectors(C,w),C.normalize(),b.normalize();for(let j=0;j<=s;++j){const G=j/s*Math.PI*2,P=-t*Math.cos(G),L=t*Math.sin(G);_.x=T.x+(P*b.x+L*C.x),_.y=T.y+(P*b.y+L*C.y),_.z=T.z+(P*b.z+L*C.z),d.push(_.x,_.y,_.z),S.subVectors(_,T).normalize(),p.push(S.x,S.y,S.z),y.push(V/n),y.push(j/s)}}for(let V=1;V<=n;V++)for(let z=1;z<=s;z++){const j=(s+1)*(V-1)+(z-1),G=(s+1)*V+(z-1),P=(s+1)*V+z,L=(s+1)*(V-1)+z;u.push(j,G,L),u.push(G,P,L)}this.setIndex(u),this.setAttribute("position",new Ot(d,3)),this.setAttribute("normal",new Ot(p,3)),this.setAttribute("uv",new Ot(y,2));function D(V,z,j,G,P){const L=Math.cos(V),I=Math.sin(V),O=j/z*V,F=Math.cos(O);P.x=G*(2+F)*.5*L,P.y=G*(2+F)*I*.5,P.z=G*Math.sin(O)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hx(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class kx extends _n{constructor(e=new L1(new ie(-1,-1,0),new ie(-1,1,0),new ie(1,1,0)),t=64,n=1,s=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:s,closed:a};const l=e.computeFrenetFrames(t,a);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const u=new ie,d=new ie,p=new $e;let y=new ie;const _=[],S=[],T=[],M=[];C(),this.setIndex(M),this.setAttribute("position",new Ot(_,3)),this.setAttribute("normal",new Ot(S,3)),this.setAttribute("uv",new Ot(T,2));function C(){for(let V=0;V<t;V++)w(V);w(a===!1?t:0),D(),b()}function w(V){y=e.getPointAt(V/t,y);const z=l.normals[V],j=l.binormals[V];for(let G=0;G<=s;G++){const P=G/s*Math.PI*2,L=Math.sin(P),I=-Math.cos(P);d.x=I*z.x+L*j.x,d.y=I*z.y+L*j.y,d.z=I*z.z+L*j.z,d.normalize(),S.push(d.x,d.y,d.z),u.x=y.x+n*d.x,u.y=y.y+n*d.y,u.z=y.z+n*d.z,_.push(u.x,u.y,u.z)}}function b(){for(let V=1;V<=t;V++)for(let z=1;z<=s;z++){const j=(s+1)*(V-1)+(z-1),G=(s+1)*V+(z-1),P=(s+1)*V+z,L=(s+1)*(V-1)+z;M.push(j,G,L),M.push(G,P,L)}}function D(){for(let V=0;V<=t;V++)for(let z=0;z<=s;z++)p.x=V/t,p.y=z/s,T.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new kx(new UE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class wU extends _n{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,s=new ie,a=new ie;if(e.index!==null){const l=e.attributes.position,u=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:u.count,materialIndex:0}]);for(let p=0,y=d.length;p<y;++p){const _=d[p],S=_.start,T=_.count;for(let M=S,C=S+T;M<C;M+=3)for(let w=0;w<3;w++){const b=u.getX(M+w),D=u.getX(M+(w+1)%3);s.fromBufferAttribute(l,b),a.fromBufferAttribute(l,D),V2(s,a,n)===!0&&(t.push(s.x,s.y,s.z),t.push(a.x,a.y,a.z))}}}else{const l=e.attributes.position;for(let u=0,d=l.count/3;u<d;u++)for(let p=0;p<3;p++){const y=3*u+p,_=3*u+(p+1)%3;s.fromBufferAttribute(l,y),a.fromBufferAttribute(l,_),V2(s,a,n)===!0&&(t.push(s.x,s.y,s.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Ot(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function V2(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(s)===!0?!1:(t.add(n),t.add(s),!0)}var z2=Object.freeze({__proto__:null,BoxGeometry:Ud,CapsuleGeometry:Ix,CircleGeometry:Dx,ConeGeometry:W_,CylinderGeometry:X_,DodecahedronGeometry:Nx,EdgesGeometry:yU,ExtrudeGeometry:Ux,IcosahedronGeometry:Lx,LatheGeometry:Px,OctahedronGeometry:Y_,PlaneGeometry:tg,PolyhedronGeometry:Qh,RingGeometry:Vx,ShapeGeometry:zx,SphereGeometry:K_,TetrahedronGeometry:Bx,TorusGeometry:Fx,TorusKnotGeometry:Hx,TubeGeometry:kx,WireframeGeometry:wU});class RU extends Lr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new At(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class CU extends vl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class V1 extends Lr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new At(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yh,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $a,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class IU extends V1{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new $e(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Jt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new At(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new At(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new At(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class DU extends Lr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new At(16777215),this.specular=new At(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yh,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $a,this.combine=G_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class NU extends Lr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new At(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yh,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class OU extends Lr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yh,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class UU extends Lr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new At(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yh,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $a,this.combine=G_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class z1 extends Lr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=jO,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class B1 extends Lr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class LU extends Lr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new At(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yh,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class PU extends la{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function cd(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function VU(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function zU(i){function e(s,a){return i[s]-i[a]}const t=i.length,n=new Array(t);for(let s=0;s!==t;++s)n[s]=s;return n.sort(e),n}function jA(i,e,t){const n=i.length,s=new i.constructor(n);for(let a=0,l=0;l!==n;++a){const u=t[a]*e;for(let d=0;d!==e;++d)s[l++]=i[u+d]}return s}function F1(i,e,t,n){let s=1,a=i[0];for(;a!==void 0&&a[n]===void 0;)a=i[s++];if(a===void 0)return;let l=a[n];if(l!==void 0)if(Array.isArray(l))do l=a[n],l!==void 0&&(e.push(a.time),t.push(...l)),a=i[s++];while(a!==void 0);else if(l.toArray!==void 0)do l=a[n],l!==void 0&&(e.push(a.time),l.toArray(t,t.length)),a=i[s++];while(a!==void 0);else do l=a[n],l!==void 0&&(e.push(a.time),t.push(l)),a=i[s++];while(a!==void 0)}function m7(i,e,t,n,s=30){const a=i.clone();a.name=e;const l=[];for(let d=0;d<a.tracks.length;++d){const p=a.tracks[d],y=p.getValueSize(),_=[],S=[];for(let T=0;T<p.times.length;++T){const M=p.times[T]*s;if(!(M<t||M>=n)){_.push(p.times[T]);for(let C=0;C<y;++C)S.push(p.values[T*y+C])}}_.length!==0&&(p.times=cd(_,p.times.constructor),p.values=cd(S,p.values.constructor),l.push(p))}a.tracks=l;let u=1/0;for(let d=0;d<a.tracks.length;++d)u>a.tracks[d].times[0]&&(u=a.tracks[d].times[0]);for(let d=0;d<a.tracks.length;++d)a.tracks[d].shift(-1*u);return a.resetDuration(),a}function g7(i,e=0,t=i,n=30){n<=0&&(n=30);const s=t.tracks.length,a=e/n;for(let l=0;l<s;++l){const u=t.tracks[l],d=u.ValueTypeName;if(d==="bool"||d==="string")continue;const p=i.tracks.find(function(b){return b.name===u.name&&b.ValueTypeName===d});if(p===void 0)continue;let y=0;const _=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=_/3);let S=0;const T=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(S=T/3);const M=u.times.length-1;let C;if(a<=u.times[0]){const b=y,D=_-y;C=u.values.slice(b,D)}else if(a>=u.times[M]){const b=M*_+y,D=b+_-y;C=u.values.slice(b,D)}else{const b=u.createInterpolant(),D=y,V=_-y;b.evaluate(a),C=b.resultBuffer.slice(D,V)}d==="quaternion"&&new Ra().fromArray(C).normalize().conjugate().toArray(C);const w=p.times.length;for(let b=0;b<w;++b){const D=b*T+S;if(d==="quaternion")Ra.multiplyQuaternionsFlat(p.values,D,C,0,p.values,D);else{const V=T-S*2;for(let z=0;z<V;++z)p.values[D+z]-=C[z]}}}return i.blendMode=v1,i}class y7{static convertArray(e,t){return cd(e,t)}static isTypedArray(e){return VU(e)}static getKeyframeOrder(e){return zU(e)}static sortedArray(e,t,n){return jA(e,t,n)}static flattenJSON(e,t,n,s){F1(e,t,n,s)}static subclip(e,t,n,s,a=30){return m7(e,t,n,s,a)}static makeClipAdditive(e,t=0,n=e,s=30){return g7(e,t,n,s)}}class Q_{constructor(e,t,n,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,s=t[n],a=t[n-1];e:{t:{let l;n:{i:if(!(e<s)){for(let u=n+2;;){if(s===void 0){if(e<a)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===u)break;if(a=s,s=t[++n],e<s)break t}l=t.length;break n}if(!(e>=a)){const u=t[1];e<u&&(n=2,a=u);for(let d=n-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===d)break;if(s=a,a=t[--n-1],e>=a)break t}l=n,n=0;break n}break e}for(;n<l;){const u=n+l>>>1;e<t[u]?l=u:n=u+1}if(s=t[n],a=t[n-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,s)}return this.interpolate_(n,a,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,a=e*s;for(let l=0;l!==s;++l)t[l]=n[a+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class BU extends Q_{constructor(e,t,n,s){super(e,t,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:od,endingEnd:od}}intervalChanged_(e,t,n){const s=this.parameterPositions;let a=e-2,l=e+1,u=s[a],d=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case ld:a=e,u=2*t-n;break;case __:a=s.length-2,u=t+s[a]-s[a+1];break;default:a=e,u=n}if(d===void 0)switch(this.getSettings_().endingEnd){case ld:l=e,d=2*n-t;break;case __:l=1,d=n+s[1]-s[0];break;default:l=e-1,d=t}const p=(n-t)*.5,y=this.valueSize;this._weightPrev=p/(t-u),this._weightNext=p/(d-n),this._offsetPrev=a*y,this._offsetNext=l*y}interpolate_(e,t,n,s){const a=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,y=this._offsetPrev,_=this._offsetNext,S=this._weightPrev,T=this._weightNext,M=(n-t)/(s-t),C=M*M,w=C*M,b=-S*w+2*S*C-S*M,D=(1+S)*w+(-1.5-2*S)*C+(-.5+S)*M+1,V=(-1-T)*w+(1.5+T)*C+.5*M,z=T*w-T*C;for(let j=0;j!==u;++j)a[j]=b*l[y+j]+D*l[p+j]+V*l[d+j]+z*l[_+j];return a}}class H1 extends Q_{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const a=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,y=(n-t)/(s-t),_=1-y;for(let S=0;S!==u;++S)a[S]=l[p+S]*_+l[d+S]*y;return a}}class FU extends Q_{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Do{constructor(e,t,n,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=cd(t,this.TimeBufferType),this.values=cd(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:cd(e.times,Array),values:cd(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(n.interpolation=s)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new FU(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new H1(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new BU(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case y_:t=this.InterpolantFactoryMethodDiscrete;break;case DE:t=this.InterpolantFactoryMethodLinear;break;case xS:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return y_;case this.InterpolantFactoryMethodLinear:return DE;case this.InterpolantFactoryMethodSmooth:return xS}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]*=e}return this}trim(e,t){const n=this.times,s=n.length;let a=0,l=s-1;for(;a!==s&&n[a]<e;)++a;for(;l!==-1&&n[l]>t;)--l;if(++l,a!==0||l!==s){a>=l&&(l=Math.max(l,1),a=l-1);const u=this.getValueSize();this.times=n.slice(a,l),this.values=this.values.slice(a*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,s=this.values,a=n.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==a;u++){const d=n[u];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,d),e=!1;break}if(l!==null&&l>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,d,l),e=!1;break}l=d}if(s!==void 0&&VU(s))for(let u=0,d=s.length;u!==d;++u){const p=s[u];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===xS,a=e.length-1;let l=1;for(let u=1;u<a;++u){let d=!1;const p=e[u],y=e[u+1];if(p!==y&&(u!==1||p!==e[0]))if(s)d=!0;else{const _=u*n,S=_-n,T=_+n;for(let M=0;M!==n;++M){const C=t[_+M];if(C!==t[S+M]||C!==t[T+M]){d=!0;break}}}if(d){if(u!==l){e[l]=e[u];const _=u*n,S=l*n;for(let T=0;T!==n;++T)t[S+T]=t[_+T]}++l}}if(a>0){e[l]=e[a];for(let u=a*n,d=l*n,p=0;p!==n;++p)t[d+p]=t[u+p];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,s=new n(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Do.prototype.ValueTypeName="";Do.prototype.TimeBufferType=Float32Array;Do.prototype.ValueBufferType=Float32Array;Do.prototype.DefaultInterpolation=DE;class Ld extends Do{constructor(e,t,n){super(e,t,n)}}Ld.prototype.ValueTypeName="bool";Ld.prototype.ValueBufferType=Array;Ld.prototype.DefaultInterpolation=y_;Ld.prototype.InterpolantFactoryMethodLinear=void 0;Ld.prototype.InterpolantFactoryMethodSmooth=void 0;class k1 extends Do{constructor(e,t,n,s){super(e,t,n,s)}}k1.prototype.ValueTypeName="color";class M_ extends Do{constructor(e,t,n,s){super(e,t,n,s)}}M_.prototype.ValueTypeName="number";class HU extends Q_{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const a=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=(n-t)/(s-t);let p=e*u;for(let y=p+u;p!==y;p+=4)Ra.slerpFlat(a,0,l,p-u,l,p,d);return a}}class Z_ extends Do{constructor(e,t,n,s){super(e,t,n,s)}InterpolantFactoryMethodLinear(e){return new HU(this.times,this.values,this.getValueSize(),e)}}Z_.prototype.ValueTypeName="quaternion";Z_.prototype.InterpolantFactoryMethodSmooth=void 0;class Pd extends Do{constructor(e,t,n){super(e,t,n)}}Pd.prototype.ValueTypeName="string";Pd.prototype.ValueBufferType=Array;Pd.prototype.DefaultInterpolation=y_;Pd.prototype.InterpolantFactoryMethodLinear=void 0;Pd.prototype.InterpolantFactoryMethodSmooth=void 0;class w_ extends Do{constructor(e,t,n,s){super(e,t,n,s)}}w_.prototype.ValueTypeName="vector";class R_{constructor(e="",t=-1,n=[],s=Sx){this.name=e,this.tracks=n,this.duration=t,this.blendMode=s,this.uuid=Ja(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,s=1/(e.fps||1);for(let l=0,u=n.length;l!==u;++l)t.push(v7(n[l]).scale(s));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],n=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,l=n.length;a!==l;++a)t.push(Do.toJSON(n[a]));return s}static CreateFromMorphTargetSequence(e,t,n,s){const a=t.length,l=[];for(let u=0;u<a;u++){let d=[],p=[];d.push((u+a-1)%a,u,(u+1)%a),p.push(0,1,0);const y=zU(d);d=jA(d,1,y),p=jA(p,1,y),!s&&d[0]===0&&(d.push(a),p.push(p[0])),l.push(new M_(".morphTargetInfluences["+t[u].name+"]",d,p).scale(1/n))}return new this(e,-1,l)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const s=e;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===t)return n[s];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const s={},a=/^([\w-]*?)([\d]+)$/;for(let u=0,d=e.length;u<d;u++){const p=e[u],y=p.name.match(a);if(y&&y.length>1){const _=y[1];let S=s[_];S||(s[_]=S=[]),S.push(p)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,n));return l}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(_,S,T,M,C){if(T.length!==0){const w=[],b=[];F1(T,w,b,M),w.length!==0&&C.push(new _(S,w,b))}},s=[],a=e.name||"default",l=e.fps||30,u=e.blendMode;let d=e.length||-1;const p=e.hierarchy||[];for(let _=0;_<p.length;_++){const S=p[_].keys;if(!(!S||S.length===0))if(S[0].morphTargets){const T={};let M;for(M=0;M<S.length;M++)if(S[M].morphTargets)for(let C=0;C<S[M].morphTargets.length;C++)T[S[M].morphTargets[C]]=-1;for(const C in T){const w=[],b=[];for(let D=0;D!==S[M].morphTargets.length;++D){const V=S[M];w.push(V.time),b.push(V.morphTarget===C?1:0)}s.push(new M_(".morphTargetInfluence["+C+"]",w,b))}d=T.length*l}else{const T=".bones["+t[_].name+"]";n(w_,T+".position",S,"pos",s),n(Z_,T+".quaternion",S,"rot",s),n(w_,T+".scale",S,"scl",s)}}return s.length===0?null:new this(a,d,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,s=e.length;n!==s;++n){const a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function _7(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return M_;case"vector":case"vector2":case"vector3":case"vector4":return w_;case"color":return k1;case"quaternion":return Z_;case"bool":case"boolean":return Ld;case"string":return Pd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function v7(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=_7(i.type);if(i.times===void 0){const t=[],n=[];F1(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const oc={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class G1{constructor(e,t,n){const s=this;let a=!1,l=0,u=0,d;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.abortController=new AbortController,this.itemStart=function(y){u++,a===!1&&s.onStart!==void 0&&s.onStart(y,l,u),a=!0},this.itemEnd=function(y){l++,s.onProgress!==void 0&&s.onProgress(y,l,u),l===u&&(a=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(y){s.onError!==void 0&&s.onError(y)},this.resolveURL=function(y){return d?d(y):y},this.setURLModifier=function(y){return d=y,this},this.addHandler=function(y,_){return p.push(y,_),this},this.removeHandler=function(y){const _=p.indexOf(y);return _!==-1&&p.splice(_,2),this},this.getHandler=function(y){for(let _=0,S=p.length;_<S;_+=2){const T=p[_],M=p[_+1];if(T.global&&(T.lastIndex=0),T.test(y))return M}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const kU=new G1;class Ca{constructor(e){this.manager=e!==void 0?e:kU,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,a){n.load(e,s,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Ca.DEFAULT_MATERIAL_NAME="__DEFAULT";const iu={};class S7 extends Error{constructor(e,t){super(e),this.response=t}}class Eu extends Ca{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=oc.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(iu[e]!==void 0){iu[e].push({onLoad:t,onProgress:n,onError:s});return}iu[e]=[],iu[e].push({onLoad:t,onProgress:n,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),u=this.mimeType,d=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const y=iu[e],_=p.body.getReader(),S=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),T=S?parseInt(S):0,M=T!==0;let C=0;const w=new ReadableStream({start(b){D();function D(){_.read().then(({done:V,value:z})=>{if(V)b.close();else{C+=z.byteLength;const j=new ProgressEvent("progress",{lengthComputable:M,loaded:C,total:T});for(let G=0,P=y.length;G<P;G++){const L=y[G];L.onProgress&&L.onProgress(j)}b.enqueue(z),D()}},V=>{b.error(V)})}}});return new Response(w)}else throw new S7(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(y=>new DOMParser().parseFromString(y,u));case"json":return p.json();default:if(u==="")return p.text();{const _=/charset="?([^;"\s]*)"?/i.exec(u),S=_&&_[1]?_[1].toLowerCase():void 0,T=new TextDecoder(S);return p.arrayBuffer().then(M=>T.decode(M))}}}).then(p=>{oc.add(`file:${e}`,p);const y=iu[e];delete iu[e];for(let _=0,S=y.length;_<S;_++){const T=y[_];T.onLoad&&T.onLoad(p)}}).catch(p=>{const y=iu[e];if(y===void 0)throw this.manager.itemError(e),p;delete iu[e];for(let _=0,S=y.length;_<S;_++){const T=y[_];T.onError&&T.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class E7 extends Ca{constructor(e){super(e)}load(e,t,n,s){const a=this,l=new Eu(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{t(a.parse(JSON.parse(u)))}catch(d){s?s(d):console.error(d),a.manager.itemError(e)}},n,s)}parse(e){const t=[];for(let n=0;n<e.length;n++){const s=R_.parse(e[n]);t.push(s)}return t}}class x7 extends Ca{constructor(e){super(e)}load(e,t,n,s){const a=this,l=[],u=new Cx,d=new Eu(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(a.withCredentials);let p=0;function y(_){d.load(e[_],function(S){const T=a.parse(S,!0);l[_]={width:T.width,height:T.height,format:T.format,mipmaps:T.mipmaps},p+=1,p===6&&(T.mipmapCount===1&&(u.minFilter=ws),u.image=l,u.format=T.format,u.needsUpdate=!0,t&&t(u))},n,s)}if(Array.isArray(e))for(let _=0,S=e.length;_<S;++_)y(_);else d.load(e,function(_){const S=a.parse(_,!0);if(S.isCubemap){const T=S.mipmaps.length/S.mipmapCount;for(let M=0;M<T;M++){l[M]={mipmaps:[]};for(let C=0;C<S.mipmapCount;C++)l[M].mipmaps.push(S.mipmaps[M*S.mipmapCount+C]),l[M].format=S.format,l[M].width=S.width,l[M].height=S.height}u.image=l}else u.image.width=S.width,u.image.height=S.height,u.mipmaps=S.mipmaps;S.mipmapCount===1&&(u.minFilter=ws),u.format=S.format,u.needsUpdate=!0,t&&t(u)},n,s);return u}}const Qp=new WeakMap;class C_ extends Ca{constructor(e){super(e)}load(e,t,n,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=oc.get(`image:${e}`);if(l!==void 0){if(l.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0);else{let _=Qp.get(l);_===void 0&&(_=[],Qp.set(l,_)),_.push({onLoad:t,onError:s})}return l}const u=E_("img");function d(){y(),t&&t(this);const _=Qp.get(this)||[];for(let S=0;S<_.length;S++){const T=_[S];T.onLoad&&T.onLoad(this)}Qp.delete(this),a.manager.itemEnd(e)}function p(_){y(),s&&s(_),oc.remove(`image:${e}`);const S=Qp.get(this)||[];for(let T=0;T<S.length;T++){const M=S[T];M.onError&&M.onError(_)}Qp.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function y(){u.removeEventListener("load",d,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",d,!1),u.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),oc.add(`image:${e}`,u),a.manager.itemStart(e),u.src=e,u}}class T7 extends Ca{constructor(e){super(e)}load(e,t,n,s){const a=new q_;a.colorSpace=Ir;const l=new C_(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let u=0;function d(p){l.load(e[p],function(y){a.images[p]=y,u++,u===6&&(a.needsUpdate=!0,t&&t(a))},void 0,s)}for(let p=0;p<e.length;++p)d(p);return a}}class b7 extends Ca{constructor(e){super(e)}load(e,t,n,s){const a=this,l=new mc,u=new Eu(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(a.withCredentials),u.load(e,function(d){let p;try{p=a.parse(d)}catch(y){if(s!==void 0)s(y);else{console.error(y);return}}p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:Ro,l.wrapT=p.wrapT!==void 0?p.wrapT:Ro,l.magFilter=p.magFilter!==void 0?p.magFilter:ws,l.minFilter=p.minFilter!==void 0?p.minFilter:ws,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(l.colorSpace=p.colorSpace),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=ac),p.mipmapCount===1&&(l.minFilter=ws),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,t&&t(l,p)},n,s),l}}class A7 extends Ca{constructor(e){super(e)}load(e,t,n,s){const a=new Ji,l=new C_(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){a.image=u,a.needsUpdate=!0,t!==void 0&&t(a)},n,s),a}}class Zh extends Kn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new At(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class GU extends Zh{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Kn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new At(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Rb=new tn,B2=new ie,F2=new ie;class j1{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new $e(512,512),this.mapType=Io,this.map=null,this.mapPass=null,this.matrix=new tn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new eg,this._frameExtents=new $e(1,1),this._viewportCount=1,this._viewports=[new Yn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;B2.setFromMatrixPosition(e.matrixWorld),t.position.copy(B2),F2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(F2),t.updateMatrixWorld(),Rb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Rb,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Rb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class M7 extends j1{constructor(){super(new ks(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=Om*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(n!==t.fov||s!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=s,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class jU extends Zh{constructor(e,t,n=0,s=Math.PI/3,a=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Kn.DEFAULT_UP),this.updateMatrix(),this.target=new Kn,this.distance=n,this.angle=s,this.penumbra=a,this.decay=l,this.map=null,this.shadow=new M7}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const H2=new tn,Iy=new ie,Cb=new ie;class w7 extends j1{constructor(){super(new ks(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new $e(4,2),this._viewportCount=6,this._viewports=[new Yn(2,1,1,1),new Yn(0,1,1,1),new Yn(3,1,1,1),new Yn(1,1,1,1),new Yn(3,0,1,1),new Yn(1,0,1,1)],this._cubeDirections=[new ie(1,0,0),new ie(-1,0,0),new ie(0,0,1),new ie(0,0,-1),new ie(0,1,0),new ie(0,-1,0)],this._cubeUps=[new ie(0,1,0),new ie(0,1,0),new ie(0,1,0),new ie(0,1,0),new ie(0,0,1),new ie(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,s=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),Iy.setFromMatrixPosition(e.matrixWorld),n.position.copy(Iy),Cb.copy(n.position),Cb.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Cb),n.updateMatrixWorld(),s.makeTranslation(-Iy.x,-Iy.y,-Iy.z),H2.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(H2,n.coordinateSystem,n.reversedDepth)}}class qU extends Zh{constructor(e,t,n=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new w7}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class J_ extends Tx{constructor(e=-1,t=1,n=1,s=-1,a=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=a,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,a,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let a=n-e,l=n+e,u=s+t,d=s-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=p*this.view.offsetX,l=a+p*this.view.width,u-=y*this.view.offsetY,d=u-y*this.view.height}this.projectionMatrix.makeOrthographic(a,l,u,d,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class R7 extends j1{constructor(){super(new J_(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class XU extends Zh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Kn.DEFAULT_UP),this.updateMatrix(),this.target=new Kn,this.shadow=new R7}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class WU extends Zh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class YU extends Zh{constructor(e,t,n=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class KU{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ie)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,s=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*s),t.addScaledVector(l[2],.488603*a),t.addScaledVector(l[3],.488603*n),t.addScaledVector(l[4],1.092548*(n*s)),t.addScaledVector(l[5],1.092548*(s*a)),t.addScaledVector(l[6],.315392*(3*a*a-1)),t.addScaledVector(l[7],1.092548*(n*a)),t.addScaledVector(l[8],.546274*(n*n-s*s)),t}getIrradianceAt(e,t){const n=e.x,s=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*s),t.addScaledVector(l[2],2*.511664*a),t.addScaledVector(l[3],2*.511664*n),t.addScaledVector(l[4],2*.429043*n*s),t.addScaledVector(l[5],2*.429043*s*a),t.addScaledVector(l[6],.743125*a*a-.247708),t.addScaledVector(l[7],2*.429043*n*a),t.addScaledVector(l[8],.429043*(n*n-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const n=e.x,s=e.y,a=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*s,t[5]=1.092548*s*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-s*s)}}class QU extends Zh{constructor(e=new KU,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Gx extends Ca{constructor(e){super(e),this.textures={}}load(e,t,n,s){const a=this,l=new Eu(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(u){try{t(a.parse(JSON.parse(u)))}catch(d){s?s(d):console.error(d),a.manager.itemError(e)}},n,s)}parse(e){const t=this.textures;function n(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new At().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const l=e.uniforms[a];switch(s.uniforms[a]={},l.type){case"t":s.uniforms[a].value=n(l.value);break;case"c":s.uniforms[a].value=new At().setHex(l.value);break;case"v2":s.uniforms[a].value=new $e().fromArray(l.value);break;case"v3":s.uniforms[a].value=new ie().fromArray(l.value);break;case"v4":s.uniforms[a].value=new Yn().fromArray(l.value);break;case"m3":s.uniforms[a].value=new mn().fromArray(l.value);break;case"m4":s.uniforms[a].value=new tn().fromArray(l.value);break;default:s.uniforms[a].value=l.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)s.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=n(e.map)),e.matcap!==void 0&&(s.matcap=n(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),s.normalScale=new $e().fromArray(a)}return e.displacementMap!==void 0&&(s.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=n(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new $e().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Gx.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:RU,SpriteMaterial:M1,RawShaderMaterial:CU,ShaderMaterial:vl,PointsMaterial:R1,MeshPhysicalMaterial:IU,MeshStandardMaterial:V1,MeshPhongMaterial:DU,MeshToonMaterial:NU,MeshNormalMaterial:OU,MeshLambertMaterial:UU,MeshDepthMaterial:z1,MeshDistanceMaterial:B1,MeshBasicMaterial:Kh,MeshMatcapMaterial:LU,LineDashedMaterial:PU,LineBasicMaterial:la,Material:Lr};return new t[e]}}class qA{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ZU extends _n{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class JU extends Ca{constructor(e){super(e)}load(e,t,n,s){const a=this,l=new Eu(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(u){try{t(a.parse(JSON.parse(u)))}catch(d){s?s(d):console.error(d),a.manager.itemError(e)}},n,s)}parse(e){const t={},n={};function s(T,M){if(t[M]!==void 0)return t[M];const w=T.interleavedBuffers[M],b=a(T,w.buffer),D=hm(w.type,b),V=new Mx(D,w.stride);return V.uuid=w.uuid,t[M]=V,V}function a(T,M){if(n[M]!==void 0)return n[M];const w=T.arrayBuffers[M],b=new Uint32Array(w).buffer;return n[M]=b,b}const l=e.isInstancedBufferGeometry?new ZU:new _n,u=e.data.index;if(u!==void 0){const T=hm(u.type,u.array);l.setIndex(new mi(T,1))}const d=e.data.attributes;for(const T in d){const M=d[T];let C;if(M.isInterleavedBufferAttribute){const w=s(e.data,M.data);C=new Ed(w,M.itemSize,M.offset,M.normalized)}else{const w=hm(M.type,M.array),b=M.isInstancedBufferAttribute?Pm:mi;C=new b(w,M.itemSize,M.normalized)}M.name!==void 0&&(C.name=M.name),M.usage!==void 0&&C.setUsage(M.usage),l.setAttribute(T,C)}const p=e.data.morphAttributes;if(p)for(const T in p){const M=p[T],C=[];for(let w=0,b=M.length;w<b;w++){const D=M[w];let V;if(D.isInterleavedBufferAttribute){const z=s(e.data,D.data);V=new Ed(z,D.itemSize,D.offset,D.normalized)}else{const z=hm(D.type,D.array);V=new mi(z,D.itemSize,D.normalized)}D.name!==void 0&&(V.name=D.name),C.push(V)}l.morphAttributes[T]=C}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const _=e.data.groups||e.data.drawcalls||e.data.offsets;if(_!==void 0)for(let T=0,M=_.length;T!==M;++T){const C=_[T];l.addGroup(C.start,C.count,C.materialIndex)}const S=e.data.boundingSphere;return S!==void 0&&(l.boundingSphere=new ar().fromJSON(S)),e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class C7 extends Ca{constructor(e){super(e)}load(e,t,n,s){const a=this,l=this.path===""?qA.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const u=new Eu(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(d){let p=null;try{p=JSON.parse(d)}catch(_){s!==void 0&&s(_),console.error("THREE:ObjectLoader: Can't parse "+e+".",_.message);return}const y=p.metadata;if(y===void 0||y.type===void 0||y.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(p,t)},n,s)}async loadAsync(e,t){const n=this,s=this.path===""?qA.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new Eu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const l=await a.loadAsync(e,t),u=JSON.parse(l),d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(u)}parse(e,t){const n=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,s),l=this.parseImages(e.images,function(){t!==void 0&&t(p)}),u=this.parseTextures(e.textures,l),d=this.parseMaterials(e.materials,u),p=this.parseObject(e.object,a,d,u,n),y=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,y),this.bindLightTargets(p),t!==void 0){let _=!1;for(const S in l)if(l[S].data instanceof HTMLImageElement){_=!0;break}_===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),a=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,a),u=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,s,u,l,t),p=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,p),this.bindLightTargets(d),d}parseShapes(e){const t={};if(e!==void 0)for(let n=0,s=e.length;n<s;n++){const a=new dd().fromJSON(e[n]);t[a.uuid]=a}return t}parseSkeletons(e,t){const n={},s={};if(t.traverse(function(a){a.isBone&&(s[a.uuid]=a)}),e!==void 0)for(let a=0,l=e.length;a<l;a++){const u=new wx().fromJSON(e[a],s);n[u.uuid]=u}return n}parseGeometries(e,t){const n={};if(e!==void 0){const s=new JU;for(let a=0,l=e.length;a<l;a++){let u;const d=e[a];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":u=s.parse(d);break;default:d.type in z2?u=z2[d.type].fromJSON(d,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}u.uuid=d.uuid,d.name!==void 0&&(u.name=d.name),d.userData!==void 0&&(u.userData=d.userData),n[d.uuid]=u}}return n}parseMaterials(e,t){const n={},s={};if(e!==void 0){const a=new Gx;a.setTextures(t);for(let l=0,u=e.length;l<u;l++){const d=e[l];n[d.uuid]===void 0&&(n[d.uuid]=a.parse(d)),s[d.uuid]=n[d.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const s=e[n],a=R_.parse(s);t[a.uuid]=a}return t}parseImages(e,t){const n=this,s={};let a;function l(d){return n.manager.itemStart(d),a.load(d,function(){n.manager.itemEnd(d)},void 0,function(){n.manager.itemError(d),n.manager.itemEnd(d)})}function u(d){if(typeof d=="string"){const p=d,y=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;return l(y)}else return d.data?{data:hm(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new G1(t);a=new C_(d),a.setCrossOrigin(this.crossOrigin);for(let p=0,y=e.length;p<y;p++){const _=e[p],S=_.url;if(Array.isArray(S)){const T=[];for(let M=0,C=S.length;M<C;M++){const w=S[M],b=u(w);b!==null&&(b instanceof HTMLImageElement?T.push(b):T.push(new mc(b.data,b.width,b.height)))}s[_.uuid]=new Dh(T)}else{const T=u(_.url);s[_.uuid]=new Dh(T)}}}return s}async parseImagesAsync(e){const t=this,n={};let s;async function a(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await s.loadAsync(d)}else return l.data?{data:hm(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){s=new C_(this.manager),s.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const d=e[l],p=d.url;if(Array.isArray(p)){const y=[];for(let _=0,S=p.length;_<S;_++){const T=p[_],M=await a(T);M!==null&&(M instanceof HTMLImageElement?y.push(M):y.push(new mc(M.data,M.width,M.height)))}n[d.uuid]=new Dh(y)}else{const y=await a(d.url);n[d.uuid]=new Dh(y)}}}return n}parseTextures(e,t){function n(a,l){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),l[a])}const s={};if(e!==void 0)for(let a=0,l=e.length;a<l;a++){const u=e[a];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);const d=t[u.image],p=d.data;let y;Array.isArray(p)?(y=new q_,p.length===6&&(y.needsUpdate=!0)):(p&&p.data?y=new mc:y=new Ji,p&&(y.needsUpdate=!0)),y.source=d,y.uuid=u.uuid,u.name!==void 0&&(y.name=u.name),u.mapping!==void 0&&(y.mapping=n(u.mapping,I7)),u.channel!==void 0&&(y.channel=u.channel),u.offset!==void 0&&y.offset.fromArray(u.offset),u.repeat!==void 0&&y.repeat.fromArray(u.repeat),u.center!==void 0&&y.center.fromArray(u.center),u.rotation!==void 0&&(y.rotation=u.rotation),u.wrap!==void 0&&(y.wrapS=n(u.wrap[0],k2),y.wrapT=n(u.wrap[1],k2)),u.format!==void 0&&(y.format=u.format),u.internalFormat!==void 0&&(y.internalFormat=u.internalFormat),u.type!==void 0&&(y.type=u.type),u.colorSpace!==void 0&&(y.colorSpace=u.colorSpace),u.minFilter!==void 0&&(y.minFilter=n(u.minFilter,G2)),u.magFilter!==void 0&&(y.magFilter=n(u.magFilter,G2)),u.anisotropy!==void 0&&(y.anisotropy=u.anisotropy),u.flipY!==void 0&&(y.flipY=u.flipY),u.generateMipmaps!==void 0&&(y.generateMipmaps=u.generateMipmaps),u.premultiplyAlpha!==void 0&&(y.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(y.unpackAlignment=u.unpackAlignment),u.compareFunction!==void 0&&(y.compareFunction=u.compareFunction),u.userData!==void 0&&(y.userData=u.userData),s[u.uuid]=y}return s}parseObject(e,t,n,s,a){let l;function u(S){return t[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",S),t[S]}function d(S){if(S!==void 0){if(Array.isArray(S)){const T=[];for(let M=0,C=S.length;M<C;M++){const w=S[M];n[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),T.push(n[w])}return T}return n[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),n[S]}}function p(S){return s[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",S),s[S]}let y,_;switch(e.type){case"Scene":l=new A1,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new At(e.background):l.background=p(e.background)),e.environment!==void 0&&(l.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new Ax(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new bx(e.fog.color,e.fog.density)),e.fog.name!==""&&(l.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(l.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&l.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":l=new ks(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new J_(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new WU(e.color,e.intensity);break;case"DirectionalLight":l=new XU(e.color,e.intensity),l.target=e.target||"";break;case"PointLight":l=new qU(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new YU(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new jU(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),l.target=e.target||"";break;case"HemisphereLight":l=new GU(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new QU().fromJSON(e);break;case"SkinnedMesh":y=u(e.geometry),_=d(e.material),l=new hU(y,_),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":y=u(e.geometry),_=d(e.material),l=new vs(y,_);break;case"InstancedMesh":y=u(e.geometry),_=d(e.material);const S=e.count,T=e.instanceMatrix,M=e.instanceColor;l=new fU(y,_,S),l.instanceMatrix=new Pm(new Float32Array(T.array),16),M!==void 0&&(l.instanceColor=new Pm(new Float32Array(M.array),M.itemSize));break;case"BatchedMesh":y=u(e.geometry),_=d(e.material),l=new dU(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,_),l.geometry=y,l.perObjectFrustumCulled=e.perObjectFrustumCulled,l.sortObjects=e.sortObjects,l._drawRanges=e.drawRanges,l._reservedRanges=e.reservedRanges,l._geometryInfo=e.geometryInfo.map(C=>{let w=null,b=null;return C.boundingBox!==void 0&&(w=new Or().fromJSON(C.boundingBox)),C.boundingSphere!==void 0&&(b=new ar().fromJSON(C.boundingSphere)),{...C,boundingBox:w,boundingSphere:b}}),l._instanceInfo=e.instanceInfo,l._availableInstanceIds=e._availableInstanceIds,l._availableGeometryIds=e._availableGeometryIds,l._nextIndexStart=e.nextIndexStart,l._nextVertexStart=e.nextVertexStart,l._geometryCount=e.geometryCount,l._maxInstanceCount=e.maxInstanceCount,l._maxVertexCount=e.maxVertexCount,l._maxIndexCount=e.maxIndexCount,l._geometryInitialized=e.geometryInitialized,l._matricesTexture=p(e.matricesTexture.uuid),l._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(l._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(l.boundingSphere=new ar().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(l.boundingBox=new Or().fromJSON(e.boundingBox));break;case"LOD":l=new uU;break;case"Line":l=new Xh(u(e.geometry),d(e.material));break;case"LineLoop":l=new pU(u(e.geometry),d(e.material));break;case"LineSegments":l=new Ec(u(e.geometry),d(e.material));break;case"PointCloud":case"Points":l=new mU(u(e.geometry),d(e.material));break;case"Sprite":l=new cU(d(e.material));break;case"Group":l=new fm;break;case"Bone":l=new w1;break;default:l=new Kn}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(l.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const S=e.children;for(let T=0;T<S.length;T++)l.add(this.parseObject(S[T],t,n,s,a))}if(e.animations!==void 0){const S=e.animations;for(let T=0;T<S.length;T++){const M=S[T];l.animations.push(a[M])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const S=e.levels;for(let T=0;T<S.length;T++){const M=S[T],C=l.getObjectByProperty("uuid",M.object);C!==void 0&&l.addLevel(C,M.distance,M.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=t[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,s=e.getObjectByProperty("uuid",n);s!==void 0?t.target=s:t.target=new Kn}})}}const I7={UVMapping:dx,CubeReflectionMapping:vu,CubeRefractionMapping:jh,EquirectangularReflectionMapping:d_,EquirectangularRefractionMapping:p_,CubeUVReflectionMapping:Zm},k2={RepeatWrapping:m_,ClampToEdgeWrapping:Ro,MirroredRepeatWrapping:g_},G2={NearestFilter:rr,NearestMipmapNearestFilter:h1,NearestMipmapLinearFilter:um,LinearFilter:ws,LinearMipmapNearestFilter:Wy,LinearMipmapLinearFilter:ac},Ib=new WeakMap;class D7 extends Ca{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=oc.get(`image-bitmap:${e}`);if(l!==void 0){if(a.manager.itemStart(e),l.then){l.then(p=>{if(Ib.has(l)===!0)s&&s(Ib.get(l)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(p),a.manager.itemEnd(e),p});return}return setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,u.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const d=fetch(e,u).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(p){return oc.add(`image-bitmap:${e}`,p),t&&t(p),a.manager.itemEnd(e),p}).catch(function(p){s&&s(p),Ib.set(d,p),oc.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});oc.add(`image-bitmap:${e}`,d),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let K0;class q1{static getContext(){return K0===void 0&&(K0=new(window.AudioContext||window.webkitAudioContext)),K0}static setContext(e){K0=e}}class N7 extends Ca{constructor(e){super(e)}load(e,t,n,s){const a=this,l=new Eu(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(d){try{const p=d.slice(0);q1.getContext().decodeAudioData(p,function(_){t(_)}).catch(u)}catch(p){u(p)}},n,s);function u(d){s?s(d):console.error(d),a.manager.itemError(e)}}}const j2=new tn,q2=new tn,Wf=new tn;class O7{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ks,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ks,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Wf.copy(e.projectionMatrix);const s=t.eyeSep/2,a=s*t.near/t.focus,l=t.near*Math.tan(fd*t.fov*.5)/t.zoom;let u,d;q2.elements[12]=-s,j2.elements[12]=s,u=-l*t.aspect+a,d=l*t.aspect+a,Wf.elements[0]=2*t.near/(d-u),Wf.elements[8]=(d+u)/(d-u),this.cameraL.projectionMatrix.copy(Wf),u=-l*t.aspect-a,d=l*t.aspect-a,Wf.elements[0]=2*t.near/(d-u),Wf.elements[8]=(d+u)/(d-u),this.cameraR.projectionMatrix.copy(Wf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(q2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(j2)}}class $U extends ks{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class X1{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Yf=new ie,Db=new Ra,U7=new ie,Kf=new ie,Qf=new ie;class L7 extends Kn{constructor(){super(),this.type="AudioListener",this.context=q1.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new X1}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Yf,Db,U7),Kf.set(0,0,-1).applyQuaternion(Db),Qf.set(0,1,0).applyQuaternion(Db),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Yf.x,n),t.positionY.linearRampToValueAtTime(Yf.y,n),t.positionZ.linearRampToValueAtTime(Yf.z,n),t.forwardX.linearRampToValueAtTime(Kf.x,n),t.forwardY.linearRampToValueAtTime(Kf.y,n),t.forwardZ.linearRampToValueAtTime(Kf.z,n),t.upX.linearRampToValueAtTime(Qf.x,n),t.upY.linearRampToValueAtTime(Qf.y,n),t.upZ.linearRampToValueAtTime(Qf.z,n)}else t.setPosition(Yf.x,Yf.y,Yf.z),t.setOrientation(Kf.x,Kf.y,Kf.z,Qf.x,Qf.y,Qf.z)}}class eL extends Kn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Zf=new ie,X2=new Ra,P7=new ie,Jf=new ie;class V7 extends eL{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Zf,X2,P7),Jf.set(0,0,1).applyQuaternion(X2);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Zf.x,n),t.positionY.linearRampToValueAtTime(Zf.y,n),t.positionZ.linearRampToValueAtTime(Zf.z,n),t.orientationX.linearRampToValueAtTime(Jf.x,n),t.orientationY.linearRampToValueAtTime(Jf.y,n),t.orientationZ.linearRampToValueAtTime(Jf.z,n)}else t.setPosition(Zf.x,Zf.y,Zf.z),t.setOrientation(Jf.x,Jf.y,Jf.z)}}class z7{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class tL{constructor(e,t,n){this.binding=e,this.valueSize=n;let s,a,l;switch(t){case"quaternion":s=this._slerp,a=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,a=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,a=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=a,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,s=this.valueSize,a=e*s+s;let l=this.cumulativeWeight;if(l===0){for(let u=0;u!==s;++u)n[a+u]=n[u];l=t}else{l+=t;const u=t/l;this._mixBufferRegion(n,a,0,u,s)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,s=e*t+t,a=this.cumulativeWeight,l=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const d=t*this._origIndex;this._mixBufferRegion(n,s,d,1-a,t)}l>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*t,1,t);for(let d=t,p=t+t;d!==p;++d)if(n[d]!==n[d+t]){u.setValue(n,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,s=n*this._origIndex;e.getValue(t,s);for(let a=n,l=s;a!==l;++a)t[a]=t[s+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,s,a){if(s>=.5)for(let l=0;l!==a;++l)e[t+l]=e[n+l]}_slerp(e,t,n,s){Ra.slerpFlat(e,t,e,t,e,n,s)}_slerpAdditive(e,t,n,s,a){const l=this._workIndex*a;Ra.multiplyQuaternionsFlat(e,l,e,t,e,n),Ra.slerpFlat(e,t,e,t,e,l,s)}_lerp(e,t,n,s,a){const l=1-s;for(let u=0;u!==a;++u){const d=t+u;e[d]=e[d]*l+e[n+u]*s}}_lerpAdditive(e,t,n,s,a){for(let l=0;l!==a;++l){const u=t+l;e[u]=e[u]+e[n+l]*s}}}const W1="\\[\\]\\.:\\/",B7=new RegExp("["+W1+"]","g"),Y1="[^"+W1+"]",F7="[^"+W1.replace("\\.","")+"]",H7=/((?:WC+[\/:])*)/.source.replace("WC",Y1),k7=/(WCOD+)?/.source.replace("WCOD",F7),G7=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Y1),j7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Y1),q7=new RegExp("^"+H7+k7+G7+j7+"$"),X7=["material","materials","bones","map"];class W7{constructor(e,t,n){const s=n||Wn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,a=n.length;s!==a;++s)n[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Wn{constructor(e,t,n){this.path=t,this.parsedPath=n||Wn.parseTrackName(t),this.node=Wn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Wn.Composite(e,t,n):new Wn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(B7,"")}static parseTrackName(e){const t=q7.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const a=n.nodeName.substring(s+1);X7.indexOf(a)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=a)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(a){for(let l=0;l<a.length;l++){const u=a[l];if(u.name===t||u.uuid===t)return u;const d=n(u.children);if(d)return d}return null},s=n(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let s=0,a=n.length;s!==a;++s)e[t++]=n[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let s=0,a=n.length;s!==a;++s)n[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,a=n.length;s!==a;++s)n[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,a=n.length;s!==a;++s)n[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,s=t.propertyName;let a=t.propertyIndex;if(e||(e=Wn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let p=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let y=0;y<e.length;y++)if(e[y].name===p){p=y;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[s];if(l===void 0){const p=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?u=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(a!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}d=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else l.fromArray!==void 0&&l.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(d=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Wn.Composite=W7;Wn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Wn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Wn.prototype.GetterByBindingType=[Wn.prototype._getValue_direct,Wn.prototype._getValue_array,Wn.prototype._getValue_arrayElement,Wn.prototype._getValue_toArray];Wn.prototype.SetterByBindingTypeAndVersioning=[[Wn.prototype._setValue_direct,Wn.prototype._setValue_direct_setNeedsUpdate,Wn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wn.prototype._setValue_array,Wn.prototype._setValue_array_setNeedsUpdate,Wn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wn.prototype._setValue_arrayElement,Wn.prototype._setValue_arrayElement_setNeedsUpdate,Wn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wn.prototype._setValue_fromArray,Wn.prototype._setValue_fromArray_setNeedsUpdate,Wn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Y7{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ja(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,s=arguments.length;n!==s;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,s=this._parsedPaths,a=this._bindings,l=a.length;let u,d=e.length,p=this.nCachedObjects_;for(let y=0,_=arguments.length;y!==_;++y){const S=arguments[y],T=S.uuid;let M=t[T];if(M===void 0){M=d++,t[T]=M,e.push(S);for(let C=0,w=l;C!==w;++C)a[C].push(new Wn(S,n[C],s[C]))}else if(M<p){u=e[M];const C=--p,w=e[C];t[w.uuid]=M,e[M]=w,t[T]=C,e[C]=S;for(let b=0,D=l;b!==D;++b){const V=a[b],z=V[C];let j=V[M];V[M]=z,j===void 0&&(j=new Wn(S,n[b],s[b])),V[C]=j}}else e[M]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let a=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const d=arguments[l],p=d.uuid,y=t[p];if(y!==void 0&&y>=a){const _=a++,S=e[_];t[S.uuid]=y,e[y]=S,t[p]=_,e[_]=d;for(let T=0,M=s;T!==M;++T){const C=n[T],w=C[_],b=C[y];C[y]=w,C[_]=b}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let a=this.nCachedObjects_,l=e.length;for(let u=0,d=arguments.length;u!==d;++u){const p=arguments[u],y=p.uuid,_=t[y];if(_!==void 0)if(delete t[y],_<a){const S=--a,T=e[S],M=--l,C=e[M];t[T.uuid]=_,e[_]=T,t[C.uuid]=S,e[S]=C,e.pop();for(let w=0,b=s;w!==b;++w){const D=n[w],V=D[S],z=D[M];D[_]=V,D[S]=z,D.pop()}}else{const S=--l,T=e[S];S>0&&(t[T.uuid]=_),e[_]=T,e.pop();for(let M=0,C=s;M!==C;++M){const w=n[M];w[_]=w[S],w.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const n=this._bindingsIndicesByPath;let s=n[e];const a=this._bindings;if(s!==void 0)return a[s];const l=this._paths,u=this._parsedPaths,d=this._objects,p=d.length,y=this.nCachedObjects_,_=new Array(p);s=a.length,n[e]=s,l.push(e),u.push(t),a.push(_);for(let S=y,T=d.length;S!==T;++S){const M=d[S];_[S]=new Wn(M,e,t)}return _}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const s=this._paths,a=this._parsedPaths,l=this._bindings,u=l.length-1,d=l[u],p=e[u];t[p]=n,l[n]=d,l.pop(),a[n]=a[u],a.pop(),s[n]=s[u],s.pop()}}}class nL{constructor(e,t,n=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=s;const a=t.tracks,l=a.length,u=new Array(l),d={endingStart:od,endingEnd:od};for(let p=0;p!==l;++p){const y=a[p].createInterpolant(null);u[p]=y,y.settings=d}this._interpolantSettings=d,this._interpolants=u,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=kO,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const s=this._clip.duration,a=e._clip.duration,l=a/s,u=s/a;e.warp(1,l,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const s=this._mixer,a=s.time,l=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=s._lendControlInterpolant(),this._timeScaleInterpolant=u);const d=u.parameterPositions,p=u.sampleValues;return d[0]=a,d[1]=a+n,p[0]=e/l,p[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,s){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const d=(e-a)*n;d<0||n===0?t=0:(this._startTime=null,t=n*d)}t*=this._updateTimeScale(e);const l=this._updateTime(t),u=this._updateWeight(e);if(u>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case v1:for(let y=0,_=d.length;y!==_;++y)d[y].evaluate(l),p[y].accumulateAdditive(u);break;case Sx:default:for(let y=0,_=d.length;y!==_;++y)d[y].evaluate(l),p[y].accumulate(s,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let s=this.time+e,a=this._loopCount;const l=n===GO;if(e===0)return a===-1?s:l&&(a&1)===1?t-s:s;if(n===HO){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),s>=t||s<0){const u=Math.floor(s/t);s-=t*u,a+=Math.abs(u);const d=this.repetitions-a;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const p=e<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=a,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=s;if(l&&(a&1)===1)return t-s}return s}_setEndings(e,t,n){const s=this._interpolantSettings;n?(s.endingStart=ld,s.endingEnd=ld):(e?s.endingStart=this.zeroSlopeAtStart?ld:od:s.endingStart=__,t?s.endingEnd=this.zeroSlopeAtEnd?ld:od:s.endingEnd=__)}_scheduleFading(e,t,n){const s=this._mixer,a=s.time;let l=this._weightInterpolant;l===null&&(l=s._lendControlInterpolant(),this._weightInterpolant=l);const u=l.parameterPositions,d=l.sampleValues;return u[0]=a,d[0]=t,u[1]=a+e,d[1]=n,this}}const K7=new Float32Array(1);class Q7 extends Sc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,s=e._clip.tracks,a=s.length,l=e._propertyBindings,u=e._interpolants,d=n.uuid,p=this._bindingsByRootAndName;let y=p[d];y===void 0&&(y={},p[d]=y);for(let _=0;_!==a;++_){const S=s[_],T=S.name;let M=y[T];if(M!==void 0)++M.referenceCount,l[_]=M;else{if(M=l[_],M!==void 0){M._cacheIndex===null&&(++M.referenceCount,this._addInactiveBinding(M,d,T));continue}const C=t&&t._propertyBindings[_].binding.parsedPath;M=new tL(Wn.create(n,T,C),S.ValueTypeName,S.getValueSize()),++M.referenceCount,this._addInactiveBinding(M,d,T),l[_]=M}u[_].resultBuffer=M.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,s=e._clip.uuid,a=this._actionsByClip[s];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,s,n)}const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const a=t[n];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const a=t[n];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const s=this._actions,a=this._actionsByClip;let l=a[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=l;else{const u=l.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=s.length,s.push(e),l.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],s=e._cacheIndex;n._cacheIndex=s,t[s]=n,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,l=this._actionsByClip,u=l[a],d=u.knownActions,p=d[d.length-1],y=e._byClipCacheIndex;p._byClipCacheIndex=y,d[y]=p,d.pop(),e._byClipCacheIndex=null;const _=u.actionByRoot,S=(e._localRoot||this._root).uuid;delete _[S],d.length===0&&delete l[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const a=t[n];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,s=this._nActiveActions++,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=n,t[n]=a}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,s=--this._nActiveActions,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=n,t[n]=a}_addInactiveBinding(e,t,n){const s=this._bindingsByRootAndName,a=this._bindings;let l=s[t];l===void 0&&(l={},s[t]=l),l[n]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,s=n.rootNode.uuid,a=n.path,l=this._bindingsByRootAndName,u=l[s],d=t[t.length-1],p=e._cacheIndex;d._cacheIndex=p,t[p]=d,t.pop(),delete u[a],Object.keys(u).length===0&&delete l[s]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,s=this._nActiveBindings++,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=n,t[n]=a}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,s=--this._nActiveBindings,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=n,t[n]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new H1(new Float32Array(2),new Float32Array(2),1,K7),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,s=--this._nActiveControlInterpolants,a=t[s];e.__cacheIndex=s,t[s]=e,a.__cacheIndex=n,t[n]=a}clipAction(e,t,n){const s=t||this._root,a=s.uuid;let l=typeof e=="string"?R_.findByName(s,e):e;const u=l!==null?l.uuid:e,d=this._actionsByClip[u];let p=null;if(n===void 0&&(l!==null?n=l.blendMode:n=Sx),d!==void 0){const _=d.actionByRoot[a];if(_!==void 0&&_.blendMode===n)return _;p=d.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const y=new nL(this,l,t,n);return this._bindAction(y,p),this._addInactiveAction(y,u,a),y}existingAction(e,t){const n=t||this._root,s=n.uuid,a=typeof e=="string"?R_.findByName(n,e):e,l=a?a.uuid:e,u=this._actionsByClip[l];return u!==void 0&&u.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,s=this.time+=e,a=Math.sign(e),l=this._accuIndex^=1;for(let p=0;p!==n;++p)t[p]._update(s,e,a,l);const u=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)u[p].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,s=this._actionsByClip,a=s[n];if(a!==void 0){const l=a.knownActions;for(let u=0,d=l.length;u!==d;++u){const p=l[u];this._deactivateAction(p);const y=p._cacheIndex,_=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,_._cacheIndex=y,t[y]=_,t.pop(),this._removeInactiveBindingsForAction(p)}delete s[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const l in n){const u=n[l].actionByRoot,d=u[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const s=this._bindingsByRootAndName,a=s[t];if(a!==void 0)for(const l in a){const u=a[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Z7 extends x1{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new xx(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class K1{constructor(e){this.value=e}clone(){return new K1(this.value.clone===void 0?this.value:this.value.clone())}}let J7=0;class $7 extends Sc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:J7++}),this.name="",this.usage=S_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,s=t.length;n<s;n++){const a=Array.isArray(t[n])?t[n]:[t[n]];for(let l=0;l<a.length;l++)this.uniforms.push(a[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class ej extends Mx{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class tj{constructor(e,t,n,s,a,l=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=s,this.count=a,this.normalized=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const W2=new tn;class iL{constructor(e,t,n=0,s=1/0){this.ray=new $m(e,t),this.near=n,this.far=s,this.camera=null,this.layers=new Um,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return W2.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(W2),this}intersectObject(e,t=!0,n=[]){return XA(e,this,n,t),n.sort(Y2),n}intersectObjects(e,t=!0,n=[]){for(let s=0,a=e.length;s<a;s++)XA(e[s],this,n,t);return n.sort(Y2),n}}function Y2(i,e){return i.distance-e.distance}function XA(i,e,t,n){let s=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(s=!1),s===!0&&n===!0){const a=i.children;for(let l=0,u=a.length;l<u;l++)XA(a[l],e,t,!0)}}class nj{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=ij.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function ij(){this._document.hidden===!1&&this.reset()}class sj{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Jt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Jt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class rj{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Q1{constructor(e,t,n,s){Q1.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,s){const a=this.elements;return a[0]=e,a[2]=t,a[1]=n,a[3]=s,this}}const K2=new $e;class aj{constructor(e=new $e(1/0,1/0),t=new $e(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=K2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,K2).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Q2=new ie,Q0=new ie,Zp=new ie,Jp=new ie,Nb=new ie,oj=new ie,lj=new ie;class cj{constructor(e=new ie,t=new ie){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Q2.subVectors(e,this.start),Q0.subVectors(this.end,this.start);const n=Q0.dot(Q0);let a=Q0.dot(Q2)/n;return t&&(a=Jt(a,0,1)),a}closestPointToPoint(e,t,n){const s=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(s).add(this.start)}distanceSqToLine3(e,t=oj,n=lj){const s=10000000000000001e-32;let a,l;const u=this.start,d=e.start,p=this.end,y=e.end;Zp.subVectors(p,u),Jp.subVectors(y,d),Nb.subVectors(u,d);const _=Zp.dot(Zp),S=Jp.dot(Jp),T=Jp.dot(Nb);if(_<=s&&S<=s)return t.copy(u),n.copy(d),t.sub(n),t.dot(t);if(_<=s)a=0,l=T/S,l=Jt(l,0,1);else{const M=Zp.dot(Nb);if(S<=s)l=0,a=Jt(-M/_,0,1);else{const C=Zp.dot(Jp),w=_*S-C*C;w!==0?a=Jt((C*T-M*S)/w,0,1):a=0,l=(C*a+T)/S,l<0?(l=0,a=Jt(-M/_,0,1)):l>1&&(l=1,a=Jt((C-M)/_,0,1))}}return t.copy(u).add(Zp.multiplyScalar(a)),n.copy(d).add(Jp.multiplyScalar(l)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Z2=new ie;class uj extends Kn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new _n,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,u=1,d=32;l<d;l++,u++){const p=l/d*Math.PI*2,y=u/d*Math.PI*2;s.push(Math.cos(p),Math.sin(p),1,Math.cos(y),Math.sin(y),1)}n.setAttribute("position",new Ot(s,3));const a=new la({fog:!1,toneMapped:!1});this.cone=new Ec(n,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Z2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Z2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Eh=new ie,Z0=new tn,Ob=new tn;class hj extends Ec{constructor(e){const t=sL(e),n=new _n,s=[],a=[];for(let p=0;p<t.length;p++){const y=t[p];y.parent&&y.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}n.setAttribute("position",new Ot(s,3)),n.setAttribute("color",new Ot(a,3));const l=new la({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const u=new At(255),d=new At(65280);this.setColors(u,d)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,s=n.getAttribute("position");Ob.copy(this.root.matrixWorld).invert();for(let a=0,l=0;a<t.length;a++){const u=t[a];u.parent&&u.parent.isBone&&(Z0.multiplyMatrices(Ob,u.matrixWorld),Eh.setFromMatrixPosition(Z0),s.setXYZ(l,Eh.x,Eh.y,Eh.z),Z0.multiplyMatrices(Ob,u.parent.matrixWorld),Eh.setFromMatrixPosition(Z0),s.setXYZ(l+1,Eh.x,Eh.y,Eh.z),l+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const s=this.geometry.getAttribute("color");for(let a=0;a<s.count;a+=2)s.setXYZ(a,e.r,e.g,e.b),s.setXYZ(a+1,t.r,t.g,t.b);return s.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function sL(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...sL(i.children[t]));return e}class fj extends vs{constructor(e,t,n){const s=new K_(t,4,2),a=new Kh({wireframe:!0,fog:!1,toneMapped:!1});super(s,a),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const dj=new ie,J2=new At,$2=new At;class pj extends Kn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new Y_(t);s.rotateY(Math.PI*.5),this.material=new Kh({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=s.getAttribute("position"),l=new Float32Array(a.count*3);s.setAttribute("color",new mi(l,3)),this.add(new vs(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");J2.copy(this.light.color),$2.copy(this.light.groundColor);for(let n=0,s=t.count;n<s;n++){const a=n<s/2?J2:$2;t.setXYZ(n,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(dj.setFromMatrixPosition(this.light.matrixWorld).negate())}}class mj extends Ec{constructor(e=10,t=10,n=4473924,s=8947848){n=new At(n),s=new At(s);const a=t/2,l=e/t,u=e/2,d=[],p=[];for(let S=0,T=0,M=-u;S<=t;S++,M+=l){d.push(-u,0,M,u,0,M),d.push(M,0,-u,M,0,u);const C=S===a?n:s;C.toArray(p,T),T+=3,C.toArray(p,T),T+=3,C.toArray(p,T),T+=3,C.toArray(p,T),T+=3}const y=new _n;y.setAttribute("position",new Ot(d,3)),y.setAttribute("color",new Ot(p,3));const _=new la({vertexColors:!0,toneMapped:!1});super(y,_),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class gj extends Ec{constructor(e=10,t=16,n=8,s=64,a=4473924,l=8947848){a=new At(a),l=new At(l);const u=[],d=[];if(t>1)for(let _=0;_<t;_++){const S=_/t*(Math.PI*2),T=Math.sin(S)*e,M=Math.cos(S)*e;u.push(0,0,0),u.push(T,0,M);const C=_&1?a:l;d.push(C.r,C.g,C.b),d.push(C.r,C.g,C.b)}for(let _=0;_<n;_++){const S=_&1?a:l,T=e-e/n*_;for(let M=0;M<s;M++){let C=M/s*(Math.PI*2),w=Math.sin(C)*T,b=Math.cos(C)*T;u.push(w,0,b),d.push(S.r,S.g,S.b),C=(M+1)/s*(Math.PI*2),w=Math.sin(C)*T,b=Math.cos(C)*T,u.push(w,0,b),d.push(S.r,S.g,S.b)}}const p=new _n;p.setAttribute("position",new Ot(u,3)),p.setAttribute("color",new Ot(d,3));const y=new la({vertexColors:!0,toneMapped:!1});super(p,y),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const eI=new ie,J0=new ie,tI=new ie;class yj extends Kn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new _n;s.setAttribute("position",new Ot([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new la({fog:!1,toneMapped:!1});this.lightPlane=new Xh(s,a),this.add(this.lightPlane),s=new _n,s.setAttribute("position",new Ot([0,0,0,0,0,1],3)),this.targetLine=new Xh(s,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),eI.setFromMatrixPosition(this.light.matrixWorld),J0.setFromMatrixPosition(this.light.target.matrixWorld),tI.subVectors(J0,eI),this.lightPlane.lookAt(J0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(J0),this.targetLine.scale.z=tI.length()}}const $0=new ie,Zi=new Tx;class _j extends Ec{constructor(e){const t=new _n,n=new la({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],a=[],l={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(M,C){d(M),d(C)}function d(M){s.push(0,0,0),a.push(0,0,0),l[M]===void 0&&(l[M]=[]),l[M].push(s.length/3-1)}t.setAttribute("position",new Ot(s,3)),t.setAttribute("color",new Ot(a,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new At(16755200),y=new At(16711680),_=new At(43775),S=new At(16777215),T=new At(3355443);this.setColors(p,y,_,S,T)}setColors(e,t,n,s,a){const u=this.geometry.getAttribute("color");return u.setXYZ(0,e.r,e.g,e.b),u.setXYZ(1,e.r,e.g,e.b),u.setXYZ(2,e.r,e.g,e.b),u.setXYZ(3,e.r,e.g,e.b),u.setXYZ(4,e.r,e.g,e.b),u.setXYZ(5,e.r,e.g,e.b),u.setXYZ(6,e.r,e.g,e.b),u.setXYZ(7,e.r,e.g,e.b),u.setXYZ(8,e.r,e.g,e.b),u.setXYZ(9,e.r,e.g,e.b),u.setXYZ(10,e.r,e.g,e.b),u.setXYZ(11,e.r,e.g,e.b),u.setXYZ(12,e.r,e.g,e.b),u.setXYZ(13,e.r,e.g,e.b),u.setXYZ(14,e.r,e.g,e.b),u.setXYZ(15,e.r,e.g,e.b),u.setXYZ(16,e.r,e.g,e.b),u.setXYZ(17,e.r,e.g,e.b),u.setXYZ(18,e.r,e.g,e.b),u.setXYZ(19,e.r,e.g,e.b),u.setXYZ(20,e.r,e.g,e.b),u.setXYZ(21,e.r,e.g,e.b),u.setXYZ(22,e.r,e.g,e.b),u.setXYZ(23,e.r,e.g,e.b),u.setXYZ(24,t.r,t.g,t.b),u.setXYZ(25,t.r,t.g,t.b),u.setXYZ(26,t.r,t.g,t.b),u.setXYZ(27,t.r,t.g,t.b),u.setXYZ(28,t.r,t.g,t.b),u.setXYZ(29,t.r,t.g,t.b),u.setXYZ(30,t.r,t.g,t.b),u.setXYZ(31,t.r,t.g,t.b),u.setXYZ(32,n.r,n.g,n.b),u.setXYZ(33,n.r,n.g,n.b),u.setXYZ(34,n.r,n.g,n.b),u.setXYZ(35,n.r,n.g,n.b),u.setXYZ(36,n.r,n.g,n.b),u.setXYZ(37,n.r,n.g,n.b),u.setXYZ(38,s.r,s.g,s.b),u.setXYZ(39,s.r,s.g,s.b),u.setXYZ(40,a.r,a.g,a.b),u.setXYZ(41,a.r,a.g,a.b),u.setXYZ(42,a.r,a.g,a.b),u.setXYZ(43,a.r,a.g,a.b),u.setXYZ(44,a.r,a.g,a.b),u.setXYZ(45,a.r,a.g,a.b),u.setXYZ(46,a.r,a.g,a.b),u.setXYZ(47,a.r,a.g,a.b),u.setXYZ(48,a.r,a.g,a.b),u.setXYZ(49,a.r,a.g,a.b),u.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,s=1;let a,l;if(Zi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,l=0;else if(this.camera.coordinateSystem===Qa)a=-1,l=1;else if(this.camera.coordinateSystem===Nm)a=0,l=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);ss("c",t,e,Zi,0,0,a),ss("t",t,e,Zi,0,0,l),ss("n1",t,e,Zi,-n,-s,a),ss("n2",t,e,Zi,n,-s,a),ss("n3",t,e,Zi,-n,s,a),ss("n4",t,e,Zi,n,s,a),ss("f1",t,e,Zi,-n,-s,l),ss("f2",t,e,Zi,n,-s,l),ss("f3",t,e,Zi,-n,s,l),ss("f4",t,e,Zi,n,s,l),ss("u1",t,e,Zi,n*.7,s*1.1,a),ss("u2",t,e,Zi,-n*.7,s*1.1,a),ss("u3",t,e,Zi,0,s*2,a),ss("cf1",t,e,Zi,-n,0,l),ss("cf2",t,e,Zi,n,0,l),ss("cf3",t,e,Zi,0,-s,l),ss("cf4",t,e,Zi,0,s,l),ss("cn1",t,e,Zi,-n,0,a),ss("cn2",t,e,Zi,n,0,a),ss("cn3",t,e,Zi,0,-s,a),ss("cn4",t,e,Zi,0,s,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ss(i,e,t,n,s,a,l){$0.set(s,a,l).unproject(n);const u=e[i];if(u!==void 0){const d=t.getAttribute("position");for(let p=0,y=u.length;p<y;p++)d.setXYZ(u[p],$0.x,$0.y,$0.z)}}const eS=new Or;class vj extends Ec{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(24),a=new _n;a.setIndex(new mi(n,1)),a.setAttribute("position",new mi(s,3)),super(a,new la({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&eS.setFromObject(this.object),eS.isEmpty())return;const e=eS.min,t=eS.max,n=this.geometry.attributes.position,s=n.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=e.x,s[4]=t.y,s[5]=t.z,s[6]=e.x,s[7]=e.y,s[8]=t.z,s[9]=t.x,s[10]=e.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=e.z,s[15]=e.x,s[16]=t.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=t.x,s[22]=e.y,s[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Sj extends Ec{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new _n;a.setIndex(new mi(n,1)),a.setAttribute("position",new Ot(s,3)),super(a,new la({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ej extends Xh{constructor(e,t=1,n=16776960){const s=n,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new _n;l.setAttribute("position",new Ot(a,3)),l.computeBoundingSphere(),super(l,new la({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new _n;d.setAttribute("position",new Ot(u,3)),d.computeBoundingSphere(),this.add(new vs(d,new Kh({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const nI=new ie;let tS,Ub;class xj extends Kn{constructor(e=new ie(0,0,1),t=new ie(0,0,0),n=1,s=16776960,a=n*.2,l=a*.2){super(),this.type="ArrowHelper",tS===void 0&&(tS=new _n,tS.setAttribute("position",new Ot([0,0,0,0,1,0],3)),Ub=new W_(.5,1,5,1),Ub.translate(0,-.5,0)),this.position.copy(t),this.line=new Xh(tS,new la({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new vs(Ub,new Kh({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,a,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{nI.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(nI,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Tj extends Ec{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new _n;s.setAttribute("position",new Ot(t,3)),s.setAttribute("color",new Ot(n,3));const a=new la({vertexColors:!0,toneMapped:!1});super(s,a),this.type="AxesHelper"}setColors(e,t,n){const s=new At,a=this.geometry.attributes.color.array;return s.set(e),s.toArray(a,0),s.toArray(a,3),s.set(t),s.toArray(a,6),s.toArray(a,9),s.set(n),s.toArray(a,12),s.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class bj{constructor(){this.type="ShapePath",this.color=new At,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new LE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,s){return this.currentPath.quadraticCurveTo(e,t,n,s),this}bezierCurveTo(e,t,n,s,a,l){return this.currentPath.bezierCurveTo(e,t,n,s,a,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(b){const D=[];for(let V=0,z=b.length;V<z;V++){const j=b[V],G=new dd;G.curves=j.curves,D.push(G)}return D}function n(b,D){const V=D.length;let z=!1;for(let j=V-1,G=0;G<V;j=G++){let P=D[j],L=D[G],I=L.x-P.x,O=L.y-P.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(P=D[G],I=-I,L=D[j],O=-O),b.y<P.y||b.y>L.y)continue;if(b.y===P.y){if(b.x===P.x)return!0}else{const F=O*(b.x-P.x)-I*(b.y-P.y);if(F===0)return!0;if(F<0)continue;z=!z}}else{if(b.y!==P.y)continue;if(L.x<=b.x&&b.x<=P.x||P.x<=b.x&&b.x<=L.x)return!0}}return z}const s=dl.isClockWise,a=this.subPaths;if(a.length===0)return[];let l,u,d;const p=[];if(a.length===1)return u=a[0],d=new dd,d.curves=u.curves,p.push(d),p;let y=!s(a[0].getPoints());y=e?!y:y;const _=[],S=[];let T=[],M=0,C;S[M]=void 0,T[M]=[];for(let b=0,D=a.length;b<D;b++)u=a[b],C=u.getPoints(),l=s(C),l=e?!l:l,l?(!y&&S[M]&&M++,S[M]={s:new dd,p:C},S[M].s.curves=u.curves,y&&M++,T[M]=[]):T[M].push({h:u,p:C[0]});if(!S[0])return t(a);if(S.length>1){let b=!1,D=0;for(let V=0,z=S.length;V<z;V++)_[V]=[];for(let V=0,z=S.length;V<z;V++){const j=T[V];for(let G=0;G<j.length;G++){const P=j[G];let L=!0;for(let I=0;I<S.length;I++)n(P.p,S[I].p)&&(V!==I&&D++,L?(L=!1,_[I].push(P)):b=!0);L&&_[V].push(P)}}D>0&&b===!1&&(T=_)}let w;for(let b=0,D=S.length;b<D;b++){d=S[b].s,p.push(d),w=T[b];for(let V=0,z=w.length;V<z;V++)d.holes.push(w[V].h)}return p}}class Aj extends Sc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function Mj(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function wj(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function Rj(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function WA(i,e,t,n){const s=Cj(n);switch(t){case g1:return i*e;case yx:return i*e/s.components*s.byteLength;case j_:return i*e/s.components*s.byteLength;case _1:return i*e*2/s.components*s.byteLength;case _x:return i*e*2/s.components*s.byteLength;case y1:return i*e*3/s.components*s.byteLength;case Nr:return i*e*4/s.components*s.byteLength;case vx:return i*e*4/s.components*s.byteLength;case Yy:case Ky:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Qy:case Zy:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case sE:case aE:return Math.max(i,16)*Math.max(e,8)/4;case iE:case rE:return Math.max(i,8)*Math.max(e,8)/2;case oE:case lE:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case cE:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case uE:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case hE:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case fE:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case dE:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case pE:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case mE:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case gE:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case yE:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case _E:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case vE:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case SE:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case EE:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case xE:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case TE:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case bE:case AE:case ME:return Math.ceil(i/4)*Math.ceil(e/4)*16;case wE:case RE:return Math.ceil(i/4)*Math.ceil(e/4)*8;case CE:case IE:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Cj(i){switch(i){case Io:case f1:return{byteLength:1,components:1};case Rm:case d1:case Jm:return{byteLength:2,components:1};case mx:case gx:return{byteLength:2,components:4};case Su:case px:case wa:return{byteLength:4,components:1};case p1:case m1:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class Ij{static contain(e,t){return Mj(e,t)}static cover(e,t){return wj(e,t)}static fill(e){return Rj(e)}static getByteLength(e,t,n,s){return WA(e,t,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:hx}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=hx);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function rL(){let i=null,e=!1,t=null,n=null;function s(a,l){t(a,l),n=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){i=a}}}function Dj(i){const e=new WeakMap;function t(u,d){const p=u.array,y=u.usage,_=p.byteLength,S=i.createBuffer();i.bindBuffer(d,S),i.bufferData(d,p,y),u.onUploadCallback();let T;if(p instanceof Float32Array)T=i.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)T=i.HALF_FLOAT;else if(p instanceof Uint16Array)u.isFloat16BufferAttribute?T=i.HALF_FLOAT:T=i.UNSIGNED_SHORT;else if(p instanceof Int16Array)T=i.SHORT;else if(p instanceof Uint32Array)T=i.UNSIGNED_INT;else if(p instanceof Int32Array)T=i.INT;else if(p instanceof Int8Array)T=i.BYTE;else if(p instanceof Uint8Array)T=i.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)T=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:S,type:T,bytesPerElement:p.BYTES_PER_ELEMENT,version:u.version,size:_}}function n(u,d,p){const y=d.array,_=d.updateRanges;if(i.bindBuffer(p,u),_.length===0)i.bufferSubData(p,0,y);else{_.sort((T,M)=>T.start-M.start);let S=0;for(let T=1;T<_.length;T++){const M=_[S],C=_[T];C.start<=M.start+M.count+1?M.count=Math.max(M.count,C.start+C.count-M.start):(++S,_[S]=C)}_.length=S+1;for(let T=0,M=_.length;T<M;T++){const C=_[T];i.bufferSubData(p,C.start*y.BYTES_PER_ELEMENT,y,C.start,C.count)}d.clearUpdateRanges()}d.onUploadCallback()}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),e.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=e.get(u);d&&(i.deleteBuffer(d.buffer),e.delete(u))}function l(u,d){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){const y=e.get(u);(!y||y.version<u.version)&&e.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}const p=e.get(u);if(p===void 0)e.set(u,t(u,d));else if(p.version<u.version){if(p.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(p.buffer,u,d),p.version=u.version}}return{get:s,remove:a,update:l}}var Nj=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Oj=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Uj=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Lj=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Pj=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Vj=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,zj=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Bj=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Fj=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Hj=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,kj=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Gj=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,jj=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,qj=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Xj=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Wj=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Yj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Kj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Qj=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Zj=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Jj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,$j=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,eq=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,tq=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,nq=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,iq=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,sq=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,rq=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,aq=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,oq=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,lq="gl_FragColor = linearToOutputTexel( gl_FragColor );",cq=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,uq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,hq=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,fq=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,dq=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,pq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,mq=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,gq=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,yq=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,_q=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,vq=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Sq=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Eq=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,xq=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Tq=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,bq=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Aq=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Mq=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,wq=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Rq=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Cq=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Iq=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Dq=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Nq=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Oq=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Uq=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Lq=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Pq=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Vq=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,zq=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Bq=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Fq=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Hq=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kq=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Gq=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,jq=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,qq=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Xq=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Wq=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Yq=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Kq=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Qq=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Zq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Jq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$q=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,eX=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,tX=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,nX=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,iX=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,sX=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,rX=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,aX=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,oX=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,lX=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,cX=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,uX=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,hX=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,fX=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,dX=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,pX=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,mX=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,gX=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,yX=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,_X=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,vX=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,SX=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,EX=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,xX=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,TX=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,bX=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,AX=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,MX=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,wX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,RX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,CX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,IX=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const DX=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,NX=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,OX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,UX=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,PX=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,VX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,zX=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,BX=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,FX=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,HX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,kX=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,GX=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jX=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,qX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,XX=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WX=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YX=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KX=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,QX=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZX=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,JX=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,$X=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eW=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tW=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,nW=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iW=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sW=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rW=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,aW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,oW=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lW=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cW=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Tn={alphahash_fragment:Nj,alphahash_pars_fragment:Oj,alphamap_fragment:Uj,alphamap_pars_fragment:Lj,alphatest_fragment:Pj,alphatest_pars_fragment:Vj,aomap_fragment:zj,aomap_pars_fragment:Bj,batching_pars_vertex:Fj,batching_vertex:Hj,begin_vertex:kj,beginnormal_vertex:Gj,bsdfs:jj,iridescence_fragment:qj,bumpmap_pars_fragment:Xj,clipping_planes_fragment:Wj,clipping_planes_pars_fragment:Yj,clipping_planes_pars_vertex:Kj,clipping_planes_vertex:Qj,color_fragment:Zj,color_pars_fragment:Jj,color_pars_vertex:$j,color_vertex:eq,common:tq,cube_uv_reflection_fragment:nq,defaultnormal_vertex:iq,displacementmap_pars_vertex:sq,displacementmap_vertex:rq,emissivemap_fragment:aq,emissivemap_pars_fragment:oq,colorspace_fragment:lq,colorspace_pars_fragment:cq,envmap_fragment:uq,envmap_common_pars_fragment:hq,envmap_pars_fragment:fq,envmap_pars_vertex:dq,envmap_physical_pars_fragment:bq,envmap_vertex:pq,fog_vertex:mq,fog_pars_vertex:gq,fog_fragment:yq,fog_pars_fragment:_q,gradientmap_pars_fragment:vq,lightmap_pars_fragment:Sq,lights_lambert_fragment:Eq,lights_lambert_pars_fragment:xq,lights_pars_begin:Tq,lights_toon_fragment:Aq,lights_toon_pars_fragment:Mq,lights_phong_fragment:wq,lights_phong_pars_fragment:Rq,lights_physical_fragment:Cq,lights_physical_pars_fragment:Iq,lights_fragment_begin:Dq,lights_fragment_maps:Nq,lights_fragment_end:Oq,logdepthbuf_fragment:Uq,logdepthbuf_pars_fragment:Lq,logdepthbuf_pars_vertex:Pq,logdepthbuf_vertex:Vq,map_fragment:zq,map_pars_fragment:Bq,map_particle_fragment:Fq,map_particle_pars_fragment:Hq,metalnessmap_fragment:kq,metalnessmap_pars_fragment:Gq,morphinstance_vertex:jq,morphcolor_vertex:qq,morphnormal_vertex:Xq,morphtarget_pars_vertex:Wq,morphtarget_vertex:Yq,normal_fragment_begin:Kq,normal_fragment_maps:Qq,normal_pars_fragment:Zq,normal_pars_vertex:Jq,normal_vertex:$q,normalmap_pars_fragment:eX,clearcoat_normal_fragment_begin:tX,clearcoat_normal_fragment_maps:nX,clearcoat_pars_fragment:iX,iridescence_pars_fragment:sX,opaque_fragment:rX,packing:aX,premultiplied_alpha_fragment:oX,project_vertex:lX,dithering_fragment:cX,dithering_pars_fragment:uX,roughnessmap_fragment:hX,roughnessmap_pars_fragment:fX,shadowmap_pars_fragment:dX,shadowmap_pars_vertex:pX,shadowmap_vertex:mX,shadowmask_pars_fragment:gX,skinbase_vertex:yX,skinning_pars_vertex:_X,skinning_vertex:vX,skinnormal_vertex:SX,specularmap_fragment:EX,specularmap_pars_fragment:xX,tonemapping_fragment:TX,tonemapping_pars_fragment:bX,transmission_fragment:AX,transmission_pars_fragment:MX,uv_pars_fragment:wX,uv_pars_vertex:RX,uv_vertex:CX,worldpos_vertex:IX,background_vert:DX,background_frag:NX,backgroundCube_vert:OX,backgroundCube_frag:UX,cube_vert:LX,cube_frag:PX,depth_vert:VX,depth_frag:zX,distanceRGBA_vert:BX,distanceRGBA_frag:FX,equirect_vert:HX,equirect_frag:kX,linedashed_vert:GX,linedashed_frag:jX,meshbasic_vert:qX,meshbasic_frag:XX,meshlambert_vert:WX,meshlambert_frag:YX,meshmatcap_vert:KX,meshmatcap_frag:QX,meshnormal_vert:ZX,meshnormal_frag:JX,meshphong_vert:$X,meshphong_frag:eW,meshphysical_vert:tW,meshphysical_frag:nW,meshtoon_vert:iW,meshtoon_frag:sW,points_vert:rW,points_frag:aW,shadow_vert:oW,shadow_frag:lW,sprite_vert:cW,sprite_frag:uW},_t={common:{diffuse:{value:new At(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new mn},alphaMap:{value:null},alphaMapTransform:{value:new mn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new mn}},envmap:{envMap:{value:null},envMapRotation:{value:new mn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new mn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new mn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new mn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new mn},normalScale:{value:new $e(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new mn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new mn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new mn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new mn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new At(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new At(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new mn},alphaTest:{value:0},uvTransform:{value:new mn}},sprite:{diffuse:{value:new At(16777215)},opacity:{value:1},center:{value:new $e(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new mn},alphaMap:{value:null},alphaMapTransform:{value:new mn},alphaTest:{value:0}}},cl={basic:{uniforms:sa([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.fog]),vertexShader:Tn.meshbasic_vert,fragmentShader:Tn.meshbasic_frag},lambert:{uniforms:sa([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,_t.lights,{emissive:{value:new At(0)}}]),vertexShader:Tn.meshlambert_vert,fragmentShader:Tn.meshlambert_frag},phong:{uniforms:sa([_t.common,_t.specularmap,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,_t.lights,{emissive:{value:new At(0)},specular:{value:new At(1118481)},shininess:{value:30}}]),vertexShader:Tn.meshphong_vert,fragmentShader:Tn.meshphong_frag},standard:{uniforms:sa([_t.common,_t.envmap,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.roughnessmap,_t.metalnessmap,_t.fog,_t.lights,{emissive:{value:new At(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tn.meshphysical_vert,fragmentShader:Tn.meshphysical_frag},toon:{uniforms:sa([_t.common,_t.aomap,_t.lightmap,_t.emissivemap,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.gradientmap,_t.fog,_t.lights,{emissive:{value:new At(0)}}]),vertexShader:Tn.meshtoon_vert,fragmentShader:Tn.meshtoon_frag},matcap:{uniforms:sa([_t.common,_t.bumpmap,_t.normalmap,_t.displacementmap,_t.fog,{matcap:{value:null}}]),vertexShader:Tn.meshmatcap_vert,fragmentShader:Tn.meshmatcap_frag},points:{uniforms:sa([_t.points,_t.fog]),vertexShader:Tn.points_vert,fragmentShader:Tn.points_frag},dashed:{uniforms:sa([_t.common,_t.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tn.linedashed_vert,fragmentShader:Tn.linedashed_frag},depth:{uniforms:sa([_t.common,_t.displacementmap]),vertexShader:Tn.depth_vert,fragmentShader:Tn.depth_frag},normal:{uniforms:sa([_t.common,_t.bumpmap,_t.normalmap,_t.displacementmap,{opacity:{value:1}}]),vertexShader:Tn.meshnormal_vert,fragmentShader:Tn.meshnormal_frag},sprite:{uniforms:sa([_t.sprite,_t.fog]),vertexShader:Tn.sprite_vert,fragmentShader:Tn.sprite_frag},background:{uniforms:{uvTransform:{value:new mn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Tn.background_vert,fragmentShader:Tn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new mn}},vertexShader:Tn.backgroundCube_vert,fragmentShader:Tn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Tn.cube_vert,fragmentShader:Tn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tn.equirect_vert,fragmentShader:Tn.equirect_frag},distanceRGBA:{uniforms:sa([_t.common,_t.displacementmap,{referencePosition:{value:new ie},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tn.distanceRGBA_vert,fragmentShader:Tn.distanceRGBA_frag},shadow:{uniforms:sa([_t.lights,_t.fog,{color:{value:new At(0)},opacity:{value:1}}]),vertexShader:Tn.shadow_vert,fragmentShader:Tn.shadow_frag}};cl.physical={uniforms:sa([cl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new mn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new mn},clearcoatNormalScale:{value:new $e(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new mn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new mn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new mn},sheen:{value:0},sheenColor:{value:new At(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new mn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new mn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new mn},transmissionSamplerSize:{value:new $e},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new mn},attenuationDistance:{value:0},attenuationColor:{value:new At(0)},specularColor:{value:new At(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new mn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new mn},anisotropyVector:{value:new $e},anisotropyMap:{value:null},anisotropyMapTransform:{value:new mn}}]),vertexShader:Tn.meshphysical_vert,fragmentShader:Tn.meshphysical_frag};const nS={r:0,b:0,g:0},$f=new $a,hW=new tn;function fW(i,e,t,n,s,a,l){const u=new At(0);let d=a===!0?0:1,p,y,_=null,S=0,T=null;function M(V){let z=V.isScene===!0?V.background:null;return z&&z.isTexture&&(z=(V.backgroundBlurriness>0?t:e).get(z)),z}function C(V){let z=!1;const j=M(V);j===null?b(u,d):j&&j.isColor&&(b(j,1),z=!0);const G=i.xr.getEnvironmentBlendMode();G==="additive"?n.buffers.color.setClear(0,0,0,1,l):G==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,l),(i.autoClear||z)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function w(V,z){const j=M(z);j&&(j.isCubeTexture||j.mapping===Zm)?(y===void 0&&(y=new vs(new Ud(1,1,1),new vl({name:"BackgroundCubeMaterial",uniforms:Lm(cl.backgroundCube.uniforms),vertexShader:cl.backgroundCube.vertexShader,fragmentShader:cl.backgroundCube.fragmentShader,side:oa,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),y.geometry.deleteAttribute("normal"),y.geometry.deleteAttribute("uv"),y.onBeforeRender=function(G,P,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(y.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(y)),$f.copy(z.backgroundRotation),$f.x*=-1,$f.y*=-1,$f.z*=-1,j.isCubeTexture&&j.isRenderTargetTexture===!1&&($f.y*=-1,$f.z*=-1),y.material.uniforms.envMap.value=j,y.material.uniforms.flipEnvMap.value=j.isCubeTexture&&j.isRenderTargetTexture===!1?-1:1,y.material.uniforms.backgroundBlurriness.value=z.backgroundBlurriness,y.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,y.material.uniforms.backgroundRotation.value.setFromMatrix4(hW.makeRotationFromEuler($f)),y.material.toneMapped=Gn.getTransfer(j.colorSpace)!==ci,(_!==j||S!==j.version||T!==i.toneMapping)&&(y.material.needsUpdate=!0,_=j,S=j.version,T=i.toneMapping),y.layers.enableAll(),V.unshift(y,y.geometry,y.material,0,0,null)):j&&j.isTexture&&(p===void 0&&(p=new vs(new tg(2,2),new vl({name:"BackgroundMaterial",uniforms:Lm(cl.background.uniforms),vertexShader:cl.background.vertexShader,fragmentShader:cl.background.fragmentShader,side:_u,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(p)),p.material.uniforms.t2D.value=j,p.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,p.material.toneMapped=Gn.getTransfer(j.colorSpace)!==ci,j.matrixAutoUpdate===!0&&j.updateMatrix(),p.material.uniforms.uvTransform.value.copy(j.matrix),(_!==j||S!==j.version||T!==i.toneMapping)&&(p.material.needsUpdate=!0,_=j,S=j.version,T=i.toneMapping),p.layers.enableAll(),V.unshift(p,p.geometry,p.material,0,0,null))}function b(V,z){V.getRGB(nS,sU(i)),n.buffers.color.setClear(nS.r,nS.g,nS.b,z,l)}function D(){y!==void 0&&(y.geometry.dispose(),y.material.dispose(),y=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return u},setClearColor:function(V,z=1){u.set(V),d=z,b(u,d)},getClearAlpha:function(){return d},setClearAlpha:function(V){d=V,b(u,d)},render:C,addToRenderList:w,dispose:D}}function dW(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=S(null);let a=s,l=!1;function u(O,F,Y,q,de){let ge=!1;const X=_(q,Y,F);a!==X&&(a=X,p(a.object)),ge=T(O,q,Y,de),ge&&M(O,q,Y,de),de!==null&&e.update(de,i.ELEMENT_ARRAY_BUFFER),(ge||l)&&(l=!1,z(O,F,Y,q),de!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(de).buffer))}function d(){return i.createVertexArray()}function p(O){return i.bindVertexArray(O)}function y(O){return i.deleteVertexArray(O)}function _(O,F,Y){const q=Y.wireframe===!0;let de=n[O.id];de===void 0&&(de={},n[O.id]=de);let ge=de[F.id];ge===void 0&&(ge={},de[F.id]=ge);let X=ge[q];return X===void 0&&(X=S(d()),ge[q]=X),X}function S(O){const F=[],Y=[],q=[];for(let de=0;de<t;de++)F[de]=0,Y[de]=0,q[de]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:Y,attributeDivisors:q,object:O,attributes:{},index:null}}function T(O,F,Y,q){const de=a.attributes,ge=F.attributes;let X=0;const ee=Y.getAttributes();for(const ne in ee)if(ee[ne].location>=0){const re=de[ne];let J=ge[ne];if(J===void 0&&(ne==="instanceMatrix"&&O.instanceMatrix&&(J=O.instanceMatrix),ne==="instanceColor"&&O.instanceColor&&(J=O.instanceColor)),re===void 0||re.attribute!==J||J&&re.data!==J.data)return!0;X++}return a.attributesNum!==X||a.index!==q}function M(O,F,Y,q){const de={},ge=F.attributes;let X=0;const ee=Y.getAttributes();for(const ne in ee)if(ee[ne].location>=0){let re=ge[ne];re===void 0&&(ne==="instanceMatrix"&&O.instanceMatrix&&(re=O.instanceMatrix),ne==="instanceColor"&&O.instanceColor&&(re=O.instanceColor));const J={};J.attribute=re,re&&re.data&&(J.data=re.data),de[ne]=J,X++}a.attributes=de,a.attributesNum=X,a.index=q}function C(){const O=a.newAttributes;for(let F=0,Y=O.length;F<Y;F++)O[F]=0}function w(O){b(O,0)}function b(O,F){const Y=a.newAttributes,q=a.enabledAttributes,de=a.attributeDivisors;Y[O]=1,q[O]===0&&(i.enableVertexAttribArray(O),q[O]=1),de[O]!==F&&(i.vertexAttribDivisor(O,F),de[O]=F)}function D(){const O=a.newAttributes,F=a.enabledAttributes;for(let Y=0,q=F.length;Y<q;Y++)F[Y]!==O[Y]&&(i.disableVertexAttribArray(Y),F[Y]=0)}function V(O,F,Y,q,de,ge,X){X===!0?i.vertexAttribIPointer(O,F,Y,de,ge):i.vertexAttribPointer(O,F,Y,q,de,ge)}function z(O,F,Y,q){C();const de=q.attributes,ge=Y.getAttributes(),X=F.defaultAttributeValues;for(const ee in ge){const ne=ge[ee];if(ne.location>=0){let pe=de[ee];if(pe===void 0&&(ee==="instanceMatrix"&&O.instanceMatrix&&(pe=O.instanceMatrix),ee==="instanceColor"&&O.instanceColor&&(pe=O.instanceColor)),pe!==void 0){const re=pe.normalized,J=pe.itemSize,le=e.get(pe);if(le===void 0)continue;const De=le.buffer,Re=le.type,nt=le.bytesPerElement,Te=Re===i.INT||Re===i.UNSIGNED_INT||pe.gpuType===px;if(pe.isInterleavedBufferAttribute){const Le=pe.data,at=Le.stride,pt=pe.offset;if(Le.isInstancedInterleavedBuffer){for(let bt=0;bt<ne.locationSize;bt++)b(ne.location+bt,Le.meshPerAttribute);O.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=Le.meshPerAttribute*Le.count)}else for(let bt=0;bt<ne.locationSize;bt++)w(ne.location+bt);i.bindBuffer(i.ARRAY_BUFFER,De);for(let bt=0;bt<ne.locationSize;bt++)V(ne.location+bt,J/ne.locationSize,Re,re,at*nt,(pt+J/ne.locationSize*bt)*nt,Te)}else{if(pe.isInstancedBufferAttribute){for(let Le=0;Le<ne.locationSize;Le++)b(ne.location+Le,pe.meshPerAttribute);O.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let Le=0;Le<ne.locationSize;Le++)w(ne.location+Le);i.bindBuffer(i.ARRAY_BUFFER,De);for(let Le=0;Le<ne.locationSize;Le++)V(ne.location+Le,J/ne.locationSize,Re,re,J*nt,J/ne.locationSize*Le*nt,Te)}}else if(X!==void 0){const re=X[ee];if(re!==void 0)switch(re.length){case 2:i.vertexAttrib2fv(ne.location,re);break;case 3:i.vertexAttrib3fv(ne.location,re);break;case 4:i.vertexAttrib4fv(ne.location,re);break;default:i.vertexAttrib1fv(ne.location,re)}}}}D()}function j(){L();for(const O in n){const F=n[O];for(const Y in F){const q=F[Y];for(const de in q)y(q[de].object),delete q[de];delete F[Y]}delete n[O]}}function G(O){if(n[O.id]===void 0)return;const F=n[O.id];for(const Y in F){const q=F[Y];for(const de in q)y(q[de].object),delete q[de];delete F[Y]}delete n[O.id]}function P(O){for(const F in n){const Y=n[F];if(Y[O.id]===void 0)continue;const q=Y[O.id];for(const de in q)y(q[de].object),delete q[de];delete Y[O.id]}}function L(){I(),l=!0,a!==s&&(a=s,p(a.object))}function I(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:u,reset:L,resetDefaultState:I,dispose:j,releaseStatesOfGeometry:G,releaseStatesOfProgram:P,initAttributes:C,enableAttribute:w,disableUnusedAttributes:D}}function pW(i,e,t){let n;function s(p){n=p}function a(p,y){i.drawArrays(n,p,y),t.update(y,n,1)}function l(p,y,_){_!==0&&(i.drawArraysInstanced(n,p,y,_),t.update(y,n,_))}function u(p,y,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,p,0,y,0,_);let T=0;for(let M=0;M<_;M++)T+=y[M];t.update(T,n,1)}function d(p,y,_,S){if(_===0)return;const T=e.get("WEBGL_multi_draw");if(T===null)for(let M=0;M<p.length;M++)l(p[M],y[M],S[M]);else{T.multiDrawArraysInstancedWEBGL(n,p,0,y,0,S,0,_);let M=0;for(let C=0;C<_;C++)M+=y[C]*S[C];t.update(M,n,1)}}this.setMode=s,this.render=a,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function mW(i,e,t,n){let s;function a(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function l(P){return!(P!==Nr&&n.convert(P)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(P){const L=P===Jm&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Io&&n.convert(P)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==wa&&!L)}function d(P){if(P==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const y=d(p);y!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",y,"instead."),p=y);const _=t.logarithmicDepthBuffer===!0,S=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),T=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),M=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C=i.getParameter(i.MAX_TEXTURE_SIZE),w=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),b=i.getParameter(i.MAX_VERTEX_ATTRIBS),D=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),V=i.getParameter(i.MAX_VARYING_VECTORS),z=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),j=M>0,G=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:d,textureFormatReadable:l,textureTypeReadable:u,precision:p,logarithmicDepthBuffer:_,reversedDepthBuffer:S,maxTextures:T,maxVertexTextures:M,maxTextureSize:C,maxCubemapSize:w,maxAttributes:b,maxVertexUniforms:D,maxVaryings:V,maxFragmentUniforms:z,vertexTextures:j,maxSamples:G}}function gW(i){const e=this;let t=null,n=0,s=!1,a=!1;const l=new xh,u=new mn,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(_,S){const T=_.length!==0||S||n!==0||s;return s=S,n=_.length,T},this.beginShadows=function(){a=!0,y(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(_,S){t=y(_,S,0)},this.setState=function(_,S,T){const M=_.clippingPlanes,C=_.clipIntersection,w=_.clipShadows,b=i.get(_);if(!s||M===null||M.length===0||a&&!w)a?y(null):p();else{const D=a?0:n,V=D*4;let z=b.clippingState||null;d.value=z,z=y(M,S,V,T);for(let j=0;j!==V;++j)z[j]=t[j];b.clippingState=z,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=D}};function p(){d.value!==t&&(d.value=t,d.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function y(_,S,T,M){const C=_!==null?_.length:0;let w=null;if(C!==0){if(w=d.value,M!==!0||w===null){const b=T+C*4,D=S.matrixWorldInverse;u.getNormalMatrix(D),(w===null||w.length<b)&&(w=new Float32Array(b));for(let V=0,z=T;V!==C;++V,z+=4)l.copy(_[V]).applyMatrix4(D,u),l.normal.toArray(w,z),w[z+3]=l.constant}d.value=w,d.needsUpdate=!0}return e.numPlanes=C,e.numIntersection=0,w}}function yW(i){let e=new WeakMap;function t(l,u){return u===d_?l.mapping=vu:u===p_&&(l.mapping=jh),l}function n(l){if(l&&l.isTexture){const u=l.mapping;if(u===d_||u===p_)if(e.has(l)){const d=e.get(l).texture;return t(d,l.mapping)}else{const d=l.image;if(d&&d.height>0){const p=new oU(d.height);return p.fromEquirectangularTexture(i,l),e.set(l,p),l.addEventListener("dispose",s),t(p.texture,l.mapping)}else return null}}return l}function s(l){const u=l.target;u.removeEventListener("dispose",s);const d=e.get(u);d!==void 0&&(e.delete(u),d.dispose())}function a(){e=new WeakMap}return{get:n,dispose:a}}const dm=4,iI=[.125,.215,.35,.446,.526,.582],sd=20,Lb=new J_,sI=new At;let Pb=null,Vb=0,zb=0,Bb=!1;const id=(1+Math.sqrt(5))/2,$p=1/id,rI=[new ie(-id,$p,0),new ie(id,$p,0),new ie(-$p,0,id),new ie($p,0,id),new ie(0,id,-$p),new ie(0,id,$p),new ie(-1,1,-1),new ie(1,1,-1),new ie(-1,1,1),new ie(1,1,1)],_W=new ie;class YA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,s=100,a={}){const{size:l=256,position:u=_W}=a;Pb=this._renderer.getRenderTarget(),Vb=this._renderer.getActiveCubeFace(),zb=this._renderer.getActiveMipmapLevel(),Bb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(l);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(e,n,s,d,u),t>0&&this._blur(d,0,0,t),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=lI(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=oI(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Pb,Vb,zb),this._renderer.xr.enabled=Bb,e.scissorTest=!1,iS(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===vu||e.mapping===jh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Pb=this._renderer.getRenderTarget(),Vb=this._renderer.getActiveCubeFace(),zb=this._renderer.getActiveMipmapLevel(),Bb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ws,minFilter:ws,generateMipmaps:!1,type:Jm,format:Nr,colorSpace:qh,depthBuffer:!1},s=aI(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=aI(e,t,n);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=vW(a)),this._blurMaterial=SW(a,e,t)}return s}_compileMaterial(e){const t=new vs(this._lodPlanes[0],e);this._renderer.compile(t,Lb)}_sceneToCubeUV(e,t,n,s,a){const d=new ks(90,1,t,n),p=[1,-1,1,1,1,1],y=[1,1,1,-1,-1,-1],_=this._renderer,S=_.autoClear,T=_.toneMapping;_.getClearColor(sI),_.toneMapping=pc,_.autoClear=!1,_.state.buffers.depth.getReversed()&&(_.setRenderTarget(s),_.clearDepth(),_.setRenderTarget(null));const C=new Kh({name:"PMREM.Background",side:oa,depthWrite:!1,depthTest:!1}),w=new vs(new Ud,C);let b=!1;const D=e.background;D?D.isColor&&(C.color.copy(D),e.background=null,b=!0):(C.color.copy(sI),b=!0);for(let V=0;V<6;V++){const z=V%3;z===0?(d.up.set(0,p[V],0),d.position.set(a.x,a.y,a.z),d.lookAt(a.x+y[V],a.y,a.z)):z===1?(d.up.set(0,0,p[V]),d.position.set(a.x,a.y,a.z),d.lookAt(a.x,a.y+y[V],a.z)):(d.up.set(0,p[V],0),d.position.set(a.x,a.y,a.z),d.lookAt(a.x,a.y,a.z+y[V]));const j=this._cubeSize;iS(s,z*j,V>2?j:0,j,j),_.setRenderTarget(s),b&&_.render(w,d),_.render(e,d)}w.geometry.dispose(),w.material.dispose(),_.toneMapping=T,_.autoClear=S,e.background=D}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===vu||e.mapping===jh;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=lI()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=oI());const a=s?this._cubemapMaterial:this._equirectMaterial,l=new vs(this._lodPlanes[0],a),u=a.uniforms;u.envMap.value=e;const d=this._cubeSize;iS(t,0,0,3*d,2*d),n.setRenderTarget(t),n.render(l,Lb)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let a=1;a<s;a++){const l=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),u=rI[(s-a-1)%rI.length];this._blur(e,a-1,a,l,u)}t.autoClear=n}_blur(e,t,n,s,a){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,n,s,"latitudinal",a),this._halfBlur(l,e,n,n,s,"longitudinal",a)}_halfBlur(e,t,n,s,a,l,u){const d=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const y=3,_=new vs(this._lodPlanes[s],p),S=p.uniforms,T=this._sizeLods[n]-1,M=isFinite(a)?Math.PI/(2*T):2*Math.PI/(2*sd-1),C=a/M,w=isFinite(a)?1+Math.floor(y*C):sd;w>sd&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${sd}`);const b=[];let D=0;for(let P=0;P<sd;++P){const L=P/C,I=Math.exp(-L*L/2);b.push(I),P===0?D+=I:P<w&&(D+=2*I)}for(let P=0;P<b.length;P++)b[P]=b[P]/D;S.envMap.value=e.texture,S.samples.value=w,S.weights.value=b,S.latitudinal.value=l==="latitudinal",u&&(S.poleAxis.value=u);const{_lodMax:V}=this;S.dTheta.value=M,S.mipInt.value=V-n;const z=this._sizeLods[s],j=3*z*(s>V-dm?s-V+dm:0),G=4*(this._cubeSize-z);iS(t,j,G,3*z,2*z),d.setRenderTarget(t),d.render(_,Lb)}}function vW(i){const e=[],t=[],n=[];let s=i;const a=i-dm+1+iI.length;for(let l=0;l<a;l++){const u=Math.pow(2,s);t.push(u);let d=1/u;l>i-dm?d=iI[l-i+dm-1]:l===0&&(d=0),n.push(d);const p=1/(u-2),y=-p,_=1+p,S=[y,y,_,y,_,_,y,y,_,_,y,_],T=6,M=6,C=3,w=2,b=1,D=new Float32Array(C*M*T),V=new Float32Array(w*M*T),z=new Float32Array(b*M*T);for(let G=0;G<T;G++){const P=G%3*2/3-1,L=G>2?0:-1,I=[P,L,0,P+2/3,L,0,P+2/3,L+1,0,P,L,0,P+2/3,L+1,0,P,L+1,0];D.set(I,C*M*G),V.set(S,w*M*G);const O=[G,G,G,G,G,G];z.set(O,b*M*G)}const j=new _n;j.setAttribute("position",new mi(D,C)),j.setAttribute("uv",new mi(V,w)),j.setAttribute("faceIndex",new mi(z,b)),e.push(j),s>dm&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function aI(i,e,t){const n=new _c(i,e,t);return n.texture.mapping=Zm,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function iS(i,e,t,n,s){i.viewport.set(e,t,n,s),i.scissor.set(e,t,n,s)}function SW(i,e,t){const n=new Float32Array(sd),s=new ie(0,1,0);return new vl({name:"SphericalGaussianBlur",defines:{n:sd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:Z1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:uu,depthTest:!1,depthWrite:!1})}function oI(){return new vl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Z1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:uu,depthTest:!1,depthWrite:!1})}function lI(){return new vl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Z1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:uu,depthTest:!1,depthWrite:!1})}function Z1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function EW(i){let e=new WeakMap,t=null;function n(u){if(u&&u.isTexture){const d=u.mapping,p=d===d_||d===p_,y=d===vu||d===jh;if(p||y){let _=e.get(u);const S=_!==void 0?_.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==S)return t===null&&(t=new YA(i)),_=p?t.fromEquirectangular(u,_):t.fromCubemap(u,_),_.texture.pmremVersion=u.pmremVersion,e.set(u,_),_.texture;if(_!==void 0)return _.texture;{const T=u.image;return p&&T&&T.height>0||y&&T&&s(T)?(t===null&&(t=new YA(i)),_=p?t.fromEquirectangular(u):t.fromCubemap(u),_.texture.pmremVersion=u.pmremVersion,e.set(u,_),u.addEventListener("dispose",a),_.texture):null}}}return u}function s(u){let d=0;const p=6;for(let y=0;y<p;y++)u[y]!==void 0&&d++;return d===p}function a(u){const d=u.target;d.removeEventListener("dispose",a);const p=e.get(d);p!==void 0&&(e.delete(d),p.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:l}}function xW(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return e[n]=s,s}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const s=t(n);return s===null&&x_("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function TW(i,e,t,n){const s={},a=new WeakMap;function l(_){const S=_.target;S.index!==null&&e.remove(S.index);for(const M in S.attributes)e.remove(S.attributes[M]);S.removeEventListener("dispose",l),delete s[S.id];const T=a.get(S);T&&(e.remove(T),a.delete(S)),n.releaseStatesOfGeometry(S),S.isInstancedBufferGeometry===!0&&delete S._maxInstanceCount,t.memory.geometries--}function u(_,S){return s[S.id]===!0||(S.addEventListener("dispose",l),s[S.id]=!0,t.memory.geometries++),S}function d(_){const S=_.attributes;for(const T in S)e.update(S[T],i.ARRAY_BUFFER)}function p(_){const S=[],T=_.index,M=_.attributes.position;let C=0;if(T!==null){const D=T.array;C=T.version;for(let V=0,z=D.length;V<z;V+=3){const j=D[V+0],G=D[V+1],P=D[V+2];S.push(j,G,G,P,P,j)}}else if(M!==void 0){const D=M.array;C=M.version;for(let V=0,z=D.length/3-1;V<z;V+=3){const j=V+0,G=V+1,P=V+2;S.push(j,G,G,P,P,j)}}else return;const w=new(eU(S)?b1:T1)(S,1);w.version=C;const b=a.get(_);b&&e.remove(b),a.set(_,w)}function y(_){const S=a.get(_);if(S){const T=_.index;T!==null&&S.version<T.version&&p(_)}else p(_);return a.get(_)}return{get:u,update:d,getWireframeAttribute:y}}function bW(i,e,t){let n;function s(S){n=S}let a,l;function u(S){a=S.type,l=S.bytesPerElement}function d(S,T){i.drawElements(n,T,a,S*l),t.update(T,n,1)}function p(S,T,M){M!==0&&(i.drawElementsInstanced(n,T,a,S*l,M),t.update(T,n,M))}function y(S,T,M){if(M===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,T,0,a,S,0,M);let w=0;for(let b=0;b<M;b++)w+=T[b];t.update(w,n,1)}function _(S,T,M,C){if(M===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let b=0;b<S.length;b++)p(S[b]/l,T[b],C[b]);else{w.multiDrawElementsInstancedWEBGL(n,T,0,a,S,0,C,0,M);let b=0;for(let D=0;D<M;D++)b+=T[D]*C[D];t.update(b,n,1)}}this.setMode=s,this.setIndex=u,this.render=d,this.renderInstances=p,this.renderMultiDraw=y,this.renderMultiDrawInstances=_}function AW(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,l,u){switch(t.calls++,l){case i.TRIANGLES:t.triangles+=u*(a/3);break;case i.LINES:t.lines+=u*(a/2);break;case i.LINE_STRIP:t.lines+=u*(a-1);break;case i.LINE_LOOP:t.lines+=u*a;break;case i.POINTS:t.points+=u*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function MW(i,e,t){const n=new WeakMap,s=new Yn;function a(l,u,d){const p=l.morphTargetInfluences,y=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,_=y!==void 0?y.length:0;let S=n.get(u);if(S===void 0||S.count!==_){let O=function(){L.dispose(),n.delete(u),u.removeEventListener("dispose",O)};var T=O;S!==void 0&&S.texture.dispose();const M=u.morphAttributes.position!==void 0,C=u.morphAttributes.normal!==void 0,w=u.morphAttributes.color!==void 0,b=u.morphAttributes.position||[],D=u.morphAttributes.normal||[],V=u.morphAttributes.color||[];let z=0;M===!0&&(z=1),C===!0&&(z=2),w===!0&&(z=3);let j=u.attributes.position.count*z,G=1;j>e.maxTextureSize&&(G=Math.ceil(j/e.maxTextureSize),j=e.maxTextureSize);const P=new Float32Array(j*G*4*_),L=new Ex(P,j,G,_);L.type=wa,L.needsUpdate=!0;const I=z*4;for(let F=0;F<_;F++){const Y=b[F],q=D[F],de=V[F],ge=j*G*4*F;for(let X=0;X<Y.count;X++){const ee=X*I;M===!0&&(s.fromBufferAttribute(Y,X),P[ge+ee+0]=s.x,P[ge+ee+1]=s.y,P[ge+ee+2]=s.z,P[ge+ee+3]=0),C===!0&&(s.fromBufferAttribute(q,X),P[ge+ee+4]=s.x,P[ge+ee+5]=s.y,P[ge+ee+6]=s.z,P[ge+ee+7]=0),w===!0&&(s.fromBufferAttribute(de,X),P[ge+ee+8]=s.x,P[ge+ee+9]=s.y,P[ge+ee+10]=s.z,P[ge+ee+11]=de.itemSize===4?s.w:1)}}S={count:_,texture:L,size:new $e(j,G)},n.set(u,S),u.addEventListener("dispose",O)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)d.getUniforms().setValue(i,"morphTexture",l.morphTexture,t);else{let M=0;for(let w=0;w<p.length;w++)M+=p[w];const C=u.morphTargetsRelative?1:1-M;d.getUniforms().setValue(i,"morphTargetBaseInfluence",C),d.getUniforms().setValue(i,"morphTargetInfluences",p)}d.getUniforms().setValue(i,"morphTargetsTexture",S.texture,t),d.getUniforms().setValue(i,"morphTargetsTextureSize",S.size)}return{update:a}}function wW(i,e,t,n){let s=new WeakMap;function a(d){const p=n.render.frame,y=d.geometry,_=e.get(d,y);if(s.get(_)!==p&&(e.update(_),s.set(_,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",u)===!1&&d.addEventListener("dispose",u),s.get(d)!==p&&(t.update(d.instanceMatrix,i.ARRAY_BUFFER),d.instanceColor!==null&&t.update(d.instanceColor,i.ARRAY_BUFFER),s.set(d,p))),d.isSkinnedMesh){const S=d.skeleton;s.get(S)!==p&&(S.update(),s.set(S,p))}return _}function l(){s=new WeakMap}function u(d){const p=d.target;p.removeEventListener("dispose",u),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:a,dispose:l}}const aL=new Ji,cI=new C1(1,1),oL=new Ex,lL=new xx,cL=new q_,uI=[],hI=[],fI=new Float32Array(16),dI=new Float32Array(9),pI=new Float32Array(4);function ng(i,e,t){const n=i[0];if(n<=0||n>0)return i;const s=e*t;let a=uI[s];if(a===void 0&&(a=new Float32Array(s),uI[s]=a),e!==0){n.toArray(a,0);for(let l=1,u=0;l!==e;++l)u+=t,i[l].toArray(a,u)}return a}function Cs(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Is(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function jx(i,e){let t=hI[e];t===void 0&&(t=new Int32Array(e),hI[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function RW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function CW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Cs(t,e))return;i.uniform2fv(this.addr,e),Is(t,e)}}function IW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Cs(t,e))return;i.uniform3fv(this.addr,e),Is(t,e)}}function DW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Cs(t,e))return;i.uniform4fv(this.addr,e),Is(t,e)}}function NW(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Cs(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Is(t,e)}else{if(Cs(t,n))return;pI.set(n),i.uniformMatrix2fv(this.addr,!1,pI),Is(t,n)}}function OW(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Cs(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Is(t,e)}else{if(Cs(t,n))return;dI.set(n),i.uniformMatrix3fv(this.addr,!1,dI),Is(t,n)}}function UW(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Cs(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Is(t,e)}else{if(Cs(t,n))return;fI.set(n),i.uniformMatrix4fv(this.addr,!1,fI),Is(t,n)}}function LW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function PW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Cs(t,e))return;i.uniform2iv(this.addr,e),Is(t,e)}}function VW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Cs(t,e))return;i.uniform3iv(this.addr,e),Is(t,e)}}function zW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Cs(t,e))return;i.uniform4iv(this.addr,e),Is(t,e)}}function BW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function FW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Cs(t,e))return;i.uniform2uiv(this.addr,e),Is(t,e)}}function HW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Cs(t,e))return;i.uniform3uiv(this.addr,e),Is(t,e)}}function kW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Cs(t,e))return;i.uniform4uiv(this.addr,e),Is(t,e)}}function GW(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let a;this.type===i.SAMPLER_2D_SHADOW?(cI.compareFunction=S1,a=cI):a=aL,t.setTexture2D(e||a,s)}function jW(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||lL,s)}function qW(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||cL,s)}function XW(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||oL,s)}function WW(i){switch(i){case 5126:return RW;case 35664:return CW;case 35665:return IW;case 35666:return DW;case 35674:return NW;case 35675:return OW;case 35676:return UW;case 5124:case 35670:return LW;case 35667:case 35671:return PW;case 35668:case 35672:return VW;case 35669:case 35673:return zW;case 5125:return BW;case 36294:return FW;case 36295:return HW;case 36296:return kW;case 35678:case 36198:case 36298:case 36306:case 35682:return GW;case 35679:case 36299:case 36307:return jW;case 35680:case 36300:case 36308:case 36293:return qW;case 36289:case 36303:case 36311:case 36292:return XW}}function YW(i,e){i.uniform1fv(this.addr,e)}function KW(i,e){const t=ng(e,this.size,2);i.uniform2fv(this.addr,t)}function QW(i,e){const t=ng(e,this.size,3);i.uniform3fv(this.addr,t)}function ZW(i,e){const t=ng(e,this.size,4);i.uniform4fv(this.addr,t)}function JW(i,e){const t=ng(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function $W(i,e){const t=ng(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function eY(i,e){const t=ng(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function tY(i,e){i.uniform1iv(this.addr,e)}function nY(i,e){i.uniform2iv(this.addr,e)}function iY(i,e){i.uniform3iv(this.addr,e)}function sY(i,e){i.uniform4iv(this.addr,e)}function rY(i,e){i.uniform1uiv(this.addr,e)}function aY(i,e){i.uniform2uiv(this.addr,e)}function oY(i,e){i.uniform3uiv(this.addr,e)}function lY(i,e){i.uniform4uiv(this.addr,e)}function cY(i,e,t){const n=this.cache,s=e.length,a=jx(t,s);Cs(n,a)||(i.uniform1iv(this.addr,a),Is(n,a));for(let l=0;l!==s;++l)t.setTexture2D(e[l]||aL,a[l])}function uY(i,e,t){const n=this.cache,s=e.length,a=jx(t,s);Cs(n,a)||(i.uniform1iv(this.addr,a),Is(n,a));for(let l=0;l!==s;++l)t.setTexture3D(e[l]||lL,a[l])}function hY(i,e,t){const n=this.cache,s=e.length,a=jx(t,s);Cs(n,a)||(i.uniform1iv(this.addr,a),Is(n,a));for(let l=0;l!==s;++l)t.setTextureCube(e[l]||cL,a[l])}function fY(i,e,t){const n=this.cache,s=e.length,a=jx(t,s);Cs(n,a)||(i.uniform1iv(this.addr,a),Is(n,a));for(let l=0;l!==s;++l)t.setTexture2DArray(e[l]||oL,a[l])}function dY(i){switch(i){case 5126:return YW;case 35664:return KW;case 35665:return QW;case 35666:return ZW;case 35674:return JW;case 35675:return $W;case 35676:return eY;case 5124:case 35670:return tY;case 35667:case 35671:return nY;case 35668:case 35672:return iY;case 35669:case 35673:return sY;case 5125:return rY;case 36294:return aY;case 36295:return oY;case 36296:return lY;case 35678:case 36198:case 36298:case 36306:case 35682:return cY;case 35679:case 36299:case 36307:return uY;case 35680:case 36300:case 36308:case 36293:return hY;case 36289:case 36303:case 36311:case 36292:return fY}}class pY{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=WW(t.type)}}class mY{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=dY(t.type)}}class gY{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let a=0,l=s.length;a!==l;++a){const u=s[a];u.setValue(e,t[u.id],n)}}}const Fb=/(\w+)(\])?(\[|\.)?/g;function mI(i,e){i.seq.push(e),i.map[e.id]=e}function yY(i,e,t){const n=i.name,s=n.length;for(Fb.lastIndex=0;;){const a=Fb.exec(n),l=Fb.lastIndex;let u=a[1];const d=a[2]==="]",p=a[3];if(d&&(u=u|0),p===void 0||p==="["&&l+2===s){mI(t,p===void 0?new pY(u,i,e):new mY(u,i,e));break}else{let _=t.map[u];_===void 0&&(_=new gY(u),mI(t,_)),t=_}}}class bS{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const a=e.getActiveUniform(t,s),l=e.getUniformLocation(t,a.name);yY(a,l,this)}}setValue(e,t,n,s){const a=this.map[t];a!==void 0&&a.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let a=0,l=t.length;a!==l;++a){const u=t[a],d=n[u.id];d.needsUpdate!==!1&&u.setValue(e,d.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,a=e.length;s!==a;++s){const l=e[s];l.id in t&&n.push(l)}return n}}function gI(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const _Y=37297;let vY=0;function SY(i,e){const t=i.split(`
`),n=[],s=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let l=s;l<a;l++){const u=l+1;n.push(`${u===e?">":" "} ${u}: ${t[l]}`)}return n.join(`
`)}const yI=new mn;function EY(i){Gn._getMatrix(yI,Gn.workingColorSpace,i);const e=`mat3( ${yI.elements.map(t=>t.toFixed(4))} )`;switch(Gn.getTransfer(i)){case v_:return[e,"LinearTransferOETF"];case ci:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function _I(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),a=(i.getShaderInfoLog(e)||"").trim();if(n&&a==="")return"";const l=/ERROR: 0:(\d+)/.exec(a);if(l){const u=parseInt(l[1]);return t.toUpperCase()+`

`+a+`

`+SY(i.getShaderSource(e),u)}else return a}function xY(i,e){const t=EY(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function TY(i,e){let t;switch(e){case UO:t="Linear";break;case LO:t="Reinhard";break;case PO:t="Cineon";break;case u1:t="ACESFilmic";break;case zO:t="AgX";break;case BO:t="Neutral";break;case VO:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const sS=new ie;function bY(){Gn.getLuminanceCoefficients(sS);const i=sS.x.toFixed(4),e=sS.y.toFixed(4),t=sS.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function AY(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(By).join(`
`)}function MY(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function wY(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const a=i.getActiveAttrib(e,s),l=a.name;let u=1;a.type===i.FLOAT_MAT2&&(u=2),a.type===i.FLOAT_MAT3&&(u=3),a.type===i.FLOAT_MAT4&&(u=4),t[l]={type:a.type,location:i.getAttribLocation(e,l),locationSize:u}}return t}function By(i){return i!==""}function vI(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function SI(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const RY=/^[ \t]*#include +<([\w\d./]+)>/gm;function KA(i){return i.replace(RY,IY)}const CY=new Map;function IY(i,e){let t=Tn[e];if(t===void 0){const n=CY.get(e);if(n!==void 0)t=Tn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return KA(t)}const DY=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function EI(i){return i.replace(DY,NY)}function NY(i,e,t,n){let s="";for(let a=parseInt(e);a<parseInt(t);a++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return s}function xI(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function OY(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===fx?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===Xy?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===ll&&(e="SHADOWMAP_TYPE_VSM"),e}function UY(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case vu:case jh:e="ENVMAP_TYPE_CUBE";break;case Zm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function LY(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case jh:e="ENVMAP_MODE_REFRACTION";break}return e}function PY(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case G_:e="ENVMAP_BLENDING_MULTIPLY";break;case NO:e="ENVMAP_BLENDING_MIX";break;case OO:e="ENVMAP_BLENDING_ADD";break}return e}function VY(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function zY(i,e,t,n){const s=i.getContext(),a=t.defines;let l=t.vertexShader,u=t.fragmentShader;const d=OY(t),p=UY(t),y=LY(t),_=PY(t),S=VY(t),T=AY(t),M=MY(a),C=s.createProgram();let w,b,D=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(By).join(`
`),w.length>0&&(w+=`
`),b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(By).join(`
`),b.length>0&&(b+=`
`)):(w=[xI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+y:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(By).join(`
`),b=[xI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+y:"",t.envMap?"#define "+_:"",S?"#define CUBEUV_TEXEL_WIDTH "+S.texelWidth:"",S?"#define CUBEUV_TEXEL_HEIGHT "+S.texelHeight:"",S?"#define CUBEUV_MAX_MIP "+S.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==pc?"#define TONE_MAPPING":"",t.toneMapping!==pc?Tn.tonemapping_pars_fragment:"",t.toneMapping!==pc?TY("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Tn.colorspace_pars_fragment,xY("linearToOutputTexel",t.outputColorSpace),bY(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(By).join(`
`)),l=KA(l),l=vI(l,t),l=SI(l,t),u=KA(u),u=vI(u,t),u=SI(u,t),l=EI(l),u=EI(u),t.isRawShaderMaterial!==!0&&(D=`#version 300 es
`,w=[T,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,b=["#define varying in",t.glslVersion===FA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===FA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const V=D+w+l,z=D+b+u,j=gI(s,s.VERTEX_SHADER,V),G=gI(s,s.FRAGMENT_SHADER,z);s.attachShader(C,j),s.attachShader(C,G),t.index0AttributeName!==void 0?s.bindAttribLocation(C,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(C,0,"position"),s.linkProgram(C);function P(F){if(i.debug.checkShaderErrors){const Y=s.getProgramInfoLog(C)||"",q=s.getShaderInfoLog(j)||"",de=s.getShaderInfoLog(G)||"",ge=Y.trim(),X=q.trim(),ee=de.trim();let ne=!0,pe=!0;if(s.getProgramParameter(C,s.LINK_STATUS)===!1)if(ne=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,C,j,G);else{const re=_I(s,j,"vertex"),J=_I(s,G,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(C,s.VALIDATE_STATUS)+`

Material Name: `+F.name+`
Material Type: `+F.type+`

Program Info Log: `+ge+`
`+re+`
`+J)}else ge!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ge):(X===""||ee==="")&&(pe=!1);pe&&(F.diagnostics={runnable:ne,programLog:ge,vertexShader:{log:X,prefix:w},fragmentShader:{log:ee,prefix:b}})}s.deleteShader(j),s.deleteShader(G),L=new bS(s,C),I=wY(s,C)}let L;this.getUniforms=function(){return L===void 0&&P(this),L};let I;this.getAttributes=function(){return I===void 0&&P(this),I};let O=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=s.getProgramParameter(C,_Y)),O},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(C),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=vY++,this.cacheKey=e,this.usedTimes=1,this.program=C,this.vertexShader=j,this.fragmentShader=G,this}let BY=0;class FY{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(t),a=this._getShaderStage(n),l=this._getShaderCacheForMaterial(e);return l.has(s)===!1&&(l.add(s),s.usedTimes++),l.has(a)===!1&&(l.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new HY(e),t.set(e,n)),n}}class HY{constructor(e){this.id=BY++,this.code=e,this.usedTimes=0}}function kY(i,e,t,n,s,a,l){const u=new Um,d=new FY,p=new Set,y=[],_=s.logarithmicDepthBuffer,S=s.vertexTextures;let T=s.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function C(I){return p.add(I),I===0?"uv":`uv${I}`}function w(I,O,F,Y,q){const de=Y.fog,ge=q.geometry,X=I.isMeshStandardMaterial?Y.environment:null,ee=(I.isMeshStandardMaterial?t:e).get(I.envMap||X),ne=ee&&ee.mapping===Zm?ee.image.height:null,pe=M[I.type];I.precision!==null&&(T=s.getMaxPrecision(I.precision),T!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",T,"instead."));const re=ge.morphAttributes.position||ge.morphAttributes.normal||ge.morphAttributes.color,J=re!==void 0?re.length:0;let le=0;ge.morphAttributes.position!==void 0&&(le=1),ge.morphAttributes.normal!==void 0&&(le=2),ge.morphAttributes.color!==void 0&&(le=3);let De,Re,nt,Te;if(pe){const sn=cl[pe];De=sn.vertexShader,Re=sn.fragmentShader}else De=I.vertexShader,Re=I.fragmentShader,d.update(I),nt=d.getVertexShaderID(I),Te=d.getFragmentShaderID(I);const Le=i.getRenderTarget(),at=i.state.buffers.depth.getReversed(),pt=q.isInstancedMesh===!0,bt=q.isBatchedMesh===!0,Zt=!!I.map,An=!!I.matcap,se=!!ee,qe=!!I.aoMap,ke=!!I.lightMap,Be=!!I.bumpMap,Ve=!!I.normalMap,ut=!!I.displacementMap,je=!!I.emissiveMap,Qe=!!I.metalnessMap,Vt=!!I.roughnessMap,Wt=I.anisotropy>0,te=I.clearcoat>0,W=I.dispersion>0,Se=I.iridescence>0,Oe=I.sheen>0,Ze=I.transmission>0,Pe=Wt&&!!I.anisotropyMap,It=te&&!!I.clearcoatMap,lt=te&&!!I.clearcoatNormalMap,Mt=te&&!!I.clearcoatRoughnessMap,wt=Se&&!!I.iridescenceMap,Ke=Se&&!!I.iridescenceThicknessMap,st=Oe&&!!I.sheenColorMap,Ct=Oe&&!!I.sheenRoughnessMap,mt=!!I.specularMap,dt=!!I.specularColorMap,Gt=!!I.specularIntensityMap,he=Ze&&!!I.transmissionMap,tt=Ze&&!!I.thicknessMap,ot=!!I.gradientMap,ft=!!I.alphaMap,et=I.alphaTest>0,Fe=!!I.alphaHash,vt=!!I.extensions;let qt=pc;I.toneMapped&&(Le===null||Le.isXRRenderTarget===!0)&&(qt=i.toneMapping);const Rn={shaderID:pe,shaderType:I.type,shaderName:I.name,vertexShader:De,fragmentShader:Re,defines:I.defines,customVertexShaderID:nt,customFragmentShaderID:Te,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:T,batching:bt,batchingColor:bt&&q._colorsTexture!==null,instancing:pt,instancingColor:pt&&q.instanceColor!==null,instancingMorph:pt&&q.morphTexture!==null,supportsVertexTextures:S,outputColorSpace:Le===null?i.outputColorSpace:Le.isXRRenderTarget===!0?Le.texture.colorSpace:qh,alphaToCoverage:!!I.alphaToCoverage,map:Zt,matcap:An,envMap:se,envMapMode:se&&ee.mapping,envMapCubeUVHeight:ne,aoMap:qe,lightMap:ke,bumpMap:Be,normalMap:Ve,displacementMap:S&&ut,emissiveMap:je,normalMapObjectSpace:Ve&&I.normalMapType===XO,normalMapTangentSpace:Ve&&I.normalMapType===Yh,metalnessMap:Qe,roughnessMap:Vt,anisotropy:Wt,anisotropyMap:Pe,clearcoat:te,clearcoatMap:It,clearcoatNormalMap:lt,clearcoatRoughnessMap:Mt,dispersion:W,iridescence:Se,iridescenceMap:wt,iridescenceThicknessMap:Ke,sheen:Oe,sheenColorMap:st,sheenRoughnessMap:Ct,specularMap:mt,specularColorMap:dt,specularIntensityMap:Gt,transmission:Ze,transmissionMap:he,thicknessMap:tt,gradientMap:ot,opaque:I.transparent===!1&&I.blending===hd&&I.alphaToCoverage===!1,alphaMap:ft,alphaTest:et,alphaHash:Fe,combine:I.combine,mapUv:Zt&&C(I.map.channel),aoMapUv:qe&&C(I.aoMap.channel),lightMapUv:ke&&C(I.lightMap.channel),bumpMapUv:Be&&C(I.bumpMap.channel),normalMapUv:Ve&&C(I.normalMap.channel),displacementMapUv:ut&&C(I.displacementMap.channel),emissiveMapUv:je&&C(I.emissiveMap.channel),metalnessMapUv:Qe&&C(I.metalnessMap.channel),roughnessMapUv:Vt&&C(I.roughnessMap.channel),anisotropyMapUv:Pe&&C(I.anisotropyMap.channel),clearcoatMapUv:It&&C(I.clearcoatMap.channel),clearcoatNormalMapUv:lt&&C(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Mt&&C(I.clearcoatRoughnessMap.channel),iridescenceMapUv:wt&&C(I.iridescenceMap.channel),iridescenceThicknessMapUv:Ke&&C(I.iridescenceThicknessMap.channel),sheenColorMapUv:st&&C(I.sheenColorMap.channel),sheenRoughnessMapUv:Ct&&C(I.sheenRoughnessMap.channel),specularMapUv:mt&&C(I.specularMap.channel),specularColorMapUv:dt&&C(I.specularColorMap.channel),specularIntensityMapUv:Gt&&C(I.specularIntensityMap.channel),transmissionMapUv:he&&C(I.transmissionMap.channel),thicknessMapUv:tt&&C(I.thicknessMap.channel),alphaMapUv:ft&&C(I.alphaMap.channel),vertexTangents:!!ge.attributes.tangent&&(Ve||Wt),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!ge.attributes.color&&ge.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!ge.attributes.uv&&(Zt||ft),fog:!!de,useFog:I.fog===!0,fogExp2:!!de&&de.isFogExp2,flatShading:I.flatShading===!0&&I.wireframe===!1,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:_,reversedDepthBuffer:at,skinning:q.isSkinnedMesh===!0,morphTargets:ge.morphAttributes.position!==void 0,morphNormals:ge.morphAttributes.normal!==void 0,morphColors:ge.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:le,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:I.dithering,shadowMapEnabled:i.shadowMap.enabled&&F.length>0,shadowMapType:i.shadowMap.type,toneMapping:qt,decodeVideoTexture:Zt&&I.map.isVideoTexture===!0&&Gn.getTransfer(I.map.colorSpace)===ci,decodeVideoTextureEmissive:je&&I.emissiveMap.isVideoTexture===!0&&Gn.getTransfer(I.emissiveMap.colorSpace)===ci,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===rc,flipSided:I.side===oa,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:vt&&I.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(vt&&I.extensions.multiDraw===!0||bt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return Rn.vertexUv1s=p.has(1),Rn.vertexUv2s=p.has(2),Rn.vertexUv3s=p.has(3),p.clear(),Rn}function b(I){const O=[];if(I.shaderID?O.push(I.shaderID):(O.push(I.customVertexShaderID),O.push(I.customFragmentShaderID)),I.defines!==void 0)for(const F in I.defines)O.push(F),O.push(I.defines[F]);return I.isRawShaderMaterial===!1&&(D(O,I),V(O,I),O.push(i.outputColorSpace)),O.push(I.customProgramCacheKey),O.join()}function D(I,O){I.push(O.precision),I.push(O.outputColorSpace),I.push(O.envMapMode),I.push(O.envMapCubeUVHeight),I.push(O.mapUv),I.push(O.alphaMapUv),I.push(O.lightMapUv),I.push(O.aoMapUv),I.push(O.bumpMapUv),I.push(O.normalMapUv),I.push(O.displacementMapUv),I.push(O.emissiveMapUv),I.push(O.metalnessMapUv),I.push(O.roughnessMapUv),I.push(O.anisotropyMapUv),I.push(O.clearcoatMapUv),I.push(O.clearcoatNormalMapUv),I.push(O.clearcoatRoughnessMapUv),I.push(O.iridescenceMapUv),I.push(O.iridescenceThicknessMapUv),I.push(O.sheenColorMapUv),I.push(O.sheenRoughnessMapUv),I.push(O.specularMapUv),I.push(O.specularColorMapUv),I.push(O.specularIntensityMapUv),I.push(O.transmissionMapUv),I.push(O.thicknessMapUv),I.push(O.combine),I.push(O.fogExp2),I.push(O.sizeAttenuation),I.push(O.morphTargetsCount),I.push(O.morphAttributeCount),I.push(O.numDirLights),I.push(O.numPointLights),I.push(O.numSpotLights),I.push(O.numSpotLightMaps),I.push(O.numHemiLights),I.push(O.numRectAreaLights),I.push(O.numDirLightShadows),I.push(O.numPointLightShadows),I.push(O.numSpotLightShadows),I.push(O.numSpotLightShadowsWithMaps),I.push(O.numLightProbes),I.push(O.shadowMapType),I.push(O.toneMapping),I.push(O.numClippingPlanes),I.push(O.numClipIntersection),I.push(O.depthPacking)}function V(I,O){u.disableAll(),O.supportsVertexTextures&&u.enable(0),O.instancing&&u.enable(1),O.instancingColor&&u.enable(2),O.instancingMorph&&u.enable(3),O.matcap&&u.enable(4),O.envMap&&u.enable(5),O.normalMapObjectSpace&&u.enable(6),O.normalMapTangentSpace&&u.enable(7),O.clearcoat&&u.enable(8),O.iridescence&&u.enable(9),O.alphaTest&&u.enable(10),O.vertexColors&&u.enable(11),O.vertexAlphas&&u.enable(12),O.vertexUv1s&&u.enable(13),O.vertexUv2s&&u.enable(14),O.vertexUv3s&&u.enable(15),O.vertexTangents&&u.enable(16),O.anisotropy&&u.enable(17),O.alphaHash&&u.enable(18),O.batching&&u.enable(19),O.dispersion&&u.enable(20),O.batchingColor&&u.enable(21),O.gradientMap&&u.enable(22),I.push(u.mask),u.disableAll(),O.fog&&u.enable(0),O.useFog&&u.enable(1),O.flatShading&&u.enable(2),O.logarithmicDepthBuffer&&u.enable(3),O.reversedDepthBuffer&&u.enable(4),O.skinning&&u.enable(5),O.morphTargets&&u.enable(6),O.morphNormals&&u.enable(7),O.morphColors&&u.enable(8),O.premultipliedAlpha&&u.enable(9),O.shadowMapEnabled&&u.enable(10),O.doubleSided&&u.enable(11),O.flipSided&&u.enable(12),O.useDepthPacking&&u.enable(13),O.dithering&&u.enable(14),O.transmission&&u.enable(15),O.sheen&&u.enable(16),O.opaque&&u.enable(17),O.pointsUvs&&u.enable(18),O.decodeVideoTexture&&u.enable(19),O.decodeVideoTextureEmissive&&u.enable(20),O.alphaToCoverage&&u.enable(21),I.push(u.mask)}function z(I){const O=M[I.type];let F;if(O){const Y=cl[O];F=rU.clone(Y.uniforms)}else F=I.uniforms;return F}function j(I,O){let F;for(let Y=0,q=y.length;Y<q;Y++){const de=y[Y];if(de.cacheKey===O){F=de,++F.usedTimes;break}}return F===void 0&&(F=new zY(i,O,I,a),y.push(F)),F}function G(I){if(--I.usedTimes===0){const O=y.indexOf(I);y[O]=y[y.length-1],y.pop(),I.destroy()}}function P(I){d.remove(I)}function L(){d.dispose()}return{getParameters:w,getProgramCacheKey:b,getUniforms:z,acquireProgram:j,releaseProgram:G,releaseShaderCache:P,programs:y,dispose:L}}function GY(){let i=new WeakMap;function e(l){return i.has(l)}function t(l){let u=i.get(l);return u===void 0&&(u={},i.set(l,u)),u}function n(l){i.delete(l)}function s(l,u,d){i.get(l)[u]=d}function a(){i=new WeakMap}return{has:e,get:t,remove:n,update:s,dispose:a}}function jY(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function TI(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function bI(){const i=[];let e=0;const t=[],n=[],s=[];function a(){e=0,t.length=0,n.length=0,s.length=0}function l(_,S,T,M,C,w){let b=i[e];return b===void 0?(b={id:_.id,object:_,geometry:S,material:T,groupOrder:M,renderOrder:_.renderOrder,z:C,group:w},i[e]=b):(b.id=_.id,b.object=_,b.geometry=S,b.material=T,b.groupOrder=M,b.renderOrder=_.renderOrder,b.z=C,b.group=w),e++,b}function u(_,S,T,M,C,w){const b=l(_,S,T,M,C,w);T.transmission>0?n.push(b):T.transparent===!0?s.push(b):t.push(b)}function d(_,S,T,M,C,w){const b=l(_,S,T,M,C,w);T.transmission>0?n.unshift(b):T.transparent===!0?s.unshift(b):t.unshift(b)}function p(_,S){t.length>1&&t.sort(_||jY),n.length>1&&n.sort(S||TI),s.length>1&&s.sort(S||TI)}function y(){for(let _=e,S=i.length;_<S;_++){const T=i[_];if(T.id===null)break;T.id=null,T.object=null,T.geometry=null,T.material=null,T.group=null}}return{opaque:t,transmissive:n,transparent:s,init:a,push:u,unshift:d,finish:y,sort:p}}function qY(){let i=new WeakMap;function e(n,s){const a=i.get(n);let l;return a===void 0?(l=new bI,i.set(n,[l])):s>=a.length?(l=new bI,a.push(l)):l=a[s],l}function t(){i=new WeakMap}return{get:e,dispose:t}}function XY(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ie,color:new At};break;case"SpotLight":t={position:new ie,direction:new ie,color:new At,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ie,color:new At,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ie,skyColor:new At,groundColor:new At};break;case"RectAreaLight":t={color:new At,position:new ie,halfWidth:new ie,halfHeight:new ie};break}return i[e.id]=t,t}}}function WY(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let YY=0;function KY(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function QY(i){const e=new XY,t=WY(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)n.probe.push(new ie);const s=new ie,a=new tn,l=new tn;function u(p){let y=0,_=0,S=0;for(let I=0;I<9;I++)n.probe[I].set(0,0,0);let T=0,M=0,C=0,w=0,b=0,D=0,V=0,z=0,j=0,G=0,P=0;p.sort(KY);for(let I=0,O=p.length;I<O;I++){const F=p[I],Y=F.color,q=F.intensity,de=F.distance,ge=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)y+=Y.r*q,_+=Y.g*q,S+=Y.b*q;else if(F.isLightProbe){for(let X=0;X<9;X++)n.probe[X].addScaledVector(F.sh.coefficients[X],q);P++}else if(F.isDirectionalLight){const X=e.get(F);if(X.color.copy(F.color).multiplyScalar(F.intensity),F.castShadow){const ee=F.shadow,ne=t.get(F);ne.shadowIntensity=ee.intensity,ne.shadowBias=ee.bias,ne.shadowNormalBias=ee.normalBias,ne.shadowRadius=ee.radius,ne.shadowMapSize=ee.mapSize,n.directionalShadow[T]=ne,n.directionalShadowMap[T]=ge,n.directionalShadowMatrix[T]=F.shadow.matrix,D++}n.directional[T]=X,T++}else if(F.isSpotLight){const X=e.get(F);X.position.setFromMatrixPosition(F.matrixWorld),X.color.copy(Y).multiplyScalar(q),X.distance=de,X.coneCos=Math.cos(F.angle),X.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),X.decay=F.decay,n.spot[C]=X;const ee=F.shadow;if(F.map&&(n.spotLightMap[j]=F.map,j++,ee.updateMatrices(F),F.castShadow&&G++),n.spotLightMatrix[C]=ee.matrix,F.castShadow){const ne=t.get(F);ne.shadowIntensity=ee.intensity,ne.shadowBias=ee.bias,ne.shadowNormalBias=ee.normalBias,ne.shadowRadius=ee.radius,ne.shadowMapSize=ee.mapSize,n.spotShadow[C]=ne,n.spotShadowMap[C]=ge,z++}C++}else if(F.isRectAreaLight){const X=e.get(F);X.color.copy(Y).multiplyScalar(q),X.halfWidth.set(F.width*.5,0,0),X.halfHeight.set(0,F.height*.5,0),n.rectArea[w]=X,w++}else if(F.isPointLight){const X=e.get(F);if(X.color.copy(F.color).multiplyScalar(F.intensity),X.distance=F.distance,X.decay=F.decay,F.castShadow){const ee=F.shadow,ne=t.get(F);ne.shadowIntensity=ee.intensity,ne.shadowBias=ee.bias,ne.shadowNormalBias=ee.normalBias,ne.shadowRadius=ee.radius,ne.shadowMapSize=ee.mapSize,ne.shadowCameraNear=ee.camera.near,ne.shadowCameraFar=ee.camera.far,n.pointShadow[M]=ne,n.pointShadowMap[M]=ge,n.pointShadowMatrix[M]=F.shadow.matrix,V++}n.point[M]=X,M++}else if(F.isHemisphereLight){const X=e.get(F);X.skyColor.copy(F.color).multiplyScalar(q),X.groundColor.copy(F.groundColor).multiplyScalar(q),n.hemi[b]=X,b++}}w>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=_t.LTC_FLOAT_1,n.rectAreaLTC2=_t.LTC_FLOAT_2):(n.rectAreaLTC1=_t.LTC_HALF_1,n.rectAreaLTC2=_t.LTC_HALF_2)),n.ambient[0]=y,n.ambient[1]=_,n.ambient[2]=S;const L=n.hash;(L.directionalLength!==T||L.pointLength!==M||L.spotLength!==C||L.rectAreaLength!==w||L.hemiLength!==b||L.numDirectionalShadows!==D||L.numPointShadows!==V||L.numSpotShadows!==z||L.numSpotMaps!==j||L.numLightProbes!==P)&&(n.directional.length=T,n.spot.length=C,n.rectArea.length=w,n.point.length=M,n.hemi.length=b,n.directionalShadow.length=D,n.directionalShadowMap.length=D,n.pointShadow.length=V,n.pointShadowMap.length=V,n.spotShadow.length=z,n.spotShadowMap.length=z,n.directionalShadowMatrix.length=D,n.pointShadowMatrix.length=V,n.spotLightMatrix.length=z+j-G,n.spotLightMap.length=j,n.numSpotLightShadowsWithMaps=G,n.numLightProbes=P,L.directionalLength=T,L.pointLength=M,L.spotLength=C,L.rectAreaLength=w,L.hemiLength=b,L.numDirectionalShadows=D,L.numPointShadows=V,L.numSpotShadows=z,L.numSpotMaps=j,L.numLightProbes=P,n.version=YY++)}function d(p,y){let _=0,S=0,T=0,M=0,C=0;const w=y.matrixWorldInverse;for(let b=0,D=p.length;b<D;b++){const V=p[b];if(V.isDirectionalLight){const z=n.directional[_];z.direction.setFromMatrixPosition(V.matrixWorld),s.setFromMatrixPosition(V.target.matrixWorld),z.direction.sub(s),z.direction.transformDirection(w),_++}else if(V.isSpotLight){const z=n.spot[T];z.position.setFromMatrixPosition(V.matrixWorld),z.position.applyMatrix4(w),z.direction.setFromMatrixPosition(V.matrixWorld),s.setFromMatrixPosition(V.target.matrixWorld),z.direction.sub(s),z.direction.transformDirection(w),T++}else if(V.isRectAreaLight){const z=n.rectArea[M];z.position.setFromMatrixPosition(V.matrixWorld),z.position.applyMatrix4(w),l.identity(),a.copy(V.matrixWorld),a.premultiply(w),l.extractRotation(a),z.halfWidth.set(V.width*.5,0,0),z.halfHeight.set(0,V.height*.5,0),z.halfWidth.applyMatrix4(l),z.halfHeight.applyMatrix4(l),M++}else if(V.isPointLight){const z=n.point[S];z.position.setFromMatrixPosition(V.matrixWorld),z.position.applyMatrix4(w),S++}else if(V.isHemisphereLight){const z=n.hemi[C];z.direction.setFromMatrixPosition(V.matrixWorld),z.direction.transformDirection(w),C++}}}return{setup:u,setupView:d,state:n}}function AI(i){const e=new QY(i),t=[],n=[];function s(y){p.camera=y,t.length=0,n.length=0}function a(y){t.push(y)}function l(y){n.push(y)}function u(){e.setup(t)}function d(y){e.setupView(t,y)}const p={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:p,setupLights:u,setupLightsView:d,pushLight:a,pushShadow:l}}function ZY(i){let e=new WeakMap;function t(s,a=0){const l=e.get(s);let u;return l===void 0?(u=new AI(i),e.set(s,[u])):a>=l.length?(u=new AI(i),l.push(u)):u=l[a],u}function n(){e=new WeakMap}return{get:t,dispose:n}}const JY=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,$Y=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function eK(i,e,t){let n=new eg;const s=new $e,a=new $e,l=new Yn,u=new z1({depthPacking:qO}),d=new B1,p={},y=t.maxTextureSize,_={[_u]:oa,[oa]:_u,[rc]:rc},S=new vl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new $e},radius:{value:4}},vertexShader:JY,fragmentShader:$Y}),T=S.clone();T.defines.HORIZONTAL_PASS=1;const M=new _n;M.setAttribute("position",new mi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new vs(M,S),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fx;let b=this.type;this.render=function(G,P,L){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||G.length===0)return;const I=i.getRenderTarget(),O=i.getActiveCubeFace(),F=i.getActiveMipmapLevel(),Y=i.state;Y.setBlending(uu),Y.buffers.depth.getReversed()===!0?Y.buffers.color.setClear(0,0,0,0):Y.buffers.color.setClear(1,1,1,1),Y.buffers.depth.setTest(!0),Y.setScissorTest(!1);const q=b!==ll&&this.type===ll,de=b===ll&&this.type!==ll;for(let ge=0,X=G.length;ge<X;ge++){const ee=G[ge],ne=ee.shadow;if(ne===void 0){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(ne.autoUpdate===!1&&ne.needsUpdate===!1)continue;s.copy(ne.mapSize);const pe=ne.getFrameExtents();if(s.multiply(pe),a.copy(ne.mapSize),(s.x>y||s.y>y)&&(s.x>y&&(a.x=Math.floor(y/pe.x),s.x=a.x*pe.x,ne.mapSize.x=a.x),s.y>y&&(a.y=Math.floor(y/pe.y),s.y=a.y*pe.y,ne.mapSize.y=a.y)),ne.map===null||q===!0||de===!0){const J=this.type!==ll?{minFilter:rr,magFilter:rr}:{};ne.map!==null&&ne.map.dispose(),ne.map=new _c(s.x,s.y,J),ne.map.texture.name=ee.name+".shadowMap",ne.camera.updateProjectionMatrix()}i.setRenderTarget(ne.map),i.clear();const re=ne.getViewportCount();for(let J=0;J<re;J++){const le=ne.getViewport(J);l.set(a.x*le.x,a.y*le.y,a.x*le.z,a.y*le.w),Y.viewport(l),ne.updateMatrices(ee,J),n=ne.getFrustum(),z(P,L,ne.camera,ee,this.type)}ne.isPointLightShadow!==!0&&this.type===ll&&D(ne,L),ne.needsUpdate=!1}b=this.type,w.needsUpdate=!1,i.setRenderTarget(I,O,F)};function D(G,P){const L=e.update(C);S.defines.VSM_SAMPLES!==G.blurSamples&&(S.defines.VSM_SAMPLES=G.blurSamples,T.defines.VSM_SAMPLES=G.blurSamples,S.needsUpdate=!0,T.needsUpdate=!0),G.mapPass===null&&(G.mapPass=new _c(s.x,s.y)),S.uniforms.shadow_pass.value=G.map.texture,S.uniforms.resolution.value=G.mapSize,S.uniforms.radius.value=G.radius,i.setRenderTarget(G.mapPass),i.clear(),i.renderBufferDirect(P,null,L,S,C,null),T.uniforms.shadow_pass.value=G.mapPass.texture,T.uniforms.resolution.value=G.mapSize,T.uniforms.radius.value=G.radius,i.setRenderTarget(G.map),i.clear(),i.renderBufferDirect(P,null,L,T,C,null)}function V(G,P,L,I){let O=null;const F=L.isPointLight===!0?G.customDistanceMaterial:G.customDepthMaterial;if(F!==void 0)O=F;else if(O=L.isPointLight===!0?d:u,i.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0||P.alphaToCoverage===!0){const Y=O.uuid,q=P.uuid;let de=p[Y];de===void 0&&(de={},p[Y]=de);let ge=de[q];ge===void 0&&(ge=O.clone(),de[q]=ge,P.addEventListener("dispose",j)),O=ge}if(O.visible=P.visible,O.wireframe=P.wireframe,I===ll?O.side=P.shadowSide!==null?P.shadowSide:P.side:O.side=P.shadowSide!==null?P.shadowSide:_[P.side],O.alphaMap=P.alphaMap,O.alphaTest=P.alphaToCoverage===!0?.5:P.alphaTest,O.map=P.map,O.clipShadows=P.clipShadows,O.clippingPlanes=P.clippingPlanes,O.clipIntersection=P.clipIntersection,O.displacementMap=P.displacementMap,O.displacementScale=P.displacementScale,O.displacementBias=P.displacementBias,O.wireframeLinewidth=P.wireframeLinewidth,O.linewidth=P.linewidth,L.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const Y=i.properties.get(O);Y.light=L}return O}function z(G,P,L,I,O){if(G.visible===!1)return;if(G.layers.test(P.layers)&&(G.isMesh||G.isLine||G.isPoints)&&(G.castShadow||G.receiveShadow&&O===ll)&&(!G.frustumCulled||n.intersectsObject(G))){G.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,G.matrixWorld);const q=e.update(G),de=G.material;if(Array.isArray(de)){const ge=q.groups;for(let X=0,ee=ge.length;X<ee;X++){const ne=ge[X],pe=de[ne.materialIndex];if(pe&&pe.visible){const re=V(G,pe,I,O);G.onBeforeShadow(i,G,P,L,q,re,ne),i.renderBufferDirect(L,null,q,re,G,ne),G.onAfterShadow(i,G,P,L,q,re,ne)}}}else if(de.visible){const ge=V(G,de,I,O);G.onBeforeShadow(i,G,P,L,q,ge,null),i.renderBufferDirect(L,null,q,ge,G,null),G.onAfterShadow(i,G,P,L,q,ge,null)}}const Y=G.children;for(let q=0,de=Y.length;q<de;q++)z(Y[q],P,L,I,O)}function j(G){G.target.removeEventListener("dispose",j);for(const L in p){const I=p[L],O=G.target.uuid;O in I&&(I[O].dispose(),delete I[O])}}}const tK={[QS]:ZS,[JS]:tE,[$S]:nE,[Sd]:eE,[ZS]:QS,[tE]:JS,[nE]:$S,[eE]:Sd};function nK(i,e){function t(){let he=!1;const tt=new Yn;let ot=null;const ft=new Yn(0,0,0,0);return{setMask:function(et){ot!==et&&!he&&(i.colorMask(et,et,et,et),ot=et)},setLocked:function(et){he=et},setClear:function(et,Fe,vt,qt,Rn){Rn===!0&&(et*=qt,Fe*=qt,vt*=qt),tt.set(et,Fe,vt,qt),ft.equals(tt)===!1&&(i.clearColor(et,Fe,vt,qt),ft.copy(tt))},reset:function(){he=!1,ot=null,ft.set(-1,0,0,0)}}}function n(){let he=!1,tt=!1,ot=null,ft=null,et=null;return{setReversed:function(Fe){if(tt!==Fe){const vt=e.get("EXT_clip_control");Fe?vt.clipControlEXT(vt.LOWER_LEFT_EXT,vt.ZERO_TO_ONE_EXT):vt.clipControlEXT(vt.LOWER_LEFT_EXT,vt.NEGATIVE_ONE_TO_ONE_EXT),tt=Fe;const qt=et;et=null,this.setClear(qt)}},getReversed:function(){return tt},setTest:function(Fe){Fe?Le(i.DEPTH_TEST):at(i.DEPTH_TEST)},setMask:function(Fe){ot!==Fe&&!he&&(i.depthMask(Fe),ot=Fe)},setFunc:function(Fe){if(tt&&(Fe=tK[Fe]),ft!==Fe){switch(Fe){case QS:i.depthFunc(i.NEVER);break;case ZS:i.depthFunc(i.ALWAYS);break;case JS:i.depthFunc(i.LESS);break;case Sd:i.depthFunc(i.LEQUAL);break;case $S:i.depthFunc(i.EQUAL);break;case eE:i.depthFunc(i.GEQUAL);break;case tE:i.depthFunc(i.GREATER);break;case nE:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}ft=Fe}},setLocked:function(Fe){he=Fe},setClear:function(Fe){et!==Fe&&(tt&&(Fe=1-Fe),i.clearDepth(Fe),et=Fe)},reset:function(){he=!1,ot=null,ft=null,et=null,tt=!1}}}function s(){let he=!1,tt=null,ot=null,ft=null,et=null,Fe=null,vt=null,qt=null,Rn=null;return{setTest:function(sn){he||(sn?Le(i.STENCIL_TEST):at(i.STENCIL_TEST))},setMask:function(sn){tt!==sn&&!he&&(i.stencilMask(sn),tt=sn)},setFunc:function(sn,as,js){(ot!==sn||ft!==as||et!==js)&&(i.stencilFunc(sn,as,js),ot=sn,ft=as,et=js)},setOp:function(sn,as,js){(Fe!==sn||vt!==as||qt!==js)&&(i.stencilOp(sn,as,js),Fe=sn,vt=as,qt=js)},setLocked:function(sn){he=sn},setClear:function(sn){Rn!==sn&&(i.clearStencil(sn),Rn=sn)},reset:function(){he=!1,tt=null,ot=null,ft=null,et=null,Fe=null,vt=null,qt=null,Rn=null}}}const a=new t,l=new n,u=new s,d=new WeakMap,p=new WeakMap;let y={},_={},S=new WeakMap,T=[],M=null,C=!1,w=null,b=null,D=null,V=null,z=null,j=null,G=null,P=new At(0,0,0),L=0,I=!1,O=null,F=null,Y=null,q=null,de=null;const ge=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let X=!1,ee=0;const ne=i.getParameter(i.VERSION);ne.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(ne)[1]),X=ee>=1):ne.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),X=ee>=2);let pe=null,re={};const J=i.getParameter(i.SCISSOR_BOX),le=i.getParameter(i.VIEWPORT),De=new Yn().fromArray(J),Re=new Yn().fromArray(le);function nt(he,tt,ot,ft){const et=new Uint8Array(4),Fe=i.createTexture();i.bindTexture(he,Fe),i.texParameteri(he,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(he,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let vt=0;vt<ot;vt++)he===i.TEXTURE_3D||he===i.TEXTURE_2D_ARRAY?i.texImage3D(tt,0,i.RGBA,1,1,ft,0,i.RGBA,i.UNSIGNED_BYTE,et):i.texImage2D(tt+vt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,et);return Fe}const Te={};Te[i.TEXTURE_2D]=nt(i.TEXTURE_2D,i.TEXTURE_2D,1),Te[i.TEXTURE_CUBE_MAP]=nt(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Te[i.TEXTURE_2D_ARRAY]=nt(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Te[i.TEXTURE_3D]=nt(i.TEXTURE_3D,i.TEXTURE_3D,1,1),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Le(i.DEPTH_TEST),l.setFunc(Sd),Be(!1),Ve(UA),Le(i.CULL_FACE),qe(uu);function Le(he){y[he]!==!0&&(i.enable(he),y[he]=!0)}function at(he){y[he]!==!1&&(i.disable(he),y[he]=!1)}function pt(he,tt){return _[he]!==tt?(i.bindFramebuffer(he,tt),_[he]=tt,he===i.DRAW_FRAMEBUFFER&&(_[i.FRAMEBUFFER]=tt),he===i.FRAMEBUFFER&&(_[i.DRAW_FRAMEBUFFER]=tt),!0):!1}function bt(he,tt){let ot=T,ft=!1;if(he){ot=S.get(tt),ot===void 0&&(ot=[],S.set(tt,ot));const et=he.textures;if(ot.length!==et.length||ot[0]!==i.COLOR_ATTACHMENT0){for(let Fe=0,vt=et.length;Fe<vt;Fe++)ot[Fe]=i.COLOR_ATTACHMENT0+Fe;ot.length=et.length,ft=!0}}else ot[0]!==i.BACK&&(ot[0]=i.BACK,ft=!0);ft&&i.drawBuffers(ot)}function Zt(he){return M!==he?(i.useProgram(he),M=he,!0):!1}const An={[Rh]:i.FUNC_ADD,[mO]:i.FUNC_SUBTRACT,[gO]:i.FUNC_REVERSE_SUBTRACT};An[yO]=i.MIN,An[_O]=i.MAX;const se={[vO]:i.ZERO,[SO]:i.ONE,[EO]:i.SRC_COLOR,[YS]:i.SRC_ALPHA,[wO]:i.SRC_ALPHA_SATURATE,[AO]:i.DST_COLOR,[TO]:i.DST_ALPHA,[xO]:i.ONE_MINUS_SRC_COLOR,[KS]:i.ONE_MINUS_SRC_ALPHA,[MO]:i.ONE_MINUS_DST_COLOR,[bO]:i.ONE_MINUS_DST_ALPHA,[RO]:i.CONSTANT_COLOR,[CO]:i.ONE_MINUS_CONSTANT_COLOR,[IO]:i.CONSTANT_ALPHA,[DO]:i.ONE_MINUS_CONSTANT_ALPHA};function qe(he,tt,ot,ft,et,Fe,vt,qt,Rn,sn){if(he===uu){C===!0&&(at(i.BLEND),C=!1);return}if(C===!1&&(Le(i.BLEND),C=!0),he!==pO){if(he!==w||sn!==I){if((b!==Rh||z!==Rh)&&(i.blendEquation(i.FUNC_ADD),b=Rh,z=Rh),sn)switch(he){case hd:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case LA:i.blendFunc(i.ONE,i.ONE);break;case PA:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case VA:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}else switch(he){case hd:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case LA:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case PA:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case VA:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}D=null,V=null,j=null,G=null,P.set(0,0,0),L=0,w=he,I=sn}return}et=et||tt,Fe=Fe||ot,vt=vt||ft,(tt!==b||et!==z)&&(i.blendEquationSeparate(An[tt],An[et]),b=tt,z=et),(ot!==D||ft!==V||Fe!==j||vt!==G)&&(i.blendFuncSeparate(se[ot],se[ft],se[Fe],se[vt]),D=ot,V=ft,j=Fe,G=vt),(qt.equals(P)===!1||Rn!==L)&&(i.blendColor(qt.r,qt.g,qt.b,Rn),P.copy(qt),L=Rn),w=he,I=!1}function ke(he,tt){he.side===rc?at(i.CULL_FACE):Le(i.CULL_FACE);let ot=he.side===oa;tt&&(ot=!ot),Be(ot),he.blending===hd&&he.transparent===!1?qe(uu):qe(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.blendColor,he.blendAlpha,he.premultipliedAlpha),l.setFunc(he.depthFunc),l.setTest(he.depthTest),l.setMask(he.depthWrite),a.setMask(he.colorWrite);const ft=he.stencilWrite;u.setTest(ft),ft&&(u.setMask(he.stencilWriteMask),u.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),u.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),je(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),he.alphaToCoverage===!0?Le(i.SAMPLE_ALPHA_TO_COVERAGE):at(i.SAMPLE_ALPHA_TO_COVERAGE)}function Be(he){O!==he&&(he?i.frontFace(i.CW):i.frontFace(i.CCW),O=he)}function Ve(he){he!==hO?(Le(i.CULL_FACE),he!==F&&(he===UA?i.cullFace(i.BACK):he===fO?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):at(i.CULL_FACE),F=he}function ut(he){he!==Y&&(X&&i.lineWidth(he),Y=he)}function je(he,tt,ot){he?(Le(i.POLYGON_OFFSET_FILL),(q!==tt||de!==ot)&&(i.polygonOffset(tt,ot),q=tt,de=ot)):at(i.POLYGON_OFFSET_FILL)}function Qe(he){he?Le(i.SCISSOR_TEST):at(i.SCISSOR_TEST)}function Vt(he){he===void 0&&(he=i.TEXTURE0+ge-1),pe!==he&&(i.activeTexture(he),pe=he)}function Wt(he,tt,ot){ot===void 0&&(pe===null?ot=i.TEXTURE0+ge-1:ot=pe);let ft=re[ot];ft===void 0&&(ft={type:void 0,texture:void 0},re[ot]=ft),(ft.type!==he||ft.texture!==tt)&&(pe!==ot&&(i.activeTexture(ot),pe=ot),i.bindTexture(he,tt||Te[he]),ft.type=he,ft.texture=tt)}function te(){const he=re[pe];he!==void 0&&he.type!==void 0&&(i.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)}function W(){try{i.compressedTexImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Se(){try{i.compressedTexImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Oe(){try{i.texSubImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ze(){try{i.texSubImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Pe(){try{i.compressedTexSubImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function It(){try{i.compressedTexSubImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function lt(){try{i.texStorage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Mt(){try{i.texStorage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function wt(){try{i.texImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ke(){try{i.texImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function st(he){De.equals(he)===!1&&(i.scissor(he.x,he.y,he.z,he.w),De.copy(he))}function Ct(he){Re.equals(he)===!1&&(i.viewport(he.x,he.y,he.z,he.w),Re.copy(he))}function mt(he,tt){let ot=p.get(tt);ot===void 0&&(ot=new WeakMap,p.set(tt,ot));let ft=ot.get(he);ft===void 0&&(ft=i.getUniformBlockIndex(tt,he.name),ot.set(he,ft))}function dt(he,tt){const ft=p.get(tt).get(he);d.get(tt)!==ft&&(i.uniformBlockBinding(tt,ft,he.__bindingPointIndex),d.set(tt,ft))}function Gt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),l.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),y={},pe=null,re={},_={},S=new WeakMap,T=[],M=null,C=!1,w=null,b=null,D=null,V=null,z=null,j=null,G=null,P=new At(0,0,0),L=0,I=!1,O=null,F=null,Y=null,q=null,de=null,De.set(0,0,i.canvas.width,i.canvas.height),Re.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:Le,disable:at,bindFramebuffer:pt,drawBuffers:bt,useProgram:Zt,setBlending:qe,setMaterial:ke,setFlipSided:Be,setCullFace:Ve,setLineWidth:ut,setPolygonOffset:je,setScissorTest:Qe,activeTexture:Vt,bindTexture:Wt,unbindTexture:te,compressedTexImage2D:W,compressedTexImage3D:Se,texImage2D:wt,texImage3D:Ke,updateUBOMapping:mt,uniformBlockBinding:dt,texStorage2D:lt,texStorage3D:Mt,texSubImage2D:Oe,texSubImage3D:Ze,compressedTexSubImage2D:Pe,compressedTexSubImage3D:It,scissor:st,viewport:Ct,reset:Gt}}function iK(i,e,t,n,s,a,l){const u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new $e,y=new WeakMap;let _;const S=new WeakMap;let T=!1;try{T=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(te,W){return T?new OffscreenCanvas(te,W):E_("canvas")}function C(te,W,Se){let Oe=1;const Ze=Wt(te);if((Ze.width>Se||Ze.height>Se)&&(Oe=Se/Math.max(Ze.width,Ze.height)),Oe<1)if(typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&te instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&te instanceof ImageBitmap||typeof VideoFrame<"u"&&te instanceof VideoFrame){const Pe=Math.floor(Oe*Ze.width),It=Math.floor(Oe*Ze.height);_===void 0&&(_=M(Pe,It));const lt=W?M(Pe,It):_;return lt.width=Pe,lt.height=It,lt.getContext("2d").drawImage(te,0,0,Pe,It),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ze.width+"x"+Ze.height+") to ("+Pe+"x"+It+")."),lt}else return"data"in te&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ze.width+"x"+Ze.height+")."),te;return te}function w(te){return te.generateMipmaps}function b(te){i.generateMipmap(te)}function D(te){return te.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:te.isWebGL3DRenderTarget?i.TEXTURE_3D:te.isWebGLArrayRenderTarget||te.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function V(te,W,Se,Oe,Ze=!1){if(te!==null){if(i[te]!==void 0)return i[te];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+te+"'")}let Pe=W;if(W===i.RED&&(Se===i.FLOAT&&(Pe=i.R32F),Se===i.HALF_FLOAT&&(Pe=i.R16F),Se===i.UNSIGNED_BYTE&&(Pe=i.R8)),W===i.RED_INTEGER&&(Se===i.UNSIGNED_BYTE&&(Pe=i.R8UI),Se===i.UNSIGNED_SHORT&&(Pe=i.R16UI),Se===i.UNSIGNED_INT&&(Pe=i.R32UI),Se===i.BYTE&&(Pe=i.R8I),Se===i.SHORT&&(Pe=i.R16I),Se===i.INT&&(Pe=i.R32I)),W===i.RG&&(Se===i.FLOAT&&(Pe=i.RG32F),Se===i.HALF_FLOAT&&(Pe=i.RG16F),Se===i.UNSIGNED_BYTE&&(Pe=i.RG8)),W===i.RG_INTEGER&&(Se===i.UNSIGNED_BYTE&&(Pe=i.RG8UI),Se===i.UNSIGNED_SHORT&&(Pe=i.RG16UI),Se===i.UNSIGNED_INT&&(Pe=i.RG32UI),Se===i.BYTE&&(Pe=i.RG8I),Se===i.SHORT&&(Pe=i.RG16I),Se===i.INT&&(Pe=i.RG32I)),W===i.RGB_INTEGER&&(Se===i.UNSIGNED_BYTE&&(Pe=i.RGB8UI),Se===i.UNSIGNED_SHORT&&(Pe=i.RGB16UI),Se===i.UNSIGNED_INT&&(Pe=i.RGB32UI),Se===i.BYTE&&(Pe=i.RGB8I),Se===i.SHORT&&(Pe=i.RGB16I),Se===i.INT&&(Pe=i.RGB32I)),W===i.RGBA_INTEGER&&(Se===i.UNSIGNED_BYTE&&(Pe=i.RGBA8UI),Se===i.UNSIGNED_SHORT&&(Pe=i.RGBA16UI),Se===i.UNSIGNED_INT&&(Pe=i.RGBA32UI),Se===i.BYTE&&(Pe=i.RGBA8I),Se===i.SHORT&&(Pe=i.RGBA16I),Se===i.INT&&(Pe=i.RGBA32I)),W===i.RGB&&(Se===i.UNSIGNED_INT_5_9_9_9_REV&&(Pe=i.RGB9_E5),Se===i.UNSIGNED_INT_10F_11F_11F_REV&&(Pe=i.R11F_G11F_B10F)),W===i.RGBA){const It=Ze?v_:Gn.getTransfer(Oe);Se===i.FLOAT&&(Pe=i.RGBA32F),Se===i.HALF_FLOAT&&(Pe=i.RGBA16F),Se===i.UNSIGNED_BYTE&&(Pe=It===ci?i.SRGB8_ALPHA8:i.RGBA8),Se===i.UNSIGNED_SHORT_4_4_4_4&&(Pe=i.RGBA4),Se===i.UNSIGNED_SHORT_5_5_5_1&&(Pe=i.RGB5_A1)}return(Pe===i.R16F||Pe===i.R32F||Pe===i.RG16F||Pe===i.RG32F||Pe===i.RGBA16F||Pe===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Pe}function z(te,W){let Se;return te?W===null||W===Su||W===Cm?Se=i.DEPTH24_STENCIL8:W===wa?Se=i.DEPTH32F_STENCIL8:W===Rm&&(Se=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):W===null||W===Su||W===Cm?Se=i.DEPTH_COMPONENT24:W===wa?Se=i.DEPTH_COMPONENT32F:W===Rm&&(Se=i.DEPTH_COMPONENT16),Se}function j(te,W){return w(te)===!0||te.isFramebufferTexture&&te.minFilter!==rr&&te.minFilter!==ws?Math.log2(Math.max(W.width,W.height))+1:te.mipmaps!==void 0&&te.mipmaps.length>0?te.mipmaps.length:te.isCompressedTexture&&Array.isArray(te.image)?W.mipmaps.length:1}function G(te){const W=te.target;W.removeEventListener("dispose",G),L(W),W.isVideoTexture&&y.delete(W)}function P(te){const W=te.target;W.removeEventListener("dispose",P),O(W)}function L(te){const W=n.get(te);if(W.__webglInit===void 0)return;const Se=te.source,Oe=S.get(Se);if(Oe){const Ze=Oe[W.__cacheKey];Ze.usedTimes--,Ze.usedTimes===0&&I(te),Object.keys(Oe).length===0&&S.delete(Se)}n.remove(te)}function I(te){const W=n.get(te);i.deleteTexture(W.__webglTexture);const Se=te.source,Oe=S.get(Se);delete Oe[W.__cacheKey],l.memory.textures--}function O(te){const W=n.get(te);if(te.depthTexture&&(te.depthTexture.dispose(),n.remove(te.depthTexture)),te.isWebGLCubeRenderTarget)for(let Oe=0;Oe<6;Oe++){if(Array.isArray(W.__webglFramebuffer[Oe]))for(let Ze=0;Ze<W.__webglFramebuffer[Oe].length;Ze++)i.deleteFramebuffer(W.__webglFramebuffer[Oe][Ze]);else i.deleteFramebuffer(W.__webglFramebuffer[Oe]);W.__webglDepthbuffer&&i.deleteRenderbuffer(W.__webglDepthbuffer[Oe])}else{if(Array.isArray(W.__webglFramebuffer))for(let Oe=0;Oe<W.__webglFramebuffer.length;Oe++)i.deleteFramebuffer(W.__webglFramebuffer[Oe]);else i.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&i.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&i.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let Oe=0;Oe<W.__webglColorRenderbuffer.length;Oe++)W.__webglColorRenderbuffer[Oe]&&i.deleteRenderbuffer(W.__webglColorRenderbuffer[Oe]);W.__webglDepthRenderbuffer&&i.deleteRenderbuffer(W.__webglDepthRenderbuffer)}const Se=te.textures;for(let Oe=0,Ze=Se.length;Oe<Ze;Oe++){const Pe=n.get(Se[Oe]);Pe.__webglTexture&&(i.deleteTexture(Pe.__webglTexture),l.memory.textures--),n.remove(Se[Oe])}n.remove(te)}let F=0;function Y(){F=0}function q(){const te=F;return te>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+te+" texture units while this GPU supports only "+s.maxTextures),F+=1,te}function de(te){const W=[];return W.push(te.wrapS),W.push(te.wrapT),W.push(te.wrapR||0),W.push(te.magFilter),W.push(te.minFilter),W.push(te.anisotropy),W.push(te.internalFormat),W.push(te.format),W.push(te.type),W.push(te.generateMipmaps),W.push(te.premultiplyAlpha),W.push(te.flipY),W.push(te.unpackAlignment),W.push(te.colorSpace),W.join()}function ge(te,W){const Se=n.get(te);if(te.isVideoTexture&&Qe(te),te.isRenderTargetTexture===!1&&te.isExternalTexture!==!0&&te.version>0&&Se.__version!==te.version){const Oe=te.image;if(Oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Te(Se,te,W);return}}else te.isExternalTexture&&(Se.__webglTexture=te.sourceTexture?te.sourceTexture:null);t.bindTexture(i.TEXTURE_2D,Se.__webglTexture,i.TEXTURE0+W)}function X(te,W){const Se=n.get(te);if(te.isRenderTargetTexture===!1&&te.version>0&&Se.__version!==te.version){Te(Se,te,W);return}t.bindTexture(i.TEXTURE_2D_ARRAY,Se.__webglTexture,i.TEXTURE0+W)}function ee(te,W){const Se=n.get(te);if(te.isRenderTargetTexture===!1&&te.version>0&&Se.__version!==te.version){Te(Se,te,W);return}t.bindTexture(i.TEXTURE_3D,Se.__webglTexture,i.TEXTURE0+W)}function ne(te,W){const Se=n.get(te);if(te.version>0&&Se.__version!==te.version){Le(Se,te,W);return}t.bindTexture(i.TEXTURE_CUBE_MAP,Se.__webglTexture,i.TEXTURE0+W)}const pe={[m_]:i.REPEAT,[Ro]:i.CLAMP_TO_EDGE,[g_]:i.MIRRORED_REPEAT},re={[rr]:i.NEAREST,[h1]:i.NEAREST_MIPMAP_NEAREST,[um]:i.NEAREST_MIPMAP_LINEAR,[ws]:i.LINEAR,[Wy]:i.LINEAR_MIPMAP_NEAREST,[ac]:i.LINEAR_MIPMAP_LINEAR},J={[WO]:i.NEVER,[$O]:i.ALWAYS,[YO]:i.LESS,[S1]:i.LEQUAL,[KO]:i.EQUAL,[JO]:i.GEQUAL,[QO]:i.GREATER,[ZO]:i.NOTEQUAL};function le(te,W){if(W.type===wa&&e.has("OES_texture_float_linear")===!1&&(W.magFilter===ws||W.magFilter===Wy||W.magFilter===um||W.magFilter===ac||W.minFilter===ws||W.minFilter===Wy||W.minFilter===um||W.minFilter===ac)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(te,i.TEXTURE_WRAP_S,pe[W.wrapS]),i.texParameteri(te,i.TEXTURE_WRAP_T,pe[W.wrapT]),(te===i.TEXTURE_3D||te===i.TEXTURE_2D_ARRAY)&&i.texParameteri(te,i.TEXTURE_WRAP_R,pe[W.wrapR]),i.texParameteri(te,i.TEXTURE_MAG_FILTER,re[W.magFilter]),i.texParameteri(te,i.TEXTURE_MIN_FILTER,re[W.minFilter]),W.compareFunction&&(i.texParameteri(te,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(te,i.TEXTURE_COMPARE_FUNC,J[W.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(W.magFilter===rr||W.minFilter!==um&&W.minFilter!==ac||W.type===wa&&e.has("OES_texture_float_linear")===!1)return;if(W.anisotropy>1||n.get(W).__currentAnisotropy){const Se=e.get("EXT_texture_filter_anisotropic");i.texParameterf(te,Se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,s.getMaxAnisotropy())),n.get(W).__currentAnisotropy=W.anisotropy}}}function De(te,W){let Se=!1;te.__webglInit===void 0&&(te.__webglInit=!0,W.addEventListener("dispose",G));const Oe=W.source;let Ze=S.get(Oe);Ze===void 0&&(Ze={},S.set(Oe,Ze));const Pe=de(W);if(Pe!==te.__cacheKey){Ze[Pe]===void 0&&(Ze[Pe]={texture:i.createTexture(),usedTimes:0},l.memory.textures++,Se=!0),Ze[Pe].usedTimes++;const It=Ze[te.__cacheKey];It!==void 0&&(Ze[te.__cacheKey].usedTimes--,It.usedTimes===0&&I(W)),te.__cacheKey=Pe,te.__webglTexture=Ze[Pe].texture}return Se}function Re(te,W,Se){return Math.floor(Math.floor(te/Se)/W)}function nt(te,W,Se,Oe){const Pe=te.updateRanges;if(Pe.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,W.width,W.height,Se,Oe,W.data);else{Pe.sort((Ke,st)=>Ke.start-st.start);let It=0;for(let Ke=1;Ke<Pe.length;Ke++){const st=Pe[It],Ct=Pe[Ke],mt=st.start+st.count,dt=Re(Ct.start,W.width,4),Gt=Re(st.start,W.width,4);Ct.start<=mt+1&&dt===Gt&&Re(Ct.start+Ct.count-1,W.width,4)===dt?st.count=Math.max(st.count,Ct.start+Ct.count-st.start):(++It,Pe[It]=Ct)}Pe.length=It+1;const lt=i.getParameter(i.UNPACK_ROW_LENGTH),Mt=i.getParameter(i.UNPACK_SKIP_PIXELS),wt=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,W.width);for(let Ke=0,st=Pe.length;Ke<st;Ke++){const Ct=Pe[Ke],mt=Math.floor(Ct.start/4),dt=Math.ceil(Ct.count/4),Gt=mt%W.width,he=Math.floor(mt/W.width),tt=dt,ot=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,Gt),i.pixelStorei(i.UNPACK_SKIP_ROWS,he),t.texSubImage2D(i.TEXTURE_2D,0,Gt,he,tt,ot,Se,Oe,W.data)}te.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,lt),i.pixelStorei(i.UNPACK_SKIP_PIXELS,Mt),i.pixelStorei(i.UNPACK_SKIP_ROWS,wt)}}function Te(te,W,Se){let Oe=i.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(Oe=i.TEXTURE_2D_ARRAY),W.isData3DTexture&&(Oe=i.TEXTURE_3D);const Ze=De(te,W),Pe=W.source;t.bindTexture(Oe,te.__webglTexture,i.TEXTURE0+Se);const It=n.get(Pe);if(Pe.version!==It.__version||Ze===!0){t.activeTexture(i.TEXTURE0+Se);const lt=Gn.getPrimaries(Gn.workingColorSpace),Mt=W.colorSpace===su?null:Gn.getPrimaries(W.colorSpace),wt=W.colorSpace===su||lt===Mt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,W.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,W.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,wt);let Ke=C(W.image,!1,s.maxTextureSize);Ke=Vt(W,Ke);const st=a.convert(W.format,W.colorSpace),Ct=a.convert(W.type);let mt=V(W.internalFormat,st,Ct,W.colorSpace,W.isVideoTexture);le(Oe,W);let dt;const Gt=W.mipmaps,he=W.isVideoTexture!==!0,tt=It.__version===void 0||Ze===!0,ot=Pe.dataReady,ft=j(W,Ke);if(W.isDepthTexture)mt=z(W.format===Dm,W.type),tt&&(he?t.texStorage2D(i.TEXTURE_2D,1,mt,Ke.width,Ke.height):t.texImage2D(i.TEXTURE_2D,0,mt,Ke.width,Ke.height,0,st,Ct,null));else if(W.isDataTexture)if(Gt.length>0){he&&tt&&t.texStorage2D(i.TEXTURE_2D,ft,mt,Gt[0].width,Gt[0].height);for(let et=0,Fe=Gt.length;et<Fe;et++)dt=Gt[et],he?ot&&t.texSubImage2D(i.TEXTURE_2D,et,0,0,dt.width,dt.height,st,Ct,dt.data):t.texImage2D(i.TEXTURE_2D,et,mt,dt.width,dt.height,0,st,Ct,dt.data);W.generateMipmaps=!1}else he?(tt&&t.texStorage2D(i.TEXTURE_2D,ft,mt,Ke.width,Ke.height),ot&&nt(W,Ke,st,Ct)):t.texImage2D(i.TEXTURE_2D,0,mt,Ke.width,Ke.height,0,st,Ct,Ke.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){he&&tt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ft,mt,Gt[0].width,Gt[0].height,Ke.depth);for(let et=0,Fe=Gt.length;et<Fe;et++)if(dt=Gt[et],W.format!==Nr)if(st!==null)if(he){if(ot)if(W.layerUpdates.size>0){const vt=WA(dt.width,dt.height,W.format,W.type);for(const qt of W.layerUpdates){const Rn=dt.data.subarray(qt*vt/dt.data.BYTES_PER_ELEMENT,(qt+1)*vt/dt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,et,0,0,qt,dt.width,dt.height,1,st,Rn)}W.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,et,0,0,0,dt.width,dt.height,Ke.depth,st,dt.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,et,mt,dt.width,dt.height,Ke.depth,0,dt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else he?ot&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,et,0,0,0,dt.width,dt.height,Ke.depth,st,Ct,dt.data):t.texImage3D(i.TEXTURE_2D_ARRAY,et,mt,dt.width,dt.height,Ke.depth,0,st,Ct,dt.data)}else{he&&tt&&t.texStorage2D(i.TEXTURE_2D,ft,mt,Gt[0].width,Gt[0].height);for(let et=0,Fe=Gt.length;et<Fe;et++)dt=Gt[et],W.format!==Nr?st!==null?he?ot&&t.compressedTexSubImage2D(i.TEXTURE_2D,et,0,0,dt.width,dt.height,st,dt.data):t.compressedTexImage2D(i.TEXTURE_2D,et,mt,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):he?ot&&t.texSubImage2D(i.TEXTURE_2D,et,0,0,dt.width,dt.height,st,Ct,dt.data):t.texImage2D(i.TEXTURE_2D,et,mt,dt.width,dt.height,0,st,Ct,dt.data)}else if(W.isDataArrayTexture)if(he){if(tt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ft,mt,Ke.width,Ke.height,Ke.depth),ot)if(W.layerUpdates.size>0){const et=WA(Ke.width,Ke.height,W.format,W.type);for(const Fe of W.layerUpdates){const vt=Ke.data.subarray(Fe*et/Ke.data.BYTES_PER_ELEMENT,(Fe+1)*et/Ke.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Fe,Ke.width,Ke.height,1,st,Ct,vt)}W.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ke.width,Ke.height,Ke.depth,st,Ct,Ke.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,mt,Ke.width,Ke.height,Ke.depth,0,st,Ct,Ke.data);else if(W.isData3DTexture)he?(tt&&t.texStorage3D(i.TEXTURE_3D,ft,mt,Ke.width,Ke.height,Ke.depth),ot&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ke.width,Ke.height,Ke.depth,st,Ct,Ke.data)):t.texImage3D(i.TEXTURE_3D,0,mt,Ke.width,Ke.height,Ke.depth,0,st,Ct,Ke.data);else if(W.isFramebufferTexture){if(tt)if(he)t.texStorage2D(i.TEXTURE_2D,ft,mt,Ke.width,Ke.height);else{let et=Ke.width,Fe=Ke.height;for(let vt=0;vt<ft;vt++)t.texImage2D(i.TEXTURE_2D,vt,mt,et,Fe,0,st,Ct,null),et>>=1,Fe>>=1}}else if(Gt.length>0){if(he&&tt){const et=Wt(Gt[0]);t.texStorage2D(i.TEXTURE_2D,ft,mt,et.width,et.height)}for(let et=0,Fe=Gt.length;et<Fe;et++)dt=Gt[et],he?ot&&t.texSubImage2D(i.TEXTURE_2D,et,0,0,st,Ct,dt):t.texImage2D(i.TEXTURE_2D,et,mt,st,Ct,dt);W.generateMipmaps=!1}else if(he){if(tt){const et=Wt(Ke);t.texStorage2D(i.TEXTURE_2D,ft,mt,et.width,et.height)}ot&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,st,Ct,Ke)}else t.texImage2D(i.TEXTURE_2D,0,mt,st,Ct,Ke);w(W)&&b(Oe),It.__version=Pe.version,W.onUpdate&&W.onUpdate(W)}te.__version=W.version}function Le(te,W,Se){if(W.image.length!==6)return;const Oe=De(te,W),Ze=W.source;t.bindTexture(i.TEXTURE_CUBE_MAP,te.__webglTexture,i.TEXTURE0+Se);const Pe=n.get(Ze);if(Ze.version!==Pe.__version||Oe===!0){t.activeTexture(i.TEXTURE0+Se);const It=Gn.getPrimaries(Gn.workingColorSpace),lt=W.colorSpace===su?null:Gn.getPrimaries(W.colorSpace),Mt=W.colorSpace===su||It===lt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,W.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,W.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Mt);const wt=W.isCompressedTexture||W.image[0].isCompressedTexture,Ke=W.image[0]&&W.image[0].isDataTexture,st=[];for(let Fe=0;Fe<6;Fe++)!wt&&!Ke?st[Fe]=C(W.image[Fe],!0,s.maxCubemapSize):st[Fe]=Ke?W.image[Fe].image:W.image[Fe],st[Fe]=Vt(W,st[Fe]);const Ct=st[0],mt=a.convert(W.format,W.colorSpace),dt=a.convert(W.type),Gt=V(W.internalFormat,mt,dt,W.colorSpace),he=W.isVideoTexture!==!0,tt=Pe.__version===void 0||Oe===!0,ot=Ze.dataReady;let ft=j(W,Ct);le(i.TEXTURE_CUBE_MAP,W);let et;if(wt){he&&tt&&t.texStorage2D(i.TEXTURE_CUBE_MAP,ft,Gt,Ct.width,Ct.height);for(let Fe=0;Fe<6;Fe++){et=st[Fe].mipmaps;for(let vt=0;vt<et.length;vt++){const qt=et[vt];W.format!==Nr?mt!==null?he?ot&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,vt,0,0,qt.width,qt.height,mt,qt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,vt,Gt,qt.width,qt.height,0,qt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?ot&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,vt,0,0,qt.width,qt.height,mt,dt,qt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,vt,Gt,qt.width,qt.height,0,mt,dt,qt.data)}}}else{if(et=W.mipmaps,he&&tt){et.length>0&&ft++;const Fe=Wt(st[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,ft,Gt,Fe.width,Fe.height)}for(let Fe=0;Fe<6;Fe++)if(Ke){he?ot&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,0,0,st[Fe].width,st[Fe].height,mt,dt,st[Fe].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,Gt,st[Fe].width,st[Fe].height,0,mt,dt,st[Fe].data);for(let vt=0;vt<et.length;vt++){const Rn=et[vt].image[Fe].image;he?ot&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,vt+1,0,0,Rn.width,Rn.height,mt,dt,Rn.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,vt+1,Gt,Rn.width,Rn.height,0,mt,dt,Rn.data)}}else{he?ot&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,0,0,mt,dt,st[Fe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,Gt,mt,dt,st[Fe]);for(let vt=0;vt<et.length;vt++){const qt=et[vt];he?ot&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,vt+1,0,0,mt,dt,qt.image[Fe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,vt+1,Gt,mt,dt,qt.image[Fe])}}}w(W)&&b(i.TEXTURE_CUBE_MAP),Pe.__version=Ze.version,W.onUpdate&&W.onUpdate(W)}te.__version=W.version}function at(te,W,Se,Oe,Ze,Pe){const It=a.convert(Se.format,Se.colorSpace),lt=a.convert(Se.type),Mt=V(Se.internalFormat,It,lt,Se.colorSpace),wt=n.get(W),Ke=n.get(Se);if(Ke.__renderTarget=W,!wt.__hasExternalTextures){const st=Math.max(1,W.width>>Pe),Ct=Math.max(1,W.height>>Pe);Ze===i.TEXTURE_3D||Ze===i.TEXTURE_2D_ARRAY?t.texImage3D(Ze,Pe,Mt,st,Ct,W.depth,0,It,lt,null):t.texImage2D(Ze,Pe,Mt,st,Ct,0,It,lt,null)}t.bindFramebuffer(i.FRAMEBUFFER,te),je(W)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Oe,Ze,Ke.__webglTexture,0,ut(W)):(Ze===i.TEXTURE_2D||Ze>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Ze<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Oe,Ze,Ke.__webglTexture,Pe),t.bindFramebuffer(i.FRAMEBUFFER,null)}function pt(te,W,Se){if(i.bindRenderbuffer(i.RENDERBUFFER,te),W.depthBuffer){const Oe=W.depthTexture,Ze=Oe&&Oe.isDepthTexture?Oe.type:null,Pe=z(W.stencilBuffer,Ze),It=W.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,lt=ut(W);je(W)?u.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,lt,Pe,W.width,W.height):Se?i.renderbufferStorageMultisample(i.RENDERBUFFER,lt,Pe,W.width,W.height):i.renderbufferStorage(i.RENDERBUFFER,Pe,W.width,W.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,It,i.RENDERBUFFER,te)}else{const Oe=W.textures;for(let Ze=0;Ze<Oe.length;Ze++){const Pe=Oe[Ze],It=a.convert(Pe.format,Pe.colorSpace),lt=a.convert(Pe.type),Mt=V(Pe.internalFormat,It,lt,Pe.colorSpace),wt=ut(W);Se&&je(W)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,wt,Mt,W.width,W.height):je(W)?u.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,wt,Mt,W.width,W.height):i.renderbufferStorage(i.RENDERBUFFER,Mt,W.width,W.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function bt(te,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,te),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Oe=n.get(W.depthTexture);Oe.__renderTarget=W,(!Oe.__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),ge(W.depthTexture,0);const Ze=Oe.__webglTexture,Pe=ut(W);if(W.depthTexture.format===Im)je(W)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ze,0,Pe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ze,0);else if(W.depthTexture.format===Dm)je(W)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ze,0,Pe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ze,0);else throw new Error("Unknown depthTexture format")}function Zt(te){const W=n.get(te),Se=te.isWebGLCubeRenderTarget===!0;if(W.__boundDepthTexture!==te.depthTexture){const Oe=te.depthTexture;if(W.__depthDisposeCallback&&W.__depthDisposeCallback(),Oe){const Ze=()=>{delete W.__boundDepthTexture,delete W.__depthDisposeCallback,Oe.removeEventListener("dispose",Ze)};Oe.addEventListener("dispose",Ze),W.__depthDisposeCallback=Ze}W.__boundDepthTexture=Oe}if(te.depthTexture&&!W.__autoAllocateDepthBuffer){if(Se)throw new Error("target.depthTexture not supported in Cube render targets");const Oe=te.texture.mipmaps;Oe&&Oe.length>0?bt(W.__webglFramebuffer[0],te):bt(W.__webglFramebuffer,te)}else if(Se){W.__webglDepthbuffer=[];for(let Oe=0;Oe<6;Oe++)if(t.bindFramebuffer(i.FRAMEBUFFER,W.__webglFramebuffer[Oe]),W.__webglDepthbuffer[Oe]===void 0)W.__webglDepthbuffer[Oe]=i.createRenderbuffer(),pt(W.__webglDepthbuffer[Oe],te,!1);else{const Ze=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Pe=W.__webglDepthbuffer[Oe];i.bindRenderbuffer(i.RENDERBUFFER,Pe),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ze,i.RENDERBUFFER,Pe)}}else{const Oe=te.texture.mipmaps;if(Oe&&Oe.length>0?t.bindFramebuffer(i.FRAMEBUFFER,W.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer===void 0)W.__webglDepthbuffer=i.createRenderbuffer(),pt(W.__webglDepthbuffer,te,!1);else{const Ze=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Pe=W.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Pe),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ze,i.RENDERBUFFER,Pe)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function An(te,W,Se){const Oe=n.get(te);W!==void 0&&at(Oe.__webglFramebuffer,te,te.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),Se!==void 0&&Zt(te)}function se(te){const W=te.texture,Se=n.get(te),Oe=n.get(W);te.addEventListener("dispose",P);const Ze=te.textures,Pe=te.isWebGLCubeRenderTarget===!0,It=Ze.length>1;if(It||(Oe.__webglTexture===void 0&&(Oe.__webglTexture=i.createTexture()),Oe.__version=W.version,l.memory.textures++),Pe){Se.__webglFramebuffer=[];for(let lt=0;lt<6;lt++)if(W.mipmaps&&W.mipmaps.length>0){Se.__webglFramebuffer[lt]=[];for(let Mt=0;Mt<W.mipmaps.length;Mt++)Se.__webglFramebuffer[lt][Mt]=i.createFramebuffer()}else Se.__webglFramebuffer[lt]=i.createFramebuffer()}else{if(W.mipmaps&&W.mipmaps.length>0){Se.__webglFramebuffer=[];for(let lt=0;lt<W.mipmaps.length;lt++)Se.__webglFramebuffer[lt]=i.createFramebuffer()}else Se.__webglFramebuffer=i.createFramebuffer();if(It)for(let lt=0,Mt=Ze.length;lt<Mt;lt++){const wt=n.get(Ze[lt]);wt.__webglTexture===void 0&&(wt.__webglTexture=i.createTexture(),l.memory.textures++)}if(te.samples>0&&je(te)===!1){Se.__webglMultisampledFramebuffer=i.createFramebuffer(),Se.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Se.__webglMultisampledFramebuffer);for(let lt=0;lt<Ze.length;lt++){const Mt=Ze[lt];Se.__webglColorRenderbuffer[lt]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Se.__webglColorRenderbuffer[lt]);const wt=a.convert(Mt.format,Mt.colorSpace),Ke=a.convert(Mt.type),st=V(Mt.internalFormat,wt,Ke,Mt.colorSpace,te.isXRRenderTarget===!0),Ct=ut(te);i.renderbufferStorageMultisample(i.RENDERBUFFER,Ct,st,te.width,te.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.RENDERBUFFER,Se.__webglColorRenderbuffer[lt])}i.bindRenderbuffer(i.RENDERBUFFER,null),te.depthBuffer&&(Se.__webglDepthRenderbuffer=i.createRenderbuffer(),pt(Se.__webglDepthRenderbuffer,te,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Pe){t.bindTexture(i.TEXTURE_CUBE_MAP,Oe.__webglTexture),le(i.TEXTURE_CUBE_MAP,W);for(let lt=0;lt<6;lt++)if(W.mipmaps&&W.mipmaps.length>0)for(let Mt=0;Mt<W.mipmaps.length;Mt++)at(Se.__webglFramebuffer[lt][Mt],te,W,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+lt,Mt);else at(Se.__webglFramebuffer[lt],te,W,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+lt,0);w(W)&&b(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(It){for(let lt=0,Mt=Ze.length;lt<Mt;lt++){const wt=Ze[lt],Ke=n.get(wt);let st=i.TEXTURE_2D;(te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(st=te.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(st,Ke.__webglTexture),le(st,wt),at(Se.__webglFramebuffer,te,wt,i.COLOR_ATTACHMENT0+lt,st,0),w(wt)&&b(st)}t.unbindTexture()}else{let lt=i.TEXTURE_2D;if((te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(lt=te.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(lt,Oe.__webglTexture),le(lt,W),W.mipmaps&&W.mipmaps.length>0)for(let Mt=0;Mt<W.mipmaps.length;Mt++)at(Se.__webglFramebuffer[Mt],te,W,i.COLOR_ATTACHMENT0,lt,Mt);else at(Se.__webglFramebuffer,te,W,i.COLOR_ATTACHMENT0,lt,0);w(W)&&b(lt),t.unbindTexture()}te.depthBuffer&&Zt(te)}function qe(te){const W=te.textures;for(let Se=0,Oe=W.length;Se<Oe;Se++){const Ze=W[Se];if(w(Ze)){const Pe=D(te),It=n.get(Ze).__webglTexture;t.bindTexture(Pe,It),b(Pe),t.unbindTexture()}}}const ke=[],Be=[];function Ve(te){if(te.samples>0){if(je(te)===!1){const W=te.textures,Se=te.width,Oe=te.height;let Ze=i.COLOR_BUFFER_BIT;const Pe=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,It=n.get(te),lt=W.length>1;if(lt)for(let wt=0;wt<W.length;wt++)t.bindFramebuffer(i.FRAMEBUFFER,It.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+wt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,It.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+wt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,It.__webglMultisampledFramebuffer);const Mt=te.texture.mipmaps;Mt&&Mt.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,It.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,It.__webglFramebuffer);for(let wt=0;wt<W.length;wt++){if(te.resolveDepthBuffer&&(te.depthBuffer&&(Ze|=i.DEPTH_BUFFER_BIT),te.stencilBuffer&&te.resolveStencilBuffer&&(Ze|=i.STENCIL_BUFFER_BIT)),lt){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,It.__webglColorRenderbuffer[wt]);const Ke=n.get(W[wt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Ke,0)}i.blitFramebuffer(0,0,Se,Oe,0,0,Se,Oe,Ze,i.NEAREST),d===!0&&(ke.length=0,Be.length=0,ke.push(i.COLOR_ATTACHMENT0+wt),te.depthBuffer&&te.resolveDepthBuffer===!1&&(ke.push(Pe),Be.push(Pe),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Be)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,ke))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),lt)for(let wt=0;wt<W.length;wt++){t.bindFramebuffer(i.FRAMEBUFFER,It.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+wt,i.RENDERBUFFER,It.__webglColorRenderbuffer[wt]);const Ke=n.get(W[wt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,It.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+wt,i.TEXTURE_2D,Ke,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,It.__webglMultisampledFramebuffer)}else if(te.depthBuffer&&te.resolveDepthBuffer===!1&&d){const W=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[W])}}}function ut(te){return Math.min(s.maxSamples,te.samples)}function je(te){const W=n.get(te);return te.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function Qe(te){const W=l.render.frame;y.get(te)!==W&&(y.set(te,W),te.update())}function Vt(te,W){const Se=te.colorSpace,Oe=te.format,Ze=te.type;return te.isCompressedTexture===!0||te.isVideoTexture===!0||Se!==qh&&Se!==su&&(Gn.getTransfer(Se)===ci?(Oe!==Nr||Ze!==Io)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Se)),W}function Wt(te){return typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement?(p.width=te.naturalWidth||te.width,p.height=te.naturalHeight||te.height):typeof VideoFrame<"u"&&te instanceof VideoFrame?(p.width=te.displayWidth,p.height=te.displayHeight):(p.width=te.width,p.height=te.height),p}this.allocateTextureUnit=q,this.resetTextureUnits=Y,this.setTexture2D=ge,this.setTexture2DArray=X,this.setTexture3D=ee,this.setTextureCube=ne,this.rebindTextures=An,this.setupRenderTarget=se,this.updateRenderTargetMipmap=qe,this.updateMultisampleRenderTarget=Ve,this.setupDepthRenderbuffer=Zt,this.setupFrameBufferTexture=at,this.useMultisampledRTT=je}function uL(i,e){function t(n,s=su){let a;const l=Gn.getTransfer(s);if(n===Io)return i.UNSIGNED_BYTE;if(n===mx)return i.UNSIGNED_SHORT_4_4_4_4;if(n===gx)return i.UNSIGNED_SHORT_5_5_5_1;if(n===p1)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===m1)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===f1)return i.BYTE;if(n===d1)return i.SHORT;if(n===Rm)return i.UNSIGNED_SHORT;if(n===px)return i.INT;if(n===Su)return i.UNSIGNED_INT;if(n===wa)return i.FLOAT;if(n===Jm)return i.HALF_FLOAT;if(n===g1)return i.ALPHA;if(n===y1)return i.RGB;if(n===Nr)return i.RGBA;if(n===Im)return i.DEPTH_COMPONENT;if(n===Dm)return i.DEPTH_STENCIL;if(n===yx)return i.RED;if(n===j_)return i.RED_INTEGER;if(n===_1)return i.RG;if(n===_x)return i.RG_INTEGER;if(n===vx)return i.RGBA_INTEGER;if(n===Yy||n===Ky||n===Qy||n===Zy)if(l===ci)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(n===Yy)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ky)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Qy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Zy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(n===Yy)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ky)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Qy)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Zy)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===iE||n===sE||n===rE||n===aE)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(n===iE)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===sE)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===rE)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===aE)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===oE||n===lE||n===cE)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(n===oE||n===lE)return l===ci?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===cE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===uE||n===hE||n===fE||n===dE||n===pE||n===mE||n===gE||n===yE||n===_E||n===vE||n===SE||n===EE||n===xE||n===TE)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(n===uE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===hE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===fE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===dE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===pE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===mE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===gE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===yE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===_E)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===vE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===SE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===EE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===xE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===TE)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===bE||n===AE||n===ME)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(n===bE)return l===ci?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===AE)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===ME)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===wE||n===RE||n===CE||n===IE)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(n===wE)return a.COMPRESSED_RED_RGTC1_EXT;if(n===RE)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===CE)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===IE)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Cm?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const sK=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,rK=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class aK{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new I1(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new vl({vertexShader:sK,fragmentShader:rK,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new vs(new tg(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class oK extends Sc{constructor(e,t){super();const n=this;let s=null,a=1,l=null,u="local-floor",d=1,p=null,y=null,_=null,S=null,T=null,M=null;const C=typeof XRWebGLBinding<"u",w=new aK,b={},D=t.getContextAttributes();let V=null,z=null;const j=[],G=[],P=new $e;let L=null;const I=new ks;I.viewport=new Yn;const O=new ks;O.viewport=new Yn;const F=[I,O],Y=new $U;let q=null,de=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Te){let Le=j[Te];return Le===void 0&&(Le=new TS,j[Te]=Le),Le.getTargetRaySpace()},this.getControllerGrip=function(Te){let Le=j[Te];return Le===void 0&&(Le=new TS,j[Te]=Le),Le.getGripSpace()},this.getHand=function(Te){let Le=j[Te];return Le===void 0&&(Le=new TS,j[Te]=Le),Le.getHandSpace()};function ge(Te){const Le=G.indexOf(Te.inputSource);if(Le===-1)return;const at=j[Le];at!==void 0&&(at.update(Te.inputSource,Te.frame,p||l),at.dispatchEvent({type:Te.type,data:Te.inputSource}))}function X(){s.removeEventListener("select",ge),s.removeEventListener("selectstart",ge),s.removeEventListener("selectend",ge),s.removeEventListener("squeeze",ge),s.removeEventListener("squeezestart",ge),s.removeEventListener("squeezeend",ge),s.removeEventListener("end",X),s.removeEventListener("inputsourceschange",ee);for(let Te=0;Te<j.length;Te++){const Le=G[Te];Le!==null&&(G[Te]=null,j[Te].disconnect(Le))}q=null,de=null,w.reset();for(const Te in b)delete b[Te];e.setRenderTarget(V),T=null,S=null,_=null,s=null,z=null,nt.stop(),n.isPresenting=!1,e.setPixelRatio(L),e.setSize(P.width,P.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Te){a=Te,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Te){u=Te,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||l},this.setReferenceSpace=function(Te){p=Te},this.getBaseLayer=function(){return S!==null?S:T},this.getBinding=function(){return _===null&&C&&(_=new XRWebGLBinding(s,t)),_},this.getFrame=function(){return M},this.getSession=function(){return s},this.setSession=async function(Te){if(s=Te,s!==null){if(V=e.getRenderTarget(),s.addEventListener("select",ge),s.addEventListener("selectstart",ge),s.addEventListener("selectend",ge),s.addEventListener("squeeze",ge),s.addEventListener("squeezestart",ge),s.addEventListener("squeezeend",ge),s.addEventListener("end",X),s.addEventListener("inputsourceschange",ee),D.xrCompatible!==!0&&await t.makeXRCompatible(),L=e.getPixelRatio(),e.getSize(P),C&&"createProjectionLayer"in XRWebGLBinding.prototype){let at=null,pt=null,bt=null;D.depth&&(bt=D.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,at=D.stencil?Dm:Im,pt=D.stencil?Cm:Su);const Zt={colorFormat:t.RGBA8,depthFormat:bt,scaleFactor:a};_=this.getBinding(),S=_.createProjectionLayer(Zt),s.updateRenderState({layers:[S]}),e.setPixelRatio(1),e.setSize(S.textureWidth,S.textureHeight,!1),z=new _c(S.textureWidth,S.textureHeight,{format:Nr,type:Io,depthTexture:new C1(S.textureWidth,S.textureHeight,pt,void 0,void 0,void 0,void 0,void 0,void 0,at),stencilBuffer:D.stencil,colorSpace:e.outputColorSpace,samples:D.antialias?4:0,resolveDepthBuffer:S.ignoreDepthValues===!1,resolveStencilBuffer:S.ignoreDepthValues===!1})}else{const at={antialias:D.antialias,alpha:!0,depth:D.depth,stencil:D.stencil,framebufferScaleFactor:a};T=new XRWebGLLayer(s,t,at),s.updateRenderState({baseLayer:T}),e.setPixelRatio(1),e.setSize(T.framebufferWidth,T.framebufferHeight,!1),z=new _c(T.framebufferWidth,T.framebufferHeight,{format:Nr,type:Io,colorSpace:e.outputColorSpace,stencilBuffer:D.stencil,resolveDepthBuffer:T.ignoreDepthValues===!1,resolveStencilBuffer:T.ignoreDepthValues===!1})}z.isXRRenderTarget=!0,this.setFoveation(d),p=null,l=await s.requestReferenceSpace(u),nt.setContext(s),nt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function ee(Te){for(let Le=0;Le<Te.removed.length;Le++){const at=Te.removed[Le],pt=G.indexOf(at);pt>=0&&(G[pt]=null,j[pt].disconnect(at))}for(let Le=0;Le<Te.added.length;Le++){const at=Te.added[Le];let pt=G.indexOf(at);if(pt===-1){for(let Zt=0;Zt<j.length;Zt++)if(Zt>=G.length){G.push(at),pt=Zt;break}else if(G[Zt]===null){G[Zt]=at,pt=Zt;break}if(pt===-1)break}const bt=j[pt];bt&&bt.connect(at)}}const ne=new ie,pe=new ie;function re(Te,Le,at){ne.setFromMatrixPosition(Le.matrixWorld),pe.setFromMatrixPosition(at.matrixWorld);const pt=ne.distanceTo(pe),bt=Le.projectionMatrix.elements,Zt=at.projectionMatrix.elements,An=bt[14]/(bt[10]-1),se=bt[14]/(bt[10]+1),qe=(bt[9]+1)/bt[5],ke=(bt[9]-1)/bt[5],Be=(bt[8]-1)/bt[0],Ve=(Zt[8]+1)/Zt[0],ut=An*Be,je=An*Ve,Qe=pt/(-Be+Ve),Vt=Qe*-Be;if(Le.matrixWorld.decompose(Te.position,Te.quaternion,Te.scale),Te.translateX(Vt),Te.translateZ(Qe),Te.matrixWorld.compose(Te.position,Te.quaternion,Te.scale),Te.matrixWorldInverse.copy(Te.matrixWorld).invert(),bt[10]===-1)Te.projectionMatrix.copy(Le.projectionMatrix),Te.projectionMatrixInverse.copy(Le.projectionMatrixInverse);else{const Wt=An+Qe,te=se+Qe,W=ut-Vt,Se=je+(pt-Vt),Oe=qe*se/te*Wt,Ze=ke*se/te*Wt;Te.projectionMatrix.makePerspective(W,Se,Oe,Ze,Wt,te),Te.projectionMatrixInverse.copy(Te.projectionMatrix).invert()}}function J(Te,Le){Le===null?Te.matrixWorld.copy(Te.matrix):Te.matrixWorld.multiplyMatrices(Le.matrixWorld,Te.matrix),Te.matrixWorldInverse.copy(Te.matrixWorld).invert()}this.updateCamera=function(Te){if(s===null)return;let Le=Te.near,at=Te.far;w.texture!==null&&(w.depthNear>0&&(Le=w.depthNear),w.depthFar>0&&(at=w.depthFar)),Y.near=O.near=I.near=Le,Y.far=O.far=I.far=at,(q!==Y.near||de!==Y.far)&&(s.updateRenderState({depthNear:Y.near,depthFar:Y.far}),q=Y.near,de=Y.far),Y.layers.mask=Te.layers.mask|6,I.layers.mask=Y.layers.mask&3,O.layers.mask=Y.layers.mask&5;const pt=Te.parent,bt=Y.cameras;J(Y,pt);for(let Zt=0;Zt<bt.length;Zt++)J(bt[Zt],pt);bt.length===2?re(Y,I,O):Y.projectionMatrix.copy(I.projectionMatrix),le(Te,Y,pt)};function le(Te,Le,at){at===null?Te.matrix.copy(Le.matrixWorld):(Te.matrix.copy(at.matrixWorld),Te.matrix.invert(),Te.matrix.multiply(Le.matrixWorld)),Te.matrix.decompose(Te.position,Te.quaternion,Te.scale),Te.updateMatrixWorld(!0),Te.projectionMatrix.copy(Le.projectionMatrix),Te.projectionMatrixInverse.copy(Le.projectionMatrixInverse),Te.isPerspectiveCamera&&(Te.fov=Om*2*Math.atan(1/Te.projectionMatrix.elements[5]),Te.zoom=1)}this.getCamera=function(){return Y},this.getFoveation=function(){if(!(S===null&&T===null))return d},this.setFoveation=function(Te){d=Te,S!==null&&(S.fixedFoveation=Te),T!==null&&T.fixedFoveation!==void 0&&(T.fixedFoveation=Te)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(Y)},this.getCameraTexture=function(Te){return b[Te]};let De=null;function Re(Te,Le){if(y=Le.getViewerPose(p||l),M=Le,y!==null){const at=y.views;T!==null&&(e.setRenderTargetFramebuffer(z,T.framebuffer),e.setRenderTarget(z));let pt=!1;at.length!==Y.cameras.length&&(Y.cameras.length=0,pt=!0);for(let se=0;se<at.length;se++){const qe=at[se];let ke=null;if(T!==null)ke=T.getViewport(qe);else{const Ve=_.getViewSubImage(S,qe);ke=Ve.viewport,se===0&&(e.setRenderTargetTextures(z,Ve.colorTexture,Ve.depthStencilTexture),e.setRenderTarget(z))}let Be=F[se];Be===void 0&&(Be=new ks,Be.layers.enable(se),Be.viewport=new Yn,F[se]=Be),Be.matrix.fromArray(qe.transform.matrix),Be.matrix.decompose(Be.position,Be.quaternion,Be.scale),Be.projectionMatrix.fromArray(qe.projectionMatrix),Be.projectionMatrixInverse.copy(Be.projectionMatrix).invert(),Be.viewport.set(ke.x,ke.y,ke.width,ke.height),se===0&&(Y.matrix.copy(Be.matrix),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale)),pt===!0&&Y.cameras.push(Be)}const bt=s.enabledFeatures;if(bt&&bt.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&C){_=n.getBinding();const se=_.getDepthInformation(at[0]);se&&se.isValid&&se.texture&&w.init(se,s.renderState)}if(bt&&bt.includes("camera-access")&&C){e.state.unbindTexture(),_=n.getBinding();for(let se=0;se<at.length;se++){const qe=at[se].camera;if(qe){let ke=b[qe];ke||(ke=new I1,b[qe]=ke);const Be=_.getCameraImage(qe);ke.sourceTexture=Be}}}}for(let at=0;at<j.length;at++){const pt=G[at],bt=j[at];pt!==null&&bt!==void 0&&bt.update(pt,Le,p||l)}De&&De(Te,Le),Le.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Le}),M=null}const nt=new rL;nt.setAnimationLoop(Re),this.setAnimationLoop=function(Te){De=Te},this.dispose=function(){}}}const ed=new $a,lK=new tn;function cK(i,e){function t(w,b){w.matrixAutoUpdate===!0&&w.updateMatrix(),b.value.copy(w.matrix)}function n(w,b){b.color.getRGB(w.fogColor.value,sU(i)),b.isFog?(w.fogNear.value=b.near,w.fogFar.value=b.far):b.isFogExp2&&(w.fogDensity.value=b.density)}function s(w,b,D,V,z){b.isMeshBasicMaterial||b.isMeshLambertMaterial?a(w,b):b.isMeshToonMaterial?(a(w,b),_(w,b)):b.isMeshPhongMaterial?(a(w,b),y(w,b)):b.isMeshStandardMaterial?(a(w,b),S(w,b),b.isMeshPhysicalMaterial&&T(w,b,z)):b.isMeshMatcapMaterial?(a(w,b),M(w,b)):b.isMeshDepthMaterial?a(w,b):b.isMeshDistanceMaterial?(a(w,b),C(w,b)):b.isMeshNormalMaterial?a(w,b):b.isLineBasicMaterial?(l(w,b),b.isLineDashedMaterial&&u(w,b)):b.isPointsMaterial?d(w,b,D,V):b.isSpriteMaterial?p(w,b):b.isShadowMaterial?(w.color.value.copy(b.color),w.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function a(w,b){w.opacity.value=b.opacity,b.color&&w.diffuse.value.copy(b.color),b.emissive&&w.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(w.map.value=b.map,t(b.map,w.mapTransform)),b.alphaMap&&(w.alphaMap.value=b.alphaMap,t(b.alphaMap,w.alphaMapTransform)),b.bumpMap&&(w.bumpMap.value=b.bumpMap,t(b.bumpMap,w.bumpMapTransform),w.bumpScale.value=b.bumpScale,b.side===oa&&(w.bumpScale.value*=-1)),b.normalMap&&(w.normalMap.value=b.normalMap,t(b.normalMap,w.normalMapTransform),w.normalScale.value.copy(b.normalScale),b.side===oa&&w.normalScale.value.negate()),b.displacementMap&&(w.displacementMap.value=b.displacementMap,t(b.displacementMap,w.displacementMapTransform),w.displacementScale.value=b.displacementScale,w.displacementBias.value=b.displacementBias),b.emissiveMap&&(w.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,w.emissiveMapTransform)),b.specularMap&&(w.specularMap.value=b.specularMap,t(b.specularMap,w.specularMapTransform)),b.alphaTest>0&&(w.alphaTest.value=b.alphaTest);const D=e.get(b),V=D.envMap,z=D.envMapRotation;V&&(w.envMap.value=V,ed.copy(z),ed.x*=-1,ed.y*=-1,ed.z*=-1,V.isCubeTexture&&V.isRenderTargetTexture===!1&&(ed.y*=-1,ed.z*=-1),w.envMapRotation.value.setFromMatrix4(lK.makeRotationFromEuler(ed)),w.flipEnvMap.value=V.isCubeTexture&&V.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=b.reflectivity,w.ior.value=b.ior,w.refractionRatio.value=b.refractionRatio),b.lightMap&&(w.lightMap.value=b.lightMap,w.lightMapIntensity.value=b.lightMapIntensity,t(b.lightMap,w.lightMapTransform)),b.aoMap&&(w.aoMap.value=b.aoMap,w.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,w.aoMapTransform))}function l(w,b){w.diffuse.value.copy(b.color),w.opacity.value=b.opacity,b.map&&(w.map.value=b.map,t(b.map,w.mapTransform))}function u(w,b){w.dashSize.value=b.dashSize,w.totalSize.value=b.dashSize+b.gapSize,w.scale.value=b.scale}function d(w,b,D,V){w.diffuse.value.copy(b.color),w.opacity.value=b.opacity,w.size.value=b.size*D,w.scale.value=V*.5,b.map&&(w.map.value=b.map,t(b.map,w.uvTransform)),b.alphaMap&&(w.alphaMap.value=b.alphaMap,t(b.alphaMap,w.alphaMapTransform)),b.alphaTest>0&&(w.alphaTest.value=b.alphaTest)}function p(w,b){w.diffuse.value.copy(b.color),w.opacity.value=b.opacity,w.rotation.value=b.rotation,b.map&&(w.map.value=b.map,t(b.map,w.mapTransform)),b.alphaMap&&(w.alphaMap.value=b.alphaMap,t(b.alphaMap,w.alphaMapTransform)),b.alphaTest>0&&(w.alphaTest.value=b.alphaTest)}function y(w,b){w.specular.value.copy(b.specular),w.shininess.value=Math.max(b.shininess,1e-4)}function _(w,b){b.gradientMap&&(w.gradientMap.value=b.gradientMap)}function S(w,b){w.metalness.value=b.metalness,b.metalnessMap&&(w.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,w.metalnessMapTransform)),w.roughness.value=b.roughness,b.roughnessMap&&(w.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,w.roughnessMapTransform)),b.envMap&&(w.envMapIntensity.value=b.envMapIntensity)}function T(w,b,D){w.ior.value=b.ior,b.sheen>0&&(w.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),w.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(w.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,w.sheenColorMapTransform)),b.sheenRoughnessMap&&(w.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,w.sheenRoughnessMapTransform))),b.clearcoat>0&&(w.clearcoat.value=b.clearcoat,w.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(w.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,w.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(w.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===oa&&w.clearcoatNormalScale.value.negate())),b.dispersion>0&&(w.dispersion.value=b.dispersion),b.iridescence>0&&(w.iridescence.value=b.iridescence,w.iridescenceIOR.value=b.iridescenceIOR,w.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(w.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,w.iridescenceMapTransform)),b.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),b.transmission>0&&(w.transmission.value=b.transmission,w.transmissionSamplerMap.value=D.texture,w.transmissionSamplerSize.value.set(D.width,D.height),b.transmissionMap&&(w.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,w.transmissionMapTransform)),w.thickness.value=b.thickness,b.thicknessMap&&(w.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=b.attenuationDistance,w.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(w.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(w.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=b.specularIntensity,w.specularColor.value.copy(b.specularColor),b.specularColorMap&&(w.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,w.specularColorMapTransform)),b.specularIntensityMap&&(w.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,w.specularIntensityMapTransform))}function M(w,b){b.matcap&&(w.matcap.value=b.matcap)}function C(w,b){const D=e.get(b).light;w.referencePosition.value.setFromMatrixPosition(D.matrixWorld),w.nearDistance.value=D.shadow.camera.near,w.farDistance.value=D.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function uK(i,e,t,n){let s={},a={},l=[];const u=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function d(D,V){const z=V.program;n.uniformBlockBinding(D,z)}function p(D,V){let z=s[D.id];z===void 0&&(M(D),z=y(D),s[D.id]=z,D.addEventListener("dispose",w));const j=V.program;n.updateUBOMapping(D,j);const G=e.render.frame;a[D.id]!==G&&(S(D),a[D.id]=G)}function y(D){const V=_();D.__bindingPointIndex=V;const z=i.createBuffer(),j=D.__size,G=D.usage;return i.bindBuffer(i.UNIFORM_BUFFER,z),i.bufferData(i.UNIFORM_BUFFER,j,G),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,V,z),z}function _(){for(let D=0;D<u;D++)if(l.indexOf(D)===-1)return l.push(D),D;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function S(D){const V=s[D.id],z=D.uniforms,j=D.__cache;i.bindBuffer(i.UNIFORM_BUFFER,V);for(let G=0,P=z.length;G<P;G++){const L=Array.isArray(z[G])?z[G]:[z[G]];for(let I=0,O=L.length;I<O;I++){const F=L[I];if(T(F,G,I,j)===!0){const Y=F.__offset,q=Array.isArray(F.value)?F.value:[F.value];let de=0;for(let ge=0;ge<q.length;ge++){const X=q[ge],ee=C(X);typeof X=="number"||typeof X=="boolean"?(F.__data[0]=X,i.bufferSubData(i.UNIFORM_BUFFER,Y+de,F.__data)):X.isMatrix3?(F.__data[0]=X.elements[0],F.__data[1]=X.elements[1],F.__data[2]=X.elements[2],F.__data[3]=0,F.__data[4]=X.elements[3],F.__data[5]=X.elements[4],F.__data[6]=X.elements[5],F.__data[7]=0,F.__data[8]=X.elements[6],F.__data[9]=X.elements[7],F.__data[10]=X.elements[8],F.__data[11]=0):(X.toArray(F.__data,de),de+=ee.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,Y,F.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function T(D,V,z,j){const G=D.value,P=V+"_"+z;if(j[P]===void 0)return typeof G=="number"||typeof G=="boolean"?j[P]=G:j[P]=G.clone(),!0;{const L=j[P];if(typeof G=="number"||typeof G=="boolean"){if(L!==G)return j[P]=G,!0}else if(L.equals(G)===!1)return L.copy(G),!0}return!1}function M(D){const V=D.uniforms;let z=0;const j=16;for(let P=0,L=V.length;P<L;P++){const I=Array.isArray(V[P])?V[P]:[V[P]];for(let O=0,F=I.length;O<F;O++){const Y=I[O],q=Array.isArray(Y.value)?Y.value:[Y.value];for(let de=0,ge=q.length;de<ge;de++){const X=q[de],ee=C(X),ne=z%j,pe=ne%ee.boundary,re=ne+pe;z+=pe,re!==0&&j-re<ee.storage&&(z+=j-re),Y.__data=new Float32Array(ee.storage/Float32Array.BYTES_PER_ELEMENT),Y.__offset=z,z+=ee.storage}}}const G=z%j;return G>0&&(z+=j-G),D.__size=z,D.__cache={},this}function C(D){const V={boundary:0,storage:0};return typeof D=="number"||typeof D=="boolean"?(V.boundary=4,V.storage=4):D.isVector2?(V.boundary=8,V.storage=8):D.isVector3||D.isColor?(V.boundary=16,V.storage=12):D.isVector4?(V.boundary=16,V.storage=16):D.isMatrix3?(V.boundary=48,V.storage=48):D.isMatrix4?(V.boundary=64,V.storage=64):D.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",D),V}function w(D){const V=D.target;V.removeEventListener("dispose",w);const z=l.indexOf(V.__bindingPointIndex);l.splice(z,1),i.deleteBuffer(s[V.id]),delete s[V.id],delete a[V.id]}function b(){for(const D in s)i.deleteBuffer(s[D]);l=[],s={},a={}}return{bind:d,update:p,dispose:b}}class hL{constructor(e={}){const{canvas:t=tU(),context:n=null,depth:s=!0,stencil:a=!1,alpha:l=!1,antialias:u=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:p=!1,powerPreference:y="default",failIfMajorPerformanceCaveat:_=!1,reversedDepthBuffer:S=!1}=e;this.isWebGLRenderer=!0;let T;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");T=n.getContextAttributes().alpha}else T=l;const M=new Uint32Array(4),C=new Int32Array(4);let w=null,b=null;const D=[],V=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=pc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const z=this;let j=!1;this._outputColorSpace=Ir;let G=0,P=0,L=null,I=-1,O=null;const F=new Yn,Y=new Yn;let q=null;const de=new At(0);let ge=0,X=t.width,ee=t.height,ne=1,pe=null,re=null;const J=new Yn(0,0,X,ee),le=new Yn(0,0,X,ee);let De=!1;const Re=new eg;let nt=!1,Te=!1;const Le=new tn,at=new ie,pt=new Yn,bt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Zt=!1;function An(){return L===null?ne:1}let se=n;function qe(Q,fe){return t.getContext(Q,fe)}try{const Q={alpha:!0,depth:s,stencil:a,antialias:u,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:y,failIfMajorPerformanceCaveat:_};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${hx}`),t.addEventListener("webglcontextlost",ot,!1),t.addEventListener("webglcontextrestored",ft,!1),t.addEventListener("webglcontextcreationerror",et,!1),se===null){const fe="webgl2";if(se=qe(fe,Q),se===null)throw qe(fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Q){throw console.error("THREE.WebGLRenderer: "+Q.message),Q}let ke,Be,Ve,ut,je,Qe,Vt,Wt,te,W,Se,Oe,Ze,Pe,It,lt,Mt,wt,Ke,st,Ct,mt,dt,Gt;function he(){ke=new xW(se),ke.init(),mt=new uL(se,ke),Be=new mW(se,ke,e,mt),Ve=new nK(se,ke),Be.reversedDepthBuffer&&S&&Ve.buffers.depth.setReversed(!0),ut=new AW(se),je=new GY,Qe=new iK(se,ke,Ve,je,Be,mt,ut),Vt=new yW(z),Wt=new EW(z),te=new Dj(se),dt=new dW(se,te),W=new TW(se,te,ut,dt),Se=new wW(se,W,te,ut),Ke=new MW(se,Be,Qe),lt=new gW(je),Oe=new kY(z,Vt,Wt,ke,Be,dt,lt),Ze=new cK(z,je),Pe=new qY,It=new ZY(ke),wt=new fW(z,Vt,Wt,Ve,Se,T,d),Mt=new eK(z,Se,Be),Gt=new uK(se,ut,Be,Ve),st=new pW(se,ke,ut),Ct=new bW(se,ke,ut),ut.programs=Oe.programs,z.capabilities=Be,z.extensions=ke,z.properties=je,z.renderLists=Pe,z.shadowMap=Mt,z.state=Ve,z.info=ut}he();const tt=new oK(z,se);this.xr=tt,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){const Q=ke.get("WEBGL_lose_context");Q&&Q.loseContext()},this.forceContextRestore=function(){const Q=ke.get("WEBGL_lose_context");Q&&Q.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(Q){Q!==void 0&&(ne=Q,this.setSize(X,ee,!1))},this.getSize=function(Q){return Q.set(X,ee)},this.setSize=function(Q,fe,Ee=!0){if(tt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}X=Q,ee=fe,t.width=Math.floor(Q*ne),t.height=Math.floor(fe*ne),Ee===!0&&(t.style.width=Q+"px",t.style.height=fe+"px"),this.setViewport(0,0,Q,fe)},this.getDrawingBufferSize=function(Q){return Q.set(X*ne,ee*ne).floor()},this.setDrawingBufferSize=function(Q,fe,Ee){X=Q,ee=fe,ne=Ee,t.width=Math.floor(Q*Ee),t.height=Math.floor(fe*Ee),this.setViewport(0,0,Q,fe)},this.getCurrentViewport=function(Q){return Q.copy(F)},this.getViewport=function(Q){return Q.copy(J)},this.setViewport=function(Q,fe,Ee,Ae){Q.isVector4?J.set(Q.x,Q.y,Q.z,Q.w):J.set(Q,fe,Ee,Ae),Ve.viewport(F.copy(J).multiplyScalar(ne).round())},this.getScissor=function(Q){return Q.copy(le)},this.setScissor=function(Q,fe,Ee,Ae){Q.isVector4?le.set(Q.x,Q.y,Q.z,Q.w):le.set(Q,fe,Ee,Ae),Ve.scissor(Y.copy(le).multiplyScalar(ne).round())},this.getScissorTest=function(){return De},this.setScissorTest=function(Q){Ve.setScissorTest(De=Q)},this.setOpaqueSort=function(Q){pe=Q},this.setTransparentSort=function(Q){re=Q},this.getClearColor=function(Q){return Q.copy(wt.getClearColor())},this.setClearColor=function(){wt.setClearColor(...arguments)},this.getClearAlpha=function(){return wt.getClearAlpha()},this.setClearAlpha=function(){wt.setClearAlpha(...arguments)},this.clear=function(Q=!0,fe=!0,Ee=!0){let Ae=0;if(Q){let me=!1;if(L!==null){const We=L.texture.format;me=We===vx||We===_x||We===j_}if(me){const We=L.texture.type,ht=We===Io||We===Su||We===Rm||We===Cm||We===mx||We===gx,xt=wt.getClearColor(),gt=wt.getClearAlpha(),Nt=xt.r,Ft=xt.g,Ut=xt.b;ht?(M[0]=Nt,M[1]=Ft,M[2]=Ut,M[3]=gt,se.clearBufferuiv(se.COLOR,0,M)):(C[0]=Nt,C[1]=Ft,C[2]=Ut,C[3]=gt,se.clearBufferiv(se.COLOR,0,C))}else Ae|=se.COLOR_BUFFER_BIT}fe&&(Ae|=se.DEPTH_BUFFER_BIT),Ee&&(Ae|=se.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),se.clear(Ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ot,!1),t.removeEventListener("webglcontextrestored",ft,!1),t.removeEventListener("webglcontextcreationerror",et,!1),wt.dispose(),Pe.dispose(),It.dispose(),je.dispose(),Vt.dispose(),Wt.dispose(),Se.dispose(),dt.dispose(),Gt.dispose(),Oe.dispose(),tt.dispose(),tt.removeEventListener("sessionstart",js),tt.removeEventListener("sessionend",Ia),qs.stop()};function ot(Q){Q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),j=!0}function ft(){console.log("THREE.WebGLRenderer: Context Restored."),j=!1;const Q=ut.autoReset,fe=Mt.enabled,Ee=Mt.autoUpdate,Ae=Mt.needsUpdate,me=Mt.type;he(),ut.autoReset=Q,Mt.enabled=fe,Mt.autoUpdate=Ee,Mt.needsUpdate=Ae,Mt.type=me}function et(Q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Q.statusMessage)}function Fe(Q){const fe=Q.target;fe.removeEventListener("dispose",Fe),vt(fe)}function vt(Q){qt(Q),je.remove(Q)}function qt(Q){const fe=je.get(Q).programs;fe!==void 0&&(fe.forEach(function(Ee){Oe.releaseProgram(Ee)}),Q.isShaderMaterial&&Oe.releaseShaderCache(Q))}this.renderBufferDirect=function(Q,fe,Ee,Ae,me,We){fe===null&&(fe=bt);const ht=me.isMesh&&me.matrixWorld.determinant()<0,xt=lr(Q,fe,Ee,Ae,me);Ve.setMaterial(Ae,ht);let gt=Ee.index,Nt=1;if(Ae.wireframe===!0){if(gt=W.getWireframeAttribute(Ee),gt===void 0)return;Nt=2}const Ft=Ee.drawRange,Ut=Ee.attributes.position;let cn=Ft.start*Nt,Nn=(Ft.start+Ft.count)*Nt;We!==null&&(cn=Math.max(cn,We.start*Nt),Nn=Math.min(Nn,(We.start+We.count)*Nt)),gt!==null?(cn=Math.max(cn,0),Nn=Math.min(Nn,gt.count)):Ut!=null&&(cn=Math.max(cn,0),Nn=Math.min(Nn,Ut.count));const Qn=Nn-cn;if(Qn<0||Qn===1/0)return;dt.setup(me,Ae,xt,Ee,gt);let gn,Xt=st;if(gt!==null&&(gn=te.get(gt),Xt=Ct,Xt.setIndex(gn)),me.isMesh)Ae.wireframe===!0?(Ve.setLineWidth(Ae.wireframeLinewidth*An()),Xt.setMode(se.LINES)):Xt.setMode(se.TRIANGLES);else if(me.isLine){let St=Ae.linewidth;St===void 0&&(St=1),Ve.setLineWidth(St*An()),me.isLineSegments?Xt.setMode(se.LINES):me.isLineLoop?Xt.setMode(se.LINE_LOOP):Xt.setMode(se.LINE_STRIP)}else me.isPoints?Xt.setMode(se.POINTS):me.isSprite&&Xt.setMode(se.TRIANGLES);if(me.isBatchedMesh)if(me._multiDrawInstances!==null)x_("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Xt.renderMultiDrawInstances(me._multiDrawStarts,me._multiDrawCounts,me._multiDrawCount,me._multiDrawInstances);else if(ke.get("WEBGL_multi_draw"))Xt.renderMultiDraw(me._multiDrawStarts,me._multiDrawCounts,me._multiDrawCount);else{const St=me._multiDrawStarts,jn=me._multiDrawCounts,vn=me._multiDrawCount,rn=gt?te.get(gt).bytesPerElement:1,Xs=je.get(Ae).currentProgram.getUniforms();for(let ui=0;ui<vn;ui++)Xs.setValue(se,"_gl_DrawID",ui),Xt.render(St[ui]/rn,jn[ui])}else if(me.isInstancedMesh)Xt.renderInstances(cn,Qn,me.count);else if(Ee.isInstancedBufferGeometry){const St=Ee._maxInstanceCount!==void 0?Ee._maxInstanceCount:1/0,jn=Math.min(Ee.instanceCount,St);Xt.renderInstances(cn,Qn,jn)}else Xt.render(cn,Qn)};function Rn(Q,fe,Ee){Q.transparent===!0&&Q.side===rc&&Q.forceSinglePass===!1?(Q.side=oa,Q.needsUpdate=!0,$i(Q,fe,Ee),Q.side=_u,Q.needsUpdate=!0,$i(Q,fe,Ee),Q.side=rc):$i(Q,fe,Ee)}this.compile=function(Q,fe,Ee=null){Ee===null&&(Ee=Q),b=It.get(Ee),b.init(fe),V.push(b),Ee.traverseVisible(function(me){me.isLight&&me.layers.test(fe.layers)&&(b.pushLight(me),me.castShadow&&b.pushShadow(me))}),Q!==Ee&&Q.traverseVisible(function(me){me.isLight&&me.layers.test(fe.layers)&&(b.pushLight(me),me.castShadow&&b.pushShadow(me))}),b.setupLights();const Ae=new Set;return Q.traverse(function(me){if(!(me.isMesh||me.isPoints||me.isLine||me.isSprite))return;const We=me.material;if(We)if(Array.isArray(We))for(let ht=0;ht<We.length;ht++){const xt=We[ht];Rn(xt,Ee,me),Ae.add(xt)}else Rn(We,Ee,me),Ae.add(We)}),b=V.pop(),Ae},this.compileAsync=function(Q,fe,Ee=null){const Ae=this.compile(Q,fe,Ee);return new Promise(me=>{function We(){if(Ae.forEach(function(ht){je.get(ht).currentProgram.isReady()&&Ae.delete(ht)}),Ae.size===0){me(Q);return}setTimeout(We,10)}ke.get("KHR_parallel_shader_compile")!==null?We():setTimeout(We,10)})};let sn=null;function as(Q){sn&&sn(Q)}function js(){qs.stop()}function Ia(){qs.start()}const qs=new rL;qs.setAnimationLoop(as),typeof self<"u"&&qs.setContext(self),this.setAnimationLoop=function(Q){sn=Q,tt.setAnimationLoop(Q),Q===null?qs.stop():qs.start()},tt.addEventListener("sessionstart",js),tt.addEventListener("sessionend",Ia),this.render=function(Q,fe){if(fe!==void 0&&fe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(j===!0)return;if(Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),fe.parent===null&&fe.matrixWorldAutoUpdate===!0&&fe.updateMatrixWorld(),tt.enabled===!0&&tt.isPresenting===!0&&(tt.cameraAutoUpdate===!0&&tt.updateCamera(fe),fe=tt.getCamera()),Q.isScene===!0&&Q.onBeforeRender(z,Q,fe,L),b=It.get(Q,V.length),b.init(fe),V.push(b),Le.multiplyMatrices(fe.projectionMatrix,fe.matrixWorldInverse),Re.setFromProjectionMatrix(Le,Qa,fe.reversedDepth),Te=this.localClippingEnabled,nt=lt.init(this.clippingPlanes,Te),w=Pe.get(Q,D.length),w.init(),D.push(w),tt.enabled===!0&&tt.isPresenting===!0){const We=z.xr.getDepthSensingMesh();We!==null&&Da(We,fe,-1/0,z.sortObjects)}Da(Q,fe,0,z.sortObjects),w.finish(),z.sortObjects===!0&&w.sort(pe,re),Zt=tt.enabled===!1||tt.isPresenting===!1||tt.hasDepthSensing()===!1,Zt&&wt.addToRenderList(w,Q),this.info.render.frame++,nt===!0&&lt.beginShadows();const Ee=b.state.shadowsArray;Mt.render(Ee,Q,fe),nt===!0&&lt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ae=w.opaque,me=w.transmissive;if(b.setupLights(),fe.isArrayCamera){const We=fe.cameras;if(me.length>0)for(let ht=0,xt=We.length;ht<xt;ht++){const gt=We[ht];Pr(Ae,me,Q,gt)}Zt&&wt.render(Q);for(let ht=0,xt=We.length;ht<xt;ht++){const gt=We[ht];Ss(w,Q,gt,gt.viewport)}}else me.length>0&&Pr(Ae,me,Q,fe),Zt&&wt.render(Q),Ss(w,Q,fe);L!==null&&P===0&&(Qe.updateMultisampleRenderTarget(L),Qe.updateRenderTargetMipmap(L)),Q.isScene===!0&&Q.onAfterRender(z,Q,fe),dt.resetDefaultState(),I=-1,O=null,V.pop(),V.length>0?(b=V[V.length-1],nt===!0&&lt.setGlobalState(z.clippingPlanes,b.state.camera)):b=null,D.pop(),D.length>0?w=D[D.length-1]:w=null};function Da(Q,fe,Ee,Ae){if(Q.visible===!1)return;if(Q.layers.test(fe.layers)){if(Q.isGroup)Ee=Q.renderOrder;else if(Q.isLOD)Q.autoUpdate===!0&&Q.update(fe);else if(Q.isLight)b.pushLight(Q),Q.castShadow&&b.pushShadow(Q);else if(Q.isSprite){if(!Q.frustumCulled||Re.intersectsSprite(Q)){Ae&&pt.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(Le);const ht=Se.update(Q),xt=Q.material;xt.visible&&w.push(Q,ht,xt,Ee,pt.z,null)}}else if((Q.isMesh||Q.isLine||Q.isPoints)&&(!Q.frustumCulled||Re.intersectsObject(Q))){const ht=Se.update(Q),xt=Q.material;if(Ae&&(Q.boundingSphere!==void 0?(Q.boundingSphere===null&&Q.computeBoundingSphere(),pt.copy(Q.boundingSphere.center)):(ht.boundingSphere===null&&ht.computeBoundingSphere(),pt.copy(ht.boundingSphere.center)),pt.applyMatrix4(Q.matrixWorld).applyMatrix4(Le)),Array.isArray(xt)){const gt=ht.groups;for(let Nt=0,Ft=gt.length;Nt<Ft;Nt++){const Ut=gt[Nt],cn=xt[Ut.materialIndex];cn&&cn.visible&&w.push(Q,ht,cn,Ee,pt.z,Ut)}}else xt.visible&&w.push(Q,ht,xt,Ee,pt.z,null)}}const We=Q.children;for(let ht=0,xt=We.length;ht<xt;ht++)Da(We[ht],fe,Ee,Ae)}function Ss(Q,fe,Ee,Ae){const me=Q.opaque,We=Q.transmissive,ht=Q.transparent;b.setupLightsView(Ee),nt===!0&&lt.setGlobalState(z.clippingPlanes,Ee),Ae&&Ve.viewport(F.copy(Ae)),me.length>0&&Ds(me,fe,Ee),We.length>0&&Ds(We,fe,Ee),ht.length>0&&Ds(ht,fe,Ee),Ve.buffers.depth.setTest(!0),Ve.buffers.depth.setMask(!0),Ve.buffers.color.setMask(!0),Ve.setPolygonOffset(!1)}function Pr(Q,fe,Ee,Ae){if((Ee.isScene===!0?Ee.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[Ae.id]===void 0&&(b.state.transmissionRenderTarget[Ae.id]=new _c(1,1,{generateMipmaps:!0,type:ke.has("EXT_color_buffer_half_float")||ke.has("EXT_color_buffer_float")?Jm:Io,minFilter:ac,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Gn.workingColorSpace}));const We=b.state.transmissionRenderTarget[Ae.id],ht=Ae.viewport||F;We.setSize(ht.z*z.transmissionResolutionScale,ht.w*z.transmissionResolutionScale);const xt=z.getRenderTarget(),gt=z.getActiveCubeFace(),Nt=z.getActiveMipmapLevel();z.setRenderTarget(We),z.getClearColor(de),ge=z.getClearAlpha(),ge<1&&z.setClearColor(16777215,.5),z.clear(),Zt&&wt.render(Ee);const Ft=z.toneMapping;z.toneMapping=pc;const Ut=Ae.viewport;if(Ae.viewport!==void 0&&(Ae.viewport=void 0),b.setupLightsView(Ae),nt===!0&&lt.setGlobalState(z.clippingPlanes,Ae),Ds(Q,Ee,Ae),Qe.updateMultisampleRenderTarget(We),Qe.updateRenderTargetMipmap(We),ke.has("WEBGL_multisampled_render_to_texture")===!1){let cn=!1;for(let Nn=0,Qn=fe.length;Nn<Qn;Nn++){const gn=fe[Nn],Xt=gn.object,St=gn.geometry,jn=gn.material,vn=gn.group;if(jn.side===rc&&Xt.layers.test(Ae.layers)){const rn=jn.side;jn.side=oa,jn.needsUpdate=!0,Ci(Xt,Ee,Ae,St,jn,vn),jn.side=rn,jn.needsUpdate=!0,cn=!0}}cn===!0&&(Qe.updateMultisampleRenderTarget(We),Qe.updateRenderTargetMipmap(We))}z.setRenderTarget(xt,gt,Nt),z.setClearColor(de,ge),Ut!==void 0&&(Ae.viewport=Ut),z.toneMapping=Ft}function Ds(Q,fe,Ee){const Ae=fe.isScene===!0?fe.overrideMaterial:null;for(let me=0,We=Q.length;me<We;me++){const ht=Q[me],xt=ht.object,gt=ht.geometry,Nt=ht.group;let Ft=ht.material;Ft.allowOverride===!0&&Ae!==null&&(Ft=Ae),xt.layers.test(Ee.layers)&&Ci(xt,fe,Ee,gt,Ft,Nt)}}function Ci(Q,fe,Ee,Ae,me,We){Q.onBeforeRender(z,fe,Ee,Ae,me,We),Q.modelViewMatrix.multiplyMatrices(Ee.matrixWorldInverse,Q.matrixWorld),Q.normalMatrix.getNormalMatrix(Q.modelViewMatrix),me.onBeforeRender(z,fe,Ee,Ae,Q,We),me.transparent===!0&&me.side===rc&&me.forceSinglePass===!1?(me.side=oa,me.needsUpdate=!0,z.renderBufferDirect(Ee,fe,Ae,me,Q,We),me.side=_u,me.needsUpdate=!0,z.renderBufferDirect(Ee,fe,Ae,me,Q,We),me.side=rc):z.renderBufferDirect(Ee,fe,Ae,me,Q,We),Q.onAfterRender(z,fe,Ee,Ae,me,We)}function $i(Q,fe,Ee){fe.isScene!==!0&&(fe=bt);const Ae=je.get(Q),me=b.state.lights,We=b.state.shadowsArray,ht=me.state.version,xt=Oe.getParameters(Q,me.state,We,fe,Ee),gt=Oe.getProgramCacheKey(xt);let Nt=Ae.programs;Ae.environment=Q.isMeshStandardMaterial?fe.environment:null,Ae.fog=fe.fog,Ae.envMap=(Q.isMeshStandardMaterial?Wt:Vt).get(Q.envMap||Ae.environment),Ae.envMapRotation=Ae.environment!==null&&Q.envMap===null?fe.environmentRotation:Q.envMapRotation,Nt===void 0&&(Q.addEventListener("dispose",Fe),Nt=new Map,Ae.programs=Nt);let Ft=Nt.get(gt);if(Ft!==void 0){if(Ae.currentProgram===Ft&&Ae.lightsStateVersion===ht)return xi(Q,xt),Ft}else xt.uniforms=Oe.getUniforms(Q),Q.onBeforeCompile(xt,z),Ft=Oe.acquireProgram(xt,gt),Nt.set(gt,Ft),Ae.uniforms=xt.uniforms;const Ut=Ae.uniforms;return(!Q.isShaderMaterial&&!Q.isRawShaderMaterial||Q.clipping===!0)&&(Ut.clippingPlanes=lt.uniform),xi(Q,xt),Ae.needsLights=Tu(Q),Ae.lightsStateVersion=ht,Ae.needsLights&&(Ut.ambientLightColor.value=me.state.ambient,Ut.lightProbe.value=me.state.probe,Ut.directionalLights.value=me.state.directional,Ut.directionalLightShadows.value=me.state.directionalShadow,Ut.spotLights.value=me.state.spot,Ut.spotLightShadows.value=me.state.spotShadow,Ut.rectAreaLights.value=me.state.rectArea,Ut.ltc_1.value=me.state.rectAreaLTC1,Ut.ltc_2.value=me.state.rectAreaLTC2,Ut.pointLights.value=me.state.point,Ut.pointLightShadows.value=me.state.pointShadow,Ut.hemisphereLights.value=me.state.hemi,Ut.directionalShadowMap.value=me.state.directionalShadowMap,Ut.directionalShadowMatrix.value=me.state.directionalShadowMatrix,Ut.spotShadowMap.value=me.state.spotShadowMap,Ut.spotLightMatrix.value=me.state.spotLightMatrix,Ut.spotLightMap.value=me.state.spotLightMap,Ut.pointShadowMap.value=me.state.pointShadowMap,Ut.pointShadowMatrix.value=me.state.pointShadowMatrix),Ae.currentProgram=Ft,Ae.uniformsList=null,Ft}function ln(Q){if(Q.uniformsList===null){const fe=Q.currentProgram.getUniforms();Q.uniformsList=bS.seqWithValue(fe.seq,Q.uniforms)}return Q.uniformsList}function xi(Q,fe){const Ee=je.get(Q);Ee.outputColorSpace=fe.outputColorSpace,Ee.batching=fe.batching,Ee.batchingColor=fe.batchingColor,Ee.instancing=fe.instancing,Ee.instancingColor=fe.instancingColor,Ee.instancingMorph=fe.instancingMorph,Ee.skinning=fe.skinning,Ee.morphTargets=fe.morphTargets,Ee.morphNormals=fe.morphNormals,Ee.morphColors=fe.morphColors,Ee.morphTargetsCount=fe.morphTargetsCount,Ee.numClippingPlanes=fe.numClippingPlanes,Ee.numIntersection=fe.numClipIntersection,Ee.vertexAlphas=fe.vertexAlphas,Ee.vertexTangents=fe.vertexTangents,Ee.toneMapping=fe.toneMapping}function lr(Q,fe,Ee,Ae,me){fe.isScene!==!0&&(fe=bt),Qe.resetTextureUnits();const We=fe.fog,ht=Ae.isMeshStandardMaterial?fe.environment:null,xt=L===null?z.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:qh,gt=(Ae.isMeshStandardMaterial?Wt:Vt).get(Ae.envMap||ht),Nt=Ae.vertexColors===!0&&!!Ee.attributes.color&&Ee.attributes.color.itemSize===4,Ft=!!Ee.attributes.tangent&&(!!Ae.normalMap||Ae.anisotropy>0),Ut=!!Ee.morphAttributes.position,cn=!!Ee.morphAttributes.normal,Nn=!!Ee.morphAttributes.color;let Qn=pc;Ae.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(Qn=z.toneMapping);const gn=Ee.morphAttributes.position||Ee.morphAttributes.normal||Ee.morphAttributes.color,Xt=gn!==void 0?gn.length:0,St=je.get(Ae),jn=b.state.lights;if(nt===!0&&(Te===!0||Q!==O)){const Ii=Q===O&&Ae.id===I;lt.setState(Ae,Q,Ii)}let vn=!1;Ae.version===St.__version?(St.needsLights&&St.lightsStateVersion!==jn.state.version||St.outputColorSpace!==xt||me.isBatchedMesh&&St.batching===!1||!me.isBatchedMesh&&St.batching===!0||me.isBatchedMesh&&St.batchingColor===!0&&me.colorTexture===null||me.isBatchedMesh&&St.batchingColor===!1&&me.colorTexture!==null||me.isInstancedMesh&&St.instancing===!1||!me.isInstancedMesh&&St.instancing===!0||me.isSkinnedMesh&&St.skinning===!1||!me.isSkinnedMesh&&St.skinning===!0||me.isInstancedMesh&&St.instancingColor===!0&&me.instanceColor===null||me.isInstancedMesh&&St.instancingColor===!1&&me.instanceColor!==null||me.isInstancedMesh&&St.instancingMorph===!0&&me.morphTexture===null||me.isInstancedMesh&&St.instancingMorph===!1&&me.morphTexture!==null||St.envMap!==gt||Ae.fog===!0&&St.fog!==We||St.numClippingPlanes!==void 0&&(St.numClippingPlanes!==lt.numPlanes||St.numIntersection!==lt.numIntersection)||St.vertexAlphas!==Nt||St.vertexTangents!==Ft||St.morphTargets!==Ut||St.morphNormals!==cn||St.morphColors!==Nn||St.toneMapping!==Qn||St.morphTargetsCount!==Xt)&&(vn=!0):(vn=!0,St.__version=Ae.version);let rn=St.currentProgram;vn===!0&&(rn=$i(Ae,fe,me));let Xs=!1,ui=!1,ur=!1;const Sn=rn.getUniforms(),Wi=St.uniforms;if(Ve.useProgram(rn.program)&&(Xs=!0,ui=!0,ur=!0),Ae.id!==I&&(I=Ae.id,ui=!0),Xs||O!==Q){Ve.buffers.depth.getReversed()&&Q.reversedDepth!==!0&&(Q._reversedDepth=!0,Q.updateProjectionMatrix()),Sn.setValue(se,"projectionMatrix",Q.projectionMatrix),Sn.setValue(se,"viewMatrix",Q.matrixWorldInverse);const Ti=Sn.map.cameraPosition;Ti!==void 0&&Ti.setValue(se,at.setFromMatrixPosition(Q.matrixWorld)),Be.logarithmicDepthBuffer&&Sn.setValue(se,"logDepthBufFC",2/(Math.log(Q.far+1)/Math.LN2)),(Ae.isMeshPhongMaterial||Ae.isMeshToonMaterial||Ae.isMeshLambertMaterial||Ae.isMeshBasicMaterial||Ae.isMeshStandardMaterial||Ae.isShaderMaterial)&&Sn.setValue(se,"isOrthographic",Q.isOrthographicCamera===!0),O!==Q&&(O=Q,ui=!0,ur=!0)}if(me.isSkinnedMesh){Sn.setOptional(se,me,"bindMatrix"),Sn.setOptional(se,me,"bindMatrixInverse");const Ii=me.skeleton;Ii&&(Ii.boneTexture===null&&Ii.computeBoneTexture(),Sn.setValue(se,"boneTexture",Ii.boneTexture,Qe))}me.isBatchedMesh&&(Sn.setOptional(se,me,"batchingTexture"),Sn.setValue(se,"batchingTexture",me._matricesTexture,Qe),Sn.setOptional(se,me,"batchingIdTexture"),Sn.setValue(se,"batchingIdTexture",me._indirectTexture,Qe),Sn.setOptional(se,me,"batchingColorTexture"),me._colorsTexture!==null&&Sn.setValue(se,"batchingColorTexture",me._colorsTexture,Qe));const os=Ee.morphAttributes;if((os.position!==void 0||os.normal!==void 0||os.color!==void 0)&&Ke.update(me,Ee,rn),(ui||St.receiveShadow!==me.receiveShadow)&&(St.receiveShadow=me.receiveShadow,Sn.setValue(se,"receiveShadow",me.receiveShadow)),Ae.isMeshGouraudMaterial&&Ae.envMap!==null&&(Wi.envMap.value=gt,Wi.flipEnvMap.value=gt.isCubeTexture&&gt.isRenderTargetTexture===!1?-1:1),Ae.isMeshStandardMaterial&&Ae.envMap===null&&fe.environment!==null&&(Wi.envMapIntensity.value=fe.environmentIntensity),ui&&(Sn.setValue(se,"toneMappingExposure",z.toneMappingExposure),St.needsLights&&No(Wi,ur),We&&Ae.fog===!0&&Ze.refreshFogUniforms(Wi,We),Ze.refreshMaterialUniforms(Wi,Ae,ne,ee,b.state.transmissionRenderTarget[Q.id]),bS.upload(se,ln(St),Wi,Qe)),Ae.isShaderMaterial&&Ae.uniformsNeedUpdate===!0&&(bS.upload(se,ln(St),Wi,Qe),Ae.uniformsNeedUpdate=!1),Ae.isSpriteMaterial&&Sn.setValue(se,"center",me.center),Sn.setValue(se,"modelViewMatrix",me.modelViewMatrix),Sn.setValue(se,"normalMatrix",me.normalMatrix),Sn.setValue(se,"modelMatrix",me.matrixWorld),Ae.isShaderMaterial||Ae.isRawShaderMaterial){const Ii=Ae.uniformsGroups;for(let Ti=0,Oo=Ii.length;Ti<Oo;Ti++){const Vi=Ii[Ti];Gt.update(Vi,rn),Gt.bind(Vi,rn)}}return rn}function No(Q,fe){Q.ambientLightColor.needsUpdate=fe,Q.lightProbe.needsUpdate=fe,Q.directionalLights.needsUpdate=fe,Q.directionalLightShadows.needsUpdate=fe,Q.pointLights.needsUpdate=fe,Q.pointLightShadows.needsUpdate=fe,Q.spotLights.needsUpdate=fe,Q.spotLightShadows.needsUpdate=fe,Q.rectAreaLights.needsUpdate=fe,Q.hemisphereLights.needsUpdate=fe}function Tu(Q){return Q.isMeshLambertMaterial||Q.isMeshToonMaterial||Q.isMeshPhongMaterial||Q.isMeshStandardMaterial||Q.isShadowMaterial||Q.isShaderMaterial&&Q.lights===!0}this.getActiveCubeFace=function(){return G},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(Q,fe,Ee){const Ae=je.get(Q);Ae.__autoAllocateDepthBuffer=Q.resolveDepthBuffer===!1,Ae.__autoAllocateDepthBuffer===!1&&(Ae.__useRenderToTexture=!1),je.get(Q.texture).__webglTexture=fe,je.get(Q.depthTexture).__webglTexture=Ae.__autoAllocateDepthBuffer?void 0:Ee,Ae.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Q,fe){const Ee=je.get(Q);Ee.__webglFramebuffer=fe,Ee.__useDefaultFramebuffer=fe===void 0};const bu=se.createFramebuffer();this.setRenderTarget=function(Q,fe=0,Ee=0){L=Q,G=fe,P=Ee;let Ae=!0,me=null,We=!1,ht=!1;if(Q){const gt=je.get(Q);if(gt.__useDefaultFramebuffer!==void 0)Ve.bindFramebuffer(se.FRAMEBUFFER,null),Ae=!1;else if(gt.__webglFramebuffer===void 0)Qe.setupRenderTarget(Q);else if(gt.__hasExternalTextures)Qe.rebindTextures(Q,je.get(Q.texture).__webglTexture,je.get(Q.depthTexture).__webglTexture);else if(Q.depthBuffer){const Ut=Q.depthTexture;if(gt.__boundDepthTexture!==Ut){if(Ut!==null&&je.has(Ut)&&(Q.width!==Ut.image.width||Q.height!==Ut.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Qe.setupDepthRenderbuffer(Q)}}const Nt=Q.texture;(Nt.isData3DTexture||Nt.isDataArrayTexture||Nt.isCompressedArrayTexture)&&(ht=!0);const Ft=je.get(Q).__webglFramebuffer;Q.isWebGLCubeRenderTarget?(Array.isArray(Ft[fe])?me=Ft[fe][Ee]:me=Ft[fe],We=!0):Q.samples>0&&Qe.useMultisampledRTT(Q)===!1?me=je.get(Q).__webglMultisampledFramebuffer:Array.isArray(Ft)?me=Ft[Ee]:me=Ft,F.copy(Q.viewport),Y.copy(Q.scissor),q=Q.scissorTest}else F.copy(J).multiplyScalar(ne).floor(),Y.copy(le).multiplyScalar(ne).floor(),q=De;if(Ee!==0&&(me=bu),Ve.bindFramebuffer(se.FRAMEBUFFER,me)&&Ae&&Ve.drawBuffers(Q,me),Ve.viewport(F),Ve.scissor(Y),Ve.setScissorTest(q),We){const gt=je.get(Q.texture);se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_CUBE_MAP_POSITIVE_X+fe,gt.__webglTexture,Ee)}else if(ht){const gt=fe;for(let Nt=0;Nt<Q.textures.length;Nt++){const Ft=je.get(Q.textures[Nt]);se.framebufferTextureLayer(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0+Nt,Ft.__webglTexture,Ee,gt)}}else if(Q!==null&&Ee!==0){const gt=je.get(Q.texture);se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,gt.__webglTexture,Ee)}I=-1},this.readRenderTargetPixels=function(Q,fe,Ee,Ae,me,We,ht,xt=0){if(!(Q&&Q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let gt=je.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&ht!==void 0&&(gt=gt[ht]),gt){Ve.bindFramebuffer(se.FRAMEBUFFER,gt);try{const Nt=Q.textures[xt],Ft=Nt.format,Ut=Nt.type;if(!Be.textureFormatReadable(Ft)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Be.textureTypeReadable(Ut)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}fe>=0&&fe<=Q.width-Ae&&Ee>=0&&Ee<=Q.height-me&&(Q.textures.length>1&&se.readBuffer(se.COLOR_ATTACHMENT0+xt),se.readPixels(fe,Ee,Ae,me,mt.convert(Ft),mt.convert(Ut),We))}finally{const Nt=L!==null?je.get(L).__webglFramebuffer:null;Ve.bindFramebuffer(se.FRAMEBUFFER,Nt)}}},this.readRenderTargetPixelsAsync=async function(Q,fe,Ee,Ae,me,We,ht,xt=0){if(!(Q&&Q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let gt=je.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&ht!==void 0&&(gt=gt[ht]),gt)if(fe>=0&&fe<=Q.width-Ae&&Ee>=0&&Ee<=Q.height-me){Ve.bindFramebuffer(se.FRAMEBUFFER,gt);const Nt=Q.textures[xt],Ft=Nt.format,Ut=Nt.type;if(!Be.textureFormatReadable(Ft))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Be.textureTypeReadable(Ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const cn=se.createBuffer();se.bindBuffer(se.PIXEL_PACK_BUFFER,cn),se.bufferData(se.PIXEL_PACK_BUFFER,We.byteLength,se.STREAM_READ),Q.textures.length>1&&se.readBuffer(se.COLOR_ATTACHMENT0+xt),se.readPixels(fe,Ee,Ae,me,mt.convert(Ft),mt.convert(Ut),0);const Nn=L!==null?je.get(L).__webglFramebuffer:null;Ve.bindFramebuffer(se.FRAMEBUFFER,Nn);const Qn=se.fenceSync(se.SYNC_GPU_COMMANDS_COMPLETE,0);return se.flush(),await YG(se,Qn,4),se.bindBuffer(se.PIXEL_PACK_BUFFER,cn),se.getBufferSubData(se.PIXEL_PACK_BUFFER,0,We),se.deleteBuffer(cn),se.deleteSync(Qn),We}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Q,fe=null,Ee=0){const Ae=Math.pow(2,-Ee),me=Math.floor(Q.image.width*Ae),We=Math.floor(Q.image.height*Ae),ht=fe!==null?fe.x:0,xt=fe!==null?fe.y:0;Qe.setTexture2D(Q,0),se.copyTexSubImage2D(se.TEXTURE_2D,Ee,0,0,ht,xt,me,We),Ve.unbindTexture()};const xl=se.createFramebuffer(),cr=se.createFramebuffer();this.copyTextureToTexture=function(Q,fe,Ee=null,Ae=null,me=0,We=null){We===null&&(me!==0?(x_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),We=me,me=0):We=0);let ht,xt,gt,Nt,Ft,Ut,cn,Nn,Qn;const gn=Q.isCompressedTexture?Q.mipmaps[We]:Q.image;if(Ee!==null)ht=Ee.max.x-Ee.min.x,xt=Ee.max.y-Ee.min.y,gt=Ee.isBox3?Ee.max.z-Ee.min.z:1,Nt=Ee.min.x,Ft=Ee.min.y,Ut=Ee.isBox3?Ee.min.z:0;else{const os=Math.pow(2,-me);ht=Math.floor(gn.width*os),xt=Math.floor(gn.height*os),Q.isDataArrayTexture?gt=gn.depth:Q.isData3DTexture?gt=Math.floor(gn.depth*os):gt=1,Nt=0,Ft=0,Ut=0}Ae!==null?(cn=Ae.x,Nn=Ae.y,Qn=Ae.z):(cn=0,Nn=0,Qn=0);const Xt=mt.convert(fe.format),St=mt.convert(fe.type);let jn;fe.isData3DTexture?(Qe.setTexture3D(fe,0),jn=se.TEXTURE_3D):fe.isDataArrayTexture||fe.isCompressedArrayTexture?(Qe.setTexture2DArray(fe,0),jn=se.TEXTURE_2D_ARRAY):(Qe.setTexture2D(fe,0),jn=se.TEXTURE_2D),se.pixelStorei(se.UNPACK_FLIP_Y_WEBGL,fe.flipY),se.pixelStorei(se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),se.pixelStorei(se.UNPACK_ALIGNMENT,fe.unpackAlignment);const vn=se.getParameter(se.UNPACK_ROW_LENGTH),rn=se.getParameter(se.UNPACK_IMAGE_HEIGHT),Xs=se.getParameter(se.UNPACK_SKIP_PIXELS),ui=se.getParameter(se.UNPACK_SKIP_ROWS),ur=se.getParameter(se.UNPACK_SKIP_IMAGES);se.pixelStorei(se.UNPACK_ROW_LENGTH,gn.width),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,gn.height),se.pixelStorei(se.UNPACK_SKIP_PIXELS,Nt),se.pixelStorei(se.UNPACK_SKIP_ROWS,Ft),se.pixelStorei(se.UNPACK_SKIP_IMAGES,Ut);const Sn=Q.isDataArrayTexture||Q.isData3DTexture,Wi=fe.isDataArrayTexture||fe.isData3DTexture;if(Q.isDepthTexture){const os=je.get(Q),Ii=je.get(fe),Ti=je.get(os.__renderTarget),Oo=je.get(Ii.__renderTarget);Ve.bindFramebuffer(se.READ_FRAMEBUFFER,Ti.__webglFramebuffer),Ve.bindFramebuffer(se.DRAW_FRAMEBUFFER,Oo.__webglFramebuffer);for(let Vi=0;Vi<gt;Vi++)Sn&&(se.framebufferTextureLayer(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,je.get(Q).__webglTexture,me,Ut+Vi),se.framebufferTextureLayer(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,je.get(fe).__webglTexture,We,Qn+Vi)),se.blitFramebuffer(Nt,Ft,ht,xt,cn,Nn,ht,xt,se.DEPTH_BUFFER_BIT,se.NEAREST);Ve.bindFramebuffer(se.READ_FRAMEBUFFER,null),Ve.bindFramebuffer(se.DRAW_FRAMEBUFFER,null)}else if(me!==0||Q.isRenderTargetTexture||je.has(Q)){const os=je.get(Q),Ii=je.get(fe);Ve.bindFramebuffer(se.READ_FRAMEBUFFER,xl),Ve.bindFramebuffer(se.DRAW_FRAMEBUFFER,cr);for(let Ti=0;Ti<gt;Ti++)Sn?se.framebufferTextureLayer(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,os.__webglTexture,me,Ut+Ti):se.framebufferTexture2D(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,os.__webglTexture,me),Wi?se.framebufferTextureLayer(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,Ii.__webglTexture,We,Qn+Ti):se.framebufferTexture2D(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,Ii.__webglTexture,We),me!==0?se.blitFramebuffer(Nt,Ft,ht,xt,cn,Nn,ht,xt,se.COLOR_BUFFER_BIT,se.NEAREST):Wi?se.copyTexSubImage3D(jn,We,cn,Nn,Qn+Ti,Nt,Ft,ht,xt):se.copyTexSubImage2D(jn,We,cn,Nn,Nt,Ft,ht,xt);Ve.bindFramebuffer(se.READ_FRAMEBUFFER,null),Ve.bindFramebuffer(se.DRAW_FRAMEBUFFER,null)}else Wi?Q.isDataTexture||Q.isData3DTexture?se.texSubImage3D(jn,We,cn,Nn,Qn,ht,xt,gt,Xt,St,gn.data):fe.isCompressedArrayTexture?se.compressedTexSubImage3D(jn,We,cn,Nn,Qn,ht,xt,gt,Xt,gn.data):se.texSubImage3D(jn,We,cn,Nn,Qn,ht,xt,gt,Xt,St,gn):Q.isDataTexture?se.texSubImage2D(se.TEXTURE_2D,We,cn,Nn,ht,xt,Xt,St,gn.data):Q.isCompressedTexture?se.compressedTexSubImage2D(se.TEXTURE_2D,We,cn,Nn,gn.width,gn.height,Xt,gn.data):se.texSubImage2D(se.TEXTURE_2D,We,cn,Nn,ht,xt,Xt,St,gn);se.pixelStorei(se.UNPACK_ROW_LENGTH,vn),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,rn),se.pixelStorei(se.UNPACK_SKIP_PIXELS,Xs),se.pixelStorei(se.UNPACK_SKIP_ROWS,ui),se.pixelStorei(se.UNPACK_SKIP_IMAGES,ur),We===0&&fe.generateMipmaps&&se.generateMipmap(jn),Ve.unbindTexture()},this.initRenderTarget=function(Q){je.get(Q).__webglFramebuffer===void 0&&Qe.setupRenderTarget(Q)},this.initTexture=function(Q){Q.isCubeTexture?Qe.setTextureCube(Q,0):Q.isData3DTexture?Qe.setTexture3D(Q,0):Q.isDataArrayTexture||Q.isCompressedArrayTexture?Qe.setTexture2DArray(Q,0):Qe.setTexture2D(Q,0),Ve.unbindTexture()},this.resetState=function(){G=0,P=0,L=null,Ve.reset(),dt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Qa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Gn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Gn._getUnpackColorSpace()}}const hK=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:u1,AddEquation:Rh,AddOperation:OO,AdditiveAnimationBlendMode:v1,AdditiveBlending:LA,AgXToneMapping:zO,AlphaFormat:g1,AlwaysCompare:$O,AlwaysDepth:ZS,AlwaysStencilFunc:BA,AmbientLight:WU,AnimationAction:nL,AnimationClip:R_,AnimationLoader:E7,AnimationMixer:Q7,AnimationObjectGroup:Y7,AnimationUtils:y7,ArcCurve:_U,ArrayCamera:$U,ArrowHelper:xj,AttachedBindMode:zA,Audio:eL,AudioAnalyser:z7,AudioContext:q1,AudioListener:L7,AudioLoader:N7,AxesHelper:Tj,BackSide:oa,BasicDepthPacking:jO,BasicShadowMap:dO,BatchedMesh:dU,Bone:w1,BooleanKeyframeTrack:Ld,Box2:aj,Box3:Or,Box3Helper:Sj,BoxGeometry:Ud,BoxHelper:vj,BufferAttribute:mi,BufferGeometry:_n,BufferGeometryLoader:JU,ByteType:f1,Cache:oc,Camera:Tx,CameraHelper:_j,CanvasTexture:F9,CapsuleGeometry:Ix,CatmullRomCurve3:vU,CineonToneMapping:PO,CircleGeometry:Dx,ClampToEdgeWrapping:Ro,Clock:X1,Color:At,ColorKeyframeTrack:k1,ColorManagement:Gn,CompressedArrayTexture:z9,CompressedCubeTexture:B9,CompressedTexture:Cx,CompressedTextureLoader:x7,ConeGeometry:W_,ConstantAlphaFactor:IO,ConstantColorFactor:RO,Controls:Aj,CubeCamera:aU,CubeReflectionMapping:vu,CubeRefractionMapping:jh,CubeTexture:q_,CubeTextureLoader:T7,CubeUVReflectionMapping:Zm,CubicBezierCurve:N1,CubicBezierCurve3:SU,CubicInterpolant:BU,CullFaceBack:UA,CullFaceFront:fO,CullFaceFrontBack:W8,CullFaceNone:hO,Curve:El,CurvePath:xU,CustomBlending:pO,CustomToneMapping:VO,CylinderGeometry:X_,Cylindrical:rj,Data3DTexture:xx,DataArrayTexture:Ex,DataTexture:mc,DataTextureLoader:b7,DataUtils:c9,DecrementStencilOp:oG,DecrementWrapStencilOp:cG,DefaultLoadingManager:kU,DepthFormat:Im,DepthStencilFormat:Dm,DepthTexture:C1,DetachedBindMode:FO,DirectionalLight:XU,DirectionalLightHelper:yj,DiscreteInterpolant:FU,DodecahedronGeometry:Nx,DoubleSide:rc,DstAlphaFactor:TO,DstColorFactor:AO,DynamicCopyUsage:bG,DynamicDrawUsage:_G,DynamicReadUsage:EG,EdgesGeometry:yU,EllipseCurve:Ox,EqualCompare:KO,EqualDepth:$S,EqualStencilFunc:dG,EquirectangularReflectionMapping:d_,EquirectangularRefractionMapping:p_,Euler:$a,EventDispatcher:Sc,ExternalTexture:I1,ExtrudeGeometry:Ux,FileLoader:Eu,Float16BufferAttribute:g9,Float32BufferAttribute:Ot,FloatType:wa,Fog:Ax,FogExp2:bx,FramebufferTexture:V9,FrontSide:_u,Frustum:eg,FrustumArray:Rx,GLBufferAttribute:tj,GLSL1:MG,GLSL3:FA,GreaterCompare:QO,GreaterDepth:tE,GreaterEqualCompare:JO,GreaterEqualDepth:eE,GreaterEqualStencilFunc:yG,GreaterStencilFunc:mG,GridHelper:mj,Group:fm,HalfFloatType:Jm,HemisphereLight:GU,HemisphereLightHelper:pj,IcosahedronGeometry:Lx,ImageBitmapLoader:D7,ImageLoader:C_,ImageUtils:nU,IncrementStencilOp:aG,IncrementWrapStencilOp:lG,InstancedBufferAttribute:Pm,InstancedBufferGeometry:ZU,InstancedInterleavedBuffer:ej,InstancedMesh:fU,Int16BufferAttribute:p9,Int32BufferAttribute:m9,Int8BufferAttribute:h9,IntType:px,InterleavedBuffer:Mx,InterleavedBufferAttribute:Ed,Interpolant:Q_,InterpolateDiscrete:y_,InterpolateLinear:DE,InterpolateSmooth:xS,InterpolationSamplingMode:CG,InterpolationSamplingType:RG,InvertStencilOp:uG,KeepStencilOp:nd,KeyframeTrack:Do,LOD:uU,LatheGeometry:Px,Layers:Um,LessCompare:YO,LessDepth:JS,LessEqualCompare:S1,LessEqualDepth:Sd,LessEqualStencilFunc:pG,LessStencilFunc:fG,Light:Zh,LightProbe:QU,Line:Xh,Line3:cj,LineBasicMaterial:la,LineCurve:O1,LineCurve3:EU,LineDashedMaterial:PU,LineLoop:pU,LineSegments:Ec,LinearFilter:ws,LinearInterpolant:H1,LinearMipMapLinearFilter:Z8,LinearMipMapNearestFilter:Q8,LinearMipmapLinearFilter:ac,LinearMipmapNearestFilter:Wy,LinearSRGBColorSpace:qh,LinearToneMapping:UO,LinearTransfer:v_,Loader:Ca,LoaderUtils:qA,LoadingManager:G1,LoopOnce:HO,LoopPingPong:GO,LoopRepeat:kO,MOUSE:q8,Material:Lr,MaterialLoader:Gx,MathUtils:XG,Matrix2:Q1,Matrix3:mn,Matrix4:tn,MaxEquation:_O,Mesh:vs,MeshBasicMaterial:Kh,MeshDepthMaterial:z1,MeshDistanceMaterial:B1,MeshLambertMaterial:UU,MeshMatcapMaterial:LU,MeshNormalMaterial:OU,MeshPhongMaterial:DU,MeshPhysicalMaterial:IU,MeshStandardMaterial:V1,MeshToonMaterial:NU,MinEquation:yO,MirroredRepeatWrapping:g_,MixOperation:NO,MultiplyBlending:VA,MultiplyOperation:G_,NearestFilter:rr,NearestMipMapLinearFilter:K8,NearestMipMapNearestFilter:Y8,NearestMipmapLinearFilter:um,NearestMipmapNearestFilter:h1,NeutralToneMapping:BO,NeverCompare:WO,NeverDepth:QS,NeverStencilFunc:hG,NoBlending:uu,NoColorSpace:su,NoToneMapping:pc,NormalAnimationBlendMode:Sx,NormalBlending:hd,NotEqualCompare:ZO,NotEqualDepth:nE,NotEqualStencilFunc:gG,NumberKeyframeTrack:M_,Object3D:Kn,ObjectLoader:C7,ObjectSpaceNormalMap:XO,OctahedronGeometry:Y_,OneFactor:SO,OneMinusConstantAlphaFactor:DO,OneMinusConstantColorFactor:CO,OneMinusDstAlphaFactor:bO,OneMinusDstColorFactor:MO,OneMinusSrcAlphaFactor:KS,OneMinusSrcColorFactor:xO,OrthographicCamera:J_,PCFShadowMap:fx,PCFSoftShadowMap:Xy,PMREMGenerator:YA,Path:LE,PerspectiveCamera:ks,Plane:xh,PlaneGeometry:tg,PlaneHelper:Ej,PointLight:qU,PointLightHelper:fj,Points:mU,PointsMaterial:R1,PolarGridHelper:gj,PolyhedronGeometry:Qh,PositionalAudio:V7,PropertyBinding:Wn,PropertyMixer:tL,QuadraticBezierCurve:U1,QuadraticBezierCurve3:L1,Quaternion:Ra,QuaternionKeyframeTrack:Z_,QuaternionLinearInterpolant:HU,RED_GREEN_RGTC2_Format:CE,RED_RGTC1_Format:wE,REVISION:hx,RGBADepthPacking:qO,RGBAFormat:Nr,RGBAIntegerFormat:vx,RGBA_ASTC_10x10_Format:EE,RGBA_ASTC_10x5_Format:_E,RGBA_ASTC_10x6_Format:vE,RGBA_ASTC_10x8_Format:SE,RGBA_ASTC_12x10_Format:xE,RGBA_ASTC_12x12_Format:TE,RGBA_ASTC_4x4_Format:uE,RGBA_ASTC_5x4_Format:hE,RGBA_ASTC_5x5_Format:fE,RGBA_ASTC_6x5_Format:dE,RGBA_ASTC_6x6_Format:pE,RGBA_ASTC_8x5_Format:mE,RGBA_ASTC_8x6_Format:gE,RGBA_ASTC_8x8_Format:yE,RGBA_BPTC_Format:bE,RGBA_ETC2_EAC_Format:cE,RGBA_PVRTC_2BPPV1_Format:aE,RGBA_PVRTC_4BPPV1_Format:rE,RGBA_S3TC_DXT1_Format:Ky,RGBA_S3TC_DXT3_Format:Qy,RGBA_S3TC_DXT5_Format:Zy,RGBDepthPacking:nG,RGBFormat:y1,RGBIntegerFormat:J8,RGB_BPTC_SIGNED_Format:AE,RGB_BPTC_UNSIGNED_Format:ME,RGB_ETC1_Format:oE,RGB_ETC2_Format:lE,RGB_PVRTC_2BPPV1_Format:sE,RGB_PVRTC_4BPPV1_Format:iE,RGB_S3TC_DXT1_Format:Yy,RGDepthPacking:iG,RGFormat:_1,RGIntegerFormat:_x,RawShaderMaterial:CU,Ray:$m,Raycaster:iL,RectAreaLight:YU,RedFormat:yx,RedIntegerFormat:j_,ReinhardToneMapping:LO,RenderTarget:x1,RenderTarget3D:Z7,RepeatWrapping:m_,ReplaceStencilOp:rG,ReverseSubtractEquation:gO,RingGeometry:Vx,SIGNED_RED_GREEN_RGTC2_Format:IE,SIGNED_RED_RGTC1_Format:RE,SRGBColorSpace:Ir,SRGBTransfer:ci,Scene:A1,ShaderChunk:Tn,ShaderLib:cl,ShaderMaterial:vl,ShadowMaterial:RU,Shape:dd,ShapeGeometry:zx,ShapePath:bj,ShapeUtils:dl,ShortType:d1,Skeleton:wx,SkeletonHelper:hj,SkinnedMesh:hU,Source:Dh,Sphere:ar,SphereGeometry:K_,Spherical:sj,SphericalHarmonics3:KU,SplineCurve:P1,SpotLight:jU,SpotLightHelper:uj,Sprite:cU,SpriteMaterial:M1,SrcAlphaFactor:YS,SrcAlphaSaturateFactor:wO,SrcColorFactor:EO,StaticCopyUsage:TG,StaticDrawUsage:S_,StaticReadUsage:SG,StereoCamera:O7,StreamCopyUsage:AG,StreamDrawUsage:vG,StreamReadUsage:xG,StringKeyframeTrack:Pd,SubtractEquation:mO,SubtractiveBlending:PA,TOUCH:X8,TangentSpaceNormalMap:Yh,TetrahedronGeometry:Bx,Texture:Ji,TextureLoader:A7,TextureUtils:Ij,Timer:nj,TimestampQuery:wG,TorusGeometry:Fx,TorusKnotGeometry:Hx,Triangle:Ma,TriangleFanDrawMode:tG,TriangleStripDrawMode:eG,TrianglesDrawMode:$8,TubeGeometry:kx,UVMapping:dx,Uint16BufferAttribute:T1,Uint32BufferAttribute:b1,Uint8BufferAttribute:f9,Uint8ClampedBufferAttribute:d9,Uniform:K1,UniformsGroup:$7,UniformsLib:_t,UniformsUtils:rU,UnsignedByteType:Io,UnsignedInt101111Type:m1,UnsignedInt248Type:Cm,UnsignedInt5999Type:p1,UnsignedIntType:Su,UnsignedShort4444Type:mx,UnsignedShort5551Type:gx,UnsignedShortType:Rm,VSMShadowMap:ll,Vector2:$e,Vector3:ie,Vector4:Yn,VectorKeyframeTrack:w_,VideoFrameTexture:P9,VideoTexture:gU,WebGL3DRenderTarget:$G,WebGLArrayRenderTarget:JG,WebGLCoordinateSystem:Qa,WebGLCubeRenderTarget:oU,WebGLRenderTarget:_c,WebGLRenderer:hL,WebGLUtils:uL,WebGPUCoordinateSystem:Nm,WebXRController:TS,WireframeGeometry:wU,WrapAroundEnding:__,ZeroCurvatureEnding:od,ZeroFactor:vO,ZeroSlopeEnding:ld,ZeroStencilOp:sG,createCanvasElement:tU},Symbol.toStringTag,{value:"Module"}));var Hb={exports:{}},kb={},Gb={exports:{}},jb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MI;function fK(){if(MI)return jb;MI=1;var i=Bm();function e(_,S){return _===S&&(_!==0||1/_===1/S)||_!==_&&S!==S}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,s=i.useEffect,a=i.useLayoutEffect,l=i.useDebugValue;function u(_,S){var T=S(),M=n({inst:{value:T,getSnapshot:S}}),C=M[0].inst,w=M[1];return a(function(){C.value=T,C.getSnapshot=S,d(C)&&w({inst:C})},[_,T,S]),s(function(){return d(C)&&w({inst:C}),_(function(){d(C)&&w({inst:C})})},[_]),l(T),T}function d(_){var S=_.getSnapshot;_=_.value;try{var T=S();return!t(_,T)}catch{return!0}}function p(_,S){return S()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return jb.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:y,jb}var wI;function dK(){return wI||(wI=1,Gb.exports=fK()),Gb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI;function pK(){if(RI)return kb;RI=1;var i=Bm(),e=dK();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,a=i.useRef,l=i.useEffect,u=i.useMemo,d=i.useDebugValue;return kb.useSyncExternalStoreWithSelector=function(p,y,_,S,T){var M=a(null);if(M.current===null){var C={hasValue:!1,value:null};M.current=C}else C=M.current;M=u(function(){function b(G){if(!D){if(D=!0,V=G,G=S(G),T!==void 0&&C.hasValue){var P=C.value;if(T(P,G))return z=P}return z=G}if(P=z,n(V,G))return P;var L=S(G);return T!==void 0&&T(P,L)?(V=G,P):(V=G,z=L)}var D=!1,V,z,j=_===void 0?null:_;return[function(){return b(y())},j===null?void 0:function(){return b(j())}]},[y,_,S,T]);var w=s(p,M[0],M[1]);return l(function(){C.hasValue=!0,C.value=w},[w]),d(w),w},kb}var CI;function mK(){return CI||(CI=1,Hb.exports=pK()),Hb.exports}var gK=mK();const yK=iM(gK),II=i=>{let e;const t=new Set,n=(p,y)=>{const _=typeof p=="function"?p(e):p;if(!Object.is(_,e)){const S=e;e=y??(typeof _!="object"||_===null)?_:Object.assign({},e,_),t.forEach(T=>T(e,S))}},s=()=>e,u={setState:n,getState:s,getInitialState:()=>d,subscribe:p=>(t.add(p),()=>t.delete(p))},d=e=i(n,s,u);return u},_K=(i=>i?II(i):II),{useSyncExternalStoreWithSelector:vK}=yK,SK=i=>i;function EK(i,e=SK,t){const n=vK(i.subscribe,i.getState,i.getInitialState,e,t);return NP.useDebugValue(n),n}const DI=(i,e)=>{const t=_K(i),n=(s,a=e)=>EK(t,s,a);return Object.assign(n,t),n},xK=((i,e)=>i?DI(i,e):DI);var qb={exports:{}},Xb={exports:{}},Wb={exports:{}},Yb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NI;function TK(){return NI||(NI=1,(function(i){function e(X,ee){var ne=X.length;X.push(ee);e:for(;0<ne;){var pe=ne-1>>>1,re=X[pe];if(0<s(re,ee))X[pe]=ee,X[ne]=re,ne=pe;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var ee=X[0],ne=X.pop();if(ne!==ee){X[0]=ne;e:for(var pe=0,re=X.length,J=re>>>1;pe<J;){var le=2*(pe+1)-1,De=X[le],Re=le+1,nt=X[Re];if(0>s(De,ne))Re<re&&0>s(nt,De)?(X[pe]=nt,X[Re]=ne,pe=Re):(X[pe]=De,X[le]=ne,pe=le);else if(Re<re&&0>s(nt,ne))X[pe]=nt,X[Re]=ne,pe=Re;else break e}}return ee}function s(X,ee){var ne=X.sortIndex-ee.sortIndex;return ne!==0?ne:X.id-ee.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();i.unstable_now=function(){return l.now()-u}}var d=[],p=[],y=1,_=null,S=3,T=!1,M=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function V(X){for(var ee=t(p);ee!==null;){if(ee.callback===null)n(p);else if(ee.startTime<=X)n(p),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(p)}}function z(X){if(C=!1,V(X),!M)if(t(d)!==null)M=!0,de();else{var ee=t(p);ee!==null&&ge(z,ee.startTime-X)}}var j=!1,G=-1,P=5,L=-1;function I(){return!(i.unstable_now()-L<P)}function O(){if(j){var X=i.unstable_now();L=X;var ee=!0;try{e:{M=!1,C&&(C=!1,b(G),G=-1),T=!0;var ne=S;try{t:{for(V(X),_=t(d);_!==null&&!(_.expirationTime>X&&I());){var pe=_.callback;if(typeof pe=="function"){_.callback=null,S=_.priorityLevel;var re=pe(_.expirationTime<=X);if(X=i.unstable_now(),typeof re=="function"){_.callback=re,V(X),ee=!0;break t}_===t(d)&&n(d),V(X)}else n(d);_=t(d)}if(_!==null)ee=!0;else{var J=t(p);J!==null&&ge(z,J.startTime-X),ee=!1}}break e}finally{_=null,S=ne,T=!1}ee=void 0}}finally{ee?F():j=!1}}}var F;if(typeof D=="function")F=function(){D(O)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,q=Y.port2;Y.port1.onmessage=O,F=function(){q.postMessage(null)}}else F=function(){w(O,0)};function de(){j||(j=!0,F())}function ge(X,ee){G=w(function(){X(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_continueExecution=function(){M||T||(M=!0,de())},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_getFirstCallbackNode=function(){return t(d)},i.unstable_next=function(X){switch(S){case 1:case 2:case 3:var ee=3;break;default:ee=S}var ne=S;S=ee;try{return X()}finally{S=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(X,ee){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ne=S;S=X;try{return ee()}finally{S=ne}},i.unstable_scheduleCallback=function(X,ee,ne){var pe=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?pe+ne:pe):ne=pe,X){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ne+re,X={id:y++,callback:ee,priorityLevel:X,startTime:ne,expirationTime:re,sortIndex:-1},ne>pe?(X.sortIndex=ne,e(p,X),t(d)===null&&X===t(p)&&(C?(b(G),G=-1):C=!0,ge(z,ne-pe))):(X.sortIndex=re,e(d,X),M||T||(M=!0,de())),X},i.unstable_shouldYield=I,i.unstable_wrapCallback=function(X){var ee=S;return function(){var ne=S;S=ee;try{return X.apply(this,arguments)}finally{S=ne}}}})(Yb)),Yb}var OI;function bK(){return OI||(OI=1,Wb.exports=TK()),Wb.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UI;function AK(){return UI||(UI=1,(function(i){i.exports=function(e){function t(c,h,g,x){return new mg(c,h,g,x)}function n(){}function s(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return c===null||typeof c!="object"?null:(c=xg&&c[xg]||c["@@iterator"],typeof c=="function"?c:null)}function l(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===Pc?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case qu:return"Fragment";case Ba:return"Portal";case Eg:return"Profiler";case Sg:return"StrictMode";case Jd:return"Suspense";case kl:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case fo:return(c.displayName||"Context")+".Provider";case Hl:return(c._context.displayName||"Context")+".Consumer";case Xu:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case yf:return h=c.displayName||null,h!==null?h:l(c.type)||"Memo";case Fa:h=c._payload,c=c._init;try{return l(c(h))}catch{}}return null}function u(c){if($d===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);$d=h&&h[1]||"",Tg=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$d+c+Tg}function d(c,h){if(!c||Gl)return"";Gl=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(h){var yt=function(){throw Error()};if(Object.defineProperty(yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yt,[])}catch(nn){var Et=nn}Reflect.construct(c,[],yt)}else{try{yt.call()}catch(nn){Et=nn}c.call(yt.prototype)}}else{try{throw Error()}catch(nn){Et=nn}(yt=c())&&typeof yt.catch=="function"&&yt.catch(function(){})}}catch(nn){if(nn&&Et&&typeof nn.stack=="string")return[nn.stack,Et.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=x.DetermineComponentFrameRoot(),Z=U[0],ae=U[1];if(Z&&ae){var ve=Z.split(`
`),He=ae.split(`
`);for(R=x=0;x<ve.length&&!ve[x].includes("DetermineComponentFrameRoot");)x++;for(;R<He.length&&!He[R].includes("DetermineComponentFrameRoot");)R++;if(x===ve.length||R===He.length)for(x=ve.length-1,R=He.length-1;1<=x&&0<=R&&ve[x]!==He[R];)R--;for(;1<=x&&0<=R;x--,R--)if(ve[x]!==He[R]){if(x!==1||R!==1)do if(x--,R--,0>R||ve[x]!==He[R]){var ct=`
`+ve[x].replace(" at new "," at ");return c.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",c.displayName)),ct}while(1<=x&&0<=R);break}}}finally{Gl=!1,Error.prepareStackTrace=g}return(g=c?c.displayName||c.name:"")?u(g):""}function p(c){switch(c.tag){case 26:case 27:case 5:return u(c.type);case 16:return u("Lazy");case 13:return u("Suspense");case 19:return u("SuspenseList");case 0:case 15:return c=d(c.type,!1),c;case 11:return c=d(c.type.render,!1),c;case 1:return c=d(c.type,!0),c;default:return""}}function y(c){try{var h="";do h+=p(c),c=c.return;while(c);return h}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function _(c){var h=c,g=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(g=h.return),c=h.return;while(c)}return h.tag===3?g:null}function S(c){if(_(c)!==c)throw Error(s(188))}function T(c){var h=c.alternate;if(!h){if(h=_(c),h===null)throw Error(s(188));return h!==c?null:c}for(var g=c,x=h;;){var R=g.return;if(R===null)break;var U=R.alternate;if(U===null){if(x=R.return,x!==null){g=x;continue}break}if(R.child===U.child){for(U=R.child;U;){if(U===g)return S(R),c;if(U===x)return S(R),h;U=U.sibling}throw Error(s(188))}if(g.return!==x.return)g=R,x=U;else{for(var Z=!1,ae=R.child;ae;){if(ae===g){Z=!0,g=R,x=U;break}if(ae===x){Z=!0,x=R,g=U;break}ae=ae.sibling}if(!Z){for(ae=U.child;ae;){if(ae===g){Z=!0,g=U,x=R;break}if(ae===x){Z=!0,x=U,g=R;break}ae=ae.sibling}if(!Z)throw Error(s(189))}}if(g.alternate!==x)throw Error(s(190))}if(g.tag!==3)throw Error(s(188));return g.stateNode.current===g?c:h}function M(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(h=M(c),h!==null)return h;c=c.sibling}return null}function C(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(c.tag!==4&&(h=C(c),h!==null))return h;c=c.sibling}return null}function w(c){return{current:c}}function b(c){0>Qo||(c.current=Mf[Qo],Mf[Qo]=null,Qo--)}function D(c,h){Qo++,Mf[Qo]=c.current,c.current=h}function V(c){return c>>>=0,c===0?32:31-(wf(c)/Lv|0)|0}function z(c){var h=c&42;if(h!==0)return h;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function j(c,h){var g=c.pendingLanes;if(g===0)return 0;var x=0,R=c.suspendedLanes,U=c.pingedLanes,Z=c.warmLanes;c=c.finishedLanes!==0;var ae=g&134217727;return ae!==0?(g=ae&~R,g!==0?x=z(g):(U&=ae,U!==0?x=z(U):c||(Z=ae&~Z,Z!==0&&(x=z(Z))))):(ae=g&~R,ae!==0?x=z(ae):U!==0?x=z(U):c||(Z=g&~Z,Z!==0&&(x=z(Z)))),x===0?0:h!==0&&h!==x&&(h&R)===0&&(R=x&-x,Z=h&-h,R>=Z||R===32&&(Z&4194176)!==0)?h:x}function G(c,h){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&h)===0}function P(c,h){switch(c){case 1:case 2:case 4:case 8:return h+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L(){var c=Qu;return Qu<<=1,(Qu&4194176)===0&&(Qu=128),c}function I(){var c=Rf;return Rf<<=1,(Rf&62914560)===0&&(Rf=4194304),c}function O(c){for(var h=[],g=0;31>g;g++)h.push(c);return h}function F(c,h){c.pendingLanes|=h,h!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Y(c,h,g,x,R,U){var Z=c.pendingLanes;c.pendingLanes=g,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=g,c.entangledLanes&=g,c.errorRecoveryDisabledLanes&=g,c.shellSuspendCounter=0;var ae=c.entanglements,ve=c.expirationTimes,He=c.hiddenUpdates;for(g=Z&~g;0<g;){var ct=31-yr(g),yt=1<<ct;ae[ct]=0,ve[ct]=-1;var Et=He[ct];if(Et!==null)for(He[ct]=null,ct=0;ct<Et.length;ct++){var nn=Et[ct];nn!==null&&(nn.lane&=-536870913)}g&=~yt}x!==0&&q(c,x,0),U!==0&&R===0&&c.tag!==0&&(c.suspendedLanes|=U&~(Z&~h))}function q(c,h,g){c.pendingLanes|=h,c.suspendedLanes&=~h;var x=31-yr(h);c.entangledLanes|=h,c.entanglements[x]=c.entanglements[x]|1073741824|g&4194218}function de(c,h){var g=c.entangledLanes|=h;for(c=c.entanglements;g;){var x=31-yr(g),R=1<<x;R&h|c[x]&h&&(c[x]|=h),g&=~R}}function ge(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function X(c){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(Ju,c,void 0,(c.current.flags&128)===128)}catch{}}function ee(c){if(typeof Bv=="function"&&ey(c),_r&&typeof _r.setStrictMode=="function")try{_r.setStrictMode(Ju,c)}catch{}}function ne(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}function pe(c,h){if(typeof c=="object"&&c!==null){var g=gp.get(c);return g!==void 0?g:(h={value:c,source:h,stack:y(h)},gp.set(c,h),h)}return{value:c,source:h,stack:y(h)}}function re(c,h){vi[Oi++]=Df,vi[Oi++]=If,If=c,Df=h}function J(c,h,g){Wr[Yr++]=_o,Wr[Yr++]=ma,Wr[Yr++]=Ha,Ha=c;var x=_o;c=ma;var R=32-yr(x)-1;x&=~(1<<R),g+=1;var U=32-yr(h)+R;if(30<U){var Z=R-R%5;U=(x&(1<<Z)-1).toString(32),x>>=Z,R-=Z,_o=1<<32-yr(h)+R|g<<R|x,ma=U+c}else _o=1<<U|g<<R|x,ma=c}function le(c){c.return!==null&&(re(c,1),J(c,1,0))}function De(c){for(;c===If;)If=vi[--Oi],vi[Oi]=null,Df=vi[--Oi],vi[Oi]=null;for(;c===Ha;)Ha=Wr[--Yr],Wr[Yr]=null,ma=Wr[--Yr],Wr[Yr]=null,_o=Wr[--Yr],Wr[Yr]=null}function Re(c,h){D(ka,h),D(Nf,c),D(ds,null),c=Vc(h),b(ds),D(ds,c)}function nt(){b(ds),b(Nf),b(ka)}function Te(c){c.memoizedState!==null&&D($u,c);var h=ds.current,g=pv(h,c.type);h!==g&&(D(Nf,c),D(ds,g))}function Le(c){Nf.current===c&&(b(ds),b(Nf)),$u.current===c&&(b($u),mo?Kt._currentValue=gr:Kt._currentValue2=gr)}function at(c){var h=Error(s(418,""));throw se(pe(h,c)),Of}function pt(c,h){if(!Zs)throw Error(s(175));Kx(c.stateNode,c.type,c.memoizedProps,h,c)||at(c)}function bt(c){for(Ps=c.return;Ps;)switch(Ps.tag){case 3:case 27:ga=!0;return;case 5:case 13:ga=!1;return;default:Ps=Ps.return}}function Zt(c){if(!Zs||c!==Ps)return!1;if(!Bn)return bt(c),Bn=!0,!1;var h=!1;if(bs?c.tag!==3&&c.tag!==27&&(c.tag!==5||Iv(c.type)&&!Xl(c.type,c.memoizedProps))&&(h=!0):c.tag!==3&&(c.tag!==5||Iv(c.type)&&!Xl(c.type,c.memoizedProps))&&(h=!0),h&&Ms&&at(c),bt(c),c.tag===13){if(!Zs)throw Error(s(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));Ms=Rv(c)}else Ms=Ps?Hg(c.stateNode):null;return!0}function An(){Zs&&(Ms=Ps=null,Bn=!1)}function se(c){Kr===null?Kr=[c]:Kr.push(c)}function qe(){for(var c=Yl,h=eh=Yl=0;h<c;){var g=Qr[h];Qr[h++]=null;var x=Qr[h];Qr[h++]=null;var R=Qr[h];Qr[h++]=null;var U=Qr[h];if(Qr[h++]=null,x!==null&&R!==null){var Z=x.pending;Z===null?R.next=R:(R.next=Z.next,Z.next=R),x.pending=R}U!==0&&ut(g,R,U)}}function ke(c,h,g,x){Qr[Yl++]=c,Qr[Yl++]=h,Qr[Yl++]=g,Qr[Yl++]=x,eh|=x,c.lanes|=x,c=c.alternate,c!==null&&(c.lanes|=x)}function Be(c,h,g,x){return ke(c,h,g,x),je(c)}function Ve(c,h){return ke(c,null,null,h),je(c)}function ut(c,h,g){c.lanes|=g;var x=c.alternate;x!==null&&(x.lanes|=g);for(var R=!1,U=c.return;U!==null;)U.childLanes|=g,x=U.alternate,x!==null&&(x.childLanes|=g),U.tag===22&&(c=U.stateNode,c===null||c._visibility&1||(R=!0)),c=U,U=U.return;R&&h!==null&&c.tag===3&&(U=c.stateNode,R=31-yr(g),U=U.hiddenUpdates,c=U[R],c===null?U[R]=[h]:c.push(h),h.lane=g|536870912)}function je(c){if(50<Yc)throw Yc=0,er=null,Error(s(185));for(var h=c.return;h!==null;)c=h,h=c.return;return c.tag===3?c.stateNode:null}function Qe(c){c!==Hc&&c.next===null&&(Hc===null?th=Hc=c:Hc=Hc.next=c),Lf=!0,Uf||(Uf=!0,Oe(Wt))}function Vt(c,h){if(!Ga&&Lf){Ga=!0;do for(var g=!1,x=th;x!==null;){if(c!==0){var R=x.pendingLanes;if(R===0)var U=0;else{var Z=x.suspendedLanes,ae=x.pingedLanes;U=(1<<31-yr(42|c)+1)-1,U&=R&~(Z&~ae),U=U&201326677?U&201326677|1:U?U|2:0}U!==0&&(g=!0,Se(x,U))}else U=En,U=j(x,x===bn?U:0),(U&3)===0||G(x,U)||(g=!0,Se(x,U));x=x.next}while(g);Ga=!1}}function Wt(){Lf=Uf=!1;var c=0;Kl!==0&&(Wl()&&(c=Kl),Kl=0);for(var h=As(),g=null,x=th;x!==null;){var R=x.next,U=te(x,h);U===0?(x.next=null,g===null?th=R:g.next=R,R===null&&(Hc=g)):(g=x,(c!==0||(U&3)!==0)&&(Lf=!0)),x=R}Vt(c)}function te(c,h){for(var g=c.suspendedLanes,x=c.pingedLanes,R=c.expirationTimes,U=c.pendingLanes&-62914561;0<U;){var Z=31-yr(U),ae=1<<Z,ve=R[Z];ve===-1?((ae&g)===0||(ae&x)!==0)&&(R[Z]=P(ae,h)):ve<=h&&(c.expiredLanes|=ae),U&=~ae}if(h=bn,g=En,g=j(c,c===h?g:0),x=c.callbackNode,g===0||c===h&&ri===2||c.cancelPendingCommit!==null)return x!==null&&x!==null&&Cf(x),c.callbackNode=null,c.callbackPriority=0;if((g&3)===0||G(c,g)){if(h=g&-g,h===c.callbackPriority)return h;switch(x!==null&&Cf(x),ge(g)){case 2:case 8:g=zv;break;case 32:g=pp;break;case 268435456:g=mp;break;default:g=pp}return x=W.bind(null,c),g=Zu(g,x),c.callbackPriority=h,c.callbackNode=g,h}return x!==null&&x!==null&&Cf(x),c.callbackPriority=2,c.callbackNode=null,2}function W(c,h){var g=c.callbackNode;if(hs()&&c.callbackNode!==g)return null;var x=En;return x=j(c,c===bn?x:0),x===0?null:(ff(c,x,h),te(c,As()),c.callbackNode!=null&&c.callbackNode===g?W.bind(null,c):null)}function Se(c,h){if(hs())return null;ff(c,h,!0)}function Oe(c){Yi?ip(function(){(Bt&6)!==0?Zu($g,c):c()}):Zu($g,c)}function Ze(){return Kl===0&&(Kl=L()),Kl}function Pe(c,h){if(Pf===null){var g=Pf=[];yp=0,vr=Ze(),Ql={status:"pending",value:void 0,then:function(x){g.push(x)}}}return yp++,h.then(It,It),h}function It(){if(--yp===0&&Pf!==null){Ql!==null&&(Ql.status="fulfilled");var c=Pf;Pf=null,vr=0,Ql=null;for(var h=0;h<c.length;h++)(0,c[h])()}}function lt(c,h){var g=[],x={status:"pending",value:null,reason:null,then:function(R){g.push(R)}};return c.then(function(){x.status="fulfilled",x.value=h;for(var R=0;R<g.length;R++)(0,g[R])(h)},function(R){for(x.status="rejected",x.reason=R,R=0;R<g.length;R++)(0,g[R])(void 0)}),x}function Mt(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wt(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Ke(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function st(c,h,g){var x=c.updateQueue;if(x===null)return null;if(x=x.shared,(Bt&2)!==0){var R=x.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),x.pending=h,h=je(c),ut(c,null,g),h}return ke(c,x,h,g),je(c)}function Ct(c,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194176)!==0)){var x=h.lanes;x&=c.pendingLanes,g|=x,h.lanes=g,de(c,g)}}function mt(c,h){var g=c.updateQueue,x=c.alternate;if(x!==null&&(x=x.updateQueue,g===x)){var R=null,U=null;if(g=g.firstBaseUpdate,g!==null){do{var Z={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};U===null?R=U=Z:U=U.next=Z,g=g.next}while(g!==null);U===null?R=U=h:U=U.next=h}else R=U=h;g={baseState:x.baseState,firstBaseUpdate:R,lastBaseUpdate:U,shared:x.shared,callbacks:x.callbacks},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=h}function dt(){if(nh){var c=Ql;if(c!==null)throw c}}function Gt(c,h,g,x){nh=!1;var R=c.updateQueue;Zo=!1;var U=R.firstBaseUpdate,Z=R.lastBaseUpdate,ae=R.shared.pending;if(ae!==null){R.shared.pending=null;var ve=ae,He=ve.next;ve.next=null,Z===null?U=He:Z.next=He,Z=ve;var ct=c.alternate;ct!==null&&(ct=ct.updateQueue,ae=ct.lastBaseUpdate,ae!==Z&&(ae===null?ct.firstBaseUpdate=He:ae.next=He,ct.lastBaseUpdate=ve))}if(U!==null){var yt=R.baseState;Z=0,ct=He=ve=null,ae=U;do{var Et=ae.lane&-536870913,nn=Et!==ae.lane;if(nn?(En&Et)===Et:(x&Et)===Et){Et!==0&&Et===vr&&(nh=!0),ct!==null&&(ct=ct.next={lane:0,tag:ae.tag,payload:ae.payload,callback:null,next:null});e:{var Tr=c,Ff=ae;Et=h;var Kc=g;switch(Ff.tag){case 1:if(Tr=Ff.payload,typeof Tr=="function"){yt=Tr.call(Kc,yt,Et);break e}yt=Tr;break e;case 3:Tr.flags=Tr.flags&-65537|128;case 0:if(Tr=Ff.payload,Et=typeof Tr=="function"?Tr.call(Kc,yt,Et):Tr,Et==null)break e;yt=Lc({},yt,Et);break e;case 2:Zo=!0}}Et=ae.callback,Et!==null&&(c.flags|=64,nn&&(c.flags|=8192),nn=R.callbacks,nn===null?R.callbacks=[Et]:nn.push(Et))}else nn={lane:Et,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},ct===null?(He=ct=nn,ve=yt):ct=ct.next=nn,Z|=Et;if(ae=ae.next,ae===null){if(ae=R.shared.pending,ae===null)break;nn=ae,ae=nn.next,nn.next=null,R.lastBaseUpdate=nn,R.shared.pending=null}}while(!0);ct===null&&(ve=yt),R.baseState=ve,R.firstBaseUpdate=He,R.lastBaseUpdate=ct,U===null&&(R.shared.lanes=0),ea|=Z,c.lanes=Z,c.memoizedState=yt}}function he(c,h){if(typeof c!="function")throw Error(s(191,c));c.call(h)}function tt(c,h){var g=c.callbacks;if(g!==null)for(c.callbacks=null,c=0;c<g.length;c++)he(g[c],h)}function ot(c,h){if(Xr(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var g=Object.keys(c),x=Object.keys(h);if(g.length!==x.length)return!1;for(x=0;x<g.length;x++){var R=g[x];if(!Vf.call(h,R)||!Xr(c[R],h[R]))return!1}return!0}function ft(c){return c=c.status,c==="fulfilled"||c==="rejected"}function et(){}function Fe(c,h,g){switch(g=c[g],g===void 0?c.push(h):g!==h&&(h.then(et,et),h=g),h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,c===ni?Error(s(483)):c;default:if(typeof h.status=="string")h.then(et,et);else{if(c=bn,c!==null&&100<c.shellSuspendCounter)throw Error(s(482));c=h,c.status="pending",c.then(function(x){if(h.status==="pending"){var R=h;R.status="fulfilled",R.value=x}},function(x){if(h.status==="pending"){var R=h;R.status="rejected",R.reason=x}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,c===ni?Error(s(483)):c}throw kc=h,ni}}function vt(){if(kc===null)throw Error(s(459));var c=kc;return kc=null,c}function qt(c){var h=ya;return ya+=1,vo===null&&(vo=[]),Fe(vo,c,h)}function Rn(c,h){h=h.props.ref,c.ref=h!==void 0?h:null}function sn(c,h){throw h.$$typeof===vg?Error(s(525)):(c=Object.prototype.toString.call(h),Error(s(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c)))}function as(c){var h=c._init;return h(c._payload)}function js(c){function h(we,ye){if(c){var Ne=we.deletions;Ne===null?(we.deletions=[ye],we.flags|=16):Ne.push(ye)}}function g(we,ye){if(!c)return null;for(;ye!==null;)h(we,ye),ye=ye.sibling;return null}function x(we){for(var ye=new Map;we!==null;)we.key!==null?ye.set(we.key,we):ye.set(we.index,we),we=we.sibling;return ye}function R(we,ye){return we=Us(we,ye),we.index=0,we.sibling=null,we}function U(we,ye,Ne){return we.index=Ne,c?(Ne=we.alternate,Ne!==null?(Ne=Ne.index,Ne<ye?(we.flags|=33554434,ye):Ne):(we.flags|=33554434,ye)):(we.flags|=1048576,ye)}function Z(we){return c&&we.alternate===null&&(we.flags|=33554434),we}function ae(we,ye,Ne,it){return ye===null||ye.tag!==6?(ye=Fl(Ne,we.mode,it),ye.return=we,ye):(ye=R(ye,Ne),ye.return=we,ye)}function ve(we,ye,Ne,it){var Pt=Ne.type;return Pt===qu?ct(we,ye,Ne.props.children,it,Ne.key):ye!==null&&(ye.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===Fa&&as(Pt)===ye.type)?(ye=R(ye,Ne.props),Rn(ye,Ne),ye.return=we,ye):(ye=da(Ne.type,Ne.key,Ne.props,null,we.mode,it),Rn(ye,Ne),ye.return=we,ye)}function He(we,ye,Ne,it){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ne.containerInfo||ye.stateNode.implementation!==Ne.implementation?(ye=ju(Ne,we.mode,it),ye.return=we,ye):(ye=R(ye,Ne.children||[]),ye.return=we,ye)}function ct(we,ye,Ne,it,Pt){return ye===null||ye.tag!==7?(ye=qo(Ne,we.mode,it,Pt),ye.return=we,ye):(ye=R(ye,Ne),ye.return=we,ye)}function yt(we,ye,Ne){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=Fl(""+ye,we.mode,Ne),ye.return=we,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case Xo:return Ne=da(ye.type,ye.key,ye.props,null,we.mode,Ne),Rn(Ne,ye),Ne.return=we,Ne;case Ba:return ye=ju(ye,we.mode,Ne),ye.return=we,ye;case Fa:var it=ye._init;return ye=it(ye._payload),yt(we,ye,Ne)}if(jl(ye)||a(ye))return ye=qo(ye,we.mode,Ne,null),ye.return=we,ye;if(typeof ye.then=="function")return yt(we,qt(ye),Ne);if(ye.$$typeof===fo)return yt(we,fr(we,ye),Ne);sn(we,ye)}return null}function Et(we,ye,Ne,it){var Pt=ye!==null?ye.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Pt!==null?null:ae(we,ye,""+Ne,it);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case Xo:return Ne.key===Pt?ve(we,ye,Ne,it):null;case Ba:return Ne.key===Pt?He(we,ye,Ne,it):null;case Fa:return Pt=Ne._init,Ne=Pt(Ne._payload),Et(we,ye,Ne,it)}if(jl(Ne)||a(Ne))return Pt!==null?null:ct(we,ye,Ne,it,null);if(typeof Ne.then=="function")return Et(we,ye,qt(Ne),it);if(Ne.$$typeof===fo)return Et(we,ye,fr(we,Ne),it);sn(we,Ne)}return null}function nn(we,ye,Ne,it,Pt){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return we=we.get(Ne)||null,ae(ye,we,""+it,Pt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case Xo:return we=we.get(it.key===null?Ne:it.key)||null,ve(ye,we,it,Pt);case Ba:return we=we.get(it.key===null?Ne:it.key)||null,He(ye,we,it,Pt);case Fa:var fi=it._init;return it=fi(it._payload),nn(we,ye,Ne,it,Pt)}if(jl(it)||a(it))return we=we.get(Ne)||null,ct(ye,we,it,Pt,null);if(typeof it.then=="function")return nn(we,ye,Ne,qt(it),Pt);if(it.$$typeof===fo)return nn(we,ye,Ne,fr(ye,it),Pt);sn(ye,it)}return null}function Tr(we,ye,Ne,it){for(var Pt=null,fi=null,Qt=ye,Hn=ye=0,is=null;Qt!==null&&Hn<Ne.length;Hn++){Qt.index>Hn?(is=Qt,Qt=null):is=Qt.sibling;var kn=Et(we,Qt,Ne[Hn],it);if(kn===null){Qt===null&&(Qt=is);break}c&&Qt&&kn.alternate===null&&h(we,Qt),ye=U(kn,ye,Hn),fi===null?Pt=kn:fi.sibling=kn,fi=kn,Qt=is}if(Hn===Ne.length)return g(we,Qt),Bn&&re(we,Hn),Pt;if(Qt===null){for(;Hn<Ne.length;Hn++)Qt=yt(we,Ne[Hn],it),Qt!==null&&(ye=U(Qt,ye,Hn),fi===null?Pt=Qt:fi.sibling=Qt,fi=Qt);return Bn&&re(we,Hn),Pt}for(Qt=x(Qt);Hn<Ne.length;Hn++)is=nn(Qt,we,Hn,Ne[Hn],it),is!==null&&(c&&is.alternate!==null&&Qt.delete(is.key===null?Hn:is.key),ye=U(is,ye,Hn),fi===null?Pt=is:fi.sibling=is,fi=is);return c&&Qt.forEach(function(sl){return h(we,sl)}),Bn&&re(we,Hn),Pt}function Ff(we,ye,Ne,it){if(Ne==null)throw Error(s(151));for(var Pt=null,fi=null,Qt=ye,Hn=ye=0,is=null,kn=Ne.next();Qt!==null&&!kn.done;Hn++,kn=Ne.next()){Qt.index>Hn?(is=Qt,Qt=null):is=Qt.sibling;var sl=Et(we,Qt,kn.value,it);if(sl===null){Qt===null&&(Qt=is);break}c&&Qt&&sl.alternate===null&&h(we,Qt),ye=U(sl,ye,Hn),fi===null?Pt=sl:fi.sibling=sl,fi=sl,Qt=is}if(kn.done)return g(we,Qt),Bn&&re(we,Hn),Pt;if(Qt===null){for(;!kn.done;Hn++,kn=Ne.next())kn=yt(we,kn.value,it),kn!==null&&(ye=U(kn,ye,Hn),fi===null?Pt=kn:fi.sibling=kn,fi=kn);return Bn&&re(we,Hn),Pt}for(Qt=x(Qt);!kn.done;Hn++,kn=Ne.next())kn=nn(Qt,we,Hn,kn.value,it),kn!==null&&(c&&kn.alternate!==null&&Qt.delete(kn.key===null?Hn:kn.key),ye=U(kn,ye,Hn),fi===null?Pt=kn:fi.sibling=kn,fi=kn);return c&&Qt.forEach(function(Mp){return h(we,Mp)}),Bn&&re(we,Hn),Pt}function Kc(we,ye,Ne,it){if(typeof Ne=="object"&&Ne!==null&&Ne.type===qu&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case Xo:e:{for(var Pt=Ne.key;ye!==null;){if(ye.key===Pt){if(Pt=Ne.type,Pt===qu){if(ye.tag===7){g(we,ye.sibling),it=R(ye,Ne.props.children),it.return=we,we=it;break e}}else if(ye.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===Fa&&as(Pt)===ye.type){g(we,ye.sibling),it=R(ye,Ne.props),Rn(it,Ne),it.return=we,we=it;break e}g(we,ye);break}else h(we,ye);ye=ye.sibling}Ne.type===qu?(it=qo(Ne.props.children,we.mode,it,Ne.key),it.return=we,we=it):(it=da(Ne.type,Ne.key,Ne.props,null,we.mode,it),Rn(it,Ne),it.return=we,we=it)}return Z(we);case Ba:e:{for(Pt=Ne.key;ye!==null;){if(ye.key===Pt)if(ye.tag===4&&ye.stateNode.containerInfo===Ne.containerInfo&&ye.stateNode.implementation===Ne.implementation){g(we,ye.sibling),it=R(ye,Ne.children||[]),it.return=we,we=it;break e}else{g(we,ye);break}else h(we,ye);ye=ye.sibling}it=ju(Ne,we.mode,it),it.return=we,we=it}return Z(we);case Fa:return Pt=Ne._init,Ne=Pt(Ne._payload),Kc(we,ye,Ne,it)}if(jl(Ne))return Tr(we,ye,Ne,it);if(a(Ne)){if(Pt=a(Ne),typeof Pt!="function")throw Error(s(150));return Ne=Pt.call(Ne),Ff(we,ye,Ne,it)}if(typeof Ne.then=="function")return Kc(we,ye,qt(Ne),it);if(Ne.$$typeof===fo)return Kc(we,ye,fr(we,Ne),it);sn(we,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint"?(Ne=""+Ne,ye!==null&&ye.tag===6?(g(we,ye.sibling),it=R(ye,Ne),it.return=we,we=it):(g(we,ye),it=Fl(Ne,we.mode,it),it.return=we,we=it),Z(we)):g(we,ye)}return function(we,ye,Ne,it){try{ya=0;var Pt=Kc(we,ye,Ne,it);return vo=null,Pt}catch(Qt){if(Qt===ni)throw Qt;var fi=t(29,Qt,null,we.mode);return fi.lanes=it,fi.return=we,fi}finally{}}}function Ia(c,h){c=ja,D(Zr,c),D(So,h),ja=c|h.baseLanes}function qs(){D(Zr,ja),D(So,So.current)}function Da(){ja=Zr.current,b(So),b(Zr)}function Ss(c){var h=c.alternate;D(Ki,Ki.current&1),D(Jr,c),_a===null&&(h===null||So.current!==null||h.memoizedState!==null)&&(_a=c)}function Pr(c){if(c.tag===22){if(D(Ki,Ki.current),D(Jr,c),_a===null){var h=c.alternate;h!==null&&h.memoizedState!==null&&(_a=c)}}else Ds()}function Ds(){D(Ki,Ki.current),D(Jr,Jr.current)}function Ci(c){b(Jr),_a===c&&(_a=null),b(Ki)}function $i(c){for(var h=c;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||lp(g)||Af(g)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function ln(){throw Error(s(321))}function xi(c,h){if(h===null)return!1;for(var g=0;g<h.length&&g<c.length;g++)if(!Xr(c[g],h[g]))return!1;return!0}function lr(c,h,g,x,R,U){return Eo=U,dn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,jt.H=c===null||c.memoizedState===null?Qi:Vs,Jo=!1,U=g(x,R),Jo=!1,Si&&(U=Tu(h,g,x,R)),No(c),U}function No(c){jt.H=Fn;var h=Xn!==null&&Xn.next!==null;if(Eo=0,Bi=Xn=dn=null,va=!1,Ui=0,ih=null,h)throw Error(s(300));c===null||Fi||(c=c.dependencies,c!==null&&oi(c)&&(Fi=!0))}function Tu(c,h,g,x){dn=c;var R=0;do{if(Si&&(ih=null),Ui=0,Si=!1,25<=R)throw Error(s(301));if(R+=1,Bi=Xn=null,c.updateQueue!=null){var U=c.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}jt.H=Jl,U=h(g,x)}while(Si);return U}function bu(){var c=jt.H,h=c.useState()[0];return h=typeof h.then=="function"?Ae(h):h,c=c.useState()[0],(Xn!==null?Xn.memoizedState:null)!==c&&(dn.flags|=1024),h}function xl(){var c=zf!==0;return zf=0,c}function cr(c,h,g){h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~g}function Q(c){if(va){for(c=c.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}va=!1}Eo=0,Bi=Xn=dn=null,Si=!1,Ui=zf=0,ih=null}function fe(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bi===null?dn.memoizedState=Bi=c:Bi=Bi.next=c,Bi}function Ee(){if(Xn===null){var c=dn.alternate;c=c!==null?c.memoizedState:null}else c=Xn.next;var h=Bi===null?dn.memoizedState:Bi.next;if(h!==null)Bi=h,Xn=c;else{if(c===null)throw dn.alternate===null?Error(s(467)):Error(s(310));Xn=c,c={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},Bi===null?dn.memoizedState=Bi=c:Bi=Bi.next=c}return Bi}function Ae(c){var h=Ui;return Ui+=1,ih===null&&(ih=[]),c=Fe(ih,c,h),h=dn,(Bi===null?h.memoizedState:Bi.next)===null&&(h=h.alternate,jt.H=h===null||h.memoizedState===null?Qi:Vs),c}function me(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Ae(c);if(c.$$typeof===fo)return gi(c)}throw Error(s(438,String(c)))}function We(c){var h=null,g=dn.updateQueue;if(g!==null&&(h=g.memoCache),h==null){var x=dn.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(h={data:x.data.map(function(R){return R.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),g===null&&(g=vp(),dn.updateQueue=g),g.memoCache=h,g=h.data[h.index],g===void 0)for(g=h.data[h.index]=Array(c),x=0;x<c;x++)g[x]=dv;return h.index++,g}function ht(c,h){return typeof h=="function"?h(c):h}function xt(c){var h=Ee();return gt(h,Xn,c)}function gt(c,h,g){var x=c.queue;if(x===null)throw Error(s(311));x.lastRenderedReducer=g;var R=c.baseQueue,U=x.pending;if(U!==null){if(R!==null){var Z=R.next;R.next=U.next,U.next=Z}h.baseQueue=R=U,x.pending=null}if(U=c.baseState,R===null)c.memoizedState=U;else{h=R.next;var ae=Z=null,ve=null,He=h,ct=!1;do{var yt=He.lane&-536870913;if(yt!==He.lane?(En&yt)===yt:(Eo&yt)===yt){var Et=He.revertLane;if(Et===0)ve!==null&&(ve=ve.next={lane:0,revertLane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),yt===vr&&(ct=!0);else if((Eo&Et)===Et){He=He.next,Et===vr&&(ct=!0);continue}else yt={lane:0,revertLane:He.revertLane,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null},ve===null?(ae=ve=yt,Z=U):ve=ve.next=yt,dn.lanes|=Et,ea|=Et;yt=He.action,Jo&&g(U,yt),U=He.hasEagerState?He.eagerState:g(U,yt)}else Et={lane:yt,revertLane:He.revertLane,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null},ve===null?(ae=ve=Et,Z=U):ve=ve.next=Et,dn.lanes|=yt,ea|=yt;He=He.next}while(He!==null&&He!==h);if(ve===null?Z=U:ve.next=ae,!Xr(U,c.memoizedState)&&(Fi=!0,ct&&(g=Ql,g!==null)))throw g;c.memoizedState=U,c.baseState=Z,c.baseQueue=ve,x.lastRenderedState=U}return R===null&&(x.lanes=0),[c.memoizedState,x.dispatch]}function Nt(c){var h=Ee(),g=h.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=c;var x=g.dispatch,R=g.pending,U=h.memoizedState;if(R!==null){g.pending=null;var Z=R=R.next;do U=c(U,Z.action),Z=Z.next;while(Z!==R);Xr(U,h.memoizedState)||(Fi=!0),h.memoizedState=U,h.baseQueue===null&&(h.baseState=U),g.lastRenderedState=U}return[U,x]}function Ft(c,h,g){var x=dn,R=Ee(),U=Bn;if(U){if(g===void 0)throw Error(s(407));g=g()}else g=h();var Z=!Xr((Xn||R).memoizedState,g);if(Z&&(R.memoizedState=g,Fi=!0),R=R.queue,bl(Nn.bind(null,x,R,c),[c]),R.getSnapshot!==h||Z||Bi!==null&&Bi.memoizedState.tag&1){if(x.flags|=2048,Vi(9,cn.bind(null,x,R,g,h),{destroy:void 0},null),bn===null)throw Error(s(349));U||(Eo&60)!==0||Ut(x,h,g)}return g}function Ut(c,h,g){c.flags|=16384,c={getSnapshot:h,value:g},h=dn.updateQueue,h===null?(h=vp(),dn.updateQueue=h,h.stores=[c]):(g=h.stores,g===null?h.stores=[c]:g.push(c))}function cn(c,h,g,x){h.value=g,h.getSnapshot=x,Qn(h)&&gn(c)}function Nn(c,h,g){return g(function(){Qn(h)&&gn(c)})}function Qn(c){var h=c.getSnapshot;c=c.value;try{var g=h();return!Xr(c,g)}catch{return!0}}function gn(c){var h=Ve(c,2);h!==null&&Os(h,c,2)}function Xt(c){var h=fe();if(typeof c=="function"){var g=c;if(c=g(),Jo){ee(!0);try{g()}finally{ee(!1)}}}return h.memoizedState=h.baseState=c,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ht,lastRenderedState:c},h}function St(c,h,g,x){return c.baseState=g,gt(c,Xn,typeof x=="function"?x:ht)}function jn(c,h,g,x,R){if(to(c))throw Error(s(485));if(c=h.action,c!==null){var U={payload:R,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){U.listeners.push(Z)}};jt.T!==null?g(!0):U.isTransition=!1,x(U),g=h.pending,g===null?(U.next=h.pending=U,vn(h,U)):(U.next=g.next,h.pending=g.next=U)}}function vn(c,h){var g=h.action,x=h.payload,R=c.state;if(h.isTransition){var U=jt.T,Z={};jt.T=Z;try{var ae=g(R,x),ve=jt.S;ve!==null&&ve(Z,ae),rn(c,h,ae)}catch(He){ui(c,h,He)}finally{jt.T=U}}else try{U=g(R,x),rn(c,h,U)}catch(He){ui(c,h,He)}}function rn(c,h,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(x){Xs(c,h,x)},function(x){return ui(c,h,x)}):Xs(c,h,g)}function Xs(c,h,g){h.status="fulfilled",h.value=g,ur(h),c.state=g,h=c.pending,h!==null&&(g=h.next,g===h?c.pending=null:(g=g.next,h.next=g,vn(c,g)))}function ui(c,h,g){var x=c.pending;if(c.pending=null,x!==null){x=x.next;do h.status="rejected",h.reason=g,ur(h),h=h.next;while(h!==x)}c.action=null}function ur(c){c=c.listeners;for(var h=0;h<c.length;h++)(0,c[h])()}function Sn(c,h){return h}function Wi(c,h){if(Bn){var g=bn.formState;if(g!==null){e:{var x=dn;if(Bn){if(Ms){var R=Sv(Ms,ga);if(R){Ms=Hg(R),x=Ev(R);break e}}at(x)}x=!1}x&&(h=g[0])}}g=fe(),g.memoizedState=g.baseState=h,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:h},g.queue=x,g=Mu.bind(null,dn,x),x.dispatch=g,x=Xt(!1);var U=Mc.bind(null,dn,!1,x.queue);return x=fe(),R={state:h,dispatch:null,action:c,pending:null},x.queue=R,g=jn.bind(null,dn,R,U,g),R.dispatch=g,x.memoizedState=c,[h,g,!1]}function os(c){var h=Ee();return Ii(h,Xn,c)}function Ii(c,h,g){h=gt(c,h,Sn)[0],c=xt(ht)[0],h=typeof h=="object"&&h!==null&&typeof h.then=="function"?Ae(h):h;var x=Ee(),R=x.queue,U=R.dispatch;return g!==x.memoizedState&&(dn.flags|=2048,Vi(9,Ti.bind(null,R,g),{destroy:void 0},null)),[h,U,c]}function Ti(c,h){c.action=h}function Oo(c){var h=Ee(),g=Xn;if(g!==null)return Ii(h,g,c);Ee(),h=h.memoizedState,g=Ee();var x=g.queue.dispatch;return g.memoizedState=c,[h,x,!1]}function Vi(c,h,g,x){return c={tag:c,create:h,inst:g,deps:x,next:null},h=dn.updateQueue,h===null&&(h=vp(),dn.updateQueue=h),g=h.lastEffect,g===null?h.lastEffect=c.next=c:(x=g.next,g.next=c,c.next=x,h.lastEffect=c),c}function Ws(){return Ee().memoizedState}function xc(c,h,g,x){var R=fe();dn.flags|=c,R.memoizedState=Vi(1|h,g,{destroy:void 0},x===void 0?null:x)}function Tl(c,h,g,x){var R=Ee();x=x===void 0?null:x;var U=R.memoizedState.inst;Xn!==null&&x!==null&&xi(x,Xn.memoizedState.deps)?R.memoizedState=Vi(h,g,U,x):(dn.flags|=c,R.memoizedState=Vi(1|h,g,U,x))}function Au(c,h){xc(8390656,8,c,h)}function bl(c,h){Tl(2048,8,c,h)}function Jh(c,h){return Tl(4,2,c,h)}function Uo(c,h){return Tl(4,4,c,h)}function Tc(c,h){if(typeof h=="function"){c=c();var g=h(c);return function(){typeof g=="function"?g():h(null)}}if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function ca(c,h,g){g=g!=null?g.concat([c]):null,Tl(4,4,Tc.bind(null,h,c),g)}function bc(){}function Vr(c,h){var g=Ee();h=h===void 0?null:h;var x=g.memoizedState;return h!==null&&xi(h,x[1])?x[0]:(g.memoizedState=[c,h],c)}function Lo(c,h){var g=Ee();h=h===void 0?null:h;var x=g.memoizedState;if(h!==null&&xi(h,x[1]))return x[0];if(x=c(),Jo){ee(!0);try{c()}finally{ee(!1)}}return g.memoizedState=[x,h],x}function ua(c,h,g){return g===void 0||(Eo&1073741824)!==0?c.memoizedState=h:(c.memoizedState=g,c=lo(),dn.lanes|=c,ea|=c,g)}function Al(c,h,g,x){return Xr(g,h)?g:So.current!==null?(c=ua(c,g,x),Xr(c,h)||(Fi=!0),c):(Eo&42)===0?(Fi=!0,c.memoizedState=g):(c=lo(),dn.lanes|=c,ea|=c,h)}function Ac(c,h,g,x,R){var U=ts();Ls(U!==0&&8>U?U:8);var Z=jt.T,ae={};jt.T=ae,Mc(c,!1,h,g);try{var ve=R(),He=jt.S;if(He!==null&&He(ae,ve),ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var ct=lt(ve,x);Na(c,h,ct,Qs(c))}else Na(c,h,x,Qs(c))}catch(yt){Na(c,h,{then:function(){},status:"rejected",reason:yt},Qs())}finally{Ls(U),jt.T=Z}}function Po(c){var h=c.memoizedState;if(h!==null)return h;h={memoizedState:gr,baseState:gr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ht,lastRenderedState:gr},next:null};var g={};return h.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ht,lastRenderedState:g},next:null},c.memoizedState=h,c=c.alternate,c!==null&&(c.memoizedState=h),h}function zr(){return gi(Kt)}function Br(){return Ee().memoizedState}function Ml(){return Ee().memoizedState}function ii(c){for(var h=c.return;h!==null;){switch(h.tag){case 24:case 3:var g=Qs();c=Ke(g);var x=st(h,c,g);x!==null&&(Os(x,h,g),Ct(x,h,g)),h={cache:zo()},c.payload=h;return}h=h.return}}function eo(c,h,g){var x=Qs();g={lane:x,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},to(c)?no(h,g):(g=Be(c,h,g,x),g!==null&&(Os(g,c,x),ha(g,h,x)))}function Mu(c,h,g){var x=Qs();Na(c,h,g,x)}function Na(c,h,g,x){var R={lane:x,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(to(c))no(h,R);else{var U=c.alternate;if(c.lanes===0&&(U===null||U.lanes===0)&&(U=h.lastRenderedReducer,U!==null))try{var Z=h.lastRenderedState,ae=U(Z,g);if(R.hasEagerState=!0,R.eagerState=ae,Xr(ae,Z))return ke(c,h,R,0),bn===null&&qe(),!1}catch{}finally{}if(g=Be(c,h,R,x),g!==null)return Os(g,c,x),ha(g,h,x),!0}return!1}function Mc(c,h,g,x){if(x={lane:2,revertLane:Ze(),action:x,hasEagerState:!1,eagerState:null,next:null},to(c)){if(h)throw Error(s(479))}else h=Be(c,g,x,2),h!==null&&Os(h,c,2)}function to(c){var h=c.alternate;return c===dn||h!==null&&h===dn}function no(c,h){Si=va=!0;var g=c.pending;g===null?h.next=h:(h.next=g.next,g.next=h),c.pending=h}function ha(c,h,g){if((g&4194176)!==0){var x=h.lanes;x&=c.pendingLanes,g|=x,h.lanes=g,de(c,g)}}function es(c,h,g,x){h=c.memoizedState,g=g(x,h),g=g==null?h:Lc({},h,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}function io(c,h,g,x,R,U,Z){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(x,U,Z):h.prototype&&h.prototype.isPureReactComponent?!ot(g,x)||!ot(R,U):!0}function Oa(c,h,g,x){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,x),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,x),h.state!==c&&Sp.enqueueReplaceState(h,h.state,null)}function hr(c,h){var g=h;if("ref"in h){g={};for(var x in h)x!=="ref"&&(g[x]=h[x])}if(c=c.defaultProps){g===h&&(g=Lc({},g));for(var R in c)g[R]===void 0&&(g[R]=c[R])}return g}function wl(c,h){try{var g=c.onUncaughtError;g(h.value,{componentStack:h.stack})}catch(x){setTimeout(function(){throw x})}}function Vo(c,h,g){try{var x=c.onCaughtError;x(g.value,{componentStack:g.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function Rl(c,h,g){return g=Ke(g),g.tag=3,g.payload={element:null},g.callback=function(){wl(c,h)},g}function Ua(c){return c=Ke(c),c.tag=3,c}function wc(c,h,g,x){var R=g.type.getDerivedStateFromError;if(typeof R=="function"){var U=x.value;c.payload=function(){return R(U)},c.callback=function(){Vo(h,g,x)}}var Z=g.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(c.callback=function(){Vo(h,g,x),typeof R!="function"&&(na===null?na=new Set([this]):na.add(this));var ae=x.stack;this.componentDidCatch(x.value,{componentStack:ae!==null?ae:""})})}function $h(c,h,g,x,R){if(g.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(h=g.alternate,h!==null&&Cn(h,g,R,!0),g=Jr.current,g!==null){switch(g.tag){case 13:return _a===null?mr():g.alternate===null&&Un===0&&(Un=3),g.flags&=-257,g.flags|=65536,g.lanes=R,x===_p?g.flags|=16384:(h=g.updateQueue,h===null?g.updateQueue=new Set([x]):h.add(x),Qd(c,x,R)),!1;case 22:return g.flags|=65536,x===_p?g.flags|=16384:(h=g.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([x])},g.updateQueue=h):(g=h.retryQueue,g===null?h.retryQueue=new Set([x]):g.add(x)),Qd(c,x,R)),!1}throw Error(s(435,g.tag))}return Qd(c,x,R),mr(),!1}if(Bn)return h=Jr.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=R,x!==Of&&(c=Error(s(422),{cause:x}),se(pe(c,g)))):(x!==Of&&(h=Error(s(423),{cause:x}),se(pe(h,g))),c=c.current.alternate,c.flags|=65536,R&=-R,c.lanes|=R,x=pe(x,g),R=Rl(c.stateNode,x,R),mt(c,R),Un!==4&&(Un=2)),!1;var U=Error(s(520),{cause:x});if(U=pe(U,g),rh===null?rh=[U]:rh.push(U),Un!==4&&(Un=2),h===null)return!0;x=pe(x,g),g=h;do{switch(g.tag){case 3:return g.flags|=65536,c=R&-R,g.lanes|=c,c=Rl(g.stateNode,x,c),mt(g,c),!1;case 1:if(h=g.type,U=g.stateNode,(g.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(na===null||!na.has(U))))return g.flags|=65536,R&=-R,g.lanes|=R,R=Ua(R),wc(R,c,g,x),mt(g,R),!1}g=g.return}while(g!==null);return!1}function bi(c,h,g,x){h.child=c===null?ny(h,null,g,x):Zl(h,c.child,g,x)}function ef(c,h,g,x,R){g=g.render;var U=h.ref;if("ref"in x){var Z={};for(var ae in x)ae!=="ref"&&(Z[ae]=x[ae])}else Z=x;return ls(h),x=lr(c,h,g,Z,U,R),ae=xl(),c!==null&&!Fi?(cr(c,h,R),N(c,h,R)):(Bn&&ae&&le(h),h.flags|=1,bi(c,h,x,R),h.child)}function tf(c,h,g,x,R){if(c===null){var U=g.type;return typeof U=="function"&&!Go(U)&&U.defaultProps===void 0&&g.compare===null?(h.tag=15,h.type=U,Cl(c,h,U,x,R)):(c=da(g.type,null,x,h,h.mode,R),c.ref=h.ref,c.return=h,h.child=c)}if(U=c.child,!k(c,R)){var Z=U.memoizedProps;if(g=g.compare,g=g!==null?g:ot,g(Z,x)&&c.ref===h.ref)return N(c,h,R)}return h.flags|=1,c=Us(U,x),c.ref=h.ref,c.return=h,h.child=c}function Cl(c,h,g,x,R){if(c!==null){var U=c.memoizedProps;if(ot(U,x)&&c.ref===h.ref)if(Fi=!1,h.pendingProps=x=U,k(c,R))(c.flags&131072)!==0&&(Fi=!0);else return h.lanes=c.lanes,N(c,h,R)}return Ru(c,h,g,x,R)}function wu(c,h,g){var x=h.pendingProps,R=x.children,U=(h.stateNode._pendingVisibility&2)!==0,Z=c!==null?c.memoizedState:null;if(so(c,h),x.mode==="hidden"||U){if((h.flags&128)!==0){if(x=Z!==null?Z.baseLanes|g:g,c!==null){for(R=h.child=c.child,U=0;R!==null;)U=U|R.lanes|R.childLanes,R=R.sibling;h.childLanes=U&~x}else h.childLanes=0,h.child=null;return nf(c,h,x,g)}if((g&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},c!==null&&Vd(h,Z!==null?Z.cachePool:null),Z!==null?Ia(h,Z):qs(),Pr(h);else return h.lanes=h.childLanes=536870912,nf(c,h,Z!==null?Z.baseLanes|g:g,g)}else Z!==null?(Vd(h,Z.cachePool),Ia(h,Z),Ds(),h.memoizedState=null):(c!==null&&Vd(h,null),qs(),Ds());return bi(c,h,R,g),h.child}function nf(c,h,g,x){var R=Il();return R=R===null?null:{parent:mo?Zn._currentValue:Zn._currentValue2,pool:R},h.memoizedState={baseLanes:g,cachePool:R},c!==null&&Vd(h,null),qs(),Pr(h),c!==null&&Cn(c,h,x,!0),null}function so(c,h){var g=h.ref;if(g===null)c!==null&&c.ref!==null&&(h.flags|=2097664);else{if(typeof g!="function"&&typeof g!="object")throw Error(s(284));(c===null||c.ref!==g)&&(h.flags|=2097664)}}function Ru(c,h,g,x,R){return ls(h),g=lr(c,h,g,x,void 0,R),x=xl(),c!==null&&!Fi?(cr(c,h,R),N(c,h,R)):(Bn&&x&&le(h),h.flags|=1,bi(c,h,g,R),h.child)}function sf(c,h,g,x,R,U){return ls(h),h.updateQueue=null,g=Tu(h,x,g,R),No(c),x=xl(),c!==null&&!Fi?(cr(c,h,U),N(c,h,U)):(Bn&&x&&le(h),h.flags|=1,bi(c,h,g,U),h.child)}function La(c,h,g,x,R){if(ls(h),h.stateNode===null){var U=Fc,Z=g.contextType;typeof Z=="object"&&Z!==null&&(U=gi(Z)),U=new g(x,U),h.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=Sp,h.stateNode=U,U._reactInternals=h,U=h.stateNode,U.props=x,U.state=h.memoizedState,U.refs={},Mt(h),Z=g.contextType,U.context=typeof Z=="object"&&Z!==null?gi(Z):Fc,U.state=h.memoizedState,Z=g.getDerivedStateFromProps,typeof Z=="function"&&(es(h,g,Z,x),U.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(Z=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),Z!==U.state&&Sp.enqueueReplaceState(U,U.state,null),Gt(h,x,U,R),dt(),U.state=h.memoizedState),typeof U.componentDidMount=="function"&&(h.flags|=4194308),x=!0}else if(c===null){U=h.stateNode;var ae=h.memoizedProps,ve=hr(g,ae);U.props=ve;var He=U.context,ct=g.contextType;Z=Fc,typeof ct=="object"&&ct!==null&&(Z=gi(ct));var yt=g.getDerivedStateFromProps;ct=typeof yt=="function"||typeof U.getSnapshotBeforeUpdate=="function",ae=h.pendingProps!==ae,ct||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ae||He!==Z)&&Oa(h,U,x,Z),Zo=!1;var Et=h.memoizedState;U.state=Et,Gt(h,x,U,R),dt(),He=h.memoizedState,ae||Et!==He||Zo?(typeof yt=="function"&&(es(h,g,yt,x),He=h.memoizedState),(ve=Zo||io(h,g,ve,x,Et,He,Z))?(ct||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(h.flags|=4194308)):(typeof U.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=x,h.memoizedState=He),U.props=x,U.state=He,U.context=Z,x=ve):(typeof U.componentDidMount=="function"&&(h.flags|=4194308),x=!1)}else{U=h.stateNode,wt(c,h),Z=h.memoizedProps,ct=hr(g,Z),U.props=ct,yt=h.pendingProps,Et=U.context,He=g.contextType,ve=Fc,typeof He=="object"&&He!==null&&(ve=gi(He)),ae=g.getDerivedStateFromProps,(He=typeof ae=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Z!==yt||Et!==ve)&&Oa(h,U,x,ve),Zo=!1,Et=h.memoizedState,U.state=Et,Gt(h,x,U,R),dt();var nn=h.memoizedState;Z!==yt||Et!==nn||Zo||c!==null&&c.dependencies!==null&&oi(c.dependencies)?(typeof ae=="function"&&(es(h,g,ae,x),nn=h.memoizedState),(ct=Zo||io(h,g,ct,x,Et,nn,ve)||c!==null&&c.dependencies!==null&&oi(c.dependencies))?(He||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(x,nn,ve),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(x,nn,ve)),typeof U.componentDidUpdate=="function"&&(h.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof U.componentDidUpdate!="function"||Z===c.memoizedProps&&Et===c.memoizedState||(h.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Z===c.memoizedProps&&Et===c.memoizedState||(h.flags|=1024),h.memoizedProps=x,h.memoizedState=nn),U.props=x,U.state=nn,U.context=ve,x=ct):(typeof U.componentDidUpdate!="function"||Z===c.memoizedProps&&Et===c.memoizedState||(h.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Z===c.memoizedProps&&Et===c.memoizedState||(h.flags|=1024),x=!1)}return U=x,so(c,h),x=(h.flags&128)!==0,U||x?(U=h.stateNode,g=x&&typeof g.getDerivedStateFromError!="function"?null:U.render(),h.flags|=1,c!==null&&x?(h.child=Zl(h,c.child,null,R),h.child=Zl(h,null,g,R)):bi(c,h,g,R),h.memoizedState=U.state,c=h.child):c=N(c,h,R),c}function rf(c,h,g,x){return An(),h.flags|=256,bi(c,h,g,x),h.child}function Cu(c){return{baseLanes:c,cachePool:tv()}}function Iu(c,h,g){return c=c!==null?c.childLanes&~g:0,h&&(c|=xr),c}function af(c,h,g){var x=h.pendingProps,R=!1,U=(h.flags&128)!==0,Z;if((Z=U)||(Z=c!==null&&c.memoizedState===null?!1:(Ki.current&2)!==0),Z&&(R=!0,h.flags&=-129),Z=(h.flags&32)!==0,h.flags&=-33,c===null){if(Bn){if(R?Ss(h):Ds(),Bn){var ae=Ms,ve;(ve=ae)&&(ae=Mv(ae,ga),ae!==null?(h.memoizedState={dehydrated:ae,treeContext:Ha!==null?{id:_o,overflow:ma}:null,retryLane:536870912},ve=t(18,null,null,0),ve.stateNode=ae,ve.return=h,h.child=ve,Ps=h,Ms=null,ve=!0):ve=!1),ve||at(h)}if(ae=h.memoizedState,ae!==null&&(ae=ae.dehydrated,ae!==null))return Af(ae)?h.lanes=16:h.lanes=536870912,null;Ci(h)}return ae=x.children,x=x.fallback,R?(Ds(),R=h.mode,ae=Es({mode:"hidden",children:ae},R),x=qo(x,R,g,null),ae.return=h,x.return=h,ae.sibling=x,h.child=ae,R=h.child,R.memoizedState=Cu(g),R.childLanes=Iu(c,Z,g),h.memoizedState=zs,x):(Ss(h),ro(h,ae))}if(ve=c.memoizedState,ve!==null&&(ae=ve.dehydrated,ae!==null)){if(U)h.flags&256?(Ss(h),h.flags&=-257,h=Du(c,h,g)):h.memoizedState!==null?(Ds(),h.child=c.child,h.flags|=128,h=null):(Ds(),R=x.fallback,ae=h.mode,x=Es({mode:"visible",children:x.children},ae),R=qo(R,ae,g,null),R.flags|=2,x.return=h,R.return=h,x.sibling=R,h.child=x,Zl(h,c.child,null,g),x=h.child,x.memoizedState=Cu(g),x.childLanes=Iu(c,Z,g),h.memoizedState=zs,h=R);else if(Ss(h),Af(ae))Z=vv(ae).digest,x=Error(s(419)),x.stack="",x.digest=Z,se({value:x,source:null,stack:null}),h=Du(c,h,g);else if(Fi||Cn(c,h,g,!1),Z=(g&c.childLanes)!==0,Fi||Z){if(Z=bn,Z!==null){if(x=g&-g,(x&42)!==0)x=1;else switch(x){case 2:x=1;break;case 8:x=4;break;case 32:x=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:x=64;break;case 268435456:x=134217728;break;default:x=0}if(x=(x&(Z.suspendedLanes|g))!==0?0:x,x!==0&&x!==ve.retryLane)throw ve.retryLane=x,Ve(c,x),Os(Z,c,x),Hv}lp(ae)||mr(),h=Du(c,h,g)}else lp(ae)?(h.flags|=128,h.child=c.child,h=Oc.bind(null,c),Yx(ae,h),h=null):(c=ve.treeContext,Zs&&(Ms=Tv(ae),Ps=h,Bn=!0,Kr=null,ga=!1,c!==null&&(Wr[Yr++]=_o,Wr[Yr++]=ma,Wr[Yr++]=Ha,_o=c.id,ma=c.overflow,Ha=h)),h=ro(h,x.children),h.flags|=4096);return h}return R?(Ds(),R=x.fallback,ae=h.mode,ve=c.child,U=ve.sibling,x=Us(ve,{mode:"hidden",children:x.children}),x.subtreeFlags=ve.subtreeFlags&31457280,U!==null?R=Us(U,R):(R=qo(R,ae,g,null),R.flags|=2),R.return=h,x.return=h,x.sibling=R,h.child=x,x=R,R=h.child,ae=c.child.memoizedState,ae===null?ae=Cu(g):(ve=ae.cachePool,ve!==null?(U=mo?Zn._currentValue:Zn._currentValue2,ve=ve.parent!==U?{parent:U,pool:U}:ve):ve=tv(),ae={baseLanes:ae.baseLanes|g,cachePool:ve}),R.memoizedState=ae,R.childLanes=Iu(c,Z,g),h.memoizedState=zs,x):(Ss(h),g=c.child,c=g.sibling,g=Us(g,{mode:"visible",children:x.children}),g.return=h,g.sibling=null,c!==null&&(Z=h.deletions,Z===null?(h.deletions=[c],h.flags|=16):Z.push(c)),h.child=g,h.memoizedState=null,g)}function ro(c,h){return h=Es({mode:"visible",children:h},c.mode),h.return=c,c.child=h}function Es(c,h){return Zd(c,h,0,null)}function Du(c,h,g){return Zl(h,c.child,null,g),c=ro(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function of(c,h,g){c.lanes|=h;var x=c.alternate;x!==null&&(x.lanes|=h),an(c.return,h,g)}function Pa(c,h,g,x,R){var U=c.memoizedState;U===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:x,tail:g,tailMode:R}:(U.isBackwards=h,U.rendering=null,U.renderingStartTime=0,U.last=x,U.tail=g,U.tailMode=R)}function v(c,h,g){var x=h.pendingProps,R=x.revealOrder,U=x.tail;if(bi(c,h,x.children,g),x=Ki.current,(x&2)!==0)x=x&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&of(c,g,h);else if(c.tag===19)of(c,g,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}x&=1}switch(D(Ki,x),R){case"forwards":for(g=h.child,R=null;g!==null;)c=g.alternate,c!==null&&$i(c)===null&&(R=g),g=g.sibling;g=R,g===null?(R=h.child,h.child=null):(R=g.sibling,g.sibling=null),Pa(h,!1,R,g,U);break;case"backwards":for(g=null,R=h.child,h.child=null;R!==null;){if(c=R.alternate,c!==null&&$i(c)===null){h.child=R;break}c=R.sibling,R.sibling=g,g=R,R=c}Pa(h,!0,g,null,U);break;case"together":Pa(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function N(c,h,g){if(c!==null&&(h.dependencies=c.dependencies),ea|=h.lanes,(g&h.childLanes)===0)if(c!==null){if(Cn(c,h,g,!1),(g&h.childLanes)===0)return null}else return null;if(c!==null&&h.child!==c.child)throw Error(s(153));if(h.child!==null){for(c=h.child,g=Us(c,c.pendingProps),h.child=g,g.return=h;c.sibling!==null;)c=c.sibling,g=g.sibling=Us(c,c.pendingProps),g.return=h;g.sibling=null}return h.child}function k(c,h){return(c.lanes&h)!==0?!0:(c=c.dependencies,!!(c!==null&&oi(c)))}function $(c,h,g){switch(h.tag){case 3:Re(h,h.stateNode.containerInfo),Ce(h,Zn,c.memoizedState.cache),An();break;case 27:case 5:Te(h);break;case 4:Re(h,h.stateNode.containerInfo);break;case 10:Ce(h,h.type,h.memoizedProps.value);break;case 13:var x=h.memoizedState;if(x!==null)return x.dehydrated!==null?(Ss(h),h.flags|=128,null):(g&h.child.childLanes)!==0?af(c,h,g):(Ss(h),c=N(c,h,g),c!==null?c.sibling:null);Ss(h);break;case 19:var R=(c.flags&128)!==0;if(x=(g&h.childLanes)!==0,x||(Cn(c,h,g,!1),x=(g&h.childLanes)!==0),R){if(x)return v(c,h,g);h.flags|=128}if(R=h.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),D(Ki,Ki.current),x)break;return null;case 22:case 23:return h.lanes=0,wu(c,h,g);case 24:Ce(h,Zn,c.memoizedState.cache)}return N(c,h,g)}function xe(c,h,g){if(c!==null)if(c.memoizedProps!==h.pendingProps)Fi=!0;else{if(!k(c,g)&&(h.flags&128)===0)return Fi=!1,$(c,h,g);Fi=(c.flags&131072)!==0}else Fi=!1,Bn&&(h.flags&1048576)!==0&&J(h,Df,h.index);switch(h.lanes=0,h.tag){case 16:e:{c=h.pendingProps;var x=h.elementType,R=x._init;if(x=R(x._payload),h.type=x,typeof x=="function")Go(x)?(c=hr(x,c),h.tag=1,h=La(null,h,x,c,g)):(h.tag=0,h=Ru(null,h,x,c,g));else{if(x!=null){if(R=x.$$typeof,R===Xu){h.tag=11,h=ef(null,h,x,c,g);break e}else if(R===yf){h.tag=14,h=tf(null,h,x,c,g);break e}}throw h=l(x)||x,Error(s(306,h,""))}}return h;case 0:return Ru(c,h,h.type,h.pendingProps,g);case 1:return x=h.type,R=hr(x,h.pendingProps),La(c,h,x,R,g);case 3:e:{if(Re(h,h.stateNode.containerInfo),c===null)throw Error(s(387));var U=h.pendingProps;R=h.memoizedState,x=R.element,wt(c,h),Gt(h,U,null,g);var Z=h.memoizedState;if(U=Z.cache,Ce(h,Zn,U),U!==R.cache&&Ai(h,[Zn],g,!0),dt(),U=Z.element,Zs&&R.isDehydrated)if(R={element:U,isDehydrated:!1,cache:Z.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=rf(c,h,U,g);break e}else if(U!==x){x=pe(Error(s(424)),h),se(x),h=rf(c,h,U,g);break e}else for(Zs&&(Ms=xv(h.stateNode.containerInfo),Ps=h,Bn=!0,Kr=null,ga=!0),g=ny(h,null,U,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(An(),U===x){h=N(c,h,g);break e}bi(c,h,U,g)}h=h.child}return h;case 26:if(qr)return so(c,h),c===null?(g=dp(h.type,null,h.pendingProps,null))?h.memoizedState=g:Bn||(h.stateNode=Qx(h.type,h.pendingProps,ka.current,h)):h.memoizedState=dp(h.type,c.memoizedProps,h.pendingProps,c.memoizedState),null;case 27:if(bs)return Te(h),c===null&&bs&&Bn&&(x=h.stateNode=Jg(h.type,h.pendingProps,ka.current,ds.current,!1),Ps=h,ga=!0,Ms=cp(x)),x=h.pendingProps.children,c!==null||Bn?bi(c,h,x,g):h.child=Zl(h,null,x,g),so(c,h),h.child;case 5:return c===null&&Bn&&(Dv(h.type,h.pendingProps,ds.current),(R=x=Ms)&&(x=bv(x,h.type,h.pendingProps,ga),x!==null?(h.stateNode=x,Ps=h,Ms=cp(x),ga=!1,R=!0):R=!1),R||at(h)),Te(h),R=h.type,U=h.pendingProps,Z=c!==null?c.memoizedProps:null,x=U.children,Xl(R,U)?x=null:Z!==null&&Xl(R,Z)&&(h.flags|=32),h.memoizedState!==null&&(R=lr(c,h,bu,null,null,g),mo?Kt._currentValue=R:Kt._currentValue2=R),so(c,h),bi(c,h,x,g),h.child;case 6:return c===null&&Bn&&(Nv(h.pendingProps,ds.current),(c=g=Ms)&&(g=Av(g,h.pendingProps,ga),g!==null?(h.stateNode=g,Ps=h,Ms=null,c=!0):c=!1),c||at(h)),null;case 13:return af(c,h,g);case 4:return Re(h,h.stateNode.containerInfo),x=h.pendingProps,c===null?h.child=Zl(h,null,x,g):bi(c,h,x,g),h.child;case 11:return ef(c,h,h.type,h.pendingProps,g);case 7:return bi(c,h,h.pendingProps,g),h.child;case 8:return bi(c,h,h.pendingProps.children,g),h.child;case 12:return bi(c,h,h.pendingProps.children,g),h.child;case 10:return x=h.pendingProps,Ce(h,h.type,x.value),bi(c,h,x.children,g),h.child;case 9:return R=h.type._context,x=h.pendingProps.children,ls(h),R=gi(R),x=x(R),h.flags|=1,bi(c,h,x,g),h.child;case 14:return tf(c,h,h.type,h.pendingProps,g);case 15:return Cl(c,h,h.type,h.pendingProps,g);case 19:return v(c,h,g);case 22:return wu(c,h,g);case 24:return ls(h),x=gi(Zn),c===null?(R=Il(),R===null&&(R=bn,U=zo(),R.pooledCache=U,U.refCount++,U!==null&&(R.pooledCacheLanes|=g),R=U),h.memoizedState={parent:x,cache:R},Mt(h),Ce(h,Zn,R)):((c.lanes&g)!==0&&(wt(c,h),Gt(h,null,null,g),dt()),R=c.memoizedState,U=h.memoizedState,R.parent!==x?(R={parent:x,cache:x},h.memoizedState=R,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=R),Ce(h,Zn,x)):(x=U.cache,Ce(h,Zn,x),x!==R.cache&&Ai(h,[Zn],g,!0))),bi(c,h,h.pendingProps.children,g),h.child;case 29:throw h.pendingProps}throw Error(s(156,h.tag))}function Ce(c,h,g){mo?(D(Sr,h._currentValue),h._currentValue=g):(D(Sr,h._currentValue2),h._currentValue2=g)}function rt(c){var h=Sr.current;mo?c._currentValue=h:c._currentValue2=h,b(Sr)}function an(c,h,g){for(;c!==null;){var x=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,x!==null&&(x.childLanes|=h)):x!==null&&(x.childLanes&h)!==h&&(x.childLanes|=h),c===g)break;c=c.return}}function Ai(c,h,g,x){var R=c.child;for(R!==null&&(R.return=c);R!==null;){var U=R.dependencies;if(U!==null){var Z=R.child;U=U.firstContext;e:for(;U!==null;){var ae=U;U=R;for(var ve=0;ve<h.length;ve++)if(ae.context===h[ve]){U.lanes|=g,ae=U.alternate,ae!==null&&(ae.lanes|=g),an(U.return,g,c),x||(Z=null);break e}U=ae.next}}else if(R.tag===18){if(Z=R.return,Z===null)throw Error(s(341));Z.lanes|=g,U=Z.alternate,U!==null&&(U.lanes|=g),an(Z,g,c),Z=null}else Z=R.child;if(Z!==null)Z.return=R;else for(Z=R;Z!==null;){if(Z===c){Z=null;break}if(R=Z.sibling,R!==null){R.return=Z.return,Z=R;break}Z=Z.return}R=Z}}function Cn(c,h,g,x){c=null;for(var R=h,U=!1;R!==null;){if(!U){if((R.flags&524288)!==0)U=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var Z=R.alternate;if(Z===null)throw Error(s(387));if(Z=Z.memoizedProps,Z!==null){var ae=R.type;Xr(R.pendingProps.value,Z.value)||(c!==null?c.push(ae):c=[ae])}}else if(R===$u.current){if(Z=R.alternate,Z===null)throw Error(s(387));Z.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(c!==null?c.push(Kt):c=[Kt])}R=R.return}c!==null&&Ai(h,c,g,x),h.flags|=262144}function oi(c){for(c=c.firstContext;c!==null;){var h=c.context;if(!Xr(mo?h._currentValue:h._currentValue2,c.memoizedValue))return!0;c=c.next}return!1}function ls(c){$l=c,Li=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function gi(c){return fa($l,c)}function fr(c,h){return $l===null&&ls(c),fa(c,h)}function fa(c,h){var g=mo?h._currentValue:h._currentValue2;if(h={context:h,memoizedValue:g,next:null},Li===null){if(c===null)throw Error(s(308));Li=h,c.dependencies={lanes:0,firstContext:h},c.flags|=524288}else Li=Li.next=h;return g}function zo(){return{controller:new kv,data:new Map,refCount:0}}function ao(c){c.refCount--,c.refCount===0&&$o(Gc,function(){c.controller.abort()})}function Il(){var c=el.current;return c!==null?c:bn.pooledCache}function Vd(c,h){h===null?D(el,el.current):D(el,h.pool)}function tv(){var c=Il();return c===null?null:{parent:mo?Zn._currentValue:Zn._currentValue2,pool:c}}function Fr(c){c.flags|=4}function sg(c,h){if(c!==null&&c.child===h.child)return!1;if((h.flags&16)!==0)return!0;for(c=h.child;c!==null;){if((c.flags&13878)!==0||(c.subtreeFlags&13878)!==0)return!0;c=c.sibling}return!1}function zd(c,h,g,x){if(Ts)for(g=h.child;g!==null;){if(g.tag===5||g.tag===6)po(c,g.stateNode);else if(!(g.tag===4||bs&&g.tag===27)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else if(Gr)for(var R=h.child;R!==null;){if(R.tag===5){var U=R.stateNode;g&&x&&(U=Bg(U,R.type,R.memoizedProps)),po(c,U)}else if(R.tag===6)U=R.stateNode,g&&x&&(U=Fg(U,R.memoizedProps)),po(c,U);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)U=R.child,U!==null&&(U.return=R),zd(c,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function Nu(c,h,g,x){if(Gr)for(var R=h.child;R!==null;){if(R.tag===5){var U=R.stateNode;g&&x&&(U=Bg(U,R.type,R.memoizedProps)),Vg(c,U)}else if(R.tag===6)U=R.stateNode,g&&x&&(U=Fg(U,R.memoizedProps)),Vg(c,U);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)U=R.child,U!==null&&(U.return=R),Nu(c,R,!(R.memoizedProps!==null&&R.memoizedProps.mode==="manual"),!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function Ou(c,h){if(Gr&&sg(c,h)){c=h.stateNode;var g=c.containerInfo,x=op();Nu(x,h,!1,!1),c.pendingChildren=x,Fr(h),_v(g,x)}}function rg(c,h,g,x){if(Ts)c.memoizedProps!==x&&Fr(h);else if(Gr){var R=c.stateNode,U=c.memoizedProps;if((c=sg(c,h))||U!==x){var Z=ds.current;U=Pg(R,g,U,x,!c,null),U===R?h.stateNode=R:(Wo(U,g,x,Z)&&Fr(h),h.stateNode=U,c?zd(U,h,!1,!1):Fr(h))}else h.stateNode=R}}function Uu(c,h,g){if(mv(h,g)){if(c.flags|=16777216,!Yo(h,g))if(df())c.flags|=8192;else throw kc=_p,ty}else c.flags&=-16777217}function ag(c,h){if(Ov(h)){if(c.flags|=16777216,!Qg(h))if(df())c.flags|=8192;else throw kc=_p,ty}else c.flags&=-16777217}function lf(c,h){h!==null&&(c.flags|=4),c.flags&16384&&(h=c.tag!==22?I():536870912,c.lanes|=h,nl|=h)}function Rc(c,h){if(!Bn)switch(c.tailMode){case"hidden":h=c.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var x=null;g!==null;)g.alternate!==null&&(x=g),g=g.sibling;x===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:x.sibling=null}}function yi(c){var h=c.alternate!==null&&c.alternate.child===c.child,g=0,x=0;if(h)for(var R=c.child;R!==null;)g|=R.lanes|R.childLanes,x|=R.subtreeFlags&31457280,x|=R.flags&31457280,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)g|=R.lanes|R.childLanes,x|=R.subtreeFlags,x|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=x,c.childLanes=g,h}function nv(c,h,g){var x=h.pendingProps;switch(De(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(h),null;case 1:return yi(h),null;case 3:return g=h.stateNode,x=null,c!==null&&(x=c.memoizedState.cache),h.memoizedState.cache!==x&&(h.flags|=2048),rt(Zn),nt(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(c===null||c.child===null)&&(Zt(h)?Fr(h):c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Kr!==null&&(Fo(Kr),Kr=null))),Ou(c,h),yi(h),null;case 26:if(qr){g=h.type;var R=h.memoizedState;return c===null?(Fr(h),R!==null?(yi(h),ag(h,R)):(yi(h),Uu(h,g,x))):R?R!==c.memoizedState?(Fr(h),yi(h),ag(h,R)):(yi(h),h.flags&=-16777217):(Ts?c.memoizedProps!==x&&Fr(h):rg(c,h,g,x),yi(h),Uu(h,g,x)),null}case 27:if(bs){if(Le(h),g=ka.current,R=h.type,c!==null&&h.stateNode!=null)Ts?c.memoizedProps!==x&&Fr(h):rg(c,h,R,x);else{if(!x){if(h.stateNode===null)throw Error(s(166));return yi(h),null}c=ds.current,Zt(h)?pt(h,c):(c=Jg(R,x,g,c,!0),h.stateNode=c,Fr(h))}return yi(h),null}case 5:if(Le(h),g=h.type,c!==null&&h.stateNode!=null)rg(c,h,g,x);else{if(!x){if(h.stateNode===null)throw Error(s(166));return yi(h),null}c=ds.current,Zt(h)?pt(h,c):(R=Ag(g,x,ka.current,c,h),zd(R,h,!1,!1),h.stateNode=R,Wo(R,g,x,c)&&Fr(h))}return yi(h),Uu(h,h.type,h.pendingProps),null;case 6:if(c&&h.stateNode!=null)g=c.memoizedProps,Ts?g!==x&&Fr(h):Gr&&(g!==x?(h.stateNode=tp(x,ka.current,ds.current,h),Fr(h)):h.stateNode=c.stateNode);else{if(typeof x!="string"&&h.stateNode===null)throw Error(s(166));if(c=ka.current,g=ds.current,Zt(h)){if(!Zs)throw Error(s(176));if(c=h.stateNode,g=h.memoizedProps,x=null,R=Ps,R!==null)switch(R.tag){case 27:case 5:x=R.memoizedProps}wv(c,g,h,x)||at(h)}else h.stateNode=tp(x,c,g,h)}return yi(h),null;case 13:if(x=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(R=Zt(h),x!==null&&x.dehydrated!==null){if(c===null){if(!R)throw Error(s(318));if(!Zs)throw Error(s(344));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(s(317));Yu(R,h)}else An(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;yi(h),R=!1}else Kr!==null&&(Fo(Kr),Kr=null),R=!0;if(!R)return h.flags&256?(Ci(h),h):(Ci(h),null)}if(Ci(h),(h.flags&128)!==0)return h.lanes=g,h;if(g=x!==null,c=c!==null&&c.memoizedState!==null,g){x=h.child,R=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(R=x.alternate.memoizedState.cachePool.pool);var U=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(U=x.memoizedState.cachePool.pool),U!==R&&(x.flags|=2048)}return g!==c&&g&&(h.child.flags|=8192),lf(h,h.updateQueue),yi(h),null;case 4:return nt(),Ou(c,h),c===null&&Rg(h.stateNode.containerInfo),yi(h),null;case 10:return rt(h.type),yi(h),null;case 19:if(b(Ki),R=h.memoizedState,R===null)return yi(h),null;if(x=(h.flags&128)!==0,U=R.rendering,U===null)if(x)Rc(R,!1);else{if(Un!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(U=$i(c),U!==null){for(h.flags|=128,Rc(R,!1),c=U.updateQueue,h.updateQueue=c,lf(h,c),h.subtreeFlags=0,c=g,g=h.child;g!==null;)jo(g,c),g=g.sibling;return D(Ki,Ki.current&1|2),h.child}c=c.sibling}R.tail!==null&&As()>wi&&(h.flags|=128,x=!0,Rc(R,!1),h.lanes=4194304)}else{if(!x)if(c=$i(U),c!==null){if(h.flags|=128,x=!0,c=c.updateQueue,h.updateQueue=c,lf(h,c),Rc(R,!0),R.tail===null&&R.tailMode==="hidden"&&!U.alternate&&!Bn)return yi(h),null}else 2*As()-R.renderingStartTime>wi&&g!==536870912&&(h.flags|=128,x=!0,Rc(R,!1),h.lanes=4194304);R.isBackwards?(U.sibling=h.child,h.child=U):(c=R.last,c!==null?c.sibling=U:h.child=U,R.last=U)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=As(),h.sibling=null,c=Ki.current,D(Ki,x?c&1|2:c&1),h):(yi(h),null);case 22:case 23:return Ci(h),Da(),x=h.memoizedState!==null,c!==null?c.memoizedState!==null!==x&&(h.flags|=8192):x&&(h.flags|=8192),x?(g&536870912)!==0&&(h.flags&128)===0&&(yi(h),h.subtreeFlags&6&&(h.flags|=8192)):yi(h),g=h.updateQueue,g!==null&&lf(h,g.retryQueue),g=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==g&&(h.flags|=2048),c!==null&&b(el),null;case 24:return g=null,c!==null&&(g=c.memoizedState.cache),h.memoizedState.cache!==g&&(h.flags|=2048),rt(Zn),yi(h),null;case 25:return null}throw Error(s(156,h.tag))}function iv(c,h){switch(De(h),h.tag){case 1:return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return rt(Zn),nt(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 26:case 27:case 5:return Le(h),null;case 13:if(Ci(h),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(s(340));An()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return b(Ki),null;case 4:return nt(),null;case 10:return rt(h.type),null;case 22:case 23:return Ci(h),Da(),c!==null&&b(el),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 24:return rt(Zn),null;case 25:return null;default:return null}}function og(c,h){switch(De(h),h.tag){case 3:rt(Zn),nt();break;case 26:case 27:case 5:Le(h);break;case 4:nt();break;case 13:Ci(h);break;case 19:b(Ki);break;case 10:rt(h.type);break;case 22:case 23:Ci(h),Da(),c!==null&&b(el);break;case 24:rt(Zn)}}function cf(c,h){try{var g=h.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var R=x.next;g=R;do{if((g.tag&c)===c){x=void 0;var U=g.create,Z=g.inst;x=U(),Z.destroy=x}g=g.next}while(g!==R)}}catch(ae){Mn(h,h.return,ae)}}function Dl(c,h,g){try{var x=h.updateQueue,R=x!==null?x.lastEffect:null;if(R!==null){var U=R.next;x=U;do{if((x.tag&c)===c){var Z=x.inst,ae=Z.destroy;if(ae!==void 0){Z.destroy=void 0,R=h;var ve=g;try{ae()}catch(He){Mn(R,ve,He)}}}x=x.next}while(x!==U)}}catch(He){Mn(h,h.return,He)}}function sv(c){var h=c.updateQueue;if(h!==null){var g=c.stateNode;try{tt(h,g)}catch(x){Mn(c,c.return,x)}}}function rv(c,h,g){g.props=hr(c.type,c.memoizedProps),g.state=c.memoizedState;try{g.componentWillUnmount()}catch(x){Mn(c,h,x)}}function Cc(c,h){try{var g=c.ref;if(g!==null){var x=c.stateNode;switch(c.tag){case 26:case 27:case 5:var R=Wu(x);break;default:R=x}typeof g=="function"?c.refCleanup=g(R):g.current=R}}catch(U){Mn(c,h,U)}}function _i(c,h){var g=c.ref,x=c.refCleanup;if(g!==null)if(typeof x=="function")try{x()}catch(R){Mn(c,h,R)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(R){Mn(c,h,R)}else g.current=null}function Lu(c){var h=c.type,g=c.memoizedProps,x=c.stateNode;try{Wx(x,h,g,c)}catch(R){Mn(c,c.return,R)}}function lg(c,h,g){try{Ng(c.stateNode,c.type,g,h,c)}catch(x){Mn(c,c.return,x)}}function cg(c){return c.tag===5||c.tag===3||(qr?c.tag===26:!1)||(bs?c.tag===27:!1)||c.tag===4}function Bd(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||cg(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&(!bs||c.tag!==27)&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Fd(c,h,g){var x=c.tag;if(x===5||x===6)c=c.stateNode,h?Ug(g,c,h):gv(g,c);else if(!(x===4||bs&&x===27)&&(c=c.child,c!==null))for(Fd(c,h,g),c=c.sibling;c!==null;)Fd(c,h,g),c=c.sibling}function Pu(c,h,g){var x=c.tag;if(x===5||x===6)c=c.stateNode,h?Og(g,c,h):Dg(g,c);else if(!(x===4||bs&&x===27)&&(c=c.child,c!==null))for(Pu(c,h,g),c=c.sibling;c!==null;)Pu(c,h,g),c=c.sibling}function av(c,h,g){c=c.containerInfo;try{zg(c,g)}catch(x){Mn(h,h.return,x)}}function Vu(c,h){for(ql(c.containerInfo),Pi=h;Pi!==null;)if(c=Pi,h=c.child,(c.subtreeFlags&1028)!==0&&h!==null)h.return=c,Pi=h;else for(;Pi!==null;){c=Pi;var g=c.alternate;switch(h=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&g!==null){h=void 0;var x=c,R=g.memoizedProps;g=g.memoizedState;var U=x.stateNode;try{var Z=hr(x.type,R,x.elementType===x.type);h=U.getSnapshotBeforeUpdate(Z,g),U.__reactInternalSnapshotBeforeUpdate=h}catch(ae){Mn(x,x.return,ae)}}break;case 3:(h&1024)!==0&&Ts&&ap(c.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(s(163))}if(h=c.sibling,h!==null){h.return=c.return,Pi=h;break}Pi=c.return}return Z=jc,jc=!1,Z}function Hd(c,h,g){var x=g.flags;switch(g.tag){case 0:case 11:case 15:oo(c,g),x&4&&cf(5,g);break;case 1:if(oo(c,g),x&4)if(c=g.stateNode,h===null)try{c.componentDidMount()}catch(ae){Mn(g,g.return,ae)}else{var R=hr(g.type,h.memoizedProps);h=h.memoizedState;try{c.componentDidUpdate(R,h,c.__reactInternalSnapshotBeforeUpdate)}catch(ae){Mn(g,g.return,ae)}}x&64&&sv(g),x&512&&Cc(g,g.return);break;case 3:if(oo(c,g),x&64&&(x=g.updateQueue,x!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=Wu(g.child.stateNode);break;case 1:c=g.child.stateNode}try{tt(x,c)}catch(ae){Mn(g,g.return,ae)}}break;case 26:if(qr){oo(c,g),x&512&&Cc(g,g.return);break}case 27:case 5:oo(c,g),h===null&&x&4&&Lu(g),x&512&&Cc(g,g.return);break;case 12:oo(c,g);break;case 13:oo(c,g),x&4&&Nl(c,g);break;case 22:if(R=g.memoizedState!==null||ns,!R){h=h!==null&&h.memoizedState!==null||Mi;var U=ns,Z=Mi;ns=R,(Mi=h)&&!Z?Ul(c,g,(g.subtreeFlags&8772)!==0):oo(c,g),ns=U,Mi=Z}x&512&&(g.memoizedProps.mode==="manual"?Cc(g,g.return):_i(g,g.return));break;default:oo(c,g)}}function zu(c){var h=c.alternate;h!==null&&(c.alternate=null,zu(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&Cg(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Hr(c,h,g){for(g=g.child;g!==null;)kd(c,h,g),g=g.sibling}function kd(c,h,g){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(Ju,g)}catch{}switch(g.tag){case 26:if(qr){Mi||_i(g,h),Hr(c,h,g),g.memoizedState?qg(g.memoizedState):g.stateNode&&Yg(g.stateNode);break}case 27:if(bs){Mi||_i(g,h);var x=Hi,R=Er;Hi=g.stateNode,Hr(c,h,g),Uv(g.stateNode),Hi=x,Er=R;break}case 5:Mi||_i(g,h);case 6:if(Ts){if(x=Hi,R=Er,Hi=null,Hr(c,h,g),Hi=x,Er=R,Hi!==null)if(Er)try{zi(Hi,g.stateNode)}catch(U){Mn(g,h,U)}else try{Js(Hi,g.stateNode)}catch(U){Mn(g,h,U)}}else Hr(c,h,g);break;case 18:Ts&&Hi!==null&&(Er?kg(Hi,g.stateNode):Cv(Hi,g.stateNode));break;case 4:Ts?(x=Hi,R=Er,Hi=g.stateNode.containerInfo,Er=!0,Hr(c,h,g),Hi=x,Er=R):(Gr&&av(g.stateNode,g,op()),Hr(c,h,g));break;case 0:case 11:case 14:case 15:Mi||Dl(2,g,h),Mi||Dl(4,g,h),Hr(c,h,g);break;case 1:Mi||(_i(g,h),x=g.stateNode,typeof x.componentWillUnmount=="function"&&rv(g,h,x)),Hr(c,h,g);break;case 21:Hr(c,h,g);break;case 22:Mi||_i(g,h),Mi=(x=Mi)||g.memoizedState!==null,Hr(c,h,g),Mi=x;break;default:Hr(c,h,g)}}function Nl(c,h){if(Zs&&h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{hp(c)}catch(g){Mn(h,h.return,g)}}function Bu(c){switch(c.tag){case 13:case 19:var h=c.stateNode;return h===null&&(h=c.stateNode=new sh),h;case 22:return c=c.stateNode,h=c._retryCache,h===null&&(h=c._retryCache=new sh),h;default:throw Error(s(435,c.tag))}}function uf(c,h){var g=Bu(c);h.forEach(function(x){var R=pg.bind(null,c,x);g.has(x)||(g.add(x),x.then(R,R))})}function Ys(c,h){var g=h.deletions;if(g!==null)for(var x=0;x<g.length;x++){var R=g[x],U=c,Z=h;if(Ts){var ae=Z;e:for(;ae!==null;){switch(ae.tag){case 27:case 5:Hi=ae.stateNode,Er=!1;break e;case 3:Hi=ae.stateNode.containerInfo,Er=!0;break e;case 4:Hi=ae.stateNode.containerInfo,Er=!0;break e}ae=ae.return}if(Hi===null)throw Error(s(160));kd(U,Z,R),Hi=null,Er=!1}else kd(U,Z,R);U=R.alternate,U!==null&&(U.return=null),R.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)Ol(h,c),h=h.sibling}function Ol(c,h){var g=c.alternate,x=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Ys(h,c),dr(c),x&4&&(Dl(3,c,c.return),cf(3,c),Dl(5,c,c.return));break;case 1:Ys(h,c),dr(c),x&512&&(Mi||g===null||_i(g,g.return)),x&64&&ns&&(c=c.updateQueue,c!==null&&(x=c.callbacks,x!==null&&(g=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=g===null?x:g.concat(x))));break;case 26:if(qr){var R=$s;Ys(h,c),dr(c),x&512&&(Mi||g===null||_i(g,g.return)),x&4&&(x=g!==null?g.memoizedState:null,h=c.memoizedState,g===null?h===null?c.stateNode===null?c.stateNode=Xg(R,c.type,c.memoizedProps,c):Wg(R,c.type,c.stateNode):c.stateNode=jg(R,h,c.memoizedProps):x!==h?(x===null?g.stateNode!==null&&Yg(g.stateNode):qg(x),h===null?Wg(R,c.type,c.stateNode):jg(R,h,c.memoizedProps)):h===null&&c.stateNode!==null&&lg(c,c.memoizedProps,g.memoizedProps));break}case 27:if(bs&&x&4&&c.alternate===null){R=c.stateNode;var U=c.memoizedProps;try{Zx(R),Jx(c.type,U,R,c)}catch(ct){Mn(c,c.return,ct)}}case 5:if(Ys(h,c),dr(c),x&512&&(Mi||g===null||_i(g,g.return)),Ts){if(c.flags&32){h=c.stateNode;try{Tf(h)}catch(ct){Mn(c,c.return,ct)}}x&4&&c.stateNode!=null&&(h=c.memoizedProps,lg(c,h,g!==null?g.memoizedProps:h)),x&1024&&(ec=!0)}break;case 6:if(Ys(h,c),dr(c),x&4&&Ts){if(c.stateNode===null)throw Error(s(162));x=c.memoizedProps,g=g!==null?g.memoizedProps:x,h=c.stateNode;try{yv(h,g,x)}catch(ct){Mn(c,c.return,ct)}}break;case 3:if(qr?(Kg(),R=$s,$s=fp(h.containerInfo),Ys(h,c),$s=R):Ys(h,c),dr(c),x&4){if(Ts&&Zs&&g!==null&&g.memoizedState.isDehydrated)try{up(h.containerInfo)}catch(ct){Mn(c,c.return,ct)}if(Gr){x=h.containerInfo,g=h.pendingChildren;try{zg(x,g)}catch(ct){Mn(c,c.return,ct)}}}ec&&(ec=!1,ug(c));break;case 4:qr?(g=$s,$s=fp(c.stateNode.containerInfo),Ys(h,c),dr(c),$s=g):(Ys(h,c),dr(c)),x&4&&Gr&&av(c.stateNode,c,c.stateNode.pendingChildren);break;case 12:Ys(h,c),dr(c);break;case 13:Ys(h,c),dr(c),c.child.flags&8192&&c.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(xo=As()),x&4&&(x=c.updateQueue,x!==null&&(c.updateQueue=null,uf(c,x)));break;case 22:x&512&&(Mi||g===null||_i(g,g.return)),R=c.memoizedState!==null;var Z=g!==null&&g.memoizedState!==null,ae=ns,ve=Mi;if(ns=ae||R,Mi=ve||Z,Ys(h,c),Mi=ve,ns=ae,dr(c),h=c.stateNode,h._current=c,h._visibility&=-3,h._visibility|=h._pendingVisibility&2,x&8192&&(h._visibility=R?h._visibility&-2:h._visibility|1,R&&(h=ns||Mi,g===null||Z||h||Fu(c)),Ts&&(c.memoizedProps===null||c.memoizedProps.mode!=="manual"))){e:if(g=null,Ts)for(h=c;;){if(h.tag===5||qr&&h.tag===26||bs&&h.tag===27){if(g===null){Z=g=h;try{U=Z.stateNode,R?bf(U):Lg(Z.stateNode,Z.memoizedProps)}catch(ct){Mn(Z,Z.return,ct)}}}else if(h.tag===6){if(g===null){Z=h;try{var He=Z.stateNode;R?rp(He):Ko(He,Z.memoizedProps)}catch(ct){Mn(Z,Z.return,ct)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;g===h&&(g=null),h=h.return}g===h&&(g=null),h.sibling.return=h.return,h=h.sibling}}x&4&&(x=c.updateQueue,x!==null&&(g=x.retryQueue,g!==null&&(x.retryQueue=null,uf(c,g))));break;case 19:Ys(h,c),dr(c),x&4&&(x=c.updateQueue,x!==null&&(c.updateQueue=null,uf(c,x)));break;case 21:break;default:Ys(h,c),dr(c)}}function dr(c){var h=c.flags;if(h&2){try{if(Ts&&(!bs||c.tag!==27)){e:{for(var g=c.return;g!==null;){if(cg(g)){var x=g;break e}g=g.return}throw Error(s(160))}switch(x.tag){case 27:if(bs){var R=x.stateNode,U=Bd(c);Pu(c,U,R);break}case 5:var Z=x.stateNode;x.flags&32&&(Tf(Z),x.flags&=-33);var ae=Bd(c);Pu(c,ae,Z);break;case 3:case 4:var ve=x.stateNode.containerInfo,He=Bd(c);Fd(c,He,ve);break;default:throw Error(s(161))}}}catch(ct){Mn(c,c.return,ct)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function ug(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var h=c;ug(h),h.tag===5&&h.flags&1024&&si(h.stateNode),c=c.sibling}}function oo(c,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Hd(c,h.alternate,h),h=h.sibling}function Fu(c){for(c=c.child;c!==null;){var h=c;switch(h.tag){case 0:case 11:case 14:case 15:Dl(4,h,h.return),Fu(h);break;case 1:_i(h,h.return);var g=h.stateNode;typeof g.componentWillUnmount=="function"&&rv(h,h.return,g),Fu(h);break;case 26:case 27:case 5:_i(h,h.return),Fu(h);break;case 22:_i(h,h.return),h.memoizedState===null&&Fu(h);break;default:Fu(h)}c=c.sibling}}function Ul(c,h,g){for(g=g&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var x=h.alternate,R=c,U=h,Z=U.flags;switch(U.tag){case 0:case 11:case 15:Ul(R,U,g),cf(4,U);break;case 1:if(Ul(R,U,g),x=U,R=x.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(He){Mn(x,x.return,He)}if(x=U,R=x.updateQueue,R!==null){var ae=x.stateNode;try{var ve=R.shared.hiddenCallbacks;if(ve!==null)for(R.shared.hiddenCallbacks=null,R=0;R<ve.length;R++)he(ve[R],ae)}catch(He){Mn(x,x.return,He)}}g&&Z&64&&sv(U),Cc(U,U.return);break;case 26:case 27:case 5:Ul(R,U,g),g&&x===null&&Z&4&&Lu(U),Cc(U,U.return);break;case 12:Ul(R,U,g);break;case 13:Ul(R,U,g),g&&Z&4&&Nl(R,U);break;case 22:U.memoizedState===null&&Ul(R,U,g),Cc(U,U.return);break;default:Ul(R,U,g)}h=h.sibling}}function hg(c,h){var g=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),c=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(c=h.memoizedState.cachePool.pool),c!==g&&(c!=null&&c.refCount++,g!=null&&ao(g))}function Gd(c,h){c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&ao(c))}function Bo(c,h,g,x){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)jd(c,h,g,x),h=h.sibling}function jd(c,h,g,x){var R=h.flags;switch(h.tag){case 0:case 11:case 15:Bo(c,h,g,x),R&2048&&cf(9,h);break;case 3:Bo(c,h,g,x),R&2048&&(c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&ao(c)));break;case 12:if(R&2048){Bo(c,h,g,x),c=h.stateNode;try{var U=h.memoizedProps,Z=U.id,ae=U.onPostCommit;typeof ae=="function"&&ae(Z,h.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(ve){Mn(h,h.return,ve)}}else Bo(c,h,g,x);break;case 23:break;case 22:U=h.stateNode,h.memoizedState!==null?U._visibility&4?Bo(c,h,g,x):Ll(c,h):U._visibility&4?Bo(c,h,g,x):(U._visibility|=4,Ns(c,h,g,x,(h.subtreeFlags&10256)!==0)),R&2048&&hg(h.alternate,h);break;case 24:Bo(c,h,g,x),R&2048&&Gd(h.alternate,h);break;default:Bo(c,h,g,x)}}function Ns(c,h,g,x,R){for(R=R&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var U=c,Z=h,ae=g,ve=x,He=Z.flags;switch(Z.tag){case 0:case 11:case 15:Ns(U,Z,ae,ve,R),cf(8,Z);break;case 23:break;case 22:var ct=Z.stateNode;Z.memoizedState!==null?ct._visibility&4?Ns(U,Z,ae,ve,R):Ll(U,Z):(ct._visibility|=4,Ns(U,Z,ae,ve,R)),R&&He&2048&&hg(Z.alternate,Z);break;case 24:Ns(U,Z,ae,ve,R),R&&He&2048&&Gd(Z.alternate,Z);break;default:Ns(U,Z,ae,ve,R)}h=h.sibling}}function Ll(c,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var g=c,x=h,R=x.flags;switch(x.tag){case 22:Ll(g,x),R&2048&&hg(x.alternate,x);break;case 24:Ll(g,x),R&2048&&Gd(x.alternate,x);break;default:Ll(g,x)}h=h.sibling}}function cs(c){if(c.subtreeFlags&qc)for(c=c.child;c!==null;)Ic(c),c=c.sibling}function Ic(c){switch(c.tag){case 26:cs(c),c.flags&qc&&(c.memoizedState!==null?Zg($s,c.memoizedState,c.memoizedProps):Di(c.type,c.memoizedProps));break;case 5:cs(c),c.flags&qc&&Di(c.type,c.memoizedProps);break;case 3:case 4:if(qr){var h=$s;$s=fp(c.stateNode.containerInfo),cs(c),$s=h}else cs(c);break;case 22:c.memoizedState===null&&(h=c.alternate,h!==null&&h.memoizedState!==null?(h=qc,qc=16777216,cs(c),qc=h):cs(c));break;default:cs(c)}}function qd(c){var h=c.alternate;if(h!==null&&(c=h.child,c!==null)){h.child=null;do h=c.sibling,c.sibling=null,c=h;while(c!==null)}}function Pl(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var x=h[g];Pi=x,Vl(x,c)}qd(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)hf(c),c=c.sibling}function hf(c){switch(c.tag){case 0:case 11:case 15:Pl(c),c.flags&2048&&Dl(9,c,c.return);break;case 3:Pl(c);break;case 12:Pl(c);break;case 22:var h=c.stateNode;c.memoizedState!==null&&h._visibility&4&&(c.return===null||c.return.tag!==13)?(h._visibility&=-5,Hu(c)):Pl(c);break;default:Pl(c)}}function Hu(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var x=h[g];Pi=x,Vl(x,c)}qd(c)}for(c=c.child;c!==null;){switch(h=c,h.tag){case 0:case 11:case 15:Dl(8,h,h.return),Hu(h);break;case 22:g=h.stateNode,g._visibility&4&&(g._visibility&=-5,Hu(h));break;default:Hu(h)}c=c.sibling}}function Vl(c,h){for(;Pi!==null;){var g=Pi;switch(g.tag){case 0:case 11:case 15:Dl(8,g,h);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var x=g.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:ao(g.memoizedState.cache)}if(x=g.child,x!==null)x.return=g,Pi=x;else e:for(g=c;Pi!==null;){x=Pi;var R=x.sibling,U=x.return;if(zu(x),x===g){Pi=null;break e}if(R!==null){R.return=U,Pi=R;break e}Pi=U}}}function Xd(c){var h=wg(c);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(s(364));return h}if(c=Bc(c),c===null)throw Error(s(362));return c.stateNode.current}function ku(c,h){var g=c.tag;switch(h.$$typeof){case Bf:if(c.type===h.value)return!0;break;case Tp:e:{for(h=h.value,c=[c,0],g=0;g<c.length;){var x=c[g++],R=x.tag,U=c[g++],Z=h[U];if(R!==5&&R!==26&&R!==27||!yo(x)){for(;Z!=null&&ku(x,Z);)U++,Z=h[U];if(U===h.length){h=!0;break e}else for(x=x.child;x!==null;)c.push(x,U),x=x.sibling}}h=!1}return h;case bp:if((g===5||g===26||g===27)&&Xx(c.stateNode,h.value))return!0;break;case Jn:if((g===5||g===6||g===26||g===27)&&(c=xf(c),c!==null&&0<=c.indexOf(h.value)))return!0;break;case On:if((g===5||g===26||g===27)&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function zl(c){switch(c.$$typeof){case Bf:return"<"+(l(c.value)||"Unknown")+">";case Tp:return":has("+(zl(c)||"")+")";case bp:return'[role="'+c.value+'"]';case Jn:return'"'+c.value+'"';case On:return'[data-testname="'+c.value+'"]';default:throw Error(s(365))}}function ov(c,h){var g=[];c=[c,0];for(var x=0;x<c.length;){var R=c[x++],U=R.tag,Z=c[x++],ae=h[Z];if(U!==5&&U!==26&&U!==27||!yo(R)){for(;ae!=null&&ku(R,ae);)Z++,ae=h[Z];if(Z===h.length)g.push(R);else for(R=R.child;R!==null;)c.push(R,Z),R=R.sibling}}return g}function Ks(c,h){if(!go)throw Error(s(363));c=Xd(c),c=ov(c,h),h=[],c=Array.from(c);for(var g=0;g<c.length;){var x=c[g++],R=x.tag;if(R===5||R===26||R===27)yo(x)||h.push(x.stateNode);else for(x=x.child;x!==null;)c.push(x),x=x.sibling}return h}function Qs(){if((Bt&2)!==0&&En!==0)return En&-En;if(jt.T!==null){var c=vr;return c!==0?c:Ze()}return pa()}function lo(){xr===0&&(xr=(En&536870912)===0||Bn?L():536870912);var c=Jr.current;return c!==null&&(c.flags|=32),xr}function Os(c,h,g){(c===bn&&ri===2||c.cancelPendingCommit!==null)&&(za(c,0),Va(c,En,xr,!1)),F(c,g),((Bt&2)===0||c!==bn)&&(c===bn&&((Bt&2)===0&&(qa|=g),Un===4&&Va(c,En,xr,!1)),Qe(c))}function ff(c,h,g){if((Bt&6)!==0)throw Error(s(327));var x=!g&&(h&60)===0&&(h&c.expiredLanes)===0||G(c,h),R=x?ho(c,h):co(c,h,!0),U=x;do{if(R===0){$r&&!x&&Va(c,h,0,!1);break}else if(R===6)Va(c,h,0,!$n);else{if(g=c.current.alternate,U&&!lv(g)){R=co(c,h,!1),U=!1;continue}if(R===2){if(U=h,c.errorRecoveryDisabledLanes&U)var Z=0;else Z=c.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){h=Z;e:{var ae=c;R=rh;var ve=Zs&&ae.current.memoizedState.isDehydrated;if(ve&&(za(ae,Z).flags|=256),Z=co(ae,Z,!1),Z!==2){if(tl&&!ve){ae.errorRecoveryDisabledLanes|=U,qa|=U,R=4;break e}U=ta,ta=R,U!==null&&Fo(U)}R=Z}if(U=!1,R!==2)continue}}if(R===1){za(c,0),Va(c,h,0,!0);break}e:{switch(x=c,R){case 0:case 1:throw Error(s(345));case 4:if((h&4194176)===h){Va(x,h,xr,!$n);break e}break;case 2:ta=null;break;case 3:case 5:break;default:throw Error(s(329))}if(x.finishedWork=g,x.finishedLanes=h,(h&62914560)===h&&(U=xo+300-As(),10<U)){if(Va(x,h,xr,!$n),j(x,0)!==0)break e;x.timeoutHandle=Mg(Wd.bind(null,x,g,ta,Xa,ah,h,xr,qa,nl,$n,2,-0,0),U);break e}Wd(x,g,ta,Xa,ah,h,xr,qa,nl,$n,0,-0,0)}}break}while(!0);Qe(c)}function Fo(c){ta===null?ta=c:ta.push.apply(ta,c)}function Wd(c,h,g,x,R,U,Z,ae,ve,He,ct,yt,Et){var nn=h.subtreeFlags;if((nn&8192||(nn&16785408)===16785408)&&(jr(),Ic(h),h=np(),h!==null)){c.cancelPendingCommit=h(hi.bind(null,c,g,x,R,Z,ae,ve,1,yt,Et)),Va(c,U,Z,!He);return}hi(c,g,x,R,Z,ae,ve,ct,yt,Et)}function lv(c){for(var h=c;;){var g=h.tag;if((g===0||g===11||g===15)&&h.flags&16384&&(g=h.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var x=0;x<g.length;x++){var R=g[x],U=R.getSnapshot;R=R.value;try{if(!Xr(U(),R))return!1}catch{return!1}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Va(c,h,g,x){h&=~Bs,h&=~qa,c.suspendedLanes|=h,c.pingedLanes&=~h,x&&(c.warmLanes|=h),x=c.expirationTimes;for(var R=h;0<R;){var U=31-yr(R),Z=1<<U;x[U]=-1,R&=~Z}g!==0&&q(c,g,h)}function fg(){return(Bt&6)===0?(Vt(0),!1):!0}function pr(){if(on!==null){if(ri===0)var c=on.return;else c=on,Li=$l=null,Q(c),vo=null,ya=0,c=on;for(;c!==null;)og(c.alternate,c),c=c.return;on=null}}function za(c,h){c.finishedWork=null,c.finishedLanes=0;var g=c.timeoutHandle;g!==zc&&(c.timeoutHandle=zc,Ef(g)),g=c.cancelPendingCommit,g!==null&&(c.cancelPendingCommit=null,g()),pr(),bn=c,on=g=Us(c.current,null),En=h,ri=0,ki=null,$n=!1,$r=G(c,h),tl=!1,nl=xr=Bs=qa=ea=Un=0,ta=rh=null,ah=!1,(h&8)!==0&&(h|=h&32);var x=c.entangledLanes;if(x!==0)for(c=c.entanglements,x&=h;0<x;){var R=31-yr(x),U=1<<R;h|=c[R],x&=~U}return ja=h,qe(),g}function Dc(c,h){dn=null,jt.H=Fn,h===ni?(h=vt(),ri=3):h===ty?(h=vt(),ri=4):ri=h===Hv?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,ki=h,on===null&&(Un=1,wl(c,pe(h,c.current)))}function df(){var c=Jr.current;return c===null?!0:(En&4194176)===En?_a===null:(En&62914560)===En||(En&536870912)!==0?c===_a:!1}function Gu(){var c=jt.H;return jt.H=Fn,c===null?Fn:c}function kr(){var c=jt.A;return jt.A=xp,c}function mr(){Un=4,$n||(En&4194176)!==En&&Jr.current!==null||($r=!0),(ea&134217727)===0&&(qa&134217727)===0||bn===null||Va(bn,En,xr,!1)}function co(c,h,g){var x=Bt;Bt|=2;var R=Gu(),U=kr();(bn!==c||En!==h)&&(Xa=null,za(c,h)),h=!1;var Z=Un;e:do try{if(ri!==0&&on!==null){var ae=on,ve=ki;switch(ri){case 8:pr(),Z=6;break e;case 3:case 2:case 6:Jr.current===null&&(h=!0);var He=ri;if(ri=0,ki=null,Bl(c,ae,ve,He),g&&$r){Z=0;break e}break;default:He=ri,ri=0,ki=null,Bl(c,ae,ve,He)}}uo(),Z=Un;break}catch(ct){Dc(c,ct)}while(!0);return h&&c.shellSuspendCounter++,Li=$l=null,Bt=x,jt.H=R,jt.A=U,on===null&&(bn=null,En=0,qe()),Z}function uo(){for(;on!==null;)dg(on)}function ho(c,h){var g=Bt;Bt|=2;var x=Gu(),R=kr();bn!==c||En!==h?(Xa=null,wi=As()+500,za(c,h)):$r=G(c,h);e:do try{if(ri!==0&&on!==null){h=on;var U=ki;t:switch(ri){case 1:ri=0,ki=null,Bl(c,h,U,1);break;case 2:if(ft(U)){ri=0,ki=null,Yd(h);break}h=function(){ri===2&&bn===c&&(ri=7),Qe(c)},U.then(h,h);break e;case 3:ri=7;break e;case 4:ri=5;break e;case 7:ft(U)?(ri=0,ki=null,Yd(h)):(ri=0,ki=null,Bl(c,h,U,7));break;case 5:var Z=null;switch(on.tag){case 26:Z=on.memoizedState;case 5:case 27:var ae=on,ve=ae.type,He=ae.pendingProps;if(Z?Qg(Z):Yo(ve,He)){ri=0,ki=null;var ct=ae.sibling;if(ct!==null)on=ct;else{var yt=ae.return;yt!==null?(on=yt,pf(yt)):on=null}break t}}ri=0,ki=null,Bl(c,h,U,5);break;case 6:ri=0,ki=null,Bl(c,h,U,6);break;case 8:pr(),Un=6;break e;default:throw Error(s(462))}}Ho();break}catch(Et){Dc(c,Et)}while(!0);return Li=$l=null,jt.H=x,jt.A=R,Bt=g,on!==null?0:(bn=null,En=0,qe(),Un)}function Ho(){for(;on!==null&&!Pv();)dg(on)}function dg(c){var h=xe(c.alternate,c,ja);c.memoizedProps=c.pendingProps,h===null?pf(c):on=h}function Yd(c){var h=c,g=h.alternate;switch(h.tag){case 15:case 0:h=sf(g,h,h.pendingProps,h.type,void 0,En);break;case 11:h=sf(g,h,h.pendingProps,h.type.render,h.ref,En);break;case 5:Q(h);default:og(g,h),h=on=jo(h,ja),h=xe(g,h,ja)}c.memoizedProps=c.pendingProps,h===null?pf(c):on=h}function Bl(c,h,g,x){Li=$l=null,Q(h),vo=null,ya=0;var R=h.return;try{if($h(c,R,h,g,En)){Un=1,wl(c,pe(g,c.current)),on=null;return}}catch(U){if(R!==null)throw on=R,U;Un=1,wl(c,pe(g,c.current)),on=null;return}h.flags&32768?(Bn||x===1?c=!0:$r||(En&536870912)!==0?c=!1:($n=c=!0,(x===2||x===3||x===6)&&(x=Jr.current,x!==null&&x.tag===13&&(x.flags|=16384))),us(h,c)):pf(h)}function pf(c){var h=c;do{if((h.flags&32768)!==0){us(h,$n);return}c=h.return;var g=nv(h.alternate,h,ja);if(g!==null){on=g;return}if(h=h.sibling,h!==null){on=h;return}on=h=c}while(h!==null);Un===0&&(Un=5)}function us(c,h){do{var g=iv(c.alternate,c);if(g!==null){g.flags&=32767,on=g;return}if(g=c.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!h&&(c=c.sibling,c!==null)){on=c;return}on=c=g}while(c!==null);Un=6,on=null}function hi(c,h,g,x,R,U,Z,ae,ve,He){var ct=jt.T,yt=ts();try{Ls(2),jt.T=null,In(c,h,g,x,yt,R,U,Z,ae,ve,He)}finally{jt.T=ct,Ls(yt)}}function In(c,h,g,x,R,U,Z,ae){do hs();while(il!==null);if((Bt&6)!==0)throw Error(s(327));var ve=c.finishedWork;if(x=c.finishedLanes,ve===null)return null;if(c.finishedWork=null,c.finishedLanes=0,ve===c.current)throw Error(s(177));c.callbackNode=null,c.callbackPriority=0,c.cancelPendingCommit=null;var He=ve.lanes|ve.childLanes;if(He|=eh,Y(c,x,He,U,Z,ae),c===bn&&(on=bn=null,En=0),(ve.subtreeFlags&10256)===0&&(ve.flags&10256)===0||Sa||(Sa=!0,Ap=He,Wc=g,mf(pp,function(){return hs(),null})),g=(ve.flags&15990)!==0,(ve.subtreeFlags&15990)!==0||g?(g=jt.T,jt.T=null,U=ts(),Ls(2),Z=Bt,Bt|=4,Vu(c,ve),Ol(ve,c),bg(c.containerInfo),c.current=ve,Hd(c,ve.alternate,ve),Vv(),Bt=Z,Ls(U),jt.T=g):c.current=ve,Sa?(Sa=!1,il=c,Xc=x):ko(c,He),He=c.pendingLanes,He===0&&(na=null),X(ve.stateNode),Qe(c),h!==null)for(R=c.onRecoverableError,ve=0;ve<h.length;ve++)He=h[ve],R(He.value,{componentStack:He.stack});return(Xc&3)!==0&&hs(),He=c.pendingLanes,(x&4194218)!==0&&(He&42)!==0?c===er?Yc++:(Yc=0,er=c):Yc=0,Vt(0),null}function ko(c,h){(c.pooledCacheLanes&=h)===0&&(h=c.pooledCache,h!=null&&(c.pooledCache=null,ao(h)))}function hs(){if(il!==null){var c=il,h=Ap;Ap=0;var g=ge(Xc),x=32>g?32:g;g=jt.T;var R=ts();try{if(Ls(x),jt.T=null,il===null)var U=!1;else{x=Wc,Wc=null;var Z=il,ae=Xc;if(il=null,Xc=0,(Bt&6)!==0)throw Error(s(331));var ve=Bt;if(Bt|=4,hf(Z.current),jd(Z,Z.current,ae,x),Bt=ve,Vt(0,!1),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(Ju,Z)}catch{}U=!0}return U}finally{Ls(R),jt.T=g,ko(c,h)}}return!1}function Kd(c,h,g){h=pe(g,h),h=Rl(c.stateNode,h,2),c=st(c,h,2),c!==null&&(F(c,2),Qe(c))}function Mn(c,h,g){if(c.tag===3)Kd(c,c,g);else for(;h!==null;){if(h.tag===3){Kd(h,c,g);break}else if(h.tag===1){var x=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(na===null||!na.has(x))){c=pe(g,c),g=Ua(2),x=st(h,g,2),x!==null&&(wc(g,x,h,c),F(x,2),Qe(x));break}}h=h.return}}function Qd(c,h,g){var x=c.pingCache;if(x===null){x=c.pingCache=new wn;var R=new Set;x.set(h,R)}else R=x.get(h),R===void 0&&(R=new Set,x.set(h,R));R.has(g)||(tl=!0,R.add(g),c=cv.bind(null,c,h,g),h.then(c,c))}function cv(c,h,g){var x=c.pingCache;x!==null&&x.delete(h),c.pingedLanes|=c.suspendedLanes&g,c.warmLanes&=~g,bn===c&&(En&g)===g&&(Un===4||Un===3&&(En&62914560)===En&&300>As()-xo?(Bt&2)===0&&za(c,0):Bs|=g,nl===En&&(nl=0)),Qe(c)}function Nc(c,h){h===0&&(h=I()),c=Ve(c,h),c!==null&&(F(c,h),Qe(c))}function Oc(c){var h=c.memoizedState,g=0;h!==null&&(g=h.retryLane),Nc(c,g)}function pg(c,h){var g=0;switch(c.tag){case 13:var x=c.stateNode,R=c.memoizedState;R!==null&&(g=R.retryLane);break;case 19:x=c.stateNode;break;case 22:x=c.stateNode._retryCache;break;default:throw Error(s(314))}x!==null&&x.delete(h),Nc(c,g)}function mf(c,h){return Zu(c,h)}function mg(c,h,g,x){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Go(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Us(c,h){var g=c.alternate;return g===null?(g=t(c.tag,h,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=h,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&31457280,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,h=c.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g.refCleanup=c.refCleanup,g}function jo(c,h){c.flags&=31457282;var g=c.alternate;return g===null?(c.childLanes=0,c.lanes=h,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=g.childLanes,c.lanes=g.lanes,c.child=g.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=g.memoizedProps,c.memoizedState=g.memoizedState,c.updateQueue=g.updateQueue,c.type=g.type,h=g.dependencies,c.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),c}function da(c,h,g,x,R,U){var Z=0;if(x=c,typeof c=="function")Go(c)&&(Z=1);else if(typeof c=="string")Z=qr&&bs?Gg(c,g,ds.current)?26:Ku(c)?27:5:qr?Gg(c,g,ds.current)?26:5:bs&&Ku(c)?27:5;else e:switch(c){case qu:return qo(g.children,R,U,h);case Sg:Z=8,R|=24;break;case Eg:return c=t(12,g,h,R|2),c.elementType=Eg,c.lanes=U,c;case Jd:return c=t(13,g,h,R),c.elementType=Jd,c.lanes=U,c;case kl:return c=t(19,g,h,R),c.elementType=kl,c.lanes=U,c;case _f:return Zd(g,R,U,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case fv:case fo:Z=10;break e;case Hl:Z=9;break e;case Xu:Z=11;break e;case yf:Z=14;break e;case Fa:Z=16,x=null;break e}Z=29,g=Error(s(130,c===null?"null":typeof c,"")),x=null}return h=t(Z,g,h,R),h.elementType=c,h.type=x,h.lanes=U,h}function qo(c,h,g,x){return c=t(7,c,x,h),c.lanes=g,c}function Zd(c,h,g,x){c=t(22,c,x,h),c.elementType=_f,c.lanes=g;var R={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var U=R._current;if(U===null)throw Error(s(456));if((R._pendingVisibility&2)===0){var Z=Ve(U,2);Z!==null&&(R._pendingVisibility|=2,Os(Z,U,2))}},attach:function(){var U=R._current;if(U===null)throw Error(s(456));if((R._pendingVisibility&2)!==0){var Z=Ve(U,2);Z!==null&&(R._pendingVisibility&=-3,Os(Z,U,2))}}};return c.stateNode=R,c}function Fl(c,h,g){return c=t(6,c,null,h),c.lanes=g,c}function ju(c,h,g){return h=t(4,c.children!==null?c.children:[],c.key,h),h.lanes=g,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function Uc(c,h,g,x,R,U,Z,ae){this.tag=1,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=zc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=O(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O(0),this.hiddenUpdates=O(null),this.identifierPrefix=x,this.onUncaughtError=R,this.onCaughtError=U,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ae,this.incompleteTransitions=new Map}function fs(c,h,g,x,R,U,Z,ae,ve,He,ct,yt){return c=new Uc(c,h,g,Z,ae,ve,He,yt),h=1,U===!0&&(h|=24),U=t(3,null,null,h),c.current=U,U.stateNode=c,h=zo(),h.refCount++,c.pooledCache=h,h.refCount++,U.memoizedState={element:x,isDehydrated:g,cache:h},Mt(U),c}function gf(c){return c?(c=Fc,c):Fc}function gg(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(s(188)):(c=Object.keys(c).join(","),Error(s(268,c)));return c=T(h),c=c!==null?M(c):null,c===null?null:Wu(c.stateNode)}function uv(c,h,g,x,R,U){R=gf(R),x.context===null?x.context=R:x.pendingContext=R,x=Ke(h),x.payload={element:g},U=U===void 0?null:U,U!==null&&(x.callback=U),g=st(c,x,h),g!==null&&(Os(g,c,h),Ct(g,c,h))}function hv(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<h?g:h}}function yg(c,h){hv(c,h),(c=c.alternate)&&hv(c,h)}var zt={},_g=Bm(),xs=bK(),Lc=Object.assign,vg=Symbol.for("react.element"),Xo=Symbol.for("react.transitional.element"),Ba=Symbol.for("react.portal"),qu=Symbol.for("react.fragment"),Sg=Symbol.for("react.strict_mode"),Eg=Symbol.for("react.profiler"),fv=Symbol.for("react.provider"),Hl=Symbol.for("react.consumer"),fo=Symbol.for("react.context"),Xu=Symbol.for("react.forward_ref"),Jd=Symbol.for("react.suspense"),kl=Symbol.for("react.suspense_list"),yf=Symbol.for("react.memo"),Fa=Symbol.for("react.lazy"),_f=Symbol.for("react.offscreen"),dv=Symbol.for("react.memo_cache_sentinel"),xg=Symbol.iterator,Pc=Symbol.for("react.client.reference"),jt=_g.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$d,Tg,Gl=!1,jl=Array.isArray,ep=e.rendererVersion,vf=e.rendererPackageName,Sf=e.extraDevToolsConfig,Wu=e.getPublicInstance,Vc=e.getRootHostContext,pv=e.getChildHostContext,ql=e.prepareForCommit,bg=e.resetAfterCommit,Ag=e.createInstance,po=e.appendInitialChild,Wo=e.finalizeInitialChildren,Xl=e.shouldSetTextContent,tp=e.createTextInstance,Mg=e.scheduleTimeout,Ef=e.cancelTimeout,zc=e.noTimeout,mo=e.isPrimaryRenderer;e.warnsIfNotActing;var Ts=e.supportsMutation,Gr=e.supportsPersistence,Zs=e.supportsHydration,wg=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Rg=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Ls=e.setCurrentUpdatePriority,ts=e.getCurrentUpdatePriority,pa=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Wl=e.shouldAttemptEagerTransition,Cg=e.detachDeletedInstance;e.requestPostPaintCallback;var mv=e.maySuspendCommit,Yo=e.preloadInstance,jr=e.startSuspendingCommit,Di=e.suspendInstance,np=e.waitForCommitToBeReady,gr=e.NotPendingTransition,Kt=e.HostTransitionContext,si=e.resetFormInstance;e.bindToConsole;var Yi=e.supportsMicrotasks,ip=e.scheduleMicrotask,go=e.supportsTestSelectors,Bc=e.findFiberRoot,sp=e.getBoundingRect,xf=e.getTextContent,yo=e.isHiddenSubtree,Xx=e.matchAccessibilityRole,Ni=e.setFocusIfFocusable,Ig=e.setupIntersectionObserver,Dg=e.appendChild,gv=e.appendChildToContainer,yv=e.commitTextUpdate,Wx=e.commitMount,Ng=e.commitUpdate,Og=e.insertBefore,Ug=e.insertInContainerBefore,Js=e.removeChild,zi=e.removeChildFromContainer,Tf=e.resetTextContent,bf=e.hideInstance,rp=e.hideTextInstance,Lg=e.unhideInstance,Ko=e.unhideTextInstance,ap=e.clearContainer,Pg=e.cloneInstance,op=e.createContainerChildSet,Vg=e.appendChildToContainerChildSet,_v=e.finalizeContainerChildren,zg=e.replaceContainerChildren,Bg=e.cloneHiddenInstance,Fg=e.cloneHiddenTextInstance,lp=e.isSuspenseInstancePending,Af=e.isSuspenseInstanceFallback,vv=e.getSuspenseInstanceFallbackErrorDetails,Yx=e.registerSuspenseInstanceRetry,Sv=e.canHydrateFormStateMarker,Ev=e.isFormStateMarkerMatching,Hg=e.getNextHydratableSibling,cp=e.getFirstHydratableChild,xv=e.getFirstHydratableChildWithinContainer,Tv=e.getFirstHydratableChildWithinSuspenseInstance,bv=e.canHydrateInstance,Av=e.canHydrateTextInstance,Mv=e.canHydrateSuspenseInstance,Kx=e.hydrateInstance,wv=e.hydrateTextInstance,Yu=e.hydrateSuspenseInstance,Rv=e.getNextHydratableInstanceAfterSuspenseInstance,up=e.commitHydratedContainer,hp=e.commitHydratedSuspenseInstance,Cv=e.clearSuspenseBoundary,kg=e.clearSuspenseBoundaryFromContainer,Iv=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Dv=e.validateHydratableInstance,Nv=e.validateHydratableTextInstance,qr=e.supportsResources,Gg=e.isHostHoistableType,fp=e.getHoistableRoot,dp=e.getResource,jg=e.acquireResource,qg=e.releaseResource,Xg=e.hydrateHoistable,Wg=e.mountHoistable,Yg=e.unmountHoistable,Qx=e.createHoistableInstance,Kg=e.prepareToCommitHoistables,Ov=e.mayResourceSuspendCommit,Qg=e.preloadResource,Zg=e.suspendResource,bs=e.supportsSingletons,Jg=e.resolveSingletonInstance,Zx=e.clearSingleton,Jx=e.acquireSingletonInstance,Uv=e.releaseSingletonInstance,Ku=e.isHostSingletonType,Mf=[],Qo=-1,Fc={},yr=Math.clz32?Math.clz32:V,wf=Math.log,Lv=Math.LN2,Qu=128,Rf=4194304,Zu=xs.unstable_scheduleCallback,Cf=xs.unstable_cancelCallback,Pv=xs.unstable_shouldYield,Vv=xs.unstable_requestPaint,As=xs.unstable_now,$g=xs.unstable_ImmediatePriority,zv=xs.unstable_UserBlockingPriority,pp=xs.unstable_NormalPriority,mp=xs.unstable_IdlePriority,Bv=xs.log,ey=xs.unstable_setDisableYieldValue,Ju=null,_r=null,Xr=typeof Object.is=="function"?Object.is:ne,gp=new WeakMap,vi=[],Oi=0,If=null,Df=0,Wr=[],Yr=0,Ha=null,_o=1,ma="",ds=w(null),Nf=w(null),ka=w(null),$u=w(null),Ps=null,Ms=null,Bn=!1,Kr=null,ga=!1,Of=Error(s(519)),Qr=[],Yl=0,eh=0,th=null,Hc=null,Uf=!1,Lf=!1,Ga=!1,Kl=0,Pf=null,yp=0,vr=0,Ql=null,Zo=!1,nh=!1,Vf=Object.prototype.hasOwnProperty,ni=Error(s(460)),ty=Error(s(474)),_p={then:function(){}},kc=null,vo=null,ya=0,Zl=js(!0),ny=js(!1),So=w(null),Zr=w(0),Jr=w(null),_a=null,Ki=w(0),Eo=0,dn=null,Xn=null,Bi=null,va=!1,Si=!1,Jo=!1,zf=0,Ui=0,ih=null,Fv=0,vp=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Fn={readContext:gi,use:me,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln};Fn.useCacheRefresh=ln,Fn.useMemoCache=ln,Fn.useHostTransitionStatus=ln,Fn.useFormState=ln,Fn.useActionState=ln,Fn.useOptimistic=ln;var Qi={readContext:gi,use:me,useCallback:function(c,h){return fe().memoizedState=[c,h===void 0?null:h],c},useContext:gi,useEffect:Au,useImperativeHandle:function(c,h,g){g=g!=null?g.concat([c]):null,xc(4194308,4,Tc.bind(null,h,c),g)},useLayoutEffect:function(c,h){return xc(4194308,4,c,h)},useInsertionEffect:function(c,h){xc(4,2,c,h)},useMemo:function(c,h){var g=fe();h=h===void 0?null:h;var x=c();if(Jo){ee(!0);try{c()}finally{ee(!1)}}return g.memoizedState=[x,h],x},useReducer:function(c,h,g){var x=fe();if(g!==void 0){var R=g(h);if(Jo){ee(!0);try{g(h)}finally{ee(!1)}}}else R=h;return x.memoizedState=x.baseState=R,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:R},x.queue=c,c=c.dispatch=eo.bind(null,dn,c),[x.memoizedState,c]},useRef:function(c){var h=fe();return c={current:c},h.memoizedState=c},useState:function(c){c=Xt(c);var h=c.queue,g=Mu.bind(null,dn,h);return h.dispatch=g,[c.memoizedState,g]},useDebugValue:bc,useDeferredValue:function(c,h){var g=fe();return ua(g,c,h)},useTransition:function(){var c=Xt(!1);return c=Ac.bind(null,dn,c.queue,!0,!1),fe().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,h,g){var x=dn,R=fe();if(Bn){if(g===void 0)throw Error(s(407));g=g()}else{if(g=h(),bn===null)throw Error(s(349));(En&60)!==0||Ut(x,h,g)}R.memoizedState=g;var U={value:g,getSnapshot:h};return R.queue=U,Au(Nn.bind(null,x,U,c),[c]),x.flags|=2048,Vi(9,cn.bind(null,x,U,g,h),{destroy:void 0},null),g},useId:function(){var c=fe(),h=bn.identifierPrefix;if(Bn){var g=ma,x=_o;g=(x&~(1<<32-yr(x)-1)).toString(32)+g,h=":"+h+"R"+g,g=zf++,0<g&&(h+="H"+g.toString(32)),h+=":"}else g=Fv++,h=":"+h+"r"+g.toString(32)+":";return c.memoizedState=h},useCacheRefresh:function(){return fe().memoizedState=ii.bind(null,dn)}};Qi.useMemoCache=We,Qi.useHostTransitionStatus=zr,Qi.useFormState=Wi,Qi.useActionState=Wi,Qi.useOptimistic=function(c){var h=fe();h.memoizedState=h.baseState=c;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=g,h=Mc.bind(null,dn,!0,g),g.dispatch=h,[c,h]};var Vs={readContext:gi,use:me,useCallback:Vr,useContext:gi,useEffect:bl,useImperativeHandle:ca,useInsertionEffect:Jh,useLayoutEffect:Uo,useMemo:Lo,useReducer:xt,useRef:Ws,useState:function(){return xt(ht)},useDebugValue:bc,useDeferredValue:function(c,h){var g=Ee();return Al(g,Xn.memoizedState,c,h)},useTransition:function(){var c=xt(ht)[0],h=Ee().memoizedState;return[typeof c=="boolean"?c:Ae(c),h]},useSyncExternalStore:Ft,useId:Br};Vs.useCacheRefresh=Ml,Vs.useMemoCache=We,Vs.useHostTransitionStatus=zr,Vs.useFormState=os,Vs.useActionState=os,Vs.useOptimistic=function(c,h){var g=Ee();return St(g,Xn,c,h)};var Jl={readContext:gi,use:me,useCallback:Vr,useContext:gi,useEffect:bl,useImperativeHandle:ca,useInsertionEffect:Jh,useLayoutEffect:Uo,useMemo:Lo,useReducer:Nt,useRef:Ws,useState:function(){return Nt(ht)},useDebugValue:bc,useDeferredValue:function(c,h){var g=Ee();return Xn===null?ua(g,c,h):Al(g,Xn.memoizedState,c,h)},useTransition:function(){var c=Nt(ht)[0],h=Ee().memoizedState;return[typeof c=="boolean"?c:Ae(c),h]},useSyncExternalStore:Ft,useId:Br};Jl.useCacheRefresh=Ml,Jl.useMemoCache=We,Jl.useHostTransitionStatus=zr,Jl.useFormState=Oo,Jl.useActionState=Oo,Jl.useOptimistic=function(c,h){var g=Ee();return Xn!==null?St(g,Xn,c,h):(g.baseState=c,[c,g.queue.dispatch])};var Sp={isMounted:function(c){return(c=c._reactInternals)?_(c)===c:!1},enqueueSetState:function(c,h,g){c=c._reactInternals;var x=Qs(),R=Ke(x);R.payload=h,g!=null&&(R.callback=g),h=st(c,R,x),h!==null&&(Os(h,c,x),Ct(h,c,x))},enqueueReplaceState:function(c,h,g){c=c._reactInternals;var x=Qs(),R=Ke(x);R.tag=1,R.payload=h,g!=null&&(R.callback=g),h=st(c,R,x),h!==null&&(Os(h,c,x),Ct(h,c,x))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var g=Qs(),x=Ke(g);x.tag=2,h!=null&&(x.callback=h),h=st(c,x,g),h!==null&&(Os(h,c,g),Ct(h,c,g))}},iy=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},Hv=Error(s(461)),Fi=!1,zs={dehydrated:null,treeContext:null,retryLane:0},Sr=w(null),$l=null,Li=null,kv=typeof AbortController<"u"?AbortController:function(){var c=[],h=this.signal={aborted:!1,addEventListener:function(g,x){c.push(x)}};this.abort=function(){h.aborted=!0,c.forEach(function(g){return g()})}},$o=xs.unstable_scheduleCallback,Gc=xs.unstable_NormalPriority,Zn={$$typeof:fo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Ep=jt.S;jt.S=function(c,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&Pe(c,h),Ep!==null&&Ep(c,h)};var el=w(null),ns=!1,Mi=!1,ec=!1,sh=typeof WeakSet=="function"?WeakSet:Set,Pi=null,jc=!1,Hi=null,Er=!1,$s=null,qc=8192,xp={getCacheForType:function(c){var h=gi(Zn),g=h.data.get(c);return g===void 0&&(g=c(),h.data.set(c,g)),g}},Bf=0,Tp=1,bp=2,On=3,Jn=4;if(typeof Symbol=="function"&&Symbol.for){var pn=Symbol.for;Bf=pn("selector.component"),Tp=pn("selector.has_pseudo_class"),bp=pn("selector.role"),On=pn("selector.test_id"),Jn=pn("selector.text")}var wn=typeof WeakMap=="function"?WeakMap:Map,Bt=0,bn=null,on=null,En=0,ri=0,ki=null,$n=!1,$r=!1,tl=!1,ja=0,Un=0,ea=0,qa=0,Bs=0,xr=0,nl=0,rh=null,ta=null,ah=!1,xo=0,wi=1/0,Xa=null,na=null,Sa=!1,il=null,Xc=0,Ap=0,Wc=null,Yc=0,er=null;return zt.attemptContinuousHydration=function(c){if(c.tag===13){var h=Ve(c,67108864);h!==null&&Os(h,c,67108864),yg(c,67108864)}},zt.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var h=Qs(),g=Ve(c,h);g!==null&&Os(g,c,h),yg(c,h)}},zt.attemptSynchronousHydration=function(c){switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var h=z(c.pendingLanes);if(h!==0){for(c.pendingLanes|=2,c.entangledLanes|=2;h;){var g=1<<31-yr(h);c.entanglements[1]|=g,h&=~g}Qe(c),(Bt&6)===0&&(wi=As()+500,Vt(0))}}break;case 13:h=Ve(c,2),h!==null&&Os(h,c,2),fg(),yg(c,2)}},zt.batchedUpdates=function(c,h){return c(h)},zt.createComponentSelector=function(c){return{$$typeof:Bf,value:c}},zt.createContainer=function(c,h,g,x,R,U,Z,ae,ve,He){return fs(c,h,!1,null,g,x,U,Z,ae,ve,He,null)},zt.createHasPseudoClassSelector=function(c){return{$$typeof:Tp,value:c}},zt.createHydrationContainer=function(c,h,g,x,R,U,Z,ae,ve,He,ct,yt,Et){return c=fs(g,x,!0,c,R,U,ae,ve,He,ct,yt,Et),c.context=gf(null),g=c.current,x=Qs(),R=Ke(x),R.callback=h??null,st(g,R,x),c.current.lanes=x,F(c,x),Qe(c),c},zt.createPortal=function(c,h,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ba,key:x==null?null:""+x,children:c,containerInfo:h,implementation:g}},zt.createRoleSelector=function(c){return{$$typeof:bp,value:c}},zt.createTestNameSelector=function(c){return{$$typeof:On,value:c}},zt.createTextSelector=function(c){return{$$typeof:Jn,value:c}},zt.defaultOnCaughtError=function(c){console.error(c)},zt.defaultOnRecoverableError=function(c){iy(c)},zt.defaultOnUncaughtError=function(c){iy(c)},zt.deferredUpdates=function(c){var h=jt.T,g=ts();try{return Ls(32),jt.T=null,c()}finally{Ls(g),jt.T=h}},zt.discreteUpdates=function(c,h,g,x,R){var U=jt.T,Z=ts();try{return Ls(2),jt.T=null,c(h,g,x,R)}finally{Ls(Z),jt.T=U,Bt===0&&(wi=As()+500)}},zt.findAllNodes=Ks,zt.findBoundingRects=function(c,h){if(!go)throw Error(s(363));h=Ks(c,h),c=[];for(var g=0;g<h.length;g++)c.push(sp(h[g]));for(h=c.length-1;0<h;h--){g=c[h];for(var x=g.x,R=x+g.width,U=g.y,Z=U+g.height,ae=h-1;0<=ae;ae--)if(h!==ae){var ve=c[ae],He=ve.x,ct=He+ve.width,yt=ve.y,Et=yt+ve.height;if(x>=He&&U>=yt&&R<=ct&&Z<=Et){c.splice(h,1);break}else if(x!==He||g.width!==ve.width||Et<U||yt>Z){if(!(U!==yt||g.height!==ve.height||ct<x||He>R)){He>x&&(ve.width+=He-x,ve.x=x),ct<R&&(ve.width=R-He),c.splice(h,1);break}}else{yt>U&&(ve.height+=yt-U,ve.y=U),Et<Z&&(ve.height=Z-yt),c.splice(h,1);break}}}return c},zt.findHostInstance=gg,zt.findHostInstanceWithNoPortals=function(c){return c=T(c),c=c!==null?C(c):null,c===null?null:Wu(c.stateNode)},zt.findHostInstanceWithWarning=function(c){return gg(c)},zt.flushPassiveEffects=hs,zt.flushSyncFromReconciler=function(c){var h=Bt;Bt|=1;var g=jt.T,x=ts();try{if(Ls(2),jt.T=null,c)return c()}finally{Ls(x),jt.T=g,Bt=h,(Bt&6)===0&&Vt(0)}},zt.flushSyncWork=fg,zt.focusWithin=function(c,h){if(!go)throw Error(s(363));for(c=Xd(c),h=ov(c,h),h=Array.from(h),c=0;c<h.length;){var g=h[c++],x=g.tag;if(!yo(g)){if((x===5||x===26||x===27)&&Ni(g.stateNode))return!0;for(g=g.child;g!==null;)h.push(g),g=g.sibling}}return!1},zt.getFindAllNodesFailureDescription=function(c,h){if(!go)throw Error(s(363));var g=0,x=[];c=[Xd(c),0];for(var R=0;R<c.length;){var U=c[R++],Z=U.tag,ae=c[R++],ve=h[ae];if((Z!==5&&Z!==26&&Z!==27||!yo(U))&&(ku(U,ve)&&(x.push(zl(ve)),ae++,ae>g&&(g=ae)),ae<h.length))for(U=U.child;U!==null;)c.push(U,ae),U=U.sibling}if(g<h.length){for(c=[];g<h.length;g++)c.push(zl(h[g]));return`findAllNodes was able to match part of the selector:
  `+(x.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},zt.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 27:case 5:return Wu(c.child.stateNode);default:return c.child.stateNode}},zt.injectIntoDevTools=function(){var c={bundleType:0,version:ep,rendererPackageName:vf,currentDispatcherRef:jt,findFiberByHostInstance:wg,reconcilerVersion:"19.0.0"};if(Sf!==null&&(c.rendererConfig=Sf),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)c=!0;else{try{Ju=h.inject(c),_r=h}catch{}c=!!h.checkDCE}}return c},zt.isAlreadyRendering=function(){return!1},zt.observeVisibleRects=function(c,h,g,x){if(!go)throw Error(s(363));c=Ks(c,h);var R=Ig(c,g,x).disconnect;return{disconnect:function(){R()}}},zt.shouldError=function(){return null},zt.shouldSuspend=function(){return!1},zt.startHostTransition=function(c,h,g,x){if(c.tag!==5)throw Error(s(476));var R=Po(c).queue;Ac(c,R,h,gr,g===null?n:function(){var U=Po(c).next.queue;return Na(c,U,{},Qs()),g(x)})},zt.updateContainer=function(c,h,g,x){var R=h.current,U=Qs();return uv(R,U,c,h,g,x),U},zt.updateContainerSync=function(c,h,g,x){return h.tag===0&&hs(),uv(h.current,2,c,h,g,x),2},zt},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(Xb)),Xb.exports}var LI;function MK(){return LI||(LI=1,qb.exports=AK()),qb.exports}var wK=MK();const RK=iM(wK);var Kb={exports:{}},Qb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI;function CK(){return PI||(PI=1,(function(i){function e(X,ee){var ne=X.length;X.push(ee);e:for(;0<ne;){var pe=ne-1>>>1,re=X[pe];if(0<s(re,ee))X[pe]=ee,X[ne]=re,ne=pe;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var ee=X[0],ne=X.pop();if(ne!==ee){X[0]=ne;e:for(var pe=0,re=X.length,J=re>>>1;pe<J;){var le=2*(pe+1)-1,De=X[le],Re=le+1,nt=X[Re];if(0>s(De,ne))Re<re&&0>s(nt,De)?(X[pe]=nt,X[Re]=ne,pe=Re):(X[pe]=De,X[le]=ne,pe=le);else if(Re<re&&0>s(nt,ne))X[pe]=nt,X[Re]=ne,pe=Re;else break e}}return ee}function s(X,ee){var ne=X.sortIndex-ee.sortIndex;return ne!==0?ne:X.id-ee.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();i.unstable_now=function(){return l.now()-u}}var d=[],p=[],y=1,_=null,S=3,T=!1,M=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function V(X){for(var ee=t(p);ee!==null;){if(ee.callback===null)n(p);else if(ee.startTime<=X)n(p),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(p)}}function z(X){if(C=!1,V(X),!M)if(t(d)!==null)M=!0,de();else{var ee=t(p);ee!==null&&ge(z,ee.startTime-X)}}var j=!1,G=-1,P=5,L=-1;function I(){return!(i.unstable_now()-L<P)}function O(){if(j){var X=i.unstable_now();L=X;var ee=!0;try{e:{M=!1,C&&(C=!1,b(G),G=-1),T=!0;var ne=S;try{t:{for(V(X),_=t(d);_!==null&&!(_.expirationTime>X&&I());){var pe=_.callback;if(typeof pe=="function"){_.callback=null,S=_.priorityLevel;var re=pe(_.expirationTime<=X);if(X=i.unstable_now(),typeof re=="function"){_.callback=re,V(X),ee=!0;break t}_===t(d)&&n(d),V(X)}else n(d);_=t(d)}if(_!==null)ee=!0;else{var J=t(p);J!==null&&ge(z,J.startTime-X),ee=!1}}break e}finally{_=null,S=ne,T=!1}ee=void 0}}finally{ee?F():j=!1}}}var F;if(typeof D=="function")F=function(){D(O)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,q=Y.port2;Y.port1.onmessage=O,F=function(){q.postMessage(null)}}else F=function(){w(O,0)};function de(){j||(j=!0,F())}function ge(X,ee){G=w(function(){X(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_continueExecution=function(){M||T||(M=!0,de())},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_getFirstCallbackNode=function(){return t(d)},i.unstable_next=function(X){switch(S){case 1:case 2:case 3:var ee=3;break;default:ee=S}var ne=S;S=ee;try{return X()}finally{S=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(X,ee){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ne=S;S=X;try{return ee()}finally{S=ne}},i.unstable_scheduleCallback=function(X,ee,ne){var pe=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?pe+ne:pe):ne=pe,X){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ne+re,X={id:y++,callback:ee,priorityLevel:X,startTime:ne,expirationTime:re,sortIndex:-1},ne>pe?(X.sortIndex=ne,e(p,X),t(d)===null&&X===t(p)&&(C?(b(G),G=-1):C=!0,ge(z,ne-pe))):(X.sortIndex=re,e(d,X),M||T||(M=!0,de())),X},i.unstable_shouldYield=I,i.unstable_wrapCallback=function(X){var ee=S;return function(){var ne=S;S=ee;try{return X.apply(this,arguments)}finally{S=ne}}}})(Qb)),Qb}var VI;function IK(){return VI||(VI=1,Kb.exports=CK()),Kb.exports}var zI=IK();function J1(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const s=J1(n,e,t);if(s)return s;n=e?null:n.sibling}}function fL(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const $1=fL(ce.createContext(null));class dL extends ce.Component{render(){return ce.createElement($1.Provider,{value:this._reactInternals},this.props.children)}}function pL(){const i=ce.useContext($1);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ce.useId();return ce.useMemo(()=>{for(const t of[i,i?.alternate]){if(!t)continue;const n=J1(t,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(n)return n}},[i,e])}const DK=Symbol.for("react.context"),NK=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===DK;function OK(){const i=pL(),[e]=ce.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;NK(n)&&n!==$1&&!e.has(n)&&e.set(n,ce.use(fL(n))),t=t.return}return e}function UK(){const i=OK();return ce.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>ce.createElement(e,null,ce.createElement(t.Provider,{...n,value:i.get(t)})),e=>ce.createElement(dL,{...e})),[i])}function mL(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const gL=i=>i&&i.isOrthographicCamera,LK=i=>i&&i.hasOwnProperty("current"),PK=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),$_=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?ce.useLayoutEffect:ce.useEffect;function yL(i){const e=ce.useRef(i);return $_(()=>void(e.current=i),[i]),e}function VK(){const i=pL(),e=UK();return ce.useMemo(()=>({children:t})=>{const s=!!J1(i,!0,a=>a.type===ce.StrictMode)?ce.StrictMode:ce.Fragment;return H.jsx(s,{children:H.jsx(e,{children:t})})},[i,e])}function zK({set:i}){return $_(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const BK=(i=>(i=class extends ce.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function _L(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function em(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const Gi={obj:i=>i===Object(i)&&!Gi.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(Gi.str(i)||Gi.num(i)||Gi.boo(i))return i===e;const a=Gi.obj(i);if(a&&n==="reference")return i===e;const l=Gi.arr(i);if(l&&t==="reference")return i===e;if((l||a)&&i===e)return!0;let u;for(u in i)if(!(u in e))return!1;if(a&&t==="shallow"&&n==="shallow"){for(u in s?e:i)if(!Gi.equ(i[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:i)if(i[u]!==e[u])return!1;if(Gi.und(u)){if(l&&i.length===0&&e.length===0||a&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function FK(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const vL=["children","key","ref"];function HK(i){const e={};for(const t in i)vL.includes(t)||(e[t]=i[t]);return e}function PE(i,e,t,n){const s=i;let a=s?.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:HK(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=a)),a}function I_(i,e){let t=i[e];if(!e.includes("-"))return{root:i,key:e,target:t};t=i;for(const s of e.split("-")){var n;e=s,i=t,t=(n=t)==null?void 0:n[e]}return{root:i,key:e,target:t}}const BI=/-\d+$/;function VE(i,e){if(Gi.str(e.props.attach)){if(BI.test(e.props.attach)){const s=e.props.attach.replace(BI,""),{root:a,key:l}=I_(i.object,s);Array.isArray(a[l])||(a[l]=[])}const{root:t,key:n}=I_(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else Gi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function zE(i,e){if(Gi.str(e.props.attach)){const{root:t,key:n}=I_(i.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[n]:t[n]=s}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const QA=[...vL,"args","dispose","attach","object","onUpdate","dispose"],FI=new Map;function kK(i){let e=FI.get(i.constructor);try{e||(e=new i.constructor,FI.set(i.constructor,e))}catch{}return e}function GK(i,e){const t={};for(const n in e)if(!QA.includes(n)&&!Gi.equ(e[n],i.props[n])){t[n]=e[n];for(const s in e)s.startsWith(`${n}-`)&&(t[s]=e[s])}for(const n in i.props){if(QA.includes(n)||e.hasOwnProperty(n))continue;const{root:s,key:a}=I_(i.object,n);if(s.constructor&&s.constructor.length===0){const l=kK(s);Gi.und(l)||(t[a]=l[a])}else t[a]=0}return t}const jK=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],qK=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Ch(i,e){var t;const n=i.__r3f,s=n&&mL(n).getState(),a=n?.eventCount;for(const u in e){let d=e[u];if(QA.includes(u))continue;if(n&&qK.test(u)){typeof d=="function"?n.handlers[u]=d:delete n.handlers[u],n.eventCount=Object.keys(n.handlers).length;continue}if(d===void 0)continue;let{root:p,key:y,target:_}=I_(i,u);if(_ instanceof Um&&d instanceof Um)_.mask=d.mask;else if(_ instanceof At&&PK(d))_.set(d);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&typeof _.copy=="function"&&d!=null&&d.constructor&&_.constructor===d.constructor)_.copy(d);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&Array.isArray(d))typeof _.fromArray=="function"?_.fromArray(d):_.set(...d);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&typeof d=="number")typeof _.setScalar=="function"?_.setScalar(d):_.set(d);else{var l;p[y]=d,s&&!s.linear&&jK.includes(y)&&(l=p[y])!=null&&l.isTexture&&p[y].format===Nr&&p[y].type===Io&&(p[y].colorSpace=Ir)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(t=n.object)!=null&&t.isObject3D&&a!==n.eventCount){const u=n.object,d=s.internal.interaction.indexOf(u);d>-1&&s.internal.interaction.splice(d,1),n.eventCount&&u.raycast!==null&&s.internal.interaction.push(u)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&ig(n),i}function ig(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function XK(i,e){i.manual||(gL(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const ba=i=>i?.isObject3D;function rS(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function SL(i,e,t,n){const s=t.get(e);s&&(t.delete(e),t.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function WK(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,s)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((n,s)=>{SL(t.capturedMap,e,n,s)})}function YK(i){function e(d){const{internal:p}=i.getState(),y=d.offsetX-p.initialClick[0],_=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(y*y+_*_))}function t(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(y=>{var _;return(_=p.__r3f)==null?void 0:_.handlers["onPointer"+y]}))}function n(d,p){const y=i.getState(),_=new Set,S=[],T=p?p(y.internal.interaction):y.internal.interaction;for(let b=0;b<T.length;b++){const D=em(T[b]);D&&(D.raycaster.camera=void 0)}y.previousRoot||y.events.compute==null||y.events.compute(d,y);function M(b){const D=em(b);if(!D||!D.events.enabled||D.raycaster.camera===null)return[];if(D.raycaster.camera===void 0){var V;D.events.compute==null||D.events.compute(d,D,(V=D.previousRoot)==null?void 0:V.getState()),D.raycaster.camera===void 0&&(D.raycaster.camera=null)}return D.raycaster.camera?D.raycaster.intersectObject(b,!0):[]}let C=T.flatMap(M).sort((b,D)=>{const V=em(b.object),z=em(D.object);return!V||!z?b.distance-D.distance:z.events.priority-V.events.priority||b.distance-D.distance}).filter(b=>{const D=rS(b);return _.has(D)?!1:(_.add(D),!0)});y.events.filter&&(C=y.events.filter(C,y));for(const b of C){let D=b.object;for(;D;){var w;(w=D.__r3f)!=null&&w.eventCount&&S.push({...b,eventObject:D}),D=D.parent}}if("pointerId"in d&&y.internal.capturedMap.has(d.pointerId))for(let b of y.internal.capturedMap.get(d.pointerId).values())_.has(rS(b.intersection))||S.push(b.intersection);return S}function s(d,p,y,_){if(d.length){const S={stopped:!1};for(const T of d){let M=em(T.object);if(M||T.object.traverseAncestors(C=>{const w=em(C);if(w)return M=w,!1}),M){const{raycaster:C,pointer:w,camera:b,internal:D}=M,V=new ie(w.x,w.y,0).unproject(b),z=I=>{var O,F;return(O=(F=D.capturedMap.get(I))==null?void 0:F.has(T.eventObject))!=null?O:!1},j=I=>{const O={intersection:T,target:p.target};D.capturedMap.has(I)?D.capturedMap.get(I).set(T.eventObject,O):D.capturedMap.set(I,new Map([[T.eventObject,O]])),p.target.setPointerCapture(I)},G=I=>{const O=D.capturedMap.get(I);O&&SL(D.capturedMap,T.eventObject,O,I)};let P={};for(let I in p){let O=p[I];typeof O!="function"&&(P[I]=O)}let L={...T,...P,pointer:w,intersections:d,stopped:S.stopped,delta:y,unprojectedPoint:V,ray:C.ray,camera:b,stopPropagation(){const I="pointerId"in p&&D.capturedMap.get(p.pointerId);if((!I||I.has(T.eventObject))&&(L.stopped=S.stopped=!0,D.hovered.size&&Array.from(D.hovered.values()).find(O=>O.eventObject===T.eventObject))){const O=d.slice(0,d.indexOf(T));a([...O,T])}},target:{hasPointerCapture:z,setPointerCapture:j,releasePointerCapture:G},currentTarget:{hasPointerCapture:z,setPointerCapture:j,releasePointerCapture:G},nativeEvent:p};if(_(L),S.stopped===!0)break}}}return d}function a(d){const{internal:p}=i.getState();for(const y of p.hovered.values())if(!d.length||!d.find(_=>_.object===y.object&&_.index===y.index&&_.instanceId===y.instanceId)){const S=y.eventObject.__r3f;if(p.hovered.delete(rS(y)),S!=null&&S.eventCount){const T=S.handlers,M={...y,intersections:d};T.onPointerOut==null||T.onPointerOut(M),T.onPointerLeave==null||T.onPointerLeave(M)}}}function l(d,p){for(let y=0;y<p.length;y++){const _=p[y].__r3f;_==null||_.handlers.onPointerMissed==null||_.handlers.onPointerMissed(d)}}function u(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return p=>{const{internal:y}=i.getState();"pointerId"in p&&y.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{y.capturedMap.has(p.pointerId)&&(y.capturedMap.delete(p.pointerId),a([]))})}}return function(y){const{onPointerMissed:_,internal:S}=i.getState();S.lastEvent.current=y;const T=d==="onPointerMove",M=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",w=n(y,T?t:void 0),b=M?e(y):0;d==="onPointerDown"&&(S.initialClick=[y.offsetX,y.offsetY],S.initialHits=w.map(V=>V.eventObject)),M&&!w.length&&b<=2&&(l(y,S.interaction),_&&_(y)),T&&a(w);function D(V){const z=V.eventObject,j=z.__r3f;if(!(j!=null&&j.eventCount))return;const G=j.handlers;if(T){if(G.onPointerOver||G.onPointerEnter||G.onPointerOut||G.onPointerLeave){const P=rS(V),L=S.hovered.get(P);L?L.stopped&&V.stopPropagation():(S.hovered.set(P,V),G.onPointerOver==null||G.onPointerOver(V),G.onPointerEnter==null||G.onPointerEnter(V))}G.onPointerMove==null||G.onPointerMove(V)}else{const P=G[d];P?(!M||S.initialHits.includes(z))&&(l(y,S.interaction.filter(L=>!S.initialHits.includes(L))),P(V)):M&&S.initialHits.includes(z)&&l(y,S.interaction.filter(L=>!S.initialHits.includes(L)))}}s(w,y,b,D)}}return{handlePointer:u}}const HI=i=>!!(i!=null&&i.render),EL=ce.createContext(null),KK=(i,e)=>{const t=xK((u,d)=>{const p=new ie,y=new ie,_=new ie;function S(b=d().camera,D=y,V=d().size){const{width:z,height:j,top:G,left:P}=V,L=z/j;D.isVector3?_.copy(D):_.set(...D);const I=b.getWorldPosition(p).distanceTo(_);if(gL(b))return{width:z/b.zoom,height:j/b.zoom,top:G,left:P,factor:1,distance:I,aspect:L};{const O=b.fov*Math.PI/180,F=2*Math.tan(O/2)*I,Y=F*(z/j);return{width:Y,height:F,top:G,left:P,factor:z/Y,distance:I,aspect:L}}}let T;const M=b=>u(D=>({performance:{...D.performance,current:b}})),C=new $e;return{set:u,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(b=1)=>i(d(),b),advance:(b,D)=>e(b,D,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new X1,pointer:C,mouse:C,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const b=d();T&&clearTimeout(T),b.performance.current!==b.performance.min&&M(b.performance.min),T=setTimeout(()=>M(d().performance.max),b.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:S},setEvents:b=>u(D=>({...D,events:{...D.events,...b}})),setSize:(b,D,V=0,z=0)=>{const j=d().camera,G={width:b,height:D,top:V,left:z};u(P=>({size:G,viewport:{...P.viewport,...S(j,y,G)}}))},setDpr:b=>u(D=>{const V=_L(b);return{viewport:{...D.viewport,dpr:V,initialDpr:D.viewport.initialDpr||V}}}),setFrameloop:(b="always")=>{const D=d().clock;D.stop(),D.elapsedTime=0,b!=="never"&&(D.start(),D.elapsedTime=0),u(()=>({frameloop:b}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:ce.createRef(),active:!1,frames:0,priority:0,subscribe:(b,D,V)=>{const z=d().internal;return z.priority=z.priority+(D>0?1:0),z.subscribers.push({ref:b,priority:D,store:V}),z.subscribers=z.subscribers.sort((j,G)=>j.priority-G.priority),()=>{const j=d().internal;j!=null&&j.subscribers&&(j.priority=j.priority-(D>0?1:0),j.subscribers=j.subscribers.filter(G=>G.ref!==b))}}}}}),n=t.getState();let s=n.size,a=n.viewport.dpr,l=n.camera;return t.subscribe(()=>{const{camera:u,size:d,viewport:p,gl:y,set:_}=t.getState();if(d.width!==s.width||d.height!==s.height||p.dpr!==a){s=d,a=p.dpr,XK(u,d),p.dpr>0&&y.setPixelRatio(p.dpr);const S=typeof HTMLCanvasElement<"u"&&y.domElement instanceof HTMLCanvasElement;y.setSize(d.width,d.height,S)}u!==l&&(l=u,_(S=>({viewport:{...S.viewport,...S.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>i(u)),t};function xL(){const i=ce.useContext(EL);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function QK(i=t=>t,e){return xL()(i,e)}function ZK(i,e=0){const t=xL(),n=t.getState().internal.subscribe,s=yL(i);return $_(()=>n(s,e,t),[e,n,t]),null}function JK(i){const e=RK(i);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ce.version}),e}const TL=0,zm={},$K=/^three(?=[A-Z])/,qx=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let eQ=0;const tQ=i=>typeof i=="function";function nQ(i){if(tQ(i)){const e=`${eQ++}`;return zm[e]=i,e}else Object.assign(zm,i)}function bL(i,e){const t=qx(i),n=zm[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function iQ(i,e,t){var n;return i=qx(i)in zm?i:i.replace($K,""),bL(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,PE(e.object,t,i,e)}function sQ(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?zE(i.parent,i):ba(i.object)&&(i.object.visible=!1),i.isHidden=!0,ig(i)}}function AL(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?VE(i.parent,i):ba(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,ig(i)}}function ew(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var s,a;const l=zm[qx(e.type)];e.object=(s=e.props.object)!=null?s:new l(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(Ch(e.object,e.props),e.props.attach)VE(i,e);else if(ba(e.object)&&ba(i.object)){const l=i.object.children.indexOf(t?.object);if(t&&l!==-1){const u=i.object.children.indexOf(e.object);if(u!==-1){i.object.children.splice(u,1);const d=u<l?l-1:l;i.object.children.splice(d,0,e.object)}else e.object.parent=i.object,i.object.children.splice(l,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const l of e.children)ew(e,l);ig(e)}}function Zb(i,e){e&&(e.parent=i,i.children.push(e),ew(i,e))}function kI(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),ew(i,e,t)}function ML(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():zI.unstable_scheduleCallback(zI.unstable_IdlePriority,e)}}function ZA(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?zE(i,e):ba(e.object)&&ba(i.object)&&(i.object.remove(e.object),WK(mL(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const l=e.children[a];ZA(e,l,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&ML(e.object),t===void 0&&ig(e)}function rQ(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const AS=[];function aQ(){for(const[t]of AS){const n=t.parent;if(n){t.props.attach?zE(n,t):ba(t.object)&&ba(n.object)&&n.object.remove(t.object);for(const s of t.children)s.props.attach?zE(t,s):ba(s.object)&&ba(t.object)&&t.object.remove(s.object)}t.isHidden&&AL(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&ML(t.object)}for(const[t,n,s]of AS){t.props=n;const a=t.parent;if(a){var i,e;const l=zm[qx(t.type)];t.object=(i=t.props.object)!=null?i:new l(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,rQ(s,t.object),Ch(t.object,t.props),t.props.attach?VE(a,t):ba(t.object)&&ba(a.object)&&a.object.add(t.object);for(const u of t.children)u.props.attach?VE(t,u):ba(u.object)&&ba(t.object)&&t.object.add(u.object);ig(t)}}AS.length=0}const Jb=()=>{},GI={};let aS=TL;const oQ=0,lQ=4,JA=JK({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:iQ,removeChild:ZA,appendChild:Zb,appendInitialChild:Zb,insertBefore:kI,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||Zb(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||ZA(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||kI(n,e,t)},getRootHostContext:()=>GI,getChildHostContext:()=>GI,commitUpdate(i,e,t,n,s){var a,l,u;bL(e,n);let d=!1;if((i.type==="primitive"&&t.object!==n.object||((a=n.args)==null?void 0:a.length)!==((l=t.args)==null?void 0:l.length)||(u=n.args)!=null&&u.some((y,_)=>{var S;return y!==((S=t.args)==null?void 0:S[_])}))&&(d=!0),d)AS.push([i,{...n},s]);else{const y=GK(i,n);Object.keys(y).length&&(Object.assign(i.props,y),Ch(i.object,y))}(s.sibling===null||(s.flags&lQ)===oQ)&&aQ()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i?.object,prepareForCommit:()=>null,preparePortalMount:i=>PE(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:sQ,unhideInstance:AL,createTextInstance:Jb,hideTextInstance:Jb,unhideTextInstance:Jb,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:ce.createContext(null),setCurrentUpdatePriority(i){aS=i},getCurrentUpdatePriority(){return aS},resolveUpdatePriority(){var i;if(aS!==TL)return aS;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ES.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ES.ContinuousEventPriority;default:return ES.DefaultEventPriority}},resetFormInstance(){}}),Td=new Map,tm={objects:"shallow",strict:!1};function cQ(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:s,left:a}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:s,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function uQ(i){const e=Td.get(i),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,a=n||KK(tM,qI),l=t||JA.createContainer(a,ES.ConcurrentRoot,null,!1,null,"",s,s,s,null);e||Td.set(i,{fiber:l,store:a});let u,d,p=!1,y=null;return{async configure(_={}){let S;y=new Promise(J=>S=J);let{gl:T,size:M,scene:C,events:w,onCreated:b,shadows:D=!1,linear:V=!1,flat:z=!1,legacy:j=!1,orthographic:G=!1,frameloop:P="always",dpr:L=[1,2],performance:I,raycaster:O,camera:F,onPointerMissed:Y}=_,q=a.getState(),de=q.gl;if(!q.gl){const J={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},le=typeof T=="function"?await T(J):T;HI(le)?de=le:de=new hL({...J,...T}),q.set({gl:de})}let ge=q.raycaster;ge||q.set({raycaster:ge=new iL});const{params:X,...ee}=O||{};if(Gi.equ(ee,ge,tm)||Ch(ge,{...ee}),Gi.equ(X,ge.params,tm)||Ch(ge,{params:{...ge.params,...X}}),!q.camera||q.camera===d&&!Gi.equ(d,F,tm)){d=F;const J=F?.isCamera,le=J?F:G?new J_(0,0,0,0,.1,1e3):new ks(75,0,.1,1e3);J||(le.position.z=5,F&&(Ch(le,F),le.manual||("aspect"in F||"left"in F||"right"in F||"bottom"in F||"top"in F)&&(le.manual=!0,le.updateProjectionMatrix())),!q.camera&&!(F!=null&&F.rotation)&&le.lookAt(0,0,0)),q.set({camera:le}),ge.camera=le}if(!q.scene){let J;C!=null&&C.isScene?(J=C,PE(J,a,"",{})):(J=new A1,PE(J,a,"",{}),C&&Ch(J,C)),q.set({scene:J})}w&&!q.events.handlers&&q.set({events:w(a)});const ne=cQ(i,M);if(Gi.equ(ne,q.size,tm)||q.setSize(ne.width,ne.height,ne.top,ne.left),L&&q.viewport.dpr!==_L(L)&&q.setDpr(L),q.frameloop!==P&&q.setFrameloop(P),q.onPointerMissed||q.set({onPointerMissed:Y}),I&&!Gi.equ(I,q.performance,tm)&&q.set(J=>({performance:{...J.performance,...I}})),!q.xr){var pe;const J=(Re,nt)=>{const Te=a.getState();Te.frameloop!=="never"&&qI(Re,!0,Te,nt)},le=()=>{const Re=a.getState();Re.gl.xr.enabled=Re.gl.xr.isPresenting,Re.gl.xr.setAnimationLoop(Re.gl.xr.isPresenting?J:null),Re.gl.xr.isPresenting||tM(Re)},De={connect(){const Re=a.getState().gl;Re.xr.addEventListener("sessionstart",le),Re.xr.addEventListener("sessionend",le)},disconnect(){const Re=a.getState().gl;Re.xr.removeEventListener("sessionstart",le),Re.xr.removeEventListener("sessionend",le)}};typeof((pe=de.xr)==null?void 0:pe.addEventListener)=="function"&&De.connect(),q.set({xr:De})}if(de.shadowMap){const J=de.shadowMap.enabled,le=de.shadowMap.type;if(de.shadowMap.enabled=!!D,Gi.boo(D))de.shadowMap.type=Xy;else if(Gi.str(D)){var re;const De={basic:dO,percentage:fx,soft:Xy,variance:ll};de.shadowMap.type=(re=De[D])!=null?re:Xy}else Gi.obj(D)&&Object.assign(de.shadowMap,D);(J!==de.shadowMap.enabled||le!==de.shadowMap.type)&&(de.shadowMap.needsUpdate=!0)}return Gn.enabled=!j,p||(de.outputColorSpace=V?qh:Ir,de.toneMapping=z?pc:u1),q.legacy!==j&&q.set(()=>({legacy:j})),q.linear!==V&&q.set(()=>({linear:V})),q.flat!==z&&q.set(()=>({flat:z})),T&&!Gi.fun(T)&&!HI(T)&&!Gi.equ(T,de,tm)&&Ch(de,T),u=b,p=!0,S(),this},render(_){return!p&&!y&&this.configure(),y.then(()=>{JA.updateContainer(H.jsx(hQ,{store:a,children:_,onCreated:u,rootElement:i}),l,null,()=>{})}),a},unmount(){wL(i)}}}function hQ({store:i,children:e,onCreated:t,rootElement:n}){return $_(()=>{const s=i.getState();s.set(a=>({internal:{...a.internal,active:!0}})),t&&t(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),H.jsx(EL.Provider,{value:i,children:e})}function wL(i,e){const t=Td.get(i),n=t?.fiber;if(n){const s=t?.store.getState();s&&(s.internal.active=!1),JA.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var a,l,u,d;s.events.disconnect==null||s.events.disconnect(),(a=s.gl)==null||(l=a.renderLists)==null||l.dispose==null||l.dispose(),(u=s.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(d=s.gl)!=null&&d.xr&&s.xr.disconnect(),FK(s.scene),Td.delete(i)}catch{}},500)})}}const fQ=new Set,dQ=new Set,pQ=new Set;function $b(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function t_(i,e){switch(i){case"before":return $b(fQ,e);case"after":return $b(dQ,e);case"tail":return $b(pQ,e)}}let eA,tA;function $A(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),eA=e.internal.subscribers;for(let s=0;s<eA.length;s++)tA=eA[s],tA.ref.current(tA.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let BE=!1,eM=!1,nA,jI,nm;function RL(i){jI=requestAnimationFrame(RL),BE=!0,nA=0,t_("before",i),eM=!0;for(const t of Td.values()){var e;nm=t.store.getState(),nm.internal.active&&(nm.frameloop==="always"||nm.internal.frames>0)&&!((e=nm.gl.xr)!=null&&e.isPresenting)&&(nA+=$A(i,nm))}if(eM=!1,t_("after",i),nA===0)return t_("tail",i),BE=!1,cancelAnimationFrame(jI)}function tM(i,e=1){var t;if(!i)return Td.forEach(n=>tM(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):eM?i.internal.frames=2:i.internal.frames=1,BE||(BE=!0,requestAnimationFrame(RL)))}function qI(i,e=!0,t,n){if(e&&t_("before",i),t)$A(i,t,n);else for(const s of Td.values())$A(i,s.store.getState());e&&t_("after",i)}const iA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function mQ(i){const{handlePointer:e}=YK(i);return{priority:1,enabled:!0,compute(t,n,s){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(iA).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:s}=i.getState();(t=s.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(a=>({events:{...a.events,connected:t}})),s.handlers)for(const a in s.handlers){const l=s.handlers[a],[u,d]=iA[a];t.addEventListener(u,l,{passive:d})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const a=n.handlers[s],[l]=iA[s];n.connected.removeEventListener(l,a)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function XI(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function gQ({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,l]=ce.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=ce.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),d=i?typeof i=="number"?i:i.scroll:null,p=i?typeof i=="number"?i:i.resize:null,y=ce.useRef(!1);ce.useEffect(()=>(y.current=!0,()=>void(y.current=!1)));const[_,S,T]=ce.useMemo(()=>{const b=()=>{if(!u.current.element)return;const{left:D,top:V,width:z,height:j,bottom:G,right:P,x:L,y:I}=u.current.element.getBoundingClientRect(),O={left:D,top:V,width:z,height:j,bottom:G,right:P,x:L,y:I};u.current.element instanceof HTMLElement&&n&&(O.height=u.current.element.offsetHeight,O.width=u.current.element.offsetWidth),Object.freeze(O),y.current&&!SQ(u.current.lastBounds,O)&&l(u.current.lastBounds=O)};return[b,p?XI(b,p):b,d?XI(b,d):b]},[l,n,d,p]);function M(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(b=>b.removeEventListener("scroll",T,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",u.current.orientationHandler))}function C(){u.current.element&&(u.current.resizeObserver=new s(T),u.current.resizeObserver.observe(u.current.element),e&&u.current.scrollContainers&&u.current.scrollContainers.forEach(b=>b.addEventListener("scroll",T,{capture:!0,passive:!0})),u.current.orientationHandler=()=>{T()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",u.current.orientationHandler))}const w=b=>{!b||b===u.current.element||(M(),u.current.element=b,u.current.scrollContainers=CL(b),C())};return _Q(T,!!e),yQ(S),ce.useEffect(()=>{M(),C()},[e,T,S]),ce.useEffect(()=>M,[]),[w,a,_]}function yQ(i){ce.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function _Q(i,e){ce.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function CL(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[t,n,s].some(a=>a==="auto"||a==="scroll")&&e.push(i),[...e,...CL(i.parentElement)]}const vQ=["x","y","top","bottom","left","right","width","height"],SQ=(i,e)=>vQ.every(t=>i[t]===e[t]);function EQ({ref:i,children:e,fallback:t,resize:n,style:s,gl:a,events:l=mQ,eventSource:u,eventPrefix:d,shadows:p,linear:y,flat:_,legacy:S,orthographic:T,frameloop:M,dpr:C,performance:w,raycaster:b,camera:D,scene:V,onPointerMissed:z,onCreated:j,...G}){ce.useMemo(()=>nQ(hK),[]);const P=VK(),[L,I]=gQ({scroll:!0,debounce:{scroll:50,resize:0},...n}),O=ce.useRef(null),F=ce.useRef(null);ce.useImperativeHandle(i,()=>O.current);const Y=yL(z),[q,de]=ce.useState(!1),[ge,X]=ce.useState(!1);if(q)throw q;if(ge)throw ge;const ee=ce.useRef(null);$_(()=>{const pe=O.current;if(I.width>0&&I.height>0&&pe){ee.current||(ee.current=uQ(pe));async function re(){await ee.current.configure({gl:a,scene:V,events:l,shadows:p,linear:y,flat:_,legacy:S,orthographic:T,frameloop:M,dpr:C,performance:w,raycaster:b,camera:D,size:I,onPointerMissed:(...J)=>Y.current==null?void 0:Y.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(u?LK(u)?u.current:u:F.current),d&&J.setEvents({compute:(le,De)=>{const Re=le[d+"X"],nt=le[d+"Y"];De.pointer.set(Re/De.size.width*2-1,-(nt/De.size.height)*2+1),De.raycaster.setFromCamera(De.pointer,De.camera)}}),j?.(J)}}),ee.current.render(H.jsx(P,{children:H.jsx(BK,{set:X,children:H.jsx(ce.Suspense,{fallback:H.jsx(zK,{set:de}),children:e??null})})}))}re()}}),ce.useEffect(()=>{const pe=O.current;if(pe)return()=>wL(pe)},[]);const ne=u?"none":"auto";return H.jsx("div",{ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ne,...s},...G,children:H.jsx("div",{ref:L,style:{width:"100%",height:"100%"},children:H.jsx("canvas",{ref:O,style:{display:"block"},children:t})})})}function xQ(i){return H.jsx(dL,{children:H.jsx(EQ,{...i})})}const TQ=i=>(i=i.replace("#",""),[parseInt(i.slice(0,2),16)/255,parseInt(i.slice(2,4),16)/255,parseInt(i.slice(4,6),16)/255]),bQ=`
varying vec2 vUv;
varying vec3 vPosition;
void main() {
  vPosition = position;
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,AQ=`
varying vec2 vUv;
varying vec3 vPosition;
uniform float uTime;
uniform vec3  uColor;
uniform float uSpeed;
uniform float uScale;
uniform float uRotation;
uniform float uNoiseIntensity;
const float e = 2.71828182845904523536;
float noise(vec2 texCoord) {
  float G = e;
  vec2  r = (G * sin(G * texCoord));
  return fract(r.x * r.y * (1.0 + texCoord.x));
}
vec2 rotateUvs(vec2 uv, float angle) {
  float c = cos(angle);
  float s = sin(angle);
  mat2  rot = mat2(c, -s, s, c);
  return rot * uv;
}
void main() {
  float rnd        = noise(gl_FragCoord.xy);
  vec2  uv         = rotateUvs(vUv * uScale, uRotation);
  vec2  tex        = uv * uScale;
  float tOffset    = uSpeed * uTime;
  tex.y += 0.03 * sin(8.0 * tex.x - tOffset);
  float pattern = 0.6 +
                  0.4 * sin(5.0 * (tex.x + tex.y +
                                   cos(3.0 * tex.x + 5.0 * tex.y) +
                                   0.02 * tOffset) +
                           sin(20.0 * (tex.x + tex.y - 0.1 * tOffset)));
  vec4 col = vec4(uColor, 1.0) * vec4(pattern) - rnd / 15.0 * uNoiseIntensity;
  col.a = 1.0;
  gl_FragColor = col;
}
`,IL=ce.forwardRef(function({uniforms:e},t){const{viewport:n}=QK();return ce.useLayoutEffect(()=>{t.current&&t.current.scale.set(n.width,n.height,1)},[t,n]),ZK((s,a)=>{t.current.material.uniforms.uTime.value+=.1*a}),H.jsxs("mesh",{ref:t,children:[H.jsx("planeGeometry",{args:[1,1,1,1]}),H.jsx("shaderMaterial",{uniforms:e,vertexShader:bQ,fragmentShader:AQ})]})});IL.displayName="SilkPlane";const MQ=({speed:i=5,scale:e=1,color:t="#7B7481",noiseIntensity:n=1.5,rotation:s=0})=>{const a=ce.useRef(),l=ce.useMemo(()=>({uSpeed:{value:i},uScale:{value:e},uNoiseIntensity:{value:n},uColor:{value:new At(...TQ(t))},uRotation:{value:s},uTime:{value:0}}),[i,e,n,t,s]);return H.jsx(xQ,{dpr:[1,2],frameloop:"always",children:H.jsx(IL,{ref:a,uniforms:l})})};function wQ(){const i=ce.useRef(null),e=ce.useRef(null),t=ce.useRef(null);ce.useEffect(()=>{setTimeout(()=>{i.current&&i.current.classList.add("blur-in")},100),setTimeout(()=>{e.current&&e.current.classList.add("blur-in")},400),setTimeout(()=>{t.current&&t.current.classList.add("blur-in")},700)},[]);const n=()=>{Ka("cta_clicked",{button_location:"hero",button_text:"Prendre Rendez-vous"});const s=document.querySelector("#rservation");s&&s.scrollIntoView({behavior:"smooth"})};return H.jsxs("div",{className:"hero-container",children:[H.jsx("div",{className:"hero-background",children:H.jsx(MQ,{speed:5,scale:1,color:"#c39e74",noiseIntensity:1,rotation:0})}),H.jsxs("div",{className:"hero-content",children:[H.jsx("h1",{ref:i,className:"hero-title hero-animate",children:"Shiynelly Lashes"}),H.jsx("p",{ref:e,className:"hero-subtitle hero-animate",children:"Rvlez la beaut de votre regard avec nos extensions de cils sur mesure"}),H.jsx("button",{ref:t,className:"hero-cta hero-animate",onClick:n,children:"Prendre Rendez-vous"})]})]})}const RQ=({children:i,className:e="",spotlightColor:t="rgba(0, 229, 255, 0.2)"})=>{const n=ce.useRef(null),s=a=>{const l=n.current.getBoundingClientRect(),u=a.clientX-l.left,d=a.clientY-l.top;n.current.style.setProperty("--mouse-x",`${u}px`),n.current.style.setProperty("--mouse-y",`${d}px`),n.current.style.setProperty("--spotlight-color",t)};return H.jsx("div",{ref:n,onMouseMove:s,className:`card-spotlight ${e}`,children:i})};function CQ(){const[i,e]=ce.useState({}),[t,n]=ce.useState(!1),s=ce.useRef(null);ce.useEffect(()=>{const l=new IntersectionObserver(([u])=>{u.isIntersecting&&(n(!0),l.unobserve(u.target))},{threshold:.3});return s.current&&l.observe(s.current),()=>l.disconnect()},[]);const a=l=>{!i[l]&&Ka("service_details_viewed",{service_name:KT[l].title,service_price:KT[l].price,service_index:l}),e(d=>({...d,[l]:!d[l]}))};return H.jsx("section",{id:"nosprestations",ref:s,children:H.jsxs("div",{className:`prestations-container ${t?"fade-in-up":""}`,children:[H.jsx("h2",{children:"Nos Prestations"}),H.jsx("div",{className:"prestations-grid",children:KT.map((l,u)=>H.jsx(RQ,{className:"prestation-card",spotlightColor:"rgba(195, 158, 116, 0.5)",children:H.jsxs("div",{className:"prestation-content",children:[H.jsx("h3",{children:l.title}),H.jsx("p",{className:"prestation-description",children:l.description}),H.jsx("span",{className:"prestation-price",children:l.price}),H.jsxs("button",{className:`result-toggle ${i[u]?"active":""}`,onClick:()=>a(u),children:["Rsultat",H.jsx("i",{className:`fas fa-arrow-down arrow-icon ${i[u]?"rotated":""}`})]}),H.jsx("div",{className:`result-content-wrapper ${i[u]?"show":""}`,children:H.jsx("div",{className:"result-text",children:l.result})})]})},u))})]})})}class ev{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const IQ=()=>{if(!(typeof localStorage>"u"))return{get:i=>Promise.resolve(localStorage.getItem(i)),set:(i,e)=>Promise.resolve(localStorage.setItem(i,e)),remove:i=>Promise.resolve(localStorage.removeItem(i))}},ir={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:IQ()},tw=i=>i?typeof i=="string"?{publicKey:i}:i.toString()==="[object Object]"?i:{}:{},DQ=(i,e="https://api.emailjs.com")=>{if(!i)return;const t=tw(i);ir.publicKey=t.publicKey,ir.blockHeadless=t.blockHeadless,ir.storageProvider=t.storageProvider,ir.blockList=t.blockList,ir.limitRate=t.limitRate,ir.origin=t.origin||e},DL=async(i,e,t={})=>{const n=await fetch(ir.origin+i,{method:"POST",headers:t,body:e}),s=await n.text(),a=new ev(n.status,s);if(n.ok)return a;throw a},NL=(i,e,t)=>{if(!i||typeof i!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},NQ=i=>{if(i&&i.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},OL=i=>i.webdriver||!i.languages||i.languages.length===0,UL=()=>new ev(451,"Unavailable For Headless Browser"),OQ=(i,e)=>{if(!Array.isArray(i))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},UQ=i=>!i.list?.length||!i.watchVariable,LQ=(i,e)=>i instanceof FormData?i.get(e):i[e],LL=(i,e)=>{if(UQ(i))return!1;OQ(i.list,i.watchVariable);const t=LQ(e,i.watchVariable);return typeof t!="string"?!1:i.list.includes(t)},PL=()=>new ev(403,"Forbidden"),PQ=(i,e)=>{if(typeof i!="number"||i<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},VQ=async(i,e,t)=>{const n=Number(await t.get(i)||0);return e-Date.now()+n},VL=async(i,e,t)=>{if(!e.throttle||!t)return!1;PQ(e.throttle,e.id);const n=e.id||i;return await VQ(n,e.throttle,t)>0?!0:(await t.set(n,Date.now().toString()),!1)},zL=()=>new ev(429,"Too Many Requests"),zQ=async(i,e,t,n)=>{const s=tw(n),a=s.publicKey||ir.publicKey,l=s.blockHeadless||ir.blockHeadless,u=s.storageProvider||ir.storageProvider,d={...ir.blockList,...s.blockList},p={...ir.limitRate,...s.limitRate};return l&&OL(navigator)?Promise.reject(UL()):(NL(a,i,e),NQ(t),t&&LL(d,t)?Promise.reject(PL()):await VL(location.pathname,p,u)?Promise.reject(zL()):DL("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:i,template_id:e,template_params:t}),{"Content-type":"application/json"}))},BQ=i=>{if(!i||i.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},FQ=i=>typeof i=="string"?document.querySelector(i):i,HQ=async(i,e,t,n)=>{const s=tw(n),a=s.publicKey||ir.publicKey,l=s.blockHeadless||ir.blockHeadless,u=ir.storageProvider||s.storageProvider,d={...ir.blockList,...s.blockList},p={...ir.limitRate,...s.limitRate};if(l&&OL(navigator))return Promise.reject(UL());const y=FQ(t);NL(a,i,e),BQ(y);const _=new FormData(y);return LL(d,_)?Promise.reject(PL()):await VL(location.pathname,p,u)?Promise.reject(zL()):(_.append("lib_version","4.4.1"),_.append("service_id",i),_.append("template_id",e),_.append("user_id",a),DL("/api/v1.0/email/send-form",_))},nM={init:DQ,send:zQ,sendForm:HQ,EmailJSResponseStatus:ev};function kQ(){const i=ce.useRef(),[e,t]=ce.useState({prenom:"",nom:"",email:"",telephone:"",service:"",date:"",heure:"",commentaires:""}),[n,s]=ce.useState([]),[a,l]=ce.useState(!1),[u,d]=ce.useState(null);ce.useEffect(()=>{p()},[]);const p=async()=>{try{const j=gd(Aa,"settings","weeklySchedule"),G=await o3(j);G.exists()?d(G.data()):d({monday:{open:!1,label:"Lundi"},tuesday:{open:!1,label:"Mardi"},wednesday:{open:!1,label:"Mercredi"},thursday:{open:!1,label:"Jeudi"},friday:{open:!1,label:"Vendredi"},saturday:{open:!0,label:"Samedi"},sunday:{open:!0,label:"Dimanche"}})}catch(j){console.error("Erreur chargement planning:",j),d({monday:{open:!1,label:"Lundi"},tuesday:{open:!1,label:"Mardi"},wednesday:{open:!1,label:"Mercredi"},thursday:{open:!1,label:"Jeudi"},friday:{open:!1,label:"Vendredi"},saturday:{open:!0,label:"Samedi"},sunday:{open:!0,label:"Dimanche"}})}},y=j=>{if(!u)return!1;const P=new Date(j+"T00:00:00").getDay(),I={0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"}[P];return u[I]?.open??!1},_=async(j,G,P)=>{try{const[L,I]=G.split(":").map(Number),O=L*60+I,F=O+P,Y=om(Th(Aa,"reservations"),yy("date","==",j)),q=await lm(Y);for(const de of q.docs){const ge=de.data(),[X,ee]=ge.heure.split(":").map(Number),ne=X*60+ee,pe=ne+ge.duration;if(O>=ne&&O<pe||F>ne&&F<=pe||O<=ne&&F>=pe)return!1}return!0}catch(L){return console.error("Erreur lors de la vrification de disponibilit:",L),!1}},S=async j=>{try{const G=om(Th(Aa,"blockedDates"),yy("date","==",j)),P=await lm(G);let L=!1,I=!1;return P.forEach(O=>{const F=O.data();F.actionType==="open"?L=!0:F.allDay&&(!F.actionType||F.actionType==="block")&&(I=!0)}),L?!1:!!I}catch(G){return console.error("Erreur vrification date bloque:",G),!1}},T=async j=>{try{const G=om(Th(Aa,"blockedDates"),yy("date","==",j),yy("allDay","==",!1)),P=await lm(G);let L=[];return P.forEach(I=>{const O=I.data();O.blockedHours&&Array.isArray(O.blockedHours)&&(L=[...L,...O.blockedHours])}),L}catch(G){return console.error("Erreur rcupration heures bloques:",G),[]}},M=async(j,G)=>{if(!G)return[];const P=[],L=540,I=13.5*60,O=840,F=1140,Y=await T(G),q=[];for(let de=L;de+j<=I;de+=30){const ge=Math.floor(de/60),X=de%60,ee=`${ge.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}`;Y.includes(ee)||q.push(ee)}for(let de=O;de+j<=F;de+=30){const ge=Math.floor(de/60),X=de%60,ee=`${ge.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}`;Y.includes(ee)||q.push(ee)}for(const de of q)await _(G,de,j)&&P.push(de);return P},C=async j=>{const G=j.target.value,P=_y.find(L=>L.id===G);if(P&&Ka("service_selected",{service_name:P.name,service_price:P.price}),t({...e,service:G,heure:""}),s([]),P&&e.date){const L=await M(P.duration,e.date);s(L)}},w=async j=>{const{name:G,value:P}=j.target;if(G==="date"){if(!P){t({...e,[G]:P});return}const L=om(Th(Aa,"blockedDates"),yy("date","==",P)),I=await lm(L);let O=!1;if(I.forEach(Y=>{Y.data().actionType==="open"&&(O=!0)}),!O&&!y(P)){const q=new Date(P+"T00:00:00").toLocaleDateString("fr-FR",{weekday:"long"});alert(`Dsol, nous sommes ferms le ${q}. Veuillez choisir un jour d'ouverture.`),t({...e,date:""});return}if(await S(P)){alert("Cette date n'est pas disponible. Veuillez choisir une autre date."),t({...e,date:""});return}if(Ka("date_selected",{selected_date:P}),e.service){const Y=_y.find(de=>de.id===e.service),q=await M(Y.duration,P);s(q)}}t({...e,[G]:P})},b=async j=>{if(j.preventDefault(),!y(e.date)){alert("Ce jour n'est pas disponible pour les rservations");return}l(!0);const G=_y.find(L=>L.id===e.service);if(Ka("booking_started",{service:G.name,service_price:G.price,date:e.date}),!await _(e.date,e.heure,G.duration)){Ka("booking_slot_unavailable",{service:G.name,requested_date:e.date,requested_time:e.heure}),alert("Dsol, ce crneau vient d'tre rserv. Veuillez en choisir un autre."),l(!1);const L=await M(G.duration,e.date);s(L);return}try{await c3(Th(Aa,"reservations"),{prenom:e.prenom,nom:e.nom,email:e.email,telephone:e.telephone,service:G.name,serviceId:e.service,date:e.date,heure:e.heure,duration:G.duration,commentaires:e.commentaires,timestamp:new Date});const L={to_name:e.prenom,from_name:`${e.prenom} ${e.nom}`,client_email:e.email,client_phone:e.telephone,service_name:`${G.name} - ${G.price}`,appointment_date:new Date(e.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),appointment_time:e.heure,comments:e.commentaires||"Aucun",address:"60 bd Pasteur 94260 - Sonner  Demoniere, prendre le 2me ascenseur prs des escaliers, sortir  gauche, sonner porte L",instructions:"Venez avec les cils propres et dmaquills. Attention : prsence de deux chats au domicile."};await nM.send("service_4t9ude2","template_z26jqp7",L,"vSn8lOsAhAksc03kS"),await nM.send("service_4t9ude2","template_8smxy0b",L,"vSn8lOsAhAksc03kS"),Ka("purchase",{transaction_id:`booking_${Date.now()}`,value:parseFloat(G.price.replace("","")),currency:"EUR",items:[{item_id:G.id,item_name:G.name,price:parseFloat(G.price.replace("",""))}]}),Ka("booking_completed",{service_name:G.name,service_id:G.id,service_price:G.price,booking_date:e.date,booking_time:e.heure,client_email:e.email}),alert("Rendez-vous confirm! Vous allez recevoir un email de confirmation."),t({prenom:"",nom:"",email:"",telephone:"",service:"",date:"",heure:"",commentaires:""}),s([])}catch(L){console.error("Erreur:",L),Ka("booking_error",{error_message:L.message,service:G.name,date:e.date,time:e.heure}),alert("Une erreur est survenue. Veuillez ressayer.")}finally{l(!1)}},D=()=>new Date().toISOString().split("T")[0],V=()=>{const j=new Date;return j.setMonth(j.getMonth()+3),j.toISOString().split("T")[0]},z=()=>{if(!u)return"";const j=[];if(["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].forEach(L=>{u[L]?.open&&j.push(u[L].label)}),j.length===0)return"Aucun jour d'ouverture configur";if(j.length===1)return j[0];if(j.length===2)return`${j[0]} et ${j[1]}`;const P=j.pop();return`${j.join(", ")} et ${P}`};return H.jsx("div",{className:"booking-container",id:"reservation",children:H.jsxs("form",{ref:i,onSubmit:b,className:"booking-form",children:[H.jsxs("div",{className:"form-row",children:[H.jsxs("div",{className:"form-group",children:[H.jsx("label",{htmlFor:"prenom",children:"Prnom "}),H.jsx("input",{type:"text",id:"prenom",name:"prenom",value:e.prenom,onChange:w,required:!0})]}),H.jsxs("div",{className:"form-group",children:[H.jsx("label",{htmlFor:"nom",children:"Nom "}),H.jsx("input",{type:"text",id:"nom",name:"nom",value:e.nom,onChange:w,required:!0})]})]}),H.jsxs("div",{className:"form-group",children:[H.jsx("label",{htmlFor:"email",children:"Email "}),H.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:w,required:!0})]}),H.jsxs("div",{className:"form-group",children:[H.jsx("label",{htmlFor:"telephone",children:"Tlphone "}),H.jsx("input",{type:"tel",id:"telephone",name:"telephone",value:e.telephone,onChange:w,required:!0})]}),H.jsxs("div",{className:"form-group",children:[H.jsxs("label",{htmlFor:"service",children:[H.jsx("i",{className:"fas fa-sparkles"})," Service souhait"]}),H.jsxs("div",{className:"select-wrapper",children:[H.jsxs("select",{id:"service",name:"service",value:e.service,onChange:C,required:!0,children:[H.jsx("option",{value:"",children:"Choisir un service"}),_y.map(j=>H.jsxs("option",{value:j.id,children:[j.name," - ",j.price]},j.id))]}),H.jsx("i",{className:"fas fa-chevron-down select-arrow"})]}),e.service&&H.jsx("p",{className:"service-description",children:_y.find(j=>j.id===e.service)?.description})]}),H.jsxs("div",{className:"form-group",children:[H.jsxs("label",{htmlFor:"date",children:[H.jsx("i",{className:"far fa-calendar-alt"})," Date souhaite"]}),u&&H.jsxs("p",{className:"opening-days-info",children:[H.jsx("i",{className:"fas fa-info-circle"})," Jours d'ouverture: ",H.jsx("strong",{children:z()})," sauf exception"]}),H.jsxs("div",{className:"date-input-container",children:[H.jsx("input",{type:"date",id:"date",name:"date",value:e.date,onChange:w,min:D(),max:V(),required:!0}),H.jsx("i",{className:"fas date-calendar-icon"})]})]}),H.jsx("div",{className:"form-row",children:H.jsxs("div",{className:"form-group",children:[H.jsxs("label",{htmlFor:"heure",children:[H.jsx("i",{className:"far fa-clock"})," Heure prfre"]}),H.jsxs("div",{className:"select-wrapper",children:[H.jsxs("select",{id:"heure",name:"heure",value:e.heure,onChange:w,disabled:!e.service||!e.date||n.length===0,required:!0,children:[H.jsx("option",{value:"",children:e.date?e.service?n.length===0?"Aucun crneau disponible":"Choisir un crneau":"Choisir d'abord un service":"Choisir d'abord une date"}),n.map(j=>H.jsx("option",{value:j,children:j},j))]}),H.jsx("i",{className:"fas fa-chevron-down select-arrow"})]})]})}),H.jsxs("div",{className:"form-group",children:[H.jsx("label",{htmlFor:"commentaires",children:"Commentaires ou demandes spciales"}),H.jsx("textarea",{id:"commentaires",name:"commentaires",value:e.commentaires,onChange:w,rows:"4",placeholder:"Premire fois ? Allergies ? Prfrences particulires ?"})]}),H.jsxs("div",{className:"info-box",children:[H.jsxs("h4",{children:[H.jsx("i",{className:"fas fa-info-circle"})," Informations importantes:"]}),H.jsxs("ul",{children:[H.jsx("li",{children:"Venez avec les cils propres et dmaquills"}),H.jsx("li",{children:"Attention : prsence de deux chats au domicile"})]})]}),H.jsx("button",{type:"submit",className:"submit-button",disabled:a,children:a?H.jsxs(H.Fragment,{children:[H.jsx("i",{className:"fas fa-spinner fa-spin"})," Envoi en cours..."]}):H.jsxs(H.Fragment,{children:[H.jsx("i",{className:"far fa-calendar-check"})," Confirmer le Rendez-vous"]})})]})})}function GQ(){const[i,e]=ce.useState(!1),t=ce.useRef(null);return ce.useEffect(()=>{const n=new IntersectionObserver(([s])=>{s.isIntersecting&&(e(!0),n.unobserve(s.target))},{threshold:.3});return t.current&&n.observe(t.current),()=>n.disconnect()},[]),H.jsx("section",{id:"rservation",ref:t,children:H.jsxs("div",{className:`reservation-container ${i?"fade-in-up":""}`,children:[H.jsx("h2",{children:"Rservation"}),H.jsx(kQ,{})]})})}function jQ(){const i=ce.useRef(null),[e,t]=ce.useState(!1);return ce.useEffect(()=>{const n=()=>{if(!i.current)return;const s=i.current.getBoundingClientRect().top,a=window.innerHeight;if(s<=a*.8){t(!0);const l=document.querySelector(".section-before-footer");l&&l.classList.add("slide-up")}};return window.addEventListener("scroll",n),n(),()=>{window.removeEventListener("scroll",n)}},[]),H.jsx("section",{id:"contact",children:H.jsx("footer",{ref:i,className:`footer ${e?"footer-visible":""}`,children:H.jsxs("div",{className:"footer-content",children:[H.jsxs("div",{className:"footer-main",children:[H.jsxs("div",{className:"footer-section",children:[H.jsx("h3",{className:"footer-logo",children:"Shiynelly Lashes"}),H.jsx("p",{className:"footer-tagline",children:"Extensions de cils"}),H.jsxs("div",{className:"footer-social",children:[H.jsx("a",{href:"https://www.instagram.com/shiynellylashes/",onClick:()=>{Ka("social_click",{platform:"instagram",location:"footer"})},target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",children:H.jsx("i",{className:"fab fa-instagram"})}),H.jsx("a",{href:"https://www.tiktok.com/@shiynellylashes",onClick:()=>{Ka("social_click",{platform:"tiktok",location:"footer"})},target:"_blank",rel:"noopener noreferrer","aria-label":"TikTok",children:H.jsx("i",{className:"fab fa-tiktok"})})]})]}),H.jsxs("div",{className:"footer-section",children:[H.jsx("h4",{children:"Navigation"}),H.jsxs("ul",{children:[H.jsx("li",{children:H.jsx("a",{href:"/",children:"Accueil"})}),H.jsx("li",{children:H.jsx("a",{href:"#nosprestations",children:"Nos Prestations"})}),H.jsx("li",{children:H.jsx("a",{href:"#contact",children:"Contact"})}),H.jsx("li",{children:H.jsx("a",{href:"#rservation",children:"Rservation"})})]})]}),H.jsxs("div",{className:"footer-section",children:[H.jsx("h4",{children:"Services"}),H.jsxs("ul",{children:[H.jsx("li",{children:H.jsx("a",{href:"#nosprestations",children:"Cils  Cils"})}),H.jsx("li",{children:H.jsx("a",{href:"#nosprestations",children:"Pose Whispy"})}),H.jsx("li",{children:H.jsx("a",{href:"#nosprestations",children:"Pose Russe"})}),H.jsx("li",{children:H.jsx("a",{href:"#nosprestations",children:"Clusters"})}),H.jsx("li",{children:H.jsx("a",{href:"#nosprestations",children:"Dpose"})})]})]}),H.jsxs("div",{className:"footer-section",children:[H.jsx("h4",{children:"Contact"}),H.jsxs("ul",{className:"footer-contact",children:[H.jsxs("li",{children:[H.jsx("i",{className:"fas fa-map-marker-alt"}),H.jsx("span",{children:"94260 Fresnes, France"})]}),H.jsxs("li",{children:[H.jsx("i",{className:"fas fa-envelope"}),H.jsx("a",{href:"mailto:studiobynelly@gmail.com",className:"email-link",children:H.jsx("span",{children:"studiobynelly@gmail.com"})})]})]})]})]}),H.jsxs("div",{className:"footer-bottom",children:[H.jsx("p",{children:" 2025 Unix Creative Studio. Tous droits rservs."}),H.jsxs("div",{className:"footer-legal",children:[H.jsx("a",{href:"https://mixed-stoat-359.notion.site/Terms-and-Conditions-28788674cf3280a286eaf731367bed4b?source=copy_link",children:"Mentions lgales"}),H.jsx("span",{children:""}),H.jsx("a",{href:"https://mixed-stoat-359.notion.site/Privacy-Policy-28788674cf3280b3a03dd515020f46f2?source=copy_link",children:"Politique de confidentialit"})]})]})]})})})}function WI(){const[i,e]=ce.useState(!1);ce.useEffect(()=>{try{typeof Ka=="function"&&Ka("page_view",{page_title:document.title,page_location:window.location.href})}catch(a){console.error("Analytics error:",a)}sessionStorage.getItem("hasSeenPriceAnnouncement")||setTimeout(()=>{e(!0)},1e3)},[]);const t=()=>{e(!1),sessionStorage.setItem("hasSeenPriceAnnouncement","true")},n=()=>{t(),setTimeout(()=>{const s=document.getElementById("reservation");s&&s.scrollIntoView({behavior:"smooth",block:"start"})},300)};return H.jsxs(H.Fragment,{children:[i&&H.jsxs(H.Fragment,{children:[H.jsx("div",{className:"modal-overlay",onClick:t}),H.jsxs("div",{className:"price-modal",children:[H.jsx("button",{className:"modal-close",onClick:t,"aria-label":"Fermer",children:H.jsx("i",{className:"fas fa-times"})}),H.jsxs("div",{className:"modal-content",children:[H.jsx("div",{className:"modal-icon",children:H.jsx("i",{className:"fas fa-info-circle"})}),H.jsx("h2",{children:"Information Importante"}),H.jsxs("p",{className:"modal-message",children:[" partir du ",H.jsx("strong",{children:"1er janvier 2026"}),", nos tarifs volueront pour reflter la qualit de nos prestations."]}),H.jsxs("div",{className:"modal-highlight",children:[H.jsx("i",{className:"fas fa-calendar-alt"}),H.jsx("span",{children:"Profitez de nos tarifs actuels jusqu'au 31 dcembre 2025 !"})]}),H.jsxs("button",{className:"modal-cta",onClick:n,children:[H.jsx("i",{className:"far fa-calendar-check"}),"Prendre Rendez-vous"]}),H.jsx("button",{className:"modal-secondary",onClick:t,children:"J'ai compris"})]})]})]}),H.jsx(k8,{}),H.jsx(wQ,{}),H.jsx(CQ,{}),H.jsx(GQ,{}),H.jsx(jQ,{})]})}function qQ({onLoginSuccess:i}){const[e,t]=ce.useState(""),[n,s]=ce.useState(""),[a,l]=ce.useState(""),[u,d]=ce.useState(!1),p=async y=>{y.preventDefault(),l(""),d(!0);try{await Tk(SS,e,n),i()}catch(_){l("Email ou mot de passe incorrect"),console.error("Login error:",_)}finally{d(!1)}};return H.jsx("div",{className:"admin-login-container",children:H.jsxs("div",{className:"admin-login-box",children:[H.jsx("h1",{children:" Admin Panel"}),H.jsx("p",{children:"Connexion requise"}),H.jsxs("form",{onSubmit:p,className:"admin-login-form",children:[H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Email"}),H.jsx("input",{type:"email",value:e,onChange:y=>t(y.target.value),required:!0,placeholder:"votre@email.com"})]}),H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Mot de passe"}),H.jsx("input",{type:"password",value:n,onChange:y=>s(y.target.value),required:!0,placeholder:""})]}),a&&H.jsx("div",{className:"error-message",children:a}),H.jsx("button",{type:"submit",disabled:u,className:"login-button",children:u?"Connexion...":"Se connecter"})]})]})})}function XQ(){const[i,e]=ce.useState([]),[t,n]=ce.useState(!0);ce.useEffect(()=>{s()},[]);const s=async()=>{try{const d=om(Th(Aa,"reservations"),s3("timestamp","desc")),p=await lm(d),y=[],_=new Date;p.forEach(S=>{const T={id:S.id,...S.data()},M=new Date(T.date+"T"+T.heure);T.isPast=M<_,y.push(T)}),e(y)}catch(d){console.error("Erreur chargement rservations:",d)}finally{n(!1)}},a=async d=>{const p=i.find(y=>y.id===d);if(window.confirm("tes-vous sr de vouloir annuler cette rservation?"))try{await RA(gd(Aa,"reservations",d));try{const y={to_name:p.prenom,from_name:"Shiynelly Lashes",client_email:p.email,service_name:p.service,appointment_date:new Date(p.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),appointment_time:p.heure,booking_link:"https://shiynellylashes.com/#/"};await nM.send("service_4t9ude2","template_it6eot2",y,"vSn8lOsAhAksc03kS"),console.log("Email d'annulation envoy")}catch(y){console.error("Erreur email:",y)}e(i.filter(y=>y.id!==d)),alert("Rservation annule et email envoy au client")}catch(y){console.error("Erreur suppression:",y),alert("Erreur lors de l'annulation")}};if(t)return H.jsx("div",{className:"loading",children:"Chargement..."});const l=i.filter(d=>!d.isPast),u=i.filter(d=>d.isPast);return H.jsxs("div",{className:"bookings-list",children:[H.jsxs("h2",{children:[H.jsx("i",{className:"fa-solid fa-calendar-check"})," Rservations  venir (",l.length,")"]}),l.length===0?H.jsx("p",{className:"no-bookings",children:"Aucune rservation  venir"}):H.jsx("div",{className:"bookings-table",children:l.map(d=>H.jsxs("div",{className:"booking-card",children:[H.jsxs("div",{className:"booking-header",children:[H.jsxs("h3",{children:[d.prenom," ",d.nom]}),H.jsx("span",{className:"booking-service",children:d.service})]}),H.jsxs("div",{className:"booking-details",children:[H.jsxs("p",{children:[H.jsx("i",{className:"fa-solid fa-calendar"})," ",H.jsx("strong",{children:"Date:"})," ",new Date(d.date).toLocaleDateString("fr-FR")]}),H.jsxs("p",{children:[H.jsx("i",{className:"fa-solid fa-clock"})," ",H.jsx("strong",{children:"Heure:"})," ",d.heure]}),H.jsxs("p",{children:[H.jsx("i",{className:"fa-solid fa-envelope"})," ",H.jsx("strong",{children:"Email:"})," ",d.email]}),H.jsxs("p",{children:[H.jsx("i",{className:"fa-solid fa-phone"})," ",H.jsx("strong",{children:"Tlphone:"})," ",d.telephone]}),d.commentaires&&H.jsxs("p",{children:[H.jsx("i",{className:"fa-solid fa-comment"})," ",H.jsx("strong",{children:"Commentaires:"})," ",d.commentaires]})]}),H.jsxs("button",{onClick:()=>a(d.id),className:"delete-button",children:[H.jsx("i",{className:"fa-solid fa-trash-can"})," Annuler"]})]},d.id))}),u.length>0&&H.jsxs(H.Fragment,{children:[H.jsxs("h2",{style:{marginTop:"40px"},children:[H.jsx("i",{className:"fa-solid fa-circle-check"})," Rservations termines (",u.length,")"]}),H.jsx("div",{className:"bookings-table",children:u.map(d=>H.jsxs("div",{className:"booking-card booking-past",children:[H.jsxs("div",{className:"booking-header",children:[H.jsxs("h3",{children:[d.prenom," ",d.nom]}),H.jsxs("div",{className:"booking-header-badges",children:[H.jsx("span",{className:"booking-service booking-service-past",children:d.service}),H.jsxs("span",{className:"badge-completed",children:[H.jsx("i",{className:"fa-solid fa-circle-check"})," Termine"]})]})]}),H.jsxs("div",{className:"booking-details",children:[H.jsxs("p",{children:[H.jsx("i",{className:"fa-solid fa-calendar"})," ",H.jsx("strong",{children:"Date:"})," ",new Date(d.date).toLocaleDateString("fr-FR")]}),H.jsxs("p",{children:[H.jsx("i",{className:"fa-solid fa-clock"})," ",H.jsx("strong",{children:"Heure:"})," ",d.heure]}),H.jsxs("p",{children:[H.jsx("i",{className:"fa-solid fa-envelope"})," ",H.jsx("strong",{children:"Email:"})," ",d.email]}),H.jsxs("p",{children:[H.jsx("i",{className:"fa-solid fa-phone"})," ",H.jsx("strong",{children:"Tlphone:"})," ",d.telephone]}),d.commentaires&&H.jsxs("p",{children:[H.jsx("i",{className:"fa-solid fa-comment"})," ",H.jsx("strong",{children:"Commentaires:"})," ",d.commentaires]})]}),H.jsxs("button",{onClick:()=>a(d.id),className:"delete-button delete-button-past",children:[H.jsx("i",{className:"fa-solid fa-trash-can"})," Supprimer"]})]},d.id))})]})]})}function WQ(){const[i,e]=ce.useState([]),[t,n]=ce.useState(!0),[s,a]=ce.useState(!1),[l,u]=ce.useState("block"),[d,p]=ce.useState("single"),[y,_]=ce.useState(""),[S,T]=ce.useState(""),[M,C]=ce.useState(""),[w,b]=ce.useState(""),[D,V]=ce.useState("allDay"),[z,j]=ce.useState([]),G=["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30"];ce.useEffect(()=>{P()},[]);const P=async()=>{try{const re=om(Th(Aa,"blockedDates"),s3("date","asc")),J=await lm(re),le=[];J.forEach(De=>{le.push({id:De.id,...De.data()})}),e(le)}catch(re){console.error("Erreur chargement dates:",re)}finally{n(!1)}},L=re=>{z.includes(re)?j(z.filter(J=>J!==re)):j([...z,re])},I=(re,J)=>{const le=[],De=new Date(re+"T00:00:00"),Re=new Date(J+"T00:00:00");for(;De<=Re;)le.push(De.toISOString().split("T")[0]),De.setDate(De.getDate()+1);return le},O=async re=>{re.preventDefault();let J=[];if(d==="range"){if(!S||!M){alert("Veuillez slectionner une date de dbut et de fin");return}if(new Date(S)>new Date(M)){alert("La date de dbut doit tre avant la date de fin");return}J=I(S,M)}else{if(!y){alert("Veuillez slectionner une date");return}J=[y]}if(D==="hours"&&z.length===0&&l==="block"){alert("Veuillez slectionner au moins une heure");return}try{const le=J.map(async De=>{const Re={date:De,reason:w||(l==="open"?"Ouvert exceptionnellement":"Ferm"),allDay:D==="allDay",actionType:l};return D==="hours"&&(Re.blockedHours=z),d==="range"&&(Re.isRange=!0,Re.rangeStart=S,Re.rangeEnd=M),c3(Th(Aa,"blockedDates"),Re)});await Promise.all(le),_(""),T(""),C(""),b(""),V("allDay"),j([]),p("single"),u("block"),a(!1),P(),alert(`${J.length} date(s) ${l==="open"?"ouverte(s)":"bloque(s)"} avec succs!`)}catch(le){console.error("Erreur ajout date:",le),alert("Erreur lors de l'ajout: "+le.message)}},F=async re=>{if(window.confirm("Supprimer cette date?"))try{await RA(gd(Aa,"blockedDates",re)),e(i.filter(J=>J.id!==re)),alert("Date supprime!")}catch(J){console.error("Erreur suppression:",J),alert("Erreur lors de la suppression")}},Y=async(re,J)=>{if(window.confirm(`Supprimer toutes les dates du ${re} au ${J}?`))try{const le=i.filter(Re=>Re.isRange&&Re.rangeStart===re&&Re.rangeEnd===J),De=le.map(Re=>RA(gd(Aa,"blockedDates",Re.id)));await Promise.all(De),e(i.filter(Re=>!(Re.isRange&&Re.rangeStart===re&&Re.rangeEnd===J))),alert(`Priode supprime (${le.length} dates)!`)}catch(le){console.error("Erreur suppression:",le),alert("Erreur lors de la suppression")}},q=()=>{const re={},J=[];return i.forEach(le=>{if(le.isRange){const De=`${le.rangeStart}_${le.rangeEnd}_${le.reason}_${le.actionType}`;re[De]||(re[De]={rangeStart:le.rangeStart,rangeEnd:le.rangeEnd,reason:le.reason,allDay:le.allDay,blockedHours:le.blockedHours,actionType:le.actionType,dates:[]}),re[De].dates.push(le)}else J.push(le)}),{ranges:Object.values(re),singles:J}};if(t)return H.jsx("div",{className:"loading",children:"Chargement..."});const{ranges:de,singles:ge}=q(),X=de.filter(re=>re.actionType==="block"||!re.actionType),ee=de.filter(re=>re.actionType==="open"),ne=ge.filter(re=>re.actionType==="block"||!re.actionType),pe=ge.filter(re=>re.actionType==="open");return H.jsxs("div",{className:"blocked-dates-manager",children:[H.jsxs("div",{className:"section-header",children:[H.jsxs("h2",{children:[H.jsx("i",{className:"fa-solid fa-lock"})," Gestion des Dates (",i.length,")"]}),H.jsx("button",{onClick:()=>a(!s),className:"add-button",children:s?H.jsxs(H.Fragment,{children:[H.jsx("i",{className:"fa-solid fa-xmark"})," Annuler"]}):H.jsxs(H.Fragment,{children:[H.jsx("i",{className:"fa-solid fa-plus"})," Ajouter une date"]})})]}),s&&H.jsxs("form",{onSubmit:O,className:"block-date-form",children:[H.jsxs("div",{className:"form-group",children:[H.jsxs("label",{children:[H.jsx("i",{className:"fa-solid fa-toggle-on"})," Action"]}),H.jsxs("div",{className:"radio-group",children:[H.jsxs("label",{className:"radio-label-primary",children:[H.jsx("input",{type:"radio",value:"block",checked:l==="block",onChange:re=>u(re.target.value)}),H.jsxs("span",{className:"block-badge",children:[H.jsx("i",{className:"fa-solid fa-lock"})," Bloquer (Fermer)"]})]}),H.jsxs("label",{className:"radio-label-success",children:[H.jsx("input",{type:"radio",value:"open",checked:l==="open",onChange:re=>u(re.target.value)}),H.jsxs("span",{className:"open-badge",children:[H.jsx("i",{className:"fa-solid fa-circle-check"})," Ouvrir exceptionnellement"]})]})]}),H.jsx("p",{className:"help-text",children:l==="block"?" Fermez des dates normalement ouvertes (ex: vacances, week-end de Nol)":"Ouvrez des dates normalement fermes (ex: vendredi exceptionnel)"})]}),H.jsxs("div",{className:"form-group",children:[H.jsxs("label",{children:[H.jsx("i",{className:"fa-solid fa-calendar"})," Mode de slection"]}),H.jsxs("div",{className:"radio-group",children:[H.jsxs("label",{children:[H.jsx("input",{type:"radio",value:"single",checked:d==="single",onChange:re=>p(re.target.value)}),"Date unique"]}),H.jsxs("label",{children:[H.jsx("input",{type:"radio",value:"range",checked:d==="range",onChange:re=>p(re.target.value)}),"Priode (plusieurs jours)"]})]})]}),d==="single"?H.jsxs("div",{className:"form-group",children:[H.jsxs("label",{children:[H.jsx("i",{className:"fa-solid fa-calendar-day"})," Date  ",l==="open"?"ouvrir":"bloquer"]}),H.jsx("input",{type:"date",value:y,onChange:re=>_(re.target.value),required:!0})]}):H.jsxs("div",{className:"form-row",children:[H.jsxs("div",{className:"form-group",children:[H.jsxs("label",{children:[H.jsx("i",{className:"fa-solid fa-calendar-day"})," Date de dbut"]}),H.jsx("input",{type:"date",value:S,onChange:re=>T(re.target.value),required:!0})]}),H.jsxs("div",{className:"form-group",children:[H.jsxs("label",{children:[H.jsx("i",{className:"fa-solid fa-calendar-day"})," Date de fin"]}),H.jsx("input",{type:"date",value:M,onChange:re=>C(re.target.value),required:!0})]})]}),H.jsxs("div",{className:"form-group",children:[H.jsxs("label",{children:[H.jsx("i",{className:"fa-solid fa-comment"})," Raison"]}),H.jsx("input",{type:"text",value:w,onChange:re=>b(re.target.value),placeholder:l==="open"?"Ex: Vendredi exceptionnel, Jour fri compens":"Ex: Congs d't, Vacances de Nol"})]}),l==="block"&&H.jsxs(H.Fragment,{children:[H.jsxs("div",{className:"form-group",children:[H.jsxs("label",{children:[H.jsx("i",{className:"fa-solid fa-clock"})," Type de blocage"]}),H.jsxs("div",{className:"radio-group",children:[H.jsxs("label",{children:[H.jsx("input",{type:"radio",value:"allDay",checked:D==="allDay",onChange:re=>V(re.target.value)}),"Toute la journe"]}),H.jsxs("label",{children:[H.jsx("input",{type:"radio",value:"hours",checked:D==="hours",onChange:re=>V(re.target.value)}),"Heures spcifiques"]})]})]}),D==="hours"&&H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Slectionnez les heures  bloquer:"}),H.jsx("div",{className:"hours-grid",children:G.map(re=>H.jsx("button",{type:"button",onClick:()=>L(re),className:`hour-button ${z.includes(re)?"selected":""}`,children:re},re))})]})]}),H.jsx("button",{type:"submit",className:`submit-button ${l==="open"?"submit-open":"submit-block"}`,children:l==="open"?H.jsxs(H.Fragment,{children:[H.jsx("i",{className:"fa-solid fa-lock-open"})," Ouvrir ",d==="range"?"cette priode":"cette date"]}):H.jsxs(H.Fragment,{children:[H.jsx("i",{className:"fa-solid fa-lock"})," Bloquer ",d==="range"?"cette priode":"cette date"]})})]}),H.jsxs("div",{className:"blocked-dates-list",children:[(ee.length>0||pe.length>0)&&H.jsxs("div",{className:"open-section",children:[H.jsxs("h3",{children:[H.jsx("i",{className:"fa-solid fa-lock-open"})," Dates Ouvertes Exceptionnellement"]}),ee.length>0&&ee.map((re,J)=>H.jsxs("div",{className:"open-range-card",children:[H.jsxs("div",{className:"date-info",children:[H.jsxs("h3",{children:[H.jsx("i",{className:"fa-solid fa-calendar-days"})," Du ",new Date(re.rangeStart+"T00:00:00").toLocaleDateString("fr-FR")," au ",new Date(re.rangeEnd+"T00:00:00").toLocaleDateString("fr-FR")]}),H.jsx("p",{className:"reason",children:re.reason}),H.jsxs("p",{className:"date-count",children:[re.dates.length," jour(s) ouvert(s)"]}),H.jsxs("span",{className:"badge open-badge",children:[H.jsx("i",{className:"fa-solid fa-circle-check"})," Ouvert"]})]}),H.jsxs("button",{onClick:()=>Y(re.rangeStart,re.rangeEnd),className:"delete-button",children:[H.jsx("i",{className:"fa-solid fa-trash-can"})," Supprimer"]})]},J)),pe.length>0&&pe.map(re=>H.jsxs("div",{className:"open-date-card",children:[H.jsxs("div",{className:"date-info",children:[H.jsxs("h3",{children:[H.jsx("i",{className:"fa-solid fa-calendar-day"})," ",new Date(re.date+"T00:00:00").toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),H.jsx("p",{className:"reason",children:re.reason}),H.jsxs("span",{className:"badge open-badge",children:[H.jsx("i",{className:"fa-solid fa-circle-check"})," Ouvert"]})]}),H.jsxs("button",{onClick:()=>F(re.id),className:"delete-button",children:[H.jsx("i",{className:"fa-solid fa-trash-can"})," Supprimer"]})]},re.id))]}),(X.length>0||ne.length>0)&&H.jsxs("div",{className:"blocked-section",children:[H.jsxs("h3",{children:[H.jsx("i",{className:"fa-solid fa-lock"})," Dates Bloques"]}),X.length>0&&X.map((re,J)=>H.jsxs("div",{className:"blocked-range-card",children:[H.jsxs("div",{className:"date-info",children:[H.jsxs("h3",{children:[H.jsx("i",{className:"fa-solid fa-calendar-days"})," Du ",new Date(re.rangeStart+"T00:00:00").toLocaleDateString("fr-FR")," au ",new Date(re.rangeEnd+"T00:00:00").toLocaleDateString("fr-FR")]}),H.jsx("p",{className:"reason",children:re.reason}),H.jsxs("p",{className:"date-count",children:[re.dates.length," jour(s) bloqu(s)"]}),re.allDay?H.jsx("span",{className:"badge all-day",children:"Toute la journe"}):H.jsxs("div",{className:"blocked-hours",children:[H.jsx("span",{className:"badge",children:"Heures bloques:"}),H.jsx("div",{className:"hours-list",children:re.blockedHours?.map(le=>H.jsx("span",{className:"hour-tag",children:le},le))})]})]}),H.jsxs("button",{onClick:()=>Y(re.rangeStart,re.rangeEnd),className:"delete-button",children:[H.jsx("i",{className:"fa-solid fa-trash-can"})," Supprimer"]})]},J)),ne.length>0&&ne.map(re=>H.jsxs("div",{className:"blocked-date-card",children:[H.jsxs("div",{className:"date-info",children:[H.jsxs("h3",{children:[H.jsx("i",{className:"fa-solid fa-calendar-day"})," ",new Date(re.date+"T00:00:00").toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),H.jsx("p",{className:"reason",children:re.reason}),re.allDay?H.jsx("span",{className:"badge all-day",children:"Toute la journe"}):H.jsxs("div",{className:"blocked-hours",children:[H.jsx("span",{className:"badge",children:"Heures bloques:"}),H.jsx("div",{className:"hours-list",children:re.blockedHours?.map(J=>H.jsx("span",{className:"hour-tag",children:J},J))})]})]}),H.jsxs("button",{onClick:()=>F(re.id),className:"delete-button",children:[H.jsx("i",{className:"fa-solid fa-trash-can"})," Supprimer"]})]},re.id))]}),i.length===0&&H.jsx("p",{className:"no-dates",children:"Aucune date configure"})]})]})}function YQ(){const[i,e]=ce.useState({monday:{open:!1,label:"Lundi"},tuesday:{open:!1,label:"Mardi"},wednesday:{open:!1,label:"Mercredi"},thursday:{open:!1,label:"Jeudi"},friday:{open:!1,label:"Vendredi"},saturday:{open:!0,label:"Samedi"},sunday:{open:!0,label:"Dimanche"}}),[t,n]=ce.useState(!0),[s,a]=ce.useState(!1);ce.useEffect(()=>{l()},[]);const l=async()=>{try{const y=gd(Aa,"settings","weeklySchedule"),_=await o3(y);if(_.exists()){const S=_.data();e(T=>({...T,...S}))}}catch(y){console.error("Erreur chargement planning hebdomadaire:",y)}finally{n(!1)}},u=async y=>{const _={...i,[y]:{...i[y],open:!i[y].open}};e(_);try{a(!0),await i6(gd(Aa,"settings","weeklySchedule"),_),alert(`${_[y].label} ${_[y].open?"ouvert":"ferm"}!`)}catch(S){console.error("Erreur sauvegarde:",S),alert("Erreur lors de la sauvegarde"),e(i)}finally{a(!1)}};if(t)return H.jsx("div",{className:"loading",children:"Chargement..."});const d=Object.values(i).filter(y=>y.open).length,p=7-d;return H.jsxs("div",{className:"weekly-availability",children:[H.jsxs("div",{className:"section-header",children:[H.jsxs("h2",{children:[H.jsx("i",{className:"fa-solid fa-calendar"})," Jours d'ouverture"]}),H.jsx("p",{className:"subtitle",children:"Slectionnez les jours o vous acceptez des rendez-vous"})]}),d===0&&H.jsxs("div",{className:"warning-box",children:[H.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),H.jsx("strong",{children:"Attention:"})," Aucun jour n'est ouvert. Les clients ne pourront pas rserver."]}),H.jsx("div",{className:"days-grid",children:Object.entries(i).map(([y,_])=>H.jsxs("div",{className:`day-card ${_.open?"open":"closed"}`,children:[H.jsxs("div",{className:"day-info",children:[H.jsx("h3",{children:_.label}),H.jsx("span",{className:`status ${_.open?"open":"closed"}`,children:_.open?H.jsxs(H.Fragment,{children:[H.jsx("i",{className:"fa-solid fa-circle-check"})," Ouvert"]}):H.jsxs(H.Fragment,{children:[H.jsx("i",{className:"fa-solid fa-circle-xmark"})," Ferm"]})})]}),H.jsx("button",{onClick:()=>u(y),disabled:s,className:`toggle-button ${_.open?"close":"open"}`,children:_.open?H.jsxs(H.Fragment,{children:[H.jsx("i",{className:"fa-solid fa-xmark"})," Fermer"]}):H.jsxs(H.Fragment,{children:[H.jsx("i",{className:"fa-solid fa-check"})," Ouvrir"]})})]},y))}),H.jsxs("div",{className:"summary-card",children:[H.jsxs("h3",{children:[H.jsx("i",{className:"fa-solid fa-chart-simple"})," Rsum"]}),H.jsxs("div",{className:"summary-content",children:[H.jsxs("div",{className:"summary-item",children:[H.jsx("span",{className:"label",children:"Jours ouverts:"}),H.jsxs("span",{className:"value open",children:[d," jour",d>1?"s":""]})]}),H.jsxs("div",{className:"summary-item",children:[H.jsx("span",{className:"label",children:"Jours ferms:"}),H.jsxs("span",{className:"value closed",children:[p," jour",p>1?"s":""]})]})]})]}),H.jsxs("div",{className:"info-box",children:[H.jsxs("p",{children:[H.jsx("i",{className:"fa-solid fa-lightbulb"})," ",H.jsx("strong",{children:"Comment a marche:"})]}),H.jsxs("ul",{children:[H.jsx("li",{children:"Par dfaut, tous les jours sont ferms"}),H.jsx("li",{children:"Ouvrez uniquement les jours o vous travaillez"}),H.jsx("li",{children:"Les clients ne pourront rserver QUE sur les jours ouverts"}),H.jsx("li",{children:`Pour bloquer une date spcifique (vacances), utilisez l'onglet "Dates Bloques"`})]})]})]})}function KQ(){const[i,e]=ce.useState(null),[t,n]=ce.useState(!0),[s,a]=ce.useState("bookings");ce.useEffect(()=>{const u=Mk(SS,d=>{e(d),n(!1)});return()=>u()},[]);const l=async()=>{try{await wk(SS)}catch(u){console.error("Erreur dconnexion:",u)}};return t?H.jsx("div",{className:"loading",children:"Chargement..."}):i?H.jsxs("div",{className:"admin-panel",children:[H.jsxs("header",{className:"admin-header",children:[H.jsx("h1",{children:"Admin Panel - Shiynelly Lashes"}),H.jsxs("div",{className:"admin-nav",children:[H.jsxs("button",{className:`nav-btn ${s==="bookings"?"active":""}`,onClick:()=>a("bookings"),children:[H.jsx("i",{className:"fa-solid fa-calendar-check"})," Rservations"]}),H.jsxs("button",{className:`nav-btn ${s==="weekly"?"active":""}`,onClick:()=>a("weekly"),children:[H.jsx("i",{className:"fa-solid fa-calendar"})," Jours d'ouverture"]}),H.jsxs("button",{className:`nav-btn ${s==="blocked"?"active":""}`,onClick:()=>a("blocked"),children:[H.jsx("i",{className:"fa-solid fa-lock"})," Dates Bloques"]}),H.jsxs("button",{onClick:l,className:"logout-button",children:[H.jsx("i",{className:"fa-solid fa-arrow-right-from-bracket"})," Dconnexion"]})]})]}),H.jsxs("main",{className:"admin-content",children:[s==="bookings"&&H.jsx(XQ,{}),s==="weekly"&&H.jsx(YQ,{}),s==="blocked"&&H.jsx(WQ,{})]})]}):H.jsx(qQ,{onLoginSuccess:()=>e(SS.currentUser)})}function QQ(){return H.jsx($4,{children:H.jsxs(I4,{children:[H.jsx(oS,{path:"/",element:H.jsx(WI,{})}),H.jsx(oS,{path:"/admin",element:H.jsx(KQ,{})}),H.jsx(oS,{path:"*",element:H.jsx(WI,{})})]})})}BP.createRoot(document.getElementById("root")).render(H.jsx(ce.StrictMode,{children:H.jsx(QQ,{})}));
