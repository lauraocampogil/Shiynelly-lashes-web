(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function QT(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var zx={exports:{}},hg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mM;function HN(){if(mM)return hg;mM=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,r){var u=null;if(r!==void 0&&(u=""+r),s.key!==void 0&&(u=""+s.key),"key"in s){r={};for(var f in s)f!=="key"&&(r[f]=s[f])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:u,ref:s!==void 0?s:null,props:r}}return hg.Fragment=t,hg.jsx=e,hg.jsxs=e,hg}var gM;function GN(){return gM||(gM=1,zx.exports=HN()),zx.exports}var ht=GN(),Vx={exports:{}},cn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _M;function kN(){if(_M)return cn;_M=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),S=Symbol.iterator;function T(J){return J===null||typeof J!="object"?null:(J=S&&J[S]||J["@@iterator"],typeof J=="function"?J:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,w={};function M(J,ut,Ot){this.props=J,this.context=ut,this.refs=w,this.updater=Ot||R}M.prototype.isReactComponent={},M.prototype.setState=function(J,ut){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,ut,"setState")},M.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function O(){}O.prototype=M.prototype;function z(J,ut,Ot){this.props=J,this.context=ut,this.refs=w,this.updater=Ot||R}var V=z.prototype=new O;V.constructor=z,C(V,M.prototype),V.isPureReactComponent=!0;var j=Array.isArray;function q(){}var L={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function D(J,ut,Ot){var Lt=Ot.ref;return{$$typeof:i,type:J,key:ut,ref:Lt!==void 0?Lt:null,props:Ot}}function U(J,ut){return D(J.type,ut,J.props)}function F(J){return typeof J=="object"&&J!==null&&J.$$typeof===i}function Y(J){var ut={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Ot){return ut[Ot]})}var G=/\/+/g;function gt(J,ut){return typeof J=="object"&&J!==null&&J.key!=null?Y(""+J.key):ut.toString(36)}function vt(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(q,q):(J.status="pending",J.then(function(ut){J.status==="pending"&&(J.status="fulfilled",J.value=ut)},function(ut){J.status==="pending"&&(J.status="rejected",J.reason=ut)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function k(J,ut,Ot,Lt,ee){var xt=typeof J;(xt==="undefined"||xt==="boolean")&&(J=null);var It=!1;if(J===null)It=!0;else switch(xt){case"bigint":case"string":case"number":It=!0;break;case"object":switch(J.$$typeof){case i:case t:It=!0;break;case _:return It=J._init,k(It(J._payload),ut,Ot,Lt,ee)}}if(It)return ee=ee(J),It=Lt===""?"."+gt(J,0):Lt,j(ee)?(Ot="",It!=null&&(Ot=It.replace(G,"$&/")+"/"),k(ee,ut,Ot,"",function(Ee){return Ee})):ee!=null&&(F(ee)&&(ee=U(ee,Ot+(ee.key==null||J&&J.key===ee.key?"":(""+ee.key).replace(G,"$&/")+"/")+It)),ut.push(ee)),1;It=0;var ae=Lt===""?".":Lt+":";if(j(J))for(var de=0;de<J.length;de++)Lt=J[de],xt=ae+gt(Lt,de),It+=k(Lt,ut,Ot,xt,ee);else if(de=T(J),typeof de=="function")for(J=de.call(J),de=0;!(Lt=J.next()).done;)Lt=Lt.value,xt=ae+gt(Lt,de++),It+=k(Lt,ut,Ot,xt,ee);else if(xt==="object"){if(typeof J.then=="function")return k(vt(J),ut,Ot,Lt,ee);throw ut=String(J),Error("Objects are not valid as a React child (found: "+(ut==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":ut)+"). If you meant to render a collection of children, use an array instead.")}return It}function et(J,ut,Ot){if(J==null)return J;var Lt=[],ee=0;return k(J,Lt,"","",function(xt){return ut.call(Ot,xt,ee++)}),Lt}function nt(J){if(J._status===-1){var ut=J._result;ut=ut(),ut.then(function(Ot){(J._status===0||J._status===-1)&&(J._status=1,J._result=Ot)},function(Ot){(J._status===0||J._status===-1)&&(J._status=2,J._result=Ot)}),J._status===-1&&(J._status=0,J._result=ut)}if(J._status===1)return J._result.default;throw J._result}var ft=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ut=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(ut))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},wt={map:et,forEach:function(J,ut,Ot){et(J,function(){ut.apply(this,arguments)},Ot)},count:function(J){var ut=0;return et(J,function(){ut++}),ut},toArray:function(J){return et(J,function(ut){return ut})||[]},only:function(J){if(!F(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return cn.Activity=y,cn.Children=wt,cn.Component=M,cn.Fragment=e,cn.Profiler=s,cn.PureComponent=z,cn.StrictMode=n,cn.Suspense=d,cn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,cn.__COMPILER_RUNTIME={__proto__:null,c:function(J){return L.H.useMemoCache(J)}},cn.cache=function(J){return function(){return J.apply(null,arguments)}},cn.cacheSignal=function(){return null},cn.cloneElement=function(J,ut,Ot){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var Lt=C({},J.props),ee=J.key;if(ut!=null)for(xt in ut.key!==void 0&&(ee=""+ut.key),ut)!P.call(ut,xt)||xt==="key"||xt==="__self"||xt==="__source"||xt==="ref"&&ut.ref===void 0||(Lt[xt]=ut[xt]);var xt=arguments.length-2;if(xt===1)Lt.children=Ot;else if(1<xt){for(var It=Array(xt),ae=0;ae<xt;ae++)It[ae]=arguments[ae+2];Lt.children=It}return D(J.type,ee,Lt)},cn.createContext=function(J){return J={$$typeof:u,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:r,_context:J},J},cn.createElement=function(J,ut,Ot){var Lt,ee={},xt=null;if(ut!=null)for(Lt in ut.key!==void 0&&(xt=""+ut.key),ut)P.call(ut,Lt)&&Lt!=="key"&&Lt!=="__self"&&Lt!=="__source"&&(ee[Lt]=ut[Lt]);var It=arguments.length-2;if(It===1)ee.children=Ot;else if(1<It){for(var ae=Array(It),de=0;de<It;de++)ae[de]=arguments[de+2];ee.children=ae}if(J&&J.defaultProps)for(Lt in It=J.defaultProps,It)ee[Lt]===void 0&&(ee[Lt]=It[Lt]);return D(J,xt,ee)},cn.createRef=function(){return{current:null}},cn.forwardRef=function(J){return{$$typeof:f,render:J}},cn.isValidElement=F,cn.lazy=function(J){return{$$typeof:_,_payload:{_status:-1,_result:J},_init:nt}},cn.memo=function(J,ut){return{$$typeof:m,type:J,compare:ut===void 0?null:ut}},cn.startTransition=function(J){var ut=L.T,Ot={};L.T=Ot;try{var Lt=J(),ee=L.S;ee!==null&&ee(Ot,Lt),typeof Lt=="object"&&Lt!==null&&typeof Lt.then=="function"&&Lt.then(q,ft)}catch(xt){ft(xt)}finally{ut!==null&&Ot.types!==null&&(ut.types=Ot.types),L.T=ut}},cn.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},cn.use=function(J){return L.H.use(J)},cn.useActionState=function(J,ut,Ot){return L.H.useActionState(J,ut,Ot)},cn.useCallback=function(J,ut){return L.H.useCallback(J,ut)},cn.useContext=function(J){return L.H.useContext(J)},cn.useDebugValue=function(){},cn.useDeferredValue=function(J,ut){return L.H.useDeferredValue(J,ut)},cn.useEffect=function(J,ut){return L.H.useEffect(J,ut)},cn.useEffectEvent=function(J){return L.H.useEffectEvent(J)},cn.useId=function(){return L.H.useId()},cn.useImperativeHandle=function(J,ut,Ot){return L.H.useImperativeHandle(J,ut,Ot)},cn.useInsertionEffect=function(J,ut){return L.H.useInsertionEffect(J,ut)},cn.useLayoutEffect=function(J,ut){return L.H.useLayoutEffect(J,ut)},cn.useMemo=function(J,ut){return L.H.useMemo(J,ut)},cn.useOptimistic=function(J,ut){return L.H.useOptimistic(J,ut)},cn.useReducer=function(J,ut,Ot){return L.H.useReducer(J,ut,Ot)},cn.useRef=function(J){return L.H.useRef(J)},cn.useState=function(J){return L.H.useState(J)},cn.useSyncExternalStore=function(J,ut,Ot){return L.H.useSyncExternalStore(J,ut,Ot)},cn.useTransition=function(){return L.H.useTransition()},cn.version="19.2.0",cn}var yM;function Hp(){return yM||(yM=1,Vx.exports=kN()),Vx.exports}var Ae=Hp();const qN=QT(Ae);var Bx={exports:{}},fg={},Fx={exports:{}},Hx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vM;function XN(){return vM||(vM=1,(function(i){function t(k,et){var nt=k.length;k.push(et);t:for(;0<nt;){var ft=nt-1>>>1,wt=k[ft];if(0<s(wt,et))k[ft]=et,k[nt]=wt,nt=ft;else break t}}function e(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var et=k[0],nt=k.pop();if(nt!==et){k[0]=nt;t:for(var ft=0,wt=k.length,J=wt>>>1;ft<J;){var ut=2*(ft+1)-1,Ot=k[ut],Lt=ut+1,ee=k[Lt];if(0>s(Ot,nt))Lt<wt&&0>s(ee,Ot)?(k[ft]=ee,k[Lt]=nt,ft=Lt):(k[ft]=Ot,k[ut]=nt,ft=ut);else if(Lt<wt&&0>s(ee,nt))k[ft]=ee,k[Lt]=nt,ft=Lt;else break t}}return et}function s(k,et){var nt=k.sortIndex-et.sortIndex;return nt!==0?nt:k.id-et.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var u=Date,f=u.now();i.unstable_now=function(){return u.now()-f}}var d=[],m=[],_=1,y=null,S=3,T=!1,R=!1,C=!1,w=!1,M=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function V(k){for(var et=e(m);et!==null;){if(et.callback===null)n(m);else if(et.startTime<=k)n(m),et.sortIndex=et.expirationTime,t(d,et);else break;et=e(m)}}function j(k){if(C=!1,V(k),!R)if(e(d)!==null)R=!0,q||(q=!0,Y());else{var et=e(m);et!==null&&vt(j,et.startTime-k)}}var q=!1,L=-1,P=5,D=-1;function U(){return w?!0:!(i.unstable_now()-D<P)}function F(){if(w=!1,q){var k=i.unstable_now();D=k;var et=!0;try{t:{R=!1,C&&(C=!1,O(L),L=-1),T=!0;var nt=S;try{e:{for(V(k),y=e(d);y!==null&&!(y.expirationTime>k&&U());){var ft=y.callback;if(typeof ft=="function"){y.callback=null,S=y.priorityLevel;var wt=ft(y.expirationTime<=k);if(k=i.unstable_now(),typeof wt=="function"){y.callback=wt,V(k),et=!0;break e}y===e(d)&&n(d),V(k)}else n(d);y=e(d)}if(y!==null)et=!0;else{var J=e(m);J!==null&&vt(j,J.startTime-k),et=!1}}break t}finally{y=null,S=nt,T=!1}et=void 0}}finally{et?Y():q=!1}}}var Y;if(typeof z=="function")Y=function(){z(F)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,gt=G.port2;G.port1.onmessage=F,Y=function(){gt.postMessage(null)}}else Y=function(){M(F,0)};function vt(k,et){L=M(function(){k(i.unstable_now())},et)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(k){k.callback=null},i.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<k?Math.floor(1e3/k):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(k){switch(S){case 1:case 2:case 3:var et=3;break;default:et=S}var nt=S;S=et;try{return k()}finally{S=nt}},i.unstable_requestPaint=function(){w=!0},i.unstable_runWithPriority=function(k,et){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var nt=S;S=k;try{return et()}finally{S=nt}},i.unstable_scheduleCallback=function(k,et,nt){var ft=i.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?ft+nt:ft):nt=ft,k){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=nt+wt,k={id:_++,callback:et,priorityLevel:k,startTime:nt,expirationTime:wt,sortIndex:-1},nt>ft?(k.sortIndex=nt,t(m,k),e(d)===null&&k===e(m)&&(C?(O(L),L=-1):C=!0,vt(j,nt-ft))):(k.sortIndex=wt,t(d,k),R||T||(R=!0,q||(q=!0,Y()))),k},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(k){var et=S;return function(){var nt=S;S=et;try{return k.apply(this,arguments)}finally{S=nt}}}})(Hx)),Hx}var SM;function jN(){return SM||(SM=1,Fx.exports=XN()),Fx.exports}var Gx={exports:{}},xa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xM;function YN(){if(xM)return xa;xM=1;var i=Hp();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(d,m,_){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:m,implementation:_}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return xa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,xa.createPortal=function(d,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return r(d,m,null,_)},xa.flushSync=function(d){var m=u.T,_=n.p;try{if(u.T=null,n.p=2,d)return d()}finally{u.T=m,n.p=_,n.d.f()}},xa.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(d,m))},xa.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},xa.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var _=m.as,y=f(_,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,T=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?n.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:S,fetchPriority:T}):_==="script"&&n.d.X(d,{crossOrigin:y,integrity:S,fetchPriority:T,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},xa.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=f(m.as,m.crossOrigin);n.d.M(d,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(d)},xa.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,y=f(_,m.crossOrigin);n.d.L(d,_,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},xa.preloadModule=function(d,m){if(typeof d=="string")if(m){var _=f(m.as,m.crossOrigin);n.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(d)},xa.requestFormReset=function(d){n.d.r(d)},xa.unstable_batchedUpdates=function(d,m){return d(m)},xa.useFormState=function(d,m,_){return u.H.useFormState(d,m,_)},xa.useFormStatus=function(){return u.H.useHostTransitionStatus()},xa.version="19.2.0",xa}var EM;function WN(){if(EM)return Gx.exports;EM=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Gx.exports=YN(),Gx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TM;function KN(){if(TM)return fg;TM=1;var i=jN(),t=Hp(),e=WN();function n(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var o=a,h=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(h=o.return),a=o.return;while(a)}return o.tag===3?h:null}function u(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function f(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function d(a){if(r(a)!==a)throw Error(n(188))}function m(a){var o=a.alternate;if(!o){if(o=r(a),o===null)throw Error(n(188));return o!==a?null:a}for(var h=a,p=o;;){var x=h.return;if(x===null)break;var b=x.alternate;if(b===null){if(p=x.return,p!==null){h=p;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===h)return d(x),a;if(b===p)return d(x),o;b=b.sibling}throw Error(n(188))}if(h.return!==p.return)h=x,p=b;else{for(var B=!1,W=x.child;W;){if(W===h){B=!0,h=x,p=b;break}if(W===p){B=!0,p=x,h=b;break}W=W.sibling}if(!B){for(W=b.child;W;){if(W===h){B=!0,h=b,p=x;break}if(W===p){B=!0,p=b,h=x;break}W=W.sibling}if(!B)throw Error(n(189))}}if(h.alternate!==p)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?a:o}function _(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=_(a),o!==null)return o;a=a.sibling}return null}var y=Object.assign,S=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),z=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function Y(a){return a===null||typeof a!="object"?null:(a=F&&a[F]||a["@@iterator"],typeof a=="function"?a:null)}var G=Symbol.for("react.client.reference");function gt(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===G?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case C:return"Fragment";case M:return"Profiler";case w:return"StrictMode";case j:return"Suspense";case q:return"SuspenseList";case D:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case R:return"Portal";case z:return a.displayName||"Context";case O:return(a._context.displayName||"Context")+".Consumer";case V:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case L:return o=a.displayName||null,o!==null?o:gt(a.type)||"Memo";case P:o=a._payload,a=a._init;try{return gt(a(o))}catch{}}return null}var vt=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt={pending:!1,data:null,method:null,action:null},ft=[],wt=-1;function J(a){return{current:a}}function ut(a){0>wt||(a.current=ft[wt],ft[wt]=null,wt--)}function Ot(a,o){wt++,ft[wt]=a.current,a.current=o}var Lt=J(null),ee=J(null),xt=J(null),It=J(null);function ae(a,o){switch(Ot(xt,o),Ot(ee,a),Ot(Lt,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?V1(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=V1(o),a=B1(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ut(Lt),Ot(Lt,a)}function de(){ut(Lt),ut(ee),ut(xt)}function Ee(a){a.memoizedState!==null&&Ot(It,a);var o=Lt.current,h=B1(o,a.type);o!==h&&(Ot(ee,a),Ot(Lt,h))}function Ze(a){ee.current===a&&(ut(Lt),ut(ee)),It.current===a&&(ut(It),og._currentValue=nt)}var bn,it;function qt(a){if(bn===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);bn=o&&o[1]||"",it=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bn+a+it}var Ht=!1;function Vt(a,o){if(!a||Ht)return"";Ht=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var jt=function(){throw Error()};if(Object.defineProperty(jt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(jt,[])}catch(Nt){var Rt=Nt}Reflect.construct(a,[],jt)}else{try{jt.call()}catch(Nt){Rt=Nt}a.call(jt.prototype)}}else{try{throw Error()}catch(Nt){Rt=Nt}(jt=a())&&typeof jt.catch=="function"&&jt.catch(function(){})}}catch(Nt){if(Nt&&Rt&&typeof Nt.stack=="string")return[Nt.stack,Rt.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=p.DetermineComponentFrameRoot(),B=b[0],W=b[1];if(B&&W){var at=B.split(`
`),bt=W.split(`
`);for(x=p=0;p<at.length&&!at[p].includes("DetermineComponentFrameRoot");)p++;for(;x<bt.length&&!bt[x].includes("DetermineComponentFrameRoot");)x++;if(p===at.length||x===bt.length)for(p=at.length-1,x=bt.length-1;1<=p&&0<=x&&at[p]!==bt[x];)x--;for(;1<=p&&0<=x;p--,x--)if(at[p]!==bt[x]){if(p!==1||x!==1)do if(p--,x--,0>x||at[p]!==bt[x]){var zt=`
`+at[p].replace(" at new "," at ");return a.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",a.displayName)),zt}while(1<=p&&0<=x);break}}}finally{Ht=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?qt(h):""}function Pt(a,o){switch(a.tag){case 26:case 27:case 5:return qt(a.type);case 16:return qt("Lazy");case 13:return a.child!==o&&o!==null?qt("Suspense Fallback"):qt("Suspense");case 19:return qt("SuspenseList");case 0:case 15:return Vt(a.type,!1);case 11:return Vt(a.type.render,!1);case 1:return Vt(a.type,!0);case 31:return qt("Activity");default:return""}}function ue(a){try{var o="",h=null;do o+=Pt(a,h),h=a,a=a.return;while(a);return o}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var kt=Object.prototype.hasOwnProperty,Kt=i.unstable_scheduleCallback,ze=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$=i.unstable_requestPaint,X=i.unstable_now,_t=i.unstable_getCurrentPriorityLevel,Dt=i.unstable_ImmediatePriority,Qt=i.unstable_UserBlockingPriority,Ut=i.unstable_NormalPriority,De=i.unstable_LowPriority,oe=i.unstable_IdlePriority,be=i.log,Me=i.unstable_setDisableYieldValue,Yt=null,ie=null;function Ce(a){if(typeof be=="function"&&Me(a),ie&&typeof ie.setStrictMode=="function")try{ie.setStrictMode(Yt,a)}catch{}}var pe=Math.clz32?Math.clz32:ot,fe=Math.log,ke=Math.LN2;function ot(a){return a>>>=0,a===0?32:31-(fe(a)/ke|0)|0}var te=256,re=262144,he=4194304;function $t(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Bt(a,o,h){var p=a.pendingLanes;if(p===0)return 0;var x=0,b=a.suspendedLanes,B=a.pingedLanes;a=a.warmLanes;var W=p&134217727;return W!==0?(p=W&~b,p!==0?x=$t(p):(B&=W,B!==0?x=$t(B):h||(h=W&~a,h!==0&&(x=$t(h))))):(W=p&~b,W!==0?x=$t(W):B!==0?x=$t(B):h||(h=p&~a,h!==0&&(x=$t(h)))),x===0?0:o!==0&&o!==x&&(o&b)===0&&(b=x&-x,h=o&-o,b>=h||b===32&&(h&4194048)!==0)?o:x}function ye(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function Xe(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rn(){var a=he;return he<<=1,(he&62914560)===0&&(he=4194304),a}function nn(a){for(var o=[],h=0;31>h;h++)o.push(a);return o}function ss(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Hs(a,o,h,p,x,b){var B=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var W=a.entanglements,at=a.expirationTimes,bt=a.hiddenUpdates;for(h=B&~h;0<h;){var zt=31-pe(h),jt=1<<zt;W[zt]=0,at[zt]=-1;var Rt=bt[zt];if(Rt!==null)for(bt[zt]=null,zt=0;zt<Rt.length;zt++){var Nt=Rt[zt];Nt!==null&&(Nt.lane&=-536870913)}h&=~jt}p!==0&&br(a,p,0),b!==0&&x===0&&a.tag!==0&&(a.suspendedLanes|=b&~(B&~o))}function br(a,o,h){a.pendingLanes|=o,a.suspendedLanes&=~o;var p=31-pe(o);a.entangledLanes|=o,a.entanglements[p]=a.entanglements[p]|1073741824|h&261930}function Gs(a,o){var h=a.entangledLanes|=o;for(a=a.entanglements;h;){var p=31-pe(h),x=1<<p;x&o|a[p]&o&&(a[p]|=o),h&=~x}}function Mr(a,o){var h=o&-o;return h=(h&42)!==0?1:_s(h),(h&(a.suspendedLanes|o))!==0?0:h}function _s(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ia(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function ws(){var a=et.p;return a!==0?a:(a=window.event,a===void 0?32:lM(a.type))}function wi(a,o){var h=et.p;try{return et.p=a,o()}finally{et.p=h}}var Zi=Math.random().toString(36).slice(2),on="__reactFiber$"+Zi,xi="__reactProps$"+Zi,aa="__reactContainer$"+Zi,To="__reactEvents$"+Zi,Qu="__reactListeners$"+Zi,Zu="__reactHandles$"+Zi,rl="__reactResources$"+Zi,ra="__reactMarker$"+Zi;function K(a){delete a[on],delete a[xi],delete a[To],delete a[Qu],delete a[Zu]}function lt(a){var o=a[on];if(o)return o;for(var h=a.parentNode;h;){if(o=h[aa]||h[on]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(a=j1(a);a!==null;){if(h=a[on])return h;a=j1(a)}return o}a=h,h=a.parentNode}return null}function yt(a){if(a=a[on]||a[aa]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function Tt(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(n(33))}function ct(a){var o=a[rl];return o||(o=a[rl]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Xt(a){a[ra]=!0}var ce=new Set,xe={};function me(a,o){Ie(a,o),Ie(a+"Capture",o)}function Ie(a,o){for(xe[a]=o,a=0;a<o.length;a++)ce.add(o[a])}var Fe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oe={},ln={};function Nn(a){return kt.call(ln,a)?!0:kt.call(Oe,a)?!1:Fe.test(a)?ln[a]=!0:(Oe[a]=!0,!1)}function Kn(a,o,h){if(Nn(o))if(h===null)a.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+h)}}function mn(a,o,h){if(h===null)a.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+h)}}function je(a,o,h,p){if(p===null)a.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(o,h,""+p)}}function ve(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Gn(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function yn(a,o,h){var p=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var x=p.get,b=p.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return x.call(this)},set:function(B){h=""+B,b.call(this,B)}}),Object.defineProperty(a,o,{enumerable:p.enumerable}),{getValue:function(){return h},setValue:function(B){h=""+B},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function sn(a){if(!a._valueTracker){var o=Gn(a)?"checked":"value";a._valueTracker=yn(a,o,""+a[o])}}function ks(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var h=o.getValue(),p="";return a&&(p=Gn(a)?a.checked?"true":"false":a.value),a=p,a!==h?(o.setValue(a),!0):!1}function ui(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var oa=/[\n"\\]/g;function vn(a){return a.replace(oa,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Xi(a,o,h,p,x,b,B,W){a.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?a.type=B:a.removeAttribute("type"),o!=null?B==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+ve(o)):a.value!==""+ve(o)&&(a.value=""+ve(o)):B!=="submit"&&B!=="reset"||a.removeAttribute("value"),o!=null?Ci(a,B,ve(o)):h!=null?Ci(a,B,ve(h)):p!=null&&a.removeAttribute("value"),x==null&&b!=null&&(a.defaultChecked=!!b),x!=null&&(a.checked=x&&typeof x!="function"&&typeof x!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?a.name=""+ve(W):a.removeAttribute("name")}function as(a,o,h,p,x,b,B,W){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||h!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){sn(a);return}h=h!=null?""+ve(h):"",o=o!=null?""+ve(o):h,W||o===a.value||(a.value=o),a.defaultValue=o}p=p??x,p=typeof p!="function"&&typeof p!="symbol"&&!!p,a.checked=W?a.checked:!!p,a.defaultChecked=!!p,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(a.name=B),sn(a)}function Ci(a,o,h){o==="number"&&ui(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function Ei(a,o,h,p){if(a=a.options,o){o={};for(var x=0;x<h.length;x++)o["$"+h[x]]=!0;for(h=0;h<a.length;h++)x=o.hasOwnProperty("$"+a[h].value),a[h].selected!==x&&(a[h].selected=x),x&&p&&(a[h].defaultSelected=!0)}else{for(h=""+ve(h),o=null,x=0;x<a.length;x++){if(a[x].value===h){a[x].selected=!0,p&&(a[x].defaultSelected=!0);return}o!==null||a[x].disabled||(o=a[x])}o!==null&&(o.selected=!0)}}function bo(a,o,h){if(o!=null&&(o=""+ve(o),o!==a.value&&(a.value=o),h==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=h!=null?""+ve(h):""}function Pi(a,o,h,p){if(o==null){if(p!=null){if(h!=null)throw Error(n(92));if(vt(p)){if(1<p.length)throw Error(n(93));p=p[0]}h=p}h==null&&(h=""),o=h}h=ve(o),a.defaultValue=h,p=a.textContent,p===h&&p!==""&&p!==null&&(a.value=p),sn(a)}function qs(a,o){if(o){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=o;return}}a.textContent=o}var nu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ol(a,o,h){var p=o.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?p?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":p?a.setProperty(o,h):typeof h!="number"||h===0||nu.has(o)?o==="float"?a.cssFloat=h:a[o]=(""+h).trim():a[o]=h+"px"}function Ju(a,o,h){if(o!=null&&typeof o!="object")throw Error(n(62));if(a=a.style,h!=null){for(var p in h)!h.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?a.setProperty(p,""):p==="float"?a.cssFloat="":a[p]="");for(var x in o)p=o[x],o.hasOwnProperty(x)&&h[x]!==p&&ol(a,x,p)}else for(var b in o)o.hasOwnProperty(b)&&ol(a,b,o[b])}function ll(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function iu(a){return Mo.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function sr(){}var su=null;function Ua(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ao=null,ar=null;function ul(a){var o=yt(a);if(o&&(a=o.stateNode)){var h=a[xi]||null;t:switch(a=o.stateNode,o.type){case"input":if(Xi(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),o=h.name,h.type==="radio"&&o!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+vn(""+o)+'"][type="radio"]'),o=0;o<h.length;o++){var p=h[o];if(p!==a&&p.form===a.form){var x=p[xi]||null;if(!x)throw Error(n(90));Xi(p,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(o=0;o<h.length;o++)p=h[o],p.form===a.form&&ks(p)}break t;case"textarea":bo(a,h.value,h.defaultValue);break t;case"select":o=h.value,o!=null&&Ei(a,!!h.multiple,o,!1)}}}var au=!1;function Ro(a,o,h){if(au)return a(o,h);au=!0;try{var p=a(o);return p}finally{if(au=!1,(Ao!==null||ar!==null)&&(Q(),Ao&&(o=Ao,a=ar,ar=Ao=null,ul(o),a)))for(o=0;o<a.length;o++)ul(a[o])}}function Oa(a,o){var h=a.stateNode;if(h===null)return null;var p=h[xi]||null;if(p===null)return null;h=p[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break t;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(n(231,o,typeof h));return h}var La=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cl=!1;if(La)try{var ni={};Object.defineProperty(ni,"passive",{get:function(){cl=!0}}),window.addEventListener("test",ni,ni),window.removeEventListener("test",ni,ni)}catch{cl=!1}var jr=null,$u=null,Ar=null;function ru(){if(Ar)return Ar;var a,o=$u,h=o.length,p,x="value"in jr?jr.value:jr.textContent,b=x.length;for(a=0;a<h&&o[a]===x[a];a++);var B=h-a;for(p=1;p<=B&&o[h-p]===x[b-p];p++);return Ar=x.slice(a,1<p?1-p:void 0)}function Yr(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function Wr(){return!0}function rr(){return!1}function Ji(a){function o(h,p,x,b,B){this._reactName=h,this._targetInst=x,this.type=p,this.nativeEvent=b,this.target=B,this.currentTarget=null;for(var W in a)a.hasOwnProperty(W)&&(h=a[W],this[W]=h?h(b):b[W]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Wr:rr,this.isPropagationStopped=rr,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){},isPersistent:Wr}),o}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rr=Ji(Kr),la=y({},Kr,{view:0,detail:0}),hl=Ji(la),wo,fl,wr,ou=y({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zr,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==wr&&(wr&&a.type==="mousemove"?(wo=a.screenX-wr.screenX,fl=a.screenY-wr.screenY):fl=wo=0,wr=a),wo)},movementY:function(a){return"movementY"in a?a.movementY:fl}}),yh=Ji(ou),Ti=y({},ou,{dataTransfer:0}),vh=Ji(Ti),Sh=y({},la,{relatedTarget:0}),dl=Ji(Sh),tc=y({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),xh=Ji(tc),Qr=y({},Kr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ec=Ji(Qr),Eh=y({},Kr,{data:0}),Cr=Ji(Eh),Th={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ic={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bh(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=ic[a])?!!o[a]:!1}function Zr(){return bh}var ys=y({},la,{key:function(a){if(a.key){var o=Th[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Yr(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?nc[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zr,charCode:function(a){return a.type==="keypress"?Yr(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Yr(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),sc=Ji(ys),Mh=y({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dr=Ji(Mh),v=y({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zr}),N=Ji(v),H=y({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z=Ji(H),St=y({},ou,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),At=Ji(St),se=y({},Kr,{newState:0,oldState:0}),an=Ji(se),bi=[9,13,27,32],wn=La&&"CompositionEvent"in window,ri=null;La&&"documentMode"in document&&(ri=document.documentMode);var rs=La&&"TextEvent"in window&&!ri,mi=La&&(!wn||ri&&8<ri&&11>=ri),ua=" ",or=!1;function Co(a,o){switch(a){case"keyup":return bi.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jr(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var pl=!1;function qf(a,o){switch(a){case"compositionend":return Jr(o);case"keypress":return o.which!==32?null:(or=!0,ua);case"textInput":return a=o.data,a===ua&&or?null:a;default:return null}}function z_(a,o){if(pl)return a==="compositionend"||!wn&&Co(a,o)?(a=ru(),Ar=$u=jr=null,pl=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return mi&&o.locale!=="ko"?null:o.data;default:return null}}var Pa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function em(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!Pa[a.type]:o==="textarea"}function Xf(a,o,h,p){Ao?ar?ar.push(p):ar=[p]:Ao=p,o=wy(o,"onChange"),0<o.length&&(h=new Rr("onChange","change",null,h,p),a.push({event:h,listeners:o}))}var ac=null,rc=null;function nm(a){I1(a,0)}function oc(a){var o=Tt(a);if(ks(o))return a}function im(a,o){if(a==="change")return o}var Ah=!1;if(La){var lu;if(La){var gi="oninput"in document;if(!gi){var V_=document.createElement("div");V_.setAttribute("oninput","return;"),gi=typeof V_.oninput=="function"}lu=gi}else lu=!1;Ah=lu&&(!document.documentMode||9<document.documentMode)}function B_(){ac&&(ac.detachEvent("onpropertychange",sm),rc=ac=null)}function sm(a){if(a.propertyName==="value"&&oc(rc)){var o=[];Xf(o,rc,a,Ua(a)),Ro(nm,o)}}function Rh(a,o,h){a==="focusin"?(B_(),ac=o,rc=h,ac.attachEvent("onpropertychange",sm)):a==="focusout"&&B_()}function ml(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return oc(rc)}function F_(a,o){if(a==="click")return oc(o)}function H_(a,o){if(a==="input"||a==="change")return oc(o)}function uu(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var _i=typeof Object.is=="function"?Object.is:uu;function lc(a,o){if(_i(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var h=Object.keys(a),p=Object.keys(o);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var x=h[p];if(!kt.call(o,x)||!_i(a[x],o[x]))return!1}return!0}function am(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function rm(a,o){var h=am(a);a=0;for(var p;h;){if(h.nodeType===3){if(p=a+h.textContent.length,a<=o&&p>=o)return{node:h,offset:o-a};a=p}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=am(h)}}function jf(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?jf(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Yf(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=ui(a.document);o instanceof a.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)a=o.contentWindow;else break;o=ui(a.document)}return o}function uc(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var G_=La&&"documentMode"in document&&11>=document.documentMode,cc=null,Wf=null,hc=null,za=!1;function Kf(a,o,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;za||cc==null||cc!==ui(p)||(p=cc,"selectionStart"in p&&uc(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),hc&&lc(hc,p)||(hc=p,p=wy(Wf,"onSelect"),0<p.length&&(o=new Rr("onSelect","select",null,o,h),a.push({event:o,listeners:p}),o.target=cc)))}function gl(a,o){var h={};return h[a.toLowerCase()]=o.toLowerCase(),h["Webkit"+a]="webkit"+o,h["Moz"+a]="moz"+o,h}var fc={animationend:gl("Animation","AnimationEnd"),animationiteration:gl("Animation","AnimationIteration"),animationstart:gl("Animation","AnimationStart"),transitionrun:gl("Transition","TransitionRun"),transitionstart:gl("Transition","TransitionStart"),transitioncancel:gl("Transition","TransitionCancel"),transitionend:gl("Transition","TransitionEnd")},wh={},Xs={};La&&(Xs=document.createElement("div").style,"AnimationEvent"in window||(delete fc.animationend.animation,delete fc.animationiteration.animation,delete fc.animationstart.animation),"TransitionEvent"in window||delete fc.transitionend.transition);function _l(a){if(wh[a])return wh[a];if(!fc[a])return a;var o=fc[a],h;for(h in o)if(o.hasOwnProperty(h)&&h in Xs)return wh[a]=o[h];return a}var ca=_l("animationend"),om=_l("animationiteration"),$r=_l("animationstart"),dc=_l("transitionrun"),yl=_l("transitionstart"),lm=_l("transitioncancel"),Qf=_l("transitionend"),Do=new Map,Zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zf.push("scrollEnd");function Cs(a,o){Do.set(a,o),me(o,[a])}var vl=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},os=[],cu=0,Jf=0;function Sl(){for(var a=cu,o=Jf=cu=0;o<a;){var h=os[o];os[o++]=null;var p=os[o];os[o++]=null;var x=os[o];os[o++]=null;var b=os[o];if(os[o++]=null,p!==null&&x!==null){var B=p.pending;B===null?x.next=x:(x.next=B.next,B.next=x),p.pending=x}b!==0&&$f(h,x,b)}}function Ch(a,o,h,p){os[cu++]=a,os[cu++]=o,os[cu++]=h,os[cu++]=p,Jf|=p,a.lanes|=p,a=a.alternate,a!==null&&(a.lanes|=p)}function pc(a,o,h,p){return Ch(a,o,h,p),mc(a)}function xl(a,o){return Ch(a,null,null,o),mc(a)}function $f(a,o,h){a.lanes|=h;var p=a.alternate;p!==null&&(p.lanes|=h);for(var x=!1,b=a.return;b!==null;)b.childLanes|=h,p=b.alternate,p!==null&&(p.childLanes|=h),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(x=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,x&&o!==null&&(x=31-pe(h),a=b.hiddenUpdates,p=a[x],p===null?a[x]=[o]:p.push(o),o.lane=h|536870912),b):null}function mc(a){if(50<Ru)throw Ru=0,wu=null,Error(n(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var El={};function k_(a,o,h,p){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(a,o,h,p){return new k_(a,o,h,p)}function Ys(a){return a=a.prototype,!(!a||!a.isReactComponent)}function to(a,o){var h=a.alternate;return h===null?(h=js(a.tag,o,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=o,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,o=a.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function Ds(a,o){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,o=h.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Dh(a,o,h,p,x,b){var B=0;if(p=a,typeof a=="function")Ys(a)&&(B=1);else if(typeof a=="string")B=CN(a,h,Lt.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case D:return a=js(31,h,o,x),a.elementType=D,a.lanes=b,a;case C:return No(h.children,x,b,o);case w:B=8,x|=24;break;case M:return a=js(12,h,o,x|2),a.elementType=M,a.lanes=b,a;case j:return a=js(13,h,o,x),a.elementType=j,a.lanes=b,a;case q:return a=js(19,h,o,x),a.elementType=q,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case z:B=10;break t;case O:B=9;break t;case V:B=11;break t;case L:B=14;break t;case P:B=16,p=null;break t}B=29,h=Error(n(130,a===null?"null":typeof a,"")),p=null}return o=js(B,h,o,x),o.elementType=a,o.type=p,o.lanes=b,o}function No(a,o,h,p){return a=js(7,a,p,o),a.lanes=h,a}function td(a,o,h){return a=js(6,a,null,o),a.lanes=h,a}function q_(a){var o=js(18,null,null,0);return o.stateNode=a,o}function Nr(a,o,h){return o=js(4,a.children!==null?a.children:[],a.key,o),o.lanes=h,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var um=new WeakMap;function ha(a,o){if(typeof a=="object"&&a!==null){var h=um.get(a);return h!==void 0?h:(o={value:a,source:o,stack:ue(o)},um.set(a,o),o)}return{value:a,source:o,stack:ue(o)}}var Ir=[],hu=0,Nh=null,gc=0,Va=[],fa=0,eo=null,no=1,io="";function Io(a,o){Ir[hu++]=gc,Ir[hu++]=Nh,Nh=a,gc=o}function cm(a,o,h){Va[fa++]=no,Va[fa++]=io,Va[fa++]=eo,eo=a;var p=no;a=io;var x=32-pe(p)-1;p&=~(1<<x),h+=1;var b=32-pe(o)+x;if(30<b){var B=x-x%5;b=(p&(1<<B)-1).toString(32),p>>=B,x-=B,no=1<<32-pe(o)+x|h<<x|p,io=b+a}else no=1<<b|h<<x|p,io=a}function ed(a){a.return!==null&&(Io(a,1),cm(a,1,0))}function Tl(a){for(;a===Nh;)Nh=Ir[--hu],Ir[hu]=null,gc=Ir[--hu],Ir[hu]=null;for(;a===eo;)eo=Va[--fa],Va[fa]=null,io=Va[--fa],Va[fa]=null,no=Va[--fa],Va[fa]=null}function Ih(a,o){Va[fa++]=no,Va[fa++]=io,Va[fa++]=eo,no=o.id,io=o.overflow,eo=a}var ls=null,ci=null,Cn=!1,Uo=null,us=!1,nd=Error(n(519));function Mn(a){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Uh(ha(o,a)),nd}function id(a){var o=a.stateNode,h=a.type,p=a.memoizedProps;switch(o[on]=a,o[xi]=p,h){case"dialog":Dn("cancel",o),Dn("close",o);break;case"iframe":case"object":case"embed":Dn("load",o);break;case"video":case"audio":for(h=0;h<ng.length;h++)Dn(ng[h],o);break;case"source":Dn("error",o);break;case"img":case"image":case"link":Dn("error",o),Dn("load",o);break;case"details":Dn("toggle",o);break;case"input":Dn("invalid",o),as(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Dn("invalid",o);break;case"textarea":Dn("invalid",o),Pi(o,p.value,p.defaultValue,p.children)}h=p.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||o.textContent===""+h||p.suppressHydrationWarning===!0||P1(o.textContent,h)?(p.popover!=null&&(Dn("beforetoggle",o),Dn("toggle",o)),p.onScroll!=null&&Dn("scroll",o),p.onScrollEnd!=null&&Dn("scrollend",o),p.onClick!=null&&(o.onclick=sr),o=!0):o=!1,o||Mn(a,!0)}function X_(a){for(ls=a.return;ls;)switch(ls.tag){case 5:case 31:case 13:us=!1;return;case 27:case 3:us=!0;return;default:ls=ls.return}}function fu(a){if(a!==ls)return!1;if(!Cn)return X_(a),Cn=!0,!1;var o=a.tag,h;if((h=o!==3&&o!==27)&&((h=o===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||Ex(a.type,a.memoizedProps)),h=!h),h&&ci&&Mn(a),X_(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));ci=X1(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));ci=X1(a)}else o===27?(o=ci,Lc(a.type)?(a=Rx,Rx=null,ci=a):ci=o):ci=ls?mo(a.stateNode.nextSibling):null;return!0}function du(){ci=ls=null,Cn=!1}function hm(){var a=Uo;return a!==null&&(Ps===null?Ps=a:Ps.push.apply(Ps,a),Uo=null),a}function Uh(a){Uo===null?Uo=[a]:Uo.push(a)}var fm=J(null),Oo=null,Ns=null;function Lo(a,o,h){Ot(fm,o._currentValue),o._currentValue=h}function lr(a){a._currentValue=fm.current,ut(fm)}function Po(a,o,h){for(;a!==null;){var p=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),a===h)break;a=a.return}}function sd(a,o,h,p){var x=a.child;for(x!==null&&(x.return=a);x!==null;){var b=x.dependencies;if(b!==null){var B=x.child;b=b.firstContext;t:for(;b!==null;){var W=b;b=x;for(var at=0;at<o.length;at++)if(W.context===o[at]){b.lanes|=h,W=b.alternate,W!==null&&(W.lanes|=h),Po(b.return,h,a),p||(B=null);break t}b=W.next}}else if(x.tag===18){if(B=x.return,B===null)throw Error(n(341));B.lanes|=h,b=B.alternate,b!==null&&(b.lanes|=h),Po(B,h,a),B=null}else B=x.child;if(B!==null)B.return=x;else for(B=x;B!==null;){if(B===a){B=null;break}if(x=B.sibling,x!==null){x.return=B.return,B=x;break}B=B.return}x=B}}function bl(a,o,h,p){a=null;for(var x=o,b=!1;x!==null;){if(!b){if((x.flags&524288)!==0)b=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var B=x.alternate;if(B===null)throw Error(n(387));if(B=B.memoizedProps,B!==null){var W=x.type;_i(x.pendingProps.value,B.value)||(a!==null?a.push(W):a=[W])}}else if(x===It.current){if(B=x.alternate,B===null)throw Error(n(387));B.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(a!==null?a.push(og):a=[og])}x=x.return}a!==null&&sd(o,a,h,p),o.flags|=262144}function _c(a){for(a=a.firstContext;a!==null;){if(!_i(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function pu(a){Oo=a,Ns=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function cs(a){return dm(Oo,a)}function Oh(a,o){return Oo===null&&pu(a),dm(a,o)}function dm(a,o){var h=o._currentValue;if(o={context:o,memoizedValue:h,next:null},Ns===null){if(a===null)throw Error(n(308));Ns=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Ns=Ns.next=o;return h}var j_=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(h,p){a.push(p)}};this.abort=function(){o.aborted=!0,a.forEach(function(h){return h()})}},Y_=i.unstable_scheduleCallback,pm=i.unstable_NormalPriority,Ve={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mm(){return{controller:new j_,data:new Map,refCount:0}}function vs(a){a.refCount--,a.refCount===0&&Y_(pm,function(){a.controller.abort()})}var mu=null,gm=0,zo=0,Ur=null;function yc(a,o){if(mu===null){var h=mu=[];gm=0,zo=dx(),Ur={status:"pending",value:void 0,then:function(p){h.push(p)}}}return gm++,o.then(_m,_m),o}function _m(){if(--gm===0&&mu!==null){Ur!==null&&(Ur.status="fulfilled");var a=mu;mu=null,zo=0,Ur=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function ym(a,o){var h=[],p={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return a.then(function(){p.status="fulfilled",p.value=o;for(var x=0;x<h.length;x++)(0,h[x])(o)},function(x){for(p.status="rejected",p.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),p}var W_=k.S;k.S=function(a,o){Ic=X(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&yc(a,o),W_!==null&&W_(a,o)};var Ml=J(null);function so(){var a=Ml.current;return a!==null?a:Zn.pooledCache}function vc(a,o){o===null?Ot(Ml,Ml.current):Ot(Ml,o.pool)}function ad(){var a=so();return a===null?null:{parent:Ve._currentValue,pool:a}}var Al=Error(n(460)),Lh=Error(n(474)),Or=Error(n(542)),Ph={then:function(){}};function K_(a){return a=a.status,a==="fulfilled"||a==="rejected"}function vm(a,o,h){switch(h=a[h],h===void 0?a.push(o):h!==o&&(o.then(sr,sr),o=h),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Sm(a),a;default:if(typeof o.status=="string")o.then(sr,sr);else{if(a=Zn,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=o,a.status="pending",a.then(function(p){if(o.status==="pending"){var x=o;x.status="fulfilled",x.value=p}},function(p){if(o.status==="pending"){var x=o;x.status="rejected",x.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Sm(a),a}throw qe=o,Al}}function gu(a){try{var o=a._init;return o(a._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(qe=h,Al):h}}var qe=null;function rd(){if(qe===null)throw Error(n(459));var a=qe;return qe=null,a}function Sm(a){if(a===Al||a===Or)throw Error(n(483))}var Rl=null,wl=0;function od(a){var o=wl;return wl+=1,Rl===null&&(Rl=[]),vm(Rl,a,o)}function zh(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Vh(a,o){throw o.$$typeof===S?Error(n(525)):(a=Object.prototype.toString.call(o),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Sc(a){function o(pt,rt){if(a){var Et=pt.deletions;Et===null?(pt.deletions=[rt],pt.flags|=16):Et.push(rt)}}function h(pt,rt){if(!a)return null;for(;rt!==null;)o(pt,rt),rt=rt.sibling;return null}function p(pt){for(var rt=new Map;pt!==null;)pt.key!==null?rt.set(pt.key,pt):rt.set(pt.index,pt),pt=pt.sibling;return rt}function x(pt,rt){return pt=to(pt,rt),pt.index=0,pt.sibling=null,pt}function b(pt,rt,Et){return pt.index=Et,a?(Et=pt.alternate,Et!==null?(Et=Et.index,Et<rt?(pt.flags|=67108866,rt):Et):(pt.flags|=67108866,rt)):(pt.flags|=1048576,rt)}function B(pt){return a&&pt.alternate===null&&(pt.flags|=67108866),pt}function W(pt,rt,Et,Gt){return rt===null||rt.tag!==6?(rt=td(Et,pt.mode,Gt),rt.return=pt,rt):(rt=x(rt,Et),rt.return=pt,rt)}function at(pt,rt,Et,Gt){var He=Et.type;return He===C?zt(pt,rt,Et.props.children,Gt,Et.key):rt!==null&&(rt.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===P&&gu(He)===rt.type)?(rt=x(rt,Et.props),zh(rt,Et),rt.return=pt,rt):(rt=Dh(Et.type,Et.key,Et.props,null,pt.mode,Gt),zh(rt,Et),rt.return=pt,rt)}function bt(pt,rt,Et,Gt){return rt===null||rt.tag!==4||rt.stateNode.containerInfo!==Et.containerInfo||rt.stateNode.implementation!==Et.implementation?(rt=Nr(Et,pt.mode,Gt),rt.return=pt,rt):(rt=x(rt,Et.children||[]),rt.return=pt,rt)}function zt(pt,rt,Et,Gt,He){return rt===null||rt.tag!==7?(rt=No(Et,pt.mode,Gt,He),rt.return=pt,rt):(rt=x(rt,Et),rt.return=pt,rt)}function jt(pt,rt,Et){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return rt=td(""+rt,pt.mode,Et),rt.return=pt,rt;if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case T:return Et=Dh(rt.type,rt.key,rt.props,null,pt.mode,Et),zh(Et,rt),Et.return=pt,Et;case R:return rt=Nr(rt,pt.mode,Et),rt.return=pt,rt;case P:return rt=gu(rt),jt(pt,rt,Et)}if(vt(rt)||Y(rt))return rt=No(rt,pt.mode,Et,null),rt.return=pt,rt;if(typeof rt.then=="function")return jt(pt,od(rt),Et);if(rt.$$typeof===z)return jt(pt,Oh(pt,rt),Et);Vh(pt,rt)}return null}function Rt(pt,rt,Et,Gt){var He=rt!==null?rt.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return He!==null?null:W(pt,rt,""+Et,Gt);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case T:return Et.key===He?at(pt,rt,Et,Gt):null;case R:return Et.key===He?bt(pt,rt,Et,Gt):null;case P:return Et=gu(Et),Rt(pt,rt,Et,Gt)}if(vt(Et)||Y(Et))return He!==null?null:zt(pt,rt,Et,Gt,null);if(typeof Et.then=="function")return Rt(pt,rt,od(Et),Gt);if(Et.$$typeof===z)return Rt(pt,rt,Oh(pt,Et),Gt);Vh(pt,Et)}return null}function Nt(pt,rt,Et,Gt,He){if(typeof Gt=="string"&&Gt!==""||typeof Gt=="number"||typeof Gt=="bigint")return pt=pt.get(Et)||null,W(rt,pt,""+Gt,He);if(typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case T:return pt=pt.get(Gt.key===null?Et:Gt.key)||null,at(rt,pt,Gt,He);case R:return pt=pt.get(Gt.key===null?Et:Gt.key)||null,bt(rt,pt,Gt,He);case P:return Gt=gu(Gt),Nt(pt,rt,Et,Gt,He)}if(vt(Gt)||Y(Gt))return pt=pt.get(Et)||null,zt(rt,pt,Gt,He,null);if(typeof Gt.then=="function")return Nt(pt,rt,Et,od(Gt),He);if(Gt.$$typeof===z)return Nt(pt,rt,Et,Oh(rt,Gt),He);Vh(rt,Gt)}return null}function Ne(pt,rt,Et,Gt){for(var He=null,$n=null,Le=rt,xn=rt=0,On=null;Le!==null&&xn<Et.length;xn++){Le.index>xn?(On=Le,Le=null):On=Le.sibling;var ti=Rt(pt,Le,Et[xn],Gt);if(ti===null){Le===null&&(Le=On);break}a&&Le&&ti.alternate===null&&o(pt,Le),rt=b(ti,rt,xn),$n===null?He=ti:$n.sibling=ti,$n=ti,Le=On}if(xn===Et.length)return h(pt,Le),Cn&&Io(pt,xn),He;if(Le===null){for(;xn<Et.length;xn++)Le=jt(pt,Et[xn],Gt),Le!==null&&(rt=b(Le,rt,xn),$n===null?He=Le:$n.sibling=Le,$n=Le);return Cn&&Io(pt,xn),He}for(Le=p(Le);xn<Et.length;xn++)On=Nt(Le,pt,xn,Et[xn],Gt),On!==null&&(a&&On.alternate!==null&&Le.delete(On.key===null?xn:On.key),rt=b(On,rt,xn),$n===null?He=On:$n.sibling=On,$n=On);return a&&Le.forEach(function(Fc){return o(pt,Fc)}),Cn&&Io(pt,xn),He}function We(pt,rt,Et,Gt){if(Et==null)throw Error(n(151));for(var He=null,$n=null,Le=rt,xn=rt=0,On=null,ti=Et.next();Le!==null&&!ti.done;xn++,ti=Et.next()){Le.index>xn?(On=Le,Le=null):On=Le.sibling;var Fc=Rt(pt,Le,ti.value,Gt);if(Fc===null){Le===null&&(Le=On);break}a&&Le&&Fc.alternate===null&&o(pt,Le),rt=b(Fc,rt,xn),$n===null?He=Fc:$n.sibling=Fc,$n=Fc,Le=On}if(ti.done)return h(pt,Le),Cn&&Io(pt,xn),He;if(Le===null){for(;!ti.done;xn++,ti=Et.next())ti=jt(pt,ti.value,Gt),ti!==null&&(rt=b(ti,rt,xn),$n===null?He=ti:$n.sibling=ti,$n=ti);return Cn&&Io(pt,xn),He}for(Le=p(Le);!ti.done;xn++,ti=Et.next())ti=Nt(Le,pt,xn,ti.value,Gt),ti!==null&&(a&&ti.alternate!==null&&Le.delete(ti.key===null?xn:ti.key),rt=b(ti,rt,xn),$n===null?He=ti:$n.sibling=ti,$n=ti);return a&&Le.forEach(function(FN){return o(pt,FN)}),Cn&&Io(pt,xn),He}function di(pt,rt,Et,Gt){if(typeof Et=="object"&&Et!==null&&Et.type===C&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case T:t:{for(var He=Et.key;rt!==null;){if(rt.key===He){if(He=Et.type,He===C){if(rt.tag===7){h(pt,rt.sibling),Gt=x(rt,Et.props.children),Gt.return=pt,pt=Gt;break t}}else if(rt.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===P&&gu(He)===rt.type){h(pt,rt.sibling),Gt=x(rt,Et.props),zh(Gt,Et),Gt.return=pt,pt=Gt;break t}h(pt,rt);break}else o(pt,rt);rt=rt.sibling}Et.type===C?(Gt=No(Et.props.children,pt.mode,Gt,Et.key),Gt.return=pt,pt=Gt):(Gt=Dh(Et.type,Et.key,Et.props,null,pt.mode,Gt),zh(Gt,Et),Gt.return=pt,pt=Gt)}return B(pt);case R:t:{for(He=Et.key;rt!==null;){if(rt.key===He)if(rt.tag===4&&rt.stateNode.containerInfo===Et.containerInfo&&rt.stateNode.implementation===Et.implementation){h(pt,rt.sibling),Gt=x(rt,Et.children||[]),Gt.return=pt,pt=Gt;break t}else{h(pt,rt);break}else o(pt,rt);rt=rt.sibling}Gt=Nr(Et,pt.mode,Gt),Gt.return=pt,pt=Gt}return B(pt);case P:return Et=gu(Et),di(pt,rt,Et,Gt)}if(vt(Et))return Ne(pt,rt,Et,Gt);if(Y(Et)){if(He=Y(Et),typeof He!="function")throw Error(n(150));return Et=He.call(Et),We(pt,rt,Et,Gt)}if(typeof Et.then=="function")return di(pt,rt,od(Et),Gt);if(Et.$$typeof===z)return di(pt,rt,Oh(pt,Et),Gt);Vh(pt,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint"?(Et=""+Et,rt!==null&&rt.tag===6?(h(pt,rt.sibling),Gt=x(rt,Et),Gt.return=pt,pt=Gt):(h(pt,rt),Gt=td(Et,pt.mode,Gt),Gt.return=pt,pt=Gt),B(pt)):h(pt,rt)}return function(pt,rt,Et,Gt){try{wl=0;var He=di(pt,rt,Et,Gt);return Rl=null,He}catch(Le){if(Le===Al||Le===Or)throw Le;var $n=js(29,Le,null,pt.mode);return $n.lanes=Gt,$n.return=pt,$n}finally{}}}var _u=Sc(!0),Q_=Sc(!1),Cl=!1;function xm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Em(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function ao(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Vo(a,o,h){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(In&2)!==0){var x=p.pending;return x===null?o.next=o:(o.next=x.next,x.next=o),p.pending=o,o=mc(a),$f(a,null,h),o}return Ch(a,p,o,h),mc(a)}function Dl(a,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194048)!==0)){var p=o.lanes;p&=a.pendingLanes,h|=p,o.lanes=h,Gs(a,h)}}function ld(a,o){var h=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var x=null,b=null;if(h=h.firstBaseUpdate,h!==null){do{var B={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};b===null?x=b=B:b=b.next=B,h=h.next}while(h!==null);b===null?x=b=o:b=b.next=o}else x=b=o;h={baseState:p.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:p.shared,callbacks:p.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=o:a.next=o,h.lastBaseUpdate=o}var Tm=!1;function Bh(){if(Tm){var a=Ur;if(a!==null)throw a}}function yu(a,o,h,p){Tm=!1;var x=a.updateQueue;Cl=!1;var b=x.firstBaseUpdate,B=x.lastBaseUpdate,W=x.shared.pending;if(W!==null){x.shared.pending=null;var at=W,bt=at.next;at.next=null,B===null?b=bt:B.next=bt,B=at;var zt=a.alternate;zt!==null&&(zt=zt.updateQueue,W=zt.lastBaseUpdate,W!==B&&(W===null?zt.firstBaseUpdate=bt:W.next=bt,zt.lastBaseUpdate=at))}if(b!==null){var jt=x.baseState;B=0,zt=bt=at=null,W=b;do{var Rt=W.lane&-536870913,Nt=Rt!==W.lane;if(Nt?(An&Rt)===Rt:(p&Rt)===Rt){Rt!==0&&Rt===zo&&(Tm=!0),zt!==null&&(zt=zt.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});t:{var Ne=a,We=W;Rt=o;var di=h;switch(We.tag){case 1:if(Ne=We.payload,typeof Ne=="function"){jt=Ne.call(di,jt,Rt);break t}jt=Ne;break t;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=We.payload,Rt=typeof Ne=="function"?Ne.call(di,jt,Rt):Ne,Rt==null)break t;jt=y({},jt,Rt);break t;case 2:Cl=!0}}Rt=W.callback,Rt!==null&&(a.flags|=64,Nt&&(a.flags|=8192),Nt=x.callbacks,Nt===null?x.callbacks=[Rt]:Nt.push(Rt))}else Nt={lane:Rt,tag:W.tag,payload:W.payload,callback:W.callback,next:null},zt===null?(bt=zt=Nt,at=jt):zt=zt.next=Nt,B|=Rt;if(W=W.next,W===null){if(W=x.shared.pending,W===null)break;Nt=W,W=Nt.next,Nt.next=null,x.lastBaseUpdate=Nt,x.shared.pending=null}}while(!0);zt===null&&(at=jt),x.baseState=at,x.firstBaseUpdate=bt,x.lastBaseUpdate=zt,b===null&&(x.shared.lanes=0),Ka|=B,a.lanes=B,a.memoizedState=jt}}function ro(a,o){if(typeof a!="function")throw Error(n(191,a));a.call(o)}function Ss(a,o){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)ro(h[a],o)}var Ba=J(null),Ws=J(0);function bm(a,o){a=Hi,Ot(Ws,a),Ot(Ba,o),Hi=a|o.baseLanes}function Mm(){Ot(Ws,Hi),Ot(Ba,Ba.current)}function Is(){Hi=Ws.current,ut(Ba),ut(Ws)}var $i=J(null),ur=null;function Nl(a){var o=a.alternate;Ot(Di,Di.current&1),Ot($i,a),ur===null&&(o===null||Ba.current!==null||o.memoizedState!==null)&&(ur=a)}function Am(a){Ot(Di,Di.current),Ot($i,a),ur===null&&(ur=a)}function Z_(a){a.tag===22?(Ot(Di,Di.current),Ot($i,a),ur===null&&(ur=a)):Bo()}function Bo(){Ot(Di,Di.current),Ot($i,$i.current)}function Fa(a){ut($i),ur===a&&(ur=null),ut(Di)}var Di=J(0);function ud(a){for(var o=a;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Mx(h)||Ax(h)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var da=0,Ke=null,ii=null,ji=null,cd=!1,oo=!1,vu=!1,hd=0,Fh=0,lo=null,ix=0;function Ni(){throw Error(n(321))}function Rm(a,o){if(o===null)return!1;for(var h=0;h<o.length&&h<a.length;h++)if(!_i(a[h],o[h]))return!1;return!0}function wm(a,o,h,p,x,b){return da=b,Ke=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,k.H=a===null||a.memoizedState===null?_y:Tc,vu=!1,b=h(p,x),vu=!1,oo&&(b=$_(o,h,p,x)),J_(a),b}function J_(a){k.H=Xh;var o=ii!==null&&ii.next!==null;if(da=0,ji=ii=Ke=null,cd=!1,Fh=0,lo=null,o)throw Error(n(300));a===null||yi||(a=a.dependencies,a!==null&&_c(a)&&(yi=!0))}function $_(a,o,h,p){Ke=a;var x=0;do{if(oo&&(lo=null),Fh=0,oo=!1,25<=x)throw Error(n(301));if(x+=1,ji=ii=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}k.H=jh,b=o(h,p)}while(oo);return b}function sx(){var a=k.H,o=a.useState()[0];return o=typeof o.then=="function"?Gh(o):o,a=a.useState()[0],(ii!==null?ii.memoizedState:null)!==a&&(Ke.flags|=1024),o}function Cm(){var a=hd!==0;return hd=0,a}function Dm(a,o,h){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~h}function Nm(a){if(cd){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}cd=!1}da=0,ji=ii=Ke=null,oo=!1,Fh=hd=0,lo=null}function Ks(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ji===null?Ke.memoizedState=ji=a:ji=ji.next=a,ji}function zi(){if(ii===null){var a=Ke.alternate;a=a!==null?a.memoizedState:null}else a=ii.next;var o=ji===null?Ke.memoizedState:ji.next;if(o!==null)ji=o,ii=a;else{if(a===null)throw Ke.alternate===null?Error(n(467)):Error(n(310));ii=a,a={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},ji===null?Ke.memoizedState=ji=a:ji=ji.next=a}return ji}function Hh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gh(a){var o=Fh;return Fh+=1,lo===null&&(lo=[]),a=vm(lo,a,o),o=Ke,(ji===null?o.memoizedState:ji.next)===null&&(o=o.alternate,k.H=o===null||o.memoizedState===null?_y:Tc),a}function fd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Gh(a);if(a.$$typeof===z)return cs(a)}throw Error(n(438,String(a)))}function Im(a){var o=null,h=Ke.updateQueue;if(h!==null&&(o=h.memoCache),o==null){var p=Ke.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(x){return x.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),h===null&&(h=Hh(),Ke.updateQueue=h),h.memoCache=o,h=o.data[o.index],h===void 0)for(h=o.data[o.index]=Array(a),p=0;p<a;p++)h[p]=U;return o.index++,h}function Fo(a,o){return typeof o=="function"?o(a):o}function dd(a){var o=zi();return Um(o,ii,a)}function Um(a,o,h){var p=a.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=h;var x=a.baseQueue,b=p.pending;if(b!==null){if(x!==null){var B=x.next;x.next=b.next,b.next=B}o.baseQueue=x=b,p.pending=null}if(b=a.baseState,x===null)a.memoizedState=b;else{o=x.next;var W=B=null,at=null,bt=o,zt=!1;do{var jt=bt.lane&-536870913;if(jt!==bt.lane?(An&jt)===jt:(da&jt)===jt){var Rt=bt.revertLane;if(Rt===0)at!==null&&(at=at.next={lane:0,revertLane:0,gesture:null,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null}),jt===zo&&(zt=!0);else if((da&Rt)===Rt){bt=bt.next,Rt===zo&&(zt=!0);continue}else jt={lane:0,revertLane:bt.revertLane,gesture:null,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},at===null?(W=at=jt,B=b):at=at.next=jt,Ke.lanes|=Rt,Ka|=Rt;jt=bt.action,vu&&h(b,jt),b=bt.hasEagerState?bt.eagerState:h(b,jt)}else Rt={lane:jt,revertLane:bt.revertLane,gesture:bt.gesture,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},at===null?(W=at=Rt,B=b):at=at.next=Rt,Ke.lanes|=jt,Ka|=jt;bt=bt.next}while(bt!==null&&bt!==o);if(at===null?B=b:at.next=W,!_i(b,a.memoizedState)&&(yi=!0,zt&&(h=Ur,h!==null)))throw h;a.memoizedState=b,a.baseState=B,a.baseQueue=at,p.lastRenderedState=b}return x===null&&(p.lanes=0),[a.memoizedState,p.dispatch]}function pd(a){var o=zi(),h=o.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=a;var p=h.dispatch,x=h.pending,b=o.memoizedState;if(x!==null){h.pending=null;var B=x=x.next;do b=a(b,B.action),B=B.next;while(B!==x);_i(b,o.memoizedState)||(yi=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),h.lastRenderedState=b}return[b,p]}function Om(a,o,h){var p=Ke,x=zi(),b=Cn;if(b){if(h===void 0)throw Error(n(407));h=h()}else h=o();var B=!_i((ii||x).memoizedState,h);if(B&&(x.memoizedState=h,yi=!0),x=x.queue,Bm(Pm.bind(null,p,x,a),[a]),x.getSnapshot!==o||B||ji!==null&&ji.memoizedState.tag&1){if(p.flags|=2048,xc(9,{destroy:void 0},Lm.bind(null,p,x,h,o),null),Zn===null)throw Error(n(349));b||(da&127)!==0||ty(p,o,h)}return h}function ty(a,o,h){a.flags|=16384,a={getSnapshot:o,value:h},o=Ke.updateQueue,o===null?(o=Hh(),Ke.updateQueue=o,o.stores=[a]):(h=o.stores,h===null?o.stores=[a]:h.push(a))}function Lm(a,o,h,p){o.value=h,o.getSnapshot=p,zm(o)&&md(a)}function Pm(a,o,h){return h(function(){zm(o)&&md(a)})}function zm(a){var o=a.getSnapshot;a=a.value;try{var h=o();return!_i(a,h)}catch{return!0}}function md(a){var o=xl(a,2);o!==null&&c(o,a,2)}function kh(a){var o=Ks();if(typeof a=="function"){var h=a;if(a=h(),vu){Ce(!0);try{h()}finally{Ce(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:a},o}function ey(a,o,h,p){return a.baseState=h,Um(a,ii,typeof p=="function"?p:Fo)}function ax(a,o,h,p,x){if(Ho(a))throw Error(n(485));if(a=o.action,a!==null){var b={payload:x,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){b.listeners.push(B)}};k.T!==null?h(!0):b.isTransition=!1,p(b),h=o.pending,h===null?(b.next=o.pending=b,ny(o,b)):(b.next=h.next,o.pending=h.next=b)}}function ny(a,o){var h=o.action,p=o.payload,x=a.state;if(o.isTransition){var b=k.T,B={};k.T=B;try{var W=h(x,p),at=k.S;at!==null&&at(B,W),iy(a,o,W)}catch(bt){gd(a,o,bt)}finally{b!==null&&B.types!==null&&(b.types=B.types),k.T=b}}else try{b=h(x,p),iy(a,o,b)}catch(bt){gd(a,o,bt)}}function iy(a,o,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(p){Vm(a,o,p)},function(p){return gd(a,o,p)}):Vm(a,o,h)}function Vm(a,o,h){o.status="fulfilled",o.value=h,sy(o),a.state=h,o=a.pending,o!==null&&(h=o.next,h===o?a.pending=null:(h=h.next,o.next=h,ny(a,h)))}function gd(a,o,h){var p=a.pending;if(a.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=h,sy(o),o=o.next;while(o!==p)}a.action=null}function sy(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function ay(a,o){return o}function ry(a,o){if(Cn){var h=Zn.formState;if(h!==null){t:{var p=Ke;if(Cn){if(ci){e:{for(var x=ci,b=us;x.nodeType!==8;){if(!b){x=null;break e}if(x=mo(x.nextSibling),x===null){x=null;break e}}b=x.data,x=b==="F!"||b==="F"?x:null}if(x){ci=mo(x.nextSibling),p=x.data==="F!";break t}}Mn(p)}p=!1}p&&(o=h[0])}}return h=Ks(),h.memoizedState=h.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ay,lastRenderedState:o},h.queue=p,h=gy.bind(null,Ke,p),p.dispatch=h,p=kh(!1),b=qh.bind(null,Ke,!1,p.queue),p=Ks(),x={state:o,dispatch:null,action:a,pending:null},p.queue=x,h=ax.bind(null,Ke,x,b,h),x.dispatch=h,p.memoizedState=a,[o,h,!1]}function oy(a){var o=zi();return ly(o,ii,a)}function ly(a,o,h){if(o=Um(a,o,ay)[0],a=dd(Fo)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=Gh(o)}catch(B){throw B===Al?Or:B}else p=o;o=zi();var x=o.queue,b=x.dispatch;return h!==o.memoizedState&&(Ke.flags|=2048,xc(9,{destroy:void 0},rx.bind(null,x,h),null)),[p,b,a]}function rx(a,o){a.action=o}function uy(a){var o=zi(),h=ii;if(h!==null)return ly(o,h,a);zi(),o=o.memoizedState,h=zi();var p=h.queue.dispatch;return h.memoizedState=a,[o,p,!1]}function xc(a,o,h,p){return a={tag:a,create:h,deps:p,inst:o,next:null},o=Ke.updateQueue,o===null&&(o=Hh(),Ke.updateQueue=o),h=o.lastEffect,h===null?o.lastEffect=a.next=a:(p=h.next,h.next=a,a.next=p,o.lastEffect=a),a}function cy(){return zi().memoizedState}function _d(a,o,h,p){var x=Ks();Ke.flags|=a,x.memoizedState=xc(1|o,{destroy:void 0},h,p===void 0?null:p)}function yd(a,o,h,p){var x=zi();p=p===void 0?null:p;var b=x.memoizedState.inst;ii!==null&&p!==null&&Rm(p,ii.memoizedState.deps)?x.memoizedState=xc(o,b,h,p):(Ke.flags|=a,x.memoizedState=xc(1|o,b,h,p))}function hy(a,o){_d(8390656,8,a,o)}function Bm(a,o){yd(2048,8,a,o)}function fy(a){Ke.flags|=4;var o=Ke.updateQueue;if(o===null)o=Hh(),Ke.updateQueue=o,o.events=[a];else{var h=o.events;h===null?o.events=[a]:h.push(a)}}function dy(a){var o=zi().memoizedState;return fy({ref:o,nextImpl:a}),function(){if((In&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function py(a,o){return yd(4,2,a,o)}function Ha(a,o){return yd(4,4,a,o)}function Fm(a,o){if(typeof o=="function"){a=a();var h=o(a);return function(){typeof h=="function"?h():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function vd(a,o,h){h=h!=null?h.concat([a]):null,yd(4,4,Fm.bind(null,o,a),h)}function Sd(){}function Hm(a,o){var h=zi();o=o===void 0?null:o;var p=h.memoizedState;return o!==null&&Rm(o,p[1])?p[0]:(h.memoizedState=[a,o],a)}function Gm(a,o){var h=zi();o=o===void 0?null:o;var p=h.memoizedState;if(o!==null&&Rm(o,p[1]))return p[0];if(p=a(),vu){Ce(!0);try{a()}finally{Ce(!1)}}return h.memoizedState=[p,o],p}function km(a,o,h){return h===void 0||(da&1073741824)!==0&&(An&261930)===0?a.memoizedState=o:(a.memoizedState=h,a=l(),Ke.lanes|=a,Ka|=a,h)}function qm(a,o,h,p){return _i(h,o)?h:Ba.current!==null?(a=km(a,h,p),_i(a,o)||(yi=!0),a):(da&42)===0||(da&1073741824)!==0&&(An&261930)===0?(yi=!0,a.memoizedState=h):(a=l(),Ke.lanes|=a,Ka|=a,o)}function Xm(a,o,h,p,x){var b=et.p;et.p=b!==0&&8>b?b:8;var B=k.T,W={};k.T=W,qh(a,!1,o,h);try{var at=x(),bt=k.S;if(bt!==null&&bt(W,at),at!==null&&typeof at=="object"&&typeof at.then=="function"){var zt=ym(at,p);Ec(a,o,zt,Zs(a))}else Ec(a,o,p,Zs(a))}catch(jt){Ec(a,o,{then:function(){},status:"rejected",reason:jt},Zs())}finally{et.p=b,B!==null&&W.types!==null&&(B.types=W.types),k.T=B}}function ox(){}function jm(a,o,h,p){if(a.tag!==5)throw Error(n(476));var x=my(a).queue;Xm(a,x,o,nt,h===null?ox:function(){return Ym(a),h(p)})}function my(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:nt,baseState:nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:nt},next:null};var h={};return o.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:h},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function Ym(a){var o=my(a);o.next===null&&(o=a.alternate.memoizedState),Ec(a,o.next.queue,{},Zs())}function Wm(){return cs(og)}function xs(){return zi().memoizedState}function Km(){return zi().memoizedState}function lx(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var h=Zs();a=ao(h);var p=Vo(o,a,h);p!==null&&(c(p,o,h),Dl(p,o,h)),o={cache:mm()},a.payload=o;return}o=o.return}}function ux(a,o,h){var p=Zs();h={lane:p,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Ho(a)?Su(o,h):(h=pc(a,o,h,p),h!==null&&(c(h,a,p),pa(h,o,p)))}function gy(a,o,h){var p=Zs();Ec(a,o,h,p)}function Ec(a,o,h,p){var x={lane:p,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(Ho(a))Su(o,x);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var B=o.lastRenderedState,W=b(B,h);if(x.hasEagerState=!0,x.eagerState=W,_i(W,B))return Ch(a,o,x,0),Zn===null&&Sl(),!1}catch{}finally{}if(h=pc(a,o,x,p),h!==null)return c(h,a,p),pa(h,o,p),!0}return!1}function qh(a,o,h,p){if(p={lane:2,revertLane:dx(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ho(a)){if(o)throw Error(n(479))}else o=pc(a,h,p,2),o!==null&&c(o,a,2)}function Ho(a){var o=a.alternate;return a===Ke||o!==null&&o===Ke}function Su(a,o){oo=cd=!0;var h=a.pending;h===null?o.next=o:(o.next=h.next,h.next=o),a.pending=o}function pa(a,o,h){if((h&4194048)!==0){var p=o.lanes;p&=a.pendingLanes,h|=p,o.lanes=h,Gs(a,h)}}var Xh={readContext:cs,use:fd,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useLayoutEffect:Ni,useInsertionEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useSyncExternalStore:Ni,useId:Ni,useHostTransitionStatus:Ni,useFormState:Ni,useActionState:Ni,useOptimistic:Ni,useMemoCache:Ni,useCacheRefresh:Ni};Xh.useEffectEvent=Ni;var _y={readContext:cs,use:fd,useCallback:function(a,o){return Ks().memoizedState=[a,o===void 0?null:o],a},useContext:cs,useEffect:hy,useImperativeHandle:function(a,o,h){h=h!=null?h.concat([a]):null,_d(4194308,4,Fm.bind(null,o,a),h)},useLayoutEffect:function(a,o){return _d(4194308,4,a,o)},useInsertionEffect:function(a,o){_d(4,2,a,o)},useMemo:function(a,o){var h=Ks();o=o===void 0?null:o;var p=a();if(vu){Ce(!0);try{a()}finally{Ce(!1)}}return h.memoizedState=[p,o],p},useReducer:function(a,o,h){var p=Ks();if(h!==void 0){var x=h(o);if(vu){Ce(!0);try{h(o)}finally{Ce(!1)}}}else x=o;return p.memoizedState=p.baseState=x,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:x},p.queue=a,a=a.dispatch=ux.bind(null,Ke,a),[p.memoizedState,a]},useRef:function(a){var o=Ks();return a={current:a},o.memoizedState=a},useState:function(a){a=kh(a);var o=a.queue,h=gy.bind(null,Ke,o);return o.dispatch=h,[a.memoizedState,h]},useDebugValue:Sd,useDeferredValue:function(a,o){var h=Ks();return km(h,a,o)},useTransition:function(){var a=kh(!1);return a=Xm.bind(null,Ke,a.queue,!0,!1),Ks().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,h){var p=Ke,x=Ks();if(Cn){if(h===void 0)throw Error(n(407));h=h()}else{if(h=o(),Zn===null)throw Error(n(349));(An&127)!==0||ty(p,o,h)}x.memoizedState=h;var b={value:h,getSnapshot:o};return x.queue=b,hy(Pm.bind(null,p,b,a),[a]),p.flags|=2048,xc(9,{destroy:void 0},Lm.bind(null,p,b,h,o),null),h},useId:function(){var a=Ks(),o=Zn.identifierPrefix;if(Cn){var h=io,p=no;h=(p&~(1<<32-pe(p)-1)).toString(32)+h,o="_"+o+"R_"+h,h=hd++,0<h&&(o+="H"+h.toString(32)),o+="_"}else h=ix++,o="_"+o+"r_"+h.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:Wm,useFormState:ry,useActionState:ry,useOptimistic:function(a){var o=Ks();o.memoizedState=o.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=h,o=qh.bind(null,Ke,!0,h),h.dispatch=o,[a,o]},useMemoCache:Im,useCacheRefresh:function(){return Ks().memoizedState=lx.bind(null,Ke)},useEffectEvent:function(a){var o=Ks(),h={impl:a};return o.memoizedState=h,function(){if((In&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}},Tc={readContext:cs,use:fd,useCallback:Hm,useContext:cs,useEffect:Bm,useImperativeHandle:vd,useInsertionEffect:py,useLayoutEffect:Ha,useMemo:Gm,useReducer:dd,useRef:cy,useState:function(){return dd(Fo)},useDebugValue:Sd,useDeferredValue:function(a,o){var h=zi();return qm(h,ii.memoizedState,a,o)},useTransition:function(){var a=dd(Fo)[0],o=zi().memoizedState;return[typeof a=="boolean"?a:Gh(a),o]},useSyncExternalStore:Om,useId:xs,useHostTransitionStatus:Wm,useFormState:oy,useActionState:oy,useOptimistic:function(a,o){var h=zi();return ey(h,ii,a,o)},useMemoCache:Im,useCacheRefresh:Km};Tc.useEffectEvent=dy;var jh={readContext:cs,use:fd,useCallback:Hm,useContext:cs,useEffect:Bm,useImperativeHandle:vd,useInsertionEffect:py,useLayoutEffect:Ha,useMemo:Gm,useReducer:pd,useRef:cy,useState:function(){return pd(Fo)},useDebugValue:Sd,useDeferredValue:function(a,o){var h=zi();return ii===null?km(h,a,o):qm(h,ii.memoizedState,a,o)},useTransition:function(){var a=pd(Fo)[0],o=zi().memoizedState;return[typeof a=="boolean"?a:Gh(a),o]},useSyncExternalStore:Om,useId:xs,useHostTransitionStatus:Wm,useFormState:uy,useActionState:uy,useOptimistic:function(a,o){var h=zi();return ii!==null?ey(h,ii,a,o):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:Im,useCacheRefresh:Km};jh.useEffectEvent=dy;function bc(a,o,h,p){o=a.memoizedState,h=h(p,o),h=h==null?o:y({},o,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Yh={enqueueSetState:function(a,o,h){a=a._reactInternals;var p=Zs(),x=ao(p);x.payload=o,h!=null&&(x.callback=h),o=Vo(a,x,p),o!==null&&(c(o,a,p),Dl(o,a,p))},enqueueReplaceState:function(a,o,h){a=a._reactInternals;var p=Zs(),x=ao(p);x.tag=1,x.payload=o,h!=null&&(x.callback=h),o=Vo(a,x,p),o!==null&&(c(o,a,p),Dl(o,a,p))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var h=Zs(),p=ao(h);p.tag=2,o!=null&&(p.callback=o),o=Vo(a,p,h),o!==null&&(c(o,a,h),Dl(o,a,h))}};function yy(a,o,h,p,x,b,B){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,b,B):o.prototype&&o.prototype.isPureReactComponent?!lc(h,p)||!lc(x,b):!0}function vy(a,o,h,p){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,p),o.state!==a&&Yh.enqueueReplaceState(o,o.state,null)}function Es(a,o){var h=o;if("ref"in o){h={};for(var p in o)p!=="ref"&&(h[p]=o[p])}if(a=a.defaultProps){h===o&&(h=y({},h));for(var x in a)h[x]===void 0&&(h[x]=a[x])}return h}function Qm(a){vl(a)}function Sy(a){console.error(a)}function xd(a){vl(a)}function Ed(a,o){try{var h=a.onUncaughtError;h(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function xy(a,o,h){try{var p=a.onCaughtError;p(h.value,{componentStack:h.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Zm(a,o,h){return h=ao(h),h.tag=3,h.payload={element:null},h.callback=function(){Ed(a,o)},h}function Mc(a){return a=ao(a),a.tag=3,a}function ma(a,o,h,p){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var b=p.value;a.payload=function(){return x(b)},a.callback=function(){xy(o,h,p)}}var B=h.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(a.callback=function(){xy(o,h,p),typeof x!="function"&&(po===null?po=new Set([this]):po.add(this));var W=p.stack;this.componentDidCatch(p.value,{componentStack:W!==null?W:""})})}function Ga(a,o,h,p,x){if(h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=h.alternate,o!==null&&bl(o,h,x,!0),h=$i.current,h!==null){switch(h.tag){case 31:case 13:return ur===null?en():h.alternate===null&&Jn===0&&(Jn=3),h.flags&=-257,h.flags|=65536,h.lanes=x,p===Ph?h.flags|=16384:(o=h.updateQueue,o===null?h.updateQueue=new Set([p]):o.add(p),cx(a,p,x)),!1;case 22:return h.flags|=65536,p===Ph?h.flags|=16384:(o=h.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},h.updateQueue=o):(h=o.retryQueue,h===null?o.retryQueue=new Set([p]):h.add(p)),cx(a,p,x)),!1}throw Error(n(435,h.tag))}return cx(a,p,x),en(),!1}if(Cn)return o=$i.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=x,p!==nd&&(a=Error(n(422),{cause:p}),Uh(ha(a,h)))):(p!==nd&&(o=Error(n(423),{cause:p}),Uh(ha(o,h))),a=a.current.alternate,a.flags|=65536,x&=-x,a.lanes|=x,p=ha(p,h),x=Zm(a.stateNode,p,x),ld(a,x),Jn!==4&&(Jn=2)),!1;var b=Error(n(520),{cause:p});if(b=ha(b,h),Br===null?Br=[b]:Br.push(b),Jn!==4&&(Jn=2),o===null)return!0;p=ha(p,h),h=o;do{switch(h.tag){case 3:return h.flags|=65536,a=x&-x,h.lanes|=a,a=Zm(h.stateNode,p,a),ld(h,a),!1;case 1:if(o=h.type,b=h.stateNode,(h.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(po===null||!po.has(b))))return h.flags|=65536,x&=-x,h.lanes|=x,x=Mc(x),ma(x,a,h,p),ld(h,x),!1}h=h.return}while(h!==null);return!1}var Td=Error(n(461)),yi=!1;function Ii(a,o,h,p){o.child=a===null?Q_(o,null,h,p):_u(o,a.child,h,p)}function Wh(a,o,h,p,x){h=h.render;var b=o.ref;if("ref"in p){var B={};for(var W in p)W!=="ref"&&(B[W]=p[W])}else B=p;return pu(o),p=wm(a,o,h,B,b,x),W=Cm(),a!==null&&!yi?(Dm(a,o,x),zr(a,o,x)):(Cn&&W&&ed(o),o.flags|=1,Ii(a,o,p,x),o.child)}function Kh(a,o,h,p,x){if(a===null){var b=h.type;return typeof b=="function"&&!Ys(b)&&b.defaultProps===void 0&&h.compare===null?(o.tag=15,o.type=b,ka(a,o,b,p,x)):(a=Dh(h.type,null,p,o,o.mode,x),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!Ul(a,x)){var B=b.memoizedProps;if(h=h.compare,h=h!==null?h:lc,h(B,p)&&a.ref===o.ref)return zr(a,o,x)}return o.flags|=1,a=to(b,p),a.ref=o.ref,a.return=o,o.child=a}function ka(a,o,h,p,x){if(a!==null){var b=a.memoizedProps;if(lc(b,p)&&a.ref===o.ref)if(yi=!1,o.pendingProps=p=b,Ul(a,x))(a.flags&131072)!==0&&(yi=!0);else return o.lanes=a.lanes,zr(a,o,x)}return Ac(a,o,h,p,x)}function qa(a,o,h,p){var x=p.children,b=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|h:h,a!==null){for(p=o.child=a.child,x=0;p!==null;)x=x|p.lanes|p.childLanes,p=p.sibling;p=x&~b}else p=0,o.child=null;return uo(a,o,b,h,p)}if((h&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&vc(o,b!==null?b.cachePool:null),b!==null?bm(o,b):Mm(),Z_(o);else return p=o.lanes=536870912,uo(a,o,b!==null?b.baseLanes|h:h,h,p)}else b!==null?(vc(o,b.cachePool),bm(o,b),Bo(),o.memoizedState=null):(a!==null&&vc(o,null),Mm(),Bo());return Ii(a,o,x,h),o.child}function Lr(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function uo(a,o,h,p,x){var b=so();return b=b===null?null:{parent:Ve._currentValue,pool:b},o.memoizedState={baseLanes:h,cachePool:b},a!==null&&vc(o,null),Mm(),Z_(o),a!==null&&bl(a,o,p,!0),o.childLanes=x,null}function cr(a,o){return o=Rc({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function hs(a,o,h){return _u(o,a.child,null,h),a=cr(o,o.pendingProps),a.flags|=2,Fa(o),o.memoizedState=null,a}function Qh(a,o,h){var p=o.pendingProps,x=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(Cn){if(p.mode==="hidden")return a=cr(o,p),o.lanes=536870912,Lr(null,a);if(Am(o),(a=ci)?(a=q1(a,us),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:eo!==null?{id:no,overflow:io}:null,retryLane:536870912,hydrationErrors:null},h=q_(a),h.return=o,o.child=h,ls=o,ci=null)):a=null,a===null)throw Mn(o);return o.lanes=536870912,null}return cr(o,p)}var b=a.memoizedState;if(b!==null){var B=b.dehydrated;if(Am(o),x)if(o.flags&256)o.flags&=-257,o=hs(a,o,h);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(n(558));else if(yi||bl(a,o,h,!1),x=(h&a.childLanes)!==0,yi||x){if(p=Zn,p!==null&&(B=Mr(p,h),B!==0&&B!==b.retryLane))throw b.retryLane=B,xl(a,B),c(p,a,B),Td;en(),o=hs(a,o,h)}else a=b.treeContext,ci=mo(B.nextSibling),ls=o,Cn=!0,Uo=null,us=!1,a!==null&&Ih(o,a),o=cr(o,p),o.flags|=4096;return o}return a=to(a.child,{mode:p.mode,children:p.children}),a.ref=o.ref,o.child=a,a.return=o,a}function Pr(a,o){var h=o.ref;if(h===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(a===null||a.ref!==h)&&(o.flags|=4194816)}}function Ac(a,o,h,p,x){return pu(o),h=wm(a,o,h,p,void 0,x),p=Cm(),a!==null&&!yi?(Dm(a,o,x),zr(a,o,x)):(Cn&&p&&ed(o),o.flags|=1,Ii(a,o,h,x),o.child)}function Us(a,o,h,p,x,b){return pu(o),o.updateQueue=null,h=$_(o,p,h,x),J_(a),p=Cm(),a!==null&&!yi?(Dm(a,o,b),zr(a,o,b)):(Cn&&p&&ed(o),o.flags|=1,Ii(a,o,h,b),o.child)}function Ts(a,o,h,p,x){if(pu(o),o.stateNode===null){var b=El,B=h.contextType;typeof B=="object"&&B!==null&&(b=cs(B)),b=new h(p,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Yh,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=p,b.state=o.memoizedState,b.refs={},xm(o),B=h.contextType,b.context=typeof B=="object"&&B!==null?cs(B):El,b.state=o.memoizedState,B=h.getDerivedStateFromProps,typeof B=="function"&&(bc(o,h,B,p),b.state=o.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(B=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),B!==b.state&&Yh.enqueueReplaceState(b,b.state,null),yu(o,p,b,x),Bh(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(a===null){b=o.stateNode;var W=o.memoizedProps,at=Es(h,W);b.props=at;var bt=b.context,zt=h.contextType;B=El,typeof zt=="object"&&zt!==null&&(B=cs(zt));var jt=h.getDerivedStateFromProps;zt=typeof jt=="function"||typeof b.getSnapshotBeforeUpdate=="function",W=o.pendingProps!==W,zt||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(W||bt!==B)&&vy(o,b,p,B),Cl=!1;var Rt=o.memoizedState;b.state=Rt,yu(o,p,b,x),Bh(),bt=o.memoizedState,W||Rt!==bt||Cl?(typeof jt=="function"&&(bc(o,h,jt,p),bt=o.memoizedState),(at=Cl||yy(o,h,at,p,Rt,bt,B))?(zt||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=bt),b.props=p,b.state=bt,b.context=B,p=at):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{b=o.stateNode,Em(a,o),B=o.memoizedProps,zt=Es(h,B),b.props=zt,jt=o.pendingProps,Rt=b.context,bt=h.contextType,at=El,typeof bt=="object"&&bt!==null&&(at=cs(bt)),W=h.getDerivedStateFromProps,(bt=typeof W=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(B!==jt||Rt!==at)&&vy(o,b,p,at),Cl=!1,Rt=o.memoizedState,b.state=Rt,yu(o,p,b,x),Bh();var Nt=o.memoizedState;B!==jt||Rt!==Nt||Cl||a!==null&&a.dependencies!==null&&_c(a.dependencies)?(typeof W=="function"&&(bc(o,h,W,p),Nt=o.memoizedState),(zt=Cl||yy(o,h,zt,p,Rt,Nt,at)||a!==null&&a.dependencies!==null&&_c(a.dependencies))?(bt||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(p,Nt,at),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(p,Nt,at)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||B===a.memoizedProps&&Rt===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&Rt===a.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=Nt),b.props=p,b.state=Nt,b.context=at,p=zt):(typeof b.componentDidUpdate!="function"||B===a.memoizedProps&&Rt===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&Rt===a.memoizedState||(o.flags|=1024),p=!1)}return b=p,Pr(a,o),p=(o.flags&128)!==0,b||p?(b=o.stateNode,h=p&&typeof h.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&p?(o.child=_u(o,a.child,null,x),o.child=_u(o,null,h,x)):Ii(a,o,h,x),o.memoizedState=b.state,a=o.child):a=zr(a,o,x),a}function zn(a,o,h,p){return du(),o.flags|=256,Ii(a,o,h,p),o.child}var Xa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hr(a){return{baseLanes:a,cachePool:ad()}}function Zh(a,o,h){return a=a!==null?a.childLanes&~h:0,o&&(a|=Un),a}function ja(a,o,h){var p=o.pendingProps,x=!1,b=(o.flags&128)!==0,B;if((B=b)||(B=a!==null&&a.memoizedState===null?!1:(Di.current&2)!==0),B&&(x=!0,o.flags&=-129),B=(o.flags&32)!==0,o.flags&=-33,a===null){if(Cn){if(x?Nl(o):Bo(),(a=ci)?(a=q1(a,us),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:eo!==null?{id:no,overflow:io}:null,retryLane:536870912,hydrationErrors:null},h=q_(a),h.return=o,o.child=h,ls=o,ci=null)):a=null,a===null)throw Mn(o);return Ax(a)?o.lanes=32:o.lanes=536870912,null}var W=p.children;return p=p.fallback,x?(Bo(),x=o.mode,W=Rc({mode:"hidden",children:W},x),p=No(p,x,h,null),W.return=o,p.return=o,W.sibling=p,o.child=W,p=o.child,p.memoizedState=hr(h),p.childLanes=Zh(a,B,h),o.memoizedState=Xa,Lr(null,p)):(Nl(o),Il(o,W))}var at=a.memoizedState;if(at!==null&&(W=at.dehydrated,W!==null)){if(b)o.flags&256?(Nl(o),o.flags&=-257,o=wc(a,o,h)):o.memoizedState!==null?(Bo(),o.child=a.child,o.flags|=128,o=null):(Bo(),W=p.fallback,x=o.mode,p=Rc({mode:"visible",children:p.children},x),W=No(W,x,h,null),W.flags|=2,p.return=o,W.return=o,p.sibling=W,o.child=p,_u(o,a.child,null,h),p=o.child,p.memoizedState=hr(h),p.childLanes=Zh(a,B,h),o.memoizedState=Xa,o=Lr(null,p));else if(Nl(o),Ax(W)){if(B=W.nextSibling&&W.nextSibling.dataset,B)var bt=B.dgst;B=bt,p=Error(n(419)),p.stack="",p.digest=B,Uh({value:p,source:null,stack:null}),o=wc(a,o,h)}else if(yi||bl(a,o,h,!1),B=(h&a.childLanes)!==0,yi||B){if(B=Zn,B!==null&&(p=Mr(B,h),p!==0&&p!==at.retryLane))throw at.retryLane=p,xl(a,p),c(B,a,p),Td;Mx(W)||en(),o=wc(a,o,h)}else Mx(W)?(o.flags|=192,o.child=a.child,o=null):(a=at.treeContext,ci=mo(W.nextSibling),ls=o,Cn=!0,Uo=null,us=!1,a!==null&&Ih(o,a),o=Il(o,p.children),o.flags|=4096);return o}return x?(Bo(),W=p.fallback,x=o.mode,at=a.child,bt=at.sibling,p=to(at,{mode:"hidden",children:p.children}),p.subtreeFlags=at.subtreeFlags&65011712,bt!==null?W=to(bt,W):(W=No(W,x,h,null),W.flags|=2),W.return=o,p.return=o,p.sibling=W,o.child=p,Lr(null,p),p=o.child,W=a.child.memoizedState,W===null?W=hr(h):(x=W.cachePool,x!==null?(at=Ve._currentValue,x=x.parent!==at?{parent:at,pool:at}:x):x=ad(),W={baseLanes:W.baseLanes|h,cachePool:x}),p.memoizedState=W,p.childLanes=Zh(a,B,h),o.memoizedState=Xa,Lr(a.child,p)):(Nl(o),h=a.child,a=h.sibling,h=to(h,{mode:"visible",children:p.children}),h.return=o,h.sibling=null,a!==null&&(B=o.deletions,B===null?(o.deletions=[a],o.flags|=16):B.push(a)),o.child=h,o.memoizedState=null,h)}function Il(a,o){return o=Rc({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Rc(a,o){return a=js(22,a,null,o),a.lanes=0,a}function wc(a,o,h){return _u(o,a.child,null,h),a=Il(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function xu(a,o,h){a.lanes|=o;var p=a.alternate;p!==null&&(p.lanes|=o),Po(a.return,o,h)}function Jh(a,o,h,p,x,b){var B=a.memoizedState;B===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:x,treeForkCount:b}:(B.isBackwards=o,B.rendering=null,B.renderingStartTime=0,B.last=p,B.tail=h,B.tailMode=x,B.treeForkCount=b)}function $h(a,o,h){var p=o.pendingProps,x=p.revealOrder,b=p.tail;p=p.children;var B=Di.current,W=(B&2)!==0;if(W?(B=B&1|2,o.flags|=128):B&=1,Ot(Di,B),Ii(a,o,p,h),p=Cn?gc:0,!W&&a!==null&&(a.flags&128)!==0)t:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&xu(a,h,o);else if(a.tag===19)xu(a,h,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break t;for(;a.sibling===null;){if(a.return===null||a.return===o)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(x){case"forwards":for(h=o.child,x=null;h!==null;)a=h.alternate,a!==null&&ud(a)===null&&(x=h),h=h.sibling;h=x,h===null?(x=o.child,o.child=null):(x=h.sibling,h.sibling=null),Jh(o,!1,x,h,b,p);break;case"backwards":case"unstable_legacy-backwards":for(h=null,x=o.child,o.child=null;x!==null;){if(a=x.alternate,a!==null&&ud(a)===null){o.child=x;break}a=x.sibling,x.sibling=h,h=x,x=a}Jh(o,!0,h,null,b,p);break;case"together":Jh(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function zr(a,o,h){if(a!==null&&(o.dependencies=a.dependencies),Ka|=o.lanes,(h&o.childLanes)===0)if(a!==null){if(bl(a,o,h,!1),(h&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(n(153));if(o.child!==null){for(a=o.child,h=to(a,a.pendingProps),o.child=h,h.return=o;a.sibling!==null;)a=a.sibling,h=h.sibling=to(a,a.pendingProps),h.return=o;h.sibling=null}return o.child}function Ul(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&_c(a)))}function tf(a,o,h){switch(o.tag){case 3:ae(o,o.stateNode.containerInfo),Lo(o,Ve,a.memoizedState.cache),du();break;case 27:case 5:Ee(o);break;case 4:ae(o,o.stateNode.containerInfo);break;case 10:Lo(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Am(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(Nl(o),o.flags|=128,null):(h&o.child.childLanes)!==0?ja(a,o,h):(Nl(o),a=zr(a,o,h),a!==null?a.sibling:null);Nl(o);break;case 19:var x=(a.flags&128)!==0;if(p=(h&o.childLanes)!==0,p||(bl(a,o,h,!1),p=(h&o.childLanes)!==0),x){if(p)return $h(a,o,h);o.flags|=128}if(x=o.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Ot(Di,Di.current),p)break;return null;case 22:return o.lanes=0,qa(a,o,h,o.pendingProps);case 24:Lo(o,Ve,a.memoizedState.cache)}return zr(a,o,h)}function bd(a,o,h){if(a!==null)if(a.memoizedProps!==o.pendingProps)yi=!0;else{if(!Ul(a,h)&&(o.flags&128)===0)return yi=!1,tf(a,o,h);yi=(a.flags&131072)!==0}else yi=!1,Cn&&(o.flags&1048576)!==0&&cm(o,gc,o.index);switch(o.lanes=0,o.tag){case 16:t:{var p=o.pendingProps;if(a=gu(o.elementType),o.type=a,typeof a=="function")Ys(a)?(p=Es(a,p),o.tag=1,o=Ts(null,o,a,p,h)):(o.tag=0,o=Ac(null,o,a,p,h));else{if(a!=null){var x=a.$$typeof;if(x===V){o.tag=11,o=Wh(null,o,a,p,h);break t}else if(x===L){o.tag=14,o=Kh(null,o,a,p,h);break t}}throw o=gt(a)||a,Error(n(306,o,""))}}return o;case 0:return Ac(a,o,o.type,o.pendingProps,h);case 1:return p=o.type,x=Es(p,o.pendingProps),Ts(a,o,p,x,h);case 3:t:{if(ae(o,o.stateNode.containerInfo),a===null)throw Error(n(387));p=o.pendingProps;var b=o.memoizedState;x=b.element,Em(a,o),yu(o,p,null,h);var B=o.memoizedState;if(p=B.cache,Lo(o,Ve,p),p!==b.cache&&sd(o,[Ve],h,!0),Bh(),p=B.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:B.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=zn(a,o,p,h);break t}else if(p!==x){x=ha(Error(n(424)),o),Uh(x),o=zn(a,o,p,h);break t}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(ci=mo(a.firstChild),ls=o,Cn=!0,Uo=null,us=!0,h=Q_(o,null,p,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(du(),p===x){o=zr(a,o,h);break t}Ii(a,o,p,h)}o=o.child}return o;case 26:return Pr(a,o),a===null?(h=Q1(o.type,null,o.pendingProps,null))?o.memoizedState=h:Cn||(h=o.type,a=o.pendingProps,p=Cy(xt.current).createElement(h),p[on]=o,p[xi]=a,Js(p,h,a),Xt(p),o.stateNode=p):o.memoizedState=Q1(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return Ee(o),a===null&&Cn&&(p=o.stateNode=Y1(o.type,o.pendingProps,xt.current),ls=o,us=!0,x=ci,Lc(o.type)?(Rx=x,ci=mo(p.firstChild)):ci=x),Ii(a,o,o.pendingProps.children,h),Pr(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Cn&&((x=p=ci)&&(p=gN(p,o.type,o.pendingProps,us),p!==null?(o.stateNode=p,ls=o,ci=mo(p.firstChild),us=!1,x=!0):x=!1),x||Mn(o)),Ee(o),x=o.type,b=o.pendingProps,B=a!==null?a.memoizedProps:null,p=b.children,Ex(x,b)?p=null:B!==null&&Ex(x,B)&&(o.flags|=32),o.memoizedState!==null&&(x=wm(a,o,sx,null,null,h),og._currentValue=x),Pr(a,o),Ii(a,o,p,h),o.child;case 6:return a===null&&Cn&&((a=h=ci)&&(h=_N(h,o.pendingProps,us),h!==null?(o.stateNode=h,ls=o,ci=null,a=!0):a=!1),a||Mn(o)),null;case 13:return ja(a,o,h);case 4:return ae(o,o.stateNode.containerInfo),p=o.pendingProps,a===null?o.child=_u(o,null,p,h):Ii(a,o,p,h),o.child;case 11:return Wh(a,o,o.type,o.pendingProps,h);case 7:return Ii(a,o,o.pendingProps,h),o.child;case 8:return Ii(a,o,o.pendingProps.children,h),o.child;case 12:return Ii(a,o,o.pendingProps.children,h),o.child;case 10:return p=o.pendingProps,Lo(o,o.type,p.value),Ii(a,o,p.children,h),o.child;case 9:return x=o.type._context,p=o.pendingProps.children,pu(o),x=cs(x),p=p(x),o.flags|=1,Ii(a,o,p,h),o.child;case 14:return Kh(a,o,o.type,o.pendingProps,h);case 15:return ka(a,o,o.type,o.pendingProps,h);case 19:return $h(a,o,h);case 31:return Qh(a,o,h);case 22:return qa(a,o,h,o.pendingProps);case 24:return pu(o),p=cs(Ve),a===null?(x=so(),x===null&&(x=Zn,b=mm(),x.pooledCache=b,b.refCount++,b!==null&&(x.pooledCacheLanes|=h),x=b),o.memoizedState={parent:p,cache:x},xm(o),Lo(o,Ve,x)):((a.lanes&h)!==0&&(Em(a,o),yu(o,null,null,h),Bh()),x=a.memoizedState,b=o.memoizedState,x.parent!==p?(x={parent:p,cache:p},o.memoizedState=x,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=x),Lo(o,Ve,p)):(p=b.cache,Lo(o,Ve,p),p!==x.cache&&sd(o,[Ve],h,!0))),Ii(a,o,o.pendingProps.children,h),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function ga(a){a.flags|=4}function Ol(a,o,h,p,x){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(x&335544128)===x)if(a.stateNode.complete)a.flags|=8192;else if(le())a.flags|=8192;else throw qe=Ph,Lh}else a.flags&=-16777217}function Go(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!eM(o))if(le())a.flags|=8192;else throw qe=Ph,Lh}function Cc(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?Rn():536870912,a.lanes|=o,Qa|=o)}function ef(a,o){if(!Cn)switch(a.tailMode){case"hidden":o=a.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function ei(a){var o=a.alternate!==null&&a.alternate.child===a.child,h=0,p=0;if(o)for(var x=a.child;x!==null;)h|=x.lanes|x.childLanes,p|=x.subtreeFlags&65011712,p|=x.flags&65011712,x.return=a,x=x.sibling;else for(x=a.child;x!==null;)h|=x.lanes|x.childLanes,p|=x.subtreeFlags,p|=x.flags,x.return=a,x=x.sibling;return a.subtreeFlags|=p,a.childLanes=h,o}function Jm(a,o,h){var p=o.pendingProps;switch(Tl(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(o),null;case 1:return ei(o),null;case 3:return h=o.stateNode,p=null,a!==null&&(p=a.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),lr(Ve),de(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(fu(o)?ga(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,hm())),ei(o),null;case 26:var x=o.type,b=o.memoizedState;return a===null?(ga(o),b!==null?(ei(o),Go(o,b)):(ei(o),Ol(o,x,null,p,h))):b?b!==a.memoizedState?(ga(o),ei(o),Go(o,b)):(ei(o),o.flags&=-16777217):(a=a.memoizedProps,a!==p&&ga(o),ei(o),Ol(o,x,a,p,h)),null;case 27:if(Ze(o),h=xt.current,x=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&ga(o);else{if(!p){if(o.stateNode===null)throw Error(n(166));return ei(o),null}a=Lt.current,fu(o)?id(o):(a=Y1(x,p,h),o.stateNode=a,ga(o))}return ei(o),null;case 5:if(Ze(o),x=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&ga(o);else{if(!p){if(o.stateNode===null)throw Error(n(166));return ei(o),null}if(b=Lt.current,fu(o))id(o);else{var B=Cy(xt.current);switch(b){case 1:b=B.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:b=B.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":b=B.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":b=B.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":b=B.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof p.is=="string"?B.createElement("select",{is:p.is}):B.createElement("select"),p.multiple?b.multiple=!0:p.size&&(b.size=p.size);break;default:b=typeof p.is=="string"?B.createElement(x,{is:p.is}):B.createElement(x)}}b[on]=o,b[xi]=p;t:for(B=o.child;B!==null;){if(B.tag===5||B.tag===6)b.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===o)break t;for(;B.sibling===null;){if(B.return===null||B.return===o)break t;B=B.return}B.sibling.return=B.return,B=B.sibling}o.stateNode=b;t:switch(Js(b,x,p),x){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break t;case"img":p=!0;break t;default:p=!1}p&&ga(o)}}return ei(o),Ol(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,h),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==p&&ga(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(n(166));if(a=xt.current,fu(o)){if(a=o.stateNode,h=o.memoizedProps,p=null,x=ls,x!==null)switch(x.tag){case 27:case 5:p=x.memoizedProps}a[on]=o,a=!!(a.nodeValue===h||p!==null&&p.suppressHydrationWarning===!0||P1(a.nodeValue,h)),a||Mn(o,!0)}else a=Cy(a).createTextNode(p),a[on]=o,o.stateNode=a}return ei(o),null;case 31:if(h=o.memoizedState,a===null||a.memoizedState!==null){if(p=fu(o),h!==null){if(a===null){if(!p)throw Error(n(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[on]=o}else du(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ei(o),a=!1}else h=hm(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=h),a=!0;if(!a)return o.flags&256?(Fa(o),o):(Fa(o),null);if((o.flags&128)!==0)throw Error(n(558))}return ei(o),null;case 13:if(p=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(x=fu(o),p!==null&&p.dehydrated!==null){if(a===null){if(!x)throw Error(n(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[on]=o}else du(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ei(o),x=!1}else x=hm(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=x),x=!0;if(!x)return o.flags&256?(Fa(o),o):(Fa(o),null)}return Fa(o),(o.flags&128)!==0?(o.lanes=h,o):(h=p!==null,a=a!==null&&a.memoizedState!==null,h&&(p=o.child,x=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(x=p.alternate.memoizedState.cachePool.pool),b=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(b=p.memoizedState.cachePool.pool),b!==x&&(p.flags|=2048)),h!==a&&h&&(o.child.flags|=8192),Cc(o,o.updateQueue),ei(o),null);case 4:return de(),a===null&&_x(o.stateNode.containerInfo),ei(o),null;case 10:return lr(o.type),ei(o),null;case 19:if(ut(Di),p=o.memoizedState,p===null)return ei(o),null;if(x=(o.flags&128)!==0,b=p.rendering,b===null)if(x)ef(p,!1);else{if(Jn!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=ud(a),b!==null){for(o.flags|=128,ef(p,!1),a=b.updateQueue,o.updateQueue=a,Cc(o,a),o.subtreeFlags=0,a=h,h=o.child;h!==null;)Ds(h,a),h=h.sibling;return Ot(Di,Di.current&1|2),Cn&&Io(o,p.treeForkCount),o.child}a=a.sibling}p.tail!==null&&X()>Za&&(o.flags|=128,x=!0,ef(p,!1),o.lanes=4194304)}else{if(!x)if(a=ud(b),a!==null){if(o.flags|=128,x=!0,a=a.updateQueue,o.updateQueue=a,Cc(o,a),ef(p,!0),p.tail===null&&p.tailMode==="hidden"&&!b.alternate&&!Cn)return ei(o),null}else 2*X()-p.renderingStartTime>Za&&h!==536870912&&(o.flags|=128,x=!0,ef(p,!1),o.lanes=4194304);p.isBackwards?(b.sibling=o.child,o.child=b):(a=p.last,a!==null?a.sibling=b:o.child=b,p.last=b)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=X(),a.sibling=null,h=Di.current,Ot(Di,x?h&1|2:h&1),Cn&&Io(o,p.treeForkCount),a):(ei(o),null);case 22:case 23:return Fa(o),Is(),p=o.memoizedState!==null,a!==null?a.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(h&536870912)!==0&&(o.flags&128)===0&&(ei(o),o.subtreeFlags&6&&(o.flags|=8192)):ei(o),h=o.updateQueue,h!==null&&Cc(o,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==h&&(o.flags|=2048),a!==null&&ut(Ml),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),lr(Ve),ei(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function Md(a,o){switch(Tl(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return lr(Ve),de(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return Ze(o),null;case 31:if(o.memoizedState!==null){if(Fa(o),o.alternate===null)throw Error(n(340));du()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(Fa(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(n(340));du()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return ut(Di),null;case 4:return de(),null;case 10:return lr(o.type),null;case 22:case 23:return Fa(o),Is(),a!==null&&ut(Ml),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return lr(Ve),null;case 25:return null;default:return null}}function Eu(a,o){switch(Tl(o),o.tag){case 3:lr(Ve),de();break;case 26:case 27:case 5:Ze(o);break;case 4:de();break;case 31:o.memoizedState!==null&&Fa(o);break;case 13:Fa(o);break;case 19:ut(Di);break;case 10:lr(o.type);break;case 22:case 23:Fa(o),Is(),a!==null&&ut(Ml);break;case 24:lr(Ve)}}function co(a,o){try{var h=o.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var x=p.next;h=x;do{if((h.tag&a)===a){p=void 0;var b=h.create,B=h.inst;p=b(),B.destroy=p}h=h.next}while(h!==x)}}catch(W){oi(o,o.return,W)}}function fr(a,o,h){try{var p=o.updateQueue,x=p!==null?p.lastEffect:null;if(x!==null){var b=x.next;p=b;do{if((p.tag&a)===a){var B=p.inst,W=B.destroy;if(W!==void 0){B.destroy=void 0,x=o;var at=h,bt=W;try{bt()}catch(zt){oi(x,at,zt)}}}p=p.next}while(p!==b)}}catch(zt){oi(o,o.return,zt)}}function Ll(a){var o=a.updateQueue;if(o!==null){var h=a.stateNode;try{Ss(o,h)}catch(p){oi(a,a.return,p)}}}function $m(a,o,h){h.props=Es(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(p){oi(a,o,p)}}function ho(a,o){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var p=a.stateNode;break;case 30:p=a.stateNode;break;default:p=a.stateNode}typeof h=="function"?a.refCleanup=h(p):h.current=p}}catch(x){oi(a,o,x)}}function Ya(a,o){var h=a.ref,p=a.refCleanup;if(h!==null)if(typeof p=="function")try{p()}catch(x){oi(a,o,x)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){oi(a,o,x)}else h.current=null}function Wa(a){var o=a.type,h=a.memoizedProps,p=a.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":h.autoFocus&&p.focus();break t;case"img":h.src?p.src=h.src:h.srcSet&&(p.srcset=h.srcSet)}}catch(x){oi(a,a.return,x)}}function dr(a,o,h){try{var p=a.stateNode;cN(p,a.type,h,o),p[xi]=o}catch(x){oi(a,a.return,x)}}function Yi(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Lc(a.type)||a.tag===4}function fo(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||Yi(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Lc(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function fn(a,o,h){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,o):(o=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,o.appendChild(a),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=sr));else if(p!==4&&(p===27&&Lc(a.type)&&(h=a.stateNode,o=null),a=a.child,a!==null))for(fn(a,o,h),a=a.sibling;a!==null;)fn(a,o,h),a=a.sibling}function Xn(a,o,h){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?h.insertBefore(a,o):h.appendChild(a);else if(p!==4&&(p===27&&Lc(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(Xn(a,o,h),a=a.sibling;a!==null;)Xn(a,o,h),a=a.sibling}function Vi(a){var o=a.stateNode,h=a.memoizedProps;try{for(var p=a.type,x=o.attributes;x.length;)o.removeAttributeNode(x[0]);Js(o,p,h),o[on]=a,o[xi]=h}catch(b){oi(a,a.return,b)}}var pr=!1,vi=!1,ko=!1,nf=typeof WeakSet=="function"?WeakSet:Set,Ui=null;function Dc(a,o){if(a=a.containerInfo,Sx=Py,a=Yf(a),uc(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else t:{h=(h=a.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var x=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{h.nodeType,b.nodeType}catch{h=null;break t}var B=0,W=-1,at=-1,bt=0,zt=0,jt=a,Rt=null;e:for(;;){for(var Nt;jt!==h||x!==0&&jt.nodeType!==3||(W=B+x),jt!==b||p!==0&&jt.nodeType!==3||(at=B+p),jt.nodeType===3&&(B+=jt.nodeValue.length),(Nt=jt.firstChild)!==null;)Rt=jt,jt=Nt;for(;;){if(jt===a)break e;if(Rt===h&&++bt===x&&(W=B),Rt===b&&++zt===p&&(at=B),(Nt=jt.nextSibling)!==null)break;jt=Rt,Rt=jt.parentNode}jt=Nt}h=W===-1||at===-1?null:{start:W,end:at}}else h=null}h=h||{start:0,end:0}}else h=null;for(xx={focusedElem:a,selectionRange:h},Py=!1,Ui=o;Ui!==null;)if(o=Ui,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,Ui=a;else for(;Ui!==null;){switch(o=Ui,b=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(h=0;h<a.length;h++)x=a[h],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,h=o,x=b.memoizedProps,b=b.memoizedState,p=h.stateNode;try{var Ne=Es(h.type,x);a=p.getSnapshotBeforeUpdate(Ne,b),p.__reactInternalSnapshotBeforeUpdate=a}catch(We){oi(h,h.return,We)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,h=a.nodeType,h===9)bx(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":bx(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=o.sibling,a!==null){a.return=o.return,Ui=a;break}Ui=o.return}}function Ey(a,o,h){var p=h.flags;switch(h.tag){case 0:case 11:case 15:qo(a,h),p&4&&co(5,h);break;case 1:if(qo(a,h),p&4)if(a=h.stateNode,o===null)try{a.componentDidMount()}catch(B){oi(h,h.return,B)}else{var x=Es(h.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(x,o,a.__reactInternalSnapshotBeforeUpdate)}catch(B){oi(h,h.return,B)}}p&64&&Ll(h),p&512&&ho(h,h.return);break;case 3:if(qo(a,h),p&64&&(a=h.updateQueue,a!==null)){if(o=null,h.child!==null)switch(h.child.tag){case 27:case 5:o=h.child.stateNode;break;case 1:o=h.child.stateNode}try{Ss(a,o)}catch(B){oi(h,h.return,B)}}break;case 27:o===null&&p&4&&Vi(h);case 26:case 5:qo(a,h),o===null&&p&4&&Wa(h),p&512&&ho(h,h.return);break;case 12:qo(a,h);break;case 31:qo(a,h),p&4&&Rd(a,h);break;case 13:qo(a,h),p&4&&tg(a,h),p&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=JD.bind(null,h),yN(a,h))));break;case 22:if(p=h.memoizedState!==null||pr,!p){o=o!==null&&o.memoizedState!==null||vi,x=pr;var b=vi;pr=p,(vi=o)&&!b?Qn(a,h,(h.subtreeFlags&8772)!==0):qo(a,h),pr=x,vi=b}break;case 30:break;default:qo(a,h)}}function Ad(a){var o=a.alternate;o!==null&&(a.alternate=null,Ad(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&K(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Vn=null,Wi=!1;function Os(a,o,h){for(h=h.child;h!==null;)Pl(a,o,h),h=h.sibling}function Pl(a,o,h){if(ie&&typeof ie.onCommitFiberUnmount=="function")try{ie.onCommitFiberUnmount(Yt,h)}catch{}switch(h.tag){case 26:vi||Ya(h,o),Os(a,o,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:vi||Ya(h,o);var p=Vn,x=Wi;Lc(h.type)&&(Vn=h.stateNode,Wi=!1),Os(a,o,h),sg(h.stateNode),Vn=p,Wi=x;break;case 5:vi||Ya(h,o);case 6:if(p=Vn,x=Wi,Vn=null,Os(a,o,h),Vn=p,Wi=x,Vn!==null)if(Wi)try{(Vn.nodeType===9?Vn.body:Vn.nodeName==="HTML"?Vn.ownerDocument.body:Vn).removeChild(h.stateNode)}catch(b){oi(h,o,b)}else try{Vn.removeChild(h.stateNode)}catch(b){oi(h,o,b)}break;case 18:Vn!==null&&(Wi?(a=Vn,G1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),Vd(a)):G1(Vn,h.stateNode));break;case 4:p=Vn,x=Wi,Vn=h.stateNode.containerInfo,Wi=!0,Os(a,o,h),Vn=p,Wi=x;break;case 0:case 11:case 14:case 15:fr(2,h,o),vi||fr(4,h,o),Os(a,o,h);break;case 1:vi||(Ya(h,o),p=h.stateNode,typeof p.componentWillUnmount=="function"&&$m(h,o,p)),Os(a,o,h);break;case 21:Os(a,o,h);break;case 22:vi=(p=vi)||h.memoizedState!==null,Os(a,o,h),vi=p;break;default:Os(a,o,h)}}function Rd(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Vd(a)}catch(h){oi(o,o.return,h)}}}function tg(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Vd(a)}catch(h){oi(o,o.return,h)}}function Ty(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new nf),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new nf),o;default:throw Error(n(435,a.tag))}}function Bi(a,o){var h=Ty(a);o.forEach(function(p){if(!h.has(p)){h.add(p);var x=$D.bind(null,a,p);p.then(x,x)}})}function Ls(a,o){var h=o.deletions;if(h!==null)for(var p=0;p<h.length;p++){var x=h[p],b=a,B=o,W=B;t:for(;W!==null;){switch(W.tag){case 27:if(Lc(W.type)){Vn=W.stateNode,Wi=!1;break t}break;case 5:Vn=W.stateNode,Wi=!1;break t;case 3:case 4:Vn=W.stateNode.containerInfo,Wi=!0;break t}W=W.return}if(Vn===null)throw Error(n(160));Pl(b,B,x),Vn=null,Wi=!1,b=x.alternate,b!==null&&(b.return=null),x.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)zl(o,a),o=o.sibling}var _a=null;function zl(a,o){var h=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Ls(o,a),Oi(a),p&4&&(fr(3,a,a.return),co(3,a),fr(5,a,a.return));break;case 1:Ls(o,a),Oi(a),p&512&&(vi||h===null||Ya(h,h.return)),p&64&&pr&&(a=a.updateQueue,a!==null&&(p=a.callbacks,p!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?p:h.concat(p))));break;case 26:var x=_a;if(Ls(o,a),Oi(a),p&512&&(vi||h===null||Ya(h,h.return)),p&4){var b=h!==null?h.memoizedState:null;if(p=a.memoizedState,h===null)if(p===null)if(a.stateNode===null){t:{p=a.type,h=a.memoizedProps,x=x.ownerDocument||x;e:switch(p){case"title":b=x.getElementsByTagName("title")[0],(!b||b[ra]||b[on]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=x.createElement(p),x.head.insertBefore(b,x.querySelector("head > title"))),Js(b,p,h),b[on]=a,Xt(b),p=b;break t;case"link":var B=$1("link","href",x).get(p+(h.href||""));if(B){for(var W=0;W<B.length;W++)if(b=B[W],b.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&b.getAttribute("rel")===(h.rel==null?null:h.rel)&&b.getAttribute("title")===(h.title==null?null:h.title)&&b.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){B.splice(W,1);break e}}b=x.createElement(p),Js(b,p,h),x.head.appendChild(b);break;case"meta":if(B=$1("meta","content",x).get(p+(h.content||""))){for(W=0;W<B.length;W++)if(b=B[W],b.getAttribute("content")===(h.content==null?null:""+h.content)&&b.getAttribute("name")===(h.name==null?null:h.name)&&b.getAttribute("property")===(h.property==null?null:h.property)&&b.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&b.getAttribute("charset")===(h.charSet==null?null:h.charSet)){B.splice(W,1);break e}}b=x.createElement(p),Js(b,p,h),x.head.appendChild(b);break;default:throw Error(n(468,p))}b[on]=a,Xt(b),p=b}a.stateNode=p}else tM(x,a.type,a.stateNode);else a.stateNode=J1(x,p,a.memoizedProps);else b!==p?(b===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):b.count--,p===null?tM(x,a.type,a.stateNode):J1(x,p,a.memoizedProps)):p===null&&a.stateNode!==null&&dr(a,a.memoizedProps,h.memoizedProps)}break;case 27:Ls(o,a),Oi(a),p&512&&(vi||h===null||Ya(h,h.return)),h!==null&&p&4&&dr(a,a.memoizedProps,h.memoizedProps);break;case 5:if(Ls(o,a),Oi(a),p&512&&(vi||h===null||Ya(h,h.return)),a.flags&32){x=a.stateNode;try{qs(x,"")}catch(Ne){oi(a,a.return,Ne)}}p&4&&a.stateNode!=null&&(x=a.memoizedProps,dr(a,x,h!==null?h.memoizedProps:x)),p&1024&&(ko=!0);break;case 6:if(Ls(o,a),Oi(a),p&4){if(a.stateNode===null)throw Error(n(162));p=a.memoizedProps,h=a.stateNode;try{h.nodeValue=p}catch(Ne){oi(a,a.return,Ne)}}break;case 3:if(Iy=null,x=_a,_a=Dy(o.containerInfo),Ls(o,a),_a=x,Oi(a),p&4&&h!==null&&h.memoizedState.isDehydrated)try{Vd(o.containerInfo)}catch(Ne){oi(a,a.return,Ne)}ko&&(ko=!1,by(a));break;case 4:p=_a,_a=Dy(a.stateNode.containerInfo),Ls(o,a),Oi(a),_a=p;break;case 12:Ls(o,a),Oi(a);break;case 31:Ls(o,a),Oi(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Bi(a,p)));break;case 13:Ls(o,a),Oi(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Yo=X()),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Bi(a,p)));break;case 22:x=a.memoizedState!==null;var at=h!==null&&h.memoizedState!==null,bt=pr,zt=vi;if(pr=bt||x,vi=zt||at,Ls(o,a),vi=zt,pr=bt,Oi(a),p&8192)t:for(o=a.stateNode,o._visibility=x?o._visibility&-2:o._visibility|1,x&&(h===null||at||pr||vi||Tu(a)),h=null,o=a;;){if(o.tag===5||o.tag===26){if(h===null){at=h=o;try{if(b=at.stateNode,x)B=b.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{W=at.stateNode;var jt=at.memoizedProps.style,Rt=jt!=null&&jt.hasOwnProperty("display")?jt.display:null;W.style.display=Rt==null||typeof Rt=="boolean"?"":(""+Rt).trim()}}catch(Ne){oi(at,at.return,Ne)}}}else if(o.tag===6){if(h===null){at=o;try{at.stateNode.nodeValue=x?"":at.memoizedProps}catch(Ne){oi(at,at.return,Ne)}}}else if(o.tag===18){if(h===null){at=o;try{var Nt=at.stateNode;x?k1(Nt,!0):k1(at.stateNode,!1)}catch(Ne){oi(at,at.return,Ne)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break t;for(;o.sibling===null;){if(o.return===null||o.return===a)break t;h===o&&(h=null),o=o.return}h===o&&(h=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=a.updateQueue,p!==null&&(h=p.retryQueue,h!==null&&(p.retryQueue=null,Bi(a,h))));break;case 19:Ls(o,a),Oi(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Bi(a,p)));break;case 30:break;case 21:break;default:Ls(o,a),Oi(a)}}function Oi(a){var o=a.flags;if(o&2){try{for(var h,p=a.return;p!==null;){if(Yi(p)){h=p;break}p=p.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var x=h.stateNode,b=fo(a);Xn(a,b,x);break;case 5:var B=h.stateNode;h.flags&32&&(qs(B,""),h.flags&=-33);var W=fo(a);Xn(a,W,B);break;case 3:case 4:var at=h.stateNode.containerInfo,bt=fo(a);fn(a,bt,at);break;default:throw Error(n(161))}}catch(zt){oi(a,a.return,zt)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function by(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;by(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function qo(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Ey(a,o.alternate,o),o=o.sibling}function Tu(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:fr(4,o,o.return),Tu(o);break;case 1:Ya(o,o.return);var h=o.stateNode;typeof h.componentWillUnmount=="function"&&$m(o,o.return,h),Tu(o);break;case 27:sg(o.stateNode);case 26:case 5:Ya(o,o.return),Tu(o);break;case 22:o.memoizedState===null&&Tu(o);break;case 30:Tu(o);break;default:Tu(o)}a=a.sibling}}function Qn(a,o,h){for(h=h&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,x=a,b=o,B=b.flags;switch(b.tag){case 0:case 11:case 15:Qn(x,b,h),co(4,b);break;case 1:if(Qn(x,b,h),p=b,x=p.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(bt){oi(p,p.return,bt)}if(p=b,x=p.updateQueue,x!==null){var W=p.stateNode;try{var at=x.shared.hiddenCallbacks;if(at!==null)for(x.shared.hiddenCallbacks=null,x=0;x<at.length;x++)ro(at[x],W)}catch(bt){oi(p,p.return,bt)}}h&&B&64&&Ll(b),ho(b,b.return);break;case 27:Vi(b);case 26:case 5:Qn(x,b,h),h&&p===null&&B&4&&Wa(b),ho(b,b.return);break;case 12:Qn(x,b,h);break;case 31:Qn(x,b,h),h&&B&4&&Rd(x,b);break;case 13:Qn(x,b,h),h&&B&4&&tg(x,b);break;case 22:b.memoizedState===null&&Qn(x,b,h),ho(b,b.return);break;case 30:break;default:Qn(x,b,h)}o=o.sibling}}function wd(a,o){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&vs(h))}function Xo(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&vs(a))}function ts(a,o,h,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Mi(a,o,h,p),o=o.sibling}function Mi(a,o,h,p){var x=o.flags;switch(o.tag){case 0:case 11:case 15:ts(a,o,h,p),x&2048&&co(9,o);break;case 1:ts(a,o,h,p);break;case 3:ts(a,o,h,p),x&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&vs(a)));break;case 12:if(x&2048){ts(a,o,h,p),a=o.stateNode;try{var b=o.memoizedProps,B=b.id,W=b.onPostCommit;typeof W=="function"&&W(B,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(at){oi(o,o.return,at)}}else ts(a,o,h,p);break;case 31:ts(a,o,h,p);break;case 13:ts(a,o,h,p);break;case 23:break;case 22:b=o.stateNode,B=o.alternate,o.memoizedState!==null?b._visibility&2?ts(a,o,h,p):Nc(a,o):b._visibility&2?ts(a,o,h,p):(b._visibility|=2,Vl(a,o,h,p,(o.subtreeFlags&10256)!==0||!1)),x&2048&&wd(B,o);break;case 24:ts(a,o,h,p),x&2048&&Xo(o.alternate,o);break;default:ts(a,o,h,p)}}function Vl(a,o,h,p,x){for(x=x&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=a,B=o,W=h,at=p,bt=B.flags;switch(B.tag){case 0:case 11:case 15:Vl(b,B,W,at,x),co(8,B);break;case 23:break;case 22:var zt=B.stateNode;B.memoizedState!==null?zt._visibility&2?Vl(b,B,W,at,x):Nc(b,B):(zt._visibility|=2,Vl(b,B,W,at,x)),x&&bt&2048&&wd(B.alternate,B);break;case 24:Vl(b,B,W,at,x),x&&bt&2048&&Xo(B.alternate,B);break;default:Vl(b,B,W,at,x)}o=o.sibling}}function Nc(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var h=a,p=o,x=p.flags;switch(p.tag){case 22:Nc(h,p),x&2048&&wd(p.alternate,p);break;case 24:Nc(h,p),x&2048&&Xo(p.alternate,p);break;default:Nc(h,p)}o=o.sibling}}var Li=8192;function bu(a,o,h){if(a.subtreeFlags&Li)for(a=a.child;a!==null;)Fi(a,o,h),a=a.sibling}function Fi(a,o,h){switch(a.tag){case 26:bu(a,o,h),a.flags&Li&&a.memoizedState!==null&&DN(h,_a,a.memoizedState,a.memoizedProps);break;case 5:bu(a,o,h);break;case 3:case 4:var p=_a;_a=Dy(a.stateNode.containerInfo),bu(a,o,h),_a=p;break;case 22:a.memoizedState===null&&(p=a.alternate,p!==null&&p.memoizedState!==null?(p=Li,Li=16777216,bu(a,o,h),Li=p):bu(a,o,h));break;default:bu(a,o,h)}}function ya(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function Qs(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var p=o[h];Ui=p,sf(p,a)}ya(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Mu(a),a=a.sibling}function Mu(a){switch(a.tag){case 0:case 11:case 15:Qs(a),a.flags&2048&&fr(9,a,a.return);break;case 3:Qs(a);break;case 12:Qs(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Cd(a)):Qs(a);break;default:Qs(a)}}function Cd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var p=o[h];Ui=p,sf(p,a)}ya(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:fr(8,o,o.return),Cd(o);break;case 22:h=o.stateNode,h._visibility&2&&(h._visibility&=-3,Cd(o));break;default:Cd(o)}a=a.sibling}}function sf(a,o){for(;Ui!==null;){var h=Ui;switch(h.tag){case 0:case 11:case 15:fr(8,h,o);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var p=h.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:vs(h.memoizedState.cache)}if(p=h.child,p!==null)p.return=h,Ui=p;else t:for(h=a;Ui!==null;){p=Ui;var x=p.sibling,b=p.return;if(Ad(p),p===h){Ui=null;break t}if(x!==null){x.return=b,Ui=x;break t}Ui=b}}}var Dd={getCacheForType:function(a){var o=cs(Ve),h=o.data.get(a);return h===void 0&&(h=a(),o.data.set(a,h)),h},cacheSignal:function(){return cs(Ve).controller.signal}},Nd=typeof WeakMap=="function"?WeakMap:Map,In=0,Zn=null,dn=null,An=0,Be=0,Tn=null,rn=!1,Sn=!1,si=!1,Hi=0,Jn=0,Ka=0,jo=0,Vr=0,Un=0,Qa=0,Br=null,Ps=null,va=!1,Yo=0,Ic=0,Za=1/0,Uc=null,po=null,Ai=0,Fr=null,Ja=null,mr=0,Wo=0,Au=null,Id=null,Ru=0,wu=null;function Zs(){return(In&2)!==0&&An!==0?An&-An:k.T!==null?dx():ws()}function l(){if(Un===0)if((An&536870912)===0||Cn){var a=re;re<<=1,(re&3932160)===0&&(re=262144),Un=a}else Un=536870912;return a=$i.current,a!==null&&(a.flags|=32),Un}function c(a,o,h){(a===Zn&&(Be===2||Be===9)||a.cancelPendingCommit!==null)&&(mt(a,0),I(a,An,Un,!1)),ss(a,h),((In&2)===0||a!==Zn)&&(a===Zn&&((In&2)===0&&(jo|=h),Jn===4&&I(a,An,Un,!1)),Bl(a))}function g(a,o,h){if((In&6)!==0)throw Error(n(327));var p=!h&&(o&127)===0&&(o&a.expiredLanes)===0||ye(a,o),x=p?Cu(a,o):Sa(a,o,!0),b=p;do{if(x===0){Sn&&!p&&I(a,o,0,!1);break}else{if(h=a.current.alternate,b&&!A(h)){x=Sa(a,o,!1),b=!1;continue}if(x===2){if(b=o,a.errorRecoveryDisabledLanes&b)var B=0;else B=a.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){o=B;t:{var W=a;x=Br;var at=W.current.memoizedState.isDehydrated;if(at&&(mt(W,B).flags|=256),B=Sa(W,B,!1),B!==2){if(si&&!at){W.errorRecoveryDisabledLanes|=b,jo|=b,x=4;break t}b=Ps,Ps=x,b!==null&&(Ps===null?Ps=b:Ps.push.apply(Ps,b))}x=B}if(b=!1,x!==2)continue}}if(x===1){mt(a,0),I(a,o,0,!0);break}t:{switch(p=a,b=x,b){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:I(p,o,Un,!rn);break t;case 2:Ps=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(x=Yo+300-X(),10<x)){if(I(p,o,Un,!rn),Bt(p,0,!0)!==0)break t;mr=o,p.timeoutHandle=F1(E.bind(null,p,h,Ps,Uc,va,o,Un,jo,Qa,rn,b,"Throttled",-0,0),x);break t}E(p,h,Ps,Uc,va,o,Un,jo,Qa,rn,b,null,-0,0)}}break}while(!0);Bl(a)}function E(a,o,h,p,x,b,B,W,at,bt,zt,jt,Rt,Nt){if(a.timeoutHandle=-1,jt=o.subtreeFlags,jt&8192||(jt&16785408)===16785408){jt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sr},Fi(o,b,jt);var Ne=(b&62914560)===b?Yo-X():(b&4194048)===b?Ic-X():0;if(Ne=NN(jt,Ne),Ne!==null){mr=b,a.cancelPendingCommit=Ne(Qe.bind(null,a,o,b,h,p,x,B,W,at,zt,jt,null,Rt,Nt)),I(a,b,B,!bt);return}}Qe(a,o,b,h,p,x,B,W,at)}function A(a){for(var o=a;;){var h=o.tag;if((h===0||h===11||h===15)&&o.flags&16384&&(h=o.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var p=0;p<h.length;p++){var x=h[p],b=x.getSnapshot;x=x.value;try{if(!_i(b(),x))return!1}catch{return!1}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function I(a,o,h,p){o&=~Vr,o&=~jo,a.suspendedLanes|=o,a.pingedLanes&=~o,p&&(a.warmLanes|=o),p=a.expirationTimes;for(var x=o;0<x;){var b=31-pe(x),B=1<<b;p[b]=-1,x&=~B}h!==0&&br(a,h,o)}function Q(){return(In&6)===0?(eg(0),!1):!0}function st(){if(dn!==null){if(Be===0)var a=dn.return;else a=dn,Ns=Oo=null,Nm(a),Rl=null,wl=0,a=dn;for(;a!==null;)Eu(a.alternate,a),a=a.return;dn=null}}function mt(a,o){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,dN(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),mr=0,st(),Zn=a,dn=h=to(a.current,null),An=o,Be=0,Tn=null,rn=!1,Sn=ye(a,o),si=!1,Qa=Un=Vr=jo=Ka=Jn=0,Ps=Br=null,va=!1,(o&8)!==0&&(o|=o&32);var p=a.entangledLanes;if(p!==0)for(a=a.entanglements,p&=o;0<p;){var x=31-pe(p),b=1<<x;o|=a[x],p&=~b}return Hi=o,Sl(),h}function Ft(a,o){Ke=null,k.H=Xh,o===Al||o===Or?(o=rd(),Be=3):o===Lh?(o=rd(),Be=4):Be=o===Td?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Tn=o,dn===null&&(Jn=1,Ed(a,ha(o,a.current)))}function le(){var a=$i.current;return a===null?!0:(An&4194048)===An?ur===null:(An&62914560)===An||(An&536870912)!==0?a===ur:!1}function ge(){var a=k.H;return k.H=Xh,a===null?Xh:a}function Se(){var a=k.A;return k.A=Dd,a}function en(){Jn=4,rn||(An&4194048)!==An&&$i.current!==null||(Sn=!0),(Ka&134217727)===0&&(jo&134217727)===0||Zn===null||I(Zn,An,Un,!1)}function Sa(a,o,h){var p=In;In|=2;var x=ge(),b=Se();(Zn!==a||An!==o)&&(Uc=null,mt(a,o)),o=!1;var B=Jn;t:do try{if(Be!==0&&dn!==null){var W=dn,at=Tn;switch(Be){case 8:st(),B=6;break t;case 3:case 2:case 9:case 6:$i.current===null&&(o=!0);var bt=Be;if(Be=0,Tn=null,ne(a,W,at,bt),h&&Sn){B=0;break t}break;default:bt=Be,Be=0,Tn=null,ne(a,W,at,bt)}}af(),B=Jn;break}catch(zt){Ft(a,zt)}while(!0);return o&&a.shellSuspendCounter++,Ns=Oo=null,In=p,k.H=x,k.A=b,dn===null&&(Zn=null,An=0,Sl()),B}function af(){for(;dn!==null;)dt(dn)}function Cu(a,o){var h=In;In|=2;var p=ge(),x=Se();Zn!==a||An!==o?(Uc=null,Za=X()+500,mt(a,o)):Sn=ye(a,o);t:do try{if(Be!==0&&dn!==null){o=dn;var b=Tn;e:switch(Be){case 1:Be=0,Tn=null,ne(a,o,b,1);break;case 2:case 9:if(K_(b)){Be=0,Tn=null,Ct(o);break}o=function(){Be!==2&&Be!==9||Zn!==a||(Be=7),Bl(a)},b.then(o,o);break t;case 3:Be=7;break t;case 4:Be=5;break t;case 7:K_(b)?(Be=0,Tn=null,Ct(o)):(Be=0,Tn=null,ne(a,o,b,7));break;case 5:var B=null;switch(dn.tag){case 26:B=dn.memoizedState;case 5:case 27:var W=dn;if(B?eM(B):W.stateNode.complete){Be=0,Tn=null;var at=W.sibling;if(at!==null)dn=at;else{var bt=W.return;bt!==null?(dn=bt,Pe(bt)):dn=null}break e}}Be=0,Tn=null,ne(a,o,b,5);break;case 6:Be=0,Tn=null,ne(a,o,b,6);break;case 8:st(),Jn=6;break t;default:throw Error(n(462))}}Mt();break}catch(zt){Ft(a,zt)}while(!0);return Ns=Oo=null,k.H=p,k.A=x,In=h,dn!==null?0:(Zn=null,An=0,Sl(),Jn)}function Mt(){for(;dn!==null&&!Ye();)dt(dn)}function dt(a){var o=bd(a.alternate,a,Hi);a.memoizedProps=a.pendingProps,o===null?Pe(a):dn=o}function Ct(a){var o=a,h=o.alternate;switch(o.tag){case 15:case 0:o=Us(h,o,o.pendingProps,o.type,void 0,An);break;case 11:o=Us(h,o,o.pendingProps,o.type.render,o.ref,An);break;case 5:Nm(o);default:Eu(h,o),o=dn=Ds(o,Hi),o=bd(h,o,Hi)}a.memoizedProps=a.pendingProps,o===null?Pe(a):dn=o}function ne(a,o,h,p){Ns=Oo=null,Nm(o),Rl=null,wl=0;var x=o.return;try{if(Ga(a,x,o,h,An)){Jn=1,Ed(a,ha(h,a.current)),dn=null;return}}catch(b){if(x!==null)throw dn=x,b;Jn=1,Ed(a,ha(h,a.current)),dn=null;return}o.flags&32768?(Cn||p===1?a=!0:Sn||(An&536870912)!==0?a=!1:(rn=a=!0,(p===2||p===9||p===3||p===6)&&(p=$i.current,p!==null&&p.tag===13&&(p.flags|=16384))),hi(o,a)):Pe(o)}function Pe(a){var o=a;do{if((o.flags&32768)!==0){hi(o,rn);return}a=o.return;var h=Jm(o.alternate,o,Hi);if(h!==null){dn=h;return}if(o=o.sibling,o!==null){dn=o;return}dn=o=a}while(o!==null);Jn===0&&(Jn=5)}function hi(a,o){do{var h=Md(a.alternate,a);if(h!==null){h.flags&=32767,dn=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!o&&(a=a.sibling,a!==null)){dn=a;return}dn=a=h}while(a!==null);Jn=6,dn=null}function Qe(a,o,h,p,x,b,B,W,at){a.cancelPendingCommit=null;do Ud();while(Ai!==0);if((In&6)!==0)throw Error(n(327));if(o!==null){if(o===a.current)throw Error(n(177));if(b=o.lanes|o.childLanes,b|=Jf,Hs(a,h,b,B,W,at),a===Zn&&(dn=Zn=null,An=0),Ja=o,Fr=a,mr=h,Wo=b,Au=x,Id=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,tN(Ut,function(){return T1(),null})):(a.callbackNode=null,a.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=k.T,k.T=null,x=et.p,et.p=2,B=In,In|=4;try{Dc(a,o,h)}finally{In=B,et.p=x,k.T=p}}Ai=1,Bn(),es(),Fn()}}function Bn(){if(Ai===1){Ai=0;var a=Fr,o=Ja,h=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||h){h=k.T,k.T=null;var p=et.p;et.p=2;var x=In;In|=4;try{zl(o,a);var b=xx,B=Yf(a.containerInfo),W=b.focusedElem,at=b.selectionRange;if(B!==W&&W&&W.ownerDocument&&jf(W.ownerDocument.documentElement,W)){if(at!==null&&uc(W)){var bt=at.start,zt=at.end;if(zt===void 0&&(zt=bt),"selectionStart"in W)W.selectionStart=bt,W.selectionEnd=Math.min(zt,W.value.length);else{var jt=W.ownerDocument||document,Rt=jt&&jt.defaultView||window;if(Rt.getSelection){var Nt=Rt.getSelection(),Ne=W.textContent.length,We=Math.min(at.start,Ne),di=at.end===void 0?We:Math.min(at.end,Ne);!Nt.extend&&We>di&&(B=di,di=We,We=B);var pt=rm(W,We),rt=rm(W,di);if(pt&&rt&&(Nt.rangeCount!==1||Nt.anchorNode!==pt.node||Nt.anchorOffset!==pt.offset||Nt.focusNode!==rt.node||Nt.focusOffset!==rt.offset)){var Et=jt.createRange();Et.setStart(pt.node,pt.offset),Nt.removeAllRanges(),We>di?(Nt.addRange(Et),Nt.extend(rt.node,rt.offset)):(Et.setEnd(rt.node,rt.offset),Nt.addRange(Et))}}}}for(jt=[],Nt=W;Nt=Nt.parentNode;)Nt.nodeType===1&&jt.push({element:Nt,left:Nt.scrollLeft,top:Nt.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<jt.length;W++){var Gt=jt[W];Gt.element.scrollLeft=Gt.left,Gt.element.scrollTop=Gt.top}}Py=!!Sx,xx=Sx=null}finally{In=x,et.p=p,k.T=h}}a.current=o,Ai=2}}function es(){if(Ai===2){Ai=0;var a=Fr,o=Ja,h=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||h){h=k.T,k.T=null;var p=et.p;et.p=2;var x=In;In|=4;try{Ey(a,o.alternate,o)}finally{In=x,et.p=p,k.T=h}}Ai=3}}function Fn(){if(Ai===4||Ai===3){Ai=0,$();var a=Fr,o=Ja,h=mr,p=Id;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ai=5:(Ai=0,Ja=Fr=null,Ko(a,a.pendingLanes));var x=a.pendingLanes;if(x===0&&(po=null),Ia(h),o=o.stateNode,ie&&typeof ie.onCommitFiberRoot=="function")try{ie.onCommitFiberRoot(Yt,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=k.T,x=et.p,et.p=2,k.T=null;try{for(var b=a.onRecoverableError,B=0;B<p.length;B++){var W=p[B];b(W.value,{componentStack:W.stack})}}finally{k.T=o,et.p=x}}(mr&3)!==0&&Ud(),Bl(a),x=a.pendingLanes,(h&261930)!==0&&(x&42)!==0?a===wu?Ru++:(Ru=0,wu=a):Ru=0,eg(0)}}function Ko(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,vs(o)))}function Ud(){return Bn(),es(),Fn(),T1()}function T1(){if(Ai!==5)return!1;var a=Fr,o=Wo;Wo=0;var h=Ia(mr),p=k.T,x=et.p;try{et.p=32>h?32:h,k.T=null,h=Au,Au=null;var b=Fr,B=mr;if(Ai=0,Ja=Fr=null,mr=0,(In&6)!==0)throw Error(n(331));var W=In;if(In|=4,Mu(b.current),Mi(b,b.current,B,h),In=W,eg(0,!1),ie&&typeof ie.onPostCommitFiberRoot=="function")try{ie.onPostCommitFiberRoot(Yt,b)}catch{}return!0}finally{et.p=x,k.T=p,Ko(a,o)}}function b1(a,o,h){o=ha(h,o),o=Zm(a.stateNode,o,2),a=Vo(a,o,2),a!==null&&(ss(a,2),Bl(a))}function oi(a,o,h){if(a.tag===3)b1(a,a,h);else for(;o!==null;){if(o.tag===3){b1(o,a,h);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(po===null||!po.has(p))){a=ha(h,a),h=Mc(2),p=Vo(o,h,2),p!==null&&(ma(h,p,o,a),ss(p,2),Bl(p));break}}o=o.return}}function cx(a,o,h){var p=a.pingCache;if(p===null){p=a.pingCache=new Nd;var x=new Set;p.set(o,x)}else x=p.get(o),x===void 0&&(x=new Set,p.set(o,x));x.has(h)||(si=!0,x.add(h),a=ZD.bind(null,a,o,h),o.then(a,a))}function ZD(a,o,h){var p=a.pingCache;p!==null&&p.delete(o),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,Zn===a&&(An&h)===h&&(Jn===4||Jn===3&&(An&62914560)===An&&300>X()-Yo?(In&2)===0&&mt(a,0):Vr|=h,Qa===An&&(Qa=0)),Bl(a)}function M1(a,o){o===0&&(o=Rn()),a=xl(a,o),a!==null&&(ss(a,o),Bl(a))}function JD(a){var o=a.memoizedState,h=0;o!==null&&(h=o.retryLane),M1(a,h)}function $D(a,o){var h=0;switch(a.tag){case 31:case 13:var p=a.stateNode,x=a.memoizedState;x!==null&&(h=x.retryLane);break;case 19:p=a.stateNode;break;case 22:p=a.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(o),M1(a,h)}function tN(a,o){return Kt(a,o)}var My=null,Od=null,hx=!1,Ay=!1,fx=!1,Oc=0;function Bl(a){a!==Od&&a.next===null&&(Od===null?My=Od=a:Od=Od.next=a),Ay=!0,hx||(hx=!0,nN())}function eg(a,o){if(!fx&&Ay){fx=!0;do for(var h=!1,p=My;p!==null;){if(a!==0){var x=p.pendingLanes;if(x===0)var b=0;else{var B=p.suspendedLanes,W=p.pingedLanes;b=(1<<31-pe(42|a)+1)-1,b&=x&~(B&~W),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(h=!0,C1(p,b))}else b=An,b=Bt(p,p===Zn?b:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(b&3)===0||ye(p,b)||(h=!0,C1(p,b));p=p.next}while(h);fx=!1}}function eN(){A1()}function A1(){Ay=hx=!1;var a=0;Oc!==0&&fN()&&(a=Oc);for(var o=X(),h=null,p=My;p!==null;){var x=p.next,b=R1(p,o);b===0?(p.next=null,h===null?My=x:h.next=x,x===null&&(Od=h)):(h=p,(a!==0||(b&3)!==0)&&(Ay=!0)),p=x}Ai!==0&&Ai!==5||eg(a),Oc!==0&&(Oc=0)}function R1(a,o){for(var h=a.suspendedLanes,p=a.pingedLanes,x=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var B=31-pe(b),W=1<<B,at=x[B];at===-1?((W&h)===0||(W&p)!==0)&&(x[B]=Xe(W,o)):at<=o&&(a.expiredLanes|=W),b&=~W}if(o=Zn,h=An,h=Bt(a,a===o?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p=a.callbackNode,h===0||a===o&&(Be===2||Be===9)||a.cancelPendingCommit!==null)return p!==null&&p!==null&&ze(p),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||ye(a,h)){if(o=h&-h,o===a.callbackPriority)return o;switch(p!==null&&ze(p),Ia(h)){case 2:case 8:h=Qt;break;case 32:h=Ut;break;case 268435456:h=oe;break;default:h=Ut}return p=w1.bind(null,a),h=Kt(h,p),a.callbackPriority=o,a.callbackNode=h,o}return p!==null&&p!==null&&ze(p),a.callbackPriority=2,a.callbackNode=null,2}function w1(a,o){if(Ai!==0&&Ai!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(Ud()&&a.callbackNode!==h)return null;var p=An;return p=Bt(a,a===Zn?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p===0?null:(g(a,p,o),R1(a,X()),a.callbackNode!=null&&a.callbackNode===h?w1.bind(null,a):null)}function C1(a,o){if(Ud())return null;g(a,o,!0)}function nN(){pN(function(){(In&6)!==0?Kt(Dt,eN):A1()})}function dx(){if(Oc===0){var a=zo;a===0&&(a=te,te<<=1,(te&261888)===0&&(te=256)),Oc=a}return Oc}function D1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:iu(""+a)}function N1(a,o){var h=o.ownerDocument.createElement("input");return h.name=o.name,h.value=o.value,a.id&&h.setAttribute("form",a.id),o.parentNode.insertBefore(h,o),a=new FormData(a),h.parentNode.removeChild(h),a}function iN(a,o,h,p,x){if(o==="submit"&&h&&h.stateNode===x){var b=D1((x[xi]||null).action),B=p.submitter;B&&(o=(o=B[xi]||null)?D1(o.formAction):B.getAttribute("formAction"),o!==null&&(b=o,B=null));var W=new Rr("action","action",null,p,x);a.push({event:W,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Oc!==0){var at=B?N1(x,B):new FormData(x);jm(h,{pending:!0,data:at,method:x.method,action:b},null,at)}}else typeof b=="function"&&(W.preventDefault(),at=B?N1(x,B):new FormData(x),jm(h,{pending:!0,data:at,method:x.method,action:b},b,at))},currentTarget:x}]})}}for(var px=0;px<Zf.length;px++){var mx=Zf[px],sN=mx.toLowerCase(),aN=mx[0].toUpperCase()+mx.slice(1);Cs(sN,"on"+aN)}Cs(ca,"onAnimationEnd"),Cs(om,"onAnimationIteration"),Cs($r,"onAnimationStart"),Cs("dblclick","onDoubleClick"),Cs("focusin","onFocus"),Cs("focusout","onBlur"),Cs(dc,"onTransitionRun"),Cs(yl,"onTransitionStart"),Cs(lm,"onTransitionCancel"),Cs(Qf,"onTransitionEnd"),Ie("onMouseEnter",["mouseout","mouseover"]),Ie("onMouseLeave",["mouseout","mouseover"]),Ie("onPointerEnter",["pointerout","pointerover"]),Ie("onPointerLeave",["pointerout","pointerover"]),me("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),me("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),me("onBeforeInput",["compositionend","keypress","textInput","paste"]),me("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),me("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),me("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ng="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ng));function I1(a,o){o=(o&4)!==0;for(var h=0;h<a.length;h++){var p=a[h],x=p.event;p=p.listeners;t:{var b=void 0;if(o)for(var B=p.length-1;0<=B;B--){var W=p[B],at=W.instance,bt=W.currentTarget;if(W=W.listener,at!==b&&x.isPropagationStopped())break t;b=W,x.currentTarget=bt;try{b(x)}catch(zt){vl(zt)}x.currentTarget=null,b=at}else for(B=0;B<p.length;B++){if(W=p[B],at=W.instance,bt=W.currentTarget,W=W.listener,at!==b&&x.isPropagationStopped())break t;b=W,x.currentTarget=bt;try{b(x)}catch(zt){vl(zt)}x.currentTarget=null,b=at}}}}function Dn(a,o){var h=o[To];h===void 0&&(h=o[To]=new Set);var p=a+"__bubble";h.has(p)||(U1(o,a,2,!1),h.add(p))}function gx(a,o,h){var p=0;o&&(p|=4),U1(h,a,p,o)}var Ry="_reactListening"+Math.random().toString(36).slice(2);function _x(a){if(!a[Ry]){a[Ry]=!0,ce.forEach(function(h){h!=="selectionchange"&&(rN.has(h)||gx(h,!1,a),gx(h,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Ry]||(o[Ry]=!0,gx("selectionchange",!1,o))}}function U1(a,o,h,p){switch(lM(o)){case 2:var x=ON;break;case 8:x=LN;break;default:x=Ix}h=x.bind(null,o,h,a),x=void 0,!cl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(x=!0),p?x!==void 0?a.addEventListener(o,h,{capture:!0,passive:x}):a.addEventListener(o,h,!0):x!==void 0?a.addEventListener(o,h,{passive:x}):a.addEventListener(o,h,!1)}function yx(a,o,h,p,x){var b=p;if((o&1)===0&&(o&2)===0&&p!==null)t:for(;;){if(p===null)return;var B=p.tag;if(B===3||B===4){var W=p.stateNode.containerInfo;if(W===x)break;if(B===4)for(B=p.return;B!==null;){var at=B.tag;if((at===3||at===4)&&B.stateNode.containerInfo===x)return;B=B.return}for(;W!==null;){if(B=lt(W),B===null)return;if(at=B.tag,at===5||at===6||at===26||at===27){p=b=B;continue t}W=W.parentNode}}p=p.return}Ro(function(){var bt=b,zt=Ua(h),jt=[];t:{var Rt=Do.get(a);if(Rt!==void 0){var Nt=Rr,Ne=a;switch(a){case"keypress":if(Yr(h)===0)break t;case"keydown":case"keyup":Nt=sc;break;case"focusin":Ne="focus",Nt=dl;break;case"focusout":Ne="blur",Nt=dl;break;case"beforeblur":case"afterblur":Nt=dl;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=yh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=N;break;case ca:case om:case $r:Nt=xh;break;case Qf:Nt=Z;break;case"scroll":case"scrollend":Nt=hl;break;case"wheel":Nt=At;break;case"copy":case"cut":case"paste":Nt=ec;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=Dr;break;case"toggle":case"beforetoggle":Nt=an}var We=(o&4)!==0,di=!We&&(a==="scroll"||a==="scrollend"),pt=We?Rt!==null?Rt+"Capture":null:Rt;We=[];for(var rt=bt,Et;rt!==null;){var Gt=rt;if(Et=Gt.stateNode,Gt=Gt.tag,Gt!==5&&Gt!==26&&Gt!==27||Et===null||pt===null||(Gt=Oa(rt,pt),Gt!=null&&We.push(ig(rt,Gt,Et))),di)break;rt=rt.return}0<We.length&&(Rt=new Nt(Rt,Ne,null,h,zt),jt.push({event:Rt,listeners:We}))}}if((o&7)===0){t:{if(Rt=a==="mouseover"||a==="pointerover",Nt=a==="mouseout"||a==="pointerout",Rt&&h!==su&&(Ne=h.relatedTarget||h.fromElement)&&(lt(Ne)||Ne[aa]))break t;if((Nt||Rt)&&(Rt=zt.window===zt?zt:(Rt=zt.ownerDocument)?Rt.defaultView||Rt.parentWindow:window,Nt?(Ne=h.relatedTarget||h.toElement,Nt=bt,Ne=Ne?lt(Ne):null,Ne!==null&&(di=r(Ne),We=Ne.tag,Ne!==di||We!==5&&We!==27&&We!==6)&&(Ne=null)):(Nt=null,Ne=bt),Nt!==Ne)){if(We=yh,Gt="onMouseLeave",pt="onMouseEnter",rt="mouse",(a==="pointerout"||a==="pointerover")&&(We=Dr,Gt="onPointerLeave",pt="onPointerEnter",rt="pointer"),di=Nt==null?Rt:Tt(Nt),Et=Ne==null?Rt:Tt(Ne),Rt=new We(Gt,rt+"leave",Nt,h,zt),Rt.target=di,Rt.relatedTarget=Et,Gt=null,lt(zt)===bt&&(We=new We(pt,rt+"enter",Ne,h,zt),We.target=Et,We.relatedTarget=di,Gt=We),di=Gt,Nt&&Ne)e:{for(We=oN,pt=Nt,rt=Ne,Et=0,Gt=pt;Gt;Gt=We(Gt))Et++;Gt=0;for(var He=rt;He;He=We(He))Gt++;for(;0<Et-Gt;)pt=We(pt),Et--;for(;0<Gt-Et;)rt=We(rt),Gt--;for(;Et--;){if(pt===rt||rt!==null&&pt===rt.alternate){We=pt;break e}pt=We(pt),rt=We(rt)}We=null}else We=null;Nt!==null&&O1(jt,Rt,Nt,We,!1),Ne!==null&&di!==null&&O1(jt,di,Ne,We,!0)}}t:{if(Rt=bt?Tt(bt):window,Nt=Rt.nodeName&&Rt.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&Rt.type==="file")var $n=im;else if(em(Rt))if(Ah)$n=H_;else{$n=ml;var Le=Rh}else Nt=Rt.nodeName,!Nt||Nt.toLowerCase()!=="input"||Rt.type!=="checkbox"&&Rt.type!=="radio"?bt&&ll(bt.elementType)&&($n=im):$n=F_;if($n&&($n=$n(a,bt))){Xf(jt,$n,h,zt);break t}Le&&Le(a,Rt,bt),a==="focusout"&&bt&&Rt.type==="number"&&bt.memoizedProps.value!=null&&Ci(Rt,"number",Rt.value)}switch(Le=bt?Tt(bt):window,a){case"focusin":(em(Le)||Le.contentEditable==="true")&&(cc=Le,Wf=bt,hc=null);break;case"focusout":hc=Wf=cc=null;break;case"mousedown":za=!0;break;case"contextmenu":case"mouseup":case"dragend":za=!1,Kf(jt,h,zt);break;case"selectionchange":if(G_)break;case"keydown":case"keyup":Kf(jt,h,zt)}var xn;if(wn)t:{switch(a){case"compositionstart":var On="onCompositionStart";break t;case"compositionend":On="onCompositionEnd";break t;case"compositionupdate":On="onCompositionUpdate";break t}On=void 0}else pl?Co(a,h)&&(On="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(On="onCompositionStart");On&&(mi&&h.locale!=="ko"&&(pl||On!=="onCompositionStart"?On==="onCompositionEnd"&&pl&&(xn=ru()):(jr=zt,$u="value"in jr?jr.value:jr.textContent,pl=!0)),Le=wy(bt,On),0<Le.length&&(On=new Cr(On,a,null,h,zt),jt.push({event:On,listeners:Le}),xn?On.data=xn:(xn=Jr(h),xn!==null&&(On.data=xn)))),(xn=rs?qf(a,h):z_(a,h))&&(On=wy(bt,"onBeforeInput"),0<On.length&&(Le=new Cr("onBeforeInput","beforeinput",null,h,zt),jt.push({event:Le,listeners:On}),Le.data=xn)),iN(jt,a,bt,h,zt)}I1(jt,o)})}function ig(a,o,h){return{instance:a,listener:o,currentTarget:h}}function wy(a,o){for(var h=o+"Capture",p=[];a!==null;){var x=a,b=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||b===null||(x=Oa(a,h),x!=null&&p.unshift(ig(a,x,b)),x=Oa(a,o),x!=null&&p.push(ig(a,x,b))),a.tag===3)return p;a=a.return}return[]}function oN(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function O1(a,o,h,p,x){for(var b=o._reactName,B=[];h!==null&&h!==p;){var W=h,at=W.alternate,bt=W.stateNode;if(W=W.tag,at!==null&&at===p)break;W!==5&&W!==26&&W!==27||bt===null||(at=bt,x?(bt=Oa(h,b),bt!=null&&B.unshift(ig(h,bt,at))):x||(bt=Oa(h,b),bt!=null&&B.push(ig(h,bt,at)))),h=h.return}B.length!==0&&a.push({event:o,listeners:B})}var lN=/\r\n?/g,uN=/\u0000|\uFFFD/g;function L1(a){return(typeof a=="string"?a:""+a).replace(lN,`
`).replace(uN,"")}function P1(a,o){return o=L1(o),L1(a)===o}function fi(a,o,h,p,x,b){switch(h){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||qs(a,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&qs(a,""+p);break;case"className":mn(a,"class",p);break;case"tabIndex":mn(a,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":mn(a,h,p);break;case"style":Ju(a,p,b);break;case"data":if(o!=="object"){mn(a,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||h!=="href")){a.removeAttribute(h);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(h);break}p=iu(""+p),a.setAttribute(h,p);break;case"action":case"formAction":if(typeof p=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(h==="formAction"?(o!=="input"&&fi(a,o,"name",x.name,x,null),fi(a,o,"formEncType",x.formEncType,x,null),fi(a,o,"formMethod",x.formMethod,x,null),fi(a,o,"formTarget",x.formTarget,x,null)):(fi(a,o,"encType",x.encType,x,null),fi(a,o,"method",x.method,x,null),fi(a,o,"target",x.target,x,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(h);break}p=iu(""+p),a.setAttribute(h,p);break;case"onClick":p!=null&&(a.onclick=sr);break;case"onScroll":p!=null&&Dn("scroll",a);break;case"onScrollEnd":p!=null&&Dn("scrollend",a);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(h=p.__html,h!=null){if(x.children!=null)throw Error(n(60));a.innerHTML=h}}break;case"multiple":a.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":a.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){a.removeAttribute("xlink:href");break}h=iu(""+p),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(h,""+p):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":p===!0?a.setAttribute(h,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(h,p):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?a.setAttribute(h,p):a.removeAttribute(h);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?a.removeAttribute(h):a.setAttribute(h,p);break;case"popover":Dn("beforetoggle",a),Dn("toggle",a),Kn(a,"popover",p);break;case"xlinkActuate":je(a,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":je(a,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":je(a,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":je(a,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":je(a,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":je(a,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":je(a,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":je(a,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":je(a,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Kn(a,"is",p);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=_h.get(h)||h,Kn(a,h,p))}}function vx(a,o,h,p,x,b){switch(h){case"style":Ju(a,p,b);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(h=p.__html,h!=null){if(x.children!=null)throw Error(n(60));a.innerHTML=h}}break;case"children":typeof p=="string"?qs(a,p):(typeof p=="number"||typeof p=="bigint")&&qs(a,""+p);break;case"onScroll":p!=null&&Dn("scroll",a);break;case"onScrollEnd":p!=null&&Dn("scrollend",a);break;case"onClick":p!=null&&(a.onclick=sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xe.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),o=h.slice(2,x?h.length-7:void 0),b=a[xi]||null,b=b!=null?b[h]:null,typeof b=="function"&&a.removeEventListener(o,b,x),typeof p=="function")){typeof b!="function"&&b!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(o,p,x);break t}h in a?a[h]=p:p===!0?a.setAttribute(h,""):Kn(a,h,p)}}}function Js(a,o,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dn("error",a),Dn("load",a);var p=!1,x=!1,b;for(b in h)if(h.hasOwnProperty(b)){var B=h[b];if(B!=null)switch(b){case"src":p=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:fi(a,o,b,B,h,null)}}x&&fi(a,o,"srcSet",h.srcSet,h,null),p&&fi(a,o,"src",h.src,h,null);return;case"input":Dn("invalid",a);var W=b=B=x=null,at=null,bt=null;for(p in h)if(h.hasOwnProperty(p)){var zt=h[p];if(zt!=null)switch(p){case"name":x=zt;break;case"type":B=zt;break;case"checked":at=zt;break;case"defaultChecked":bt=zt;break;case"value":b=zt;break;case"defaultValue":W=zt;break;case"children":case"dangerouslySetInnerHTML":if(zt!=null)throw Error(n(137,o));break;default:fi(a,o,p,zt,h,null)}}as(a,b,W,at,bt,B,x,!1);return;case"select":Dn("invalid",a),p=B=b=null;for(x in h)if(h.hasOwnProperty(x)&&(W=h[x],W!=null))switch(x){case"value":b=W;break;case"defaultValue":B=W;break;case"multiple":p=W;default:fi(a,o,x,W,h,null)}o=b,h=B,a.multiple=!!p,o!=null?Ei(a,!!p,o,!1):h!=null&&Ei(a,!!p,h,!0);return;case"textarea":Dn("invalid",a),b=x=p=null;for(B in h)if(h.hasOwnProperty(B)&&(W=h[B],W!=null))switch(B){case"value":p=W;break;case"defaultValue":x=W;break;case"children":b=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(91));break;default:fi(a,o,B,W,h,null)}Pi(a,p,x,b);return;case"option":for(at in h)if(h.hasOwnProperty(at)&&(p=h[at],p!=null))switch(at){case"selected":a.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:fi(a,o,at,p,h,null)}return;case"dialog":Dn("beforetoggle",a),Dn("toggle",a),Dn("cancel",a),Dn("close",a);break;case"iframe":case"object":Dn("load",a);break;case"video":case"audio":for(p=0;p<ng.length;p++)Dn(ng[p],a);break;case"image":Dn("error",a),Dn("load",a);break;case"details":Dn("toggle",a);break;case"embed":case"source":case"link":Dn("error",a),Dn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(bt in h)if(h.hasOwnProperty(bt)&&(p=h[bt],p!=null))switch(bt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:fi(a,o,bt,p,h,null)}return;default:if(ll(o)){for(zt in h)h.hasOwnProperty(zt)&&(p=h[zt],p!==void 0&&vx(a,o,zt,p,h,void 0));return}}for(W in h)h.hasOwnProperty(W)&&(p=h[W],p!=null&&fi(a,o,W,p,h,null))}function cN(a,o,h,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,b=null,B=null,W=null,at=null,bt=null,zt=null;for(Nt in h){var jt=h[Nt];if(h.hasOwnProperty(Nt)&&jt!=null)switch(Nt){case"checked":break;case"value":break;case"defaultValue":at=jt;default:p.hasOwnProperty(Nt)||fi(a,o,Nt,null,p,jt)}}for(var Rt in p){var Nt=p[Rt];if(jt=h[Rt],p.hasOwnProperty(Rt)&&(Nt!=null||jt!=null))switch(Rt){case"type":b=Nt;break;case"name":x=Nt;break;case"checked":bt=Nt;break;case"defaultChecked":zt=Nt;break;case"value":B=Nt;break;case"defaultValue":W=Nt;break;case"children":case"dangerouslySetInnerHTML":if(Nt!=null)throw Error(n(137,o));break;default:Nt!==jt&&fi(a,o,Rt,Nt,p,jt)}}Xi(a,B,W,at,bt,zt,b,x);return;case"select":Nt=B=W=Rt=null;for(b in h)if(at=h[b],h.hasOwnProperty(b)&&at!=null)switch(b){case"value":break;case"multiple":Nt=at;default:p.hasOwnProperty(b)||fi(a,o,b,null,p,at)}for(x in p)if(b=p[x],at=h[x],p.hasOwnProperty(x)&&(b!=null||at!=null))switch(x){case"value":Rt=b;break;case"defaultValue":W=b;break;case"multiple":B=b;default:b!==at&&fi(a,o,x,b,p,at)}o=W,h=B,p=Nt,Rt!=null?Ei(a,!!h,Rt,!1):!!p!=!!h&&(o!=null?Ei(a,!!h,o,!0):Ei(a,!!h,h?[]:"",!1));return;case"textarea":Nt=Rt=null;for(W in h)if(x=h[W],h.hasOwnProperty(W)&&x!=null&&!p.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:fi(a,o,W,null,p,x)}for(B in p)if(x=p[B],b=h[B],p.hasOwnProperty(B)&&(x!=null||b!=null))switch(B){case"value":Rt=x;break;case"defaultValue":Nt=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:x!==b&&fi(a,o,B,x,p,b)}bo(a,Rt,Nt);return;case"option":for(var Ne in h)if(Rt=h[Ne],h.hasOwnProperty(Ne)&&Rt!=null&&!p.hasOwnProperty(Ne))switch(Ne){case"selected":a.selected=!1;break;default:fi(a,o,Ne,null,p,Rt)}for(at in p)if(Rt=p[at],Nt=h[at],p.hasOwnProperty(at)&&Rt!==Nt&&(Rt!=null||Nt!=null))switch(at){case"selected":a.selected=Rt&&typeof Rt!="function"&&typeof Rt!="symbol";break;default:fi(a,o,at,Rt,p,Nt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var We in h)Rt=h[We],h.hasOwnProperty(We)&&Rt!=null&&!p.hasOwnProperty(We)&&fi(a,o,We,null,p,Rt);for(bt in p)if(Rt=p[bt],Nt=h[bt],p.hasOwnProperty(bt)&&Rt!==Nt&&(Rt!=null||Nt!=null))switch(bt){case"children":case"dangerouslySetInnerHTML":if(Rt!=null)throw Error(n(137,o));break;default:fi(a,o,bt,Rt,p,Nt)}return;default:if(ll(o)){for(var di in h)Rt=h[di],h.hasOwnProperty(di)&&Rt!==void 0&&!p.hasOwnProperty(di)&&vx(a,o,di,void 0,p,Rt);for(zt in p)Rt=p[zt],Nt=h[zt],!p.hasOwnProperty(zt)||Rt===Nt||Rt===void 0&&Nt===void 0||vx(a,o,zt,Rt,p,Nt);return}}for(var pt in h)Rt=h[pt],h.hasOwnProperty(pt)&&Rt!=null&&!p.hasOwnProperty(pt)&&fi(a,o,pt,null,p,Rt);for(jt in p)Rt=p[jt],Nt=h[jt],!p.hasOwnProperty(jt)||Rt===Nt||Rt==null&&Nt==null||fi(a,o,jt,Rt,p,Nt)}function z1(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hN(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,h=performance.getEntriesByType("resource"),p=0;p<h.length;p++){var x=h[p],b=x.transferSize,B=x.initiatorType,W=x.duration;if(b&&W&&z1(B)){for(B=0,W=x.responseEnd,p+=1;p<h.length;p++){var at=h[p],bt=at.startTime;if(bt>W)break;var zt=at.transferSize,jt=at.initiatorType;zt&&z1(jt)&&(at=at.responseEnd,B+=zt*(at<W?1:(W-bt)/(at-bt)))}if(--p,o+=8*(b+B)/(x.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Sx=null,xx=null;function Cy(a){return a.nodeType===9?a:a.ownerDocument}function V1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B1(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Ex(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Tx=null;function fN(){var a=window.event;return a&&a.type==="popstate"?a===Tx?!1:(Tx=a,!0):(Tx=null,!1)}var F1=typeof setTimeout=="function"?setTimeout:void 0,dN=typeof clearTimeout=="function"?clearTimeout:void 0,H1=typeof Promise=="function"?Promise:void 0,pN=typeof queueMicrotask=="function"?queueMicrotask:typeof H1<"u"?function(a){return H1.resolve(null).then(a).catch(mN)}:F1;function mN(a){setTimeout(function(){throw a})}function Lc(a){return a==="head"}function G1(a,o){var h=o,p=0;do{var x=h.nextSibling;if(a.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"||h==="/&"){if(p===0){a.removeChild(x),Vd(o);return}p--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")p++;else if(h==="html")sg(a.ownerDocument.documentElement);else if(h==="head"){h=a.ownerDocument.head,sg(h);for(var b=h.firstChild;b;){var B=b.nextSibling,W=b.nodeName;b[ra]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&b.rel.toLowerCase()==="stylesheet"||h.removeChild(b),b=B}}else h==="body"&&sg(a.ownerDocument.body);h=x}while(h);Vd(o)}function k1(a,o){var h=a;a=0;do{var p=h.nextSibling;if(h.nodeType===1?o?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(o?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),p&&p.nodeType===8)if(h=p.data,h==="/$"){if(a===0)break;a--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||a++;h=p}while(h)}function bx(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var h=o;switch(o=o.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":bx(h),K(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function gN(a,o,h,p){for(;a.nodeType===1;){var x=h;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(p){if(!a[ra])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==x.rel||a.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||a.getAttribute("title")!==(x.title==null?null:x.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(x.src==null?null:x.src)||a.getAttribute("type")!==(x.type==null?null:x.type)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=x.name==null?null:""+x.name;if(x.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=mo(a.nextSibling),a===null)break}return null}function _N(a,o,h){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=mo(a.nextSibling),a===null))return null;return a}function q1(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=mo(a.nextSibling),a===null))return null;return a}function Mx(a){return a.data==="$?"||a.data==="$~"}function Ax(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function yN(a,o){var h=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||h.readyState!=="loading")o();else{var p=function(){o(),h.removeEventListener("DOMContentLoaded",p)};h.addEventListener("DOMContentLoaded",p),a._reactRetry=p}}function mo(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var Rx=null;function X1(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"||h==="/&"){if(o===0)return mo(a.nextSibling);o--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||o++}a=a.nextSibling}return null}function j1(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(o===0)return a;o--}else h!=="/$"&&h!=="/&"||o++}a=a.previousSibling}return null}function Y1(a,o,h){switch(o=Cy(h),a){case"html":if(a=o.documentElement,!a)throw Error(n(452));return a;case"head":if(a=o.head,!a)throw Error(n(453));return a;case"body":if(a=o.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function sg(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);K(a)}var go=new Map,W1=new Set;function Dy(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Du=et.d;et.d={f:vN,r:SN,D:xN,C:EN,L:TN,m:bN,X:AN,S:MN,M:RN};function vN(){var a=Du.f(),o=Q();return a||o}function SN(a){var o=yt(a);o!==null&&o.tag===5&&o.type==="form"?Ym(o):Du.r(a)}var Ld=typeof document>"u"?null:document;function K1(a,o,h){var p=Ld;if(p&&typeof o=="string"&&o){var x=vn(o);x='link[rel="'+a+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),W1.has(x)||(W1.add(x),a={rel:a,crossOrigin:h,href:o},p.querySelector(x)===null&&(o=p.createElement("link"),Js(o,"link",a),Xt(o),p.head.appendChild(o)))}}function xN(a){Du.D(a),K1("dns-prefetch",a,null)}function EN(a,o){Du.C(a,o),K1("preconnect",a,o)}function TN(a,o,h){Du.L(a,o,h);var p=Ld;if(p&&a&&o){var x='link[rel="preload"][as="'+vn(o)+'"]';o==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+vn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+vn(h.imageSizes)+'"]')):x+='[href="'+vn(a)+'"]';var b=x;switch(o){case"style":b=Pd(a);break;case"script":b=zd(a)}go.has(b)||(a=y({rel:"preload",href:o==="image"&&h&&h.imageSrcSet?void 0:a,as:o},h),go.set(b,a),p.querySelector(x)!==null||o==="style"&&p.querySelector(ag(b))||o==="script"&&p.querySelector(rg(b))||(o=p.createElement("link"),Js(o,"link",a),Xt(o),p.head.appendChild(o)))}}function bN(a,o){Du.m(a,o);var h=Ld;if(h&&a){var p=o&&typeof o.as=="string"?o.as:"script",x='link[rel="modulepreload"][as="'+vn(p)+'"][href="'+vn(a)+'"]',b=x;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=zd(a)}if(!go.has(b)&&(a=y({rel:"modulepreload",href:a},o),go.set(b,a),h.querySelector(x)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(rg(b)))return}p=h.createElement("link"),Js(p,"link",a),Xt(p),h.head.appendChild(p)}}}function MN(a,o,h){Du.S(a,o,h);var p=Ld;if(p&&a){var x=ct(p).hoistableStyles,b=Pd(a);o=o||"default";var B=x.get(b);if(!B){var W={loading:0,preload:null};if(B=p.querySelector(ag(b)))W.loading=5;else{a=y({rel:"stylesheet",href:a,"data-precedence":o},h),(h=go.get(b))&&wx(a,h);var at=B=p.createElement("link");Xt(at),Js(at,"link",a),at._p=new Promise(function(bt,zt){at.onload=bt,at.onerror=zt}),at.addEventListener("load",function(){W.loading|=1}),at.addEventListener("error",function(){W.loading|=2}),W.loading|=4,Ny(B,o,p)}B={type:"stylesheet",instance:B,count:1,state:W},x.set(b,B)}}}function AN(a,o){Du.X(a,o);var h=Ld;if(h&&a){var p=ct(h).hoistableScripts,x=zd(a),b=p.get(x);b||(b=h.querySelector(rg(x)),b||(a=y({src:a,async:!0},o),(o=go.get(x))&&Cx(a,o),b=h.createElement("script"),Xt(b),Js(b,"link",a),h.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(x,b))}}function RN(a,o){Du.M(a,o);var h=Ld;if(h&&a){var p=ct(h).hoistableScripts,x=zd(a),b=p.get(x);b||(b=h.querySelector(rg(x)),b||(a=y({src:a,async:!0,type:"module"},o),(o=go.get(x))&&Cx(a,o),b=h.createElement("script"),Xt(b),Js(b,"link",a),h.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(x,b))}}function Q1(a,o,h,p){var x=(x=xt.current)?Dy(x):null;if(!x)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(o=Pd(h.href),h=ct(x).hoistableStyles,p=h.get(o),p||(p={type:"style",instance:null,count:0,state:null},h.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=Pd(h.href);var b=ct(x).hoistableStyles,B=b.get(a);if(B||(x=x.ownerDocument||x,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,B),(b=x.querySelector(ag(a)))&&!b._p&&(B.instance=b,B.state.loading=5),go.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},go.set(a,h),b||wN(x,a,h,B.state))),o&&p===null)throw Error(n(528,""));return B}if(o&&p!==null)throw Error(n(529,""));return null;case"script":return o=h.async,h=h.src,typeof h=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=zd(h),h=ct(x).hoistableScripts,p=h.get(o),p||(p={type:"script",instance:null,count:0,state:null},h.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Pd(a){return'href="'+vn(a)+'"'}function ag(a){return'link[rel="stylesheet"]['+a+"]"}function Z1(a){return y({},a,{"data-precedence":a.precedence,precedence:null})}function wN(a,o,h,p){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=a.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),Js(o,"link",h),Xt(o),a.head.appendChild(o))}function zd(a){return'[src="'+vn(a)+'"]'}function rg(a){return"script[async]"+a}function J1(a,o,h){if(o.count++,o.instance===null)switch(o.type){case"style":var p=a.querySelector('style[data-href~="'+vn(h.href)+'"]');if(p)return o.instance=p,Xt(p),p;var x=y({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return p=(a.ownerDocument||a).createElement("style"),Xt(p),Js(p,"style",x),Ny(p,h.precedence,a),o.instance=p;case"stylesheet":x=Pd(h.href);var b=a.querySelector(ag(x));if(b)return o.state.loading|=4,o.instance=b,Xt(b),b;p=Z1(h),(x=go.get(x))&&wx(p,x),b=(a.ownerDocument||a).createElement("link"),Xt(b);var B=b;return B._p=new Promise(function(W,at){B.onload=W,B.onerror=at}),Js(b,"link",p),o.state.loading|=4,Ny(b,h.precedence,a),o.instance=b;case"script":return b=zd(h.src),(x=a.querySelector(rg(b)))?(o.instance=x,Xt(x),x):(p=h,(x=go.get(b))&&(p=y({},h),Cx(p,x)),a=a.ownerDocument||a,x=a.createElement("script"),Xt(x),Js(x,"link",p),a.head.appendChild(x),o.instance=x);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,Ny(p,h.precedence,a));return o.instance}function Ny(a,o,h){for(var p=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=p.length?p[p.length-1]:null,b=x,B=0;B<p.length;B++){var W=p[B];if(W.dataset.precedence===o)b=W;else if(b!==x)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=h.nodeType===9?h.head:h,o.insertBefore(a,o.firstChild))}function wx(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Cx(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Iy=null;function $1(a,o,h){if(Iy===null){var p=new Map,x=Iy=new Map;x.set(h,p)}else x=Iy,p=x.get(h),p||(p=new Map,x.set(h,p));if(p.has(a))return p;for(p.set(a,null),h=h.getElementsByTagName(a),x=0;x<h.length;x++){var b=h[x];if(!(b[ra]||b[on]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var B=b.getAttribute(o)||"";B=a+B;var W=p.get(B);W?W.push(b):p.set(B,[b])}}return p}function tM(a,o,h){a=a.ownerDocument||a,a.head.insertBefore(h,o==="title"?a.querySelector("head > title"):null)}function CN(a,o,h){if(h===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function eM(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function DN(a,o,h,p){if(h.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var x=Pd(p.href),b=o.querySelector(ag(x));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=Uy.bind(a),o.then(a,a)),h.state.loading|=4,h.instance=b,Xt(b);return}b=o.ownerDocument||o,p=Z1(p),(x=go.get(x))&&wx(p,x),b=b.createElement("link"),Xt(b);var B=b;B._p=new Promise(function(W,at){B.onload=W,B.onerror=at}),Js(b,"link",p),h.instance=b}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(h,o),(o=h.state.preload)&&(h.state.loading&3)===0&&(a.count++,h=Uy.bind(a),o.addEventListener("load",h),o.addEventListener("error",h))}}var Dx=0;function NN(a,o){return a.stylesheets&&a.count===0&&Ly(a,a.stylesheets),0<a.count||0<a.imgCount?function(h){var p=setTimeout(function(){if(a.stylesheets&&Ly(a,a.stylesheets),a.unsuspend){var b=a.unsuspend;a.unsuspend=null,b()}},6e4+o);0<a.imgBytes&&Dx===0&&(Dx=62500*hN());var x=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Ly(a,a.stylesheets),a.unsuspend)){var b=a.unsuspend;a.unsuspend=null,b()}},(a.imgBytes>Dx?50:800)+o);return a.unsuspend=h,function(){a.unsuspend=null,clearTimeout(p),clearTimeout(x)}}:null}function Uy(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ly(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Oy=null;function Ly(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Oy=new Map,o.forEach(IN,a),Oy=null,Uy.call(a))}function IN(a,o){if(!(o.state.loading&4)){var h=Oy.get(a);if(h)var p=h.get(null);else{h=new Map,Oy.set(a,h);for(var x=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<x.length;b++){var B=x[b];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(h.set(B.dataset.precedence,B),p=B)}p&&h.set(null,p)}x=o.instance,B=x.getAttribute("data-precedence"),b=h.get(B)||p,b===p&&h.set(null,x),h.set(B,x),this.count++,p=Uy.bind(this),x.addEventListener("load",p),x.addEventListener("error",p),b?b.parentNode.insertBefore(x,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(x,a.firstChild)),o.state.loading|=4}}var og={$$typeof:z,Provider:null,Consumer:null,_currentValue:nt,_currentValue2:nt,_threadCount:0};function UN(a,o,h,p,x,b,B,W,at){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nn(0),this.hiddenUpdates=nn(null),this.identifierPrefix=p,this.onUncaughtError=x,this.onCaughtError=b,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=at,this.incompleteTransitions=new Map}function nM(a,o,h,p,x,b,B,W,at,bt,zt,jt){return a=new UN(a,o,h,B,at,bt,zt,jt,W),o=1,b===!0&&(o|=24),b=js(3,null,null,o),a.current=b,b.stateNode=a,o=mm(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:p,isDehydrated:h,cache:o},xm(b),a}function iM(a){return a?(a=El,a):El}function sM(a,o,h,p,x,b){x=iM(x),p.context===null?p.context=x:p.pendingContext=x,p=ao(o),p.payload={element:h},b=b===void 0?null:b,b!==null&&(p.callback=b),h=Vo(a,p,o),h!==null&&(c(h,a,o),Dl(h,a,o))}function aM(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<o?h:o}}function Nx(a,o){aM(a,o),(a=a.alternate)&&aM(a,o)}function rM(a){if(a.tag===13||a.tag===31){var o=xl(a,67108864);o!==null&&c(o,a,67108864),Nx(a,67108864)}}function oM(a){if(a.tag===13||a.tag===31){var o=Zs();o=_s(o);var h=xl(a,o);h!==null&&c(h,a,o),Nx(a,o)}}var Py=!0;function ON(a,o,h,p){var x=k.T;k.T=null;var b=et.p;try{et.p=2,Ix(a,o,h,p)}finally{et.p=b,k.T=x}}function LN(a,o,h,p){var x=k.T;k.T=null;var b=et.p;try{et.p=8,Ix(a,o,h,p)}finally{et.p=b,k.T=x}}function Ix(a,o,h,p){if(Py){var x=Ux(p);if(x===null)yx(a,o,p,zy,h),uM(a,p);else if(zN(x,a,o,h,p))p.stopPropagation();else if(uM(a,p),o&4&&-1<PN.indexOf(a)){for(;x!==null;){var b=yt(x);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var B=$t(b.pendingLanes);if(B!==0){var W=b;for(W.pendingLanes|=2,W.entangledLanes|=2;B;){var at=1<<31-pe(B);W.entanglements[1]|=at,B&=~at}Bl(b),(In&6)===0&&(Za=X()+500,eg(0))}}break;case 31:case 13:W=xl(b,2),W!==null&&c(W,b,2),Q(),Nx(b,2)}if(b=Ux(p),b===null&&yx(a,o,p,zy,h),b===x)break;x=b}x!==null&&p.stopPropagation()}else yx(a,o,p,null,h)}}function Ux(a){return a=Ua(a),Ox(a)}var zy=null;function Ox(a){if(zy=null,a=lt(a),a!==null){var o=r(a);if(o===null)a=null;else{var h=o.tag;if(h===13){if(a=u(o),a!==null)return a;a=null}else if(h===31){if(a=f(o),a!==null)return a;a=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return zy=a,null}function lM(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_t()){case Dt:return 2;case Qt:return 8;case Ut:case De:return 32;case oe:return 268435456;default:return 32}default:return 32}}var Lx=!1,Pc=null,zc=null,Vc=null,lg=new Map,ug=new Map,Bc=[],PN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uM(a,o){switch(a){case"focusin":case"focusout":Pc=null;break;case"dragenter":case"dragleave":zc=null;break;case"mouseover":case"mouseout":Vc=null;break;case"pointerover":case"pointerout":lg.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ug.delete(o.pointerId)}}function cg(a,o,h,p,x,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:h,eventSystemFlags:p,nativeEvent:b,targetContainers:[x]},o!==null&&(o=yt(o),o!==null&&rM(o)),a):(a.eventSystemFlags|=p,o=a.targetContainers,x!==null&&o.indexOf(x)===-1&&o.push(x),a)}function zN(a,o,h,p,x){switch(o){case"focusin":return Pc=cg(Pc,a,o,h,p,x),!0;case"dragenter":return zc=cg(zc,a,o,h,p,x),!0;case"mouseover":return Vc=cg(Vc,a,o,h,p,x),!0;case"pointerover":var b=x.pointerId;return lg.set(b,cg(lg.get(b)||null,a,o,h,p,x)),!0;case"gotpointercapture":return b=x.pointerId,ug.set(b,cg(ug.get(b)||null,a,o,h,p,x)),!0}return!1}function cM(a){var o=lt(a.target);if(o!==null){var h=r(o);if(h!==null){if(o=h.tag,o===13){if(o=u(h),o!==null){a.blockedOn=o,wi(a.priority,function(){oM(h)});return}}else if(o===31){if(o=f(h),o!==null){a.blockedOn=o,wi(a.priority,function(){oM(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Vy(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var h=Ux(a.nativeEvent);if(h===null){h=a.nativeEvent;var p=new h.constructor(h.type,h);su=p,h.target.dispatchEvent(p),su=null}else return o=yt(h),o!==null&&rM(o),a.blockedOn=h,!1;o.shift()}return!0}function hM(a,o,h){Vy(a)&&h.delete(o)}function VN(){Lx=!1,Pc!==null&&Vy(Pc)&&(Pc=null),zc!==null&&Vy(zc)&&(zc=null),Vc!==null&&Vy(Vc)&&(Vc=null),lg.forEach(hM),ug.forEach(hM)}function By(a,o){a.blockedOn===o&&(a.blockedOn=null,Lx||(Lx=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,VN)))}var Fy=null;function fM(a){Fy!==a&&(Fy=a,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Fy===a&&(Fy=null);for(var o=0;o<a.length;o+=3){var h=a[o],p=a[o+1],x=a[o+2];if(typeof p!="function"){if(Ox(p||h)===null)continue;break}var b=yt(h);b!==null&&(a.splice(o,3),o-=3,jm(b,{pending:!0,data:x,method:h.method,action:p},p,x))}}))}function Vd(a){function o(at){return By(at,a)}Pc!==null&&By(Pc,a),zc!==null&&By(zc,a),Vc!==null&&By(Vc,a),lg.forEach(o),ug.forEach(o);for(var h=0;h<Bc.length;h++){var p=Bc[h];p.blockedOn===a&&(p.blockedOn=null)}for(;0<Bc.length&&(h=Bc[0],h.blockedOn===null);)cM(h),h.blockedOn===null&&Bc.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(p=0;p<h.length;p+=3){var x=h[p],b=h[p+1],B=x[xi]||null;if(typeof b=="function")B||fM(h);else if(B){var W=null;if(b&&b.hasAttribute("formAction")){if(x=b,B=b[xi]||null)W=B.formAction;else if(Ox(x)!==null)continue}else W=B.action;typeof W=="function"?h[p+1]=W:(h.splice(p,3),p-=3),fM(h)}}}function dM(){function a(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(B){return x=B})},focusReset:"manual",scroll:"manual"})}function o(){x!==null&&(x(),x=null),p||setTimeout(h,20)}function h(){if(!p&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,x=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(h,100),function(){p=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),x!==null&&(x(),x=null)}}}function Px(a){this._internalRoot=a}Hy.prototype.render=Px.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(n(409));var h=o.current,p=Zs();sM(h,p,a,o,null,null)},Hy.prototype.unmount=Px.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;sM(a.current,2,null,a,null,null),Q(),o[aa]=null}};function Hy(a){this._internalRoot=a}Hy.prototype.unstable_scheduleHydration=function(a){if(a){var o=ws();a={blockedOn:null,target:a,priority:o};for(var h=0;h<Bc.length&&o!==0&&o<Bc[h].priority;h++);Bc.splice(h,0,a),h===0&&cM(a)}};var pM=t.version;if(pM!=="19.2.0")throw Error(n(527,pM,"19.2.0"));et.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=m(o),a=a!==null?_(a):null,a=a===null?null:a.stateNode,a};var BN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gy.isDisabled&&Gy.supportsFiber)try{Yt=Gy.inject(BN),ie=Gy}catch{}}return fg.createRoot=function(a,o){if(!s(a))throw Error(n(299));var h=!1,p="",x=Qm,b=Sy,B=xd;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(B=o.onRecoverableError)),o=nM(a,1,!1,null,null,h,p,null,x,b,B,dM),a[aa]=o.current,_x(a),new Px(o)},fg.hydrateRoot=function(a,o,h){if(!s(a))throw Error(n(299));var p=!1,x="",b=Qm,B=Sy,W=xd,at=null;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(b=h.onUncaughtError),h.onCaughtError!==void 0&&(B=h.onCaughtError),h.onRecoverableError!==void 0&&(W=h.onRecoverableError),h.formState!==void 0&&(at=h.formState)),o=nM(a,1,!0,o,h??null,p,x,at,b,B,W,dM),o.context=iM(null),h=o.current,p=Zs(),p=_s(p),x=ao(p),x.callback=null,Vo(h,x,p),h=p,o.current.lanes=h,ss(o,h),Bl(o),a[aa]=o.current,_x(a),new Hy(o)},fg.version="19.2.0",fg}var bM;function QN(){if(bM)return Bx.exports;bM=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Bx.exports=KN(),Bx.exports}var ZN=QN();const JN="/assets/Logo-SL-white-nobg-BjJ9TJUJ.png",Bd=[{name:"Home",path:"/"},{name:"Nos Prestations",path:"#nosprestations"},{name:"Contact",path:"#contact"},{name:"Réservation",path:"#réservation"}],$N=[{title:"Cils à Cils",description:"Une extension par cil naturel pour un look subtil et élégant",price:"20€",result:"Des cils allongés, un regard sublimé, tout en finesse"},{title:"Pose Whispy",description:"Des cils de longueurs variées qui apportent volume, intensité et dimension au regard",price:"15€",result:"Un regard harmonieux alliant naturel et intensité"},{title:"Pose Russe",description:"Consiste à appliquer des éventails d’extensions préformés (bouquets) sur chaque cil naturel",price:"20€",result:"Un regard fourni, harmonieux et glamour, avec une tenue longue durée"},{title:"Dépose",description:"La dépose de cils permet de retirer en douceur les extensions sans abîmer les cils naturels, grâce à un dissolvant professionnel adapté",price:"10€",result:"Des cils naturels préservés et prêts pour une nouvelle pose"},{title:"Clusters",description:"La pose de clusters consiste à appliquer des petits bouquets de cils prêts à poser sur la base des cils naturels",price:"8€",result:"Regard intense et fourni, parfait pour une beauté express"}],dg=[{id:"cil-a-cil",name:"Cils à Cils",price:"20€",duration:210,description:"La pose cil à cil consiste à appliquer une extension sur chaque cil naturel pour un regard naturel, élégant et structuré."},{id:"pose-whispy",name:"Pose Whispy ",price:"15€",duration:240,description:'La pose Whispy, aussi appelée effet "foxy eyes" ou "spiky", se caractérise par des pics de longueurs variées.'},{id:"pose-russe",name:"Pose Russe",price:"20€",duration:270,description:"La pose russe en bouquet consiste à appliquer des éventails d'extensions préformés sur chaque cil naturel."},{id:"clusters",name:"Clusters (venir avec la boîte)",price:"8€",duration:120,description:"La pose de clusters consiste à appliquer des petits bouquets de cils prêts à poser."},{id:"depose",name:"Dépose",price:"10€",duration:90,description:"La dépose de cils permet de retirer en douceur les extensions sans abîmer les cils naturels."}];function tI(){const[i,t]=Ae.useState(!1),e=()=>{t(!i)},n=()=>{t(!1)};return ht.jsxs(ht.Fragment,{children:[ht.jsx("nav",{className:"navbar",children:ht.jsxs("div",{className:"navbar-container",children:[ht.jsxs("a",{href:"./",className:"navbar-logo",children:[ht.jsx("img",{src:JN,alt:"Shiynelly Lashes Logo"}),ht.jsx("p",{className:"logo-text",children:"Shiynelly Lashes"})]}),ht.jsxs("div",{className:"navbar-links",children:[Bd.slice(0,3).map((s,r)=>ht.jsx("a",{href:s.path,className:"nav-link",children:s.name},r)),ht.jsx("a",{href:Bd[3].path,className:"nav-button",children:Bd[3].name})]}),ht.jsxs("button",{className:`hamburger ${i?"active":""}`,onClick:e,"aria-label":"Toggle menu",children:[ht.jsx("span",{className:"hamburger-line"}),ht.jsx("span",{className:"hamburger-line"})]})]})}),ht.jsx("div",{className:`sidebar-overlay ${i?"active":""}`,onClick:n}),ht.jsxs("div",{className:`sidebar-menu ${i?"active":""}`,children:[ht.jsxs("div",{className:"sidebar-header",children:[ht.jsx("h2",{children:"Menu"}),ht.jsx("button",{className:"close-button",onClick:n,children:"×"})]}),ht.jsxs("div",{className:"sidebar-links",children:[Bd.slice(0,3).map((s,r)=>ht.jsx("a",{href:s.path,className:"sidebar-link",onClick:n,children:s.name},r)),ht.jsx("a",{href:Bd[3].path,className:"sidebar-button",onClick:n,children:Bd[3].name})]})]})]})}var kx={exports:{}},Nu={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MM;function eI(){return MM||(MM=1,Nu.ConcurrentRoot=1,Nu.ContinuousEventPriority=8,Nu.DefaultEventPriority=32,Nu.DiscreteEventPriority=2,Nu.IdleEventPriority=268435456,Nu.LegacyRoot=0,Nu.NoEventPriority=0),Nu}var AM;function nI(){return AM||(AM=1,kx.exports=eI()),kx.exports}var Gv=nI();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const lS="180",iI={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},sI={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},z2=0,rT=1,V2=2,aI=3,B2=0,uS=1,Ig=2,$o=3,ku=0,nr=1,kl=2,Fu=0,wf=1,oT=2,lT=3,uT=4,F2=5,Kc=100,H2=101,G2=102,k2=103,q2=104,X2=200,j2=201,Y2=202,W2=203,$v=204,t0=205,K2=206,Q2=207,Z2=208,J2=209,$2=210,tw=211,ew=212,nw=213,iw=214,e0=0,n0=1,i0=2,Nf=3,s0=4,a0=5,r0=6,o0=7,v_=0,sw=1,aw=2,jl=0,rw=1,ow=2,lw=3,ZT=4,uw=5,cw=6,hw=7,cT="attached",fw="detached",cS=300,qu=301,sh=302,Yg=303,Wg=304,Gp=306,Kg=1e3,So=1001,Qg=1002,na=1003,JT=1004,rI=1004,pp=1005,oI=1005,bs=1006,Ug=1007,lI=1007,ql=1008,uI=1008,xo=1009,$T=1010,tb=1011,Tp=1012,hS=1013,Xu=1014,xr=1015,kp=1016,fS=1017,dS=1018,bp=1020,eb=35902,nb=35899,ib=1021,sb=1022,Ca=1023,Mp=1026,Ap=1027,pS=1028,S_=1029,ab=1030,mS=1031,cI=1032,gS=1033,Og=33776,Lg=33777,Pg=33778,zg=33779,l0=35840,u0=35841,c0=35842,h0=35843,f0=36196,d0=37492,p0=37496,m0=37808,g0=37809,_0=37810,y0=37811,v0=37812,S0=37813,x0=37814,E0=37815,T0=37816,b0=37817,M0=37818,A0=37819,R0=37820,w0=37821,C0=36492,D0=36494,N0=36495,I0=36283,U0=36284,O0=36285,L0=36286,dw=2200,pw=2201,mw=2202,Zg=2300,P0=2301,kv=2302,bf=2400,Mf=2401,Jg=2402,_S=2500,rb=2501,hI=0,fI=1,dI=2,gw=3200,_w=3201,pI=3202,mI=3203,dh=0,yw=1,Vu="",Ra="srgb",ah="srgb-linear",$g="linear",li="srgb",gI=0,Sf=7680,_I=7681,yI=7682,vI=7683,SI=34055,xI=34056,EI=5386,TI=512,bI=513,MI=514,AI=515,RI=516,wI=517,CI=518,hT=519,vw=512,Sw=513,xw=514,ob=515,Ew=516,Tw=517,bw=518,Mw=519,t_=35044,DI=35048,NI=35040,II=35045,UI=35049,OI=35041,LI=35046,PI=35050,zI=35042,VI="100",fT="300 es",kr=2e3,Rp=2001,BI={COMPUTE:"compute",RENDER:"render"},FI={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},HI={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};class tu{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){const n=this._listeners;if(n===void 0)return;const s=n[t];if(s!==void 0){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const n=e[t.type];if(n!==void 0){t.target=this;const s=n.slice(0);for(let r=0,u=s.length;r<u;r++)s[r].call(this,t);t.target=null}}}const Ea=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let RM=1234567;const Cf=Math.PI/180,wp=180/Math.PI;function qr(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ea[i&255]+Ea[i>>8&255]+Ea[i>>16&255]+Ea[i>>24&255]+"-"+Ea[t&255]+Ea[t>>8&255]+"-"+Ea[t>>16&15|64]+Ea[t>>24&255]+"-"+Ea[e&63|128]+Ea[e>>8&255]+"-"+Ea[e>>16&255]+Ea[e>>24&255]+Ea[n&255]+Ea[n>>8&255]+Ea[n>>16&255]+Ea[n>>24&255]).toLowerCase()}function Je(i,t,e){return Math.max(t,Math.min(e,i))}function lb(i,t){return(i%t+t)%t}function GI(i,t,e,n,s){return n+(i-t)*(s-n)/(e-t)}function kI(i,t,e){return i!==t?(e-i)/(t-i):0}function Vg(i,t,e){return(1-e)*i+e*t}function qI(i,t,e,n){return Vg(i,t,1-Math.exp(-e*n))}function XI(i,t=1){return t-Math.abs(lb(i,t*2)-t)}function jI(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*(3-2*i))}function YI(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*i*(i*(i*6-15)+10))}function WI(i,t){return i+Math.floor(Math.random()*(t-i+1))}function KI(i,t){return i+Math.random()*(t-i)}function QI(i){return i*(.5-Math.random())}function ZI(i){i!==void 0&&(RM=i);let t=RM+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function JI(i){return i*Cf}function $I(i){return i*wp}function tU(i){return(i&i-1)===0&&i!==0}function eU(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function nU(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function iU(i,t,e,n,s){const r=Math.cos,u=Math.sin,f=r(e/2),d=u(e/2),m=r((t+n)/2),_=u((t+n)/2),y=r((t-n)/2),S=u((t-n)/2),T=r((n-t)/2),R=u((n-t)/2);switch(s){case"XYX":i.set(f*_,d*y,d*S,f*m);break;case"YZY":i.set(d*S,f*_,d*y,f*m);break;case"ZXZ":i.set(d*y,d*S,f*_,f*m);break;case"XZX":i.set(f*_,d*R,d*T,f*m);break;case"YXY":i.set(d*T,f*_,d*R,f*m);break;case"ZYZ":i.set(d*R,d*T,f*_,f*m);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function er(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function gn(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const sU={DEG2RAD:Cf,RAD2DEG:wp,generateUUID:qr,clamp:Je,euclideanModulo:lb,mapLinear:GI,inverseLerp:kI,lerp:Vg,damp:qI,pingpong:XI,smoothstep:jI,smootherstep:YI,randInt:WI,randFloat:KI,randFloatSpread:QI,seededRandom:ZI,degToRad:JI,radToDeg:$I,isPowerOfTwo:tU,ceilPowerOfTwo:eU,floorPowerOfTwo:nU,setQuaternionFromProperEuler:iU,normalize:gn,denormalize:er};class Jt{constructor(t=0,e=0){Jt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6],this.y=s[1]*e+s[4]*n+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Je(this.x,t.x,e.x),this.y=Je(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=Je(this.x,t,e),this.y=Je(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Je(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Je(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),s=Math.sin(e),r=this.x-t.x,u=this.y-t.y;return this.x=r*n-u*s+t.x,this.y=r*s+u*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Er{constructor(t=0,e=0,n=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=s}static slerpFlat(t,e,n,s,r,u,f){let d=n[s+0],m=n[s+1],_=n[s+2],y=n[s+3];const S=r[u+0],T=r[u+1],R=r[u+2],C=r[u+3];if(f===0){t[e+0]=d,t[e+1]=m,t[e+2]=_,t[e+3]=y;return}if(f===1){t[e+0]=S,t[e+1]=T,t[e+2]=R,t[e+3]=C;return}if(y!==C||d!==S||m!==T||_!==R){let w=1-f;const M=d*S+m*T+_*R+y*C,O=M>=0?1:-1,z=1-M*M;if(z>Number.EPSILON){const j=Math.sqrt(z),q=Math.atan2(j,M*O);w=Math.sin(w*q)/j,f=Math.sin(f*q)/j}const V=f*O;if(d=d*w+S*V,m=m*w+T*V,_=_*w+R*V,y=y*w+C*V,w===1-f){const j=1/Math.sqrt(d*d+m*m+_*_+y*y);d*=j,m*=j,_*=j,y*=j}}t[e]=d,t[e+1]=m,t[e+2]=_,t[e+3]=y}static multiplyQuaternionsFlat(t,e,n,s,r,u){const f=n[s],d=n[s+1],m=n[s+2],_=n[s+3],y=r[u],S=r[u+1],T=r[u+2],R=r[u+3];return t[e]=f*R+_*y+d*T-m*S,t[e+1]=d*R+_*S+m*y-f*T,t[e+2]=m*R+_*T+f*S-d*y,t[e+3]=_*R-f*y-d*S-m*T,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,s){return this._x=t,this._y=e,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,s=t._y,r=t._z,u=t._order,f=Math.cos,d=Math.sin,m=f(n/2),_=f(s/2),y=f(r/2),S=d(n/2),T=d(s/2),R=d(r/2);switch(u){case"XYZ":this._x=S*_*y+m*T*R,this._y=m*T*y-S*_*R,this._z=m*_*R+S*T*y,this._w=m*_*y-S*T*R;break;case"YXZ":this._x=S*_*y+m*T*R,this._y=m*T*y-S*_*R,this._z=m*_*R-S*T*y,this._w=m*_*y+S*T*R;break;case"ZXY":this._x=S*_*y-m*T*R,this._y=m*T*y+S*_*R,this._z=m*_*R+S*T*y,this._w=m*_*y-S*T*R;break;case"ZYX":this._x=S*_*y-m*T*R,this._y=m*T*y+S*_*R,this._z=m*_*R-S*T*y,this._w=m*_*y+S*T*R;break;case"YZX":this._x=S*_*y+m*T*R,this._y=m*T*y+S*_*R,this._z=m*_*R-S*T*y,this._w=m*_*y-S*T*R;break;case"XZY":this._x=S*_*y-m*T*R,this._y=m*T*y-S*_*R,this._z=m*_*R+S*T*y,this._w=m*_*y+S*T*R;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,s=Math.sin(n);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],s=e[4],r=e[8],u=e[1],f=e[5],d=e[9],m=e[2],_=e[6],y=e[10],S=n+f+y;if(S>0){const T=.5/Math.sqrt(S+1);this._w=.25/T,this._x=(_-d)*T,this._y=(r-m)*T,this._z=(u-s)*T}else if(n>f&&n>y){const T=2*Math.sqrt(1+n-f-y);this._w=(_-d)/T,this._x=.25*T,this._y=(s+u)/T,this._z=(r+m)/T}else if(f>y){const T=2*Math.sqrt(1+f-n-y);this._w=(r-m)/T,this._x=(s+u)/T,this._y=.25*T,this._z=(d+_)/T}else{const T=2*Math.sqrt(1+y-n-f);this._w=(u-s)/T,this._x=(r+m)/T,this._y=(d+_)/T,this._z=.25*T}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-8?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Je(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const s=Math.min(1,e/n);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,s=t._y,r=t._z,u=t._w,f=e._x,d=e._y,m=e._z,_=e._w;return this._x=n*_+u*f+s*m-r*d,this._y=s*_+u*d+r*f-n*m,this._z=r*_+u*m+n*d-s*f,this._w=u*_-n*f-s*d-r*m,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,s=this._y,r=this._z,u=this._w;let f=u*t._w+n*t._x+s*t._y+r*t._z;if(f<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,f=-f):this.copy(t),f>=1)return this._w=u,this._x=n,this._y=s,this._z=r,this;const d=1-f*f;if(d<=Number.EPSILON){const T=1-e;return this._w=T*u+e*this._w,this._x=T*n+e*this._x,this._y=T*s+e*this._y,this._z=T*r+e*this._z,this.normalize(),this}const m=Math.sqrt(d),_=Math.atan2(m,f),y=Math.sin((1-e)*_)/m,S=Math.sin(e*_)/m;return this._w=u*y+this._w*S,this._x=n*y+this._x*S,this._y=s*y+this._y*S,this._z=r*y+this._z*S,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(t),s*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class tt{constructor(t=0,e=0,n=0){tt.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(wM.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(wM.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*s,this.y=r[1]*e+r[4]*n+r[7]*s,this.z=r[2]*e+r[5]*n+r[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,s=this.z,r=t.elements,u=1/(r[3]*e+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*s+r[12])*u,this.y=(r[1]*e+r[5]*n+r[9]*s+r[13])*u,this.z=(r[2]*e+r[6]*n+r[10]*s+r[14])*u,this}applyQuaternion(t){const e=this.x,n=this.y,s=this.z,r=t.x,u=t.y,f=t.z,d=t.w,m=2*(u*s-f*n),_=2*(f*e-r*s),y=2*(r*n-u*e);return this.x=e+d*m+u*y-f*_,this.y=n+d*_+f*m-r*y,this.z=s+d*y+r*_-u*m,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*s,this.y=r[1]*e+r[5]*n+r[9]*s,this.z=r[2]*e+r[6]*n+r[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Je(this.x,t.x,e.x),this.y=Je(this.y,t.y,e.y),this.z=Je(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=Je(this.x,t,e),this.y=Je(this.y,t,e),this.z=Je(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Je(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,s=t.y,r=t.z,u=e.x,f=e.y,d=e.z;return this.x=s*d-r*f,this.y=r*u-n*d,this.z=n*f-s*u,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return qx.copy(this).projectOnVector(t),this.sub(qx)}reflect(t){return this.sub(qx.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Je(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,s=this.z-t.z;return e*e+n*n+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const s=Math.sin(e)*t;return this.x=s*Math.sin(n),this.y=Math.cos(e)*t,this.z=s*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const qx=new tt,wM=new Er;class pn{constructor(t,e,n,s,r,u,f,d,m){pn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,s,r,u,f,d,m)}set(t,e,n,s,r,u,f,d,m){const _=this.elements;return _[0]=t,_[1]=s,_[2]=f,_[3]=e,_[4]=r,_[5]=d,_[6]=n,_[7]=u,_[8]=m,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,r=this.elements,u=n[0],f=n[3],d=n[6],m=n[1],_=n[4],y=n[7],S=n[2],T=n[5],R=n[8],C=s[0],w=s[3],M=s[6],O=s[1],z=s[4],V=s[7],j=s[2],q=s[5],L=s[8];return r[0]=u*C+f*O+d*j,r[3]=u*w+f*z+d*q,r[6]=u*M+f*V+d*L,r[1]=m*C+_*O+y*j,r[4]=m*w+_*z+y*q,r[7]=m*M+_*V+y*L,r[2]=S*C+T*O+R*j,r[5]=S*w+T*z+R*q,r[8]=S*M+T*V+R*L,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],u=t[4],f=t[5],d=t[6],m=t[7],_=t[8];return e*u*_-e*f*m-n*r*_+n*f*d+s*r*m-s*u*d}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],u=t[4],f=t[5],d=t[6],m=t[7],_=t[8],y=_*u-f*m,S=f*d-_*r,T=m*r-u*d,R=e*y+n*S+s*T;if(R===0)return this.set(0,0,0,0,0,0,0,0,0);const C=1/R;return t[0]=y*C,t[1]=(s*m-_*n)*C,t[2]=(f*n-s*u)*C,t[3]=S*C,t[4]=(_*e-s*d)*C,t[5]=(s*r-f*e)*C,t[6]=T*C,t[7]=(n*d-m*e)*C,t[8]=(u*e-n*r)*C,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,s,r,u,f){const d=Math.cos(r),m=Math.sin(r);return this.set(n*d,n*m,-n*(d*u+m*f)+u+t,-s*m,s*d,-s*(-m*u+d*f)+f+e,0,0,1),this}scale(t,e){return this.premultiply(Xx.makeScale(t,e)),this}rotate(t){return this.premultiply(Xx.makeRotation(-t)),this}translate(t,e){return this.premultiply(Xx.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<9;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const Xx=new pn;function Aw(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}const aU={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function mp(i,t){return new aU[i](t)}function e_(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function Rw(){const i=e_("canvas");return i.style.display="block",i}const CM={};function n_(i){i in CM||(CM[i]=!0,console.warn(i))}function rU(i,t,e){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,e);break;default:n()}}setTimeout(r,e)})}const DM=new pn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),NM=new pn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function oU(){const i={enabled:!0,workingColorSpace:ah,spaces:{},convert:function(s,r,u){return this.enabled===!1||r===u||!r||!u||(this.spaces[r].transfer===li&&(s.r=Hu(s.r),s.g=Hu(s.g),s.b=Hu(s.b)),this.spaces[r].primaries!==this.spaces[u].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[u].fromXYZ)),this.spaces[u].transfer===li&&(s.r=yp(s.r),s.g=yp(s.g),s.b=yp(s.b))),s},workingToColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},colorSpaceToWorking:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Vu?$g:this.spaces[s].transfer},getToneMappingMode:function(s){return this.spaces[s].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,u){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[u].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,r){return n_("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(s,r)},toWorkingColorSpace:function(s,r){return n_("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(s,r)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[ah]:{primaries:t,whitePoint:n,transfer:$g,toXYZ:DM,fromXYZ:NM,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Ra},outputColorSpaceConfig:{drawingBufferColorSpace:Ra}},[Ra]:{primaries:t,whitePoint:n,transfer:li,toXYZ:DM,fromXYZ:NM,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Ra}}}),i}const Hn=oU();function Hu(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function yp(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Fd;class ww{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{Fd===void 0&&(Fd=e_("canvas")),Fd.width=t.width,Fd.height=t.height;const s=Fd.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),n=Fd}return n.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=e_("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const s=n.getImageData(0,0,t.width,t.height),r=s.data;for(let u=0;u<r.length;u++)r[u]=Hu(r[u]/255)*255;return n.putImageData(s,0,0),e}else if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(Hu(e[n]/255)*255):e[n]=Hu(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let lU=0;class Zc{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:lU++}),this.uuid=qr(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let u=0,f=s.length;u<f;u++)s[u].isDataTexture?r.push(jx(s[u].image)):r.push(jx(s[u]))}else r=jx(s);n.url=r}return e||(t.images[this.uuid]=n),n}}function jx(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?ww.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let uU=0;const Yx=new tt;class Qi extends tu{constructor(t=Qi.DEFAULT_IMAGE,e=Qi.DEFAULT_MAPPING,n=So,s=So,r=bs,u=ql,f=Ca,d=xo,m=Qi.DEFAULT_ANISOTROPY,_=Vu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:uU++}),this.uuid=qr(),this.name="",this.source=new Zc(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=u,this.anisotropy=m,this.format=f,this.internalFormat=null,this.type=d,this.offset=new Jt(0,0),this.repeat=new Jt(1,1),this.center=new Jt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=_,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Yx).x}get height(){return this.source.getSize(Yx).y}get depth(){return this.source.getSize(Yx).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${e}' has value of undefined.`);continue}const s=this[e];if(s===void 0){console.warn(`THREE.Texture.setValues(): property '${e}' does not exist.`);continue}s&&n&&s.isVector2&&n.isVector2||s&&n&&s.isVector3&&n.isVector3||s&&n&&s.isMatrix3&&n.isMatrix3?s.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==cS)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Kg:t.x=t.x-Math.floor(t.x);break;case So:t.x=t.x<0?0:1;break;case Qg:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Kg:t.y=t.y-Math.floor(t.y);break;case So:t.y=t.y<0?0:1;break;case Qg:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}Qi.DEFAULT_IMAGE=null;Qi.DEFAULT_MAPPING=cS;Qi.DEFAULT_ANISOTROPY=1;class Yn{constructor(t=0,e=0,n=0,s=1){Yn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,s){return this.x=t,this.y=e,this.z=n,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,s=this.z,r=this.w,u=t.elements;return this.x=u[0]*e+u[4]*n+u[8]*s+u[12]*r,this.y=u[1]*e+u[5]*n+u[9]*s+u[13]*r,this.z=u[2]*e+u[6]*n+u[10]*s+u[14]*r,this.w=u[3]*e+u[7]*n+u[11]*s+u[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,s,r;const d=t.elements,m=d[0],_=d[4],y=d[8],S=d[1],T=d[5],R=d[9],C=d[2],w=d[6],M=d[10];if(Math.abs(_-S)<.01&&Math.abs(y-C)<.01&&Math.abs(R-w)<.01){if(Math.abs(_+S)<.1&&Math.abs(y+C)<.1&&Math.abs(R+w)<.1&&Math.abs(m+T+M-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const z=(m+1)/2,V=(T+1)/2,j=(M+1)/2,q=(_+S)/4,L=(y+C)/4,P=(R+w)/4;return z>V&&z>j?z<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(z),s=q/n,r=L/n):V>j?V<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(V),n=q/s,r=P/s):j<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(j),n=L/r,s=P/r),this.set(n,s,r,e),this}let O=Math.sqrt((w-R)*(w-R)+(y-C)*(y-C)+(S-_)*(S-_));return Math.abs(O)<.001&&(O=1),this.x=(w-R)/O,this.y=(y-C)/O,this.z=(S-_)/O,this.w=Math.acos((m+T+M-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Je(this.x,t.x,e.x),this.y=Je(this.y,t.y,e.y),this.z=Je(this.z,t.z,e.z),this.w=Je(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=Je(this.x,t,e),this.y=Je(this.y,t,e),this.z=Je(this.z,t,e),this.w=Je(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Je(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ub extends tu{constructor(t=1,e=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:bs,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=n.depth,this.scissor=new Yn(0,0,t,e),this.scissorTest=!1,this.viewport=new Yn(0,0,t,e);const s={width:t,height:e,depth:n.depth},r=new Qi(s);this.textures=[];const u=n.count;for(let f=0;f<u;f++)this.textures[f]=r.clone(),this.textures[f].isRenderTargetTexture=!0,this.textures[f].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(t={}){const e={minFilter:bs,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&&(e.mapping=t.mapping),t.wrapS!==void 0&&(e.wrapS=t.wrapS),t.wrapT!==void 0&&(e.wrapT=t.wrapT),t.wrapR!==void 0&&(e.wrapR=t.wrapR),t.magFilter!==void 0&&(e.magFilter=t.magFilter),t.minFilter!==void 0&&(e.minFilter=t.minFilter),t.format!==void 0&&(e.format=t.format),t.type!==void 0&&(e.type=t.type),t.anisotropy!==void 0&&(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&&(e.colorSpace=t.colorSpace),t.flipY!==void 0&&(e.flipY=t.flipY),t.generateMipmaps!==void 0&&(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&&(e.internalFormat=t.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=t,this.textures[s].image.height=e,this.textures[s].image.depth=n,this.textures[s].isArrayTexture=this.textures[s].image.depth>1;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const s=Object.assign({},t.textures[e].image);this.textures[e].source=new Zc(s)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Jl extends ub{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class yS extends Qi{constructor(t=null,e=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:s},this.magFilter=na,this.minFilter=na,this.wrapR=So,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class cU extends Jl{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new yS(null,t,e,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class vS extends Qi{constructor(t=null,e=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:s},this.magFilter=na,this.minFilter=na,this.wrapR=So,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class hU extends Jl{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new vS(null,t,e,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Da{constructor(t=new tt(1/0,1/0,1/0),e=new tt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Qo.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Qo.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Qo.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const r=n.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let u=0,f=r.count;u<f;u++)t.isMesh===!0?t.getVertexPosition(u,Qo):Qo.fromBufferAttribute(r,u),Qo.applyMatrix4(t.matrixWorld),this.expandByPoint(Qo);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),ky.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),ky.copy(n.boundingBox)),ky.applyMatrix4(t.matrixWorld),this.union(ky)}const s=t.children;for(let r=0,u=s.length;r<u;r++)this.expandByObject(s[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Qo),Qo.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(pg),qy.subVectors(this.max,pg),Hd.subVectors(t.a,pg),Gd.subVectors(t.b,pg),kd.subVectors(t.c,pg),Hc.subVectors(Gd,Hd),Gc.subVectors(kd,Gd),rf.subVectors(Hd,kd);let e=[0,-Hc.z,Hc.y,0,-Gc.z,Gc.y,0,-rf.z,rf.y,Hc.z,0,-Hc.x,Gc.z,0,-Gc.x,rf.z,0,-rf.x,-Hc.y,Hc.x,0,-Gc.y,Gc.x,0,-rf.y,rf.x,0];return!Wx(e,Hd,Gd,kd,qy)||(e=[1,0,0,0,1,0,0,0,1],!Wx(e,Hd,Gd,kd,qy))?!1:(Xy.crossVectors(Hc,Gc),e=[Xy.x,Xy.y,Xy.z],Wx(e,Hd,Gd,kd,qy))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Qo).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Qo).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Iu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Iu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Iu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Iu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Iu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Iu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Iu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Iu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Iu),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const Iu=[new tt,new tt,new tt,new tt,new tt,new tt,new tt,new tt],Qo=new tt,ky=new Da,Hd=new tt,Gd=new tt,kd=new tt,Hc=new tt,Gc=new tt,rf=new tt,pg=new tt,qy=new tt,Xy=new tt,of=new tt;function Wx(i,t,e,n,s){for(let r=0,u=i.length-3;r<=u;r+=3){of.fromArray(i,r);const f=s.x*Math.abs(of.x)+s.y*Math.abs(of.y)+s.z*Math.abs(of.z),d=t.dot(of),m=e.dot(of),_=n.dot(of);if(Math.max(-Math.max(d,m,_),Math.min(d,m,_))>f)return!1}return!0}const fU=new Da,mg=new tt,Kx=new tt;class ia{constructor(t=new tt,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):fU.setFromPoints(t).getCenter(n);let s=0;for(let r=0,u=t.length;r<u;r++)s=Math.max(s,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;mg.subVectors(t,this.center);const e=mg.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),s=(n-this.radius)*.5;this.center.addScaledVector(mg,s/n),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Kx.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(mg.copy(t.center).add(Kx)),this.expandByPoint(mg.copy(t.center).sub(Kx))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const Uu=new tt,Qx=new tt,jy=new tt,kc=new tt,Zx=new tt,Yy=new tt,Jx=new tt;class qp{constructor(t=new tt,e=new tt(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Uu)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Uu.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Uu.copy(this.origin).addScaledVector(this.direction,e),Uu.distanceToSquared(t))}distanceSqToSegment(t,e,n,s){Qx.copy(t).add(e).multiplyScalar(.5),jy.copy(e).sub(t).normalize(),kc.copy(this.origin).sub(Qx);const r=t.distanceTo(e)*.5,u=-this.direction.dot(jy),f=kc.dot(this.direction),d=-kc.dot(jy),m=kc.lengthSq(),_=Math.abs(1-u*u);let y,S,T,R;if(_>0)if(y=u*d-f,S=u*f-d,R=r*_,y>=0)if(S>=-R)if(S<=R){const C=1/_;y*=C,S*=C,T=y*(y+u*S+2*f)+S*(u*y+S+2*d)+m}else S=r,y=Math.max(0,-(u*S+f)),T=-y*y+S*(S+2*d)+m;else S=-r,y=Math.max(0,-(u*S+f)),T=-y*y+S*(S+2*d)+m;else S<=-R?(y=Math.max(0,-(-u*r+f)),S=y>0?-r:Math.min(Math.max(-r,-d),r),T=-y*y+S*(S+2*d)+m):S<=R?(y=0,S=Math.min(Math.max(-r,-d),r),T=S*(S+2*d)+m):(y=Math.max(0,-(u*r+f)),S=y>0?r:Math.min(Math.max(-r,-d),r),T=-y*y+S*(S+2*d)+m);else S=u>0?-r:r,y=Math.max(0,-(u*S+f)),T=-y*y+S*(S+2*d)+m;return n&&n.copy(this.origin).addScaledVector(this.direction,y),s&&s.copy(Qx).addScaledVector(jy,S),T}intersectSphere(t,e){Uu.subVectors(t.center,this.origin);const n=Uu.dot(this.direction),s=Uu.dot(Uu)-n*n,r=t.radius*t.radius;if(s>r)return null;const u=Math.sqrt(r-s),f=n-u,d=n+u;return d<0?null:f<0?this.at(d,e):this.at(f,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,s,r,u,f,d;const m=1/this.direction.x,_=1/this.direction.y,y=1/this.direction.z,S=this.origin;return m>=0?(n=(t.min.x-S.x)*m,s=(t.max.x-S.x)*m):(n=(t.max.x-S.x)*m,s=(t.min.x-S.x)*m),_>=0?(r=(t.min.y-S.y)*_,u=(t.max.y-S.y)*_):(r=(t.max.y-S.y)*_,u=(t.min.y-S.y)*_),n>u||r>s||((r>n||isNaN(n))&&(n=r),(u<s||isNaN(s))&&(s=u),y>=0?(f=(t.min.z-S.z)*y,d=(t.max.z-S.z)*y):(f=(t.max.z-S.z)*y,d=(t.min.z-S.z)*y),n>d||f>s)||((f>n||n!==n)&&(n=f),(d<s||s!==s)&&(s=d),s<0)?null:this.at(n>=0?n:s,e)}intersectsBox(t){return this.intersectBox(t,Uu)!==null}intersectTriangle(t,e,n,s,r){Zx.subVectors(e,t),Yy.subVectors(n,t),Jx.crossVectors(Zx,Yy);let u=this.direction.dot(Jx),f;if(u>0){if(s)return null;f=1}else if(u<0)f=-1,u=-u;else return null;kc.subVectors(this.origin,t);const d=f*this.direction.dot(Yy.crossVectors(kc,Yy));if(d<0)return null;const m=f*this.direction.dot(Zx.cross(kc));if(m<0||d+m>u)return null;const _=-f*kc.dot(Jx);return _<0?null:this.at(_/u,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class tn{constructor(t,e,n,s,r,u,f,d,m,_,y,S,T,R,C,w){tn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,s,r,u,f,d,m,_,y,S,T,R,C,w)}set(t,e,n,s,r,u,f,d,m,_,y,S,T,R,C,w){const M=this.elements;return M[0]=t,M[4]=e,M[8]=n,M[12]=s,M[1]=r,M[5]=u,M[9]=f,M[13]=d,M[2]=m,M[6]=_,M[10]=y,M[14]=S,M[3]=T,M[7]=R,M[11]=C,M[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new tn().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,s=1/qd.setFromMatrixColumn(t,0).length(),r=1/qd.setFromMatrixColumn(t,1).length(),u=1/qd.setFromMatrixColumn(t,2).length();return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*u,e[9]=n[9]*u,e[10]=n[10]*u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,s=t.y,r=t.z,u=Math.cos(n),f=Math.sin(n),d=Math.cos(s),m=Math.sin(s),_=Math.cos(r),y=Math.sin(r);if(t.order==="XYZ"){const S=u*_,T=u*y,R=f*_,C=f*y;e[0]=d*_,e[4]=-d*y,e[8]=m,e[1]=T+R*m,e[5]=S-C*m,e[9]=-f*d,e[2]=C-S*m,e[6]=R+T*m,e[10]=u*d}else if(t.order==="YXZ"){const S=d*_,T=d*y,R=m*_,C=m*y;e[0]=S+C*f,e[4]=R*f-T,e[8]=u*m,e[1]=u*y,e[5]=u*_,e[9]=-f,e[2]=T*f-R,e[6]=C+S*f,e[10]=u*d}else if(t.order==="ZXY"){const S=d*_,T=d*y,R=m*_,C=m*y;e[0]=S-C*f,e[4]=-u*y,e[8]=R+T*f,e[1]=T+R*f,e[5]=u*_,e[9]=C-S*f,e[2]=-u*m,e[6]=f,e[10]=u*d}else if(t.order==="ZYX"){const S=u*_,T=u*y,R=f*_,C=f*y;e[0]=d*_,e[4]=R*m-T,e[8]=S*m+C,e[1]=d*y,e[5]=C*m+S,e[9]=T*m-R,e[2]=-m,e[6]=f*d,e[10]=u*d}else if(t.order==="YZX"){const S=u*d,T=u*m,R=f*d,C=f*m;e[0]=d*_,e[4]=C-S*y,e[8]=R*y+T,e[1]=y,e[5]=u*_,e[9]=-f*_,e[2]=-m*_,e[6]=T*y+R,e[10]=S-C*y}else if(t.order==="XZY"){const S=u*d,T=u*m,R=f*d,C=f*m;e[0]=d*_,e[4]=-y,e[8]=m*_,e[1]=S*y+C,e[5]=u*_,e[9]=T*y-R,e[2]=R*y-T,e[6]=f*_,e[10]=C*y+S}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(dU,t,pU)}lookAt(t,e,n){const s=this.elements;return Hr.subVectors(t,e),Hr.lengthSq()===0&&(Hr.z=1),Hr.normalize(),qc.crossVectors(n,Hr),qc.lengthSq()===0&&(Math.abs(n.z)===1?Hr.x+=1e-4:Hr.z+=1e-4,Hr.normalize(),qc.crossVectors(n,Hr)),qc.normalize(),Wy.crossVectors(Hr,qc),s[0]=qc.x,s[4]=Wy.x,s[8]=Hr.x,s[1]=qc.y,s[5]=Wy.y,s[9]=Hr.y,s[2]=qc.z,s[6]=Wy.z,s[10]=Hr.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,r=this.elements,u=n[0],f=n[4],d=n[8],m=n[12],_=n[1],y=n[5],S=n[9],T=n[13],R=n[2],C=n[6],w=n[10],M=n[14],O=n[3],z=n[7],V=n[11],j=n[15],q=s[0],L=s[4],P=s[8],D=s[12],U=s[1],F=s[5],Y=s[9],G=s[13],gt=s[2],vt=s[6],k=s[10],et=s[14],nt=s[3],ft=s[7],wt=s[11],J=s[15];return r[0]=u*q+f*U+d*gt+m*nt,r[4]=u*L+f*F+d*vt+m*ft,r[8]=u*P+f*Y+d*k+m*wt,r[12]=u*D+f*G+d*et+m*J,r[1]=_*q+y*U+S*gt+T*nt,r[5]=_*L+y*F+S*vt+T*ft,r[9]=_*P+y*Y+S*k+T*wt,r[13]=_*D+y*G+S*et+T*J,r[2]=R*q+C*U+w*gt+M*nt,r[6]=R*L+C*F+w*vt+M*ft,r[10]=R*P+C*Y+w*k+M*wt,r[14]=R*D+C*G+w*et+M*J,r[3]=O*q+z*U+V*gt+j*nt,r[7]=O*L+z*F+V*vt+j*ft,r[11]=O*P+z*Y+V*k+j*wt,r[15]=O*D+z*G+V*et+j*J,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],s=t[8],r=t[12],u=t[1],f=t[5],d=t[9],m=t[13],_=t[2],y=t[6],S=t[10],T=t[14],R=t[3],C=t[7],w=t[11],M=t[15];return R*(+r*d*y-s*m*y-r*f*S+n*m*S+s*f*T-n*d*T)+C*(+e*d*T-e*m*S+r*u*S-s*u*T+s*m*_-r*d*_)+w*(+e*m*y-e*f*T-r*u*y+n*u*T+r*f*_-n*m*_)+M*(-s*f*_-e*d*y+e*f*S+s*u*y-n*u*S+n*d*_)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],u=t[4],f=t[5],d=t[6],m=t[7],_=t[8],y=t[9],S=t[10],T=t[11],R=t[12],C=t[13],w=t[14],M=t[15],O=y*w*m-C*S*m+C*d*T-f*w*T-y*d*M+f*S*M,z=R*S*m-_*w*m-R*d*T+u*w*T+_*d*M-u*S*M,V=_*C*m-R*y*m+R*f*T-u*C*T-_*f*M+u*y*M,j=R*y*d-_*C*d-R*f*S+u*C*S+_*f*w-u*y*w,q=e*O+n*z+s*V+r*j;if(q===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/q;return t[0]=O*L,t[1]=(C*S*r-y*w*r-C*s*T+n*w*T+y*s*M-n*S*M)*L,t[2]=(f*w*r-C*d*r+C*s*m-n*w*m-f*s*M+n*d*M)*L,t[3]=(y*d*r-f*S*r-y*s*m+n*S*m+f*s*T-n*d*T)*L,t[4]=z*L,t[5]=(_*w*r-R*S*r+R*s*T-e*w*T-_*s*M+e*S*M)*L,t[6]=(R*d*r-u*w*r-R*s*m+e*w*m+u*s*M-e*d*M)*L,t[7]=(u*S*r-_*d*r+_*s*m-e*S*m-u*s*T+e*d*T)*L,t[8]=V*L,t[9]=(R*y*r-_*C*r-R*n*T+e*C*T+_*n*M-e*y*M)*L,t[10]=(u*C*r-R*f*r+R*n*m-e*C*m-u*n*M+e*f*M)*L,t[11]=(_*f*r-u*y*r-_*n*m+e*y*m+u*n*T-e*f*T)*L,t[12]=j*L,t[13]=(_*C*s-R*y*s+R*n*S-e*C*S-_*n*w+e*y*w)*L,t[14]=(R*f*s-u*C*s-R*n*d+e*C*d+u*n*w-e*f*w)*L,t[15]=(u*y*s-_*f*s+_*n*d-e*y*d-u*n*S+e*f*S)*L,this}scale(t){const e=this.elements,n=t.x,s=t.y,r=t.z;return e[0]*=n,e[4]*=s,e[8]*=r,e[1]*=n,e[5]*=s,e[9]*=r,e[2]*=n,e[6]*=s,e[10]*=r,e[3]*=n,e[7]*=s,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,s))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),s=Math.sin(e),r=1-n,u=t.x,f=t.y,d=t.z,m=r*u,_=r*f;return this.set(m*u+n,m*f-s*d,m*d+s*f,0,m*f+s*d,_*f+n,_*d-s*u,0,m*d-s*f,_*d+s*u,r*d*d+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,s,r,u){return this.set(1,n,r,0,t,1,u,0,e,s,1,0,0,0,0,1),this}compose(t,e,n){const s=this.elements,r=e._x,u=e._y,f=e._z,d=e._w,m=r+r,_=u+u,y=f+f,S=r*m,T=r*_,R=r*y,C=u*_,w=u*y,M=f*y,O=d*m,z=d*_,V=d*y,j=n.x,q=n.y,L=n.z;return s[0]=(1-(C+M))*j,s[1]=(T+V)*j,s[2]=(R-z)*j,s[3]=0,s[4]=(T-V)*q,s[5]=(1-(S+M))*q,s[6]=(w+O)*q,s[7]=0,s[8]=(R+z)*L,s[9]=(w-O)*L,s[10]=(1-(S+C))*L,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,n){const s=this.elements;let r=qd.set(s[0],s[1],s[2]).length();const u=qd.set(s[4],s[5],s[6]).length(),f=qd.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),t.x=s[12],t.y=s[13],t.z=s[14],Zo.copy(this);const m=1/r,_=1/u,y=1/f;return Zo.elements[0]*=m,Zo.elements[1]*=m,Zo.elements[2]*=m,Zo.elements[4]*=_,Zo.elements[5]*=_,Zo.elements[6]*=_,Zo.elements[8]*=y,Zo.elements[9]*=y,Zo.elements[10]*=y,e.setFromRotationMatrix(Zo),n.x=r,n.y=u,n.z=f,this}makePerspective(t,e,n,s,r,u,f=kr,d=!1){const m=this.elements,_=2*r/(e-t),y=2*r/(n-s),S=(e+t)/(e-t),T=(n+s)/(n-s);let R,C;if(d)R=r/(u-r),C=u*r/(u-r);else if(f===kr)R=-(u+r)/(u-r),C=-2*u*r/(u-r);else if(f===Rp)R=-u/(u-r),C=-u*r/(u-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+f);return m[0]=_,m[4]=0,m[8]=S,m[12]=0,m[1]=0,m[5]=y,m[9]=T,m[13]=0,m[2]=0,m[6]=0,m[10]=R,m[14]=C,m[3]=0,m[7]=0,m[11]=-1,m[15]=0,this}makeOrthographic(t,e,n,s,r,u,f=kr,d=!1){const m=this.elements,_=2/(e-t),y=2/(n-s),S=-(e+t)/(e-t),T=-(n+s)/(n-s);let R,C;if(d)R=1/(u-r),C=u/(u-r);else if(f===kr)R=-2/(u-r),C=-(u+r)/(u-r);else if(f===Rp)R=-1/(u-r),C=-r/(u-r);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+f);return m[0]=_,m[4]=0,m[8]=0,m[12]=S,m[1]=0,m[5]=y,m[9]=0,m[13]=T,m[2]=0,m[6]=0,m[10]=R,m[14]=C,m[3]=0,m[7]=0,m[11]=0,m[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<16;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const qd=new tt,Zo=new tn,dU=new tt(0,0,0),pU=new tt(1,1,1),qc=new tt,Wy=new tt,Hr=new tt,IM=new tn,UM=new Er;class Xr{constructor(t=0,e=0,n=0,s=Xr.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,s=this._order){return this._x=t,this._y=e,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const s=t.elements,r=s[0],u=s[4],f=s[8],d=s[1],m=s[5],_=s[9],y=s[2],S=s[6],T=s[10];switch(e){case"XYZ":this._y=Math.asin(Je(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-_,T),this._z=Math.atan2(-u,r)):(this._x=Math.atan2(S,m),this._z=0);break;case"YXZ":this._x=Math.asin(-Je(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(f,T),this._z=Math.atan2(d,m)):(this._y=Math.atan2(-y,r),this._z=0);break;case"ZXY":this._x=Math.asin(Je(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(-y,T),this._z=Math.atan2(-u,m)):(this._y=0,this._z=Math.atan2(d,r));break;case"ZYX":this._y=Math.asin(-Je(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(S,T),this._z=Math.atan2(d,r)):(this._x=0,this._z=Math.atan2(-u,m));break;case"YZX":this._z=Math.asin(Je(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-_,m),this._y=Math.atan2(-y,r)):(this._x=0,this._y=Math.atan2(f,T));break;case"XZY":this._z=Math.asin(-Je(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(S,m),this._y=Math.atan2(f,r)):(this._x=Math.atan2(-_,T),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return IM.makeRotationFromQuaternion(t),this.setFromRotationMatrix(IM,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return UM.setFromEuler(this),this.setFromQuaternion(UM,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Xr.DEFAULT_ORDER="XYZ";class Cp{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let mU=0;const OM=new tt,Xd=new Er,Ou=new tn,Ky=new tt,gg=new tt,gU=new tt,_U=new Er,LM=new tt(1,0,0),PM=new tt(0,1,0),zM=new tt(0,0,1),VM={type:"added"},yU={type:"removed"},jd={type:"childadded",child:null},$x={type:"childremoved",child:null};class Wn extends tu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:mU++}),this.uuid=qr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Wn.DEFAULT_UP.clone();const t=new tt,e=new Xr,n=new Er,s=new tt(1,1,1);function r(){n.setFromEuler(e,!1)}function u(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new tn},normalMatrix:{value:new pn}}),this.matrix=new tn,this.matrixWorld=new tn,this.matrixAutoUpdate=Wn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Wn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Cp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Xd.setFromAxisAngle(t,e),this.quaternion.multiply(Xd),this}rotateOnWorldAxis(t,e){return Xd.setFromAxisAngle(t,e),this.quaternion.premultiply(Xd),this}rotateX(t){return this.rotateOnAxis(LM,t)}rotateY(t){return this.rotateOnAxis(PM,t)}rotateZ(t){return this.rotateOnAxis(zM,t)}translateOnAxis(t,e){return OM.copy(t).applyQuaternion(this.quaternion),this.position.add(OM.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(LM,t)}translateY(t){return this.translateOnAxis(PM,t)}translateZ(t){return this.translateOnAxis(zM,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ou.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Ky.copy(t):Ky.set(t,e,n);const s=this.parent;this.updateWorldMatrix(!0,!1),gg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ou.lookAt(gg,Ky,this.up):Ou.lookAt(Ky,gg,this.up),this.quaternion.setFromRotationMatrix(Ou),s&&(Ou.extractRotation(s.matrixWorld),Xd.setFromRotationMatrix(Ou),this.quaternion.premultiply(Xd.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(VM),jd.child=t,this.dispatchEvent(jd),jd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(yU),$x.child=t,this.dispatchEvent($x),$x.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Ou.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Ou.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ou),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(VM),jd.child=t,this.dispatchEvent(jd),jd.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,s=this.children.length;n<s;n++){const u=this.children[n].getObjectByProperty(t,e);if(u!==void 0)return u}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const s=this.children;for(let r=0,u=s.length;r<u;r++)s[r].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gg,t,gU),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gg,_U,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const s=this.children;for(let r=0,u=s.length;r<u;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(f=>({...f,boundingBox:f.boundingBox?f.boundingBox.toJSON():void 0,boundingSphere:f.boundingSphere?f.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(f=>({...f})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(t),s.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function r(f,d){return f[d.uuid]===void 0&&(f[d.uuid]=d.toJSON(t)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(t.geometries,this.geometry);const f=this.geometry.parameters;if(f!==void 0&&f.shapes!==void 0){const d=f.shapes;if(Array.isArray(d))for(let m=0,_=d.length;m<_;m++){const y=d[m];r(t.shapes,y)}else r(t.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const f=[];for(let d=0,m=this.material.length;d<m;d++)f.push(r(t.materials,this.material[d]));s.material=f}else s.material=r(t.materials,this.material);if(this.children.length>0){s.children=[];for(let f=0;f<this.children.length;f++)s.children.push(this.children[f].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let f=0;f<this.animations.length;f++){const d=this.animations[f];s.animations.push(r(t.animations,d))}}if(e){const f=u(t.geometries),d=u(t.materials),m=u(t.textures),_=u(t.images),y=u(t.shapes),S=u(t.skeletons),T=u(t.animations),R=u(t.nodes);f.length>0&&(n.geometries=f),d.length>0&&(n.materials=d),m.length>0&&(n.textures=m),_.length>0&&(n.images=_),y.length>0&&(n.shapes=y),S.length>0&&(n.skeletons=S),T.length>0&&(n.animations=T),R.length>0&&(n.nodes=R)}return n.object=s,n;function u(f){const d=[];for(const m in f){const _=f[m];delete _.metadata,d.push(_)}return d}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const s=t.children[n];this.add(s.clone())}return this}}Wn.DEFAULT_UP=new tt(0,1,0);Wn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Wn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Jo=new tt,Lu=new tt,tE=new tt,Pu=new tt,Yd=new tt,Wd=new tt,BM=new tt,eE=new tt,nE=new tt,iE=new tt,sE=new Yn,aE=new Yn,rE=new Yn;class Sr{constructor(t=new tt,e=new tt,n=new tt){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,s){s.subVectors(n,e),Jo.subVectors(t,e),s.cross(Jo);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(t,e,n,s,r){Jo.subVectors(s,e),Lu.subVectors(n,e),tE.subVectors(t,e);const u=Jo.dot(Jo),f=Jo.dot(Lu),d=Jo.dot(tE),m=Lu.dot(Lu),_=Lu.dot(tE),y=u*m-f*f;if(y===0)return r.set(0,0,0),null;const S=1/y,T=(m*d-f*_)*S,R=(u*_-f*d)*S;return r.set(1-T-R,R,T)}static containsPoint(t,e,n,s){return this.getBarycoord(t,e,n,s,Pu)===null?!1:Pu.x>=0&&Pu.y>=0&&Pu.x+Pu.y<=1}static getInterpolation(t,e,n,s,r,u,f,d){return this.getBarycoord(t,e,n,s,Pu)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(r,Pu.x),d.addScaledVector(u,Pu.y),d.addScaledVector(f,Pu.z),d)}static getInterpolatedAttribute(t,e,n,s,r,u){return sE.setScalar(0),aE.setScalar(0),rE.setScalar(0),sE.fromBufferAttribute(t,e),aE.fromBufferAttribute(t,n),rE.fromBufferAttribute(t,s),u.setScalar(0),u.addScaledVector(sE,r.x),u.addScaledVector(aE,r.y),u.addScaledVector(rE,r.z),u}static isFrontFacing(t,e,n,s){return Jo.subVectors(n,e),Lu.subVectors(t,e),Jo.cross(Lu).dot(s)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,s){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,e,n,s){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Jo.subVectors(this.c,this.b),Lu.subVectors(this.a,this.b),Jo.cross(Lu).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Sr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Sr.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,s,r){return Sr.getInterpolation(t,this.a,this.b,this.c,e,n,s,r)}containsPoint(t){return Sr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Sr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,s=this.b,r=this.c;let u,f;Yd.subVectors(s,n),Wd.subVectors(r,n),eE.subVectors(t,n);const d=Yd.dot(eE),m=Wd.dot(eE);if(d<=0&&m<=0)return e.copy(n);nE.subVectors(t,s);const _=Yd.dot(nE),y=Wd.dot(nE);if(_>=0&&y<=_)return e.copy(s);const S=d*y-_*m;if(S<=0&&d>=0&&_<=0)return u=d/(d-_),e.copy(n).addScaledVector(Yd,u);iE.subVectors(t,r);const T=Yd.dot(iE),R=Wd.dot(iE);if(R>=0&&T<=R)return e.copy(r);const C=T*m-d*R;if(C<=0&&m>=0&&R<=0)return f=m/(m-R),e.copy(n).addScaledVector(Wd,f);const w=_*R-T*y;if(w<=0&&y-_>=0&&T-R>=0)return BM.subVectors(r,s),f=(y-_)/(y-_+(T-R)),e.copy(s).addScaledVector(BM,f);const M=1/(w+C+S);return u=C*M,f=S*M,e.copy(n).addScaledVector(Yd,u).addScaledVector(Wd,f)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Cw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Xc={h:0,s:0,l:0},Qy={h:0,s:0,l:0};function oE(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*6*(2/3-e):i}class Te{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){const s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Ra){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Hn.colorSpaceToWorking(this,e),this}setRGB(t,e,n,s=Hn.workingColorSpace){return this.r=t,this.g=e,this.b=n,Hn.colorSpaceToWorking(this,s),this}setHSL(t,e,n,s=Hn.workingColorSpace){if(t=lb(t,1),e=Je(e,0,1),n=Je(n,0,1),e===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,u=2*n-r;this.r=oE(u,r,t+1/3),this.g=oE(u,r,t),this.b=oE(u,r,t-1/3)}return Hn.colorSpaceToWorking(this,s),this}setStyle(t,e=Ra){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const u=s[1],f=s[2];switch(u){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=s[1],u=r.length;if(u===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(u===6)return this.setHex(parseInt(r,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Ra){const n=Cw[t.toLowerCase()];return n!==void 0?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Hu(t.r),this.g=Hu(t.g),this.b=Hu(t.b),this}copyLinearToSRGB(t){return this.r=yp(t.r),this.g=yp(t.g),this.b=yp(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ra){return Hn.workingToColorSpace(Ta.copy(this),t),Math.round(Je(Ta.r*255,0,255))*65536+Math.round(Je(Ta.g*255,0,255))*256+Math.round(Je(Ta.b*255,0,255))}getHexString(t=Ra){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Hn.workingColorSpace){Hn.workingToColorSpace(Ta.copy(this),e);const n=Ta.r,s=Ta.g,r=Ta.b,u=Math.max(n,s,r),f=Math.min(n,s,r);let d,m;const _=(f+u)/2;if(f===u)d=0,m=0;else{const y=u-f;switch(m=_<=.5?y/(u+f):y/(2-u-f),u){case n:d=(s-r)/y+(s<r?6:0);break;case s:d=(r-n)/y+2;break;case r:d=(n-s)/y+4;break}d/=6}return t.h=d,t.s=m,t.l=_,t}getRGB(t,e=Hn.workingColorSpace){return Hn.workingToColorSpace(Ta.copy(this),e),t.r=Ta.r,t.g=Ta.g,t.b=Ta.b,t}getStyle(t=Ra){Hn.workingToColorSpace(Ta.copy(this),t);const e=Ta.r,n=Ta.g,s=Ta.b;return t!==Ra?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(t,e,n){return this.getHSL(Xc),this.setHSL(Xc.h+t,Xc.s+e,Xc.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Xc),t.getHSL(Qy);const n=Vg(Xc.h,Qy.h,e),s=Vg(Xc.s,Qy.s,e),r=Vg(Xc.l,Qy.l,e);return this.setHSL(n,s,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,s=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*s,this.g=r[1]*e+r[4]*n+r[7]*s,this.b=r[2]*e+r[5]*n+r[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ta=new Te;Te.NAMES=Cw;let vU=0;class Na extends tu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:vU++}),this.uuid=qr(),this.name="",this.type="Material",this.blending=wf,this.side=ku,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=$v,this.blendDst=t0,this.blendEquation=Kc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Te(0,0,0),this.blendAlpha=0,this.depthFunc=Nf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=hT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Sf,this.stencilZFail=Sf,this.stencilZPass=Sf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const s=this[e];if(s===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(t).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(t).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==wf&&(n.blending=this.blending),this.side!==ku&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==$v&&(n.blendSrc=this.blendSrc),this.blendDst!==t0&&(n.blendDst=this.blendDst),this.blendEquation!==Kc&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Nf&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==hT&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Sf&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Sf&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Sf&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const u=[];for(const f in r){const d=r[f];delete d.metadata,u.push(d)}return u}if(e){const r=s(t.textures),u=s(t.images);r.length>0&&(n.textures=r),u.length>0&&(n.images=u)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const s=e.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class ph extends Na{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Te(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Xr,this.combine=v_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Bu=SU();function SU(){const i=new ArrayBuffer(4),t=new Float32Array(i),e=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let d=0;d<256;++d){const m=d-127;m<-27?(n[d]=0,n[d|256]=32768,s[d]=24,s[d|256]=24):m<-14?(n[d]=1024>>-m-14,n[d|256]=1024>>-m-14|32768,s[d]=-m-1,s[d|256]=-m-1):m<=15?(n[d]=m+15<<10,n[d|256]=m+15<<10|32768,s[d]=13,s[d|256]=13):m<128?(n[d]=31744,n[d|256]=64512,s[d]=24,s[d|256]=24):(n[d]=31744,n[d|256]=64512,s[d]=13,s[d|256]=13)}const r=new Uint32Array(2048),u=new Uint32Array(64),f=new Uint32Array(64);for(let d=1;d<1024;++d){let m=d<<13,_=0;for(;(m&8388608)===0;)m<<=1,_-=8388608;m&=-8388609,_+=947912704,r[d]=m|_}for(let d=1024;d<2048;++d)r[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)u[d]=d<<23;u[31]=1199570944,u[32]=2147483648;for(let d=33;d<63;++d)u[d]=2147483648+(d-32<<23);u[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(f[d]=1024);return{floatView:t,uint32View:e,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:u,offsetTable:f}}function _r(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Je(i,-65504,65504),Bu.floatView[0]=i;const t=Bu.uint32View[0],e=t>>23&511;return Bu.baseTable[e]+((t&8388607)>>Bu.shiftTable[e])}function Ag(i){const t=i>>10;return Bu.uint32View[0]=Bu.mantissaTable[Bu.offsetTable[t]+(i&1023)]+Bu.exponentTable[t],Bu.floatView[0]}class xU{static toHalfFloat(t){return _r(t)}static fromHalfFloat(t){return Ag(t)}}const fs=new tt,Zy=new Jt;let EU=0;class pi{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:EU++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=t_,this.updateRanges=[],this.gpuType=xr,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[t+s]=e.array[n+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)Zy.fromBufferAttribute(this,e),Zy.applyMatrix3(t),this.setXY(e,Zy.x,Zy.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)fs.fromBufferAttribute(this,e),fs.applyMatrix3(t),this.setXYZ(e,fs.x,fs.y,fs.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)fs.fromBufferAttribute(this,e),fs.applyMatrix4(t),this.setXYZ(e,fs.x,fs.y,fs.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)fs.fromBufferAttribute(this,e),fs.applyNormalMatrix(t),this.setXYZ(e,fs.x,fs.y,fs.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)fs.fromBufferAttribute(this,e),fs.transformDirection(t),this.setXYZ(e,fs.x,fs.y,fs.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=er(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=gn(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=er(e,this.array)),e}setX(t,e){return this.normalized&&(e=gn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=er(e,this.array)),e}setY(t,e){return this.normalized&&(e=gn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=er(e,this.array)),e}setZ(t,e){return this.normalized&&(e=gn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=er(e,this.array)),e}setW(t,e){return this.normalized&&(e=gn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=gn(e,this.array),n=gn(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,s){return t*=this.itemSize,this.normalized&&(e=gn(e,this.array),n=gn(n,this.array),s=gn(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=s,this}setXYZW(t,e,n,s,r){return t*=this.itemSize,this.normalized&&(e=gn(e,this.array),n=gn(n,this.array),s=gn(s,this.array),r=gn(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=s,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==t_&&(t.usage=this.usage),t}}class TU extends pi{constructor(t,e,n){super(new Int8Array(t),e,n)}}class bU extends pi{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class MU extends pi{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class AU extends pi{constructor(t,e,n){super(new Int16Array(t),e,n)}}class cb extends pi{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class RU extends pi{constructor(t,e,n){super(new Int32Array(t),e,n)}}class hb extends pi{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class wU extends pi{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=Ag(this.array[t*this.itemSize]);return this.normalized&&(e=er(e,this.array)),e}setX(t,e){return this.normalized&&(e=gn(e,this.array)),this.array[t*this.itemSize]=_r(e),this}getY(t){let e=Ag(this.array[t*this.itemSize+1]);return this.normalized&&(e=er(e,this.array)),e}setY(t,e){return this.normalized&&(e=gn(e,this.array)),this.array[t*this.itemSize+1]=_r(e),this}getZ(t){let e=Ag(this.array[t*this.itemSize+2]);return this.normalized&&(e=er(e,this.array)),e}setZ(t,e){return this.normalized&&(e=gn(e,this.array)),this.array[t*this.itemSize+2]=_r(e),this}getW(t){let e=Ag(this.array[t*this.itemSize+3]);return this.normalized&&(e=er(e,this.array)),e}setW(t,e){return this.normalized&&(e=gn(e,this.array)),this.array[t*this.itemSize+3]=_r(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=gn(e,this.array),n=gn(n,this.array)),this.array[t+0]=_r(e),this.array[t+1]=_r(n),this}setXYZ(t,e,n,s){return t*=this.itemSize,this.normalized&&(e=gn(e,this.array),n=gn(n,this.array),s=gn(s,this.array)),this.array[t+0]=_r(e),this.array[t+1]=_r(n),this.array[t+2]=_r(s),this}setXYZW(t,e,n,s,r){return t*=this.itemSize,this.normalized&&(e=gn(e,this.array),n=gn(n,this.array),s=gn(s,this.array),r=gn(r,this.array)),this.array[t+0]=_r(e),this.array[t+1]=_r(n),this.array[t+2]=_r(s),this.array[t+3]=_r(r),this}}class Ue extends pi{constructor(t,e,n){super(new Float32Array(t),e,n)}}let CU=0;const _o=new tn,lE=new Wn,Kd=new tt,Gr=new Da,_g=new Da,zs=new tt;class _n extends tu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:CU++}),this.uuid=qr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Aw(t)?hb:cb)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new pn().getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return _o.makeRotationFromQuaternion(t),this.applyMatrix4(_o),this}rotateX(t){return _o.makeRotationX(t),this.applyMatrix4(_o),this}rotateY(t){return _o.makeRotationY(t),this.applyMatrix4(_o),this}rotateZ(t){return _o.makeRotationZ(t),this.applyMatrix4(_o),this}translate(t,e,n){return _o.makeTranslation(t,e,n),this.applyMatrix4(_o),this}scale(t,e,n){return _o.makeScale(t,e,n),this.applyMatrix4(_o),this}lookAt(t){return lE.lookAt(t),lE.updateMatrix(),this.applyMatrix4(lE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Kd).negate(),this.translate(Kd.x,Kd.y,Kd.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const n=[];for(let s=0,r=t.length;s<r;s++){const u=t[s];n.push(u.x,u.y,u.z||0)}this.setAttribute("position",new Ue(n,3))}else{const n=Math.min(t.length,e.count);for(let s=0;s<n;s++){const r=t[s];e.setXYZ(s,r.x,r.y,r.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Da);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new tt(-1/0,-1/0,-1/0),new tt(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,s=e.length;n<s;n++){const r=e[n];Gr.setFromBufferAttribute(r),this.morphTargetsRelative?(zs.addVectors(this.boundingBox.min,Gr.min),this.boundingBox.expandByPoint(zs),zs.addVectors(this.boundingBox.max,Gr.max),this.boundingBox.expandByPoint(zs)):(this.boundingBox.expandByPoint(Gr.min),this.boundingBox.expandByPoint(Gr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ia);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new tt,1/0);return}if(t){const n=this.boundingSphere.center;if(Gr.setFromBufferAttribute(t),e)for(let r=0,u=e.length;r<u;r++){const f=e[r];_g.setFromBufferAttribute(f),this.morphTargetsRelative?(zs.addVectors(Gr.min,_g.min),Gr.expandByPoint(zs),zs.addVectors(Gr.max,_g.max),Gr.expandByPoint(zs)):(Gr.expandByPoint(_g.min),Gr.expandByPoint(_g.max))}Gr.getCenter(n);let s=0;for(let r=0,u=t.count;r<u;r++)zs.fromBufferAttribute(t,r),s=Math.max(s,n.distanceToSquared(zs));if(e)for(let r=0,u=e.length;r<u;r++){const f=e[r],d=this.morphTargetsRelative;for(let m=0,_=f.count;m<_;m++)zs.fromBufferAttribute(f,m),d&&(Kd.fromBufferAttribute(t,m),zs.add(Kd)),s=Math.max(s,n.distanceToSquared(zs))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.position,s=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new pi(new Float32Array(4*n.count),4));const u=this.getAttribute("tangent"),f=[],d=[];for(let P=0;P<n.count;P++)f[P]=new tt,d[P]=new tt;const m=new tt,_=new tt,y=new tt,S=new Jt,T=new Jt,R=new Jt,C=new tt,w=new tt;function M(P,D,U){m.fromBufferAttribute(n,P),_.fromBufferAttribute(n,D),y.fromBufferAttribute(n,U),S.fromBufferAttribute(r,P),T.fromBufferAttribute(r,D),R.fromBufferAttribute(r,U),_.sub(m),y.sub(m),T.sub(S),R.sub(S);const F=1/(T.x*R.y-R.x*T.y);isFinite(F)&&(C.copy(_).multiplyScalar(R.y).addScaledVector(y,-T.y).multiplyScalar(F),w.copy(y).multiplyScalar(T.x).addScaledVector(_,-R.x).multiplyScalar(F),f[P].add(C),f[D].add(C),f[U].add(C),d[P].add(w),d[D].add(w),d[U].add(w))}let O=this.groups;O.length===0&&(O=[{start:0,count:t.count}]);for(let P=0,D=O.length;P<D;++P){const U=O[P],F=U.start,Y=U.count;for(let G=F,gt=F+Y;G<gt;G+=3)M(t.getX(G+0),t.getX(G+1),t.getX(G+2))}const z=new tt,V=new tt,j=new tt,q=new tt;function L(P){j.fromBufferAttribute(s,P),q.copy(j);const D=f[P];z.copy(D),z.sub(j.multiplyScalar(j.dot(D))).normalize(),V.crossVectors(q,D);const F=V.dot(d[P])<0?-1:1;u.setXYZW(P,z.x,z.y,z.z,F)}for(let P=0,D=O.length;P<D;++P){const U=O[P],F=U.start,Y=U.count;for(let G=F,gt=F+Y;G<gt;G+=3)L(t.getX(G+0)),L(t.getX(G+1)),L(t.getX(G+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new pi(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let S=0,T=n.count;S<T;S++)n.setXYZ(S,0,0,0);const s=new tt,r=new tt,u=new tt,f=new tt,d=new tt,m=new tt,_=new tt,y=new tt;if(t)for(let S=0,T=t.count;S<T;S+=3){const R=t.getX(S+0),C=t.getX(S+1),w=t.getX(S+2);s.fromBufferAttribute(e,R),r.fromBufferAttribute(e,C),u.fromBufferAttribute(e,w),_.subVectors(u,r),y.subVectors(s,r),_.cross(y),f.fromBufferAttribute(n,R),d.fromBufferAttribute(n,C),m.fromBufferAttribute(n,w),f.add(_),d.add(_),m.add(_),n.setXYZ(R,f.x,f.y,f.z),n.setXYZ(C,d.x,d.y,d.z),n.setXYZ(w,m.x,m.y,m.z)}else for(let S=0,T=e.count;S<T;S+=3)s.fromBufferAttribute(e,S+0),r.fromBufferAttribute(e,S+1),u.fromBufferAttribute(e,S+2),_.subVectors(u,r),y.subVectors(s,r),_.cross(y),n.setXYZ(S+0,_.x,_.y,_.z),n.setXYZ(S+1,_.x,_.y,_.z),n.setXYZ(S+2,_.x,_.y,_.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)zs.fromBufferAttribute(t,e),zs.normalize(),t.setXYZ(e,zs.x,zs.y,zs.z)}toNonIndexed(){function t(f,d){const m=f.array,_=f.itemSize,y=f.normalized,S=new m.constructor(d.length*_);let T=0,R=0;for(let C=0,w=d.length;C<w;C++){f.isInterleavedBufferAttribute?T=d[C]*f.data.stride+f.offset:T=d[C]*_;for(let M=0;M<_;M++)S[R++]=m[T++]}return new pi(S,_,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new _n,n=this.index.array,s=this.attributes;for(const f in s){const d=s[f],m=t(d,n);e.setAttribute(f,m)}const r=this.morphAttributes;for(const f in r){const d=[],m=r[f];for(let _=0,y=m.length;_<y;_++){const S=m[_],T=t(S,n);d.push(T)}e.morphAttributes[f]=d}e.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let f=0,d=u.length;f<d;f++){const m=u[f];e.addGroup(m.start,m.count,m.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const m in d)d[m]!==void 0&&(t[m]=d[m]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const d in n){const m=n[d];t.data.attributes[d]=m.toJSON(t.data)}const s={};let r=!1;for(const d in this.morphAttributes){const m=this.morphAttributes[d],_=[];for(let y=0,S=m.length;y<S;y++){const T=m[y];_.push(T.toJSON(t.data))}_.length>0&&(s[d]=_,r=!0)}r&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(t.data.groups=JSON.parse(JSON.stringify(u)));const f=this.boundingSphere;return f!==null&&(t.data.boundingSphere=f.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone());const s=t.attributes;for(const m in s){const _=s[m];this.setAttribute(m,_.clone(e))}const r=t.morphAttributes;for(const m in r){const _=[],y=r[m];for(let S=0,T=y.length;S<T;S++)_.push(y[S].clone(e));this.morphAttributes[m]=_}this.morphTargetsRelative=t.morphTargetsRelative;const u=t.groups;for(let m=0,_=u.length;m<_;m++){const y=u[m];this.addGroup(y.start,y.count,y.materialIndex)}const f=t.boundingBox;f!==null&&(this.boundingBox=f.clone());const d=t.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const FM=new tn,lf=new qp,Jy=new ia,HM=new tt,$y=new tt,tv=new tt,ev=new tt,uE=new tt,nv=new tt,GM=new tt,iv=new tt;class ms extends Wn{constructor(t=new _n,e=new ph){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,u=s.length;r<u;r++){const f=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=r}}}}getVertexPosition(t,e){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,u=n.morphTargetsRelative;e.fromBufferAttribute(s,t);const f=this.morphTargetInfluences;if(r&&f){nv.set(0,0,0);for(let d=0,m=r.length;d<m;d++){const _=f[d],y=r[d];_!==0&&(uE.fromBufferAttribute(y,t),u?nv.addScaledVector(uE,_):nv.addScaledVector(uE.sub(e),_))}e.add(nv)}return e}raycast(t,e){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Jy.copy(n.boundingSphere),Jy.applyMatrix4(r),lf.copy(t.ray).recast(t.near),!(Jy.containsPoint(lf.origin)===!1&&(lf.intersectSphere(Jy,HM)===null||lf.origin.distanceToSquared(HM)>(t.far-t.near)**2))&&(FM.copy(r).invert(),lf.copy(t.ray).applyMatrix4(FM),!(n.boundingBox!==null&&lf.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,lf)))}_computeIntersections(t,e,n){let s;const r=this.geometry,u=this.material,f=r.index,d=r.attributes.position,m=r.attributes.uv,_=r.attributes.uv1,y=r.attributes.normal,S=r.groups,T=r.drawRange;if(f!==null)if(Array.isArray(u))for(let R=0,C=S.length;R<C;R++){const w=S[R],M=u[w.materialIndex],O=Math.max(w.start,T.start),z=Math.min(f.count,Math.min(w.start+w.count,T.start+T.count));for(let V=O,j=z;V<j;V+=3){const q=f.getX(V),L=f.getX(V+1),P=f.getX(V+2);s=sv(this,M,t,n,m,_,y,q,L,P),s&&(s.faceIndex=Math.floor(V/3),s.face.materialIndex=w.materialIndex,e.push(s))}}else{const R=Math.max(0,T.start),C=Math.min(f.count,T.start+T.count);for(let w=R,M=C;w<M;w+=3){const O=f.getX(w),z=f.getX(w+1),V=f.getX(w+2);s=sv(this,u,t,n,m,_,y,O,z,V),s&&(s.faceIndex=Math.floor(w/3),e.push(s))}}else if(d!==void 0)if(Array.isArray(u))for(let R=0,C=S.length;R<C;R++){const w=S[R],M=u[w.materialIndex],O=Math.max(w.start,T.start),z=Math.min(d.count,Math.min(w.start+w.count,T.start+T.count));for(let V=O,j=z;V<j;V+=3){const q=V,L=V+1,P=V+2;s=sv(this,M,t,n,m,_,y,q,L,P),s&&(s.faceIndex=Math.floor(V/3),s.face.materialIndex=w.materialIndex,e.push(s))}}else{const R=Math.max(0,T.start),C=Math.min(d.count,T.start+T.count);for(let w=R,M=C;w<M;w+=3){const O=w,z=w+1,V=w+2;s=sv(this,u,t,n,m,_,y,O,z,V),s&&(s.faceIndex=Math.floor(w/3),e.push(s))}}}}function DU(i,t,e,n,s,r,u,f){let d;if(t.side===nr?d=n.intersectTriangle(u,r,s,!0,f):d=n.intersectTriangle(s,r,u,t.side===ku,f),d===null)return null;iv.copy(f),iv.applyMatrix4(i.matrixWorld);const m=e.ray.origin.distanceTo(iv);return m<e.near||m>e.far?null:{distance:m,point:iv.clone(),object:i}}function sv(i,t,e,n,s,r,u,f,d,m){i.getVertexPosition(f,$y),i.getVertexPosition(d,tv),i.getVertexPosition(m,ev);const _=DU(i,t,e,n,$y,tv,ev,GM);if(_){const y=new tt;Sr.getBarycoord(GM,$y,tv,ev,y),s&&(_.uv=Sr.getInterpolatedAttribute(s,f,d,m,y,new Jt)),r&&(_.uv1=Sr.getInterpolatedAttribute(r,f,d,m,y,new Jt)),u&&(_.normal=Sr.getInterpolatedAttribute(u,f,d,m,y,new tt),_.normal.dot(n.direction)>0&&_.normal.multiplyScalar(-1));const S={a:f,b:d,c:m,normal:new tt,materialIndex:0};Sr.getNormal($y,tv,ev,S.normal),_.face=S,_.barycoord=y}return _}class zf extends _n{constructor(t=1,e=1,n=1,s=1,r=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:s,heightSegments:r,depthSegments:u};const f=this;s=Math.floor(s),r=Math.floor(r),u=Math.floor(u);const d=[],m=[],_=[],y=[];let S=0,T=0;R("z","y","x",-1,-1,n,e,t,u,r,0),R("z","y","x",1,-1,n,e,-t,u,r,1),R("x","z","y",1,1,t,n,e,s,u,2),R("x","z","y",1,-1,t,n,-e,s,u,3),R("x","y","z",1,-1,t,e,n,s,r,4),R("x","y","z",-1,-1,t,e,-n,s,r,5),this.setIndex(d),this.setAttribute("position",new Ue(m,3)),this.setAttribute("normal",new Ue(_,3)),this.setAttribute("uv",new Ue(y,2));function R(C,w,M,O,z,V,j,q,L,P,D){const U=V/L,F=j/P,Y=V/2,G=j/2,gt=q/2,vt=L+1,k=P+1;let et=0,nt=0;const ft=new tt;for(let wt=0;wt<k;wt++){const J=wt*F-G;for(let ut=0;ut<vt;ut++){const Ot=ut*U-Y;ft[C]=Ot*O,ft[w]=J*z,ft[M]=gt,m.push(ft.x,ft.y,ft.z),ft[C]=0,ft[w]=0,ft[M]=q>0?1:-1,_.push(ft.x,ft.y,ft.z),y.push(ut/L),y.push(1-wt/P),et+=1}}for(let wt=0;wt<P;wt++)for(let J=0;J<L;J++){const ut=S+J+vt*wt,Ot=S+J+vt*(wt+1),Lt=S+(J+1)+vt*(wt+1),ee=S+(J+1)+vt*wt;d.push(ut,Ot,ee),d.push(Ot,Lt,ee),nt+=6}f.addGroup(T,nt,D),T+=nt,S+=et}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new zf(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Dp(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const s=i[e][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=s.clone():Array.isArray(s)?t[e][n]=s.slice():t[e][n]=s}}return t}function tr(i){const t={};for(let e=0;e<i.length;e++){const n=Dp(i[e]);for(const s in n)t[s]=n[s]}return t}function NU(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}function Dw(i){const t=i.getRenderTarget();return t===null?i.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Hn.workingColorSpace}const Nw={clone:Dp,merge:tr};var IU=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,UU=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class il extends Na{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=IU,this.fragmentShader=UU,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Dp(t.uniforms),this.uniformsGroups=NU(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const s in this.uniforms){const u=this.uniforms[s].value;u&&u.isTexture?e.uniforms[s]={type:"t",value:u.toJSON(t).uuid}:u&&u.isColor?e.uniforms[s]={type:"c",value:u.getHex()}:u&&u.isVector2?e.uniforms[s]={type:"v2",value:u.toArray()}:u&&u.isVector3?e.uniforms[s]={type:"v3",value:u.toArray()}:u&&u.isVector4?e.uniforms[s]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?e.uniforms[s]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?e.uniforms[s]={type:"m4",value:u.toArray()}:e.uniforms[s]={value:u}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class SS extends Wn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new tn,this.projectionMatrix=new tn,this.projectionMatrixInverse=new tn,this.coordinateSystem=kr,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const jc=new tt,kM=new Jt,qM=new Jt;class Bs extends SS{constructor(t=50,e=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=wp*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Cf*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return wp*2*Math.atan(Math.tan(Cf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){jc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(jc.x,jc.y).multiplyScalar(-t/jc.z),jc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(jc.x,jc.y).multiplyScalar(-t/jc.z)}getViewSize(t,e){return this.getViewBounds(t,kM,qM),e.subVectors(qM,kM)}setViewOffset(t,e,n,s,r,u){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(Cf*.5*this.fov)/this.zoom,n=2*e,s=this.aspect*n,r=-.5*s;const u=this.view;if(this.view!==null&&this.view.enabled){const d=u.fullWidth,m=u.fullHeight;r+=u.offsetX*s/d,e-=u.offsetY*n/m,s*=u.width/d,n*=u.height/m}const f=this.filmOffset;f!==0&&(r+=t*f/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,e,e-n,t,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Qd=-90,Zd=1;class Iw extends Wn{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Bs(Qd,Zd,t,e);s.layers=this.layers,this.add(s);const r=new Bs(Qd,Zd,t,e);r.layers=this.layers,this.add(r);const u=new Bs(Qd,Zd,t,e);u.layers=this.layers,this.add(u);const f=new Bs(Qd,Zd,t,e);f.layers=this.layers,this.add(f);const d=new Bs(Qd,Zd,t,e);d.layers=this.layers,this.add(d);const m=new Bs(Qd,Zd,t,e);m.layers=this.layers,this.add(m)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,s,r,u,f,d]=e;for(const m of e)this.remove(m);if(t===kr)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),f.up.set(0,1,0),f.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(t===Rp)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),f.up.set(0,-1,0),f.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const m of e)this.add(m),m.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,u,f,d,m,_]=this.children,y=t.getRenderTarget(),S=t.getActiveCubeFace(),T=t.getActiveMipmapLevel(),R=t.xr.enabled;t.xr.enabled=!1;const C=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,s),t.render(e,r),t.setRenderTarget(n,1,s),t.render(e,u),t.setRenderTarget(n,2,s),t.render(e,f),t.setRenderTarget(n,3,s),t.render(e,d),t.setRenderTarget(n,4,s),t.render(e,m),n.texture.generateMipmaps=C,t.setRenderTarget(n,5,s),t.render(e,_),t.setRenderTarget(y,S,T),t.xr.enabled=R,n.texture.needsPMREMUpdate=!0}}class x_ extends Qi{constructor(t=[],e=qu,n,s,r,u,f,d,m,_){super(t,e,n,s,r,u,f,d,m,_),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Uw extends Jl{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},s=[n,n,n,n,n,n];this.texture=new x_(s),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new zf(5,5,5),r=new il({name:"CubemapFromEquirect",uniforms:Dp(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:nr,blending:Fu});r.uniforms.tEquirect.value=e;const u=new ms(s,r),f=e.minFilter;return e.minFilter===ql&&(e.minFilter=bs),new Iw(1,10,this).update(t,u),e.minFilter=f,u.geometry.dispose(),u.material.dispose(),this}clear(t,e=!0,n=!0,s=!0){const r=t.getRenderTarget();for(let u=0;u<6;u++)t.setRenderTarget(this,u),t.clear(e,n,s);t.setRenderTarget(r)}}class gp extends Wn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const OU={type:"move"};class qv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new gp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new gp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new tt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new tt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new gp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new tt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new tt),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let s=null,r=null,u=null;const f=this._targetRay,d=this._grip,m=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(m&&t.hand){u=!0;for(const C of t.hand.values()){const w=e.getJointPose(C,n),M=this._getHandJoint(m,C);w!==null&&(M.matrix.fromArray(w.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=w.radius),M.visible=w!==null}const _=m.joints["index-finger-tip"],y=m.joints["thumb-tip"],S=_.position.distanceTo(y.position),T=.02,R=.005;m.inputState.pinching&&S>T+R?(m.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!m.inputState.pinching&&S<=T-R&&(m.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else d!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),r!==null&&(d.matrix.fromArray(r.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,r.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(r.linearVelocity)):d.hasLinearVelocity=!1,r.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(r.angularVelocity)):d.hasAngularVelocity=!1));f!==null&&(s=e.getPose(t.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(f.matrix.fromArray(s.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,s.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(s.linearVelocity)):f.hasLinearVelocity=!1,s.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(s.angularVelocity)):f.hasAngularVelocity=!1,this.dispatchEvent(OU)))}return f!==null&&(f.visible=s!==null),d!==null&&(d.visible=r!==null),m!==null&&(m.visible=u!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const n=new gp;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class xS{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new Te(t),this.density=e}clone(){return new xS(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class ES{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new Te(t),this.near=e,this.far=n}clone(){return new ES(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class fb extends Wn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Xr,this.environmentIntensity=1,this.environmentRotation=new Xr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class TS{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=t_,this.updateRanges=[],this.version=0,this.uuid=qr()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let s=0,r=this.stride;s<r;s++)this.array[t+s]=e.array[n+s];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qr()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qr()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const $a=new tt;class If{constructor(t,e,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)$a.fromBufferAttribute(this,e),$a.applyMatrix4(t),this.setXYZ(e,$a.x,$a.y,$a.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)$a.fromBufferAttribute(this,e),$a.applyNormalMatrix(t),this.setXYZ(e,$a.x,$a.y,$a.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)$a.fromBufferAttribute(this,e),$a.transformDirection(t),this.setXYZ(e,$a.x,$a.y,$a.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=er(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=gn(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=gn(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=gn(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=gn(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=gn(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=er(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=er(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=er(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=er(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=gn(e,this.array),n=gn(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=gn(e,this.array),n=gn(n,this.array),s=gn(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=s,this}setXYZW(t,e,n,s,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=gn(e,this.array),n=gn(n,this.array),s=gn(s,this.array),r=gn(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=s,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return new pi(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new If(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class db extends Na{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Te(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Jd;const yg=new tt,$d=new tt,tp=new tt,ep=new Jt,vg=new Jt,Ow=new tn,av=new tt,Sg=new tt,rv=new tt,XM=new Jt,cE=new Jt,jM=new Jt;class Lw extends Wn{constructor(t=new db){if(super(),this.isSprite=!0,this.type="Sprite",Jd===void 0){Jd=new _n;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new TS(e,5);Jd.setIndex([0,1,2,0,2,3]),Jd.setAttribute("position",new If(n,3,0,!1)),Jd.setAttribute("uv",new If(n,2,3,!1))}this.geometry=Jd,this.material=t,this.center=new Jt(.5,.5),this.count=1}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),$d.setFromMatrixScale(this.matrixWorld),Ow.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),tp.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&$d.multiplyScalar(-tp.z);const n=this.material.rotation;let s,r;n!==0&&(r=Math.cos(n),s=Math.sin(n));const u=this.center;ov(av.set(-.5,-.5,0),tp,u,$d,s,r),ov(Sg.set(.5,-.5,0),tp,u,$d,s,r),ov(rv.set(.5,.5,0),tp,u,$d,s,r),XM.set(0,0),cE.set(1,0),jM.set(1,1);let f=t.ray.intersectTriangle(av,Sg,rv,!1,yg);if(f===null&&(ov(Sg.set(-.5,.5,0),tp,u,$d,s,r),cE.set(0,1),f=t.ray.intersectTriangle(av,rv,Sg,!1,yg),f===null))return;const d=t.ray.origin.distanceTo(yg);d<t.near||d>t.far||e.push({distance:d,point:yg.clone(),uv:Sr.getInterpolation(yg,av,Sg,rv,XM,cE,jM,new Jt),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function ov(i,t,e,n,s,r){ep.subVectors(i,e).addScalar(.5).multiply(n),s!==void 0?(vg.x=r*ep.x-s*ep.y,vg.y=s*ep.x+r*ep.y):vg.copy(ep),i.copy(t),i.x+=vg.x,i.y+=vg.y,i.applyMatrix4(Ow)}const lv=new tt,YM=new tt;class Pw extends Wn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,s=e.length;n<s;n++){const r=e[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const s=this.levels;let r;for(r=0;r<s.length&&!(e<s[r].distance);r++);return s.splice(r,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let n=0;n<e.length;n++)if(e[n].distance===t){const s=e.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,s;for(n=1,s=e.length;n<s;n++){let r=e[n].distance;if(e[n].object.visible&&(r-=r*e[n].hysteresis),t<r)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){lv.setFromMatrixPosition(this.matrixWorld);const s=t.ray.origin.distanceTo(lv);this.getObjectForDistance(s).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){lv.setFromMatrixPosition(t.matrixWorld),YM.setFromMatrixPosition(this.matrixWorld);const n=lv.distanceTo(YM)/t.zoom;e[0].object.visible=!0;let s,r;for(s=1,r=e.length;s<r;s++){let u=e[s].distance;if(e[s].object.visible&&(u-=u*e[s].hysteresis),n>=u)e[s-1].object.visible=!1,e[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)e[s].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let s=0,r=n.length;s<r;s++){const u=n[s];e.object.levels.push({object:u.object.uuid,distance:u.distance,hysteresis:u.hysteresis})}return e}}const WM=new tt,KM=new Yn,QM=new Yn,LU=new tt,ZM=new tn,uv=new tt,hE=new ia,JM=new tn,fE=new qp;class zw extends ms{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=cT,this.bindMatrix=new tn,this.bindMatrixInverse=new tn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Da),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,uv),this.boundingBox.expandByPoint(uv)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ia),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,uv),this.boundingSphere.expandByPoint(uv)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),hE.copy(this.boundingSphere),hE.applyMatrix4(s),t.ray.intersectsSphere(hE)!==!1&&(JM.copy(s).invert(),fE.copy(t.ray).applyMatrix4(JM),!(this.boundingBox!==null&&fE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,fE)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Yn,e=this.geometry.attributes.skinWeight;for(let n=0,s=e.count;n<s;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===cT?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===fw?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,s=this.geometry;KM.fromBufferAttribute(s.attributes.skinIndex,t),QM.fromBufferAttribute(s.attributes.skinWeight,t),WM.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const u=QM.getComponent(r);if(u!==0){const f=KM.getComponent(r);ZM.multiplyMatrices(n.bones[f].matrixWorld,n.boneInverses[f]),e.addScaledVector(LU.copy(WM).applyMatrix4(ZM),u)}}return e.applyMatrix4(this.bindMatrixInverse)}}class pb extends Wn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Yl extends Qi{constructor(t=null,e=1,n=1,s,r,u,f,d,m=na,_=na,y,S){super(null,u,f,d,m,_,s,r,y,S),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const $M=new tn,PU=new tn;class bS{constructor(t=[],e=[]){this.uuid=qr(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new tn)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new tn;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let r=0,u=t.length;r<u;r++){const f=t[r]?t[r].matrixWorld:PU;$M.multiplyMatrices(f,e[r]),$M.toArray(n,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new bS(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Yl(e,t,t,Ca,xr);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const s=this.bones[e];if(s.name===t)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,s=t.bones.length;n<s;n++){const r=t.bones[n];let u=e[r];u===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),u=new pb),this.bones.push(u),this.boneInverses.push(new tn().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let s=0,r=e.length;s<r;s++){const u=e[s];t.bones.push(u.uuid);const f=n[s];t.boneInverses.push(f.toArray())}return t}}class Np extends pi{constructor(t,e,n,s=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const np=new tn,tA=new tn,cv=[],eA=new Da,zU=new tn,xg=new ms,Eg=new ia;class Vw extends ms{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Np(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,zU)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Da),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,np),eA.copy(t.boundingBox).applyMatrix4(np),this.boundingBox.union(eA)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new ia),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,np),Eg.copy(t.boundingSphere).applyMatrix4(np),this.boundingSphere.union(Eg)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const n=e.morphTargetInfluences,s=this.morphTexture.source.data.data,r=n.length+1,u=t*r+1;for(let f=0;f<n.length;f++)n[f]=s[u+f]}raycast(t,e){const n=this.matrixWorld,s=this.count;if(xg.geometry=this.geometry,xg.material=this.material,xg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Eg.copy(this.boundingSphere),Eg.applyMatrix4(n),t.ray.intersectsSphere(Eg)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,np),tA.multiplyMatrices(n,np),xg.matrixWorld=tA,xg.raycast(t,cv);for(let u=0,f=cv.length;u<f;u++){const d=cv[u];d.instanceId=r,d.object=this,e.push(d)}cv.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Np(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const n=e.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new Yl(new Float32Array(s*this.count),s,this.count,pS,xr));const r=this.morphTexture.source.data.data;let u=0;for(let m=0;m<n.length;m++)u+=n[m];const f=this.geometry.morphTargetsRelative?1:1-u,d=s*t;r[d]=f,r.set(n,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const dE=new tt,VU=new tt,BU=new pn;class Wc{constructor(t=new tt(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,s){return this.normal.set(t,e,n),this.constant=s,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const s=dE.subVectors(n,e).cross(VU.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(dE),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||BU.getNormalMatrix(t),s=this.coplanarPoint(dE).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const uf=new ia,FU=new Jt(.5,.5),hv=new tt;class Xp{constructor(t=new Wc,e=new Wc,n=new Wc,s=new Wc,r=new Wc,u=new Wc){this.planes=[t,e,n,s,r,u]}set(t,e,n,s,r,u){const f=this.planes;return f[0].copy(t),f[1].copy(e),f[2].copy(n),f[3].copy(s),f[4].copy(r),f[5].copy(u),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=kr,n=!1){const s=this.planes,r=t.elements,u=r[0],f=r[1],d=r[2],m=r[3],_=r[4],y=r[5],S=r[6],T=r[7],R=r[8],C=r[9],w=r[10],M=r[11],O=r[12],z=r[13],V=r[14],j=r[15];if(s[0].setComponents(m-u,T-_,M-R,j-O).normalize(),s[1].setComponents(m+u,T+_,M+R,j+O).normalize(),s[2].setComponents(m+f,T+y,M+C,j+z).normalize(),s[3].setComponents(m-f,T-y,M-C,j-z).normalize(),n)s[4].setComponents(d,S,w,V).normalize(),s[5].setComponents(m-d,T-S,M-w,j-V).normalize();else if(s[4].setComponents(m-d,T-S,M-w,j-V).normalize(),e===kr)s[5].setComponents(m+d,T+S,M+w,j+V).normalize();else if(e===Rp)s[5].setComponents(d,S,w,V).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),uf.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),uf.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(uf)}intersectsSprite(t){uf.center.set(0,0,0);const e=FU.distanceTo(t.center);return uf.radius=.7071067811865476+e,uf.applyMatrix4(t.matrixWorld),this.intersectsSphere(uf)}intersectsSphere(t){const e=this.planes,n=t.center,s=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const s=e[n];if(hv.x=s.normal.x>0?t.max.x:t.min.x,hv.y=s.normal.y>0?t.max.y:t.min.y,hv.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(hv)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Fl=new tn,Hl=new Xp;class MS{constructor(){this.coordinateSystem=kr}intersectsObject(t,e){if(!e.isArrayCamera||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(Fl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Hl.setFromProjectionMatrix(Fl,s.coordinateSystem,s.reversedDepth),Hl.intersectsObject(t))return!0}return!1}intersectsSprite(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(Fl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Hl.setFromProjectionMatrix(Fl,s.coordinateSystem,s.reversedDepth),Hl.intersectsSprite(t))return!0}return!1}intersectsSphere(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(Fl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Hl.setFromProjectionMatrix(Fl,s.coordinateSystem,s.reversedDepth),Hl.intersectsSphere(t))return!0}return!1}intersectsBox(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(Fl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Hl.setFromProjectionMatrix(Fl,s.coordinateSystem,s.reversedDepth),Hl.intersectsBox(t))return!0}return!1}containsPoint(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(Fl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Hl.setFromProjectionMatrix(Fl,s.coordinateSystem,s.reversedDepth),Hl.containsPoint(t))return!0}return!1}clone(){return new MS}}function pE(i,t){return i-t}function HU(i,t){return i.z-t.z}function GU(i,t){return t.z-i.z}class kU{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,n,s){const r=this.pool,u=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const f=r[this.index];u.push(f),this.index++,f.start=t,f.count=e,f.z=n,f.index=s}reset(){this.list.length=0,this.index=0}}const gr=new tn,qU=new Te(1,1,1),nA=new Xp,XU=new MS,fv=new Da,cf=new ia,Tg=new tt,iA=new tt,jU=new tt,mE=new kU,ba=new ms,dv=[];function YU(i,t,e=0){const n=t.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==t.array.constructor){const s=i.count;for(let r=0;r<s;r++)for(let u=0;u<n;u++)t.setComponent(r+e,u,i.getComponent(r,u))}else t.array.set(i.array,e*n);t.needsUpdate=!0}function hf(i,t){if(i.constructor!==t.constructor){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++)t[n]=i[n]}else{const e=Math.min(i.length,t.length);t.set(new i.constructor(i.buffer,0,e))}}class Bw extends ms{constructor(t,e,n=e*2,s){super(new _n,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new Yl(e,t,t,Ca,xr);this._matricesTexture=n}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),n=new Yl(e,t,t,S_,Xu);this._indirectTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new Yl(e,t,t,Ca,xr);n.colorSpace=Hn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in t.attributes){const u=t.getAttribute(r),{array:f,itemSize:d,normalized:m}=u,_=new f.constructor(n*d),y=new pi(_,d,m);e.setAttribute(r,y)}if(t.getIndex()!==null){const r=n>65535?new Uint32Array(s):new Uint16Array(s);e.setIndex(new pi(r,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(!t.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=t.getAttribute(n),r=e.getAttribute(n);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Da);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let n=0,s=e.length;n<s;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,gr),this.getBoundingBoxAt(r,fv).applyMatrix4(gr),t.union(fv)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ia);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let n=0,s=e.length;n<s;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,gr),this.getBoundingSphereAt(r,cf).applyMatrix4(gr),t.union(cf)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:t};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(pE),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;gr.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const u=this._colorsTexture;return u&&(qU.toArray(u.image.data,s*4),u.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(t,e=-1,n=-1){this._initializeGeometry(t),this._validateGeometry(t);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const u=t.getIndex();if(u!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?u.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(pE),d=this._availableGeometryIds.shift(),r[d]=s):(d=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(d,t),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,d}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,s=n.getIndex()!==null,r=n.getIndex(),u=e.getIndex(),f=this._geometryInfo[t];if(s&&u.count>f.reservedIndexCount||e.attributes.position.count>f.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=f.vertexStart,m=f.reservedVertexCount;f.vertexCount=e.getAttribute("position").count;for(const _ in n.attributes){const y=e.getAttribute(_),S=n.getAttribute(_);YU(y,S,d);const T=y.itemSize;for(let R=y.count,C=m;R<C;R++){const w=d+R;for(let M=0;M<T;M++)S.setComponent(w,M,0)}S.needsUpdate=!0,S.addUpdateRange(d*T,m*T)}if(s){const _=f.indexStart,y=f.reservedIndexCount;f.indexCount=e.getIndex().count;for(let S=0;S<u.count;S++)r.setX(_+S,d+u.getX(S));for(let S=u.count,T=y;S<T;S++)r.setX(_+S,d);r.needsUpdate=!0,r.addUpdateRange(_,f.reservedIndexCount)}return f.start=s?f.indexStart:f.vertexStart,f.count=s?f.indexCount:f.vertexCount,f.boundingBox=null,e.boundingBox!==null&&(f.boundingBox=e.boundingBox.clone()),f.boundingSphere=null,e.boundingSphere!==null&&(f.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const n=this._instanceInfo;for(let s=0,r=n.length;s<r;s++)n[s].active&&n[s].geometryIndex===t&&this.deleteInstance(s);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const n=this._geometryInfo,s=n.map((u,f)=>f).sort((u,f)=>n[u].vertexStart-n[f].vertexStart),r=this.geometry;for(let u=0,f=n.length;u<f;u++){const d=s[u],m=n[d];if(m.active!==!1){if(r.index!==null){if(m.indexStart!==e){const{indexStart:_,vertexStart:y,reservedIndexCount:S}=m,T=r.index,R=T.array,C=t-y;for(let w=_;w<_+S;w++)R[w]=R[w]+C;T.array.copyWithin(e,_,_+S),T.addUpdateRange(e,S),m.indexStart=e}e+=m.reservedIndexCount}if(m.vertexStart!==t){const{vertexStart:_,reservedVertexCount:y}=m,S=r.attributes;for(const T in S){const R=S[T],{array:C,itemSize:w}=R;C.copyWithin(t*w,_*w,(_+y)*w),R.addUpdateRange(t*w,y*w)}m.vertexStart=t}t+=m.reservedVertexCount,m.start=r.index?m.indexStart:m.vertexStart,this._nextIndexStart=r.index?m.indexStart+m.reservedIndexCount:0,this._nextVertexStart=m.vertexStart+m.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[t];if(s.boundingBox===null){const r=new Da,u=n.index,f=n.attributes.position;for(let d=s.start,m=s.start+s.count;d<m;d++){let _=d;u&&(_=u.getX(_)),r.expandByPoint(Tg.fromBufferAttribute(f,_))}s.boundingBox=r}return e.copy(s.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[t];if(s.boundingSphere===null){const r=new ia;this.getBoundingBoxAt(t,fv),fv.getCenter(r.center);const u=n.index,f=n.attributes.position;let d=0;for(let m=s.start,_=s.start+s.count;m<_;m++){let y=m;u&&(y=u.getX(y)),Tg.fromBufferAttribute(f,y),d=Math.max(d,r.center.distanceToSquared(Tg))}r.radius=Math.sqrt(d),s.boundingSphere=r}return e.copy(s.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const n=this._matricesTexture,s=this._matricesTexture.image.data;return e.toArray(s,t*16),n.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}setInstanceCount(t){const e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(pE);e[e.length-1]===n.length-1;)n.pop(),e.pop();if(t<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const s=new Int32Array(t),r=new Int32Array(t);hf(this._multiDrawCounts,s),hf(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=t;const u=this._indirectTexture,f=this._matricesTexture,d=this._colorsTexture;u.dispose(),this._initIndirectTexture(),hf(u.image.data,this._indirectTexture.image.data),f.dispose(),this._initMatricesTexture(),hf(f.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),hf(d.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const n=[...this._geometryInfo].filter(f=>f.active);if(Math.max(...n.map(f=>f.vertexStart+f.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(d=>d.indexStart+d.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new _n,this._initializeGeometry(r));const u=this.geometry;r.index&&hf(r.index.array,u.index.array);for(const f in r.attributes)hf(r.attributes[f].array,u.attributes[f].array)}raycast(t,e){const n=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,u=this.geometry;ba.material=this.material,ba.geometry.index=u.index,ba.geometry.attributes=u.attributes,ba.geometry.boundingBox===null&&(ba.geometry.boundingBox=new Da),ba.geometry.boundingSphere===null&&(ba.geometry.boundingSphere=new ia);for(let f=0,d=n.length;f<d;f++){if(!n[f].visible||!n[f].active)continue;const m=n[f].geometryIndex,_=s[m];ba.geometry.setDrawRange(_.start,_.count),this.getMatrixAt(f,ba.matrixWorld).premultiply(r),this.getBoundingBoxAt(m,ba.geometry.boundingBox),this.getBoundingSphereAt(m,ba.geometry.boundingSphere),ba.raycast(t,dv);for(let y=0,S=dv.length;y<S;y++){const T=dv[y];T.object=this,T.batchId=f,e.push(T)}dv.length=0}ba.material=null,ba.geometry.index=null,ba.geometry.attributes={},ba.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._availableInstanceIds=t._availableInstanceIds.slice(),this._availableGeometryIds=t._availableGeometryIds.slice(),this._nextIndexStart=t._nextIndexStart,this._nextVertexStart=t._nextVertexStart,this._geometryCount=t._geometryCount,this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._indirectTexture=t._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,n,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const u=s.getIndex(),f=u===null?1:u.array.BYTES_PER_ELEMENT,d=this._instanceInfo,m=this._multiDrawStarts,_=this._multiDrawCounts,y=this._geometryInfo,S=this.perObjectFrustumCulled,T=this._indirectTexture,R=T.image.data,C=n.isArrayCamera?XU:nA;S&&!n.isArrayCamera&&(gr.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),nA.setFromProjectionMatrix(gr,n.coordinateSystem,n.reversedDepth));let w=0;if(this.sortObjects){gr.copy(this.matrixWorld).invert(),Tg.setFromMatrixPosition(n.matrixWorld).applyMatrix4(gr),iA.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(gr);for(let z=0,V=d.length;z<V;z++)if(d[z].visible&&d[z].active){const j=d[z].geometryIndex;this.getMatrixAt(z,gr),this.getBoundingSphereAt(j,cf).applyMatrix4(gr);let q=!1;if(S&&(q=!C.intersectsSphere(cf,n)),!q){const L=y[j],P=jU.subVectors(cf.center,Tg).dot(iA);mE.push(L.start,L.count,P,z)}}const M=mE.list,O=this.customSort;O===null?M.sort(r.transparent?GU:HU):O.call(this,M,n);for(let z=0,V=M.length;z<V;z++){const j=M[z];m[w]=j.start*f,_[w]=j.count,R[w]=j.index,w++}mE.reset()}else for(let M=0,O=d.length;M<O;M++)if(d[M].visible&&d[M].active){const z=d[M].geometryIndex;let V=!1;if(S&&(this.getMatrixAt(M,gr),this.getBoundingSphereAt(z,cf).applyMatrix4(gr),V=!C.intersectsSphere(cf,n)),!V){const j=y[z];m[w]=j.start*f,_[w]=j.count,R[w]=M,w++}}T.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(t,e,n,s,r,u){this.onBeforeRender(t,null,s,r,u)}}class ir extends Na{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Te(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const z0=new tt,V0=new tt,sA=new tn,bg=new qp,pv=new ia,gE=new tt,aA=new tt;class rh extends Wn{constructor(t=new _n,e=new ir){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[0];for(let s=1,r=e.count;s<r;s++)z0.fromBufferAttribute(e,s-1),V0.fromBufferAttribute(e,s),n[s]=n[s-1],n[s]+=z0.distanceTo(V0);t.setAttribute("lineDistance",new Ue(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,s=this.matrixWorld,r=t.params.Line.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),pv.copy(n.boundingSphere),pv.applyMatrix4(s),pv.radius+=r,t.ray.intersectsSphere(pv)===!1)return;sA.copy(s).invert(),bg.copy(t.ray).applyMatrix4(sA);const f=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=f*f,m=this.isLineSegments?2:1,_=n.index,S=n.attributes.position;if(_!==null){const T=Math.max(0,u.start),R=Math.min(_.count,u.start+u.count);for(let C=T,w=R-1;C<w;C+=m){const M=_.getX(C),O=_.getX(C+1),z=mv(this,t,bg,d,M,O,C);z&&e.push(z)}if(this.isLineLoop){const C=_.getX(R-1),w=_.getX(T),M=mv(this,t,bg,d,C,w,R-1);M&&e.push(M)}}else{const T=Math.max(0,u.start),R=Math.min(S.count,u.start+u.count);for(let C=T,w=R-1;C<w;C+=m){const M=mv(this,t,bg,d,C,C+1,C);M&&e.push(M)}if(this.isLineLoop){const C=mv(this,t,bg,d,R-1,T,R-1);C&&e.push(C)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,u=s.length;r<u;r++){const f=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=r}}}}}function mv(i,t,e,n,s,r,u){const f=i.geometry.attributes.position;if(z0.fromBufferAttribute(f,s),V0.fromBufferAttribute(f,r),e.distanceSqToSegment(z0,V0,gE,aA)>n)return;gE.applyMatrix4(i.matrixWorld);const m=t.ray.origin.distanceTo(gE);if(!(m<t.near||m>t.far))return{distance:m,point:aA.clone().applyMatrix4(i.matrixWorld),index:u,face:null,faceIndex:null,barycoord:null,object:i}}const rA=new tt,oA=new tt;class eu extends rh{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[];for(let s=0,r=e.count;s<r;s+=2)rA.fromBufferAttribute(e,s),oA.fromBufferAttribute(e,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+rA.distanceTo(oA);t.setAttribute("lineDistance",new Ue(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Fw extends rh{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class mb extends Na{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Te(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const lA=new tn,dT=new qp,gv=new ia,_v=new tt;class Hw extends Wn{constructor(t=new _n,e=new mb){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,s=this.matrixWorld,r=t.params.Points.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),gv.copy(n.boundingSphere),gv.applyMatrix4(s),gv.radius+=r,t.ray.intersectsSphere(gv)===!1)return;lA.copy(s).invert(),dT.copy(t.ray).applyMatrix4(lA);const f=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=f*f,m=n.index,y=n.attributes.position;if(m!==null){const S=Math.max(0,u.start),T=Math.min(m.count,u.start+u.count);for(let R=S,C=T;R<C;R++){const w=m.getX(R);_v.fromBufferAttribute(y,w),uA(_v,w,d,s,t,e,this)}}else{const S=Math.max(0,u.start),T=Math.min(y.count,u.start+u.count);for(let R=S,C=T;R<C;R++)_v.fromBufferAttribute(y,R),uA(_v,R,d,s,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,u=s.length;r<u;r++){const f=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=r}}}}}function uA(i,t,e,n,s,r,u){const f=dT.distanceSqToPoint(i);if(f<e){const d=new tt;dT.closestPointToPoint(i,d),d.applyMatrix4(n);const m=s.ray.origin.distanceTo(d);if(m<s.near||m>s.far)return;r.push({distance:m,distanceToRay:Math.sqrt(f),point:d,index:t,face:null,faceIndex:null,barycoord:null,object:u})}}class Gw extends Qi{constructor(t,e,n,s,r=bs,u=bs,f,d,m){super(t,e,n,s,r,u,f,d,m),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const _=this;function y(){_.needsUpdate=!0,_._requestVideoFrameCallbackId=t.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in t&&(this._requestVideoFrameCallbackId=t.requestVideoFrameCallback(y))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class WU extends Gw{constructor(t,e,n,s,r,u,f,d){super({},t,e,n,s,r,u,f,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class KU extends Qi{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=na,this.minFilter=na,this.generateMipmaps=!1,this.needsUpdate=!0}}class AS extends Qi{constructor(t,e,n,s,r,u,f,d,m,_,y,S){super(null,u,f,d,m,_,s,r,y,S),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class QU extends AS{constructor(t,e,n,s,r,u){super(t,e,n,r,u),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=So,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class ZU extends AS{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,qu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class JU extends Qi{constructor(t,e,n,s,r,u,f,d,m){super(t,e,n,s,r,u,f,d,m),this.isCanvasTexture=!0,this.needsUpdate=!0}}class gb extends Qi{constructor(t,e,n=Xu,s,r,u,f=na,d=na,m,_=Mp,y=1){if(_!==Mp&&_!==Ap)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const S={width:t,height:e,depth:y};super(S,s,r,u,f,d,_,n,m),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Zc(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class _b extends Qi{constructor(t=null){super(),this.sourceTexture=t,this.isExternalTexture=!0}copy(t){return super.copy(t),this.sourceTexture=t.sourceTexture,this}}class RS extends _n{constructor(t=1,e=1,n=4,s=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:s,heightSegments:r},e=Math.max(0,e),n=Math.max(1,Math.floor(n)),s=Math.max(3,Math.floor(s)),r=Math.max(1,Math.floor(r));const u=[],f=[],d=[],m=[],_=e/2,y=Math.PI/2*t,S=e,T=2*y+S,R=n*2+r,C=s+1,w=new tt,M=new tt;for(let O=0;O<=R;O++){let z=0,V=0,j=0,q=0;if(O<=n){const D=O/n,U=D*Math.PI/2;V=-_-t*Math.cos(U),j=t*Math.sin(U),q=-t*Math.cos(U),z=D*y}else if(O<=n+r){const D=(O-n)/r;V=-_+D*e,j=t,q=0,z=y+D*S}else{const D=(O-n-r)/n,U=D*Math.PI/2;V=_+t*Math.sin(U),j=t*Math.cos(U),q=t*Math.sin(U),z=y+S+D*y}const L=Math.max(0,Math.min(1,z/T));let P=0;O===0?P=.5/s:O===R&&(P=-.5/s);for(let D=0;D<=s;D++){const U=D/s,F=U*Math.PI*2,Y=Math.sin(F),G=Math.cos(F);M.x=-j*G,M.y=V,M.z=j*Y,f.push(M.x,M.y,M.z),w.set(-j*G,q,j*Y),w.normalize(),d.push(w.x,w.y,w.z),m.push(U+P,L)}if(O>0){const D=(O-1)*C;for(let U=0;U<s;U++){const F=D+U,Y=D+U+1,G=O*C+U,gt=O*C+U+1;u.push(F,Y,G),u.push(Y,gt,G)}}}this.setIndex(u),this.setAttribute("position",new Ue(f,3)),this.setAttribute("normal",new Ue(d,3)),this.setAttribute("uv",new Ue(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new RS(t.radius,t.height,t.capSegments,t.radialSegments,t.heightSegments)}}class wS extends _n{constructor(t=1,e=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:s},e=Math.max(3,e);const r=[],u=[],f=[],d=[],m=new tt,_=new Jt;u.push(0,0,0),f.push(0,0,1),d.push(.5,.5);for(let y=0,S=3;y<=e;y++,S+=3){const T=n+y/e*s;m.x=t*Math.cos(T),m.y=t*Math.sin(T),u.push(m.x,m.y,m.z),f.push(0,0,1),_.x=(u[S]/t+1)/2,_.y=(u[S+1]/t+1)/2,d.push(_.x,_.y)}for(let y=1;y<=e;y++)r.push(y,y+1,0);this.setIndex(r),this.setAttribute("position",new Ue(u,3)),this.setAttribute("normal",new Ue(f,3)),this.setAttribute("uv",new Ue(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new wS(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class E_ extends _n{constructor(t=1,e=1,n=1,s=32,r=1,u=!1,f=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:s,heightSegments:r,openEnded:u,thetaStart:f,thetaLength:d};const m=this;s=Math.floor(s),r=Math.floor(r);const _=[],y=[],S=[],T=[];let R=0;const C=[],w=n/2;let M=0;O(),u===!1&&(t>0&&z(!0),e>0&&z(!1)),this.setIndex(_),this.setAttribute("position",new Ue(y,3)),this.setAttribute("normal",new Ue(S,3)),this.setAttribute("uv",new Ue(T,2));function O(){const V=new tt,j=new tt;let q=0;const L=(e-t)/n;for(let P=0;P<=r;P++){const D=[],U=P/r,F=U*(e-t)+t;for(let Y=0;Y<=s;Y++){const G=Y/s,gt=G*d+f,vt=Math.sin(gt),k=Math.cos(gt);j.x=F*vt,j.y=-U*n+w,j.z=F*k,y.push(j.x,j.y,j.z),V.set(vt,L,k).normalize(),S.push(V.x,V.y,V.z),T.push(G,1-U),D.push(R++)}C.push(D)}for(let P=0;P<s;P++)for(let D=0;D<r;D++){const U=C[D][P],F=C[D+1][P],Y=C[D+1][P+1],G=C[D][P+1];(t>0||D!==0)&&(_.push(U,F,G),q+=3),(e>0||D!==r-1)&&(_.push(F,Y,G),q+=3)}m.addGroup(M,q,0),M+=q}function z(V){const j=R,q=new Jt,L=new tt;let P=0;const D=V===!0?t:e,U=V===!0?1:-1;for(let Y=1;Y<=s;Y++)y.push(0,w*U,0),S.push(0,U,0),T.push(.5,.5),R++;const F=R;for(let Y=0;Y<=s;Y++){const gt=Y/s*d+f,vt=Math.cos(gt),k=Math.sin(gt);L.x=D*k,L.y=w*U,L.z=D*vt,y.push(L.x,L.y,L.z),S.push(0,U,0),q.x=vt*.5+.5,q.y=k*.5*U+.5,T.push(q.x,q.y),R++}for(let Y=0;Y<s;Y++){const G=j+Y,gt=F+Y;V===!0?_.push(gt,gt+1,G):_.push(gt+1,gt,G),P+=3}m.addGroup(M,P,V===!0?1:2),M+=P}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new E_(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class T_ extends E_{constructor(t=1,e=1,n=32,s=1,r=!1,u=0,f=Math.PI*2){super(0,t,e,n,s,r,u,f),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:u,thetaLength:f}}static fromJSON(t){return new T_(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class mh extends _n{constructor(t=[],e=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:s};const r=[],u=[];f(s),m(n),_(),this.setAttribute("position",new Ue(r,3)),this.setAttribute("normal",new Ue(r.slice(),3)),this.setAttribute("uv",new Ue(u,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function f(O){const z=new tt,V=new tt,j=new tt;for(let q=0;q<e.length;q+=3)T(e[q+0],z),T(e[q+1],V),T(e[q+2],j),d(z,V,j,O)}function d(O,z,V,j){const q=j+1,L=[];for(let P=0;P<=q;P++){L[P]=[];const D=O.clone().lerp(V,P/q),U=z.clone().lerp(V,P/q),F=q-P;for(let Y=0;Y<=F;Y++)Y===0&&P===q?L[P][Y]=D:L[P][Y]=D.clone().lerp(U,Y/F)}for(let P=0;P<q;P++)for(let D=0;D<2*(q-P)-1;D++){const U=Math.floor(D/2);D%2===0?(S(L[P][U+1]),S(L[P+1][U]),S(L[P][U])):(S(L[P][U+1]),S(L[P+1][U+1]),S(L[P+1][U]))}}function m(O){const z=new tt;for(let V=0;V<r.length;V+=3)z.x=r[V+0],z.y=r[V+1],z.z=r[V+2],z.normalize().multiplyScalar(O),r[V+0]=z.x,r[V+1]=z.y,r[V+2]=z.z}function _(){const O=new tt;for(let z=0;z<r.length;z+=3){O.x=r[z+0],O.y=r[z+1],O.z=r[z+2];const V=w(O)/2/Math.PI+.5,j=M(O)/Math.PI+.5;u.push(V,1-j)}R(),y()}function y(){for(let O=0;O<u.length;O+=6){const z=u[O+0],V=u[O+2],j=u[O+4],q=Math.max(z,V,j),L=Math.min(z,V,j);q>.9&&L<.1&&(z<.2&&(u[O+0]+=1),V<.2&&(u[O+2]+=1),j<.2&&(u[O+4]+=1))}}function S(O){r.push(O.x,O.y,O.z)}function T(O,z){const V=O*3;z.x=t[V+0],z.y=t[V+1],z.z=t[V+2]}function R(){const O=new tt,z=new tt,V=new tt,j=new tt,q=new Jt,L=new Jt,P=new Jt;for(let D=0,U=0;D<r.length;D+=9,U+=6){O.set(r[D+0],r[D+1],r[D+2]),z.set(r[D+3],r[D+4],r[D+5]),V.set(r[D+6],r[D+7],r[D+8]),q.set(u[U+0],u[U+1]),L.set(u[U+2],u[U+3]),P.set(u[U+4],u[U+5]),j.copy(O).add(z).add(V).divideScalar(3);const F=w(j);C(q,U+0,O,F),C(L,U+2,z,F),C(P,U+4,V,F)}}function C(O,z,V,j){j<0&&O.x===1&&(u[z]=O.x-1),V.x===0&&V.z===0&&(u[z]=j/2/Math.PI+.5)}function w(O){return Math.atan2(O.z,-O.x)}function M(O){return Math.atan2(-O.y,Math.sqrt(O.x*O.x+O.z*O.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new mh(t.vertices,t.indices,t.radius,t.details)}}class CS extends mh{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,s=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,u,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new CS(t.radius,t.detail)}}const yv=new tt,vv=new tt,_E=new tt,Sv=new Sr;class kw extends _n{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const s=Math.pow(10,4),r=Math.cos(Cf*e),u=t.getIndex(),f=t.getAttribute("position"),d=u?u.count:f.count,m=[0,0,0],_=["a","b","c"],y=new Array(3),S={},T=[];for(let R=0;R<d;R+=3){u?(m[0]=u.getX(R),m[1]=u.getX(R+1),m[2]=u.getX(R+2)):(m[0]=R,m[1]=R+1,m[2]=R+2);const{a:C,b:w,c:M}=Sv;if(C.fromBufferAttribute(f,m[0]),w.fromBufferAttribute(f,m[1]),M.fromBufferAttribute(f,m[2]),Sv.getNormal(_E),y[0]=`${Math.round(C.x*s)},${Math.round(C.y*s)},${Math.round(C.z*s)}`,y[1]=`${Math.round(w.x*s)},${Math.round(w.y*s)},${Math.round(w.z*s)}`,y[2]=`${Math.round(M.x*s)},${Math.round(M.y*s)},${Math.round(M.z*s)}`,!(y[0]===y[1]||y[1]===y[2]||y[2]===y[0]))for(let O=0;O<3;O++){const z=(O+1)%3,V=y[O],j=y[z],q=Sv[_[O]],L=Sv[_[z]],P=`${V}_${j}`,D=`${j}_${V}`;D in S&&S[D]?(_E.dot(S[D].normal)<=r&&(T.push(q.x,q.y,q.z),T.push(L.x,L.y,L.z)),S[D]=null):P in S||(S[P]={index0:m[O],index1:m[z],normal:_E.clone()})}}for(const R in S)if(S[R]){const{index0:C,index1:w}=S[R];yv.fromBufferAttribute(f,C),vv.fromBufferAttribute(f,w),T.push(yv.x,yv.y,yv.z),T.push(vv.x,vv.y,vv.z)}this.setAttribute("position",new Ue(T,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class al{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,s=this.getPoint(0),r=0;e.push(0);for(let u=1;u<=t;u++)n=this.getPoint(u/t),r+=n.distanceTo(s),e.push(r),s=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const n=this.getLengths();let s=0;const r=n.length;let u;e?u=e:u=t*n[r-1];let f=0,d=r-1,m;for(;f<=d;)if(s=Math.floor(f+(d-f)/2),m=n[s]-u,m<0)f=s+1;else if(m>0)d=s-1;else{d=s;break}if(s=d,n[s]===u)return s/(r-1);const _=n[s],S=n[s+1]-_,T=(u-_)/S;return(s+T)/(r-1)}getTangent(t,e){let s=t-1e-4,r=t+1e-4;s<0&&(s=0),r>1&&(r=1);const u=this.getPoint(s),f=this.getPoint(r),d=e||(u.isVector2?new Jt:new tt);return d.copy(f).sub(u).normalize(),d}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e=!1){const n=new tt,s=[],r=[],u=[],f=new tt,d=new tn;for(let T=0;T<=t;T++){const R=T/t;s[T]=this.getTangentAt(R,new tt)}r[0]=new tt,u[0]=new tt;let m=Number.MAX_VALUE;const _=Math.abs(s[0].x),y=Math.abs(s[0].y),S=Math.abs(s[0].z);_<=m&&(m=_,n.set(1,0,0)),y<=m&&(m=y,n.set(0,1,0)),S<=m&&n.set(0,0,1),f.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],f),u[0].crossVectors(s[0],r[0]);for(let T=1;T<=t;T++){if(r[T]=r[T-1].clone(),u[T]=u[T-1].clone(),f.crossVectors(s[T-1],s[T]),f.length()>Number.EPSILON){f.normalize();const R=Math.acos(Je(s[T-1].dot(s[T]),-1,1));r[T].applyMatrix4(d.makeRotationAxis(f,R))}u[T].crossVectors(s[T],r[T])}if(e===!0){let T=Math.acos(Je(r[0].dot(r[t]),-1,1));T/=t,s[0].dot(f.crossVectors(r[0],r[t]))>0&&(T=-T);for(let R=1;R<=t;R++)r[R].applyMatrix4(d.makeRotationAxis(s[R],T*R)),u[R].crossVectors(s[R],r[R])}return{tangents:s,normals:r,binormals:u}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class DS extends al{constructor(t=0,e=0,n=1,s=1,r=0,u=Math.PI*2,f=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=u,this.aClockwise=f,this.aRotation=d}getPoint(t,e=new Jt){const n=e,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const u=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(u?r=0:r=s),this.aClockwise===!0&&!u&&(r===s?r=-s:r=r-s);const f=this.aStartAngle+t*r;let d=this.aX+this.xRadius*Math.cos(f),m=this.aY+this.yRadius*Math.sin(f);if(this.aRotation!==0){const _=Math.cos(this.aRotation),y=Math.sin(this.aRotation),S=d-this.aX,T=m-this.aY;d=S*_-T*y+this.aX,m=S*y+T*_+this.aY}return n.set(d,m)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class qw extends DS{constructor(t,e,n,s,r,u){super(t,e,n,n,s,r,u),this.isArcCurve=!0,this.type="ArcCurve"}}function yb(){let i=0,t=0,e=0,n=0;function s(r,u,f,d){i=r,t=f,e=-3*r+3*u-2*f-d,n=2*r-2*u+f+d}return{initCatmullRom:function(r,u,f,d,m){s(u,f,m*(f-r),m*(d-u))},initNonuniformCatmullRom:function(r,u,f,d,m,_,y){let S=(u-r)/m-(f-r)/(m+_)+(f-u)/_,T=(f-u)/_-(d-u)/(_+y)+(d-f)/y;S*=_,T*=_,s(u,f,S,T)},calc:function(r){const u=r*r,f=u*r;return i+t*r+e*u+n*f}}}const xv=new tt,yE=new yb,vE=new yb,SE=new yb;class Xw extends al{constructor(t=[],e=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=s}getPoint(t,e=new tt){const n=e,s=this.points,r=s.length,u=(r-(this.closed?0:1))*t;let f=Math.floor(u),d=u-f;this.closed?f+=f>0?0:(Math.floor(Math.abs(f)/r)+1)*r:d===0&&f===r-1&&(f=r-2,d=1);let m,_;this.closed||f>0?m=s[(f-1)%r]:(xv.subVectors(s[0],s[1]).add(s[0]),m=xv);const y=s[f%r],S=s[(f+1)%r];if(this.closed||f+2<r?_=s[(f+2)%r]:(xv.subVectors(s[r-1],s[r-2]).add(s[r-1]),_=xv),this.curveType==="centripetal"||this.curveType==="chordal"){const T=this.curveType==="chordal"?.5:.25;let R=Math.pow(m.distanceToSquared(y),T),C=Math.pow(y.distanceToSquared(S),T),w=Math.pow(S.distanceToSquared(_),T);C<1e-4&&(C=1),R<1e-4&&(R=C),w<1e-4&&(w=C),yE.initNonuniformCatmullRom(m.x,y.x,S.x,_.x,R,C,w),vE.initNonuniformCatmullRom(m.y,y.y,S.y,_.y,R,C,w),SE.initNonuniformCatmullRom(m.z,y.z,S.z,_.z,R,C,w)}else this.curveType==="catmullrom"&&(yE.initCatmullRom(m.x,y.x,S.x,_.x,this.tension),vE.initCatmullRom(m.y,y.y,S.y,_.y,this.tension),SE.initCatmullRom(m.z,y.z,S.z,_.z,this.tension));return n.set(yE.calc(d),vE.calc(d),SE.calc(d)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(s.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const s=this.points[e];t.points.push(s.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(new tt().fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function cA(i,t,e,n,s){const r=(n-t)*.5,u=(s-e)*.5,f=i*i,d=i*f;return(2*e-2*n+r+u)*d+(-3*e+3*n-2*r-u)*f+r*i+e}function $U(i,t){const e=1-i;return e*e*t}function tO(i,t){return 2*(1-i)*i*t}function eO(i,t){return i*i*t}function Bg(i,t,e,n){return $U(i,t)+tO(i,e)+eO(i,n)}function nO(i,t){const e=1-i;return e*e*e*t}function iO(i,t){const e=1-i;return 3*e*e*i*t}function sO(i,t){return 3*(1-i)*i*i*t}function aO(i,t){return i*i*i*t}function Fg(i,t,e,n,s){return nO(i,t)+iO(i,e)+sO(i,n)+aO(i,s)}class vb extends al{constructor(t=new Jt,e=new Jt,n=new Jt,s=new Jt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=s}getPoint(t,e=new Jt){const n=e,s=this.v0,r=this.v1,u=this.v2,f=this.v3;return n.set(Fg(t,s.x,r.x,u.x,f.x),Fg(t,s.y,r.y,u.y,f.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class jw extends al{constructor(t=new tt,e=new tt,n=new tt,s=new tt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=s}getPoint(t,e=new tt){const n=e,s=this.v0,r=this.v1,u=this.v2,f=this.v3;return n.set(Fg(t,s.x,r.x,u.x,f.x),Fg(t,s.y,r.y,u.y,f.y),Fg(t,s.z,r.z,u.z,f.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Sb extends al{constructor(t=new Jt,e=new Jt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Jt){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Jt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Yw extends al{constructor(t=new tt,e=new tt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new tt){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new tt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class xb extends al{constructor(t=new Jt,e=new Jt,n=new Jt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Jt){const n=e,s=this.v0,r=this.v1,u=this.v2;return n.set(Bg(t,s.x,r.x,u.x),Bg(t,s.y,r.y,u.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Eb extends al{constructor(t=new tt,e=new tt,n=new tt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new tt){const n=e,s=this.v0,r=this.v1,u=this.v2;return n.set(Bg(t,s.x,r.x,u.x),Bg(t,s.y,r.y,u.y),Bg(t,s.z,r.z,u.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Tb extends al{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Jt){const n=e,s=this.points,r=(s.length-1)*t,u=Math.floor(r),f=r-u,d=s[u===0?u:u-1],m=s[u],_=s[u>s.length-2?s.length-1:u+1],y=s[u>s.length-3?s.length-1:u+2];return n.set(cA(f,d.x,m.x,_.x,y.x),cA(f,d.y,m.y,_.y,y.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const s=this.points[e];t.points.push(s.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(new Jt().fromArray(s))}return this}}var B0=Object.freeze({__proto__:null,ArcCurve:qw,CatmullRomCurve3:Xw,CubicBezierCurve:vb,CubicBezierCurve3:jw,EllipseCurve:DS,LineCurve:Sb,LineCurve3:Yw,QuadraticBezierCurve:xb,QuadraticBezierCurve3:Eb,SplineCurve:Tb});class Ww extends al{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new B0[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=n){const u=s[r]-n,f=this.curves[r],d=f.getLength(),m=d===0?0:1-u/d;return f.getPointAt(m,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,s=this.curves.length;n<s;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let s=0,r=this.curves;s<r.length;s++){const u=r[s],f=u.isEllipseCurve?t*2:u.isLineCurve||u.isLineCurve3?1:u.isSplineCurve?t*u.points.length:t,d=u.getPoints(f);for(let m=0;m<d.length;m++){const _=d[m];n&&n.equals(_)||(e.push(_),n=_)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const s=t.curves[e];this.curves.push(s.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const s=this.curves[e];t.curves.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const s=t.curves[e];this.curves.push(new B0[s.type]().fromJSON(s))}return this}}class F0 extends Ww{constructor(t){super(),this.type="Path",this.currentPoint=new Jt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Sb(this.currentPoint.clone(),new Jt(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,s){const r=new xb(this.currentPoint.clone(),new Jt(t,e),new Jt(n,s));return this.curves.push(r),this.currentPoint.set(n,s),this}bezierCurveTo(t,e,n,s,r,u){const f=new vb(this.currentPoint.clone(),new Jt(t,e),new Jt(n,s),new Jt(r,u));return this.curves.push(f),this.currentPoint.set(r,u),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Tb(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,s,r,u){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(t+f,e+d,n,s,r,u),this}absarc(t,e,n,s,r,u){return this.absellipse(t,e,n,n,s,r,u),this}ellipse(t,e,n,s,r,u,f,d){const m=this.currentPoint.x,_=this.currentPoint.y;return this.absellipse(t+m,e+_,n,s,r,u,f,d),this}absellipse(t,e,n,s,r,u,f,d){const m=new DS(t,e,n,s,r,u,f,d);if(this.curves.length>0){const y=m.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(m);const _=m.getPoint(1);return this.currentPoint.copy(_),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Df extends F0{constructor(t){super(t),this.uuid=qr(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,s=this.holes.length;n<s;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const s=t.holes[e];this.holes.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const s=this.holes[e];t.holes.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const s=t.holes[e];this.holes.push(new F0().fromJSON(s))}return this}}function rO(i,t,e=2){const n=t&&t.length,s=n?t[0]*e:i.length;let r=Kw(i,0,s,e,!0);const u=[];if(!r||r.next===r.prev)return u;let f,d,m;if(n&&(r=hO(i,t,r,e)),i.length>80*e){f=1/0,d=1/0;let _=-1/0,y=-1/0;for(let S=e;S<s;S+=e){const T=i[S],R=i[S+1];T<f&&(f=T),R<d&&(d=R),T>_&&(_=T),R>y&&(y=R)}m=Math.max(_-f,y-d),m=m!==0?32767/m:0}return i_(r,u,e,f,d,m,0),u}function Kw(i,t,e,n,s){let r;if(s===EO(i,t,e,n)>0)for(let u=t;u<e;u+=n)r=hA(u/n|0,i[u],i[u+1],r);else for(let u=e-n;u>=t;u-=n)r=hA(u/n|0,i[u],i[u+1],r);return r&&Ip(r,r.next)&&(a_(r),r=r.next),r}function Uf(i,t){if(!i)return i;t||(t=i);let e=i,n;do if(n=!1,!e.steiner&&(Ip(e,e.next)||ki(e.prev,e,e.next)===0)){if(a_(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function i_(i,t,e,n,s,r,u){if(!i)return;!u&&r&&gO(i,n,s,r);let f=i;for(;i.prev!==i.next;){const d=i.prev,m=i.next;if(r?lO(i,n,s,r):oO(i)){t.push(d.i,i.i,m.i),a_(i),i=m.next,f=m.next;continue}if(i=m,i===f){u?u===1?(i=uO(Uf(i),t),i_(i,t,e,n,s,r,2)):u===2&&cO(i,t,e,n,s,r):i_(Uf(i),t,e,n,s,r,1);break}}}function oO(i){const t=i.prev,e=i,n=i.next;if(ki(t,e,n)>=0)return!1;const s=t.x,r=e.x,u=n.x,f=t.y,d=e.y,m=n.y,_=Math.min(s,r,u),y=Math.min(f,d,m),S=Math.max(s,r,u),T=Math.max(f,d,m);let R=n.next;for(;R!==t;){if(R.x>=_&&R.x<=S&&R.y>=y&&R.y<=T&&Rg(s,f,r,d,u,m,R.x,R.y)&&ki(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function lO(i,t,e,n){const s=i.prev,r=i,u=i.next;if(ki(s,r,u)>=0)return!1;const f=s.x,d=r.x,m=u.x,_=s.y,y=r.y,S=u.y,T=Math.min(f,d,m),R=Math.min(_,y,S),C=Math.max(f,d,m),w=Math.max(_,y,S),M=pT(T,R,t,e,n),O=pT(C,w,t,e,n);let z=i.prevZ,V=i.nextZ;for(;z&&z.z>=M&&V&&V.z<=O;){if(z.x>=T&&z.x<=C&&z.y>=R&&z.y<=w&&z!==s&&z!==u&&Rg(f,_,d,y,m,S,z.x,z.y)&&ki(z.prev,z,z.next)>=0||(z=z.prevZ,V.x>=T&&V.x<=C&&V.y>=R&&V.y<=w&&V!==s&&V!==u&&Rg(f,_,d,y,m,S,V.x,V.y)&&ki(V.prev,V,V.next)>=0))return!1;V=V.nextZ}for(;z&&z.z>=M;){if(z.x>=T&&z.x<=C&&z.y>=R&&z.y<=w&&z!==s&&z!==u&&Rg(f,_,d,y,m,S,z.x,z.y)&&ki(z.prev,z,z.next)>=0)return!1;z=z.prevZ}for(;V&&V.z<=O;){if(V.x>=T&&V.x<=C&&V.y>=R&&V.y<=w&&V!==s&&V!==u&&Rg(f,_,d,y,m,S,V.x,V.y)&&ki(V.prev,V,V.next)>=0)return!1;V=V.nextZ}return!0}function uO(i,t){let e=i;do{const n=e.prev,s=e.next.next;!Ip(n,s)&&Zw(n,e,e.next,s)&&s_(n,s)&&s_(s,n)&&(t.push(n.i,e.i,s.i),a_(e),a_(e.next),e=i=s),e=e.next}while(e!==i);return Uf(e)}function cO(i,t,e,n,s,r){let u=i;do{let f=u.next.next;for(;f!==u.prev;){if(u.i!==f.i&&vO(u,f)){let d=Jw(u,f);u=Uf(u,u.next),d=Uf(d,d.next),i_(u,t,e,n,s,r,0),i_(d,t,e,n,s,r,0);return}f=f.next}u=u.next}while(u!==i)}function hO(i,t,e,n){const s=[];for(let r=0,u=t.length;r<u;r++){const f=t[r]*n,d=r<u-1?t[r+1]*n:i.length,m=Kw(i,f,d,n,!1);m===m.next&&(m.steiner=!0),s.push(yO(m))}s.sort(fO);for(let r=0;r<s.length;r++)e=dO(s[r],e);return e}function fO(i,t){let e=i.x-t.x;if(e===0&&(e=i.y-t.y,e===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(t.next.y-t.y)/(t.next.x-t.x);e=n-s}return e}function dO(i,t){const e=pO(i,t);if(!e)return t;const n=Jw(e,i);return Uf(n,n.next),Uf(e,e.next)}function pO(i,t){let e=t;const n=i.x,s=i.y;let r=-1/0,u;if(Ip(i,e))return e;do{if(Ip(i,e.next))return e.next;if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){const y=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(y<=n&&y>r&&(r=y,u=e.x<e.next.x?e:e.next,y===n))return u}e=e.next}while(e!==t);if(!u)return null;const f=u,d=u.x,m=u.y;let _=1/0;e=u;do{if(n>=e.x&&e.x>=d&&n!==e.x&&Qw(s<m?n:r,s,d,m,s<m?r:n,s,e.x,e.y)){const y=Math.abs(s-e.y)/(n-e.x);s_(e,i)&&(y<_||y===_&&(e.x>u.x||e.x===u.x&&mO(u,e)))&&(u=e,_=y)}e=e.next}while(e!==f);return u}function mO(i,t){return ki(i.prev,i,t.prev)<0&&ki(t.next,i,i.next)<0}function gO(i,t,e,n){let s=i;do s.z===0&&(s.z=pT(s.x,s.y,t,e,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,_O(s)}function _O(i){let t,e=1;do{let n=i,s;i=null;let r=null;for(t=0;n;){t++;let u=n,f=0;for(let m=0;m<e&&(f++,u=u.nextZ,!!u);m++);let d=e;for(;f>0||d>0&&u;)f!==0&&(d===0||!u||n.z<=u.z)?(s=n,n=n.nextZ,f--):(s=u,u=u.nextZ,d--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;n=u}r.nextZ=null,e*=2}while(t>1);return i}function pT(i,t,e,n,s){return i=(i-e)*s|0,t=(t-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function yO(i){let t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function Qw(i,t,e,n,s,r,u,f){return(s-u)*(t-f)>=(i-u)*(r-f)&&(i-u)*(n-f)>=(e-u)*(t-f)&&(e-u)*(r-f)>=(s-u)*(n-f)}function Rg(i,t,e,n,s,r,u,f){return!(i===u&&t===f)&&Qw(i,t,e,n,s,r,u,f)}function vO(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!SO(i,t)&&(s_(i,t)&&s_(t,i)&&xO(i,t)&&(ki(i.prev,i,t.prev)||ki(i,t.prev,t))||Ip(i,t)&&ki(i.prev,i,i.next)>0&&ki(t.prev,t,t.next)>0)}function ki(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function Ip(i,t){return i.x===t.x&&i.y===t.y}function Zw(i,t,e,n){const s=Tv(ki(i,t,e)),r=Tv(ki(i,t,n)),u=Tv(ki(e,n,i)),f=Tv(ki(e,n,t));return!!(s!==r&&u!==f||s===0&&Ev(i,e,t)||r===0&&Ev(i,n,t)||u===0&&Ev(e,i,n)||f===0&&Ev(e,t,n))}function Ev(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function Tv(i){return i>0?1:i<0?-1:0}function SO(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&Zw(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function s_(i,t){return ki(i.prev,i,i.next)<0?ki(i,t,i.next)>=0&&ki(i,i.prev,t)>=0:ki(i,t,i.prev)<0||ki(i,i.next,t)<0}function xO(i,t){let e=i,n=!1;const s=(i.x+t.x)/2,r=(i.y+t.y)/2;do e.y>r!=e.next.y>r&&e.next.y!==e.y&&s<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==i);return n}function Jw(i,t){const e=mT(i.i,i.x,i.y),n=mT(t.i,t.x,t.y),s=i.next,r=t.prev;return i.next=t,t.prev=i,e.next=s,s.prev=e,n.next=e,e.prev=n,r.next=n,n.prev=r,n}function hA(i,t,e,n){const s=mT(i,t,e);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function a_(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function mT(i,t,e){return{i,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function EO(i,t,e,n){let s=0;for(let r=t,u=e-n;r<e;r+=n)s+=(i[u]-i[r])*(i[r+1]+i[u+1]),u=r;return s}class TO{static triangulate(t,e,n=2){return rO(t,e,n)}}class el{static area(t){const e=t.length;let n=0;for(let s=e-1,r=0;r<e;s=r++)n+=t[s].x*t[r].y-t[r].x*t[s].y;return n*.5}static isClockWise(t){return el.area(t)<0}static triangulateShape(t,e){const n=[],s=[],r=[];fA(t),dA(n,t);let u=t.length;e.forEach(fA);for(let d=0;d<e.length;d++)s.push(u),u+=e[d].length,dA(n,e[d]);const f=TO.triangulate(n,s);for(let d=0;d<f.length;d+=3)r.push(f.slice(d,d+3));return r}}function fA(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function dA(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class NS extends _n{constructor(t=new Df([new Jt(.5,.5),new Jt(-.5,.5),new Jt(-.5,-.5),new Jt(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,s=[],r=[];for(let f=0,d=t.length;f<d;f++){const m=t[f];u(m)}this.setAttribute("position",new Ue(s,3)),this.setAttribute("uv",new Ue(r,2)),this.computeVertexNormals();function u(f){const d=[],m=e.curveSegments!==void 0?e.curveSegments:12,_=e.steps!==void 0?e.steps:1,y=e.depth!==void 0?e.depth:1;let S=e.bevelEnabled!==void 0?e.bevelEnabled:!0,T=e.bevelThickness!==void 0?e.bevelThickness:.2,R=e.bevelSize!==void 0?e.bevelSize:T-.1,C=e.bevelOffset!==void 0?e.bevelOffset:0,w=e.bevelSegments!==void 0?e.bevelSegments:3;const M=e.extrudePath,O=e.UVGenerator!==void 0?e.UVGenerator:bO;let z,V=!1,j,q,L,P;M&&(z=M.getSpacedPoints(_),V=!0,S=!1,j=M.computeFrenetFrames(_,!1),q=new tt,L=new tt,P=new tt),S||(w=0,T=0,R=0,C=0);const D=f.extractPoints(m);let U=D.shape;const F=D.holes;if(!el.isClockWise(U)){U=U.reverse();for(let qt=0,Ht=F.length;qt<Ht;qt++){const Vt=F[qt];el.isClockWise(Vt)&&(F[qt]=Vt.reverse())}}function G(qt){const Vt=10000000000000001e-36;let Pt=qt[0];for(let ue=1;ue<=qt.length;ue++){const kt=ue%qt.length,Kt=qt[kt],ze=Kt.x-Pt.x,Ye=Kt.y-Pt.y,$=ze*ze+Ye*Ye,X=Math.max(Math.abs(Kt.x),Math.abs(Kt.y),Math.abs(Pt.x),Math.abs(Pt.y)),_t=Vt*X*X;if($<=_t){qt.splice(kt,1),ue--;continue}Pt=Kt}}G(U),F.forEach(G);const gt=F.length,vt=U;for(let qt=0;qt<gt;qt++){const Ht=F[qt];U=U.concat(Ht)}function k(qt,Ht,Vt){return Ht||console.error("THREE.ExtrudeGeometry: vec does not exist"),qt.clone().addScaledVector(Ht,Vt)}const et=U.length;function nt(qt,Ht,Vt){let Pt,ue,kt;const Kt=qt.x-Ht.x,ze=qt.y-Ht.y,Ye=Vt.x-qt.x,$=Vt.y-qt.y,X=Kt*Kt+ze*ze,_t=Kt*$-ze*Ye;if(Math.abs(_t)>Number.EPSILON){const Dt=Math.sqrt(X),Qt=Math.sqrt(Ye*Ye+$*$),Ut=Ht.x-ze/Dt,De=Ht.y+Kt/Dt,oe=Vt.x-$/Qt,be=Vt.y+Ye/Qt,Me=((oe-Ut)*$-(be-De)*Ye)/(Kt*$-ze*Ye);Pt=Ut+Kt*Me-qt.x,ue=De+ze*Me-qt.y;const Yt=Pt*Pt+ue*ue;if(Yt<=2)return new Jt(Pt,ue);kt=Math.sqrt(Yt/2)}else{let Dt=!1;Kt>Number.EPSILON?Ye>Number.EPSILON&&(Dt=!0):Kt<-Number.EPSILON?Ye<-Number.EPSILON&&(Dt=!0):Math.sign(ze)===Math.sign($)&&(Dt=!0),Dt?(Pt=-ze,ue=Kt,kt=Math.sqrt(X)):(Pt=Kt,ue=ze,kt=Math.sqrt(X/2))}return new Jt(Pt/kt,ue/kt)}const ft=[];for(let qt=0,Ht=vt.length,Vt=Ht-1,Pt=qt+1;qt<Ht;qt++,Vt++,Pt++)Vt===Ht&&(Vt=0),Pt===Ht&&(Pt=0),ft[qt]=nt(vt[qt],vt[Vt],vt[Pt]);const wt=[];let J,ut=ft.concat();for(let qt=0,Ht=gt;qt<Ht;qt++){const Vt=F[qt];J=[];for(let Pt=0,ue=Vt.length,kt=ue-1,Kt=Pt+1;Pt<ue;Pt++,kt++,Kt++)kt===ue&&(kt=0),Kt===ue&&(Kt=0),J[Pt]=nt(Vt[Pt],Vt[kt],Vt[Kt]);wt.push(J),ut=ut.concat(J)}let Ot;if(w===0)Ot=el.triangulateShape(vt,F);else{const qt=[],Ht=[];for(let Vt=0;Vt<w;Vt++){const Pt=Vt/w,ue=T*Math.cos(Pt*Math.PI/2),kt=R*Math.sin(Pt*Math.PI/2)+C;for(let Kt=0,ze=vt.length;Kt<ze;Kt++){const Ye=k(vt[Kt],ft[Kt],kt);de(Ye.x,Ye.y,-ue),Pt===0&&qt.push(Ye)}for(let Kt=0,ze=gt;Kt<ze;Kt++){const Ye=F[Kt];J=wt[Kt];const $=[];for(let X=0,_t=Ye.length;X<_t;X++){const Dt=k(Ye[X],J[X],kt);de(Dt.x,Dt.y,-ue),Pt===0&&$.push(Dt)}Pt===0&&Ht.push($)}}Ot=el.triangulateShape(qt,Ht)}const Lt=Ot.length,ee=R+C;for(let qt=0;qt<et;qt++){const Ht=S?k(U[qt],ut[qt],ee):U[qt];V?(L.copy(j.normals[0]).multiplyScalar(Ht.x),q.copy(j.binormals[0]).multiplyScalar(Ht.y),P.copy(z[0]).add(L).add(q),de(P.x,P.y,P.z)):de(Ht.x,Ht.y,0)}for(let qt=1;qt<=_;qt++)for(let Ht=0;Ht<et;Ht++){const Vt=S?k(U[Ht],ut[Ht],ee):U[Ht];V?(L.copy(j.normals[qt]).multiplyScalar(Vt.x),q.copy(j.binormals[qt]).multiplyScalar(Vt.y),P.copy(z[qt]).add(L).add(q),de(P.x,P.y,P.z)):de(Vt.x,Vt.y,y/_*qt)}for(let qt=w-1;qt>=0;qt--){const Ht=qt/w,Vt=T*Math.cos(Ht*Math.PI/2),Pt=R*Math.sin(Ht*Math.PI/2)+C;for(let ue=0,kt=vt.length;ue<kt;ue++){const Kt=k(vt[ue],ft[ue],Pt);de(Kt.x,Kt.y,y+Vt)}for(let ue=0,kt=F.length;ue<kt;ue++){const Kt=F[ue];J=wt[ue];for(let ze=0,Ye=Kt.length;ze<Ye;ze++){const $=k(Kt[ze],J[ze],Pt);V?de($.x,$.y+z[_-1].y,z[_-1].x+Vt):de($.x,$.y,y+Vt)}}}xt(),It();function xt(){const qt=s.length/3;if(S){let Ht=0,Vt=et*Ht;for(let Pt=0;Pt<Lt;Pt++){const ue=Ot[Pt];Ee(ue[2]+Vt,ue[1]+Vt,ue[0]+Vt)}Ht=_+w*2,Vt=et*Ht;for(let Pt=0;Pt<Lt;Pt++){const ue=Ot[Pt];Ee(ue[0]+Vt,ue[1]+Vt,ue[2]+Vt)}}else{for(let Ht=0;Ht<Lt;Ht++){const Vt=Ot[Ht];Ee(Vt[2],Vt[1],Vt[0])}for(let Ht=0;Ht<Lt;Ht++){const Vt=Ot[Ht];Ee(Vt[0]+et*_,Vt[1]+et*_,Vt[2]+et*_)}}n.addGroup(qt,s.length/3-qt,0)}function It(){const qt=s.length/3;let Ht=0;ae(vt,Ht),Ht+=vt.length;for(let Vt=0,Pt=F.length;Vt<Pt;Vt++){const ue=F[Vt];ae(ue,Ht),Ht+=ue.length}n.addGroup(qt,s.length/3-qt,1)}function ae(qt,Ht){let Vt=qt.length;for(;--Vt>=0;){const Pt=Vt;let ue=Vt-1;ue<0&&(ue=qt.length-1);for(let kt=0,Kt=_+w*2;kt<Kt;kt++){const ze=et*kt,Ye=et*(kt+1),$=Ht+Pt+ze,X=Ht+ue+ze,_t=Ht+ue+Ye,Dt=Ht+Pt+Ye;Ze($,X,_t,Dt)}}}function de(qt,Ht,Vt){d.push(qt),d.push(Ht),d.push(Vt)}function Ee(qt,Ht,Vt){bn(qt),bn(Ht),bn(Vt);const Pt=s.length/3,ue=O.generateTopUV(n,s,Pt-3,Pt-2,Pt-1);it(ue[0]),it(ue[1]),it(ue[2])}function Ze(qt,Ht,Vt,Pt){bn(qt),bn(Ht),bn(Pt),bn(Ht),bn(Vt),bn(Pt);const ue=s.length/3,kt=O.generateSideWallUV(n,s,ue-6,ue-3,ue-2,ue-1);it(kt[0]),it(kt[1]),it(kt[3]),it(kt[1]),it(kt[2]),it(kt[3])}function bn(qt){s.push(d[qt*3+0]),s.push(d[qt*3+1]),s.push(d[qt*3+2])}function it(qt){r.push(qt.x),r.push(qt.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return MO(e,n,t)}static fromJSON(t,e){const n=[];for(let r=0,u=t.shapes.length;r<u;r++){const f=e[t.shapes[r]];n.push(f)}const s=t.options.extrudePath;return s!==void 0&&(t.options.extrudePath=new B0[s.type]().fromJSON(s)),new NS(n,t.options)}}const bO={generateTopUV:function(i,t,e,n,s){const r=t[e*3],u=t[e*3+1],f=t[n*3],d=t[n*3+1],m=t[s*3],_=t[s*3+1];return[new Jt(r,u),new Jt(f,d),new Jt(m,_)]},generateSideWallUV:function(i,t,e,n,s,r){const u=t[e*3],f=t[e*3+1],d=t[e*3+2],m=t[n*3],_=t[n*3+1],y=t[n*3+2],S=t[s*3],T=t[s*3+1],R=t[s*3+2],C=t[r*3],w=t[r*3+1],M=t[r*3+2];return Math.abs(f-_)<Math.abs(u-m)?[new Jt(u,1-d),new Jt(m,1-y),new Jt(S,1-R),new Jt(C,1-M)]:[new Jt(f,1-d),new Jt(_,1-y),new Jt(T,1-R),new Jt(w,1-M)]}};function MO(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class IS extends mh{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new IS(t.radius,t.detail)}}class US extends _n{constructor(t=[new Jt(0,-.5),new Jt(.5,0),new Jt(0,.5)],e=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:s},e=Math.floor(e),s=Je(s,0,Math.PI*2);const r=[],u=[],f=[],d=[],m=[],_=1/e,y=new tt,S=new Jt,T=new tt,R=new tt,C=new tt;let w=0,M=0;for(let O=0;O<=t.length-1;O++)switch(O){case 0:w=t[O+1].x-t[O].x,M=t[O+1].y-t[O].y,T.x=M*1,T.y=-w,T.z=M*0,C.copy(T),T.normalize(),d.push(T.x,T.y,T.z);break;case t.length-1:d.push(C.x,C.y,C.z);break;default:w=t[O+1].x-t[O].x,M=t[O+1].y-t[O].y,T.x=M*1,T.y=-w,T.z=M*0,R.copy(T),T.x+=C.x,T.y+=C.y,T.z+=C.z,T.normalize(),d.push(T.x,T.y,T.z),C.copy(R)}for(let O=0;O<=e;O++){const z=n+O*_*s,V=Math.sin(z),j=Math.cos(z);for(let q=0;q<=t.length-1;q++){y.x=t[q].x*V,y.y=t[q].y,y.z=t[q].x*j,u.push(y.x,y.y,y.z),S.x=O/e,S.y=q/(t.length-1),f.push(S.x,S.y);const L=d[3*q+0]*V,P=d[3*q+1],D=d[3*q+0]*j;m.push(L,P,D)}}for(let O=0;O<e;O++)for(let z=0;z<t.length-1;z++){const V=z+O*t.length,j=V,q=V+t.length,L=V+t.length+1,P=V+1;r.push(j,q,P),r.push(L,P,q)}this.setIndex(r),this.setAttribute("position",new Ue(u,3)),this.setAttribute("uv",new Ue(f,2)),this.setAttribute("normal",new Ue(m,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new US(t.points,t.segments,t.phiStart,t.phiLength)}}class b_ extends mh{constructor(t=1,e=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new b_(t.radius,t.detail)}}class jp extends _n{constructor(t=1,e=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:s};const r=t/2,u=e/2,f=Math.floor(n),d=Math.floor(s),m=f+1,_=d+1,y=t/f,S=e/d,T=[],R=[],C=[],w=[];for(let M=0;M<_;M++){const O=M*S-u;for(let z=0;z<m;z++){const V=z*y-r;R.push(V,-O,0),C.push(0,0,1),w.push(z/f),w.push(1-M/d)}}for(let M=0;M<d;M++)for(let O=0;O<f;O++){const z=O+m*M,V=O+m*(M+1),j=O+1+m*(M+1),q=O+1+m*M;T.push(z,V,q),T.push(V,j,q)}this.setIndex(T),this.setAttribute("position",new Ue(R,3)),this.setAttribute("normal",new Ue(C,3)),this.setAttribute("uv",new Ue(w,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new jp(t.width,t.height,t.widthSegments,t.heightSegments)}}class OS extends _n{constructor(t=.5,e=1,n=32,s=1,r=0,u=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:s,thetaStart:r,thetaLength:u},n=Math.max(3,n),s=Math.max(1,s);const f=[],d=[],m=[],_=[];let y=t;const S=(e-t)/s,T=new tt,R=new Jt;for(let C=0;C<=s;C++){for(let w=0;w<=n;w++){const M=r+w/n*u;T.x=y*Math.cos(M),T.y=y*Math.sin(M),d.push(T.x,T.y,T.z),m.push(0,0,1),R.x=(T.x/e+1)/2,R.y=(T.y/e+1)/2,_.push(R.x,R.y)}y+=S}for(let C=0;C<s;C++){const w=C*(n+1);for(let M=0;M<n;M++){const O=M+w,z=O,V=O+n+1,j=O+n+2,q=O+1;f.push(z,V,q),f.push(V,j,q)}}this.setIndex(f),this.setAttribute("position",new Ue(d,3)),this.setAttribute("normal",new Ue(m,3)),this.setAttribute("uv",new Ue(_,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new OS(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class LS extends _n{constructor(t=new Df([new Jt(0,.5),new Jt(-.5,-.5),new Jt(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],s=[],r=[],u=[];let f=0,d=0;if(Array.isArray(t)===!1)m(t);else for(let _=0;_<t.length;_++)m(t[_]),this.addGroup(f,d,_),f+=d,d=0;this.setIndex(n),this.setAttribute("position",new Ue(s,3)),this.setAttribute("normal",new Ue(r,3)),this.setAttribute("uv",new Ue(u,2));function m(_){const y=s.length/3,S=_.extractPoints(e);let T=S.shape;const R=S.holes;el.isClockWise(T)===!1&&(T=T.reverse());for(let w=0,M=R.length;w<M;w++){const O=R[w];el.isClockWise(O)===!0&&(R[w]=O.reverse())}const C=el.triangulateShape(T,R);for(let w=0,M=R.length;w<M;w++){const O=R[w];T=T.concat(O)}for(let w=0,M=T.length;w<M;w++){const O=T[w];s.push(O.x,O.y,0),r.push(0,0,1),u.push(O.x,O.y)}for(let w=0,M=C.length;w<M;w++){const O=C[w],z=O[0]+y,V=O[1]+y,j=O[2]+y;n.push(z,V,j),d+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return AO(e,t)}static fromJSON(t,e){const n=[];for(let s=0,r=t.shapes.length;s<r;s++){const u=e[t.shapes[s]];n.push(u)}return new LS(n,t.curveSegments)}}function AO(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const s=i[e];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t}class M_ extends _n{constructor(t=1,e=32,n=16,s=0,r=Math.PI*2,u=0,f=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:s,phiLength:r,thetaStart:u,thetaLength:f},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const d=Math.min(u+f,Math.PI);let m=0;const _=[],y=new tt,S=new tt,T=[],R=[],C=[],w=[];for(let M=0;M<=n;M++){const O=[],z=M/n;let V=0;M===0&&u===0?V=.5/e:M===n&&d===Math.PI&&(V=-.5/e);for(let j=0;j<=e;j++){const q=j/e;y.x=-t*Math.cos(s+q*r)*Math.sin(u+z*f),y.y=t*Math.cos(u+z*f),y.z=t*Math.sin(s+q*r)*Math.sin(u+z*f),R.push(y.x,y.y,y.z),S.copy(y).normalize(),C.push(S.x,S.y,S.z),w.push(q+V,1-z),O.push(m++)}_.push(O)}for(let M=0;M<n;M++)for(let O=0;O<e;O++){const z=_[M][O+1],V=_[M][O],j=_[M+1][O],q=_[M+1][O+1];(M!==0||u>0)&&T.push(z,V,q),(M!==n-1||d<Math.PI)&&T.push(V,j,q)}this.setIndex(T),this.setAttribute("position",new Ue(R,3)),this.setAttribute("normal",new Ue(C,3)),this.setAttribute("uv",new Ue(w,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new M_(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class PS extends mh{constructor(t=1,e=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new PS(t.radius,t.detail)}}class zS extends _n{constructor(t=1,e=.4,n=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:s,arc:r},n=Math.floor(n),s=Math.floor(s);const u=[],f=[],d=[],m=[],_=new tt,y=new tt,S=new tt;for(let T=0;T<=n;T++)for(let R=0;R<=s;R++){const C=R/s*r,w=T/n*Math.PI*2;y.x=(t+e*Math.cos(w))*Math.cos(C),y.y=(t+e*Math.cos(w))*Math.sin(C),y.z=e*Math.sin(w),f.push(y.x,y.y,y.z),_.x=t*Math.cos(C),_.y=t*Math.sin(C),S.subVectors(y,_).normalize(),d.push(S.x,S.y,S.z),m.push(R/s),m.push(T/n)}for(let T=1;T<=n;T++)for(let R=1;R<=s;R++){const C=(s+1)*T+R-1,w=(s+1)*(T-1)+R-1,M=(s+1)*(T-1)+R,O=(s+1)*T+R;u.push(C,w,O),u.push(w,M,O)}this.setIndex(u),this.setAttribute("position",new Ue(f,3)),this.setAttribute("normal",new Ue(d,3)),this.setAttribute("uv",new Ue(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new zS(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class VS extends _n{constructor(t=1,e=.4,n=64,s=8,r=2,u=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:s,p:r,q:u},n=Math.floor(n),s=Math.floor(s);const f=[],d=[],m=[],_=[],y=new tt,S=new tt,T=new tt,R=new tt,C=new tt,w=new tt,M=new tt;for(let z=0;z<=n;++z){const V=z/n*r*Math.PI*2;O(V,r,u,t,T),O(V+.01,r,u,t,R),w.subVectors(R,T),M.addVectors(R,T),C.crossVectors(w,M),M.crossVectors(C,w),C.normalize(),M.normalize();for(let j=0;j<=s;++j){const q=j/s*Math.PI*2,L=-e*Math.cos(q),P=e*Math.sin(q);y.x=T.x+(L*M.x+P*C.x),y.y=T.y+(L*M.y+P*C.y),y.z=T.z+(L*M.z+P*C.z),d.push(y.x,y.y,y.z),S.subVectors(y,T).normalize(),m.push(S.x,S.y,S.z),_.push(z/n),_.push(j/s)}}for(let z=1;z<=n;z++)for(let V=1;V<=s;V++){const j=(s+1)*(z-1)+(V-1),q=(s+1)*z+(V-1),L=(s+1)*z+V,P=(s+1)*(z-1)+V;f.push(j,q,P),f.push(q,L,P)}this.setIndex(f),this.setAttribute("position",new Ue(d,3)),this.setAttribute("normal",new Ue(m,3)),this.setAttribute("uv",new Ue(_,2));function O(z,V,j,q,L){const P=Math.cos(z),D=Math.sin(z),U=j/V*z,F=Math.cos(U);L.x=q*(2+F)*.5*P,L.y=q*(2+F)*D*.5,L.z=q*Math.sin(U)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new VS(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class BS extends _n{constructor(t=new Eb(new tt(-1,-1,0),new tt(-1,1,0),new tt(1,1,0)),e=64,n=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:s,closed:r};const u=t.computeFrenetFrames(e,r);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;const f=new tt,d=new tt,m=new Jt;let _=new tt;const y=[],S=[],T=[],R=[];C(),this.setIndex(R),this.setAttribute("position",new Ue(y,3)),this.setAttribute("normal",new Ue(S,3)),this.setAttribute("uv",new Ue(T,2));function C(){for(let z=0;z<e;z++)w(z);w(r===!1?e:0),O(),M()}function w(z){_=t.getPointAt(z/e,_);const V=u.normals[z],j=u.binormals[z];for(let q=0;q<=s;q++){const L=q/s*Math.PI*2,P=Math.sin(L),D=-Math.cos(L);d.x=D*V.x+P*j.x,d.y=D*V.y+P*j.y,d.z=D*V.z+P*j.z,d.normalize(),S.push(d.x,d.y,d.z),f.x=_.x+n*d.x,f.y=_.y+n*d.y,f.z=_.z+n*d.z,y.push(f.x,f.y,f.z)}}function M(){for(let z=1;z<=e;z++)for(let V=1;V<=s;V++){const j=(s+1)*(z-1)+(V-1),q=(s+1)*z+(V-1),L=(s+1)*z+V,P=(s+1)*(z-1)+V;R.push(j,q,P),R.push(q,L,P)}}function O(){for(let z=0;z<=e;z++)for(let V=0;V<=s;V++)m.x=z/e,m.y=V/s,T.push(m.x,m.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new BS(new B0[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class $w extends _n{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],n=new Set,s=new tt,r=new tt;if(t.index!==null){const u=t.attributes.position,f=t.index;let d=t.groups;d.length===0&&(d=[{start:0,count:f.count,materialIndex:0}]);for(let m=0,_=d.length;m<_;++m){const y=d[m],S=y.start,T=y.count;for(let R=S,C=S+T;R<C;R+=3)for(let w=0;w<3;w++){const M=f.getX(R+w),O=f.getX(R+(w+1)%3);s.fromBufferAttribute(u,M),r.fromBufferAttribute(u,O),pA(s,r,n)===!0&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}}else{const u=t.attributes.position;for(let f=0,d=u.count/3;f<d;f++)for(let m=0;m<3;m++){const _=3*f+m,y=3*f+(m+1)%3;s.fromBufferAttribute(u,_),r.fromBufferAttribute(u,y),pA(s,r,n)===!0&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new Ue(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function pA(i,t,e){const n=`${i.x},${i.y},${i.z}-${t.x},${t.y},${t.z}`,s=`${t.x},${t.y},${t.z}-${i.x},${i.y},${i.z}`;return e.has(n)===!0||e.has(s)===!0?!1:(e.add(n),e.add(s),!0)}var mA=Object.freeze({__proto__:null,BoxGeometry:zf,CapsuleGeometry:RS,CircleGeometry:wS,ConeGeometry:T_,CylinderGeometry:E_,DodecahedronGeometry:CS,EdgesGeometry:kw,ExtrudeGeometry:NS,IcosahedronGeometry:IS,LatheGeometry:US,OctahedronGeometry:b_,PlaneGeometry:jp,PolyhedronGeometry:mh,RingGeometry:OS,ShapeGeometry:LS,SphereGeometry:M_,TetrahedronGeometry:PS,TorusGeometry:zS,TorusKnotGeometry:VS,TubeGeometry:BS,WireframeGeometry:$w});class tC extends Na{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Te(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class eC extends il{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class bb extends Na{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Te(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dh,this.normalScale=new Jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Xr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class nC extends bb{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Jt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Je(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Te(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Te(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Te(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class iC extends Na{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Te(16777215),this.specular=new Te(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dh,this.normalScale=new Jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Xr,this.combine=v_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class sC extends Na{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Te(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dh,this.normalScale=new Jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class aC extends Na{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dh,this.normalScale=new Jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class rC extends Na{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Te(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dh,this.normalScale=new Jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Xr,this.combine=v_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Mb extends Na{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=gw,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Ab extends Na{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class oC extends Na{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Te(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dh,this.normalScale=new Jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class lC extends ir{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Af(i,t){return!i||i.constructor===t?i:typeof t.BYTES_PER_ELEMENT=="number"?new t(i):Array.prototype.slice.call(i)}function uC(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function cC(i){function t(s,r){return i[s]-i[r]}const e=i.length,n=new Array(e);for(let s=0;s!==e;++s)n[s]=s;return n.sort(t),n}function gT(i,t,e){const n=i.length,s=new i.constructor(n);for(let r=0,u=0;u!==n;++r){const f=e[r]*t;for(let d=0;d!==t;++d)s[u++]=i[f+d]}return s}function Rb(i,t,e,n){let s=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[s++];if(r===void 0)return;let u=r[n];if(u!==void 0)if(Array.isArray(u))do u=r[n],u!==void 0&&(t.push(r.time),e.push(...u)),r=i[s++];while(r!==void 0);else if(u.toArray!==void 0)do u=r[n],u!==void 0&&(t.push(r.time),u.toArray(e,e.length)),r=i[s++];while(r!==void 0);else do u=r[n],u!==void 0&&(t.push(r.time),e.push(u)),r=i[s++];while(r!==void 0)}function RO(i,t,e,n,s=30){const r=i.clone();r.name=t;const u=[];for(let d=0;d<r.tracks.length;++d){const m=r.tracks[d],_=m.getValueSize(),y=[],S=[];for(let T=0;T<m.times.length;++T){const R=m.times[T]*s;if(!(R<e||R>=n)){y.push(m.times[T]);for(let C=0;C<_;++C)S.push(m.values[T*_+C])}}y.length!==0&&(m.times=Af(y,m.times.constructor),m.values=Af(S,m.values.constructor),u.push(m))}r.tracks=u;let f=1/0;for(let d=0;d<r.tracks.length;++d)f>r.tracks[d].times[0]&&(f=r.tracks[d].times[0]);for(let d=0;d<r.tracks.length;++d)r.tracks[d].shift(-1*f);return r.resetDuration(),r}function wO(i,t=0,e=i,n=30){n<=0&&(n=30);const s=e.tracks.length,r=t/n;for(let u=0;u<s;++u){const f=e.tracks[u],d=f.ValueTypeName;if(d==="bool"||d==="string")continue;const m=i.tracks.find(function(M){return M.name===f.name&&M.ValueTypeName===d});if(m===void 0)continue;let _=0;const y=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=y/3);let S=0;const T=m.getValueSize();m.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(S=T/3);const R=f.times.length-1;let C;if(r<=f.times[0]){const M=_,O=y-_;C=f.values.slice(M,O)}else if(r>=f.times[R]){const M=R*y+_,O=M+y-_;C=f.values.slice(M,O)}else{const M=f.createInterpolant(),O=_,z=y-_;M.evaluate(r),C=M.resultBuffer.slice(O,z)}d==="quaternion"&&new Er().fromArray(C).normalize().conjugate().toArray(C);const w=m.times.length;for(let M=0;M<w;++M){const O=M*T+S;if(d==="quaternion")Er.multiplyQuaternionsFlat(m.values,O,C,0,m.values,O);else{const z=T-S*2;for(let V=0;V<z;++V)m.values[O+V]-=C[V]}}}return i.blendMode=rb,i}class CO{static convertArray(t,e){return Af(t,e)}static isTypedArray(t){return uC(t)}static getKeyframeOrder(t){return cC(t)}static sortedArray(t,e,n){return gT(t,e,n)}static flattenJSON(t,e,n,s){Rb(t,e,n,s)}static subclip(t,e,n,s,r=30){return RO(t,e,n,s,r)}static makeClipAdditive(t,e=0,n=t,s=30){return wO(t,e,n,s)}}class A_{constructor(t,e,n,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,s=e[n],r=e[n-1];t:{e:{let u;n:{i:if(!(t<s)){for(let f=n+2;;){if(s===void 0){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===f)break;if(r=s,s=e[++n],t<s)break e}u=e.length;break n}if(!(t>=r)){const f=e[1];t<f&&(n=2,r=f);for(let d=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===d)break;if(s=r,r=e[--n-1],t>=r)break e}u=n,n=0;break n}break t}for(;n<u;){const f=n+u>>>1;t<e[f]?u=f:n=f+1}if(s=e[n],r=e[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,s)}return this.interpolate_(n,r,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=t*s;for(let u=0;u!==s;++u)e[u]=n[r+u];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class hC extends A_{constructor(t,e,n,s){super(t,e,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:bf,endingEnd:bf}}intervalChanged_(t,e,n){const s=this.parameterPositions;let r=t-2,u=t+1,f=s[r],d=s[u];if(f===void 0)switch(this.getSettings_().endingStart){case Mf:r=t,f=2*e-n;break;case Jg:r=s.length-2,f=e+s[r]-s[r+1];break;default:r=t,f=n}if(d===void 0)switch(this.getSettings_().endingEnd){case Mf:u=t,d=2*n-e;break;case Jg:u=1,d=n+s[1]-s[0];break;default:u=t-1,d=e}const m=(n-e)*.5,_=this.valueSize;this._weightPrev=m/(e-f),this._weightNext=m/(d-n),this._offsetPrev=r*_,this._offsetNext=u*_}interpolate_(t,e,n,s){const r=this.resultBuffer,u=this.sampleValues,f=this.valueSize,d=t*f,m=d-f,_=this._offsetPrev,y=this._offsetNext,S=this._weightPrev,T=this._weightNext,R=(n-e)/(s-e),C=R*R,w=C*R,M=-S*w+2*S*C-S*R,O=(1+S)*w+(-1.5-2*S)*C+(-.5+S)*R+1,z=(-1-T)*w+(1.5+T)*C+.5*R,V=T*w-T*C;for(let j=0;j!==f;++j)r[j]=M*u[_+j]+O*u[m+j]+z*u[d+j]+V*u[y+j];return r}}class wb extends A_{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t,e,n,s){const r=this.resultBuffer,u=this.sampleValues,f=this.valueSize,d=t*f,m=d-f,_=(n-e)/(s-e),y=1-_;for(let S=0;S!==f;++S)r[S]=u[m+S]*y+u[d+S]*_;return r}}class fC extends A_{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t){return this.copySampleValue_(t-1)}}class Eo{constructor(t,e,n,s){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Af(e,this.TimeBufferType),this.values=Af(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Af(t.times,Array),values:Af(t.values,Array)};const s=t.getInterpolation();s!==t.DefaultInterpolation&&(n.interpolation=s)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new fC(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new wb(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new hC(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Zg:e=this.InterpolantFactoryMethodDiscrete;break;case P0:e=this.InterpolantFactoryMethodLinear;break;case kv:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Zg;case this.InterpolantFactoryMethodLinear:return P0;case this.InterpolantFactoryMethodSmooth:return kv}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,s=e.length;n!==s;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,s=e.length;n!==s;++n)e[n]*=t}return this}trim(t,e){const n=this.times,s=n.length;let r=0,u=s-1;for(;r!==s&&n[r]<t;)++r;for(;u!==-1&&n[u]>e;)--u;if(++u,r!==0||u!==s){r>=u&&(u=Math.max(u,1),r=u-1);const f=this.getValueSize();this.times=n.slice(r,u),this.values=this.values.slice(r*f,u*f)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,s=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let u=null;for(let f=0;f!==r;f++){const d=n[f];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,d),t=!1;break}if(u!==null&&u>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,d,u),t=!1;break}u=d}if(s!==void 0&&uC(s))for(let f=0,d=s.length;f!==d;++f){const m=s[f];if(isNaN(m)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,m),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===kv,r=t.length-1;let u=1;for(let f=1;f<r;++f){let d=!1;const m=t[f],_=t[f+1];if(m!==_&&(f!==1||m!==t[0]))if(s)d=!0;else{const y=f*n,S=y-n,T=y+n;for(let R=0;R!==n;++R){const C=e[y+R];if(C!==e[S+R]||C!==e[T+R]){d=!0;break}}}if(d){if(f!==u){t[u]=t[f];const y=f*n,S=u*n;for(let T=0;T!==n;++T)e[S+T]=e[y+T]}++u}}if(r>0){t[u]=t[r];for(let f=r*n,d=u*n,m=0;m!==n;++m)e[d+m]=e[f+m];++u}return u!==t.length?(this.times=t.slice(0,u),this.values=e.slice(0,u*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=this.constructor,s=new n(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}}Eo.prototype.ValueTypeName="";Eo.prototype.TimeBufferType=Float32Array;Eo.prototype.ValueBufferType=Float32Array;Eo.prototype.DefaultInterpolation=P0;class Vf extends Eo{constructor(t,e,n){super(t,e,n)}}Vf.prototype.ValueTypeName="bool";Vf.prototype.ValueBufferType=Array;Vf.prototype.DefaultInterpolation=Zg;Vf.prototype.InterpolantFactoryMethodLinear=void 0;Vf.prototype.InterpolantFactoryMethodSmooth=void 0;class Cb extends Eo{constructor(t,e,n,s){super(t,e,n,s)}}Cb.prototype.ValueTypeName="color";class r_ extends Eo{constructor(t,e,n,s){super(t,e,n,s)}}r_.prototype.ValueTypeName="number";class dC extends A_{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t,e,n,s){const r=this.resultBuffer,u=this.sampleValues,f=this.valueSize,d=(n-e)/(s-e);let m=t*f;for(let _=m+f;m!==_;m+=4)Er.slerpFlat(r,0,u,m-f,u,m,d);return r}}class R_ extends Eo{constructor(t,e,n,s){super(t,e,n,s)}InterpolantFactoryMethodLinear(t){return new dC(this.times,this.values,this.getValueSize(),t)}}R_.prototype.ValueTypeName="quaternion";R_.prototype.InterpolantFactoryMethodSmooth=void 0;class Bf extends Eo{constructor(t,e,n){super(t,e,n)}}Bf.prototype.ValueTypeName="string";Bf.prototype.ValueBufferType=Array;Bf.prototype.DefaultInterpolation=Zg;Bf.prototype.InterpolantFactoryMethodLinear=void 0;Bf.prototype.InterpolantFactoryMethodSmooth=void 0;class o_ extends Eo{constructor(t,e,n,s){super(t,e,n,s)}}o_.prototype.ValueTypeName="vector";class l_{constructor(t="",e=-1,n=[],s=_S){this.name=t,this.tracks=n,this.duration=e,this.blendMode=s,this.uuid=qr(),this.userData={},this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,s=1/(t.fps||1);for(let u=0,f=n.length;u!==f;++u)e.push(NO(n[u]).scale(s));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r.userData=JSON.parse(t.userData||"{}"),r}static toJSON(t){const e=[],n=t.tracks,s={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode,userData:JSON.stringify(t.userData)};for(let r=0,u=n.length;r!==u;++r)e.push(Eo.toJSON(n[r]));return s}static CreateFromMorphTargetSequence(t,e,n,s){const r=e.length,u=[];for(let f=0;f<r;f++){let d=[],m=[];d.push((f+r-1)%r,f,(f+1)%r),m.push(0,1,0);const _=cC(d);d=gT(d,1,_),m=gT(m,1,_),!s&&d[0]===0&&(d.push(r),m.push(m[0])),u.push(new r_(".morphTargetInfluences["+e[f].name+"]",d,m).scale(1/n))}return new this(t,-1,u)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const s=t;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===e)return n[s];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const s={},r=/^([\w-]*?)([\d]+)$/;for(let f=0,d=t.length;f<d;f++){const m=t[f],_=m.name.match(r);if(_&&_.length>1){const y=_[1];let S=s[y];S||(s[y]=S=[]),S.push(m)}}const u=[];for(const f in s)u.push(this.CreateFromMorphTargetSequence(f,s[f],e,n));return u}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(y,S,T,R,C){if(T.length!==0){const w=[],M=[];Rb(T,w,M,R),w.length!==0&&C.push(new y(S,w,M))}},s=[],r=t.name||"default",u=t.fps||30,f=t.blendMode;let d=t.length||-1;const m=t.hierarchy||[];for(let y=0;y<m.length;y++){const S=m[y].keys;if(!(!S||S.length===0))if(S[0].morphTargets){const T={};let R;for(R=0;R<S.length;R++)if(S[R].morphTargets)for(let C=0;C<S[R].morphTargets.length;C++)T[S[R].morphTargets[C]]=-1;for(const C in T){const w=[],M=[];for(let O=0;O!==S[R].morphTargets.length;++O){const z=S[R];w.push(z.time),M.push(z.morphTarget===C?1:0)}s.push(new r_(".morphTargetInfluence["+C+"]",w,M))}d=T.length*u}else{const T=".bones["+e[y].name+"]";n(o_,T+".position",S,"pos",s),n(R_,T+".quaternion",S,"rot",s),n(o_,T+".scale",S,"scl",s)}}return s.length===0?null:new this(r,d,s,f)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,s=t.length;n!==s;++n){const r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let n=0;n<this.tracks.length;n++)t.push(this.tracks[n].clone());const e=new this.constructor(this.name,this.duration,t,this.blendMode);return e.userData=JSON.parse(JSON.stringify(this.userData)),e}toJSON(){return this.constructor.toJSON(this)}}function DO(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return r_;case"vector":case"vector2":case"vector3":case"vector4":return o_;case"color":return Cb;case"quaternion":return R_;case"bool":case"boolean":return Vf;case"string":return Bf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function NO(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=DO(i.type);if(i.times===void 0){const e=[],n=[];Rb(i.keys,e,n,"value"),i.times=e,i.values=n}return t.parse!==void 0?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const Xl={enabled:!1,files:{},add:function(i,t){this.enabled!==!1&&(this.files[i]=t)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class Db{constructor(t,e,n){const s=this;let r=!1,u=0,f=0,d;const m=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.abortController=new AbortController,this.itemStart=function(_){f++,r===!1&&s.onStart!==void 0&&s.onStart(_,u,f),r=!0},this.itemEnd=function(_){u++,s.onProgress!==void 0&&s.onProgress(_,u,f),u===f&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(_){s.onError!==void 0&&s.onError(_)},this.resolveURL=function(_){return d?d(_):_},this.setURLModifier=function(_){return d=_,this},this.addHandler=function(_,y){return m.push(_,y),this},this.removeHandler=function(_){const y=m.indexOf(_);return y!==-1&&m.splice(y,2),this},this.getHandler=function(_){for(let y=0,S=m.length;y<S;y+=2){const T=m[y],R=m[y+1];if(T.global&&(T.lastIndex=0),T.test(_))return R}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const pC=new Db;class Tr{constructor(t){this.manager=t!==void 0?t:pC,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(s,r){n.load(t,s,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}abort(){return this}}Tr.DEFAULT_MATERIAL_NAME="__DEFAULT";const zu={};class IO extends Error{constructor(t,e){super(t),this.response=e}}class ju extends Tr{constructor(t){super(t),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(t,e,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Xl.get(`file:${t}`);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(zu[t]!==void 0){zu[t].push({onLoad:e,onProgress:n,onError:s});return}zu[t]=[],zu[t].push({onLoad:e,onProgress:n,onError:s});const u=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),f=this.mimeType,d=this.responseType;fetch(u).then(m=>{if(m.status===200||m.status===0){if(m.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||m.body===void 0||m.body.getReader===void 0)return m;const _=zu[t],y=m.body.getReader(),S=m.headers.get("X-File-Size")||m.headers.get("Content-Length"),T=S?parseInt(S):0,R=T!==0;let C=0;const w=new ReadableStream({start(M){O();function O(){y.read().then(({done:z,value:V})=>{if(z)M.close();else{C+=V.byteLength;const j=new ProgressEvent("progress",{lengthComputable:R,loaded:C,total:T});for(let q=0,L=_.length;q<L;q++){const P=_[q];P.onProgress&&P.onProgress(j)}M.enqueue(V),O()}},z=>{M.error(z)})}}});return new Response(w)}else throw new IO(`fetch for "${m.url}" responded with ${m.status}: ${m.statusText}`,m)}).then(m=>{switch(d){case"arraybuffer":return m.arrayBuffer();case"blob":return m.blob();case"document":return m.text().then(_=>new DOMParser().parseFromString(_,f));case"json":return m.json();default:if(f==="")return m.text();{const y=/charset="?([^;"\s]*)"?/i.exec(f),S=y&&y[1]?y[1].toLowerCase():void 0,T=new TextDecoder(S);return m.arrayBuffer().then(R=>T.decode(R))}}}).then(m=>{Xl.add(`file:${t}`,m);const _=zu[t];delete zu[t];for(let y=0,S=_.length;y<S;y++){const T=_[y];T.onLoad&&T.onLoad(m)}}).catch(m=>{const _=zu[t];if(_===void 0)throw this.manager.itemError(t),m;delete zu[t];for(let y=0,S=_.length;y<S;y++){const T=_[y];T.onError&&T.onError(m)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class UO extends Tr{constructor(t){super(t)}load(t,e,n,s){const r=this,u=new ju(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(f){try{e(r.parse(JSON.parse(f)))}catch(d){s?s(d):console.error(d),r.manager.itemError(t)}},n,s)}parse(t){const e=[];for(let n=0;n<t.length;n++){const s=l_.parse(t[n]);e.push(s)}return e}}class OO extends Tr{constructor(t){super(t)}load(t,e,n,s){const r=this,u=[],f=new AS,d=new ju(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(r.withCredentials);let m=0;function _(y){d.load(t[y],function(S){const T=r.parse(S,!0);u[y]={width:T.width,height:T.height,format:T.format,mipmaps:T.mipmaps},m+=1,m===6&&(T.mipmapCount===1&&(f.minFilter=bs),f.image=u,f.format=T.format,f.needsUpdate=!0,e&&e(f))},n,s)}if(Array.isArray(t))for(let y=0,S=t.length;y<S;++y)_(y);else d.load(t,function(y){const S=r.parse(y,!0);if(S.isCubemap){const T=S.mipmaps.length/S.mipmapCount;for(let R=0;R<T;R++){u[R]={mipmaps:[]};for(let C=0;C<S.mipmapCount;C++)u[R].mipmaps.push(S.mipmaps[R*S.mipmapCount+C]),u[R].format=S.format,u[R].width=S.width,u[R].height=S.height}f.image=u}else f.image.width=S.width,f.image.height=S.height,f.mipmaps=S.mipmaps;S.mipmapCount===1&&(f.minFilter=bs),f.format=S.format,f.needsUpdate=!0,e&&e(f)},n,s);return f}}const ip=new WeakMap;class u_ extends Tr{constructor(t){super(t)}load(t,e,n,s){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,u=Xl.get(`image:${t}`);if(u!==void 0){if(u.complete===!0)r.manager.itemStart(t),setTimeout(function(){e&&e(u),r.manager.itemEnd(t)},0);else{let y=ip.get(u);y===void 0&&(y=[],ip.set(u,y)),y.push({onLoad:e,onError:s})}return u}const f=e_("img");function d(){_(),e&&e(this);const y=ip.get(this)||[];for(let S=0;S<y.length;S++){const T=y[S];T.onLoad&&T.onLoad(this)}ip.delete(this),r.manager.itemEnd(t)}function m(y){_(),s&&s(y),Xl.remove(`image:${t}`);const S=ip.get(this)||[];for(let T=0;T<S.length;T++){const R=S[T];R.onError&&R.onError(y)}ip.delete(this),r.manager.itemError(t),r.manager.itemEnd(t)}function _(){f.removeEventListener("load",d,!1),f.removeEventListener("error",m,!1)}return f.addEventListener("load",d,!1),f.addEventListener("error",m,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(f.crossOrigin=this.crossOrigin),Xl.add(`image:${t}`,f),r.manager.itemStart(t),f.src=t,f}}class LO extends Tr{constructor(t){super(t)}load(t,e,n,s){const r=new x_;r.colorSpace=Ra;const u=new u_(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let f=0;function d(m){u.load(t[m],function(_){r.images[m]=_,f++,f===6&&(r.needsUpdate=!0,e&&e(r))},void 0,s)}for(let m=0;m<t.length;++m)d(m);return r}}class PO extends Tr{constructor(t){super(t)}load(t,e,n,s){const r=this,u=new Yl,f=new ju(this.manager);return f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setPath(this.path),f.setWithCredentials(r.withCredentials),f.load(t,function(d){let m;try{m=r.parse(d)}catch(_){if(s!==void 0)s(_);else{console.error(_);return}}m.image!==void 0?u.image=m.image:m.data!==void 0&&(u.image.width=m.width,u.image.height=m.height,u.image.data=m.data),u.wrapS=m.wrapS!==void 0?m.wrapS:So,u.wrapT=m.wrapT!==void 0?m.wrapT:So,u.magFilter=m.magFilter!==void 0?m.magFilter:bs,u.minFilter=m.minFilter!==void 0?m.minFilter:bs,u.anisotropy=m.anisotropy!==void 0?m.anisotropy:1,m.colorSpace!==void 0&&(u.colorSpace=m.colorSpace),m.flipY!==void 0&&(u.flipY=m.flipY),m.format!==void 0&&(u.format=m.format),m.type!==void 0&&(u.type=m.type),m.mipmaps!==void 0&&(u.mipmaps=m.mipmaps,u.minFilter=ql),m.mipmapCount===1&&(u.minFilter=bs),m.generateMipmaps!==void 0&&(u.generateMipmaps=m.generateMipmaps),u.needsUpdate=!0,e&&e(u,m)},n,s),u}}class zO extends Tr{constructor(t){super(t)}load(t,e,n,s){const r=new Qi,u=new u_(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(t,function(f){r.image=f,r.needsUpdate=!0,e!==void 0&&e(r)},n,s),r}}class gh extends Wn{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Te(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}}class mC extends gh{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Wn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Te(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const xE=new tn,gA=new tt,_A=new tt;class Nb{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Jt(512,512),this.mapType=xo,this.map=null,this.mapPass=null,this.matrix=new tn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Xp,this._frameExtents=new Jt(1,1),this._viewportCount=1,this._viewports=[new Yn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;gA.setFromMatrixPosition(t.matrixWorld),e.position.copy(gA),_A.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(_A),e.updateMatrixWorld(),xE.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xE,e.coordinateSystem,e.reversedDepth),e.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(xE)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class VO extends Nb{constructor(){super(new Bs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(t){const e=this.camera,n=wp*2*t.angle*this.focus,s=this.mapSize.width/this.mapSize.height*this.aspect,r=t.distance||e.far;(n!==e.fov||s!==e.aspect||r!==e.far)&&(e.fov=n,e.aspect=s,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class gC extends gh{constructor(t,e,n=0,s=Math.PI/3,r=0,u=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Wn.DEFAULT_UP),this.updateMatrix(),this.target=new Wn,this.distance=n,this.angle=s,this.penumbra=r,this.decay=u,this.map=null,this.shadow=new VO}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const yA=new tn,Mg=new tt,EE=new tt;class BO extends Nb{constructor(){super(new Bs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Jt(4,2),this._viewportCount=6,this._viewports=[new Yn(2,1,1,1),new Yn(0,1,1,1),new Yn(3,1,1,1),new Yn(1,1,1,1),new Yn(3,0,1,1),new Yn(1,0,1,1)],this._cubeDirections=[new tt(1,0,0),new tt(-1,0,0),new tt(0,0,1),new tt(0,0,-1),new tt(0,1,0),new tt(0,-1,0)],this._cubeUps=[new tt(0,1,0),new tt(0,1,0),new tt(0,1,0),new tt(0,1,0),new tt(0,0,1),new tt(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,s=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Mg.setFromMatrixPosition(t.matrixWorld),n.position.copy(Mg),EE.copy(n.position),EE.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(EE),n.updateMatrixWorld(),s.makeTranslation(-Mg.x,-Mg.y,-Mg.z),yA.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yA,n.coordinateSystem,n.reversedDepth)}}class _C extends gh{constructor(t,e,n=0,s=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new BO}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class w_ extends SS{constructor(t=-1,e=1,n=1,s=-1,r=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=s,this.near=r,this.far=u,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,s,r,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-t,u=n+t,f=s+e,d=s-e;if(this.view!==null&&this.view.enabled){const m=(this.right-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=m*this.view.offsetX,u=r+m*this.view.width,f-=_*this.view.offsetY,d=f-_*this.view.height}this.projectionMatrix.makeOrthographic(r,u,f,d,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class FO extends Nb{constructor(){super(new w_(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class yC extends gh{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Wn.DEFAULT_UP),this.updateMatrix(),this.target=new Wn,this.shadow=new FO}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class vC extends gh{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class SC extends gh{constructor(t,e,n=10,s=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class xC{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new tt)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,s=t.y,r=t.z,u=this.coefficients;return e.copy(u[0]).multiplyScalar(.282095),e.addScaledVector(u[1],.488603*s),e.addScaledVector(u[2],.488603*r),e.addScaledVector(u[3],.488603*n),e.addScaledVector(u[4],1.092548*(n*s)),e.addScaledVector(u[5],1.092548*(s*r)),e.addScaledVector(u[6],.315392*(3*r*r-1)),e.addScaledVector(u[7],1.092548*(n*r)),e.addScaledVector(u[8],.546274*(n*n-s*s)),e}getIrradianceAt(t,e){const n=t.x,s=t.y,r=t.z,u=this.coefficients;return e.copy(u[0]).multiplyScalar(.886227),e.addScaledVector(u[1],2*.511664*s),e.addScaledVector(u[2],2*.511664*r),e.addScaledVector(u[3],2*.511664*n),e.addScaledVector(u[4],2*.429043*n*s),e.addScaledVector(u[5],2*.429043*s*r),e.addScaledVector(u[6],.743125*r*r-.247708),e.addScaledVector(u[7],2*.429043*n*r),e.addScaledVector(u[8],.429043*(n*n-s*s)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(t,e+s*3);return this}toArray(t=[],e=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(t,e+s*3);return t}static getBasisAt(t,e){const n=t.x,s=t.y,r=t.z;e[0]=.282095,e[1]=.488603*s,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*s,e[5]=1.092548*s*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-s*s)}}class EC extends gh{constructor(t=new xC,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class FS extends Tr{constructor(t){super(t),this.textures={}}load(t,e,n,s){const r=this,u=new ju(r.manager);u.setPath(r.path),u.setRequestHeader(r.requestHeader),u.setWithCredentials(r.withCredentials),u.load(t,function(f){try{e(r.parse(JSON.parse(f)))}catch(d){s?s(d):console.error(d),r.manager.itemError(t)}},n,s)}parse(t){const e=this.textures;function n(r){return e[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),e[r]}const s=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(s.uuid=t.uuid),t.name!==void 0&&(s.name=t.name),t.color!==void 0&&s.color!==void 0&&s.color.setHex(t.color),t.roughness!==void 0&&(s.roughness=t.roughness),t.metalness!==void 0&&(s.metalness=t.metalness),t.sheen!==void 0&&(s.sheen=t.sheen),t.sheenColor!==void 0&&(s.sheenColor=new Te().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(s.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(t.emissive),t.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(t.specular),t.specularIntensity!==void 0&&(s.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(s.shininess=t.shininess),t.clearcoat!==void 0&&(s.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(s.dispersion=t.dispersion),t.iridescence!==void 0&&(s.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(s.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(s.transmission=t.transmission),t.thickness!==void 0&&(s.thickness=t.thickness),t.attenuationDistance!==void 0&&(s.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(s.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(s.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(s.fog=t.fog),t.flatShading!==void 0&&(s.flatShading=t.flatShading),t.blending!==void 0&&(s.blending=t.blending),t.combine!==void 0&&(s.combine=t.combine),t.side!==void 0&&(s.side=t.side),t.shadowSide!==void 0&&(s.shadowSide=t.shadowSide),t.opacity!==void 0&&(s.opacity=t.opacity),t.transparent!==void 0&&(s.transparent=t.transparent),t.alphaTest!==void 0&&(s.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(s.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(s.depthFunc=t.depthFunc),t.depthTest!==void 0&&(s.depthTest=t.depthTest),t.depthWrite!==void 0&&(s.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(s.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(s.blendSrc=t.blendSrc),t.blendDst!==void 0&&(s.blendDst=t.blendDst),t.blendEquation!==void 0&&(s.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(s.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(s.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(s.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(s.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(s.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(s.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(s.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(s.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(s.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(s.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(s.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(s.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(s.rotation=t.rotation),t.linewidth!==void 0&&(s.linewidth=t.linewidth),t.dashSize!==void 0&&(s.dashSize=t.dashSize),t.gapSize!==void 0&&(s.gapSize=t.gapSize),t.scale!==void 0&&(s.scale=t.scale),t.polygonOffset!==void 0&&(s.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(s.dithering=t.dithering),t.alphaToCoverage!==void 0&&(s.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(s.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(s.visible=t.visible),t.toneMapped!==void 0&&(s.toneMapped=t.toneMapped),t.userData!==void 0&&(s.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?s.vertexColors=t.vertexColors>0:s.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const r in t.uniforms){const u=t.uniforms[r];switch(s.uniforms[r]={},u.type){case"t":s.uniforms[r].value=n(u.value);break;case"c":s.uniforms[r].value=new Te().setHex(u.value);break;case"v2":s.uniforms[r].value=new Jt().fromArray(u.value);break;case"v3":s.uniforms[r].value=new tt().fromArray(u.value);break;case"v4":s.uniforms[r].value=new Yn().fromArray(u.value);break;case"m3":s.uniforms[r].value=new pn().fromArray(u.value);break;case"m4":s.uniforms[r].value=new tn().fromArray(u.value);break;default:s.uniforms[r].value=u.value}}if(t.defines!==void 0&&(s.defines=t.defines),t.vertexShader!==void 0&&(s.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(s.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(s.glslVersion=t.glslVersion),t.extensions!==void 0)for(const r in t.extensions)s.extensions[r]=t.extensions[r];if(t.lights!==void 0&&(s.lights=t.lights),t.clipping!==void 0&&(s.clipping=t.clipping),t.size!==void 0&&(s.size=t.size),t.sizeAttenuation!==void 0&&(s.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(s.map=n(t.map)),t.matcap!==void 0&&(s.matcap=n(t.matcap)),t.alphaMap!==void 0&&(s.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(s.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(s.bumpScale=t.bumpScale),t.normalMap!==void 0&&(s.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(s.normalMapType=t.normalMapType),t.normalScale!==void 0){let r=t.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new Jt().fromArray(r)}return t.displacementMap!==void 0&&(s.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(s.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(s.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(s.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(s.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(s.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(s.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(s.specularMap=n(t.specularMap)),t.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(t.specularIntensityMap)),t.specularColorMap!==void 0&&(s.specularColorMap=n(t.specularColorMap)),t.envMap!==void 0&&(s.envMap=n(t.envMap)),t.envMapRotation!==void 0&&s.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(s.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(s.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(s.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(s.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(s.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(s.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(s.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(s.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(s.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Jt().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(s.iridescenceMap=n(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(s.transmissionMap=n(t.transmissionMap)),t.thicknessMap!==void 0&&(s.thicknessMap=n(t.thicknessMap)),t.anisotropyMap!==void 0&&(s.anisotropyMap=n(t.anisotropyMap)),t.sheenColorMap!==void 0&&(s.sheenColorMap=n(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(t.sheenRoughnessMap)),s}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return FS.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:tC,SpriteMaterial:db,RawShaderMaterial:eC,ShaderMaterial:il,PointsMaterial:mb,MeshPhysicalMaterial:nC,MeshStandardMaterial:bb,MeshPhongMaterial:iC,MeshToonMaterial:sC,MeshNormalMaterial:aC,MeshLambertMaterial:rC,MeshDepthMaterial:Mb,MeshDistanceMaterial:Ab,MeshBasicMaterial:ph,MeshMatcapMaterial:oC,LineDashedMaterial:lC,LineBasicMaterial:ir,Material:Na};return new e[t]}}class _T{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class TC extends _n{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class bC extends Tr{constructor(t){super(t)}load(t,e,n,s){const r=this,u=new ju(r.manager);u.setPath(r.path),u.setRequestHeader(r.requestHeader),u.setWithCredentials(r.withCredentials),u.load(t,function(f){try{e(r.parse(JSON.parse(f)))}catch(d){s?s(d):console.error(d),r.manager.itemError(t)}},n,s)}parse(t){const e={},n={};function s(T,R){if(e[R]!==void 0)return e[R];const w=T.interleavedBuffers[R],M=r(T,w.buffer),O=mp(w.type,M),z=new TS(O,w.stride);return z.uuid=w.uuid,e[R]=z,z}function r(T,R){if(n[R]!==void 0)return n[R];const w=T.arrayBuffers[R],M=new Uint32Array(w).buffer;return n[R]=M,M}const u=t.isInstancedBufferGeometry?new TC:new _n,f=t.data.index;if(f!==void 0){const T=mp(f.type,f.array);u.setIndex(new pi(T,1))}const d=t.data.attributes;for(const T in d){const R=d[T];let C;if(R.isInterleavedBufferAttribute){const w=s(t.data,R.data);C=new If(w,R.itemSize,R.offset,R.normalized)}else{const w=mp(R.type,R.array),M=R.isInstancedBufferAttribute?Np:pi;C=new M(w,R.itemSize,R.normalized)}R.name!==void 0&&(C.name=R.name),R.usage!==void 0&&C.setUsage(R.usage),u.setAttribute(T,C)}const m=t.data.morphAttributes;if(m)for(const T in m){const R=m[T],C=[];for(let w=0,M=R.length;w<M;w++){const O=R[w];let z;if(O.isInterleavedBufferAttribute){const V=s(t.data,O.data);z=new If(V,O.itemSize,O.offset,O.normalized)}else{const V=mp(O.type,O.array);z=new pi(V,O.itemSize,O.normalized)}O.name!==void 0&&(z.name=O.name),C.push(z)}u.morphAttributes[T]=C}t.data.morphTargetsRelative&&(u.morphTargetsRelative=!0);const y=t.data.groups||t.data.drawcalls||t.data.offsets;if(y!==void 0)for(let T=0,R=y.length;T!==R;++T){const C=y[T];u.addGroup(C.start,C.count,C.materialIndex)}const S=t.data.boundingSphere;return S!==void 0&&(u.boundingSphere=new ia().fromJSON(S)),t.name&&(u.name=t.name),t.userData&&(u.userData=t.userData),u}}class HO extends Tr{constructor(t){super(t)}load(t,e,n,s){const r=this,u=this.path===""?_T.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||u;const f=new ju(this.manager);f.setPath(this.path),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(t,function(d){let m=null;try{m=JSON.parse(d)}catch(y){s!==void 0&&s(y),console.error("THREE:ObjectLoader: Can't parse "+t+".",y.message);return}const _=m.metadata;if(_===void 0||_.type===void 0||_.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}r.parse(m,e)},n,s)}async loadAsync(t,e){const n=this,s=this.path===""?_T.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const r=new ju(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const u=await r.loadAsync(t,e),f=JSON.parse(u),d=f.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await n.parseAsync(f)}parse(t,e){const n=this.parseAnimations(t.animations),s=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,s),u=this.parseImages(t.images,function(){e!==void 0&&e(m)}),f=this.parseTextures(t.textures,u),d=this.parseMaterials(t.materials,f),m=this.parseObject(t.object,r,d,f,n),_=this.parseSkeletons(t.skeletons,m);if(this.bindSkeletons(m,_),this.bindLightTargets(m),e!==void 0){let y=!1;for(const S in u)if(u[S].data instanceof HTMLImageElement){y=!0;break}y===!1&&e(m)}return m}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),u=this.parseTextures(t.textures,r),f=this.parseMaterials(t.materials,u),d=this.parseObject(t.object,s,f,u,e),m=this.parseSkeletons(t.skeletons,d);return this.bindSkeletons(d,m),this.bindLightTargets(d),d}parseShapes(t){const e={};if(t!==void 0)for(let n=0,s=t.length;n<s;n++){const r=new Df().fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},s={};if(e.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),t!==void 0)for(let r=0,u=t.length;r<u;r++){const f=new bS().fromJSON(t[r],s);n[f.uuid]=f}return n}parseGeometries(t,e){const n={};if(t!==void 0){const s=new bC;for(let r=0,u=t.length;r<u;r++){let f;const d=t[r];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":f=s.parse(d);break;default:d.type in mA?f=mA[d.type].fromJSON(d,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}f.uuid=d.uuid,d.name!==void 0&&(f.name=d.name),d.userData!==void 0&&(f.userData=d.userData),n[d.uuid]=f}}return n}parseMaterials(t,e){const n={},s={};if(t!==void 0){const r=new FS;r.setTextures(e);for(let u=0,f=t.length;u<f;u++){const d=t[u];n[d.uuid]===void 0&&(n[d.uuid]=r.parse(d)),s[d.uuid]=n[d.uuid]}}return s}parseAnimations(t){const e={};if(t!==void 0)for(let n=0;n<t.length;n++){const s=t[n],r=l_.parse(s);e[r.uuid]=r}return e}parseImages(t,e){const n=this,s={};let r;function u(d){return n.manager.itemStart(d),r.load(d,function(){n.manager.itemEnd(d)},void 0,function(){n.manager.itemError(d),n.manager.itemEnd(d)})}function f(d){if(typeof d=="string"){const m=d,_=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(m)?m:n.resourcePath+m;return u(_)}else return d.data?{data:mp(d.type,d.data),width:d.width,height:d.height}:null}if(t!==void 0&&t.length>0){const d=new Db(e);r=new u_(d),r.setCrossOrigin(this.crossOrigin);for(let m=0,_=t.length;m<_;m++){const y=t[m],S=y.url;if(Array.isArray(S)){const T=[];for(let R=0,C=S.length;R<C;R++){const w=S[R],M=f(w);M!==null&&(M instanceof HTMLImageElement?T.push(M):T.push(new Yl(M.data,M.width,M.height)))}s[y.uuid]=new Zc(T)}else{const T=f(y.url);s[y.uuid]=new Zc(T)}}}return s}async parseImagesAsync(t){const e=this,n={};let s;async function r(u){if(typeof u=="string"){const f=u,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:e.resourcePath+f;return await s.loadAsync(d)}else return u.data?{data:mp(u.type,u.data),width:u.width,height:u.height}:null}if(t!==void 0&&t.length>0){s=new u_(this.manager),s.setCrossOrigin(this.crossOrigin);for(let u=0,f=t.length;u<f;u++){const d=t[u],m=d.url;if(Array.isArray(m)){const _=[];for(let y=0,S=m.length;y<S;y++){const T=m[y],R=await r(T);R!==null&&(R instanceof HTMLImageElement?_.push(R):_.push(new Yl(R.data,R.width,R.height)))}n[d.uuid]=new Zc(_)}else{const _=await r(d.url);n[d.uuid]=new Zc(_)}}}return n}parseTextures(t,e){function n(r,u){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),u[r])}const s={};if(t!==void 0)for(let r=0,u=t.length;r<u;r++){const f=t[r];f.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',f.uuid),e[f.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",f.image);const d=e[f.image],m=d.data;let _;Array.isArray(m)?(_=new x_,m.length===6&&(_.needsUpdate=!0)):(m&&m.data?_=new Yl:_=new Qi,m&&(_.needsUpdate=!0)),_.source=d,_.uuid=f.uuid,f.name!==void 0&&(_.name=f.name),f.mapping!==void 0&&(_.mapping=n(f.mapping,GO)),f.channel!==void 0&&(_.channel=f.channel),f.offset!==void 0&&_.offset.fromArray(f.offset),f.repeat!==void 0&&_.repeat.fromArray(f.repeat),f.center!==void 0&&_.center.fromArray(f.center),f.rotation!==void 0&&(_.rotation=f.rotation),f.wrap!==void 0&&(_.wrapS=n(f.wrap[0],vA),_.wrapT=n(f.wrap[1],vA)),f.format!==void 0&&(_.format=f.format),f.internalFormat!==void 0&&(_.internalFormat=f.internalFormat),f.type!==void 0&&(_.type=f.type),f.colorSpace!==void 0&&(_.colorSpace=f.colorSpace),f.minFilter!==void 0&&(_.minFilter=n(f.minFilter,SA)),f.magFilter!==void 0&&(_.magFilter=n(f.magFilter,SA)),f.anisotropy!==void 0&&(_.anisotropy=f.anisotropy),f.flipY!==void 0&&(_.flipY=f.flipY),f.generateMipmaps!==void 0&&(_.generateMipmaps=f.generateMipmaps),f.premultiplyAlpha!==void 0&&(_.premultiplyAlpha=f.premultiplyAlpha),f.unpackAlignment!==void 0&&(_.unpackAlignment=f.unpackAlignment),f.compareFunction!==void 0&&(_.compareFunction=f.compareFunction),f.userData!==void 0&&(_.userData=f.userData),s[f.uuid]=_}return s}parseObject(t,e,n,s,r){let u;function f(S){return e[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",S),e[S]}function d(S){if(S!==void 0){if(Array.isArray(S)){const T=[];for(let R=0,C=S.length;R<C;R++){const w=S[R];n[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),T.push(n[w])}return T}return n[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),n[S]}}function m(S){return s[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",S),s[S]}let _,y;switch(t.type){case"Scene":u=new fb,t.background!==void 0&&(Number.isInteger(t.background)?u.background=new Te(t.background):u.background=m(t.background)),t.environment!==void 0&&(u.environment=m(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?u.fog=new ES(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(u.fog=new xS(t.fog.color,t.fog.density)),t.fog.name!==""&&(u.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(u.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(u.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&u.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(u.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&u.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":u=new Bs(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(u.focus=t.focus),t.zoom!==void 0&&(u.zoom=t.zoom),t.filmGauge!==void 0&&(u.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(u.filmOffset=t.filmOffset),t.view!==void 0&&(u.view=Object.assign({},t.view));break;case"OrthographicCamera":u=new w_(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(u.zoom=t.zoom),t.view!==void 0&&(u.view=Object.assign({},t.view));break;case"AmbientLight":u=new vC(t.color,t.intensity);break;case"DirectionalLight":u=new yC(t.color,t.intensity),u.target=t.target||"";break;case"PointLight":u=new _C(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":u=new SC(t.color,t.intensity,t.width,t.height);break;case"SpotLight":u=new gC(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),u.target=t.target||"";break;case"HemisphereLight":u=new mC(t.color,t.groundColor,t.intensity);break;case"LightProbe":u=new EC().fromJSON(t);break;case"SkinnedMesh":_=f(t.geometry),y=d(t.material),u=new zw(_,y),t.bindMode!==void 0&&(u.bindMode=t.bindMode),t.bindMatrix!==void 0&&u.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(u.skeleton=t.skeleton);break;case"Mesh":_=f(t.geometry),y=d(t.material),u=new ms(_,y);break;case"InstancedMesh":_=f(t.geometry),y=d(t.material);const S=t.count,T=t.instanceMatrix,R=t.instanceColor;u=new Vw(_,y,S),u.instanceMatrix=new Np(new Float32Array(T.array),16),R!==void 0&&(u.instanceColor=new Np(new Float32Array(R.array),R.itemSize));break;case"BatchedMesh":_=f(t.geometry),y=d(t.material),u=new Bw(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,y),u.geometry=_,u.perObjectFrustumCulled=t.perObjectFrustumCulled,u.sortObjects=t.sortObjects,u._drawRanges=t.drawRanges,u._reservedRanges=t.reservedRanges,u._geometryInfo=t.geometryInfo.map(C=>{let w=null,M=null;return C.boundingBox!==void 0&&(w=new Da().fromJSON(C.boundingBox)),C.boundingSphere!==void 0&&(M=new ia().fromJSON(C.boundingSphere)),{...C,boundingBox:w,boundingSphere:M}}),u._instanceInfo=t.instanceInfo,u._availableInstanceIds=t._availableInstanceIds,u._availableGeometryIds=t._availableGeometryIds,u._nextIndexStart=t.nextIndexStart,u._nextVertexStart=t.nextVertexStart,u._geometryCount=t.geometryCount,u._maxInstanceCount=t.maxInstanceCount,u._maxVertexCount=t.maxVertexCount,u._maxIndexCount=t.maxIndexCount,u._geometryInitialized=t.geometryInitialized,u._matricesTexture=m(t.matricesTexture.uuid),u._indirectTexture=m(t.indirectTexture.uuid),t.colorsTexture!==void 0&&(u._colorsTexture=m(t.colorsTexture.uuid)),t.boundingSphere!==void 0&&(u.boundingSphere=new ia().fromJSON(t.boundingSphere)),t.boundingBox!==void 0&&(u.boundingBox=new Da().fromJSON(t.boundingBox));break;case"LOD":u=new Pw;break;case"Line":u=new rh(f(t.geometry),d(t.material));break;case"LineLoop":u=new Fw(f(t.geometry),d(t.material));break;case"LineSegments":u=new eu(f(t.geometry),d(t.material));break;case"PointCloud":case"Points":u=new Hw(f(t.geometry),d(t.material));break;case"Sprite":u=new Lw(d(t.material));break;case"Group":u=new gp;break;case"Bone":u=new pb;break;default:u=new Wn}if(u.uuid=t.uuid,t.name!==void 0&&(u.name=t.name),t.matrix!==void 0?(u.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(u.matrixAutoUpdate=t.matrixAutoUpdate),u.matrixAutoUpdate&&u.matrix.decompose(u.position,u.quaternion,u.scale)):(t.position!==void 0&&u.position.fromArray(t.position),t.rotation!==void 0&&u.rotation.fromArray(t.rotation),t.quaternion!==void 0&&u.quaternion.fromArray(t.quaternion),t.scale!==void 0&&u.scale.fromArray(t.scale)),t.up!==void 0&&u.up.fromArray(t.up),t.castShadow!==void 0&&(u.castShadow=t.castShadow),t.receiveShadow!==void 0&&(u.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(u.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(u.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(u.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(u.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&u.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(u.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(u.visible=t.visible),t.frustumCulled!==void 0&&(u.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(u.renderOrder=t.renderOrder),t.userData!==void 0&&(u.userData=t.userData),t.layers!==void 0&&(u.layers.mask=t.layers),t.children!==void 0){const S=t.children;for(let T=0;T<S.length;T++)u.add(this.parseObject(S[T],e,n,s,r))}if(t.animations!==void 0){const S=t.animations;for(let T=0;T<S.length;T++){const R=S[T];u.animations.push(r[R])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(u.autoUpdate=t.autoUpdate);const S=t.levels;for(let T=0;T<S.length;T++){const R=S[T],C=u.getObjectByProperty("uuid",R.object);C!==void 0&&u.addLevel(C,R.distance,R.hysteresis)}}return u}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=e[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const n=e.target,s=t.getObjectByProperty("uuid",n);s!==void 0?e.target=s:e.target=new Wn}})}}const GO={UVMapping:cS,CubeReflectionMapping:qu,CubeRefractionMapping:sh,EquirectangularReflectionMapping:Yg,EquirectangularRefractionMapping:Wg,CubeUVReflectionMapping:Gp},vA={RepeatWrapping:Kg,ClampToEdgeWrapping:So,MirroredRepeatWrapping:Qg},SA={NearestFilter:na,NearestMipmapNearestFilter:JT,NearestMipmapLinearFilter:pp,LinearFilter:bs,LinearMipmapNearestFilter:Ug,LinearMipmapLinearFilter:ql},TE=new WeakMap;class kO extends Tr{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(t){return this.options=t,this}load(t,e,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,u=Xl.get(`image-bitmap:${t}`);if(u!==void 0){if(r.manager.itemStart(t),u.then){u.then(m=>{if(TE.has(u)===!0)s&&s(TE.get(u)),r.manager.itemError(t),r.manager.itemEnd(t);else return e&&e(m),r.manager.itemEnd(t),m});return}return setTimeout(function(){e&&e(u),r.manager.itemEnd(t)},0),u}const f={};f.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",f.headers=this.requestHeader,f.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const d=fetch(t,f).then(function(m){return m.blob()}).then(function(m){return createImageBitmap(m,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(m){return Xl.add(`image-bitmap:${t}`,m),e&&e(m),r.manager.itemEnd(t),m}).catch(function(m){s&&s(m),TE.set(d,m),Xl.remove(`image-bitmap:${t}`),r.manager.itemError(t),r.manager.itemEnd(t)});Xl.add(`image-bitmap:${t}`,d),r.manager.itemStart(t)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let bv;class Ib{static getContext(){return bv===void 0&&(bv=new(window.AudioContext||window.webkitAudioContext)),bv}static setContext(t){bv=t}}class qO extends Tr{constructor(t){super(t)}load(t,e,n,s){const r=this,u=new ju(this.manager);u.setResponseType("arraybuffer"),u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(d){try{const m=d.slice(0);Ib.getContext().decodeAudioData(m,function(y){e(y)}).catch(f)}catch(m){f(m)}},n,s);function f(d){s?s(d):console.error(d),r.manager.itemError(t)}}}const xA=new tn,EA=new tn,ff=new tn;class XO{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Bs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Bs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,ff.copy(t.projectionMatrix);const s=e.eyeSep/2,r=s*e.near/e.focus,u=e.near*Math.tan(Cf*e.fov*.5)/e.zoom;let f,d;EA.elements[12]=-s,xA.elements[12]=s,f=-u*e.aspect+r,d=u*e.aspect+r,ff.elements[0]=2*e.near/(d-f),ff.elements[8]=(d+f)/(d-f),this.cameraL.projectionMatrix.copy(ff),f=-u*e.aspect-r,d=u*e.aspect-r,ff.elements[0]=2*e.near/(d-f),ff.elements[8]=(d+f)/(d-f),this.cameraR.projectionMatrix.copy(ff)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(EA),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(xA)}}class MC extends Bs{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}class Ub{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=performance.now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}const df=new tt,bE=new Er,jO=new tt,pf=new tt,mf=new tt;class YO extends Wn{constructor(){super(),this.type="AudioListener",this.context=Ib.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ub}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(df,bE,jO),pf.set(0,0,-1).applyQuaternion(bE),mf.set(0,1,0).applyQuaternion(bE),e.positionX){const n=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(df.x,n),e.positionY.linearRampToValueAtTime(df.y,n),e.positionZ.linearRampToValueAtTime(df.z,n),e.forwardX.linearRampToValueAtTime(pf.x,n),e.forwardY.linearRampToValueAtTime(pf.y,n),e.forwardZ.linearRampToValueAtTime(pf.z,n),e.upX.linearRampToValueAtTime(mf.x,n),e.upY.linearRampToValueAtTime(mf.y,n),e.upZ.linearRampToValueAtTime(mf.z,n)}else e.setPosition(df.x,df.y,df.z),e.setOrientation(pf.x,pf.y,pf.z,mf.x,mf.y,mf.z)}}class AC extends Wn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const gf=new tt,TA=new Er,WO=new tt,_f=new tt;class KO extends AC{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(gf,TA,WO),_f.set(0,0,1).applyQuaternion(TA);const e=this.panner;if(e.positionX){const n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(gf.x,n),e.positionY.linearRampToValueAtTime(gf.y,n),e.positionZ.linearRampToValueAtTime(gf.z,n),e.orientationX.linearRampToValueAtTime(_f.x,n),e.orientationY.linearRampToValueAtTime(_f.y,n),e.orientationZ.linearRampToValueAtTime(_f.z,n)}else e.setPosition(gf.x,gf.y,gf.z),e.setOrientation(_f.x,_f.y,_f.z)}}class QO{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class RC{constructor(t,e,n){this.binding=t,this.valueSize=n;let s,r,u;switch(e){case"quaternion":s=this._slerp,r=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,r=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,s=this.valueSize,r=t*s+s;let u=this.cumulativeWeight;if(u===0){for(let f=0;f!==s;++f)n[r+f]=n[f];u=e}else{u+=e;const f=e/u;this._mixBufferRegion(n,r,0,f,s)}this.cumulativeWeight=u}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,s,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,s=t*e+e,r=this.cumulativeWeight,u=this.cumulativeWeightAdditive,f=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const d=e*this._origIndex;this._mixBufferRegion(n,s,d,1-r,e)}u>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*e,1,e);for(let d=e,m=e+e;d!==m;++d)if(n[d]!==n[d+e]){f.setValue(n,s);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,s=n*this._origIndex;t.getValue(e,s);for(let r=n,u=s;r!==u;++r)e[r]=e[s+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,s,r){if(s>=.5)for(let u=0;u!==r;++u)t[e+u]=t[n+u]}_slerp(t,e,n,s){Er.slerpFlat(t,e,t,e,t,n,s)}_slerpAdditive(t,e,n,s,r){const u=this._workIndex*r;Er.multiplyQuaternionsFlat(t,u,t,e,t,n),Er.slerpFlat(t,e,t,e,t,u,s)}_lerp(t,e,n,s,r){const u=1-s;for(let f=0;f!==r;++f){const d=e+f;t[d]=t[d]*u+t[n+f]*s}}_lerpAdditive(t,e,n,s,r){for(let u=0;u!==r;++u){const f=e+u;t[f]=t[f]+t[n+u]*s}}}const Ob="\\[\\]\\.:\\/",ZO=new RegExp("["+Ob+"]","g"),Lb="[^"+Ob+"]",JO="[^"+Ob.replace("\\.","")+"]",$O=/((?:WC+[\/:])*)/.source.replace("WC",Lb),tL=/(WCOD+)?/.source.replace("WCOD",JO),eL=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Lb),nL=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Lb),iL=new RegExp("^"+$O+tL+eL+nL+"$"),sL=["material","materials","bones","map"];class aL{constructor(t,e,n){const s=n||jn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,s)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=n.length;s!==r;++s)n[s].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class jn{constructor(t,e,n){this.path=e,this.parsedPath=n||jn.parseTrackName(e),this.node=jn.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new jn.Composite(t,e,n):new jn(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(ZO,"")}static parseTrackName(t){const e=iL.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=n.nodeName.substring(s+1);sL.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(r){for(let u=0;u<r.length;u++){const f=r[u];if(f.name===e||f.uuid===e)return f;const d=n(f.children);if(d)return d}return null},s=n(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)t[e++]=n[s]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,s=e.propertyName;let r=e.propertyIndex;if(t||(t=jn.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let m=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let _=0;_<t.length;_++)if(t[_].name===m){m=_;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(m!==void 0){if(t[m]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[m]}}const u=t[s];if(u===void 0){const m=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+m+"."+s+" but it wasn't found.",t);return}let f=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?f=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(f=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[r]!==void 0&&(r=t.morphTargetDictionary[r])}d=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=r}else u.fromArray!==void 0&&u.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(d=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][f]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}jn.Composite=aL;jn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};jn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};jn.prototype.GetterByBindingType=[jn.prototype._getValue_direct,jn.prototype._getValue_array,jn.prototype._getValue_arrayElement,jn.prototype._getValue_toArray];jn.prototype.SetterByBindingTypeAndVersioning=[[jn.prototype._setValue_direct,jn.prototype._setValue_direct_setNeedsUpdate,jn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[jn.prototype._setValue_array,jn.prototype._setValue_array_setNeedsUpdate,jn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[jn.prototype._setValue_arrayElement,jn.prototype._setValue_arrayElement_setNeedsUpdate,jn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[jn.prototype._setValue_fromArray,jn.prototype._setValue_fromArray_setNeedsUpdate,jn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class rL{constructor(){this.isAnimationObjectGroup=!0,this.uuid=qr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,s=arguments.length;n!==s;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,s=this._parsedPaths,r=this._bindings,u=r.length;let f,d=t.length,m=this.nCachedObjects_;for(let _=0,y=arguments.length;_!==y;++_){const S=arguments[_],T=S.uuid;let R=e[T];if(R===void 0){R=d++,e[T]=R,t.push(S);for(let C=0,w=u;C!==w;++C)r[C].push(new jn(S,n[C],s[C]))}else if(R<m){f=t[R];const C=--m,w=t[C];e[w.uuid]=R,t[R]=w,e[T]=C,t[C]=S;for(let M=0,O=u;M!==O;++M){const z=r[M],V=z[C];let j=z[R];z[R]=V,j===void 0&&(j=new jn(S,n[M],s[M])),z[C]=j}}else t[R]!==f&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=m}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const d=arguments[u],m=d.uuid,_=e[m];if(_!==void 0&&_>=r){const y=r++,S=t[y];e[S.uuid]=_,t[_]=S,e[m]=y,t[y]=d;for(let T=0,R=s;T!==R;++T){const C=n[T],w=C[y],M=C[_];C[_]=w,C[y]=M}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_,u=t.length;for(let f=0,d=arguments.length;f!==d;++f){const m=arguments[f],_=m.uuid,y=e[_];if(y!==void 0)if(delete e[_],y<r){const S=--r,T=t[S],R=--u,C=t[R];e[T.uuid]=y,t[y]=T,e[C.uuid]=S,t[S]=C,t.pop();for(let w=0,M=s;w!==M;++w){const O=n[w],z=O[S],V=O[R];O[y]=z,O[S]=V,O.pop()}}else{const S=--u,T=t[S];S>0&&(e[T.uuid]=y),t[y]=T,t.pop();for(let R=0,C=s;R!==C;++R){const w=n[R];w[y]=w[S],w.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let s=n[t];const r=this._bindings;if(s!==void 0)return r[s];const u=this._paths,f=this._parsedPaths,d=this._objects,m=d.length,_=this.nCachedObjects_,y=new Array(m);s=r.length,n[t]=s,u.push(t),f.push(e),r.push(y);for(let S=_,T=d.length;S!==T;++S){const R=d[S];y[S]=new jn(R,t,e)}return y}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const s=this._paths,r=this._parsedPaths,u=this._bindings,f=u.length-1,d=u[f],m=t[f];e[m]=n,u[n]=d,u.pop(),r[n]=r[f],r.pop(),s[n]=s[f],s.pop()}}}class wC{constructor(t,e,n=null,s=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=s;const r=e.tracks,u=r.length,f=new Array(u),d={endingStart:bf,endingEnd:bf};for(let m=0;m!==u;++m){const _=r[m].createInterpolant(null);f[m]=_,_.settings=d}this._interpolantSettings=d,this._interpolants=f,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=pw,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n=!1){if(t.fadeOut(e),this.fadeIn(e),n===!0){const s=this._clip.duration,r=t._clip.duration,u=r/s,f=s/r;t.warp(1,u,e),this.warp(f,1,e)}return this}crossFadeTo(t,e,n=!1){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const s=this._mixer,r=s.time,u=this.timeScale;let f=this._timeScaleInterpolant;f===null&&(f=s._lendControlInterpolant(),this._timeScaleInterpolant=f);const d=f.parameterPositions,m=f.sampleValues;return d[0]=r,d[1]=r+n,m[0]=t/u,m[1]=e/u,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,s){if(!this.enabled){this._updateWeight(t);return}const r=this._startTime;if(r!==null){const d=(t-r)*n;d<0||n===0?e=0:(this._startTime=null,e=n*d)}e*=this._updateTimeScale(t);const u=this._updateTime(e),f=this._updateWeight(t);if(f>0){const d=this._interpolants,m=this._propertyBindings;switch(this.blendMode){case rb:for(let _=0,y=d.length;_!==y;++_)d[_].evaluate(u),m[_].accumulateAdditive(f);break;case _S:default:for(let _=0,y=d.length;_!==y;++_)d[_].evaluate(u),m[_].accumulate(s,f)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(t)[0];e*=s,t>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(t)[0];e*=s,t>n.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let s=this.time+t,r=this._loopCount;const u=n===mw;if(t===0)return r===-1?s:u&&(r&1)===1?e-s:s;if(n===dw){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(s>=e)s=e;else if(s<0)s=0;else{this.time=s;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(r===-1&&(t>=0?(r=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),s>=e||s<0){const f=Math.floor(s/e);s-=e*f,r+=Math.abs(f);const d=this.repetitions-r;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=t>0?e:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(d===1){const m=t<0;this._setEndings(m,!m,u)}else this._setEndings(!1,!1,u);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f})}}else this.time=s;if(u&&(r&1)===1)return e-s}return s}_setEndings(t,e,n){const s=this._interpolantSettings;n?(s.endingStart=Mf,s.endingEnd=Mf):(t?s.endingStart=this.zeroSlopeAtStart?Mf:bf:s.endingStart=Jg,e?s.endingEnd=this.zeroSlopeAtEnd?Mf:bf:s.endingEnd=Jg)}_scheduleFading(t,e,n){const s=this._mixer,r=s.time;let u=this._weightInterpolant;u===null&&(u=s._lendControlInterpolant(),this._weightInterpolant=u);const f=u.parameterPositions,d=u.sampleValues;return f[0]=r,d[0]=e,f[1]=r+t,d[1]=n,this}}const oL=new Float32Array(1);class lL extends tu{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,s=t._clip.tracks,r=s.length,u=t._propertyBindings,f=t._interpolants,d=n.uuid,m=this._bindingsByRootAndName;let _=m[d];_===void 0&&(_={},m[d]=_);for(let y=0;y!==r;++y){const S=s[y],T=S.name;let R=_[T];if(R!==void 0)++R.referenceCount,u[y]=R;else{if(R=u[y],R!==void 0){R._cacheIndex===null&&(++R.referenceCount,this._addInactiveBinding(R,d,T));continue}const C=e&&e._propertyBindings[y].binding.parsedPath;R=new RC(jn.create(n,T,C),S.ValueTypeName,S.getValueSize()),++R.referenceCount,this._addInactiveBinding(R,d,T),u[y]=R}f[y].resultBuffer=R.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,s=t._clip.uuid,r=this._actionsByClip[s];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,s,n)}const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,n){const s=this._actions,r=this._actionsByClip;let u=r[e];if(u===void 0)u={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=u;else{const f=u.knownActions;t._byClipCacheIndex=f.length,f.push(t)}t._cacheIndex=s.length,s.push(t),u.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],s=t._cacheIndex;n._cacheIndex=s,e[s]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,u=this._actionsByClip,f=u[r],d=f.knownActions,m=d[d.length-1],_=t._byClipCacheIndex;m._byClipCacheIndex=_,d[_]=m,d.pop(),t._byClipCacheIndex=null;const y=f.actionByRoot,S=(t._localRoot||this._root).uuid;delete y[S],d.length===0&&delete u[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,s=this._nActiveActions++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,s=--this._nActiveActions,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const s=this._bindingsByRootAndName,r=this._bindings;let u=s[e];u===void 0&&(u={},s[e]=u),u[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,s=n.rootNode.uuid,r=n.path,u=this._bindingsByRootAndName,f=u[s],d=e[e.length-1],m=t._cacheIndex;d._cacheIndex=m,e[m]=d,e.pop(),delete f[r],Object.keys(f).length===0&&delete u[s]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,s=this._nActiveBindings++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,s=--this._nActiveBindings,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new wb(new Float32Array(2),new Float32Array(2),1,oL),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,s=--this._nActiveControlInterpolants,r=e[s];t.__cacheIndex=s,e[s]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const s=e||this._root,r=s.uuid;let u=typeof t=="string"?l_.findByName(s,t):t;const f=u!==null?u.uuid:t,d=this._actionsByClip[f];let m=null;if(n===void 0&&(u!==null?n=u.blendMode:n=_S),d!==void 0){const y=d.actionByRoot[r];if(y!==void 0&&y.blendMode===n)return y;m=d.knownActions[0],u===null&&(u=m._clip)}if(u===null)return null;const _=new wC(this,u,e,n);return this._bindAction(_,m),this._addInactiveAction(_,f,r),_}existingAction(t,e){const n=e||this._root,s=n.uuid,r=typeof t=="string"?l_.findByName(n,t):t,u=r?r.uuid:t,f=this._actionsByClip[u];return f!==void 0&&f.actionByRoot[s]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,s=this.time+=t,r=Math.sign(t),u=this._accuIndex^=1;for(let m=0;m!==n;++m)e[m]._update(s,t,r,u);const f=this._bindings,d=this._nActiveBindings;for(let m=0;m!==d;++m)f[m].apply(u);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,s=this._actionsByClip,r=s[n];if(r!==void 0){const u=r.knownActions;for(let f=0,d=u.length;f!==d;++f){const m=u[f];this._deactivateAction(m);const _=m._cacheIndex,y=e[e.length-1];m._cacheIndex=null,m._byClipCacheIndex=null,y._cacheIndex=_,e[_]=y,e.pop(),this._removeInactiveBindingsForAction(m)}delete s[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const u in n){const f=n[u].actionByRoot,d=f[e];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const s=this._bindingsByRootAndName,r=s[e];if(r!==void 0)for(const u in r){const f=r[u];f.restoreOriginalState(),this._removeInactiveBinding(f)}}uncacheAction(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class uL extends ub{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new vS(null,t,e,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Pb{constructor(t){this.value=t}clone(){return new Pb(this.value.clone===void 0?this.value:this.value.clone())}}let cL=0;class hL extends tu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:cL++}),this.name="",this.usage=t_,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,s=e.length;n<s;n++){const r=Array.isArray(e[n])?e[n]:[e[n]];for(let u=0;u<r.length;u++)this.uniforms.push(r[u].clone())}return this}clone(){return new this.constructor().copy(this)}}class fL extends TS{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class dL{constructor(t,e,n,s,r,u=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=s,this.count=r,this.normalized=u,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const bA=new tn;class CC{constructor(t,e,n=0,s=1/0){this.ray=new qp(t,e),this.near=n,this.far=s,this.camera=null,this.layers=new Cp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return bA.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(bA),this}intersectObject(t,e=!0,n=[]){return yT(t,this,n,e),n.sort(MA),n}intersectObjects(t,e=!0,n=[]){for(let s=0,r=t.length;s<r;s++)yT(t[s],this,n,e);return n.sort(MA),n}}function MA(i,t){return i.distance-t.distance}function yT(i,t,e,n){let s=!0;if(i.layers.test(t.layers)&&i.raycast(t,e)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let u=0,f=r.length;u<f;u++)yT(r[u],t,e,!0)}}class pL{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(t){this._document=t,t.hidden!==void 0&&(this._pageVisibilityHandler=mL.bind(this),t.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(t){return this._timescale=t,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(t){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(t!==void 0?t:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function mL(){this._document.hidden===!1&&this.reset()}class gL{constructor(t=1,e=0,n=0){this.radius=t,this.phi=e,this.theta=n}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Je(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Je(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class _L{constructor(t=1,e=0,n=0){this.radius=t,this.theta=e,this.y=n}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return new this.constructor().copy(this)}}class zb{constructor(t,e,n,s){zb.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let n=0;n<4;n++)this.elements[n]=t[n+e];return this}set(t,e,n,s){const r=this.elements;return r[0]=t,r[2]=e,r[1]=n,r[3]=s,this}}const AA=new Jt;class yL{constructor(t=new Jt(1/0,1/0),e=new Jt(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=AA.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,AA).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const RA=new tt,Mv=new tt,sp=new tt,ap=new tt,ME=new tt,vL=new tt,SL=new tt;class xL{constructor(t=new tt,e=new tt){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){RA.subVectors(t,this.start),Mv.subVectors(this.end,this.start);const n=Mv.dot(Mv);let r=Mv.dot(RA)/n;return e&&(r=Je(r,0,1)),r}closestPointToPoint(t,e,n){const s=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(s).add(this.start)}distanceSqToLine3(t,e=vL,n=SL){const s=10000000000000001e-32;let r,u;const f=this.start,d=t.start,m=this.end,_=t.end;sp.subVectors(m,f),ap.subVectors(_,d),ME.subVectors(f,d);const y=sp.dot(sp),S=ap.dot(ap),T=ap.dot(ME);if(y<=s&&S<=s)return e.copy(f),n.copy(d),e.sub(n),e.dot(e);if(y<=s)r=0,u=T/S,u=Je(u,0,1);else{const R=sp.dot(ME);if(S<=s)u=0,r=Je(-R/y,0,1);else{const C=sp.dot(ap),w=y*S-C*C;w!==0?r=Je((C*T-R*S)/w,0,1):r=0,u=(C*r+T)/S,u<0?(u=0,r=Je(-R/y,0,1)):u>1&&(u=1,r=Je((C-R)/y,0,1))}}return e.copy(f).add(sp.multiplyScalar(r)),n.copy(d).add(ap.multiplyScalar(u)),e.sub(n),e.dot(e)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const wA=new tt;class EL extends Wn{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new _n,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let u=0,f=1,d=32;u<d;u++,f++){const m=u/d*Math.PI*2,_=f/d*Math.PI*2;s.push(Math.cos(m),Math.sin(m),1,Math.cos(_),Math.sin(_),1)}n.setAttribute("position",new Ue(s,3));const r=new ir({fog:!1,toneMapped:!1});this.cone=new eu(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),wA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(wA),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Yc=new tt,Av=new tn,AE=new tn;class TL extends eu{constructor(t){const e=DC(t),n=new _n,s=[],r=[];for(let m=0;m<e.length;m++){const _=e[m];_.parent&&_.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(0,0,0),r.push(0,0,0))}n.setAttribute("position",new Ue(s,3)),n.setAttribute("color",new Ue(r,3));const u=new ir({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;const f=new Te(255),d=new Te(65280);this.setColors(f,d)}updateMatrixWorld(t){const e=this.bones,n=this.geometry,s=n.getAttribute("position");AE.copy(this.root.matrixWorld).invert();for(let r=0,u=0;r<e.length;r++){const f=e[r];f.parent&&f.parent.isBone&&(Av.multiplyMatrices(AE,f.matrixWorld),Yc.setFromMatrixPosition(Av),s.setXYZ(u,Yc.x,Yc.y,Yc.z),Av.multiplyMatrices(AE,f.parent.matrixWorld),Yc.setFromMatrixPosition(Av),s.setXYZ(u+1,Yc.x,Yc.y,Yc.z),u+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}setColors(t,e){const s=this.geometry.getAttribute("color");for(let r=0;r<s.count;r+=2)s.setXYZ(r,t.r,t.g,t.b),s.setXYZ(r+1,e.r,e.g,e.b);return s.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function DC(i){const t=[];i.isBone===!0&&t.push(i);for(let e=0;e<i.children.length;e++)t.push(...DC(i.children[e]));return t}class bL extends ms{constructor(t,e,n){const s=new M_(e,4,2),r=new ph({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const ML=new tt,CA=new Te,DA=new Te;class AL extends Wn{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new b_(e);s.rotateY(Math.PI*.5),this.material=new ph({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),u=new Float32Array(r.count*3);s.setAttribute("color",new pi(u,3)),this.add(new ms(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");CA.copy(this.light.color),DA.copy(this.light.groundColor);for(let n=0,s=e.count;n<s;n++){const r=n<s/2?CA:DA;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(ML.setFromMatrixPosition(this.light.matrixWorld).negate())}}class RL extends eu{constructor(t=10,e=10,n=4473924,s=8947848){n=new Te(n),s=new Te(s);const r=e/2,u=t/e,f=t/2,d=[],m=[];for(let S=0,T=0,R=-f;S<=e;S++,R+=u){d.push(-f,0,R,f,0,R),d.push(R,0,-f,R,0,f);const C=S===r?n:s;C.toArray(m,T),T+=3,C.toArray(m,T),T+=3,C.toArray(m,T),T+=3,C.toArray(m,T),T+=3}const _=new _n;_.setAttribute("position",new Ue(d,3)),_.setAttribute("color",new Ue(m,3));const y=new ir({vertexColors:!0,toneMapped:!1});super(_,y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class wL extends eu{constructor(t=10,e=16,n=8,s=64,r=4473924,u=8947848){r=new Te(r),u=new Te(u);const f=[],d=[];if(e>1)for(let y=0;y<e;y++){const S=y/e*(Math.PI*2),T=Math.sin(S)*t,R=Math.cos(S)*t;f.push(0,0,0),f.push(T,0,R);const C=y&1?r:u;d.push(C.r,C.g,C.b),d.push(C.r,C.g,C.b)}for(let y=0;y<n;y++){const S=y&1?r:u,T=t-t/n*y;for(let R=0;R<s;R++){let C=R/s*(Math.PI*2),w=Math.sin(C)*T,M=Math.cos(C)*T;f.push(w,0,M),d.push(S.r,S.g,S.b),C=(R+1)/s*(Math.PI*2),w=Math.sin(C)*T,M=Math.cos(C)*T,f.push(w,0,M),d.push(S.r,S.g,S.b)}}const m=new _n;m.setAttribute("position",new Ue(f,3)),m.setAttribute("color",new Ue(d,3));const _=new ir({vertexColors:!0,toneMapped:!1});super(m,_),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const NA=new tt,Rv=new tt,IA=new tt;class CL extends Wn{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let s=new _n;s.setAttribute("position",new Ue([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new ir({fog:!1,toneMapped:!1});this.lightPlane=new rh(s,r),this.add(this.lightPlane),s=new _n,s.setAttribute("position",new Ue([0,0,0,0,0,1],3)),this.targetLine=new rh(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),NA.setFromMatrixPosition(this.light.matrixWorld),Rv.setFromMatrixPosition(this.light.target.matrixWorld),IA.subVectors(Rv,NA),this.lightPlane.lookAt(Rv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Rv),this.targetLine.scale.z=IA.length()}}const wv=new tt,Ki=new SS;class DL extends eu{constructor(t){const e=new _n,n=new ir({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],u={};f("n1","n2"),f("n2","n4"),f("n4","n3"),f("n3","n1"),f("f1","f2"),f("f2","f4"),f("f4","f3"),f("f3","f1"),f("n1","f1"),f("n2","f2"),f("n3","f3"),f("n4","f4"),f("p","n1"),f("p","n2"),f("p","n3"),f("p","n4"),f("u1","u2"),f("u2","u3"),f("u3","u1"),f("c","t"),f("p","c"),f("cn1","cn2"),f("cn3","cn4"),f("cf1","cf2"),f("cf3","cf4");function f(R,C){d(R),d(C)}function d(R){s.push(0,0,0),r.push(0,0,0),u[R]===void 0&&(u[R]=[]),u[R].push(s.length/3-1)}e.setAttribute("position",new Ue(s,3)),e.setAttribute("color",new Ue(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const m=new Te(16755200),_=new Te(16711680),y=new Te(43775),S=new Te(16777215),T=new Te(3355443);this.setColors(m,_,y,S,T)}setColors(t,e,n,s,r){const f=this.geometry.getAttribute("color");return f.setXYZ(0,t.r,t.g,t.b),f.setXYZ(1,t.r,t.g,t.b),f.setXYZ(2,t.r,t.g,t.b),f.setXYZ(3,t.r,t.g,t.b),f.setXYZ(4,t.r,t.g,t.b),f.setXYZ(5,t.r,t.g,t.b),f.setXYZ(6,t.r,t.g,t.b),f.setXYZ(7,t.r,t.g,t.b),f.setXYZ(8,t.r,t.g,t.b),f.setXYZ(9,t.r,t.g,t.b),f.setXYZ(10,t.r,t.g,t.b),f.setXYZ(11,t.r,t.g,t.b),f.setXYZ(12,t.r,t.g,t.b),f.setXYZ(13,t.r,t.g,t.b),f.setXYZ(14,t.r,t.g,t.b),f.setXYZ(15,t.r,t.g,t.b),f.setXYZ(16,t.r,t.g,t.b),f.setXYZ(17,t.r,t.g,t.b),f.setXYZ(18,t.r,t.g,t.b),f.setXYZ(19,t.r,t.g,t.b),f.setXYZ(20,t.r,t.g,t.b),f.setXYZ(21,t.r,t.g,t.b),f.setXYZ(22,t.r,t.g,t.b),f.setXYZ(23,t.r,t.g,t.b),f.setXYZ(24,e.r,e.g,e.b),f.setXYZ(25,e.r,e.g,e.b),f.setXYZ(26,e.r,e.g,e.b),f.setXYZ(27,e.r,e.g,e.b),f.setXYZ(28,e.r,e.g,e.b),f.setXYZ(29,e.r,e.g,e.b),f.setXYZ(30,e.r,e.g,e.b),f.setXYZ(31,e.r,e.g,e.b),f.setXYZ(32,n.r,n.g,n.b),f.setXYZ(33,n.r,n.g,n.b),f.setXYZ(34,n.r,n.g,n.b),f.setXYZ(35,n.r,n.g,n.b),f.setXYZ(36,n.r,n.g,n.b),f.setXYZ(37,n.r,n.g,n.b),f.setXYZ(38,s.r,s.g,s.b),f.setXYZ(39,s.r,s.g,s.b),f.setXYZ(40,r.r,r.g,r.b),f.setXYZ(41,r.r,r.g,r.b),f.setXYZ(42,r.r,r.g,r.b),f.setXYZ(43,r.r,r.g,r.b),f.setXYZ(44,r.r,r.g,r.b),f.setXYZ(45,r.r,r.g,r.b),f.setXYZ(46,r.r,r.g,r.b),f.setXYZ(47,r.r,r.g,r.b),f.setXYZ(48,r.r,r.g,r.b),f.setXYZ(49,r.r,r.g,r.b),f.needsUpdate=!0,this}update(){const t=this.geometry,e=this.pointMap,n=1,s=1;let r,u;if(Ki.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)r=1,u=0;else if(this.camera.coordinateSystem===kr)r=-1,u=1;else if(this.camera.coordinateSystem===Rp)r=0,u=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);ns("c",e,t,Ki,0,0,r),ns("t",e,t,Ki,0,0,u),ns("n1",e,t,Ki,-n,-s,r),ns("n2",e,t,Ki,n,-s,r),ns("n3",e,t,Ki,-n,s,r),ns("n4",e,t,Ki,n,s,r),ns("f1",e,t,Ki,-n,-s,u),ns("f2",e,t,Ki,n,-s,u),ns("f3",e,t,Ki,-n,s,u),ns("f4",e,t,Ki,n,s,u),ns("u1",e,t,Ki,n*.7,s*1.1,r),ns("u2",e,t,Ki,-n*.7,s*1.1,r),ns("u3",e,t,Ki,0,s*2,r),ns("cf1",e,t,Ki,-n,0,u),ns("cf2",e,t,Ki,n,0,u),ns("cf3",e,t,Ki,0,-s,u),ns("cf4",e,t,Ki,0,s,u),ns("cn1",e,t,Ki,-n,0,r),ns("cn2",e,t,Ki,n,0,r),ns("cn3",e,t,Ki,0,-s,r),ns("cn4",e,t,Ki,0,s,r),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ns(i,t,e,n,s,r,u){wv.set(s,r,u).unproject(n);const f=t[i];if(f!==void 0){const d=e.getAttribute("position");for(let m=0,_=f.length;m<_;m++)d.setXYZ(f[m],wv.x,wv.y,wv.z)}}const Cv=new Da;class NL extends eu{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(24),r=new _n;r.setIndex(new pi(n,1)),r.setAttribute("position",new pi(s,3)),super(r,new ir({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Cv.setFromObject(this.object),Cv.isEmpty())return;const t=Cv.min,e=Cv.max,n=this.geometry.attributes.position,s=n.array;s[0]=e.x,s[1]=e.y,s[2]=e.z,s[3]=t.x,s[4]=e.y,s[5]=e.z,s[6]=t.x,s[7]=t.y,s[8]=e.z,s[9]=e.x,s[10]=t.y,s[11]=e.z,s[12]=e.x,s[13]=e.y,s[14]=t.z,s[15]=t.x,s[16]=e.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=e.x,s[22]=t.y,s[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class IL extends eu{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new _n;r.setIndex(new pi(n,1)),r.setAttribute("position",new Ue(s,3)),super(r,new ir({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class UL extends rh{constructor(t,e=1,n=16776960){const s=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],u=new _n;u.setAttribute("position",new Ue(r,3)),u.computeBoundingSphere(),super(u,new ir({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const f=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new _n;d.setAttribute("position",new Ue(f,3)),d.computeBoundingSphere(),this.add(new ms(d,new ph({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const UA=new tt;let Dv,RE;class OL extends Wn{constructor(t=new tt(0,0,1),e=new tt(0,0,0),n=1,s=16776960,r=n*.2,u=r*.2){super(),this.type="ArrowHelper",Dv===void 0&&(Dv=new _n,Dv.setAttribute("position",new Ue([0,0,0,0,1,0],3)),RE=new T_(.5,1,5,1),RE.translate(0,-.5,0)),this.position.copy(e),this.line=new rh(Dv,new ir({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ms(RE,new ph({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,u)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{UA.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(UA,e)}}setLength(t,e=t*.2,n=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class LL extends eu{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new _n;s.setAttribute("position",new Ue(e,3)),s.setAttribute("color",new Ue(n,3));const r=new ir({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(t,e,n){const s=new Te,r=this.geometry.attributes.color.array;return s.set(t),s.toArray(r,0),s.toArray(r,3),s.set(e),s.toArray(r,6),s.toArray(r,9),s.set(n),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class PL{constructor(){this.type="ShapePath",this.color=new Te,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new F0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,s){return this.currentPath.quadraticCurveTo(t,e,n,s),this}bezierCurveTo(t,e,n,s,r,u){return this.currentPath.bezierCurveTo(t,e,n,s,r,u),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(M){const O=[];for(let z=0,V=M.length;z<V;z++){const j=M[z],q=new Df;q.curves=j.curves,O.push(q)}return O}function n(M,O){const z=O.length;let V=!1;for(let j=z-1,q=0;q<z;j=q++){let L=O[j],P=O[q],D=P.x-L.x,U=P.y-L.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(L=O[q],D=-D,P=O[j],U=-U),M.y<L.y||M.y>P.y)continue;if(M.y===L.y){if(M.x===L.x)return!0}else{const F=U*(M.x-L.x)-D*(M.y-L.y);if(F===0)return!0;if(F<0)continue;V=!V}}else{if(M.y!==L.y)continue;if(P.x<=M.x&&M.x<=L.x||L.x<=M.x&&M.x<=P.x)return!0}}return V}const s=el.isClockWise,r=this.subPaths;if(r.length===0)return[];let u,f,d;const m=[];if(r.length===1)return f=r[0],d=new Df,d.curves=f.curves,m.push(d),m;let _=!s(r[0].getPoints());_=t?!_:_;const y=[],S=[];let T=[],R=0,C;S[R]=void 0,T[R]=[];for(let M=0,O=r.length;M<O;M++)f=r[M],C=f.getPoints(),u=s(C),u=t?!u:u,u?(!_&&S[R]&&R++,S[R]={s:new Df,p:C},S[R].s.curves=f.curves,_&&R++,T[R]=[]):T[R].push({h:f,p:C[0]});if(!S[0])return e(r);if(S.length>1){let M=!1,O=0;for(let z=0,V=S.length;z<V;z++)y[z]=[];for(let z=0,V=S.length;z<V;z++){const j=T[z];for(let q=0;q<j.length;q++){const L=j[q];let P=!0;for(let D=0;D<S.length;D++)n(L.p,S[D].p)&&(z!==D&&O++,P?(P=!1,y[D].push(L)):M=!0);P&&y[z].push(L)}}O>0&&M===!1&&(T=y)}let w;for(let M=0,O=S.length;M<O;M++){d=S[M].s,m.push(d),w=T[M];for(let z=0,V=w.length;z<V;z++)d.holes.push(w[z].h)}return m}}class zL extends tu{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function VL(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function BL(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function FL(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function vT(i,t,e,n){const s=HL(n);switch(e){case ib:return i*t;case pS:return i*t/s.components*s.byteLength;case S_:return i*t/s.components*s.byteLength;case ab:return i*t*2/s.components*s.byteLength;case mS:return i*t*2/s.components*s.byteLength;case sb:return i*t*3/s.components*s.byteLength;case Ca:return i*t*4/s.components*s.byteLength;case gS:return i*t*4/s.components*s.byteLength;case Og:case Lg:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case Pg:case zg:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case u0:case h0:return Math.max(i,16)*Math.max(t,8)/4;case l0:case c0:return Math.max(i,8)*Math.max(t,8)/2;case f0:case d0:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case p0:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case m0:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case g0:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case _0:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case y0:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case v0:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case S0:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case x0:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case E0:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case T0:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case b0:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case M0:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case A0:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case R0:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case w0:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case C0:case D0:case N0:return Math.ceil(i/4)*Math.ceil(t/4)*16;case I0:case U0:return Math.ceil(i/4)*Math.ceil(t/4)*8;case O0:case L0:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function HL(i){switch(i){case xo:case $T:return{byteLength:1,components:1};case Tp:case tb:case kp:return{byteLength:2,components:1};case fS:case dS:return{byteLength:2,components:4};case Xu:case hS:case xr:return{byteLength:4,components:1};case eb:case nb:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class GL{static contain(t,e){return VL(t,e)}static cover(t,e){return BL(t,e)}static fill(t){return FL(t)}static getByteLength(t,e,n,s){return vT(t,e,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:lS}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=lS);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function NC(){let i=null,t=!1,e=null,n=null;function s(r,u){e(r,u),n=i.requestAnimationFrame(s)}return{start:function(){t!==!0&&e!==null&&(n=i.requestAnimationFrame(s),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(r){e=r},setContext:function(r){i=r}}}function kL(i){const t=new WeakMap;function e(f,d){const m=f.array,_=f.usage,y=m.byteLength,S=i.createBuffer();i.bindBuffer(d,S),i.bufferData(d,m,_),f.onUploadCallback();let T;if(m instanceof Float32Array)T=i.FLOAT;else if(typeof Float16Array<"u"&&m instanceof Float16Array)T=i.HALF_FLOAT;else if(m instanceof Uint16Array)f.isFloat16BufferAttribute?T=i.HALF_FLOAT:T=i.UNSIGNED_SHORT;else if(m instanceof Int16Array)T=i.SHORT;else if(m instanceof Uint32Array)T=i.UNSIGNED_INT;else if(m instanceof Int32Array)T=i.INT;else if(m instanceof Int8Array)T=i.BYTE;else if(m instanceof Uint8Array)T=i.UNSIGNED_BYTE;else if(m instanceof Uint8ClampedArray)T=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:S,type:T,bytesPerElement:m.BYTES_PER_ELEMENT,version:f.version,size:y}}function n(f,d,m){const _=d.array,y=d.updateRanges;if(i.bindBuffer(m,f),y.length===0)i.bufferSubData(m,0,_);else{y.sort((T,R)=>T.start-R.start);let S=0;for(let T=1;T<y.length;T++){const R=y[S],C=y[T];C.start<=R.start+R.count+1?R.count=Math.max(R.count,C.start+C.count-R.start):(++S,y[S]=C)}y.length=S+1;for(let T=0,R=y.length;T<R;T++){const C=y[T];i.bufferSubData(m,C.start*_.BYTES_PER_ELEMENT,_,C.start,C.count)}d.clearUpdateRanges()}d.onUploadCallback()}function s(f){return f.isInterleavedBufferAttribute&&(f=f.data),t.get(f)}function r(f){f.isInterleavedBufferAttribute&&(f=f.data);const d=t.get(f);d&&(i.deleteBuffer(d.buffer),t.delete(f))}function u(f,d){if(f.isInterleavedBufferAttribute&&(f=f.data),f.isGLBufferAttribute){const _=t.get(f);(!_||_.version<f.version)&&t.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}const m=t.get(f);if(m===void 0)t.set(f,e(f,d));else if(m.version<f.version){if(m.size!==f.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(m.buffer,f,d),m.version=f.version}}return{get:s,remove:r,update:u}}var qL=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,XL=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,jL=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,YL=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,WL=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,KL=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,QL=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,ZL=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,JL=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,$L=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,tP=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,eP=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,nP=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iP=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,sP=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,aP=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,rP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,oP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,lP=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,uP=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,cP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,hP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,fP=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,dP=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,pP=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,mP=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,gP=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,_P=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,yP=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,vP=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,SP="gl_FragColor = linearToOutputTexel( gl_FragColor );",xP=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,EP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,TP=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,bP=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,MP=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,AP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,RP=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,wP=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,CP=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,DP=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,NP=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,IP=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,UP=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,OP=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,LP=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,PP=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,zP=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,VP=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,BP=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,FP=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,HP=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,GP=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,kP=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,qP=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,XP=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,jP=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,YP=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,WP=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KP=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,QP=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ZP=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,JP=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,$P=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,t4=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,e4=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,n4=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,i4=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,s4=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,a4=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,r4=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,o4=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,l4=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,u4=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,c4=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,h4=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,f4=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,d4=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,p4=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,m4=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,g4=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,_4=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,y4=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,v4=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,S4=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,x4=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,E4=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,T4=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,b4=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,M4=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,A4=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,R4=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,w4=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,C4=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,D4=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,N4=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,I4=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,U4=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,O4=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,L4=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,P4=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,z4=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,V4=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,B4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,F4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,H4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,G4=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const k4=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,q4=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,X4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,j4=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Y4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,W4=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,K4=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Q4=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Z4=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,J4=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,$4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,tz=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ez=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,nz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,sz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,az=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oz=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,lz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,cz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,hz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,pz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mz=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gz=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_z=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,yz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vz=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Sz=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,xz=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ez=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,En={alphahash_fragment:qL,alphahash_pars_fragment:XL,alphamap_fragment:jL,alphamap_pars_fragment:YL,alphatest_fragment:WL,alphatest_pars_fragment:KL,aomap_fragment:QL,aomap_pars_fragment:ZL,batching_pars_vertex:JL,batching_vertex:$L,begin_vertex:tP,beginnormal_vertex:eP,bsdfs:nP,iridescence_fragment:iP,bumpmap_pars_fragment:sP,clipping_planes_fragment:aP,clipping_planes_pars_fragment:rP,clipping_planes_pars_vertex:oP,clipping_planes_vertex:lP,color_fragment:uP,color_pars_fragment:cP,color_pars_vertex:hP,color_vertex:fP,common:dP,cube_uv_reflection_fragment:pP,defaultnormal_vertex:mP,displacementmap_pars_vertex:gP,displacementmap_vertex:_P,emissivemap_fragment:yP,emissivemap_pars_fragment:vP,colorspace_fragment:SP,colorspace_pars_fragment:xP,envmap_fragment:EP,envmap_common_pars_fragment:TP,envmap_pars_fragment:bP,envmap_pars_vertex:MP,envmap_physical_pars_fragment:PP,envmap_vertex:AP,fog_vertex:RP,fog_pars_vertex:wP,fog_fragment:CP,fog_pars_fragment:DP,gradientmap_pars_fragment:NP,lightmap_pars_fragment:IP,lights_lambert_fragment:UP,lights_lambert_pars_fragment:OP,lights_pars_begin:LP,lights_toon_fragment:zP,lights_toon_pars_fragment:VP,lights_phong_fragment:BP,lights_phong_pars_fragment:FP,lights_physical_fragment:HP,lights_physical_pars_fragment:GP,lights_fragment_begin:kP,lights_fragment_maps:qP,lights_fragment_end:XP,logdepthbuf_fragment:jP,logdepthbuf_pars_fragment:YP,logdepthbuf_pars_vertex:WP,logdepthbuf_vertex:KP,map_fragment:QP,map_pars_fragment:ZP,map_particle_fragment:JP,map_particle_pars_fragment:$P,metalnessmap_fragment:t4,metalnessmap_pars_fragment:e4,morphinstance_vertex:n4,morphcolor_vertex:i4,morphnormal_vertex:s4,morphtarget_pars_vertex:a4,morphtarget_vertex:r4,normal_fragment_begin:o4,normal_fragment_maps:l4,normal_pars_fragment:u4,normal_pars_vertex:c4,normal_vertex:h4,normalmap_pars_fragment:f4,clearcoat_normal_fragment_begin:d4,clearcoat_normal_fragment_maps:p4,clearcoat_pars_fragment:m4,iridescence_pars_fragment:g4,opaque_fragment:_4,packing:y4,premultiplied_alpha_fragment:v4,project_vertex:S4,dithering_fragment:x4,dithering_pars_fragment:E4,roughnessmap_fragment:T4,roughnessmap_pars_fragment:b4,shadowmap_pars_fragment:M4,shadowmap_pars_vertex:A4,shadowmap_vertex:R4,shadowmask_pars_fragment:w4,skinbase_vertex:C4,skinning_pars_vertex:D4,skinning_vertex:N4,skinnormal_vertex:I4,specularmap_fragment:U4,specularmap_pars_fragment:O4,tonemapping_fragment:L4,tonemapping_pars_fragment:P4,transmission_fragment:z4,transmission_pars_fragment:V4,uv_pars_fragment:B4,uv_pars_vertex:F4,uv_vertex:H4,worldpos_vertex:G4,background_vert:k4,background_frag:q4,backgroundCube_vert:X4,backgroundCube_frag:j4,cube_vert:Y4,cube_frag:W4,depth_vert:K4,depth_frag:Q4,distanceRGBA_vert:Z4,distanceRGBA_frag:J4,equirect_vert:$4,equirect_frag:tz,linedashed_vert:ez,linedashed_frag:nz,meshbasic_vert:iz,meshbasic_frag:sz,meshlambert_vert:az,meshlambert_frag:rz,meshmatcap_vert:oz,meshmatcap_frag:lz,meshnormal_vert:uz,meshnormal_frag:cz,meshphong_vert:hz,meshphong_frag:fz,meshphysical_vert:dz,meshphysical_frag:pz,meshtoon_vert:mz,meshtoon_frag:gz,points_vert:_z,points_frag:yz,shadow_vert:vz,shadow_frag:Sz,sprite_vert:xz,sprite_frag:Ez},_e={common:{diffuse:{value:new Te(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new pn}},envmap:{envMap:{value:null},envMapRotation:{value:new pn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new pn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new pn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new pn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new pn},normalScale:{value:new Jt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new pn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new pn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new pn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new pn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Te(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Te(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0},uvTransform:{value:new pn}},sprite:{diffuse:{value:new Te(16777215)},opacity:{value:1},center:{value:new Jt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}}},tl={basic:{uniforms:tr([_e.common,_e.specularmap,_e.envmap,_e.aomap,_e.lightmap,_e.fog]),vertexShader:En.meshbasic_vert,fragmentShader:En.meshbasic_frag},lambert:{uniforms:tr([_e.common,_e.specularmap,_e.envmap,_e.aomap,_e.lightmap,_e.emissivemap,_e.bumpmap,_e.normalmap,_e.displacementmap,_e.fog,_e.lights,{emissive:{value:new Te(0)}}]),vertexShader:En.meshlambert_vert,fragmentShader:En.meshlambert_frag},phong:{uniforms:tr([_e.common,_e.specularmap,_e.envmap,_e.aomap,_e.lightmap,_e.emissivemap,_e.bumpmap,_e.normalmap,_e.displacementmap,_e.fog,_e.lights,{emissive:{value:new Te(0)},specular:{value:new Te(1118481)},shininess:{value:30}}]),vertexShader:En.meshphong_vert,fragmentShader:En.meshphong_frag},standard:{uniforms:tr([_e.common,_e.envmap,_e.aomap,_e.lightmap,_e.emissivemap,_e.bumpmap,_e.normalmap,_e.displacementmap,_e.roughnessmap,_e.metalnessmap,_e.fog,_e.lights,{emissive:{value:new Te(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:En.meshphysical_vert,fragmentShader:En.meshphysical_frag},toon:{uniforms:tr([_e.common,_e.aomap,_e.lightmap,_e.emissivemap,_e.bumpmap,_e.normalmap,_e.displacementmap,_e.gradientmap,_e.fog,_e.lights,{emissive:{value:new Te(0)}}]),vertexShader:En.meshtoon_vert,fragmentShader:En.meshtoon_frag},matcap:{uniforms:tr([_e.common,_e.bumpmap,_e.normalmap,_e.displacementmap,_e.fog,{matcap:{value:null}}]),vertexShader:En.meshmatcap_vert,fragmentShader:En.meshmatcap_frag},points:{uniforms:tr([_e.points,_e.fog]),vertexShader:En.points_vert,fragmentShader:En.points_frag},dashed:{uniforms:tr([_e.common,_e.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:En.linedashed_vert,fragmentShader:En.linedashed_frag},depth:{uniforms:tr([_e.common,_e.displacementmap]),vertexShader:En.depth_vert,fragmentShader:En.depth_frag},normal:{uniforms:tr([_e.common,_e.bumpmap,_e.normalmap,_e.displacementmap,{opacity:{value:1}}]),vertexShader:En.meshnormal_vert,fragmentShader:En.meshnormal_frag},sprite:{uniforms:tr([_e.sprite,_e.fog]),vertexShader:En.sprite_vert,fragmentShader:En.sprite_frag},background:{uniforms:{uvTransform:{value:new pn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:En.background_vert,fragmentShader:En.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new pn}},vertexShader:En.backgroundCube_vert,fragmentShader:En.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:En.cube_vert,fragmentShader:En.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:En.equirect_vert,fragmentShader:En.equirect_frag},distanceRGBA:{uniforms:tr([_e.common,_e.displacementmap,{referencePosition:{value:new tt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:En.distanceRGBA_vert,fragmentShader:En.distanceRGBA_frag},shadow:{uniforms:tr([_e.lights,_e.fog,{color:{value:new Te(0)},opacity:{value:1}}]),vertexShader:En.shadow_vert,fragmentShader:En.shadow_frag}};tl.physical={uniforms:tr([tl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new pn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new pn},clearcoatNormalScale:{value:new Jt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new pn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new pn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new pn},sheen:{value:0},sheenColor:{value:new Te(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new pn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new pn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new pn},transmissionSamplerSize:{value:new Jt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new pn},attenuationDistance:{value:0},attenuationColor:{value:new Te(0)},specularColor:{value:new Te(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new pn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new pn},anisotropyVector:{value:new Jt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new pn}}]),vertexShader:En.meshphysical_vert,fragmentShader:En.meshphysical_frag};const Nv={r:0,b:0,g:0},yf=new Xr,Tz=new tn;function bz(i,t,e,n,s,r,u){const f=new Te(0);let d=r===!0?0:1,m,_,y=null,S=0,T=null;function R(z){let V=z.isScene===!0?z.background:null;return V&&V.isTexture&&(V=(z.backgroundBlurriness>0?e:t).get(V)),V}function C(z){let V=!1;const j=R(z);j===null?M(f,d):j&&j.isColor&&(M(j,1),V=!0);const q=i.xr.getEnvironmentBlendMode();q==="additive"?n.buffers.color.setClear(0,0,0,1,u):q==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,u),(i.autoClear||V)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function w(z,V){const j=R(V);j&&(j.isCubeTexture||j.mapping===Gp)?(_===void 0&&(_=new ms(new zf(1,1,1),new il({name:"BackgroundCubeMaterial",uniforms:Dp(tl.backgroundCube.uniforms),vertexShader:tl.backgroundCube.vertexShader,fragmentShader:tl.backgroundCube.fragmentShader,side:nr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),_.geometry.deleteAttribute("normal"),_.geometry.deleteAttribute("uv"),_.onBeforeRender=function(q,L,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(_.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(_)),yf.copy(V.backgroundRotation),yf.x*=-1,yf.y*=-1,yf.z*=-1,j.isCubeTexture&&j.isRenderTargetTexture===!1&&(yf.y*=-1,yf.z*=-1),_.material.uniforms.envMap.value=j,_.material.uniforms.flipEnvMap.value=j.isCubeTexture&&j.isRenderTargetTexture===!1?-1:1,_.material.uniforms.backgroundBlurriness.value=V.backgroundBlurriness,_.material.uniforms.backgroundIntensity.value=V.backgroundIntensity,_.material.uniforms.backgroundRotation.value.setFromMatrix4(Tz.makeRotationFromEuler(yf)),_.material.toneMapped=Hn.getTransfer(j.colorSpace)!==li,(y!==j||S!==j.version||T!==i.toneMapping)&&(_.material.needsUpdate=!0,y=j,S=j.version,T=i.toneMapping),_.layers.enableAll(),z.unshift(_,_.geometry,_.material,0,0,null)):j&&j.isTexture&&(m===void 0&&(m=new ms(new jp(2,2),new il({name:"BackgroundMaterial",uniforms:Dp(tl.background.uniforms),vertexShader:tl.background.vertexShader,fragmentShader:tl.background.fragmentShader,side:ku,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(m)),m.material.uniforms.t2D.value=j,m.material.uniforms.backgroundIntensity.value=V.backgroundIntensity,m.material.toneMapped=Hn.getTransfer(j.colorSpace)!==li,j.matrixAutoUpdate===!0&&j.updateMatrix(),m.material.uniforms.uvTransform.value.copy(j.matrix),(y!==j||S!==j.version||T!==i.toneMapping)&&(m.material.needsUpdate=!0,y=j,S=j.version,T=i.toneMapping),m.layers.enableAll(),z.unshift(m,m.geometry,m.material,0,0,null))}function M(z,V){z.getRGB(Nv,Dw(i)),n.buffers.color.setClear(Nv.r,Nv.g,Nv.b,V,u)}function O(){_!==void 0&&(_.geometry.dispose(),_.material.dispose(),_=void 0),m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0)}return{getClearColor:function(){return f},setClearColor:function(z,V=1){f.set(z),d=V,M(f,d)},getClearAlpha:function(){return d},setClearAlpha:function(z){d=z,M(f,d)},render:C,addToRenderList:w,dispose:O}}function Mz(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=S(null);let r=s,u=!1;function f(U,F,Y,G,gt){let vt=!1;const k=y(G,Y,F);r!==k&&(r=k,m(r.object)),vt=T(U,G,Y,gt),vt&&R(U,G,Y,gt),gt!==null&&t.update(gt,i.ELEMENT_ARRAY_BUFFER),(vt||u)&&(u=!1,V(U,F,Y,G),gt!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(gt).buffer))}function d(){return i.createVertexArray()}function m(U){return i.bindVertexArray(U)}function _(U){return i.deleteVertexArray(U)}function y(U,F,Y){const G=Y.wireframe===!0;let gt=n[U.id];gt===void 0&&(gt={},n[U.id]=gt);let vt=gt[F.id];vt===void 0&&(vt={},gt[F.id]=vt);let k=vt[G];return k===void 0&&(k=S(d()),vt[G]=k),k}function S(U){const F=[],Y=[],G=[];for(let gt=0;gt<e;gt++)F[gt]=0,Y[gt]=0,G[gt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:Y,attributeDivisors:G,object:U,attributes:{},index:null}}function T(U,F,Y,G){const gt=r.attributes,vt=F.attributes;let k=0;const et=Y.getAttributes();for(const nt in et)if(et[nt].location>=0){const wt=gt[nt];let J=vt[nt];if(J===void 0&&(nt==="instanceMatrix"&&U.instanceMatrix&&(J=U.instanceMatrix),nt==="instanceColor"&&U.instanceColor&&(J=U.instanceColor)),wt===void 0||wt.attribute!==J||J&&wt.data!==J.data)return!0;k++}return r.attributesNum!==k||r.index!==G}function R(U,F,Y,G){const gt={},vt=F.attributes;let k=0;const et=Y.getAttributes();for(const nt in et)if(et[nt].location>=0){let wt=vt[nt];wt===void 0&&(nt==="instanceMatrix"&&U.instanceMatrix&&(wt=U.instanceMatrix),nt==="instanceColor"&&U.instanceColor&&(wt=U.instanceColor));const J={};J.attribute=wt,wt&&wt.data&&(J.data=wt.data),gt[nt]=J,k++}r.attributes=gt,r.attributesNum=k,r.index=G}function C(){const U=r.newAttributes;for(let F=0,Y=U.length;F<Y;F++)U[F]=0}function w(U){M(U,0)}function M(U,F){const Y=r.newAttributes,G=r.enabledAttributes,gt=r.attributeDivisors;Y[U]=1,G[U]===0&&(i.enableVertexAttribArray(U),G[U]=1),gt[U]!==F&&(i.vertexAttribDivisor(U,F),gt[U]=F)}function O(){const U=r.newAttributes,F=r.enabledAttributes;for(let Y=0,G=F.length;Y<G;Y++)F[Y]!==U[Y]&&(i.disableVertexAttribArray(Y),F[Y]=0)}function z(U,F,Y,G,gt,vt,k){k===!0?i.vertexAttribIPointer(U,F,Y,gt,vt):i.vertexAttribPointer(U,F,Y,G,gt,vt)}function V(U,F,Y,G){C();const gt=G.attributes,vt=Y.getAttributes(),k=F.defaultAttributeValues;for(const et in vt){const nt=vt[et];if(nt.location>=0){let ft=gt[et];if(ft===void 0&&(et==="instanceMatrix"&&U.instanceMatrix&&(ft=U.instanceMatrix),et==="instanceColor"&&U.instanceColor&&(ft=U.instanceColor)),ft!==void 0){const wt=ft.normalized,J=ft.itemSize,ut=t.get(ft);if(ut===void 0)continue;const Ot=ut.buffer,Lt=ut.type,ee=ut.bytesPerElement,xt=Lt===i.INT||Lt===i.UNSIGNED_INT||ft.gpuType===hS;if(ft.isInterleavedBufferAttribute){const It=ft.data,ae=It.stride,de=ft.offset;if(It.isInstancedInterleavedBuffer){for(let Ee=0;Ee<nt.locationSize;Ee++)M(nt.location+Ee,It.meshPerAttribute);U.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=It.meshPerAttribute*It.count)}else for(let Ee=0;Ee<nt.locationSize;Ee++)w(nt.location+Ee);i.bindBuffer(i.ARRAY_BUFFER,Ot);for(let Ee=0;Ee<nt.locationSize;Ee++)z(nt.location+Ee,J/nt.locationSize,Lt,wt,ae*ee,(de+J/nt.locationSize*Ee)*ee,xt)}else{if(ft.isInstancedBufferAttribute){for(let It=0;It<nt.locationSize;It++)M(nt.location+It,ft.meshPerAttribute);U.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=ft.meshPerAttribute*ft.count)}else for(let It=0;It<nt.locationSize;It++)w(nt.location+It);i.bindBuffer(i.ARRAY_BUFFER,Ot);for(let It=0;It<nt.locationSize;It++)z(nt.location+It,J/nt.locationSize,Lt,wt,J*ee,J/nt.locationSize*It*ee,xt)}}else if(k!==void 0){const wt=k[et];if(wt!==void 0)switch(wt.length){case 2:i.vertexAttrib2fv(nt.location,wt);break;case 3:i.vertexAttrib3fv(nt.location,wt);break;case 4:i.vertexAttrib4fv(nt.location,wt);break;default:i.vertexAttrib1fv(nt.location,wt)}}}}O()}function j(){P();for(const U in n){const F=n[U];for(const Y in F){const G=F[Y];for(const gt in G)_(G[gt].object),delete G[gt];delete F[Y]}delete n[U]}}function q(U){if(n[U.id]===void 0)return;const F=n[U.id];for(const Y in F){const G=F[Y];for(const gt in G)_(G[gt].object),delete G[gt];delete F[Y]}delete n[U.id]}function L(U){for(const F in n){const Y=n[F];if(Y[U.id]===void 0)continue;const G=Y[U.id];for(const gt in G)_(G[gt].object),delete G[gt];delete Y[U.id]}}function P(){D(),u=!0,r!==s&&(r=s,m(r.object))}function D(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:f,reset:P,resetDefaultState:D,dispose:j,releaseStatesOfGeometry:q,releaseStatesOfProgram:L,initAttributes:C,enableAttribute:w,disableUnusedAttributes:O}}function Az(i,t,e){let n;function s(m){n=m}function r(m,_){i.drawArrays(n,m,_),e.update(_,n,1)}function u(m,_,y){y!==0&&(i.drawArraysInstanced(n,m,_,y),e.update(_,n,y))}function f(m,_,y){if(y===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,m,0,_,0,y);let T=0;for(let R=0;R<y;R++)T+=_[R];e.update(T,n,1)}function d(m,_,y,S){if(y===0)return;const T=t.get("WEBGL_multi_draw");if(T===null)for(let R=0;R<m.length;R++)u(m[R],_[R],S[R]);else{T.multiDrawArraysInstancedWEBGL(n,m,0,_,0,S,0,y);let R=0;for(let C=0;C<y;C++)R+=_[C]*S[C];e.update(R,n,1)}}this.setMode=s,this.render=r,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=d}function Rz(i,t,e,n){let s;function r(){if(s!==void 0)return s;if(t.has("EXT_texture_filter_anisotropic")===!0){const L=t.get("EXT_texture_filter_anisotropic");s=i.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function u(L){return!(L!==Ca&&n.convert(L)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function f(L){const P=L===kp&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(L!==xo&&n.convert(L)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==xr&&!P)}function d(L){if(L==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let m=e.precision!==void 0?e.precision:"highp";const _=d(m);_!==m&&(console.warn("THREE.WebGLRenderer:",m,"not supported, using",_,"instead."),m=_);const y=e.logarithmicDepthBuffer===!0,S=e.reversedDepthBuffer===!0&&t.has("EXT_clip_control"),T=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),R=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C=i.getParameter(i.MAX_TEXTURE_SIZE),w=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),M=i.getParameter(i.MAX_VERTEX_ATTRIBS),O=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),z=i.getParameter(i.MAX_VARYING_VECTORS),V=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),j=R>0,q=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:d,textureFormatReadable:u,textureTypeReadable:f,precision:m,logarithmicDepthBuffer:y,reversedDepthBuffer:S,maxTextures:T,maxVertexTextures:R,maxTextureSize:C,maxCubemapSize:w,maxAttributes:M,maxVertexUniforms:O,maxVaryings:z,maxFragmentUniforms:V,vertexTextures:j,maxSamples:q}}function wz(i){const t=this;let e=null,n=0,s=!1,r=!1;const u=new Wc,f=new pn,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(y,S){const T=y.length!==0||S||n!==0||s;return s=S,n=y.length,T},this.beginShadows=function(){r=!0,_(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(y,S){e=_(y,S,0)},this.setState=function(y,S,T){const R=y.clippingPlanes,C=y.clipIntersection,w=y.clipShadows,M=i.get(y);if(!s||R===null||R.length===0||r&&!w)r?_(null):m();else{const O=r?0:n,z=O*4;let V=M.clippingState||null;d.value=V,V=_(R,S,z,T);for(let j=0;j!==z;++j)V[j]=e[j];M.clippingState=V,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=O}};function m(){d.value!==e&&(d.value=e,d.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function _(y,S,T,R){const C=y!==null?y.length:0;let w=null;if(C!==0){if(w=d.value,R!==!0||w===null){const M=T+C*4,O=S.matrixWorldInverse;f.getNormalMatrix(O),(w===null||w.length<M)&&(w=new Float32Array(M));for(let z=0,V=T;z!==C;++z,V+=4)u.copy(y[z]).applyMatrix4(O,f),u.normal.toArray(w,V),w[V+3]=u.constant}d.value=w,d.needsUpdate=!0}return t.numPlanes=C,t.numIntersection=0,w}}function Cz(i){let t=new WeakMap;function e(u,f){return f===Yg?u.mapping=qu:f===Wg&&(u.mapping=sh),u}function n(u){if(u&&u.isTexture){const f=u.mapping;if(f===Yg||f===Wg)if(t.has(u)){const d=t.get(u).texture;return e(d,u.mapping)}else{const d=u.image;if(d&&d.height>0){const m=new Uw(d.height);return m.fromEquirectangularTexture(i,u),t.set(u,m),u.addEventListener("dispose",s),e(m.texture,u.mapping)}else return null}}return u}function s(u){const f=u.target;f.removeEventListener("dispose",s);const d=t.get(f);d!==void 0&&(t.delete(f),d.dispose())}function r(){t=new WeakMap}return{get:n,dispose:r}}const _p=4,OA=[.125,.215,.35,.446,.526,.582],Tf=20,wE=new w_,LA=new Te;let CE=null,DE=0,NE=0,IE=!1;const xf=(1+Math.sqrt(5))/2,rp=1/xf,PA=[new tt(-xf,rp,0),new tt(xf,rp,0),new tt(-rp,0,xf),new tt(rp,0,xf),new tt(0,xf,-rp),new tt(0,xf,rp),new tt(-1,1,-1),new tt(1,1,-1),new tt(-1,1,1),new tt(1,1,1)],Dz=new tt;class ST{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,s=100,r={}){const{size:u=256,position:f=Dz}=r;CE=this._renderer.getRenderTarget(),DE=this._renderer.getActiveCubeFace(),NE=this._renderer.getActiveMipmapLevel(),IE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(u);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(t,n,s,d,f),e>0&&this._blur(d,0,0,e),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=BA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=VA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(CE,DE,NE),this._renderer.xr.enabled=IE,t.scissorTest=!1,Iv(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===qu||t.mapping===sh?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),CE=this._renderer.getRenderTarget(),DE=this._renderer.getActiveCubeFace(),NE=this._renderer.getActiveMipmapLevel(),IE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:bs,minFilter:bs,generateMipmaps:!1,type:kp,format:Ca,colorSpace:ah,depthBuffer:!1},s=zA(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=zA(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Nz(r)),this._blurMaterial=Iz(r,t,e)}return s}_compileMaterial(t){const e=new ms(this._lodPlanes[0],t);this._renderer.compile(e,wE)}_sceneToCubeUV(t,e,n,s,r){const d=new Bs(90,1,e,n),m=[1,-1,1,1,1,1],_=[1,1,1,-1,-1,-1],y=this._renderer,S=y.autoClear,T=y.toneMapping;y.getClearColor(LA),y.toneMapping=jl,y.autoClear=!1,y.state.buffers.depth.getReversed()&&(y.setRenderTarget(s),y.clearDepth(),y.setRenderTarget(null));const C=new ph({name:"PMREM.Background",side:nr,depthWrite:!1,depthTest:!1}),w=new ms(new zf,C);let M=!1;const O=t.background;O?O.isColor&&(C.color.copy(O),t.background=null,M=!0):(C.color.copy(LA),M=!0);for(let z=0;z<6;z++){const V=z%3;V===0?(d.up.set(0,m[z],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x+_[z],r.y,r.z)):V===1?(d.up.set(0,0,m[z]),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y+_[z],r.z)):(d.up.set(0,m[z],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y,r.z+_[z]));const j=this._cubeSize;Iv(s,V*j,z>2?j:0,j,j),y.setRenderTarget(s),M&&y.render(w,d),y.render(t,d)}w.geometry.dispose(),w.material.dispose(),y.toneMapping=T,y.autoClear=S,t.background=O}_textureToCubeUV(t,e){const n=this._renderer,s=t.mapping===qu||t.mapping===sh;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=BA()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=VA());const r=s?this._cubemapMaterial:this._equirectMaterial,u=new ms(this._lodPlanes[0],r),f=r.uniforms;f.envMap.value=t;const d=this._cubeSize;Iv(e,0,0,3*d,2*d),n.setRenderTarget(e),n.render(u,wE)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const u=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),f=PA[(s-r-1)%PA.length];this._blur(t,r-1,r,u,f)}e.autoClear=n}_blur(t,e,n,s,r){const u=this._pingPongRenderTarget;this._halfBlur(t,u,e,n,s,"latitudinal",r),this._halfBlur(u,t,n,n,s,"longitudinal",r)}_halfBlur(t,e,n,s,r,u,f){const d=this._renderer,m=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const _=3,y=new ms(this._lodPlanes[s],m),S=m.uniforms,T=this._sizeLods[n]-1,R=isFinite(r)?Math.PI/(2*T):2*Math.PI/(2*Tf-1),C=r/R,w=isFinite(r)?1+Math.floor(_*C):Tf;w>Tf&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Tf}`);const M=[];let O=0;for(let L=0;L<Tf;++L){const P=L/C,D=Math.exp(-P*P/2);M.push(D),L===0?O+=D:L<w&&(O+=2*D)}for(let L=0;L<M.length;L++)M[L]=M[L]/O;S.envMap.value=t.texture,S.samples.value=w,S.weights.value=M,S.latitudinal.value=u==="latitudinal",f&&(S.poleAxis.value=f);const{_lodMax:z}=this;S.dTheta.value=R,S.mipInt.value=z-n;const V=this._sizeLods[s],j=3*V*(s>z-_p?s-z+_p:0),q=4*(this._cubeSize-V);Iv(e,j,q,3*V,2*V),d.setRenderTarget(e),d.render(y,wE)}}function Nz(i){const t=[],e=[],n=[];let s=i;const r=i-_p+1+OA.length;for(let u=0;u<r;u++){const f=Math.pow(2,s);e.push(f);let d=1/f;u>i-_p?d=OA[u-i+_p-1]:u===0&&(d=0),n.push(d);const m=1/(f-2),_=-m,y=1+m,S=[_,_,y,_,y,y,_,_,y,y,_,y],T=6,R=6,C=3,w=2,M=1,O=new Float32Array(C*R*T),z=new Float32Array(w*R*T),V=new Float32Array(M*R*T);for(let q=0;q<T;q++){const L=q%3*2/3-1,P=q>2?0:-1,D=[L,P,0,L+2/3,P,0,L+2/3,P+1,0,L,P,0,L+2/3,P+1,0,L,P+1,0];O.set(D,C*R*q),z.set(S,w*R*q);const U=[q,q,q,q,q,q];V.set(U,M*R*q)}const j=new _n;j.setAttribute("position",new pi(O,C)),j.setAttribute("uv",new pi(z,w)),j.setAttribute("faceIndex",new pi(V,M)),t.push(j),s>_p&&s--}return{lodPlanes:t,sizeLods:e,sigmas:n}}function zA(i,t,e){const n=new Jl(i,t,e);return n.texture.mapping=Gp,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Iv(i,t,e,n,s){i.viewport.set(t,e,n,s),i.scissor.set(t,e,n,s)}function Iz(i,t,e){const n=new Float32Array(Tf),s=new tt(0,1,0);return new il({name:"SphericalGaussianBlur",defines:{n:Tf,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:Vb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Fu,depthTest:!1,depthWrite:!1})}function VA(){return new il({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Vb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Fu,depthTest:!1,depthWrite:!1})}function BA(){return new il({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Vb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Fu,depthTest:!1,depthWrite:!1})}function Vb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Uz(i){let t=new WeakMap,e=null;function n(f){if(f&&f.isTexture){const d=f.mapping,m=d===Yg||d===Wg,_=d===qu||d===sh;if(m||_){let y=t.get(f);const S=y!==void 0?y.texture.pmremVersion:0;if(f.isRenderTargetTexture&&f.pmremVersion!==S)return e===null&&(e=new ST(i)),y=m?e.fromEquirectangular(f,y):e.fromCubemap(f,y),y.texture.pmremVersion=f.pmremVersion,t.set(f,y),y.texture;if(y!==void 0)return y.texture;{const T=f.image;return m&&T&&T.height>0||_&&T&&s(T)?(e===null&&(e=new ST(i)),y=m?e.fromEquirectangular(f):e.fromCubemap(f),y.texture.pmremVersion=f.pmremVersion,t.set(f,y),f.addEventListener("dispose",r),y.texture):null}}}return f}function s(f){let d=0;const m=6;for(let _=0;_<m;_++)f[_]!==void 0&&d++;return d===m}function r(f){const d=f.target;d.removeEventListener("dispose",r);const m=t.get(d);m!==void 0&&(t.delete(d),m.dispose())}function u(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:u}}function Oz(i){const t={};function e(n){if(t[n]!==void 0)return t[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return t[n]=s,s}return{has:function(n){return e(n)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const s=e(n);return s===null&&n_("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function Lz(i,t,e,n){const s={},r=new WeakMap;function u(y){const S=y.target;S.index!==null&&t.remove(S.index);for(const R in S.attributes)t.remove(S.attributes[R]);S.removeEventListener("dispose",u),delete s[S.id];const T=r.get(S);T&&(t.remove(T),r.delete(S)),n.releaseStatesOfGeometry(S),S.isInstancedBufferGeometry===!0&&delete S._maxInstanceCount,e.memory.geometries--}function f(y,S){return s[S.id]===!0||(S.addEventListener("dispose",u),s[S.id]=!0,e.memory.geometries++),S}function d(y){const S=y.attributes;for(const T in S)t.update(S[T],i.ARRAY_BUFFER)}function m(y){const S=[],T=y.index,R=y.attributes.position;let C=0;if(T!==null){const O=T.array;C=T.version;for(let z=0,V=O.length;z<V;z+=3){const j=O[z+0],q=O[z+1],L=O[z+2];S.push(j,q,q,L,L,j)}}else if(R!==void 0){const O=R.array;C=R.version;for(let z=0,V=O.length/3-1;z<V;z+=3){const j=z+0,q=z+1,L=z+2;S.push(j,q,q,L,L,j)}}else return;const w=new(Aw(S)?hb:cb)(S,1);w.version=C;const M=r.get(y);M&&t.remove(M),r.set(y,w)}function _(y){const S=r.get(y);if(S){const T=y.index;T!==null&&S.version<T.version&&m(y)}else m(y);return r.get(y)}return{get:f,update:d,getWireframeAttribute:_}}function Pz(i,t,e){let n;function s(S){n=S}let r,u;function f(S){r=S.type,u=S.bytesPerElement}function d(S,T){i.drawElements(n,T,r,S*u),e.update(T,n,1)}function m(S,T,R){R!==0&&(i.drawElementsInstanced(n,T,r,S*u,R),e.update(T,n,R))}function _(S,T,R){if(R===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,T,0,r,S,0,R);let w=0;for(let M=0;M<R;M++)w+=T[M];e.update(w,n,1)}function y(S,T,R,C){if(R===0)return;const w=t.get("WEBGL_multi_draw");if(w===null)for(let M=0;M<S.length;M++)m(S[M]/u,T[M],C[M]);else{w.multiDrawElementsInstancedWEBGL(n,T,0,r,S,0,C,0,R);let M=0;for(let O=0;O<R;O++)M+=T[O]*C[O];e.update(M,n,1)}}this.setMode=s,this.setIndex=f,this.render=d,this.renderInstances=m,this.renderMultiDraw=_,this.renderMultiDrawInstances=y}function zz(i){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,u,f){switch(e.calls++,u){case i.TRIANGLES:e.triangles+=f*(r/3);break;case i.LINES:e.lines+=f*(r/2);break;case i.LINE_STRIP:e.lines+=f*(r-1);break;case i.LINE_LOOP:e.lines+=f*r;break;case i.POINTS:e.points+=f*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u);break}}function s(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:s,update:n}}function Vz(i,t,e){const n=new WeakMap,s=new Yn;function r(u,f,d){const m=u.morphTargetInfluences,_=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,y=_!==void 0?_.length:0;let S=n.get(f);if(S===void 0||S.count!==y){let U=function(){P.dispose(),n.delete(f),f.removeEventListener("dispose",U)};var T=U;S!==void 0&&S.texture.dispose();const R=f.morphAttributes.position!==void 0,C=f.morphAttributes.normal!==void 0,w=f.morphAttributes.color!==void 0,M=f.morphAttributes.position||[],O=f.morphAttributes.normal||[],z=f.morphAttributes.color||[];let V=0;R===!0&&(V=1),C===!0&&(V=2),w===!0&&(V=3);let j=f.attributes.position.count*V,q=1;j>t.maxTextureSize&&(q=Math.ceil(j/t.maxTextureSize),j=t.maxTextureSize);const L=new Float32Array(j*q*4*y),P=new yS(L,j,q,y);P.type=xr,P.needsUpdate=!0;const D=V*4;for(let F=0;F<y;F++){const Y=M[F],G=O[F],gt=z[F],vt=j*q*4*F;for(let k=0;k<Y.count;k++){const et=k*D;R===!0&&(s.fromBufferAttribute(Y,k),L[vt+et+0]=s.x,L[vt+et+1]=s.y,L[vt+et+2]=s.z,L[vt+et+3]=0),C===!0&&(s.fromBufferAttribute(G,k),L[vt+et+4]=s.x,L[vt+et+5]=s.y,L[vt+et+6]=s.z,L[vt+et+7]=0),w===!0&&(s.fromBufferAttribute(gt,k),L[vt+et+8]=s.x,L[vt+et+9]=s.y,L[vt+et+10]=s.z,L[vt+et+11]=gt.itemSize===4?s.w:1)}}S={count:y,texture:P,size:new Jt(j,q)},n.set(f,S),f.addEventListener("dispose",U)}if(u.isInstancedMesh===!0&&u.morphTexture!==null)d.getUniforms().setValue(i,"morphTexture",u.morphTexture,e);else{let R=0;for(let w=0;w<m.length;w++)R+=m[w];const C=f.morphTargetsRelative?1:1-R;d.getUniforms().setValue(i,"morphTargetBaseInfluence",C),d.getUniforms().setValue(i,"morphTargetInfluences",m)}d.getUniforms().setValue(i,"morphTargetsTexture",S.texture,e),d.getUniforms().setValue(i,"morphTargetsTextureSize",S.size)}return{update:r}}function Bz(i,t,e,n){let s=new WeakMap;function r(d){const m=n.render.frame,_=d.geometry,y=t.get(d,_);if(s.get(y)!==m&&(t.update(y),s.set(y,m)),d.isInstancedMesh&&(d.hasEventListener("dispose",f)===!1&&d.addEventListener("dispose",f),s.get(d)!==m&&(e.update(d.instanceMatrix,i.ARRAY_BUFFER),d.instanceColor!==null&&e.update(d.instanceColor,i.ARRAY_BUFFER),s.set(d,m))),d.isSkinnedMesh){const S=d.skeleton;s.get(S)!==m&&(S.update(),s.set(S,m))}return y}function u(){s=new WeakMap}function f(d){const m=d.target;m.removeEventListener("dispose",f),e.remove(m.instanceMatrix),m.instanceColor!==null&&e.remove(m.instanceColor)}return{update:r,dispose:u}}const IC=new Qi,FA=new gb(1,1),UC=new yS,OC=new vS,LC=new x_,HA=[],GA=[],kA=new Float32Array(16),qA=new Float32Array(9),XA=new Float32Array(4);function Yp(i,t,e){const n=i[0];if(n<=0||n>0)return i;const s=t*e;let r=HA[s];if(r===void 0&&(r=new Float32Array(s),HA[s]=r),t!==0){n.toArray(r,0);for(let u=1,f=0;u!==t;++u)f+=e,i[u].toArray(r,f)}return r}function As(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function Rs(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function HS(i,t){let e=GA[t];e===void 0&&(e=new Int32Array(t),GA[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function Fz(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function Hz(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(As(e,t))return;i.uniform2fv(this.addr,t),Rs(e,t)}}function Gz(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(As(e,t))return;i.uniform3fv(this.addr,t),Rs(e,t)}}function kz(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(As(e,t))return;i.uniform4fv(this.addr,t),Rs(e,t)}}function qz(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(As(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),Rs(e,t)}else{if(As(e,n))return;XA.set(n),i.uniformMatrix2fv(this.addr,!1,XA),Rs(e,n)}}function Xz(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(As(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),Rs(e,t)}else{if(As(e,n))return;qA.set(n),i.uniformMatrix3fv(this.addr,!1,qA),Rs(e,n)}}function jz(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(As(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),Rs(e,t)}else{if(As(e,n))return;kA.set(n),i.uniformMatrix4fv(this.addr,!1,kA),Rs(e,n)}}function Yz(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function Wz(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(As(e,t))return;i.uniform2iv(this.addr,t),Rs(e,t)}}function Kz(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(As(e,t))return;i.uniform3iv(this.addr,t),Rs(e,t)}}function Qz(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(As(e,t))return;i.uniform4iv(this.addr,t),Rs(e,t)}}function Zz(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function Jz(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(As(e,t))return;i.uniform2uiv(this.addr,t),Rs(e,t)}}function $z(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(As(e,t))return;i.uniform3uiv(this.addr,t),Rs(e,t)}}function tV(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(As(e,t))return;i.uniform4uiv(this.addr,t),Rs(e,t)}}function eV(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(FA.compareFunction=ob,r=FA):r=IC,e.setTexture2D(t||r,s)}function nV(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTexture3D(t||OC,s)}function iV(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTextureCube(t||LC,s)}function sV(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTexture2DArray(t||UC,s)}function aV(i){switch(i){case 5126:return Fz;case 35664:return Hz;case 35665:return Gz;case 35666:return kz;case 35674:return qz;case 35675:return Xz;case 35676:return jz;case 5124:case 35670:return Yz;case 35667:case 35671:return Wz;case 35668:case 35672:return Kz;case 35669:case 35673:return Qz;case 5125:return Zz;case 36294:return Jz;case 36295:return $z;case 36296:return tV;case 35678:case 36198:case 36298:case 36306:case 35682:return eV;case 35679:case 36299:case 36307:return nV;case 35680:case 36300:case 36308:case 36293:return iV;case 36289:case 36303:case 36311:case 36292:return sV}}function rV(i,t){i.uniform1fv(this.addr,t)}function oV(i,t){const e=Yp(t,this.size,2);i.uniform2fv(this.addr,e)}function lV(i,t){const e=Yp(t,this.size,3);i.uniform3fv(this.addr,e)}function uV(i,t){const e=Yp(t,this.size,4);i.uniform4fv(this.addr,e)}function cV(i,t){const e=Yp(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function hV(i,t){const e=Yp(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function fV(i,t){const e=Yp(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function dV(i,t){i.uniform1iv(this.addr,t)}function pV(i,t){i.uniform2iv(this.addr,t)}function mV(i,t){i.uniform3iv(this.addr,t)}function gV(i,t){i.uniform4iv(this.addr,t)}function _V(i,t){i.uniform1uiv(this.addr,t)}function yV(i,t){i.uniform2uiv(this.addr,t)}function vV(i,t){i.uniform3uiv(this.addr,t)}function SV(i,t){i.uniform4uiv(this.addr,t)}function xV(i,t,e){const n=this.cache,s=t.length,r=HS(e,s);As(n,r)||(i.uniform1iv(this.addr,r),Rs(n,r));for(let u=0;u!==s;++u)e.setTexture2D(t[u]||IC,r[u])}function EV(i,t,e){const n=this.cache,s=t.length,r=HS(e,s);As(n,r)||(i.uniform1iv(this.addr,r),Rs(n,r));for(let u=0;u!==s;++u)e.setTexture3D(t[u]||OC,r[u])}function TV(i,t,e){const n=this.cache,s=t.length,r=HS(e,s);As(n,r)||(i.uniform1iv(this.addr,r),Rs(n,r));for(let u=0;u!==s;++u)e.setTextureCube(t[u]||LC,r[u])}function bV(i,t,e){const n=this.cache,s=t.length,r=HS(e,s);As(n,r)||(i.uniform1iv(this.addr,r),Rs(n,r));for(let u=0;u!==s;++u)e.setTexture2DArray(t[u]||UC,r[u])}function MV(i){switch(i){case 5126:return rV;case 35664:return oV;case 35665:return lV;case 35666:return uV;case 35674:return cV;case 35675:return hV;case 35676:return fV;case 5124:case 35670:return dV;case 35667:case 35671:return pV;case 35668:case 35672:return mV;case 35669:case 35673:return gV;case 5125:return _V;case 36294:return yV;case 36295:return vV;case 36296:return SV;case 35678:case 36198:case 36298:case 36306:case 35682:return xV;case 35679:case 36299:case 36307:return EV;case 35680:case 36300:case 36308:case 36293:return TV;case 36289:case 36303:case 36311:case 36292:return bV}}class AV{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=aV(e.type)}}class RV{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=MV(e.type)}}class wV{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const s=this.seq;for(let r=0,u=s.length;r!==u;++r){const f=s[r];f.setValue(t,e[f.id],n)}}}const UE=/(\w+)(\])?(\[|\.)?/g;function jA(i,t){i.seq.push(t),i.map[t.id]=t}function CV(i,t,e){const n=i.name,s=n.length;for(UE.lastIndex=0;;){const r=UE.exec(n),u=UE.lastIndex;let f=r[1];const d=r[2]==="]",m=r[3];if(d&&(f=f|0),m===void 0||m==="["&&u+2===s){jA(e,m===void 0?new AV(f,i,t):new RV(f,i,t));break}else{let y=e.map[f];y===void 0&&(y=new wV(f),jA(e,y)),e=y}}}class Xv{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=t.getActiveUniform(e,s),u=t.getUniformLocation(e,r.name);CV(r,u,this)}}setValue(t,e,n,s){const r=this.map[e];r!==void 0&&r.setValue(t,n,s)}setOptional(t,e,n){const s=e[n];s!==void 0&&this.setValue(t,n,s)}static upload(t,e,n,s){for(let r=0,u=e.length;r!==u;++r){const f=e[r],d=n[f.id];d.needsUpdate!==!1&&f.setValue(t,d.value,s)}}static seqWithValue(t,e){const n=[];for(let s=0,r=t.length;s!==r;++s){const u=t[s];u.id in e&&n.push(u)}return n}}function YA(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const DV=37297;let NV=0;function IV(i,t){const e=i.split(`
`),n=[],s=Math.max(t-6,0),r=Math.min(t+6,e.length);for(let u=s;u<r;u++){const f=u+1;n.push(`${f===t?">":" "} ${f}: ${e[u]}`)}return n.join(`
`)}const WA=new pn;function UV(i){Hn._getMatrix(WA,Hn.workingColorSpace,i);const t=`mat3( ${WA.elements.map(e=>e.toFixed(4))} )`;switch(Hn.getTransfer(i)){case $g:return[t,"LinearTransferOETF"];case li:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[t,"LinearTransferOETF"]}}function KA(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),r=(i.getShaderInfoLog(t)||"").trim();if(n&&r==="")return"";const u=/ERROR: 0:(\d+)/.exec(r);if(u){const f=parseInt(u[1]);return e.toUpperCase()+`

`+r+`

`+IV(i.getShaderSource(t),f)}else return r}function OV(i,t){const e=UV(t);return[`vec4 ${i}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function LV(i,t){let e;switch(t){case rw:e="Linear";break;case ow:e="Reinhard";break;case lw:e="Cineon";break;case ZT:e="ACESFilmic";break;case cw:e="AgX";break;case hw:e="Neutral";break;case uw:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const Uv=new tt;function PV(){Hn.getLuminanceCoefficients(Uv);const i=Uv.x.toFixed(4),t=Uv.y.toFixed(4),e=Uv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function zV(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(wg).join(`
`)}function VV(i){const t=[];for(const e in i){const n=i[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function BV(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(t,s),u=r.name;let f=1;r.type===i.FLOAT_MAT2&&(f=2),r.type===i.FLOAT_MAT3&&(f=3),r.type===i.FLOAT_MAT4&&(f=4),e[u]={type:r.type,location:i.getAttribLocation(t,u),locationSize:f}}return e}function wg(i){return i!==""}function QA(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function ZA(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const FV=/^[ \t]*#include +<([\w\d./]+)>/gm;function xT(i){return i.replace(FV,GV)}const HV=new Map;function GV(i,t){let e=En[t];if(e===void 0){const n=HV.get(t);if(n!==void 0)e=En[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return xT(e)}const kV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function JA(i){return i.replace(kV,qV)}function qV(i,t,e,n){let s="";for(let r=parseInt(t);r<parseInt(e);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function $A(i){let t=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?t+=`
#define HIGH_PRECISION`:i.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function XV(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===uS?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===Ig?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===$o&&(t="SHADOWMAP_TYPE_VSM"),t}function jV(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case qu:case sh:t="ENVMAP_TYPE_CUBE";break;case Gp:t="ENVMAP_TYPE_CUBE_UV";break}return t}function YV(i){let t="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case sh:t="ENVMAP_MODE_REFRACTION";break}return t}function WV(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case v_:t="ENVMAP_BLENDING_MULTIPLY";break;case sw:t="ENVMAP_BLENDING_MIX";break;case aw:t="ENVMAP_BLENDING_ADD";break}return t}function KV(i){const t=i.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}function QV(i,t,e,n){const s=i.getContext(),r=e.defines;let u=e.vertexShader,f=e.fragmentShader;const d=XV(e),m=jV(e),_=YV(e),y=WV(e),S=KV(e),T=zV(e),R=VV(r),C=s.createProgram();let w,M,O=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(w=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,R].filter(wg).join(`
`),w.length>0&&(w+=`
`),M=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,R].filter(wg).join(`
`),M.length>0&&(M+=`
`)):(w=[$A(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,R,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+_:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",e.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(wg).join(`
`),M=[$A(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,R,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+m:"",e.envMap?"#define "+_:"",e.envMap?"#define "+y:"",S?"#define CUBEUV_TEXEL_WIDTH "+S.texelWidth:"",S?"#define CUBEUV_TEXEL_HEIGHT "+S.texelHeight:"",S?"#define CUBEUV_MAX_MIP "+S.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",e.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==jl?"#define TONE_MAPPING":"",e.toneMapping!==jl?En.tonemapping_pars_fragment:"",e.toneMapping!==jl?LV("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",En.colorspace_pars_fragment,OV("linearToOutputTexel",e.outputColorSpace),PV(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(wg).join(`
`)),u=xT(u),u=QA(u,e),u=ZA(u,e),f=xT(f),f=QA(f,e),f=ZA(f,e),u=JA(u),f=JA(f),e.isRawShaderMaterial!==!0&&(O=`#version 300 es
`,w=[T,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,M=["#define varying in",e.glslVersion===fT?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===fT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const z=O+w+u,V=O+M+f,j=YA(s,s.VERTEX_SHADER,z),q=YA(s,s.FRAGMENT_SHADER,V);s.attachShader(C,j),s.attachShader(C,q),e.index0AttributeName!==void 0?s.bindAttribLocation(C,0,e.index0AttributeName):e.morphTargets===!0&&s.bindAttribLocation(C,0,"position"),s.linkProgram(C);function L(F){if(i.debug.checkShaderErrors){const Y=s.getProgramInfoLog(C)||"",G=s.getShaderInfoLog(j)||"",gt=s.getShaderInfoLog(q)||"",vt=Y.trim(),k=G.trim(),et=gt.trim();let nt=!0,ft=!0;if(s.getProgramParameter(C,s.LINK_STATUS)===!1)if(nt=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,C,j,q);else{const wt=KA(s,j,"vertex"),J=KA(s,q,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(C,s.VALIDATE_STATUS)+`

Material Name: `+F.name+`
Material Type: `+F.type+`

Program Info Log: `+vt+`
`+wt+`
`+J)}else vt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",vt):(k===""||et==="")&&(ft=!1);ft&&(F.diagnostics={runnable:nt,programLog:vt,vertexShader:{log:k,prefix:w},fragmentShader:{log:et,prefix:M}})}s.deleteShader(j),s.deleteShader(q),P=new Xv(s,C),D=BV(s,C)}let P;this.getUniforms=function(){return P===void 0&&L(this),P};let D;this.getAttributes=function(){return D===void 0&&L(this),D};let U=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=s.getProgramParameter(C,DV)),U},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(C),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=NV++,this.cacheKey=t,this.usedTimes=1,this.program=C,this.vertexShader=j,this.fragmentShader=q,this}let ZV=0;class JV{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,s=this._getShaderStage(e),r=this._getShaderStage(n),u=this._getShaderCacheForMaterial(t);return u.has(s)===!1&&(u.add(s),s.usedTimes++),u.has(r)===!1&&(u.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return n===void 0&&(n=new $V(t),e.set(t,n)),n}}class $V{constructor(t){this.id=ZV++,this.code=t,this.usedTimes=0}}function tB(i,t,e,n,s,r,u){const f=new Cp,d=new JV,m=new Set,_=[],y=s.logarithmicDepthBuffer,S=s.vertexTextures;let T=s.precision;const R={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function C(D){return m.add(D),D===0?"uv":`uv${D}`}function w(D,U,F,Y,G){const gt=Y.fog,vt=G.geometry,k=D.isMeshStandardMaterial?Y.environment:null,et=(D.isMeshStandardMaterial?e:t).get(D.envMap||k),nt=et&&et.mapping===Gp?et.image.height:null,ft=R[D.type];D.precision!==null&&(T=s.getMaxPrecision(D.precision),T!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",T,"instead."));const wt=vt.morphAttributes.position||vt.morphAttributes.normal||vt.morphAttributes.color,J=wt!==void 0?wt.length:0;let ut=0;vt.morphAttributes.position!==void 0&&(ut=1),vt.morphAttributes.normal!==void 0&&(ut=2),vt.morphAttributes.color!==void 0&&(ut=3);let Ot,Lt,ee,xt;if(ft){const nn=tl[ft];Ot=nn.vertexShader,Lt=nn.fragmentShader}else Ot=D.vertexShader,Lt=D.fragmentShader,d.update(D),ee=d.getVertexShaderID(D),xt=d.getFragmentShaderID(D);const It=i.getRenderTarget(),ae=i.state.buffers.depth.getReversed(),de=G.isInstancedMesh===!0,Ee=G.isBatchedMesh===!0,Ze=!!D.map,bn=!!D.matcap,it=!!et,qt=!!D.aoMap,Ht=!!D.lightMap,Vt=!!D.bumpMap,Pt=!!D.normalMap,ue=!!D.displacementMap,kt=!!D.emissiveMap,Kt=!!D.metalnessMap,ze=!!D.roughnessMap,Ye=D.anisotropy>0,$=D.clearcoat>0,X=D.dispersion>0,_t=D.iridescence>0,Dt=D.sheen>0,Qt=D.transmission>0,Ut=Ye&&!!D.anisotropyMap,De=$&&!!D.clearcoatMap,oe=$&&!!D.clearcoatNormalMap,be=$&&!!D.clearcoatRoughnessMap,Me=_t&&!!D.iridescenceMap,Yt=_t&&!!D.iridescenceThicknessMap,ie=Dt&&!!D.sheenColorMap,Ce=Dt&&!!D.sheenRoughnessMap,pe=!!D.specularMap,fe=!!D.specularColorMap,ke=!!D.specularIntensityMap,ot=Qt&&!!D.transmissionMap,te=Qt&&!!D.thicknessMap,re=!!D.gradientMap,he=!!D.alphaMap,$t=D.alphaTest>0,Bt=!!D.alphaHash,ye=!!D.extensions;let Xe=jl;D.toneMapped&&(It===null||It.isXRRenderTarget===!0)&&(Xe=i.toneMapping);const Rn={shaderID:ft,shaderType:D.type,shaderName:D.name,vertexShader:Ot,fragmentShader:Lt,defines:D.defines,customVertexShaderID:ee,customFragmentShaderID:xt,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:T,batching:Ee,batchingColor:Ee&&G._colorsTexture!==null,instancing:de,instancingColor:de&&G.instanceColor!==null,instancingMorph:de&&G.morphTexture!==null,supportsVertexTextures:S,outputColorSpace:It===null?i.outputColorSpace:It.isXRRenderTarget===!0?It.texture.colorSpace:ah,alphaToCoverage:!!D.alphaToCoverage,map:Ze,matcap:bn,envMap:it,envMapMode:it&&et.mapping,envMapCubeUVHeight:nt,aoMap:qt,lightMap:Ht,bumpMap:Vt,normalMap:Pt,displacementMap:S&&ue,emissiveMap:kt,normalMapObjectSpace:Pt&&D.normalMapType===yw,normalMapTangentSpace:Pt&&D.normalMapType===dh,metalnessMap:Kt,roughnessMap:ze,anisotropy:Ye,anisotropyMap:Ut,clearcoat:$,clearcoatMap:De,clearcoatNormalMap:oe,clearcoatRoughnessMap:be,dispersion:X,iridescence:_t,iridescenceMap:Me,iridescenceThicknessMap:Yt,sheen:Dt,sheenColorMap:ie,sheenRoughnessMap:Ce,specularMap:pe,specularColorMap:fe,specularIntensityMap:ke,transmission:Qt,transmissionMap:ot,thicknessMap:te,gradientMap:re,opaque:D.transparent===!1&&D.blending===wf&&D.alphaToCoverage===!1,alphaMap:he,alphaTest:$t,alphaHash:Bt,combine:D.combine,mapUv:Ze&&C(D.map.channel),aoMapUv:qt&&C(D.aoMap.channel),lightMapUv:Ht&&C(D.lightMap.channel),bumpMapUv:Vt&&C(D.bumpMap.channel),normalMapUv:Pt&&C(D.normalMap.channel),displacementMapUv:ue&&C(D.displacementMap.channel),emissiveMapUv:kt&&C(D.emissiveMap.channel),metalnessMapUv:Kt&&C(D.metalnessMap.channel),roughnessMapUv:ze&&C(D.roughnessMap.channel),anisotropyMapUv:Ut&&C(D.anisotropyMap.channel),clearcoatMapUv:De&&C(D.clearcoatMap.channel),clearcoatNormalMapUv:oe&&C(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:be&&C(D.clearcoatRoughnessMap.channel),iridescenceMapUv:Me&&C(D.iridescenceMap.channel),iridescenceThicknessMapUv:Yt&&C(D.iridescenceThicknessMap.channel),sheenColorMapUv:ie&&C(D.sheenColorMap.channel),sheenRoughnessMapUv:Ce&&C(D.sheenRoughnessMap.channel),specularMapUv:pe&&C(D.specularMap.channel),specularColorMapUv:fe&&C(D.specularColorMap.channel),specularIntensityMapUv:ke&&C(D.specularIntensityMap.channel),transmissionMapUv:ot&&C(D.transmissionMap.channel),thicknessMapUv:te&&C(D.thicknessMap.channel),alphaMapUv:he&&C(D.alphaMap.channel),vertexTangents:!!vt.attributes.tangent&&(Pt||Ye),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!vt.attributes.color&&vt.attributes.color.itemSize===4,pointsUvs:G.isPoints===!0&&!!vt.attributes.uv&&(Ze||he),fog:!!gt,useFog:D.fog===!0,fogExp2:!!gt&&gt.isFogExp2,flatShading:D.flatShading===!0&&D.wireframe===!1,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:y,reversedDepthBuffer:ae,skinning:G.isSkinnedMesh===!0,morphTargets:vt.morphAttributes.position!==void 0,morphNormals:vt.morphAttributes.normal!==void 0,morphColors:vt.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:ut,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:D.dithering,shadowMapEnabled:i.shadowMap.enabled&&F.length>0,shadowMapType:i.shadowMap.type,toneMapping:Xe,decodeVideoTexture:Ze&&D.map.isVideoTexture===!0&&Hn.getTransfer(D.map.colorSpace)===li,decodeVideoTextureEmissive:kt&&D.emissiveMap.isVideoTexture===!0&&Hn.getTransfer(D.emissiveMap.colorSpace)===li,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===kl,flipSided:D.side===nr,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionClipCullDistance:ye&&D.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ye&&D.extensions.multiDraw===!0||Ee)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()};return Rn.vertexUv1s=m.has(1),Rn.vertexUv2s=m.has(2),Rn.vertexUv3s=m.has(3),m.clear(),Rn}function M(D){const U=[];if(D.shaderID?U.push(D.shaderID):(U.push(D.customVertexShaderID),U.push(D.customFragmentShaderID)),D.defines!==void 0)for(const F in D.defines)U.push(F),U.push(D.defines[F]);return D.isRawShaderMaterial===!1&&(O(U,D),z(U,D),U.push(i.outputColorSpace)),U.push(D.customProgramCacheKey),U.join()}function O(D,U){D.push(U.precision),D.push(U.outputColorSpace),D.push(U.envMapMode),D.push(U.envMapCubeUVHeight),D.push(U.mapUv),D.push(U.alphaMapUv),D.push(U.lightMapUv),D.push(U.aoMapUv),D.push(U.bumpMapUv),D.push(U.normalMapUv),D.push(U.displacementMapUv),D.push(U.emissiveMapUv),D.push(U.metalnessMapUv),D.push(U.roughnessMapUv),D.push(U.anisotropyMapUv),D.push(U.clearcoatMapUv),D.push(U.clearcoatNormalMapUv),D.push(U.clearcoatRoughnessMapUv),D.push(U.iridescenceMapUv),D.push(U.iridescenceThicknessMapUv),D.push(U.sheenColorMapUv),D.push(U.sheenRoughnessMapUv),D.push(U.specularMapUv),D.push(U.specularColorMapUv),D.push(U.specularIntensityMapUv),D.push(U.transmissionMapUv),D.push(U.thicknessMapUv),D.push(U.combine),D.push(U.fogExp2),D.push(U.sizeAttenuation),D.push(U.morphTargetsCount),D.push(U.morphAttributeCount),D.push(U.numDirLights),D.push(U.numPointLights),D.push(U.numSpotLights),D.push(U.numSpotLightMaps),D.push(U.numHemiLights),D.push(U.numRectAreaLights),D.push(U.numDirLightShadows),D.push(U.numPointLightShadows),D.push(U.numSpotLightShadows),D.push(U.numSpotLightShadowsWithMaps),D.push(U.numLightProbes),D.push(U.shadowMapType),D.push(U.toneMapping),D.push(U.numClippingPlanes),D.push(U.numClipIntersection),D.push(U.depthPacking)}function z(D,U){f.disableAll(),U.supportsVertexTextures&&f.enable(0),U.instancing&&f.enable(1),U.instancingColor&&f.enable(2),U.instancingMorph&&f.enable(3),U.matcap&&f.enable(4),U.envMap&&f.enable(5),U.normalMapObjectSpace&&f.enable(6),U.normalMapTangentSpace&&f.enable(7),U.clearcoat&&f.enable(8),U.iridescence&&f.enable(9),U.alphaTest&&f.enable(10),U.vertexColors&&f.enable(11),U.vertexAlphas&&f.enable(12),U.vertexUv1s&&f.enable(13),U.vertexUv2s&&f.enable(14),U.vertexUv3s&&f.enable(15),U.vertexTangents&&f.enable(16),U.anisotropy&&f.enable(17),U.alphaHash&&f.enable(18),U.batching&&f.enable(19),U.dispersion&&f.enable(20),U.batchingColor&&f.enable(21),U.gradientMap&&f.enable(22),D.push(f.mask),f.disableAll(),U.fog&&f.enable(0),U.useFog&&f.enable(1),U.flatShading&&f.enable(2),U.logarithmicDepthBuffer&&f.enable(3),U.reversedDepthBuffer&&f.enable(4),U.skinning&&f.enable(5),U.morphTargets&&f.enable(6),U.morphNormals&&f.enable(7),U.morphColors&&f.enable(8),U.premultipliedAlpha&&f.enable(9),U.shadowMapEnabled&&f.enable(10),U.doubleSided&&f.enable(11),U.flipSided&&f.enable(12),U.useDepthPacking&&f.enable(13),U.dithering&&f.enable(14),U.transmission&&f.enable(15),U.sheen&&f.enable(16),U.opaque&&f.enable(17),U.pointsUvs&&f.enable(18),U.decodeVideoTexture&&f.enable(19),U.decodeVideoTextureEmissive&&f.enable(20),U.alphaToCoverage&&f.enable(21),D.push(f.mask)}function V(D){const U=R[D.type];let F;if(U){const Y=tl[U];F=Nw.clone(Y.uniforms)}else F=D.uniforms;return F}function j(D,U){let F;for(let Y=0,G=_.length;Y<G;Y++){const gt=_[Y];if(gt.cacheKey===U){F=gt,++F.usedTimes;break}}return F===void 0&&(F=new QV(i,U,D,r),_.push(F)),F}function q(D){if(--D.usedTimes===0){const U=_.indexOf(D);_[U]=_[_.length-1],_.pop(),D.destroy()}}function L(D){d.remove(D)}function P(){d.dispose()}return{getParameters:w,getProgramCacheKey:M,getUniforms:V,acquireProgram:j,releaseProgram:q,releaseShaderCache:L,programs:_,dispose:P}}function eB(){let i=new WeakMap;function t(u){return i.has(u)}function e(u){let f=i.get(u);return f===void 0&&(f={},i.set(u,f)),f}function n(u){i.delete(u)}function s(u,f,d){i.get(u)[f]=d}function r(){i=new WeakMap}return{has:t,get:e,remove:n,update:s,dispose:r}}function nB(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function tR(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function eR(){const i=[];let t=0;const e=[],n=[],s=[];function r(){t=0,e.length=0,n.length=0,s.length=0}function u(y,S,T,R,C,w){let M=i[t];return M===void 0?(M={id:y.id,object:y,geometry:S,material:T,groupOrder:R,renderOrder:y.renderOrder,z:C,group:w},i[t]=M):(M.id=y.id,M.object=y,M.geometry=S,M.material=T,M.groupOrder=R,M.renderOrder=y.renderOrder,M.z=C,M.group=w),t++,M}function f(y,S,T,R,C,w){const M=u(y,S,T,R,C,w);T.transmission>0?n.push(M):T.transparent===!0?s.push(M):e.push(M)}function d(y,S,T,R,C,w){const M=u(y,S,T,R,C,w);T.transmission>0?n.unshift(M):T.transparent===!0?s.unshift(M):e.unshift(M)}function m(y,S){e.length>1&&e.sort(y||nB),n.length>1&&n.sort(S||tR),s.length>1&&s.sort(S||tR)}function _(){for(let y=t,S=i.length;y<S;y++){const T=i[y];if(T.id===null)break;T.id=null,T.object=null,T.geometry=null,T.material=null,T.group=null}}return{opaque:e,transmissive:n,transparent:s,init:r,push:f,unshift:d,finish:_,sort:m}}function iB(){let i=new WeakMap;function t(n,s){const r=i.get(n);let u;return r===void 0?(u=new eR,i.set(n,[u])):s>=r.length?(u=new eR,r.push(u)):u=r[s],u}function e(){i=new WeakMap}return{get:t,dispose:e}}function sB(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new tt,color:new Te};break;case"SpotLight":e={position:new tt,direction:new tt,color:new Te,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new tt,color:new Te,distance:0,decay:0};break;case"HemisphereLight":e={direction:new tt,skyColor:new Te,groundColor:new Te};break;case"RectAreaLight":e={color:new Te,position:new tt,halfWidth:new tt,halfHeight:new tt};break}return i[t.id]=e,e}}}function aB(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Jt};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Jt};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Jt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[t.id]=e,e}}}let rB=0;function oB(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function lB(i){const t=new sB,e=aB(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let m=0;m<9;m++)n.probe.push(new tt);const s=new tt,r=new tn,u=new tn;function f(m){let _=0,y=0,S=0;for(let D=0;D<9;D++)n.probe[D].set(0,0,0);let T=0,R=0,C=0,w=0,M=0,O=0,z=0,V=0,j=0,q=0,L=0;m.sort(oB);for(let D=0,U=m.length;D<U;D++){const F=m[D],Y=F.color,G=F.intensity,gt=F.distance,vt=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)_+=Y.r*G,y+=Y.g*G,S+=Y.b*G;else if(F.isLightProbe){for(let k=0;k<9;k++)n.probe[k].addScaledVector(F.sh.coefficients[k],G);L++}else if(F.isDirectionalLight){const k=t.get(F);if(k.color.copy(F.color).multiplyScalar(F.intensity),F.castShadow){const et=F.shadow,nt=e.get(F);nt.shadowIntensity=et.intensity,nt.shadowBias=et.bias,nt.shadowNormalBias=et.normalBias,nt.shadowRadius=et.radius,nt.shadowMapSize=et.mapSize,n.directionalShadow[T]=nt,n.directionalShadowMap[T]=vt,n.directionalShadowMatrix[T]=F.shadow.matrix,O++}n.directional[T]=k,T++}else if(F.isSpotLight){const k=t.get(F);k.position.setFromMatrixPosition(F.matrixWorld),k.color.copy(Y).multiplyScalar(G),k.distance=gt,k.coneCos=Math.cos(F.angle),k.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),k.decay=F.decay,n.spot[C]=k;const et=F.shadow;if(F.map&&(n.spotLightMap[j]=F.map,j++,et.updateMatrices(F),F.castShadow&&q++),n.spotLightMatrix[C]=et.matrix,F.castShadow){const nt=e.get(F);nt.shadowIntensity=et.intensity,nt.shadowBias=et.bias,nt.shadowNormalBias=et.normalBias,nt.shadowRadius=et.radius,nt.shadowMapSize=et.mapSize,n.spotShadow[C]=nt,n.spotShadowMap[C]=vt,V++}C++}else if(F.isRectAreaLight){const k=t.get(F);k.color.copy(Y).multiplyScalar(G),k.halfWidth.set(F.width*.5,0,0),k.halfHeight.set(0,F.height*.5,0),n.rectArea[w]=k,w++}else if(F.isPointLight){const k=t.get(F);if(k.color.copy(F.color).multiplyScalar(F.intensity),k.distance=F.distance,k.decay=F.decay,F.castShadow){const et=F.shadow,nt=e.get(F);nt.shadowIntensity=et.intensity,nt.shadowBias=et.bias,nt.shadowNormalBias=et.normalBias,nt.shadowRadius=et.radius,nt.shadowMapSize=et.mapSize,nt.shadowCameraNear=et.camera.near,nt.shadowCameraFar=et.camera.far,n.pointShadow[R]=nt,n.pointShadowMap[R]=vt,n.pointShadowMatrix[R]=F.shadow.matrix,z++}n.point[R]=k,R++}else if(F.isHemisphereLight){const k=t.get(F);k.skyColor.copy(F.color).multiplyScalar(G),k.groundColor.copy(F.groundColor).multiplyScalar(G),n.hemi[M]=k,M++}}w>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=_e.LTC_FLOAT_1,n.rectAreaLTC2=_e.LTC_FLOAT_2):(n.rectAreaLTC1=_e.LTC_HALF_1,n.rectAreaLTC2=_e.LTC_HALF_2)),n.ambient[0]=_,n.ambient[1]=y,n.ambient[2]=S;const P=n.hash;(P.directionalLength!==T||P.pointLength!==R||P.spotLength!==C||P.rectAreaLength!==w||P.hemiLength!==M||P.numDirectionalShadows!==O||P.numPointShadows!==z||P.numSpotShadows!==V||P.numSpotMaps!==j||P.numLightProbes!==L)&&(n.directional.length=T,n.spot.length=C,n.rectArea.length=w,n.point.length=R,n.hemi.length=M,n.directionalShadow.length=O,n.directionalShadowMap.length=O,n.pointShadow.length=z,n.pointShadowMap.length=z,n.spotShadow.length=V,n.spotShadowMap.length=V,n.directionalShadowMatrix.length=O,n.pointShadowMatrix.length=z,n.spotLightMatrix.length=V+j-q,n.spotLightMap.length=j,n.numSpotLightShadowsWithMaps=q,n.numLightProbes=L,P.directionalLength=T,P.pointLength=R,P.spotLength=C,P.rectAreaLength=w,P.hemiLength=M,P.numDirectionalShadows=O,P.numPointShadows=z,P.numSpotShadows=V,P.numSpotMaps=j,P.numLightProbes=L,n.version=rB++)}function d(m,_){let y=0,S=0,T=0,R=0,C=0;const w=_.matrixWorldInverse;for(let M=0,O=m.length;M<O;M++){const z=m[M];if(z.isDirectionalLight){const V=n.directional[y];V.direction.setFromMatrixPosition(z.matrixWorld),s.setFromMatrixPosition(z.target.matrixWorld),V.direction.sub(s),V.direction.transformDirection(w),y++}else if(z.isSpotLight){const V=n.spot[T];V.position.setFromMatrixPosition(z.matrixWorld),V.position.applyMatrix4(w),V.direction.setFromMatrixPosition(z.matrixWorld),s.setFromMatrixPosition(z.target.matrixWorld),V.direction.sub(s),V.direction.transformDirection(w),T++}else if(z.isRectAreaLight){const V=n.rectArea[R];V.position.setFromMatrixPosition(z.matrixWorld),V.position.applyMatrix4(w),u.identity(),r.copy(z.matrixWorld),r.premultiply(w),u.extractRotation(r),V.halfWidth.set(z.width*.5,0,0),V.halfHeight.set(0,z.height*.5,0),V.halfWidth.applyMatrix4(u),V.halfHeight.applyMatrix4(u),R++}else if(z.isPointLight){const V=n.point[S];V.position.setFromMatrixPosition(z.matrixWorld),V.position.applyMatrix4(w),S++}else if(z.isHemisphereLight){const V=n.hemi[C];V.direction.setFromMatrixPosition(z.matrixWorld),V.direction.transformDirection(w),C++}}}return{setup:f,setupView:d,state:n}}function nR(i){const t=new lB(i),e=[],n=[];function s(_){m.camera=_,e.length=0,n.length=0}function r(_){e.push(_)}function u(_){n.push(_)}function f(){t.setup(e)}function d(_){t.setupView(e,_)}const m={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:s,state:m,setupLights:f,setupLightsView:d,pushLight:r,pushShadow:u}}function uB(i){let t=new WeakMap;function e(s,r=0){const u=t.get(s);let f;return u===void 0?(f=new nR(i),t.set(s,[f])):r>=u.length?(f=new nR(i),u.push(f)):f=u[r],f}function n(){t=new WeakMap}return{get:e,dispose:n}}const cB=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,hB=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function fB(i,t,e){let n=new Xp;const s=new Jt,r=new Jt,u=new Yn,f=new Mb({depthPacking:_w}),d=new Ab,m={},_=e.maxTextureSize,y={[ku]:nr,[nr]:ku,[kl]:kl},S=new il({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Jt},radius:{value:4}},vertexShader:cB,fragmentShader:hB}),T=S.clone();T.defines.HORIZONTAL_PASS=1;const R=new _n;R.setAttribute("position",new pi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new ms(R,S),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=uS;let M=this.type;this.render=function(q,L,P){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||q.length===0)return;const D=i.getRenderTarget(),U=i.getActiveCubeFace(),F=i.getActiveMipmapLevel(),Y=i.state;Y.setBlending(Fu),Y.buffers.depth.getReversed()===!0?Y.buffers.color.setClear(0,0,0,0):Y.buffers.color.setClear(1,1,1,1),Y.buffers.depth.setTest(!0),Y.setScissorTest(!1);const G=M!==$o&&this.type===$o,gt=M===$o&&this.type!==$o;for(let vt=0,k=q.length;vt<k;vt++){const et=q[vt],nt=et.shadow;if(nt===void 0){console.warn("THREE.WebGLShadowMap:",et,"has no shadow.");continue}if(nt.autoUpdate===!1&&nt.needsUpdate===!1)continue;s.copy(nt.mapSize);const ft=nt.getFrameExtents();if(s.multiply(ft),r.copy(nt.mapSize),(s.x>_||s.y>_)&&(s.x>_&&(r.x=Math.floor(_/ft.x),s.x=r.x*ft.x,nt.mapSize.x=r.x),s.y>_&&(r.y=Math.floor(_/ft.y),s.y=r.y*ft.y,nt.mapSize.y=r.y)),nt.map===null||G===!0||gt===!0){const J=this.type!==$o?{minFilter:na,magFilter:na}:{};nt.map!==null&&nt.map.dispose(),nt.map=new Jl(s.x,s.y,J),nt.map.texture.name=et.name+".shadowMap",nt.camera.updateProjectionMatrix()}i.setRenderTarget(nt.map),i.clear();const wt=nt.getViewportCount();for(let J=0;J<wt;J++){const ut=nt.getViewport(J);u.set(r.x*ut.x,r.y*ut.y,r.x*ut.z,r.y*ut.w),Y.viewport(u),nt.updateMatrices(et,J),n=nt.getFrustum(),V(L,P,nt.camera,et,this.type)}nt.isPointLightShadow!==!0&&this.type===$o&&O(nt,P),nt.needsUpdate=!1}M=this.type,w.needsUpdate=!1,i.setRenderTarget(D,U,F)};function O(q,L){const P=t.update(C);S.defines.VSM_SAMPLES!==q.blurSamples&&(S.defines.VSM_SAMPLES=q.blurSamples,T.defines.VSM_SAMPLES=q.blurSamples,S.needsUpdate=!0,T.needsUpdate=!0),q.mapPass===null&&(q.mapPass=new Jl(s.x,s.y)),S.uniforms.shadow_pass.value=q.map.texture,S.uniforms.resolution.value=q.mapSize,S.uniforms.radius.value=q.radius,i.setRenderTarget(q.mapPass),i.clear(),i.renderBufferDirect(L,null,P,S,C,null),T.uniforms.shadow_pass.value=q.mapPass.texture,T.uniforms.resolution.value=q.mapSize,T.uniforms.radius.value=q.radius,i.setRenderTarget(q.map),i.clear(),i.renderBufferDirect(L,null,P,T,C,null)}function z(q,L,P,D){let U=null;const F=P.isPointLight===!0?q.customDistanceMaterial:q.customDepthMaterial;if(F!==void 0)U=F;else if(U=P.isPointLight===!0?d:f,i.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0||L.alphaToCoverage===!0){const Y=U.uuid,G=L.uuid;let gt=m[Y];gt===void 0&&(gt={},m[Y]=gt);let vt=gt[G];vt===void 0&&(vt=U.clone(),gt[G]=vt,L.addEventListener("dispose",j)),U=vt}if(U.visible=L.visible,U.wireframe=L.wireframe,D===$o?U.side=L.shadowSide!==null?L.shadowSide:L.side:U.side=L.shadowSide!==null?L.shadowSide:y[L.side],U.alphaMap=L.alphaMap,U.alphaTest=L.alphaToCoverage===!0?.5:L.alphaTest,U.map=L.map,U.clipShadows=L.clipShadows,U.clippingPlanes=L.clippingPlanes,U.clipIntersection=L.clipIntersection,U.displacementMap=L.displacementMap,U.displacementScale=L.displacementScale,U.displacementBias=L.displacementBias,U.wireframeLinewidth=L.wireframeLinewidth,U.linewidth=L.linewidth,P.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const Y=i.properties.get(U);Y.light=P}return U}function V(q,L,P,D,U){if(q.visible===!1)return;if(q.layers.test(L.layers)&&(q.isMesh||q.isLine||q.isPoints)&&(q.castShadow||q.receiveShadow&&U===$o)&&(!q.frustumCulled||n.intersectsObject(q))){q.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,q.matrixWorld);const G=t.update(q),gt=q.material;if(Array.isArray(gt)){const vt=G.groups;for(let k=0,et=vt.length;k<et;k++){const nt=vt[k],ft=gt[nt.materialIndex];if(ft&&ft.visible){const wt=z(q,ft,D,U);q.onBeforeShadow(i,q,L,P,G,wt,nt),i.renderBufferDirect(P,null,G,wt,q,nt),q.onAfterShadow(i,q,L,P,G,wt,nt)}}}else if(gt.visible){const vt=z(q,gt,D,U);q.onBeforeShadow(i,q,L,P,G,vt,null),i.renderBufferDirect(P,null,G,vt,q,null),q.onAfterShadow(i,q,L,P,G,vt,null)}}const Y=q.children;for(let G=0,gt=Y.length;G<gt;G++)V(Y[G],L,P,D,U)}function j(q){q.target.removeEventListener("dispose",j);for(const P in m){const D=m[P],U=q.target.uuid;U in D&&(D[U].dispose(),delete D[U])}}}const dB={[e0]:n0,[i0]:r0,[s0]:o0,[Nf]:a0,[n0]:e0,[r0]:i0,[o0]:s0,[a0]:Nf};function pB(i,t){function e(){let ot=!1;const te=new Yn;let re=null;const he=new Yn(0,0,0,0);return{setMask:function($t){re!==$t&&!ot&&(i.colorMask($t,$t,$t,$t),re=$t)},setLocked:function($t){ot=$t},setClear:function($t,Bt,ye,Xe,Rn){Rn===!0&&($t*=Xe,Bt*=Xe,ye*=Xe),te.set($t,Bt,ye,Xe),he.equals(te)===!1&&(i.clearColor($t,Bt,ye,Xe),he.copy(te))},reset:function(){ot=!1,re=null,he.set(-1,0,0,0)}}}function n(){let ot=!1,te=!1,re=null,he=null,$t=null;return{setReversed:function(Bt){if(te!==Bt){const ye=t.get("EXT_clip_control");Bt?ye.clipControlEXT(ye.LOWER_LEFT_EXT,ye.ZERO_TO_ONE_EXT):ye.clipControlEXT(ye.LOWER_LEFT_EXT,ye.NEGATIVE_ONE_TO_ONE_EXT),te=Bt;const Xe=$t;$t=null,this.setClear(Xe)}},getReversed:function(){return te},setTest:function(Bt){Bt?It(i.DEPTH_TEST):ae(i.DEPTH_TEST)},setMask:function(Bt){re!==Bt&&!ot&&(i.depthMask(Bt),re=Bt)},setFunc:function(Bt){if(te&&(Bt=dB[Bt]),he!==Bt){switch(Bt){case e0:i.depthFunc(i.NEVER);break;case n0:i.depthFunc(i.ALWAYS);break;case i0:i.depthFunc(i.LESS);break;case Nf:i.depthFunc(i.LEQUAL);break;case s0:i.depthFunc(i.EQUAL);break;case a0:i.depthFunc(i.GEQUAL);break;case r0:i.depthFunc(i.GREATER);break;case o0:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}he=Bt}},setLocked:function(Bt){ot=Bt},setClear:function(Bt){$t!==Bt&&(te&&(Bt=1-Bt),i.clearDepth(Bt),$t=Bt)},reset:function(){ot=!1,re=null,he=null,$t=null,te=!1}}}function s(){let ot=!1,te=null,re=null,he=null,$t=null,Bt=null,ye=null,Xe=null,Rn=null;return{setTest:function(nn){ot||(nn?It(i.STENCIL_TEST):ae(i.STENCIL_TEST))},setMask:function(nn){te!==nn&&!ot&&(i.stencilMask(nn),te=nn)},setFunc:function(nn,ss,Hs){(re!==nn||he!==ss||$t!==Hs)&&(i.stencilFunc(nn,ss,Hs),re=nn,he=ss,$t=Hs)},setOp:function(nn,ss,Hs){(Bt!==nn||ye!==ss||Xe!==Hs)&&(i.stencilOp(nn,ss,Hs),Bt=nn,ye=ss,Xe=Hs)},setLocked:function(nn){ot=nn},setClear:function(nn){Rn!==nn&&(i.clearStencil(nn),Rn=nn)},reset:function(){ot=!1,te=null,re=null,he=null,$t=null,Bt=null,ye=null,Xe=null,Rn=null}}}const r=new e,u=new n,f=new s,d=new WeakMap,m=new WeakMap;let _={},y={},S=new WeakMap,T=[],R=null,C=!1,w=null,M=null,O=null,z=null,V=null,j=null,q=null,L=new Te(0,0,0),P=0,D=!1,U=null,F=null,Y=null,G=null,gt=null;const vt=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let k=!1,et=0;const nt=i.getParameter(i.VERSION);nt.indexOf("WebGL")!==-1?(et=parseFloat(/^WebGL (\d)/.exec(nt)[1]),k=et>=1):nt.indexOf("OpenGL ES")!==-1&&(et=parseFloat(/^OpenGL ES (\d)/.exec(nt)[1]),k=et>=2);let ft=null,wt={};const J=i.getParameter(i.SCISSOR_BOX),ut=i.getParameter(i.VIEWPORT),Ot=new Yn().fromArray(J),Lt=new Yn().fromArray(ut);function ee(ot,te,re,he){const $t=new Uint8Array(4),Bt=i.createTexture();i.bindTexture(ot,Bt),i.texParameteri(ot,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(ot,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let ye=0;ye<re;ye++)ot===i.TEXTURE_3D||ot===i.TEXTURE_2D_ARRAY?i.texImage3D(te,0,i.RGBA,1,1,he,0,i.RGBA,i.UNSIGNED_BYTE,$t):i.texImage2D(te+ye,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,$t);return Bt}const xt={};xt[i.TEXTURE_2D]=ee(i.TEXTURE_2D,i.TEXTURE_2D,1),xt[i.TEXTURE_CUBE_MAP]=ee(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),xt[i.TEXTURE_2D_ARRAY]=ee(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),xt[i.TEXTURE_3D]=ee(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),u.setClear(1),f.setClear(0),It(i.DEPTH_TEST),u.setFunc(Nf),Vt(!1),Pt(rT),It(i.CULL_FACE),qt(Fu);function It(ot){_[ot]!==!0&&(i.enable(ot),_[ot]=!0)}function ae(ot){_[ot]!==!1&&(i.disable(ot),_[ot]=!1)}function de(ot,te){return y[ot]!==te?(i.bindFramebuffer(ot,te),y[ot]=te,ot===i.DRAW_FRAMEBUFFER&&(y[i.FRAMEBUFFER]=te),ot===i.FRAMEBUFFER&&(y[i.DRAW_FRAMEBUFFER]=te),!0):!1}function Ee(ot,te){let re=T,he=!1;if(ot){re=S.get(te),re===void 0&&(re=[],S.set(te,re));const $t=ot.textures;if(re.length!==$t.length||re[0]!==i.COLOR_ATTACHMENT0){for(let Bt=0,ye=$t.length;Bt<ye;Bt++)re[Bt]=i.COLOR_ATTACHMENT0+Bt;re.length=$t.length,he=!0}}else re[0]!==i.BACK&&(re[0]=i.BACK,he=!0);he&&i.drawBuffers(re)}function Ze(ot){return R!==ot?(i.useProgram(ot),R=ot,!0):!1}const bn={[Kc]:i.FUNC_ADD,[H2]:i.FUNC_SUBTRACT,[G2]:i.FUNC_REVERSE_SUBTRACT};bn[k2]=i.MIN,bn[q2]=i.MAX;const it={[X2]:i.ZERO,[j2]:i.ONE,[Y2]:i.SRC_COLOR,[$v]:i.SRC_ALPHA,[$2]:i.SRC_ALPHA_SATURATE,[Z2]:i.DST_COLOR,[K2]:i.DST_ALPHA,[W2]:i.ONE_MINUS_SRC_COLOR,[t0]:i.ONE_MINUS_SRC_ALPHA,[J2]:i.ONE_MINUS_DST_COLOR,[Q2]:i.ONE_MINUS_DST_ALPHA,[tw]:i.CONSTANT_COLOR,[ew]:i.ONE_MINUS_CONSTANT_COLOR,[nw]:i.CONSTANT_ALPHA,[iw]:i.ONE_MINUS_CONSTANT_ALPHA};function qt(ot,te,re,he,$t,Bt,ye,Xe,Rn,nn){if(ot===Fu){C===!0&&(ae(i.BLEND),C=!1);return}if(C===!1&&(It(i.BLEND),C=!0),ot!==F2){if(ot!==w||nn!==D){if((M!==Kc||V!==Kc)&&(i.blendEquation(i.FUNC_ADD),M=Kc,V=Kc),nn)switch(ot){case wf:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case oT:i.blendFunc(i.ONE,i.ONE);break;case lT:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case uT:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",ot);break}else switch(ot){case wf:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case oT:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case lT:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case uT:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",ot);break}O=null,z=null,j=null,q=null,L.set(0,0,0),P=0,w=ot,D=nn}return}$t=$t||te,Bt=Bt||re,ye=ye||he,(te!==M||$t!==V)&&(i.blendEquationSeparate(bn[te],bn[$t]),M=te,V=$t),(re!==O||he!==z||Bt!==j||ye!==q)&&(i.blendFuncSeparate(it[re],it[he],it[Bt],it[ye]),O=re,z=he,j=Bt,q=ye),(Xe.equals(L)===!1||Rn!==P)&&(i.blendColor(Xe.r,Xe.g,Xe.b,Rn),L.copy(Xe),P=Rn),w=ot,D=!1}function Ht(ot,te){ot.side===kl?ae(i.CULL_FACE):It(i.CULL_FACE);let re=ot.side===nr;te&&(re=!re),Vt(re),ot.blending===wf&&ot.transparent===!1?qt(Fu):qt(ot.blending,ot.blendEquation,ot.blendSrc,ot.blendDst,ot.blendEquationAlpha,ot.blendSrcAlpha,ot.blendDstAlpha,ot.blendColor,ot.blendAlpha,ot.premultipliedAlpha),u.setFunc(ot.depthFunc),u.setTest(ot.depthTest),u.setMask(ot.depthWrite),r.setMask(ot.colorWrite);const he=ot.stencilWrite;f.setTest(he),he&&(f.setMask(ot.stencilWriteMask),f.setFunc(ot.stencilFunc,ot.stencilRef,ot.stencilFuncMask),f.setOp(ot.stencilFail,ot.stencilZFail,ot.stencilZPass)),kt(ot.polygonOffset,ot.polygonOffsetFactor,ot.polygonOffsetUnits),ot.alphaToCoverage===!0?It(i.SAMPLE_ALPHA_TO_COVERAGE):ae(i.SAMPLE_ALPHA_TO_COVERAGE)}function Vt(ot){U!==ot&&(ot?i.frontFace(i.CW):i.frontFace(i.CCW),U=ot)}function Pt(ot){ot!==z2?(It(i.CULL_FACE),ot!==F&&(ot===rT?i.cullFace(i.BACK):ot===V2?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):ae(i.CULL_FACE),F=ot}function ue(ot){ot!==Y&&(k&&i.lineWidth(ot),Y=ot)}function kt(ot,te,re){ot?(It(i.POLYGON_OFFSET_FILL),(G!==te||gt!==re)&&(i.polygonOffset(te,re),G=te,gt=re)):ae(i.POLYGON_OFFSET_FILL)}function Kt(ot){ot?It(i.SCISSOR_TEST):ae(i.SCISSOR_TEST)}function ze(ot){ot===void 0&&(ot=i.TEXTURE0+vt-1),ft!==ot&&(i.activeTexture(ot),ft=ot)}function Ye(ot,te,re){re===void 0&&(ft===null?re=i.TEXTURE0+vt-1:re=ft);let he=wt[re];he===void 0&&(he={type:void 0,texture:void 0},wt[re]=he),(he.type!==ot||he.texture!==te)&&(ft!==re&&(i.activeTexture(re),ft=re),i.bindTexture(ot,te||xt[ot]),he.type=ot,he.texture=te)}function $(){const ot=wt[ft];ot!==void 0&&ot.type!==void 0&&(i.bindTexture(ot.type,null),ot.type=void 0,ot.texture=void 0)}function X(){try{i.compressedTexImage2D(...arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}}function _t(){try{i.compressedTexImage3D(...arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}}function Dt(){try{i.texSubImage2D(...arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}}function Qt(){try{i.texSubImage3D(...arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}}function Ut(){try{i.compressedTexSubImage2D(...arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}}function De(){try{i.compressedTexSubImage3D(...arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}}function oe(){try{i.texStorage2D(...arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}}function be(){try{i.texStorage3D(...arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}}function Me(){try{i.texImage2D(...arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}}function Yt(){try{i.texImage3D(...arguments)}catch(ot){console.error("THREE.WebGLState:",ot)}}function ie(ot){Ot.equals(ot)===!1&&(i.scissor(ot.x,ot.y,ot.z,ot.w),Ot.copy(ot))}function Ce(ot){Lt.equals(ot)===!1&&(i.viewport(ot.x,ot.y,ot.z,ot.w),Lt.copy(ot))}function pe(ot,te){let re=m.get(te);re===void 0&&(re=new WeakMap,m.set(te,re));let he=re.get(ot);he===void 0&&(he=i.getUniformBlockIndex(te,ot.name),re.set(ot,he))}function fe(ot,te){const he=m.get(te).get(ot);d.get(te)!==he&&(i.uniformBlockBinding(te,he,ot.__bindingPointIndex),d.set(te,he))}function ke(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),u.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),_={},ft=null,wt={},y={},S=new WeakMap,T=[],R=null,C=!1,w=null,M=null,O=null,z=null,V=null,j=null,q=null,L=new Te(0,0,0),P=0,D=!1,U=null,F=null,Y=null,G=null,gt=null,Ot.set(0,0,i.canvas.width,i.canvas.height),Lt.set(0,0,i.canvas.width,i.canvas.height),r.reset(),u.reset(),f.reset()}return{buffers:{color:r,depth:u,stencil:f},enable:It,disable:ae,bindFramebuffer:de,drawBuffers:Ee,useProgram:Ze,setBlending:qt,setMaterial:Ht,setFlipSided:Vt,setCullFace:Pt,setLineWidth:ue,setPolygonOffset:kt,setScissorTest:Kt,activeTexture:ze,bindTexture:Ye,unbindTexture:$,compressedTexImage2D:X,compressedTexImage3D:_t,texImage2D:Me,texImage3D:Yt,updateUBOMapping:pe,uniformBlockBinding:fe,texStorage2D:oe,texStorage3D:be,texSubImage2D:Dt,texSubImage3D:Qt,compressedTexSubImage2D:Ut,compressedTexSubImage3D:De,scissor:ie,viewport:Ce,reset:ke}}function mB(i,t,e,n,s,r,u){const f=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new Jt,_=new WeakMap;let y;const S=new WeakMap;let T=!1;try{T=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function R($,X){return T?new OffscreenCanvas($,X):e_("canvas")}function C($,X,_t){let Dt=1;const Qt=Ye($);if((Qt.width>_t||Qt.height>_t)&&(Dt=_t/Math.max(Qt.width,Qt.height)),Dt<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const Ut=Math.floor(Dt*Qt.width),De=Math.floor(Dt*Qt.height);y===void 0&&(y=R(Ut,De));const oe=X?R(Ut,De):y;return oe.width=Ut,oe.height=De,oe.getContext("2d").drawImage($,0,0,Ut,De),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Qt.width+"x"+Qt.height+") to ("+Ut+"x"+De+")."),oe}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Qt.width+"x"+Qt.height+")."),$;return $}function w($){return $.generateMipmaps}function M($){i.generateMipmap($)}function O($){return $.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?i.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function z($,X,_t,Dt,Qt=!1){if($!==null){if(i[$]!==void 0)return i[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Ut=X;if(X===i.RED&&(_t===i.FLOAT&&(Ut=i.R32F),_t===i.HALF_FLOAT&&(Ut=i.R16F),_t===i.UNSIGNED_BYTE&&(Ut=i.R8)),X===i.RED_INTEGER&&(_t===i.UNSIGNED_BYTE&&(Ut=i.R8UI),_t===i.UNSIGNED_SHORT&&(Ut=i.R16UI),_t===i.UNSIGNED_INT&&(Ut=i.R32UI),_t===i.BYTE&&(Ut=i.R8I),_t===i.SHORT&&(Ut=i.R16I),_t===i.INT&&(Ut=i.R32I)),X===i.RG&&(_t===i.FLOAT&&(Ut=i.RG32F),_t===i.HALF_FLOAT&&(Ut=i.RG16F),_t===i.UNSIGNED_BYTE&&(Ut=i.RG8)),X===i.RG_INTEGER&&(_t===i.UNSIGNED_BYTE&&(Ut=i.RG8UI),_t===i.UNSIGNED_SHORT&&(Ut=i.RG16UI),_t===i.UNSIGNED_INT&&(Ut=i.RG32UI),_t===i.BYTE&&(Ut=i.RG8I),_t===i.SHORT&&(Ut=i.RG16I),_t===i.INT&&(Ut=i.RG32I)),X===i.RGB_INTEGER&&(_t===i.UNSIGNED_BYTE&&(Ut=i.RGB8UI),_t===i.UNSIGNED_SHORT&&(Ut=i.RGB16UI),_t===i.UNSIGNED_INT&&(Ut=i.RGB32UI),_t===i.BYTE&&(Ut=i.RGB8I),_t===i.SHORT&&(Ut=i.RGB16I),_t===i.INT&&(Ut=i.RGB32I)),X===i.RGBA_INTEGER&&(_t===i.UNSIGNED_BYTE&&(Ut=i.RGBA8UI),_t===i.UNSIGNED_SHORT&&(Ut=i.RGBA16UI),_t===i.UNSIGNED_INT&&(Ut=i.RGBA32UI),_t===i.BYTE&&(Ut=i.RGBA8I),_t===i.SHORT&&(Ut=i.RGBA16I),_t===i.INT&&(Ut=i.RGBA32I)),X===i.RGB&&(_t===i.UNSIGNED_INT_5_9_9_9_REV&&(Ut=i.RGB9_E5),_t===i.UNSIGNED_INT_10F_11F_11F_REV&&(Ut=i.R11F_G11F_B10F)),X===i.RGBA){const De=Qt?$g:Hn.getTransfer(Dt);_t===i.FLOAT&&(Ut=i.RGBA32F),_t===i.HALF_FLOAT&&(Ut=i.RGBA16F),_t===i.UNSIGNED_BYTE&&(Ut=De===li?i.SRGB8_ALPHA8:i.RGBA8),_t===i.UNSIGNED_SHORT_4_4_4_4&&(Ut=i.RGBA4),_t===i.UNSIGNED_SHORT_5_5_5_1&&(Ut=i.RGB5_A1)}return(Ut===i.R16F||Ut===i.R32F||Ut===i.RG16F||Ut===i.RG32F||Ut===i.RGBA16F||Ut===i.RGBA32F)&&t.get("EXT_color_buffer_float"),Ut}function V($,X){let _t;return $?X===null||X===Xu||X===bp?_t=i.DEPTH24_STENCIL8:X===xr?_t=i.DEPTH32F_STENCIL8:X===Tp&&(_t=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):X===null||X===Xu||X===bp?_t=i.DEPTH_COMPONENT24:X===xr?_t=i.DEPTH_COMPONENT32F:X===Tp&&(_t=i.DEPTH_COMPONENT16),_t}function j($,X){return w($)===!0||$.isFramebufferTexture&&$.minFilter!==na&&$.minFilter!==bs?Math.log2(Math.max(X.width,X.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?X.mipmaps.length:1}function q($){const X=$.target;X.removeEventListener("dispose",q),P(X),X.isVideoTexture&&_.delete(X)}function L($){const X=$.target;X.removeEventListener("dispose",L),U(X)}function P($){const X=n.get($);if(X.__webglInit===void 0)return;const _t=$.source,Dt=S.get(_t);if(Dt){const Qt=Dt[X.__cacheKey];Qt.usedTimes--,Qt.usedTimes===0&&D($),Object.keys(Dt).length===0&&S.delete(_t)}n.remove($)}function D($){const X=n.get($);i.deleteTexture(X.__webglTexture);const _t=$.source,Dt=S.get(_t);delete Dt[X.__cacheKey],u.memory.textures--}function U($){const X=n.get($);if($.depthTexture&&($.depthTexture.dispose(),n.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let Dt=0;Dt<6;Dt++){if(Array.isArray(X.__webglFramebuffer[Dt]))for(let Qt=0;Qt<X.__webglFramebuffer[Dt].length;Qt++)i.deleteFramebuffer(X.__webglFramebuffer[Dt][Qt]);else i.deleteFramebuffer(X.__webglFramebuffer[Dt]);X.__webglDepthbuffer&&i.deleteRenderbuffer(X.__webglDepthbuffer[Dt])}else{if(Array.isArray(X.__webglFramebuffer))for(let Dt=0;Dt<X.__webglFramebuffer.length;Dt++)i.deleteFramebuffer(X.__webglFramebuffer[Dt]);else i.deleteFramebuffer(X.__webglFramebuffer);if(X.__webglDepthbuffer&&i.deleteRenderbuffer(X.__webglDepthbuffer),X.__webglMultisampledFramebuffer&&i.deleteFramebuffer(X.__webglMultisampledFramebuffer),X.__webglColorRenderbuffer)for(let Dt=0;Dt<X.__webglColorRenderbuffer.length;Dt++)X.__webglColorRenderbuffer[Dt]&&i.deleteRenderbuffer(X.__webglColorRenderbuffer[Dt]);X.__webglDepthRenderbuffer&&i.deleteRenderbuffer(X.__webglDepthRenderbuffer)}const _t=$.textures;for(let Dt=0,Qt=_t.length;Dt<Qt;Dt++){const Ut=n.get(_t[Dt]);Ut.__webglTexture&&(i.deleteTexture(Ut.__webglTexture),u.memory.textures--),n.remove(_t[Dt])}n.remove($)}let F=0;function Y(){F=0}function G(){const $=F;return $>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+s.maxTextures),F+=1,$}function gt($){const X=[];return X.push($.wrapS),X.push($.wrapT),X.push($.wrapR||0),X.push($.magFilter),X.push($.minFilter),X.push($.anisotropy),X.push($.internalFormat),X.push($.format),X.push($.type),X.push($.generateMipmaps),X.push($.premultiplyAlpha),X.push($.flipY),X.push($.unpackAlignment),X.push($.colorSpace),X.join()}function vt($,X){const _t=n.get($);if($.isVideoTexture&&Kt($),$.isRenderTargetTexture===!1&&$.isExternalTexture!==!0&&$.version>0&&_t.__version!==$.version){const Dt=$.image;if(Dt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Dt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{xt(_t,$,X);return}}else $.isExternalTexture&&(_t.__webglTexture=$.sourceTexture?$.sourceTexture:null);e.bindTexture(i.TEXTURE_2D,_t.__webglTexture,i.TEXTURE0+X)}function k($,X){const _t=n.get($);if($.isRenderTargetTexture===!1&&$.version>0&&_t.__version!==$.version){xt(_t,$,X);return}e.bindTexture(i.TEXTURE_2D_ARRAY,_t.__webglTexture,i.TEXTURE0+X)}function et($,X){const _t=n.get($);if($.isRenderTargetTexture===!1&&$.version>0&&_t.__version!==$.version){xt(_t,$,X);return}e.bindTexture(i.TEXTURE_3D,_t.__webglTexture,i.TEXTURE0+X)}function nt($,X){const _t=n.get($);if($.version>0&&_t.__version!==$.version){It(_t,$,X);return}e.bindTexture(i.TEXTURE_CUBE_MAP,_t.__webglTexture,i.TEXTURE0+X)}const ft={[Kg]:i.REPEAT,[So]:i.CLAMP_TO_EDGE,[Qg]:i.MIRRORED_REPEAT},wt={[na]:i.NEAREST,[JT]:i.NEAREST_MIPMAP_NEAREST,[pp]:i.NEAREST_MIPMAP_LINEAR,[bs]:i.LINEAR,[Ug]:i.LINEAR_MIPMAP_NEAREST,[ql]:i.LINEAR_MIPMAP_LINEAR},J={[vw]:i.NEVER,[Mw]:i.ALWAYS,[Sw]:i.LESS,[ob]:i.LEQUAL,[xw]:i.EQUAL,[bw]:i.GEQUAL,[Ew]:i.GREATER,[Tw]:i.NOTEQUAL};function ut($,X){if(X.type===xr&&t.has("OES_texture_float_linear")===!1&&(X.magFilter===bs||X.magFilter===Ug||X.magFilter===pp||X.magFilter===ql||X.minFilter===bs||X.minFilter===Ug||X.minFilter===pp||X.minFilter===ql)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri($,i.TEXTURE_WRAP_S,ft[X.wrapS]),i.texParameteri($,i.TEXTURE_WRAP_T,ft[X.wrapT]),($===i.TEXTURE_3D||$===i.TEXTURE_2D_ARRAY)&&i.texParameteri($,i.TEXTURE_WRAP_R,ft[X.wrapR]),i.texParameteri($,i.TEXTURE_MAG_FILTER,wt[X.magFilter]),i.texParameteri($,i.TEXTURE_MIN_FILTER,wt[X.minFilter]),X.compareFunction&&(i.texParameteri($,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri($,i.TEXTURE_COMPARE_FUNC,J[X.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(X.magFilter===na||X.minFilter!==pp&&X.minFilter!==ql||X.type===xr&&t.has("OES_texture_float_linear")===!1)return;if(X.anisotropy>1||n.get(X).__currentAnisotropy){const _t=t.get("EXT_texture_filter_anisotropic");i.texParameterf($,_t.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,s.getMaxAnisotropy())),n.get(X).__currentAnisotropy=X.anisotropy}}}function Ot($,X){let _t=!1;$.__webglInit===void 0&&($.__webglInit=!0,X.addEventListener("dispose",q));const Dt=X.source;let Qt=S.get(Dt);Qt===void 0&&(Qt={},S.set(Dt,Qt));const Ut=gt(X);if(Ut!==$.__cacheKey){Qt[Ut]===void 0&&(Qt[Ut]={texture:i.createTexture(),usedTimes:0},u.memory.textures++,_t=!0),Qt[Ut].usedTimes++;const De=Qt[$.__cacheKey];De!==void 0&&(Qt[$.__cacheKey].usedTimes--,De.usedTimes===0&&D(X)),$.__cacheKey=Ut,$.__webglTexture=Qt[Ut].texture}return _t}function Lt($,X,_t){return Math.floor(Math.floor($/_t)/X)}function ee($,X,_t,Dt){const Ut=$.updateRanges;if(Ut.length===0)e.texSubImage2D(i.TEXTURE_2D,0,0,0,X.width,X.height,_t,Dt,X.data);else{Ut.sort((Yt,ie)=>Yt.start-ie.start);let De=0;for(let Yt=1;Yt<Ut.length;Yt++){const ie=Ut[De],Ce=Ut[Yt],pe=ie.start+ie.count,fe=Lt(Ce.start,X.width,4),ke=Lt(ie.start,X.width,4);Ce.start<=pe+1&&fe===ke&&Lt(Ce.start+Ce.count-1,X.width,4)===fe?ie.count=Math.max(ie.count,Ce.start+Ce.count-ie.start):(++De,Ut[De]=Ce)}Ut.length=De+1;const oe=i.getParameter(i.UNPACK_ROW_LENGTH),be=i.getParameter(i.UNPACK_SKIP_PIXELS),Me=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,X.width);for(let Yt=0,ie=Ut.length;Yt<ie;Yt++){const Ce=Ut[Yt],pe=Math.floor(Ce.start/4),fe=Math.ceil(Ce.count/4),ke=pe%X.width,ot=Math.floor(pe/X.width),te=fe,re=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,ke),i.pixelStorei(i.UNPACK_SKIP_ROWS,ot),e.texSubImage2D(i.TEXTURE_2D,0,ke,ot,te,re,_t,Dt,X.data)}$.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,oe),i.pixelStorei(i.UNPACK_SKIP_PIXELS,be),i.pixelStorei(i.UNPACK_SKIP_ROWS,Me)}}function xt($,X,_t){let Dt=i.TEXTURE_2D;(X.isDataArrayTexture||X.isCompressedArrayTexture)&&(Dt=i.TEXTURE_2D_ARRAY),X.isData3DTexture&&(Dt=i.TEXTURE_3D);const Qt=Ot($,X),Ut=X.source;e.bindTexture(Dt,$.__webglTexture,i.TEXTURE0+_t);const De=n.get(Ut);if(Ut.version!==De.__version||Qt===!0){e.activeTexture(i.TEXTURE0+_t);const oe=Hn.getPrimaries(Hn.workingColorSpace),be=X.colorSpace===Vu?null:Hn.getPrimaries(X.colorSpace),Me=X.colorSpace===Vu||oe===be?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,X.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,X.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Me);let Yt=C(X.image,!1,s.maxTextureSize);Yt=ze(X,Yt);const ie=r.convert(X.format,X.colorSpace),Ce=r.convert(X.type);let pe=z(X.internalFormat,ie,Ce,X.colorSpace,X.isVideoTexture);ut(Dt,X);let fe;const ke=X.mipmaps,ot=X.isVideoTexture!==!0,te=De.__version===void 0||Qt===!0,re=Ut.dataReady,he=j(X,Yt);if(X.isDepthTexture)pe=V(X.format===Ap,X.type),te&&(ot?e.texStorage2D(i.TEXTURE_2D,1,pe,Yt.width,Yt.height):e.texImage2D(i.TEXTURE_2D,0,pe,Yt.width,Yt.height,0,ie,Ce,null));else if(X.isDataTexture)if(ke.length>0){ot&&te&&e.texStorage2D(i.TEXTURE_2D,he,pe,ke[0].width,ke[0].height);for(let $t=0,Bt=ke.length;$t<Bt;$t++)fe=ke[$t],ot?re&&e.texSubImage2D(i.TEXTURE_2D,$t,0,0,fe.width,fe.height,ie,Ce,fe.data):e.texImage2D(i.TEXTURE_2D,$t,pe,fe.width,fe.height,0,ie,Ce,fe.data);X.generateMipmaps=!1}else ot?(te&&e.texStorage2D(i.TEXTURE_2D,he,pe,Yt.width,Yt.height),re&&ee(X,Yt,ie,Ce)):e.texImage2D(i.TEXTURE_2D,0,pe,Yt.width,Yt.height,0,ie,Ce,Yt.data);else if(X.isCompressedTexture)if(X.isCompressedArrayTexture){ot&&te&&e.texStorage3D(i.TEXTURE_2D_ARRAY,he,pe,ke[0].width,ke[0].height,Yt.depth);for(let $t=0,Bt=ke.length;$t<Bt;$t++)if(fe=ke[$t],X.format!==Ca)if(ie!==null)if(ot){if(re)if(X.layerUpdates.size>0){const ye=vT(fe.width,fe.height,X.format,X.type);for(const Xe of X.layerUpdates){const Rn=fe.data.subarray(Xe*ye/fe.data.BYTES_PER_ELEMENT,(Xe+1)*ye/fe.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,$t,0,0,Xe,fe.width,fe.height,1,ie,Rn)}X.clearLayerUpdates()}else e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,$t,0,0,0,fe.width,fe.height,Yt.depth,ie,fe.data)}else e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,$t,pe,fe.width,fe.height,Yt.depth,0,fe.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ot?re&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,$t,0,0,0,fe.width,fe.height,Yt.depth,ie,Ce,fe.data):e.texImage3D(i.TEXTURE_2D_ARRAY,$t,pe,fe.width,fe.height,Yt.depth,0,ie,Ce,fe.data)}else{ot&&te&&e.texStorage2D(i.TEXTURE_2D,he,pe,ke[0].width,ke[0].height);for(let $t=0,Bt=ke.length;$t<Bt;$t++)fe=ke[$t],X.format!==Ca?ie!==null?ot?re&&e.compressedTexSubImage2D(i.TEXTURE_2D,$t,0,0,fe.width,fe.height,ie,fe.data):e.compressedTexImage2D(i.TEXTURE_2D,$t,pe,fe.width,fe.height,0,fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ot?re&&e.texSubImage2D(i.TEXTURE_2D,$t,0,0,fe.width,fe.height,ie,Ce,fe.data):e.texImage2D(i.TEXTURE_2D,$t,pe,fe.width,fe.height,0,ie,Ce,fe.data)}else if(X.isDataArrayTexture)if(ot){if(te&&e.texStorage3D(i.TEXTURE_2D_ARRAY,he,pe,Yt.width,Yt.height,Yt.depth),re)if(X.layerUpdates.size>0){const $t=vT(Yt.width,Yt.height,X.format,X.type);for(const Bt of X.layerUpdates){const ye=Yt.data.subarray(Bt*$t/Yt.data.BYTES_PER_ELEMENT,(Bt+1)*$t/Yt.data.BYTES_PER_ELEMENT);e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Bt,Yt.width,Yt.height,1,ie,Ce,ye)}X.clearLayerUpdates()}else e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Yt.width,Yt.height,Yt.depth,ie,Ce,Yt.data)}else e.texImage3D(i.TEXTURE_2D_ARRAY,0,pe,Yt.width,Yt.height,Yt.depth,0,ie,Ce,Yt.data);else if(X.isData3DTexture)ot?(te&&e.texStorage3D(i.TEXTURE_3D,he,pe,Yt.width,Yt.height,Yt.depth),re&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Yt.width,Yt.height,Yt.depth,ie,Ce,Yt.data)):e.texImage3D(i.TEXTURE_3D,0,pe,Yt.width,Yt.height,Yt.depth,0,ie,Ce,Yt.data);else if(X.isFramebufferTexture){if(te)if(ot)e.texStorage2D(i.TEXTURE_2D,he,pe,Yt.width,Yt.height);else{let $t=Yt.width,Bt=Yt.height;for(let ye=0;ye<he;ye++)e.texImage2D(i.TEXTURE_2D,ye,pe,$t,Bt,0,ie,Ce,null),$t>>=1,Bt>>=1}}else if(ke.length>0){if(ot&&te){const $t=Ye(ke[0]);e.texStorage2D(i.TEXTURE_2D,he,pe,$t.width,$t.height)}for(let $t=0,Bt=ke.length;$t<Bt;$t++)fe=ke[$t],ot?re&&e.texSubImage2D(i.TEXTURE_2D,$t,0,0,ie,Ce,fe):e.texImage2D(i.TEXTURE_2D,$t,pe,ie,Ce,fe);X.generateMipmaps=!1}else if(ot){if(te){const $t=Ye(Yt);e.texStorage2D(i.TEXTURE_2D,he,pe,$t.width,$t.height)}re&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,ie,Ce,Yt)}else e.texImage2D(i.TEXTURE_2D,0,pe,ie,Ce,Yt);w(X)&&M(Dt),De.__version=Ut.version,X.onUpdate&&X.onUpdate(X)}$.__version=X.version}function It($,X,_t){if(X.image.length!==6)return;const Dt=Ot($,X),Qt=X.source;e.bindTexture(i.TEXTURE_CUBE_MAP,$.__webglTexture,i.TEXTURE0+_t);const Ut=n.get(Qt);if(Qt.version!==Ut.__version||Dt===!0){e.activeTexture(i.TEXTURE0+_t);const De=Hn.getPrimaries(Hn.workingColorSpace),oe=X.colorSpace===Vu?null:Hn.getPrimaries(X.colorSpace),be=X.colorSpace===Vu||De===oe?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,X.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,X.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,be);const Me=X.isCompressedTexture||X.image[0].isCompressedTexture,Yt=X.image[0]&&X.image[0].isDataTexture,ie=[];for(let Bt=0;Bt<6;Bt++)!Me&&!Yt?ie[Bt]=C(X.image[Bt],!0,s.maxCubemapSize):ie[Bt]=Yt?X.image[Bt].image:X.image[Bt],ie[Bt]=ze(X,ie[Bt]);const Ce=ie[0],pe=r.convert(X.format,X.colorSpace),fe=r.convert(X.type),ke=z(X.internalFormat,pe,fe,X.colorSpace),ot=X.isVideoTexture!==!0,te=Ut.__version===void 0||Dt===!0,re=Qt.dataReady;let he=j(X,Ce);ut(i.TEXTURE_CUBE_MAP,X);let $t;if(Me){ot&&te&&e.texStorage2D(i.TEXTURE_CUBE_MAP,he,ke,Ce.width,Ce.height);for(let Bt=0;Bt<6;Bt++){$t=ie[Bt].mipmaps;for(let ye=0;ye<$t.length;ye++){const Xe=$t[ye];X.format!==Ca?pe!==null?ot?re&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,ye,0,0,Xe.width,Xe.height,pe,Xe.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,ye,ke,Xe.width,Xe.height,0,Xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ot?re&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,ye,0,0,Xe.width,Xe.height,pe,fe,Xe.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,ye,ke,Xe.width,Xe.height,0,pe,fe,Xe.data)}}}else{if($t=X.mipmaps,ot&&te){$t.length>0&&he++;const Bt=Ye(ie[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,he,ke,Bt.width,Bt.height)}for(let Bt=0;Bt<6;Bt++)if(Yt){ot?re&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,0,0,0,ie[Bt].width,ie[Bt].height,pe,fe,ie[Bt].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,0,ke,ie[Bt].width,ie[Bt].height,0,pe,fe,ie[Bt].data);for(let ye=0;ye<$t.length;ye++){const Rn=$t[ye].image[Bt].image;ot?re&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,ye+1,0,0,Rn.width,Rn.height,pe,fe,Rn.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,ye+1,ke,Rn.width,Rn.height,0,pe,fe,Rn.data)}}else{ot?re&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,0,0,0,pe,fe,ie[Bt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,0,ke,pe,fe,ie[Bt]);for(let ye=0;ye<$t.length;ye++){const Xe=$t[ye];ot?re&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,ye+1,0,0,pe,fe,Xe.image[Bt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,ye+1,ke,pe,fe,Xe.image[Bt])}}}w(X)&&M(i.TEXTURE_CUBE_MAP),Ut.__version=Qt.version,X.onUpdate&&X.onUpdate(X)}$.__version=X.version}function ae($,X,_t,Dt,Qt,Ut){const De=r.convert(_t.format,_t.colorSpace),oe=r.convert(_t.type),be=z(_t.internalFormat,De,oe,_t.colorSpace),Me=n.get(X),Yt=n.get(_t);if(Yt.__renderTarget=X,!Me.__hasExternalTextures){const ie=Math.max(1,X.width>>Ut),Ce=Math.max(1,X.height>>Ut);Qt===i.TEXTURE_3D||Qt===i.TEXTURE_2D_ARRAY?e.texImage3D(Qt,Ut,be,ie,Ce,X.depth,0,De,oe,null):e.texImage2D(Qt,Ut,be,ie,Ce,0,De,oe,null)}e.bindFramebuffer(i.FRAMEBUFFER,$),kt(X)?f.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Dt,Qt,Yt.__webglTexture,0,ue(X)):(Qt===i.TEXTURE_2D||Qt>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Qt<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Dt,Qt,Yt.__webglTexture,Ut),e.bindFramebuffer(i.FRAMEBUFFER,null)}function de($,X,_t){if(i.bindRenderbuffer(i.RENDERBUFFER,$),X.depthBuffer){const Dt=X.depthTexture,Qt=Dt&&Dt.isDepthTexture?Dt.type:null,Ut=V(X.stencilBuffer,Qt),De=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,oe=ue(X);kt(X)?f.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,oe,Ut,X.width,X.height):_t?i.renderbufferStorageMultisample(i.RENDERBUFFER,oe,Ut,X.width,X.height):i.renderbufferStorage(i.RENDERBUFFER,Ut,X.width,X.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,De,i.RENDERBUFFER,$)}else{const Dt=X.textures;for(let Qt=0;Qt<Dt.length;Qt++){const Ut=Dt[Qt],De=r.convert(Ut.format,Ut.colorSpace),oe=r.convert(Ut.type),be=z(Ut.internalFormat,De,oe,Ut.colorSpace),Me=ue(X);_t&&kt(X)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Me,be,X.width,X.height):kt(X)?f.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Me,be,X.width,X.height):i.renderbufferStorage(i.RENDERBUFFER,be,X.width,X.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Ee($,X){if(X&&X.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(i.FRAMEBUFFER,$),!(X.depthTexture&&X.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Dt=n.get(X.depthTexture);Dt.__renderTarget=X,(!Dt.__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),vt(X.depthTexture,0);const Qt=Dt.__webglTexture,Ut=ue(X);if(X.depthTexture.format===Mp)kt(X)?f.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Qt,0,Ut):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Qt,0);else if(X.depthTexture.format===Ap)kt(X)?f.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Qt,0,Ut):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Qt,0);else throw new Error("Unknown depthTexture format")}function Ze($){const X=n.get($),_t=$.isWebGLCubeRenderTarget===!0;if(X.__boundDepthTexture!==$.depthTexture){const Dt=$.depthTexture;if(X.__depthDisposeCallback&&X.__depthDisposeCallback(),Dt){const Qt=()=>{delete X.__boundDepthTexture,delete X.__depthDisposeCallback,Dt.removeEventListener("dispose",Qt)};Dt.addEventListener("dispose",Qt),X.__depthDisposeCallback=Qt}X.__boundDepthTexture=Dt}if($.depthTexture&&!X.__autoAllocateDepthBuffer){if(_t)throw new Error("target.depthTexture not supported in Cube render targets");const Dt=$.texture.mipmaps;Dt&&Dt.length>0?Ee(X.__webglFramebuffer[0],$):Ee(X.__webglFramebuffer,$)}else if(_t){X.__webglDepthbuffer=[];for(let Dt=0;Dt<6;Dt++)if(e.bindFramebuffer(i.FRAMEBUFFER,X.__webglFramebuffer[Dt]),X.__webglDepthbuffer[Dt]===void 0)X.__webglDepthbuffer[Dt]=i.createRenderbuffer(),de(X.__webglDepthbuffer[Dt],$,!1);else{const Qt=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ut=X.__webglDepthbuffer[Dt];i.bindRenderbuffer(i.RENDERBUFFER,Ut),i.framebufferRenderbuffer(i.FRAMEBUFFER,Qt,i.RENDERBUFFER,Ut)}}else{const Dt=$.texture.mipmaps;if(Dt&&Dt.length>0?e.bindFramebuffer(i.FRAMEBUFFER,X.__webglFramebuffer[0]):e.bindFramebuffer(i.FRAMEBUFFER,X.__webglFramebuffer),X.__webglDepthbuffer===void 0)X.__webglDepthbuffer=i.createRenderbuffer(),de(X.__webglDepthbuffer,$,!1);else{const Qt=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ut=X.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Ut),i.framebufferRenderbuffer(i.FRAMEBUFFER,Qt,i.RENDERBUFFER,Ut)}}e.bindFramebuffer(i.FRAMEBUFFER,null)}function bn($,X,_t){const Dt=n.get($);X!==void 0&&ae(Dt.__webglFramebuffer,$,$.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),_t!==void 0&&Ze($)}function it($){const X=$.texture,_t=n.get($),Dt=n.get(X);$.addEventListener("dispose",L);const Qt=$.textures,Ut=$.isWebGLCubeRenderTarget===!0,De=Qt.length>1;if(De||(Dt.__webglTexture===void 0&&(Dt.__webglTexture=i.createTexture()),Dt.__version=X.version,u.memory.textures++),Ut){_t.__webglFramebuffer=[];for(let oe=0;oe<6;oe++)if(X.mipmaps&&X.mipmaps.length>0){_t.__webglFramebuffer[oe]=[];for(let be=0;be<X.mipmaps.length;be++)_t.__webglFramebuffer[oe][be]=i.createFramebuffer()}else _t.__webglFramebuffer[oe]=i.createFramebuffer()}else{if(X.mipmaps&&X.mipmaps.length>0){_t.__webglFramebuffer=[];for(let oe=0;oe<X.mipmaps.length;oe++)_t.__webglFramebuffer[oe]=i.createFramebuffer()}else _t.__webglFramebuffer=i.createFramebuffer();if(De)for(let oe=0,be=Qt.length;oe<be;oe++){const Me=n.get(Qt[oe]);Me.__webglTexture===void 0&&(Me.__webglTexture=i.createTexture(),u.memory.textures++)}if($.samples>0&&kt($)===!1){_t.__webglMultisampledFramebuffer=i.createFramebuffer(),_t.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,_t.__webglMultisampledFramebuffer);for(let oe=0;oe<Qt.length;oe++){const be=Qt[oe];_t.__webglColorRenderbuffer[oe]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,_t.__webglColorRenderbuffer[oe]);const Me=r.convert(be.format,be.colorSpace),Yt=r.convert(be.type),ie=z(be.internalFormat,Me,Yt,be.colorSpace,$.isXRRenderTarget===!0),Ce=ue($);i.renderbufferStorageMultisample(i.RENDERBUFFER,Ce,ie,$.width,$.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+oe,i.RENDERBUFFER,_t.__webglColorRenderbuffer[oe])}i.bindRenderbuffer(i.RENDERBUFFER,null),$.depthBuffer&&(_t.__webglDepthRenderbuffer=i.createRenderbuffer(),de(_t.__webglDepthRenderbuffer,$,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Ut){e.bindTexture(i.TEXTURE_CUBE_MAP,Dt.__webglTexture),ut(i.TEXTURE_CUBE_MAP,X);for(let oe=0;oe<6;oe++)if(X.mipmaps&&X.mipmaps.length>0)for(let be=0;be<X.mipmaps.length;be++)ae(_t.__webglFramebuffer[oe][be],$,X,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+oe,be);else ae(_t.__webglFramebuffer[oe],$,X,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0);w(X)&&M(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(De){for(let oe=0,be=Qt.length;oe<be;oe++){const Me=Qt[oe],Yt=n.get(Me);let ie=i.TEXTURE_2D;($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(ie=$.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(ie,Yt.__webglTexture),ut(ie,Me),ae(_t.__webglFramebuffer,$,Me,i.COLOR_ATTACHMENT0+oe,ie,0),w(Me)&&M(ie)}e.unbindTexture()}else{let oe=i.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(oe=$.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(oe,Dt.__webglTexture),ut(oe,X),X.mipmaps&&X.mipmaps.length>0)for(let be=0;be<X.mipmaps.length;be++)ae(_t.__webglFramebuffer[be],$,X,i.COLOR_ATTACHMENT0,oe,be);else ae(_t.__webglFramebuffer,$,X,i.COLOR_ATTACHMENT0,oe,0);w(X)&&M(oe),e.unbindTexture()}$.depthBuffer&&Ze($)}function qt($){const X=$.textures;for(let _t=0,Dt=X.length;_t<Dt;_t++){const Qt=X[_t];if(w(Qt)){const Ut=O($),De=n.get(Qt).__webglTexture;e.bindTexture(Ut,De),M(Ut),e.unbindTexture()}}}const Ht=[],Vt=[];function Pt($){if($.samples>0){if(kt($)===!1){const X=$.textures,_t=$.width,Dt=$.height;let Qt=i.COLOR_BUFFER_BIT;const Ut=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,De=n.get($),oe=X.length>1;if(oe)for(let Me=0;Me<X.length;Me++)e.bindFramebuffer(i.FRAMEBUFFER,De.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Me,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,De.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Me,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,De.__webglMultisampledFramebuffer);const be=$.texture.mipmaps;be&&be.length>0?e.bindFramebuffer(i.DRAW_FRAMEBUFFER,De.__webglFramebuffer[0]):e.bindFramebuffer(i.DRAW_FRAMEBUFFER,De.__webglFramebuffer);for(let Me=0;Me<X.length;Me++){if($.resolveDepthBuffer&&($.depthBuffer&&(Qt|=i.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(Qt|=i.STENCIL_BUFFER_BIT)),oe){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,De.__webglColorRenderbuffer[Me]);const Yt=n.get(X[Me]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Yt,0)}i.blitFramebuffer(0,0,_t,Dt,0,0,_t,Dt,Qt,i.NEAREST),d===!0&&(Ht.length=0,Vt.length=0,Ht.push(i.COLOR_ATTACHMENT0+Me),$.depthBuffer&&$.resolveDepthBuffer===!1&&(Ht.push(Ut),Vt.push(Ut),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Vt)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Ht))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),oe)for(let Me=0;Me<X.length;Me++){e.bindFramebuffer(i.FRAMEBUFFER,De.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Me,i.RENDERBUFFER,De.__webglColorRenderbuffer[Me]);const Yt=n.get(X[Me]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,De.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Me,i.TEXTURE_2D,Yt,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,De.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&d){const X=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[X])}}}function ue($){return Math.min(s.maxSamples,$.samples)}function kt($){const X=n.get($);return $.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&X.__useRenderToTexture!==!1}function Kt($){const X=u.render.frame;_.get($)!==X&&(_.set($,X),$.update())}function ze($,X){const _t=$.colorSpace,Dt=$.format,Qt=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||_t!==ah&&_t!==Vu&&(Hn.getTransfer(_t)===li?(Dt!==Ca||Qt!==xo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",_t)),X}function Ye($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(m.width=$.naturalWidth||$.width,m.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(m.width=$.displayWidth,m.height=$.displayHeight):(m.width=$.width,m.height=$.height),m}this.allocateTextureUnit=G,this.resetTextureUnits=Y,this.setTexture2D=vt,this.setTexture2DArray=k,this.setTexture3D=et,this.setTextureCube=nt,this.rebindTextures=bn,this.setupRenderTarget=it,this.updateRenderTargetMipmap=qt,this.updateMultisampleRenderTarget=Pt,this.setupDepthRenderbuffer=Ze,this.setupFrameBufferTexture=ae,this.useMultisampledRTT=kt}function PC(i,t){function e(n,s=Vu){let r;const u=Hn.getTransfer(s);if(n===xo)return i.UNSIGNED_BYTE;if(n===fS)return i.UNSIGNED_SHORT_4_4_4_4;if(n===dS)return i.UNSIGNED_SHORT_5_5_5_1;if(n===eb)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===nb)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===$T)return i.BYTE;if(n===tb)return i.SHORT;if(n===Tp)return i.UNSIGNED_SHORT;if(n===hS)return i.INT;if(n===Xu)return i.UNSIGNED_INT;if(n===xr)return i.FLOAT;if(n===kp)return i.HALF_FLOAT;if(n===ib)return i.ALPHA;if(n===sb)return i.RGB;if(n===Ca)return i.RGBA;if(n===Mp)return i.DEPTH_COMPONENT;if(n===Ap)return i.DEPTH_STENCIL;if(n===pS)return i.RED;if(n===S_)return i.RED_INTEGER;if(n===ab)return i.RG;if(n===mS)return i.RG_INTEGER;if(n===gS)return i.RGBA_INTEGER;if(n===Og||n===Lg||n===Pg||n===zg)if(u===li)if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===Og)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Lg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Pg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===zg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=t.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===Og)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Lg)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Pg)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===zg)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===l0||n===u0||n===c0||n===h0)if(r=t.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===l0)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===u0)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===c0)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===h0)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===f0||n===d0||n===p0)if(r=t.get("WEBGL_compressed_texture_etc"),r!==null){if(n===f0||n===d0)return u===li?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===p0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===m0||n===g0||n===_0||n===y0||n===v0||n===S0||n===x0||n===E0||n===T0||n===b0||n===M0||n===A0||n===R0||n===w0)if(r=t.get("WEBGL_compressed_texture_astc"),r!==null){if(n===m0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===g0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===_0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===y0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===v0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===S0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===x0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===E0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===T0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===b0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===M0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===A0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===R0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===w0)return u===li?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===C0||n===D0||n===N0)if(r=t.get("EXT_texture_compression_bptc"),r!==null){if(n===C0)return u===li?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===D0)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===N0)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===I0||n===U0||n===O0||n===L0)if(r=t.get("EXT_texture_compression_rgtc"),r!==null){if(n===I0)return r.COMPRESSED_RED_RGTC1_EXT;if(n===U0)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===O0)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===L0)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===bp?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:e}}const gB=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_B=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class yB{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e){if(this.texture===null){const n=new _b(t.texture);(t.depthNear!==e.depthNear||t.depthFar!==e.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=n}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,n=new il({vertexShader:gB,fragmentShader:_B,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new ms(new jp(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class vB extends tu{constructor(t,e){super();const n=this;let s=null,r=1,u=null,f="local-floor",d=1,m=null,_=null,y=null,S=null,T=null,R=null;const C=typeof XRWebGLBinding<"u",w=new yB,M={},O=e.getContextAttributes();let z=null,V=null;const j=[],q=[],L=new Jt;let P=null;const D=new Bs;D.viewport=new Yn;const U=new Bs;U.viewport=new Yn;const F=[D,U],Y=new MC;let G=null,gt=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(xt){let It=j[xt];return It===void 0&&(It=new qv,j[xt]=It),It.getTargetRaySpace()},this.getControllerGrip=function(xt){let It=j[xt];return It===void 0&&(It=new qv,j[xt]=It),It.getGripSpace()},this.getHand=function(xt){let It=j[xt];return It===void 0&&(It=new qv,j[xt]=It),It.getHandSpace()};function vt(xt){const It=q.indexOf(xt.inputSource);if(It===-1)return;const ae=j[It];ae!==void 0&&(ae.update(xt.inputSource,xt.frame,m||u),ae.dispatchEvent({type:xt.type,data:xt.inputSource}))}function k(){s.removeEventListener("select",vt),s.removeEventListener("selectstart",vt),s.removeEventListener("selectend",vt),s.removeEventListener("squeeze",vt),s.removeEventListener("squeezestart",vt),s.removeEventListener("squeezeend",vt),s.removeEventListener("end",k),s.removeEventListener("inputsourceschange",et);for(let xt=0;xt<j.length;xt++){const It=q[xt];It!==null&&(q[xt]=null,j[xt].disconnect(It))}G=null,gt=null,w.reset();for(const xt in M)delete M[xt];t.setRenderTarget(z),T=null,S=null,y=null,s=null,V=null,ee.stop(),n.isPresenting=!1,t.setPixelRatio(P),t.setSize(L.width,L.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(xt){r=xt,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(xt){f=xt,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m||u},this.setReferenceSpace=function(xt){m=xt},this.getBaseLayer=function(){return S!==null?S:T},this.getBinding=function(){return y===null&&C&&(y=new XRWebGLBinding(s,e)),y},this.getFrame=function(){return R},this.getSession=function(){return s},this.setSession=async function(xt){if(s=xt,s!==null){if(z=t.getRenderTarget(),s.addEventListener("select",vt),s.addEventListener("selectstart",vt),s.addEventListener("selectend",vt),s.addEventListener("squeeze",vt),s.addEventListener("squeezestart",vt),s.addEventListener("squeezeend",vt),s.addEventListener("end",k),s.addEventListener("inputsourceschange",et),O.xrCompatible!==!0&&await e.makeXRCompatible(),P=t.getPixelRatio(),t.getSize(L),C&&"createProjectionLayer"in XRWebGLBinding.prototype){let ae=null,de=null,Ee=null;O.depth&&(Ee=O.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,ae=O.stencil?Ap:Mp,de=O.stencil?bp:Xu);const Ze={colorFormat:e.RGBA8,depthFormat:Ee,scaleFactor:r};y=this.getBinding(),S=y.createProjectionLayer(Ze),s.updateRenderState({layers:[S]}),t.setPixelRatio(1),t.setSize(S.textureWidth,S.textureHeight,!1),V=new Jl(S.textureWidth,S.textureHeight,{format:Ca,type:xo,depthTexture:new gb(S.textureWidth,S.textureHeight,de,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:O.stencil,colorSpace:t.outputColorSpace,samples:O.antialias?4:0,resolveDepthBuffer:S.ignoreDepthValues===!1,resolveStencilBuffer:S.ignoreDepthValues===!1})}else{const ae={antialias:O.antialias,alpha:!0,depth:O.depth,stencil:O.stencil,framebufferScaleFactor:r};T=new XRWebGLLayer(s,e,ae),s.updateRenderState({baseLayer:T}),t.setPixelRatio(1),t.setSize(T.framebufferWidth,T.framebufferHeight,!1),V=new Jl(T.framebufferWidth,T.framebufferHeight,{format:Ca,type:xo,colorSpace:t.outputColorSpace,stencilBuffer:O.stencil,resolveDepthBuffer:T.ignoreDepthValues===!1,resolveStencilBuffer:T.ignoreDepthValues===!1})}V.isXRRenderTarget=!0,this.setFoveation(d),m=null,u=await s.requestReferenceSpace(f),ee.setContext(s),ee.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function et(xt){for(let It=0;It<xt.removed.length;It++){const ae=xt.removed[It],de=q.indexOf(ae);de>=0&&(q[de]=null,j[de].disconnect(ae))}for(let It=0;It<xt.added.length;It++){const ae=xt.added[It];let de=q.indexOf(ae);if(de===-1){for(let Ze=0;Ze<j.length;Ze++)if(Ze>=q.length){q.push(ae),de=Ze;break}else if(q[Ze]===null){q[Ze]=ae,de=Ze;break}if(de===-1)break}const Ee=j[de];Ee&&Ee.connect(ae)}}const nt=new tt,ft=new tt;function wt(xt,It,ae){nt.setFromMatrixPosition(It.matrixWorld),ft.setFromMatrixPosition(ae.matrixWorld);const de=nt.distanceTo(ft),Ee=It.projectionMatrix.elements,Ze=ae.projectionMatrix.elements,bn=Ee[14]/(Ee[10]-1),it=Ee[14]/(Ee[10]+1),qt=(Ee[9]+1)/Ee[5],Ht=(Ee[9]-1)/Ee[5],Vt=(Ee[8]-1)/Ee[0],Pt=(Ze[8]+1)/Ze[0],ue=bn*Vt,kt=bn*Pt,Kt=de/(-Vt+Pt),ze=Kt*-Vt;if(It.matrixWorld.decompose(xt.position,xt.quaternion,xt.scale),xt.translateX(ze),xt.translateZ(Kt),xt.matrixWorld.compose(xt.position,xt.quaternion,xt.scale),xt.matrixWorldInverse.copy(xt.matrixWorld).invert(),Ee[10]===-1)xt.projectionMatrix.copy(It.projectionMatrix),xt.projectionMatrixInverse.copy(It.projectionMatrixInverse);else{const Ye=bn+Kt,$=it+Kt,X=ue-ze,_t=kt+(de-ze),Dt=qt*it/$*Ye,Qt=Ht*it/$*Ye;xt.projectionMatrix.makePerspective(X,_t,Dt,Qt,Ye,$),xt.projectionMatrixInverse.copy(xt.projectionMatrix).invert()}}function J(xt,It){It===null?xt.matrixWorld.copy(xt.matrix):xt.matrixWorld.multiplyMatrices(It.matrixWorld,xt.matrix),xt.matrixWorldInverse.copy(xt.matrixWorld).invert()}this.updateCamera=function(xt){if(s===null)return;let It=xt.near,ae=xt.far;w.texture!==null&&(w.depthNear>0&&(It=w.depthNear),w.depthFar>0&&(ae=w.depthFar)),Y.near=U.near=D.near=It,Y.far=U.far=D.far=ae,(G!==Y.near||gt!==Y.far)&&(s.updateRenderState({depthNear:Y.near,depthFar:Y.far}),G=Y.near,gt=Y.far),Y.layers.mask=xt.layers.mask|6,D.layers.mask=Y.layers.mask&3,U.layers.mask=Y.layers.mask&5;const de=xt.parent,Ee=Y.cameras;J(Y,de);for(let Ze=0;Ze<Ee.length;Ze++)J(Ee[Ze],de);Ee.length===2?wt(Y,D,U):Y.projectionMatrix.copy(D.projectionMatrix),ut(xt,Y,de)};function ut(xt,It,ae){ae===null?xt.matrix.copy(It.matrixWorld):(xt.matrix.copy(ae.matrixWorld),xt.matrix.invert(),xt.matrix.multiply(It.matrixWorld)),xt.matrix.decompose(xt.position,xt.quaternion,xt.scale),xt.updateMatrixWorld(!0),xt.projectionMatrix.copy(It.projectionMatrix),xt.projectionMatrixInverse.copy(It.projectionMatrixInverse),xt.isPerspectiveCamera&&(xt.fov=wp*2*Math.atan(1/xt.projectionMatrix.elements[5]),xt.zoom=1)}this.getCamera=function(){return Y},this.getFoveation=function(){if(!(S===null&&T===null))return d},this.setFoveation=function(xt){d=xt,S!==null&&(S.fixedFoveation=xt),T!==null&&T.fixedFoveation!==void 0&&(T.fixedFoveation=xt)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(Y)},this.getCameraTexture=function(xt){return M[xt]};let Ot=null;function Lt(xt,It){if(_=It.getViewerPose(m||u),R=It,_!==null){const ae=_.views;T!==null&&(t.setRenderTargetFramebuffer(V,T.framebuffer),t.setRenderTarget(V));let de=!1;ae.length!==Y.cameras.length&&(Y.cameras.length=0,de=!0);for(let it=0;it<ae.length;it++){const qt=ae[it];let Ht=null;if(T!==null)Ht=T.getViewport(qt);else{const Pt=y.getViewSubImage(S,qt);Ht=Pt.viewport,it===0&&(t.setRenderTargetTextures(V,Pt.colorTexture,Pt.depthStencilTexture),t.setRenderTarget(V))}let Vt=F[it];Vt===void 0&&(Vt=new Bs,Vt.layers.enable(it),Vt.viewport=new Yn,F[it]=Vt),Vt.matrix.fromArray(qt.transform.matrix),Vt.matrix.decompose(Vt.position,Vt.quaternion,Vt.scale),Vt.projectionMatrix.fromArray(qt.projectionMatrix),Vt.projectionMatrixInverse.copy(Vt.projectionMatrix).invert(),Vt.viewport.set(Ht.x,Ht.y,Ht.width,Ht.height),it===0&&(Y.matrix.copy(Vt.matrix),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale)),de===!0&&Y.cameras.push(Vt)}const Ee=s.enabledFeatures;if(Ee&&Ee.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&C){y=n.getBinding();const it=y.getDepthInformation(ae[0]);it&&it.isValid&&it.texture&&w.init(it,s.renderState)}if(Ee&&Ee.includes("camera-access")&&C){t.state.unbindTexture(),y=n.getBinding();for(let it=0;it<ae.length;it++){const qt=ae[it].camera;if(qt){let Ht=M[qt];Ht||(Ht=new _b,M[qt]=Ht);const Vt=y.getCameraImage(qt);Ht.sourceTexture=Vt}}}}for(let ae=0;ae<j.length;ae++){const de=q[ae],Ee=j[ae];de!==null&&Ee!==void 0&&Ee.update(de,It,m||u)}Ot&&Ot(xt,It),It.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:It}),R=null}const ee=new NC;ee.setAnimationLoop(Lt),this.setAnimationLoop=function(xt){Ot=xt},this.dispose=function(){}}}const vf=new Xr,SB=new tn;function xB(i,t){function e(w,M){w.matrixAutoUpdate===!0&&w.updateMatrix(),M.value.copy(w.matrix)}function n(w,M){M.color.getRGB(w.fogColor.value,Dw(i)),M.isFog?(w.fogNear.value=M.near,w.fogFar.value=M.far):M.isFogExp2&&(w.fogDensity.value=M.density)}function s(w,M,O,z,V){M.isMeshBasicMaterial||M.isMeshLambertMaterial?r(w,M):M.isMeshToonMaterial?(r(w,M),y(w,M)):M.isMeshPhongMaterial?(r(w,M),_(w,M)):M.isMeshStandardMaterial?(r(w,M),S(w,M),M.isMeshPhysicalMaterial&&T(w,M,V)):M.isMeshMatcapMaterial?(r(w,M),R(w,M)):M.isMeshDepthMaterial?r(w,M):M.isMeshDistanceMaterial?(r(w,M),C(w,M)):M.isMeshNormalMaterial?r(w,M):M.isLineBasicMaterial?(u(w,M),M.isLineDashedMaterial&&f(w,M)):M.isPointsMaterial?d(w,M,O,z):M.isSpriteMaterial?m(w,M):M.isShadowMaterial?(w.color.value.copy(M.color),w.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function r(w,M){w.opacity.value=M.opacity,M.color&&w.diffuse.value.copy(M.color),M.emissive&&w.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(w.map.value=M.map,e(M.map,w.mapTransform)),M.alphaMap&&(w.alphaMap.value=M.alphaMap,e(M.alphaMap,w.alphaMapTransform)),M.bumpMap&&(w.bumpMap.value=M.bumpMap,e(M.bumpMap,w.bumpMapTransform),w.bumpScale.value=M.bumpScale,M.side===nr&&(w.bumpScale.value*=-1)),M.normalMap&&(w.normalMap.value=M.normalMap,e(M.normalMap,w.normalMapTransform),w.normalScale.value.copy(M.normalScale),M.side===nr&&w.normalScale.value.negate()),M.displacementMap&&(w.displacementMap.value=M.displacementMap,e(M.displacementMap,w.displacementMapTransform),w.displacementScale.value=M.displacementScale,w.displacementBias.value=M.displacementBias),M.emissiveMap&&(w.emissiveMap.value=M.emissiveMap,e(M.emissiveMap,w.emissiveMapTransform)),M.specularMap&&(w.specularMap.value=M.specularMap,e(M.specularMap,w.specularMapTransform)),M.alphaTest>0&&(w.alphaTest.value=M.alphaTest);const O=t.get(M),z=O.envMap,V=O.envMapRotation;z&&(w.envMap.value=z,vf.copy(V),vf.x*=-1,vf.y*=-1,vf.z*=-1,z.isCubeTexture&&z.isRenderTargetTexture===!1&&(vf.y*=-1,vf.z*=-1),w.envMapRotation.value.setFromMatrix4(SB.makeRotationFromEuler(vf)),w.flipEnvMap.value=z.isCubeTexture&&z.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=M.reflectivity,w.ior.value=M.ior,w.refractionRatio.value=M.refractionRatio),M.lightMap&&(w.lightMap.value=M.lightMap,w.lightMapIntensity.value=M.lightMapIntensity,e(M.lightMap,w.lightMapTransform)),M.aoMap&&(w.aoMap.value=M.aoMap,w.aoMapIntensity.value=M.aoMapIntensity,e(M.aoMap,w.aoMapTransform))}function u(w,M){w.diffuse.value.copy(M.color),w.opacity.value=M.opacity,M.map&&(w.map.value=M.map,e(M.map,w.mapTransform))}function f(w,M){w.dashSize.value=M.dashSize,w.totalSize.value=M.dashSize+M.gapSize,w.scale.value=M.scale}function d(w,M,O,z){w.diffuse.value.copy(M.color),w.opacity.value=M.opacity,w.size.value=M.size*O,w.scale.value=z*.5,M.map&&(w.map.value=M.map,e(M.map,w.uvTransform)),M.alphaMap&&(w.alphaMap.value=M.alphaMap,e(M.alphaMap,w.alphaMapTransform)),M.alphaTest>0&&(w.alphaTest.value=M.alphaTest)}function m(w,M){w.diffuse.value.copy(M.color),w.opacity.value=M.opacity,w.rotation.value=M.rotation,M.map&&(w.map.value=M.map,e(M.map,w.mapTransform)),M.alphaMap&&(w.alphaMap.value=M.alphaMap,e(M.alphaMap,w.alphaMapTransform)),M.alphaTest>0&&(w.alphaTest.value=M.alphaTest)}function _(w,M){w.specular.value.copy(M.specular),w.shininess.value=Math.max(M.shininess,1e-4)}function y(w,M){M.gradientMap&&(w.gradientMap.value=M.gradientMap)}function S(w,M){w.metalness.value=M.metalness,M.metalnessMap&&(w.metalnessMap.value=M.metalnessMap,e(M.metalnessMap,w.metalnessMapTransform)),w.roughness.value=M.roughness,M.roughnessMap&&(w.roughnessMap.value=M.roughnessMap,e(M.roughnessMap,w.roughnessMapTransform)),M.envMap&&(w.envMapIntensity.value=M.envMapIntensity)}function T(w,M,O){w.ior.value=M.ior,M.sheen>0&&(w.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),w.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(w.sheenColorMap.value=M.sheenColorMap,e(M.sheenColorMap,w.sheenColorMapTransform)),M.sheenRoughnessMap&&(w.sheenRoughnessMap.value=M.sheenRoughnessMap,e(M.sheenRoughnessMap,w.sheenRoughnessMapTransform))),M.clearcoat>0&&(w.clearcoat.value=M.clearcoat,w.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(w.clearcoatMap.value=M.clearcoatMap,e(M.clearcoatMap,w.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,e(M.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(w.clearcoatNormalMap.value=M.clearcoatNormalMap,e(M.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===nr&&w.clearcoatNormalScale.value.negate())),M.dispersion>0&&(w.dispersion.value=M.dispersion),M.iridescence>0&&(w.iridescence.value=M.iridescence,w.iridescenceIOR.value=M.iridescenceIOR,w.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(w.iridescenceMap.value=M.iridescenceMap,e(M.iridescenceMap,w.iridescenceMapTransform)),M.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=M.iridescenceThicknessMap,e(M.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),M.transmission>0&&(w.transmission.value=M.transmission,w.transmissionSamplerMap.value=O.texture,w.transmissionSamplerSize.value.set(O.width,O.height),M.transmissionMap&&(w.transmissionMap.value=M.transmissionMap,e(M.transmissionMap,w.transmissionMapTransform)),w.thickness.value=M.thickness,M.thicknessMap&&(w.thicknessMap.value=M.thicknessMap,e(M.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=M.attenuationDistance,w.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(w.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(w.anisotropyMap.value=M.anisotropyMap,e(M.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=M.specularIntensity,w.specularColor.value.copy(M.specularColor),M.specularColorMap&&(w.specularColorMap.value=M.specularColorMap,e(M.specularColorMap,w.specularColorMapTransform)),M.specularIntensityMap&&(w.specularIntensityMap.value=M.specularIntensityMap,e(M.specularIntensityMap,w.specularIntensityMapTransform))}function R(w,M){M.matcap&&(w.matcap.value=M.matcap)}function C(w,M){const O=t.get(M).light;w.referencePosition.value.setFromMatrixPosition(O.matrixWorld),w.nearDistance.value=O.shadow.camera.near,w.farDistance.value=O.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function EB(i,t,e,n){let s={},r={},u=[];const f=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function d(O,z){const V=z.program;n.uniformBlockBinding(O,V)}function m(O,z){let V=s[O.id];V===void 0&&(R(O),V=_(O),s[O.id]=V,O.addEventListener("dispose",w));const j=z.program;n.updateUBOMapping(O,j);const q=t.render.frame;r[O.id]!==q&&(S(O),r[O.id]=q)}function _(O){const z=y();O.__bindingPointIndex=z;const V=i.createBuffer(),j=O.__size,q=O.usage;return i.bindBuffer(i.UNIFORM_BUFFER,V),i.bufferData(i.UNIFORM_BUFFER,j,q),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,z,V),V}function y(){for(let O=0;O<f;O++)if(u.indexOf(O)===-1)return u.push(O),O;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function S(O){const z=s[O.id],V=O.uniforms,j=O.__cache;i.bindBuffer(i.UNIFORM_BUFFER,z);for(let q=0,L=V.length;q<L;q++){const P=Array.isArray(V[q])?V[q]:[V[q]];for(let D=0,U=P.length;D<U;D++){const F=P[D];if(T(F,q,D,j)===!0){const Y=F.__offset,G=Array.isArray(F.value)?F.value:[F.value];let gt=0;for(let vt=0;vt<G.length;vt++){const k=G[vt],et=C(k);typeof k=="number"||typeof k=="boolean"?(F.__data[0]=k,i.bufferSubData(i.UNIFORM_BUFFER,Y+gt,F.__data)):k.isMatrix3?(F.__data[0]=k.elements[0],F.__data[1]=k.elements[1],F.__data[2]=k.elements[2],F.__data[3]=0,F.__data[4]=k.elements[3],F.__data[5]=k.elements[4],F.__data[6]=k.elements[5],F.__data[7]=0,F.__data[8]=k.elements[6],F.__data[9]=k.elements[7],F.__data[10]=k.elements[8],F.__data[11]=0):(k.toArray(F.__data,gt),gt+=et.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,Y,F.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function T(O,z,V,j){const q=O.value,L=z+"_"+V;if(j[L]===void 0)return typeof q=="number"||typeof q=="boolean"?j[L]=q:j[L]=q.clone(),!0;{const P=j[L];if(typeof q=="number"||typeof q=="boolean"){if(P!==q)return j[L]=q,!0}else if(P.equals(q)===!1)return P.copy(q),!0}return!1}function R(O){const z=O.uniforms;let V=0;const j=16;for(let L=0,P=z.length;L<P;L++){const D=Array.isArray(z[L])?z[L]:[z[L]];for(let U=0,F=D.length;U<F;U++){const Y=D[U],G=Array.isArray(Y.value)?Y.value:[Y.value];for(let gt=0,vt=G.length;gt<vt;gt++){const k=G[gt],et=C(k),nt=V%j,ft=nt%et.boundary,wt=nt+ft;V+=ft,wt!==0&&j-wt<et.storage&&(V+=j-wt),Y.__data=new Float32Array(et.storage/Float32Array.BYTES_PER_ELEMENT),Y.__offset=V,V+=et.storage}}}const q=V%j;return q>0&&(V+=j-q),O.__size=V,O.__cache={},this}function C(O){const z={boundary:0,storage:0};return typeof O=="number"||typeof O=="boolean"?(z.boundary=4,z.storage=4):O.isVector2?(z.boundary=8,z.storage=8):O.isVector3||O.isColor?(z.boundary=16,z.storage=12):O.isVector4?(z.boundary=16,z.storage=16):O.isMatrix3?(z.boundary=48,z.storage=48):O.isMatrix4?(z.boundary=64,z.storage=64):O.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",O),z}function w(O){const z=O.target;z.removeEventListener("dispose",w);const V=u.indexOf(z.__bindingPointIndex);u.splice(V,1),i.deleteBuffer(s[z.id]),delete s[z.id],delete r[z.id]}function M(){for(const O in s)i.deleteBuffer(s[O]);u=[],s={},r={}}return{bind:d,update:m,dispose:M}}class zC{constructor(t={}){const{canvas:e=Rw(),context:n=null,depth:s=!0,stencil:r=!1,alpha:u=!1,antialias:f=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:m=!1,powerPreference:_="default",failIfMajorPerformanceCaveat:y=!1,reversedDepthBuffer:S=!1}=t;this.isWebGLRenderer=!0;let T;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");T=n.getContextAttributes().alpha}else T=u;const R=new Uint32Array(4),C=new Int32Array(4);let w=null,M=null;const O=[],z=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=jl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const V=this;let j=!1;this._outputColorSpace=Ra;let q=0,L=0,P=null,D=-1,U=null;const F=new Yn,Y=new Yn;let G=null;const gt=new Te(0);let vt=0,k=e.width,et=e.height,nt=1,ft=null,wt=null;const J=new Yn(0,0,k,et),ut=new Yn(0,0,k,et);let Ot=!1;const Lt=new Xp;let ee=!1,xt=!1;const It=new tn,ae=new tt,de=new Yn,Ee={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ze=!1;function bn(){return P===null?nt:1}let it=n;function qt(K,lt){return e.getContext(K,lt)}try{const K={alpha:!0,depth:s,stencil:r,antialias:f,premultipliedAlpha:d,preserveDrawingBuffer:m,powerPreference:_,failIfMajorPerformanceCaveat:y};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${lS}`),e.addEventListener("webglcontextlost",re,!1),e.addEventListener("webglcontextrestored",he,!1),e.addEventListener("webglcontextcreationerror",$t,!1),it===null){const lt="webgl2";if(it=qt(lt,K),it===null)throw qt(lt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(K){throw console.error("THREE.WebGLRenderer: "+K.message),K}let Ht,Vt,Pt,ue,kt,Kt,ze,Ye,$,X,_t,Dt,Qt,Ut,De,oe,be,Me,Yt,ie,Ce,pe,fe,ke;function ot(){Ht=new Oz(it),Ht.init(),pe=new PC(it,Ht),Vt=new Rz(it,Ht,t,pe),Pt=new pB(it,Ht),Vt.reversedDepthBuffer&&S&&Pt.buffers.depth.setReversed(!0),ue=new zz(it),kt=new eB,Kt=new mB(it,Ht,Pt,kt,Vt,pe,ue),ze=new Cz(V),Ye=new Uz(V),$=new kL(it),fe=new Mz(it,$),X=new Lz(it,$,ue,fe),_t=new Bz(it,X,$,ue),Yt=new Vz(it,Vt,Kt),oe=new wz(kt),Dt=new tB(V,ze,Ye,Ht,Vt,fe,oe),Qt=new xB(V,kt),Ut=new iB,De=new uB(Ht),Me=new bz(V,ze,Ye,Pt,_t,T,d),be=new fB(V,_t,Vt),ke=new EB(it,ue,Vt,Pt),ie=new Az(it,Ht,ue),Ce=new Pz(it,Ht,ue),ue.programs=Dt.programs,V.capabilities=Vt,V.extensions=Ht,V.properties=kt,V.renderLists=Ut,V.shadowMap=be,V.state=Pt,V.info=ue}ot();const te=new vB(V,it);this.xr=te,this.getContext=function(){return it},this.getContextAttributes=function(){return it.getContextAttributes()},this.forceContextLoss=function(){const K=Ht.get("WEBGL_lose_context");K&&K.loseContext()},this.forceContextRestore=function(){const K=Ht.get("WEBGL_lose_context");K&&K.restoreContext()},this.getPixelRatio=function(){return nt},this.setPixelRatio=function(K){K!==void 0&&(nt=K,this.setSize(k,et,!1))},this.getSize=function(K){return K.set(k,et)},this.setSize=function(K,lt,yt=!0){if(te.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}k=K,et=lt,e.width=Math.floor(K*nt),e.height=Math.floor(lt*nt),yt===!0&&(e.style.width=K+"px",e.style.height=lt+"px"),this.setViewport(0,0,K,lt)},this.getDrawingBufferSize=function(K){return K.set(k*nt,et*nt).floor()},this.setDrawingBufferSize=function(K,lt,yt){k=K,et=lt,nt=yt,e.width=Math.floor(K*yt),e.height=Math.floor(lt*yt),this.setViewport(0,0,K,lt)},this.getCurrentViewport=function(K){return K.copy(F)},this.getViewport=function(K){return K.copy(J)},this.setViewport=function(K,lt,yt,Tt){K.isVector4?J.set(K.x,K.y,K.z,K.w):J.set(K,lt,yt,Tt),Pt.viewport(F.copy(J).multiplyScalar(nt).round())},this.getScissor=function(K){return K.copy(ut)},this.setScissor=function(K,lt,yt,Tt){K.isVector4?ut.set(K.x,K.y,K.z,K.w):ut.set(K,lt,yt,Tt),Pt.scissor(Y.copy(ut).multiplyScalar(nt).round())},this.getScissorTest=function(){return Ot},this.setScissorTest=function(K){Pt.setScissorTest(Ot=K)},this.setOpaqueSort=function(K){ft=K},this.setTransparentSort=function(K){wt=K},this.getClearColor=function(K){return K.copy(Me.getClearColor())},this.setClearColor=function(){Me.setClearColor(...arguments)},this.getClearAlpha=function(){return Me.getClearAlpha()},this.setClearAlpha=function(){Me.setClearAlpha(...arguments)},this.clear=function(K=!0,lt=!0,yt=!0){let Tt=0;if(K){let ct=!1;if(P!==null){const Xt=P.texture.format;ct=Xt===gS||Xt===mS||Xt===S_}if(ct){const Xt=P.texture.type,ce=Xt===xo||Xt===Xu||Xt===Tp||Xt===bp||Xt===fS||Xt===dS,xe=Me.getClearColor(),me=Me.getClearAlpha(),Ie=xe.r,Fe=xe.g,Oe=xe.b;ce?(R[0]=Ie,R[1]=Fe,R[2]=Oe,R[3]=me,it.clearBufferuiv(it.COLOR,0,R)):(C[0]=Ie,C[1]=Fe,C[2]=Oe,C[3]=me,it.clearBufferiv(it.COLOR,0,C))}else Tt|=it.COLOR_BUFFER_BIT}lt&&(Tt|=it.DEPTH_BUFFER_BIT),yt&&(Tt|=it.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),it.clear(Tt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",re,!1),e.removeEventListener("webglcontextrestored",he,!1),e.removeEventListener("webglcontextcreationerror",$t,!1),Me.dispose(),Ut.dispose(),De.dispose(),kt.dispose(),ze.dispose(),Ye.dispose(),_t.dispose(),fe.dispose(),ke.dispose(),Dt.dispose(),te.dispose(),te.removeEventListener("sessionstart",Hs),te.removeEventListener("sessionend",br),Gs.stop()};function re(K){K.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),j=!0}function he(){console.log("THREE.WebGLRenderer: Context Restored."),j=!1;const K=ue.autoReset,lt=be.enabled,yt=be.autoUpdate,Tt=be.needsUpdate,ct=be.type;ot(),ue.autoReset=K,be.enabled=lt,be.autoUpdate=yt,be.needsUpdate=Tt,be.type=ct}function $t(K){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",K.statusMessage)}function Bt(K){const lt=K.target;lt.removeEventListener("dispose",Bt),ye(lt)}function ye(K){Xe(K),kt.remove(K)}function Xe(K){const lt=kt.get(K).programs;lt!==void 0&&(lt.forEach(function(yt){Dt.releaseProgram(yt)}),K.isShaderMaterial&&Dt.releaseShaderCache(K))}this.renderBufferDirect=function(K,lt,yt,Tt,ct,Xt){lt===null&&(lt=Ee);const ce=ct.isMesh&&ct.matrixWorld.determinant()<0,xe=aa(K,lt,yt,Tt,ct);Pt.setMaterial(Tt,ce);let me=yt.index,Ie=1;if(Tt.wireframe===!0){if(me=X.getWireframeAttribute(yt),me===void 0)return;Ie=2}const Fe=yt.drawRange,Oe=yt.attributes.position;let ln=Fe.start*Ie,Nn=(Fe.start+Fe.count)*Ie;Xt!==null&&(ln=Math.max(ln,Xt.start*Ie),Nn=Math.min(Nn,(Xt.start+Xt.count)*Ie)),me!==null?(ln=Math.max(ln,0),Nn=Math.min(Nn,me.count)):Oe!=null&&(ln=Math.max(ln,0),Nn=Math.min(Nn,Oe.count));const Kn=Nn-ln;if(Kn<0||Kn===1/0)return;fe.setup(ct,Tt,xe,yt,me);let mn,je=ie;if(me!==null&&(mn=$.get(me),je=Ce,je.setIndex(mn)),ct.isMesh)Tt.wireframe===!0?(Pt.setLineWidth(Tt.wireframeLinewidth*bn()),je.setMode(it.LINES)):je.setMode(it.TRIANGLES);else if(ct.isLine){let ve=Tt.linewidth;ve===void 0&&(ve=1),Pt.setLineWidth(ve*bn()),ct.isLineSegments?je.setMode(it.LINES):ct.isLineLoop?je.setMode(it.LINE_LOOP):je.setMode(it.LINE_STRIP)}else ct.isPoints?je.setMode(it.POINTS):ct.isSprite&&je.setMode(it.TRIANGLES);if(ct.isBatchedMesh)if(ct._multiDrawInstances!==null)n_("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),je.renderMultiDrawInstances(ct._multiDrawStarts,ct._multiDrawCounts,ct._multiDrawCount,ct._multiDrawInstances);else if(Ht.get("WEBGL_multi_draw"))je.renderMultiDraw(ct._multiDrawStarts,ct._multiDrawCounts,ct._multiDrawCount);else{const ve=ct._multiDrawStarts,Gn=ct._multiDrawCounts,yn=ct._multiDrawCount,sn=me?$.get(me).bytesPerElement:1,ks=kt.get(Tt).currentProgram.getUniforms();for(let ui=0;ui<yn;ui++)ks.setValue(it,"_gl_DrawID",ui),je.render(ve[ui]/sn,Gn[ui])}else if(ct.isInstancedMesh)je.renderInstances(ln,Kn,ct.count);else if(yt.isInstancedBufferGeometry){const ve=yt._maxInstanceCount!==void 0?yt._maxInstanceCount:1/0,Gn=Math.min(yt.instanceCount,ve);je.renderInstances(ln,Kn,Gn)}else je.render(ln,Kn)};function Rn(K,lt,yt){K.transparent===!0&&K.side===kl&&K.forceSinglePass===!1?(K.side=nr,K.needsUpdate=!0,Zi(K,lt,yt),K.side=ku,K.needsUpdate=!0,Zi(K,lt,yt),K.side=kl):Zi(K,lt,yt)}this.compile=function(K,lt,yt=null){yt===null&&(yt=K),M=De.get(yt),M.init(lt),z.push(M),yt.traverseVisible(function(ct){ct.isLight&&ct.layers.test(lt.layers)&&(M.pushLight(ct),ct.castShadow&&M.pushShadow(ct))}),K!==yt&&K.traverseVisible(function(ct){ct.isLight&&ct.layers.test(lt.layers)&&(M.pushLight(ct),ct.castShadow&&M.pushShadow(ct))}),M.setupLights();const Tt=new Set;return K.traverse(function(ct){if(!(ct.isMesh||ct.isPoints||ct.isLine||ct.isSprite))return;const Xt=ct.material;if(Xt)if(Array.isArray(Xt))for(let ce=0;ce<Xt.length;ce++){const xe=Xt[ce];Rn(xe,yt,ct),Tt.add(xe)}else Rn(Xt,yt,ct),Tt.add(Xt)}),M=z.pop(),Tt},this.compileAsync=function(K,lt,yt=null){const Tt=this.compile(K,lt,yt);return new Promise(ct=>{function Xt(){if(Tt.forEach(function(ce){kt.get(ce).currentProgram.isReady()&&Tt.delete(ce)}),Tt.size===0){ct(K);return}setTimeout(Xt,10)}Ht.get("KHR_parallel_shader_compile")!==null?Xt():setTimeout(Xt,10)})};let nn=null;function ss(K){nn&&nn(K)}function Hs(){Gs.stop()}function br(){Gs.start()}const Gs=new NC;Gs.setAnimationLoop(ss),typeof self<"u"&&Gs.setContext(self),this.setAnimationLoop=function(K){nn=K,te.setAnimationLoop(K),K===null?Gs.stop():Gs.start()},te.addEventListener("sessionstart",Hs),te.addEventListener("sessionend",br),this.render=function(K,lt){if(lt!==void 0&&lt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(j===!0)return;if(K.matrixWorldAutoUpdate===!0&&K.updateMatrixWorld(),lt.parent===null&&lt.matrixWorldAutoUpdate===!0&&lt.updateMatrixWorld(),te.enabled===!0&&te.isPresenting===!0&&(te.cameraAutoUpdate===!0&&te.updateCamera(lt),lt=te.getCamera()),K.isScene===!0&&K.onBeforeRender(V,K,lt,P),M=De.get(K,z.length),M.init(lt),z.push(M),It.multiplyMatrices(lt.projectionMatrix,lt.matrixWorldInverse),Lt.setFromProjectionMatrix(It,kr,lt.reversedDepth),xt=this.localClippingEnabled,ee=oe.init(this.clippingPlanes,xt),w=Ut.get(K,O.length),w.init(),O.push(w),te.enabled===!0&&te.isPresenting===!0){const Xt=V.xr.getDepthSensingMesh();Xt!==null&&Mr(Xt,lt,-1/0,V.sortObjects)}Mr(K,lt,0,V.sortObjects),w.finish(),V.sortObjects===!0&&w.sort(ft,wt),Ze=te.enabled===!1||te.isPresenting===!1||te.hasDepthSensing()===!1,Ze&&Me.addToRenderList(w,K),this.info.render.frame++,ee===!0&&oe.beginShadows();const yt=M.state.shadowsArray;be.render(yt,K,lt),ee===!0&&oe.endShadows(),this.info.autoReset===!0&&this.info.reset();const Tt=w.opaque,ct=w.transmissive;if(M.setupLights(),lt.isArrayCamera){const Xt=lt.cameras;if(ct.length>0)for(let ce=0,xe=Xt.length;ce<xe;ce++){const me=Xt[ce];Ia(Tt,ct,K,me)}Ze&&Me.render(K);for(let ce=0,xe=Xt.length;ce<xe;ce++){const me=Xt[ce];_s(w,K,me,me.viewport)}}else ct.length>0&&Ia(Tt,ct,K,lt),Ze&&Me.render(K),_s(w,K,lt);P!==null&&L===0&&(Kt.updateMultisampleRenderTarget(P),Kt.updateRenderTargetMipmap(P)),K.isScene===!0&&K.onAfterRender(V,K,lt),fe.resetDefaultState(),D=-1,U=null,z.pop(),z.length>0?(M=z[z.length-1],ee===!0&&oe.setGlobalState(V.clippingPlanes,M.state.camera)):M=null,O.pop(),O.length>0?w=O[O.length-1]:w=null};function Mr(K,lt,yt,Tt){if(K.visible===!1)return;if(K.layers.test(lt.layers)){if(K.isGroup)yt=K.renderOrder;else if(K.isLOD)K.autoUpdate===!0&&K.update(lt);else if(K.isLight)M.pushLight(K),K.castShadow&&M.pushShadow(K);else if(K.isSprite){if(!K.frustumCulled||Lt.intersectsSprite(K)){Tt&&de.setFromMatrixPosition(K.matrixWorld).applyMatrix4(It);const ce=_t.update(K),xe=K.material;xe.visible&&w.push(K,ce,xe,yt,de.z,null)}}else if((K.isMesh||K.isLine||K.isPoints)&&(!K.frustumCulled||Lt.intersectsObject(K))){const ce=_t.update(K),xe=K.material;if(Tt&&(K.boundingSphere!==void 0?(K.boundingSphere===null&&K.computeBoundingSphere(),de.copy(K.boundingSphere.center)):(ce.boundingSphere===null&&ce.computeBoundingSphere(),de.copy(ce.boundingSphere.center)),de.applyMatrix4(K.matrixWorld).applyMatrix4(It)),Array.isArray(xe)){const me=ce.groups;for(let Ie=0,Fe=me.length;Ie<Fe;Ie++){const Oe=me[Ie],ln=xe[Oe.materialIndex];ln&&ln.visible&&w.push(K,ce,ln,yt,de.z,Oe)}}else xe.visible&&w.push(K,ce,xe,yt,de.z,null)}}const Xt=K.children;for(let ce=0,xe=Xt.length;ce<xe;ce++)Mr(Xt[ce],lt,yt,Tt)}function _s(K,lt,yt,Tt){const ct=K.opaque,Xt=K.transmissive,ce=K.transparent;M.setupLightsView(yt),ee===!0&&oe.setGlobalState(V.clippingPlanes,yt),Tt&&Pt.viewport(F.copy(Tt)),ct.length>0&&ws(ct,lt,yt),Xt.length>0&&ws(Xt,lt,yt),ce.length>0&&ws(ce,lt,yt),Pt.buffers.depth.setTest(!0),Pt.buffers.depth.setMask(!0),Pt.buffers.color.setMask(!0),Pt.setPolygonOffset(!1)}function Ia(K,lt,yt,Tt){if((yt.isScene===!0?yt.overrideMaterial:null)!==null)return;M.state.transmissionRenderTarget[Tt.id]===void 0&&(M.state.transmissionRenderTarget[Tt.id]=new Jl(1,1,{generateMipmaps:!0,type:Ht.has("EXT_color_buffer_half_float")||Ht.has("EXT_color_buffer_float")?kp:xo,minFilter:ql,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Hn.workingColorSpace}));const Xt=M.state.transmissionRenderTarget[Tt.id],ce=Tt.viewport||F;Xt.setSize(ce.z*V.transmissionResolutionScale,ce.w*V.transmissionResolutionScale);const xe=V.getRenderTarget(),me=V.getActiveCubeFace(),Ie=V.getActiveMipmapLevel();V.setRenderTarget(Xt),V.getClearColor(gt),vt=V.getClearAlpha(),vt<1&&V.setClearColor(16777215,.5),V.clear(),Ze&&Me.render(yt);const Fe=V.toneMapping;V.toneMapping=jl;const Oe=Tt.viewport;if(Tt.viewport!==void 0&&(Tt.viewport=void 0),M.setupLightsView(Tt),ee===!0&&oe.setGlobalState(V.clippingPlanes,Tt),ws(K,yt,Tt),Kt.updateMultisampleRenderTarget(Xt),Kt.updateRenderTargetMipmap(Xt),Ht.has("WEBGL_multisampled_render_to_texture")===!1){let ln=!1;for(let Nn=0,Kn=lt.length;Nn<Kn;Nn++){const mn=lt[Nn],je=mn.object,ve=mn.geometry,Gn=mn.material,yn=mn.group;if(Gn.side===kl&&je.layers.test(Tt.layers)){const sn=Gn.side;Gn.side=nr,Gn.needsUpdate=!0,wi(je,yt,Tt,ve,Gn,yn),Gn.side=sn,Gn.needsUpdate=!0,ln=!0}}ln===!0&&(Kt.updateMultisampleRenderTarget(Xt),Kt.updateRenderTargetMipmap(Xt))}V.setRenderTarget(xe,me,Ie),V.setClearColor(gt,vt),Oe!==void 0&&(Tt.viewport=Oe),V.toneMapping=Fe}function ws(K,lt,yt){const Tt=lt.isScene===!0?lt.overrideMaterial:null;for(let ct=0,Xt=K.length;ct<Xt;ct++){const ce=K[ct],xe=ce.object,me=ce.geometry,Ie=ce.group;let Fe=ce.material;Fe.allowOverride===!0&&Tt!==null&&(Fe=Tt),xe.layers.test(yt.layers)&&wi(xe,lt,yt,me,Fe,Ie)}}function wi(K,lt,yt,Tt,ct,Xt){K.onBeforeRender(V,lt,yt,Tt,ct,Xt),K.modelViewMatrix.multiplyMatrices(yt.matrixWorldInverse,K.matrixWorld),K.normalMatrix.getNormalMatrix(K.modelViewMatrix),ct.onBeforeRender(V,lt,yt,Tt,K,Xt),ct.transparent===!0&&ct.side===kl&&ct.forceSinglePass===!1?(ct.side=nr,ct.needsUpdate=!0,V.renderBufferDirect(yt,lt,Tt,ct,K,Xt),ct.side=ku,ct.needsUpdate=!0,V.renderBufferDirect(yt,lt,Tt,ct,K,Xt),ct.side=kl):V.renderBufferDirect(yt,lt,Tt,ct,K,Xt),K.onAfterRender(V,lt,yt,Tt,ct,Xt)}function Zi(K,lt,yt){lt.isScene!==!0&&(lt=Ee);const Tt=kt.get(K),ct=M.state.lights,Xt=M.state.shadowsArray,ce=ct.state.version,xe=Dt.getParameters(K,ct.state,Xt,lt,yt),me=Dt.getProgramCacheKey(xe);let Ie=Tt.programs;Tt.environment=K.isMeshStandardMaterial?lt.environment:null,Tt.fog=lt.fog,Tt.envMap=(K.isMeshStandardMaterial?Ye:ze).get(K.envMap||Tt.environment),Tt.envMapRotation=Tt.environment!==null&&K.envMap===null?lt.environmentRotation:K.envMapRotation,Ie===void 0&&(K.addEventListener("dispose",Bt),Ie=new Map,Tt.programs=Ie);let Fe=Ie.get(me);if(Fe!==void 0){if(Tt.currentProgram===Fe&&Tt.lightsStateVersion===ce)return xi(K,xe),Fe}else xe.uniforms=Dt.getUniforms(K),K.onBeforeCompile(xe,V),Fe=Dt.acquireProgram(xe,me),Ie.set(me,Fe),Tt.uniforms=xe.uniforms;const Oe=Tt.uniforms;return(!K.isShaderMaterial&&!K.isRawShaderMaterial||K.clipping===!0)&&(Oe.clippingPlanes=oe.uniform),xi(K,xe),Tt.needsLights=Qu(K),Tt.lightsStateVersion=ce,Tt.needsLights&&(Oe.ambientLightColor.value=ct.state.ambient,Oe.lightProbe.value=ct.state.probe,Oe.directionalLights.value=ct.state.directional,Oe.directionalLightShadows.value=ct.state.directionalShadow,Oe.spotLights.value=ct.state.spot,Oe.spotLightShadows.value=ct.state.spotShadow,Oe.rectAreaLights.value=ct.state.rectArea,Oe.ltc_1.value=ct.state.rectAreaLTC1,Oe.ltc_2.value=ct.state.rectAreaLTC2,Oe.pointLights.value=ct.state.point,Oe.pointLightShadows.value=ct.state.pointShadow,Oe.hemisphereLights.value=ct.state.hemi,Oe.directionalShadowMap.value=ct.state.directionalShadowMap,Oe.directionalShadowMatrix.value=ct.state.directionalShadowMatrix,Oe.spotShadowMap.value=ct.state.spotShadowMap,Oe.spotLightMatrix.value=ct.state.spotLightMatrix,Oe.spotLightMap.value=ct.state.spotLightMap,Oe.pointShadowMap.value=ct.state.pointShadowMap,Oe.pointShadowMatrix.value=ct.state.pointShadowMatrix),Tt.currentProgram=Fe,Tt.uniformsList=null,Fe}function on(K){if(K.uniformsList===null){const lt=K.currentProgram.getUniforms();K.uniformsList=Xv.seqWithValue(lt.seq,K.uniforms)}return K.uniformsList}function xi(K,lt){const yt=kt.get(K);yt.outputColorSpace=lt.outputColorSpace,yt.batching=lt.batching,yt.batchingColor=lt.batchingColor,yt.instancing=lt.instancing,yt.instancingColor=lt.instancingColor,yt.instancingMorph=lt.instancingMorph,yt.skinning=lt.skinning,yt.morphTargets=lt.morphTargets,yt.morphNormals=lt.morphNormals,yt.morphColors=lt.morphColors,yt.morphTargetsCount=lt.morphTargetsCount,yt.numClippingPlanes=lt.numClippingPlanes,yt.numIntersection=lt.numClipIntersection,yt.vertexAlphas=lt.vertexAlphas,yt.vertexTangents=lt.vertexTangents,yt.toneMapping=lt.toneMapping}function aa(K,lt,yt,Tt,ct){lt.isScene!==!0&&(lt=Ee),Kt.resetTextureUnits();const Xt=lt.fog,ce=Tt.isMeshStandardMaterial?lt.environment:null,xe=P===null?V.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:ah,me=(Tt.isMeshStandardMaterial?Ye:ze).get(Tt.envMap||ce),Ie=Tt.vertexColors===!0&&!!yt.attributes.color&&yt.attributes.color.itemSize===4,Fe=!!yt.attributes.tangent&&(!!Tt.normalMap||Tt.anisotropy>0),Oe=!!yt.morphAttributes.position,ln=!!yt.morphAttributes.normal,Nn=!!yt.morphAttributes.color;let Kn=jl;Tt.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(Kn=V.toneMapping);const mn=yt.morphAttributes.position||yt.morphAttributes.normal||yt.morphAttributes.color,je=mn!==void 0?mn.length:0,ve=kt.get(Tt),Gn=M.state.lights;if(ee===!0&&(xt===!0||K!==U)){const Ci=K===U&&Tt.id===D;oe.setState(Tt,K,Ci)}let yn=!1;Tt.version===ve.__version?(ve.needsLights&&ve.lightsStateVersion!==Gn.state.version||ve.outputColorSpace!==xe||ct.isBatchedMesh&&ve.batching===!1||!ct.isBatchedMesh&&ve.batching===!0||ct.isBatchedMesh&&ve.batchingColor===!0&&ct.colorTexture===null||ct.isBatchedMesh&&ve.batchingColor===!1&&ct.colorTexture!==null||ct.isInstancedMesh&&ve.instancing===!1||!ct.isInstancedMesh&&ve.instancing===!0||ct.isSkinnedMesh&&ve.skinning===!1||!ct.isSkinnedMesh&&ve.skinning===!0||ct.isInstancedMesh&&ve.instancingColor===!0&&ct.instanceColor===null||ct.isInstancedMesh&&ve.instancingColor===!1&&ct.instanceColor!==null||ct.isInstancedMesh&&ve.instancingMorph===!0&&ct.morphTexture===null||ct.isInstancedMesh&&ve.instancingMorph===!1&&ct.morphTexture!==null||ve.envMap!==me||Tt.fog===!0&&ve.fog!==Xt||ve.numClippingPlanes!==void 0&&(ve.numClippingPlanes!==oe.numPlanes||ve.numIntersection!==oe.numIntersection)||ve.vertexAlphas!==Ie||ve.vertexTangents!==Fe||ve.morphTargets!==Oe||ve.morphNormals!==ln||ve.morphColors!==Nn||ve.toneMapping!==Kn||ve.morphTargetsCount!==je)&&(yn=!0):(yn=!0,ve.__version=Tt.version);let sn=ve.currentProgram;yn===!0&&(sn=Zi(Tt,lt,ct));let ks=!1,ui=!1,oa=!1;const vn=sn.getUniforms(),Xi=ve.uniforms;if(Pt.useProgram(sn.program)&&(ks=!0,ui=!0,oa=!0),Tt.id!==D&&(D=Tt.id,ui=!0),ks||U!==K){Pt.buffers.depth.getReversed()&&K.reversedDepth!==!0&&(K._reversedDepth=!0,K.updateProjectionMatrix()),vn.setValue(it,"projectionMatrix",K.projectionMatrix),vn.setValue(it,"viewMatrix",K.matrixWorldInverse);const Ei=vn.map.cameraPosition;Ei!==void 0&&Ei.setValue(it,ae.setFromMatrixPosition(K.matrixWorld)),Vt.logarithmicDepthBuffer&&vn.setValue(it,"logDepthBufFC",2/(Math.log(K.far+1)/Math.LN2)),(Tt.isMeshPhongMaterial||Tt.isMeshToonMaterial||Tt.isMeshLambertMaterial||Tt.isMeshBasicMaterial||Tt.isMeshStandardMaterial||Tt.isShaderMaterial)&&vn.setValue(it,"isOrthographic",K.isOrthographicCamera===!0),U!==K&&(U=K,ui=!0,oa=!0)}if(ct.isSkinnedMesh){vn.setOptional(it,ct,"bindMatrix"),vn.setOptional(it,ct,"bindMatrixInverse");const Ci=ct.skeleton;Ci&&(Ci.boneTexture===null&&Ci.computeBoneTexture(),vn.setValue(it,"boneTexture",Ci.boneTexture,Kt))}ct.isBatchedMesh&&(vn.setOptional(it,ct,"batchingTexture"),vn.setValue(it,"batchingTexture",ct._matricesTexture,Kt),vn.setOptional(it,ct,"batchingIdTexture"),vn.setValue(it,"batchingIdTexture",ct._indirectTexture,Kt),vn.setOptional(it,ct,"batchingColorTexture"),ct._colorsTexture!==null&&vn.setValue(it,"batchingColorTexture",ct._colorsTexture,Kt));const as=yt.morphAttributes;if((as.position!==void 0||as.normal!==void 0||as.color!==void 0)&&Yt.update(ct,yt,sn),(ui||ve.receiveShadow!==ct.receiveShadow)&&(ve.receiveShadow=ct.receiveShadow,vn.setValue(it,"receiveShadow",ct.receiveShadow)),Tt.isMeshGouraudMaterial&&Tt.envMap!==null&&(Xi.envMap.value=me,Xi.flipEnvMap.value=me.isCubeTexture&&me.isRenderTargetTexture===!1?-1:1),Tt.isMeshStandardMaterial&&Tt.envMap===null&&lt.environment!==null&&(Xi.envMapIntensity.value=lt.environmentIntensity),ui&&(vn.setValue(it,"toneMappingExposure",V.toneMappingExposure),ve.needsLights&&To(Xi,oa),Xt&&Tt.fog===!0&&Qt.refreshFogUniforms(Xi,Xt),Qt.refreshMaterialUniforms(Xi,Tt,nt,et,M.state.transmissionRenderTarget[K.id]),Xv.upload(it,on(ve),Xi,Kt)),Tt.isShaderMaterial&&Tt.uniformsNeedUpdate===!0&&(Xv.upload(it,on(ve),Xi,Kt),Tt.uniformsNeedUpdate=!1),Tt.isSpriteMaterial&&vn.setValue(it,"center",ct.center),vn.setValue(it,"modelViewMatrix",ct.modelViewMatrix),vn.setValue(it,"normalMatrix",ct.normalMatrix),vn.setValue(it,"modelMatrix",ct.matrixWorld),Tt.isShaderMaterial||Tt.isRawShaderMaterial){const Ci=Tt.uniformsGroups;for(let Ei=0,bo=Ci.length;Ei<bo;Ei++){const Pi=Ci[Ei];ke.update(Pi,sn),ke.bind(Pi,sn)}}return sn}function To(K,lt){K.ambientLightColor.needsUpdate=lt,K.lightProbe.needsUpdate=lt,K.directionalLights.needsUpdate=lt,K.directionalLightShadows.needsUpdate=lt,K.pointLights.needsUpdate=lt,K.pointLightShadows.needsUpdate=lt,K.spotLights.needsUpdate=lt,K.spotLightShadows.needsUpdate=lt,K.rectAreaLights.needsUpdate=lt,K.hemisphereLights.needsUpdate=lt}function Qu(K){return K.isMeshLambertMaterial||K.isMeshToonMaterial||K.isMeshPhongMaterial||K.isMeshStandardMaterial||K.isShadowMaterial||K.isShaderMaterial&&K.lights===!0}this.getActiveCubeFace=function(){return q},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(K,lt,yt){const Tt=kt.get(K);Tt.__autoAllocateDepthBuffer=K.resolveDepthBuffer===!1,Tt.__autoAllocateDepthBuffer===!1&&(Tt.__useRenderToTexture=!1),kt.get(K.texture).__webglTexture=lt,kt.get(K.depthTexture).__webglTexture=Tt.__autoAllocateDepthBuffer?void 0:yt,Tt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(K,lt){const yt=kt.get(K);yt.__webglFramebuffer=lt,yt.__useDefaultFramebuffer=lt===void 0};const Zu=it.createFramebuffer();this.setRenderTarget=function(K,lt=0,yt=0){P=K,q=lt,L=yt;let Tt=!0,ct=null,Xt=!1,ce=!1;if(K){const me=kt.get(K);if(me.__useDefaultFramebuffer!==void 0)Pt.bindFramebuffer(it.FRAMEBUFFER,null),Tt=!1;else if(me.__webglFramebuffer===void 0)Kt.setupRenderTarget(K);else if(me.__hasExternalTextures)Kt.rebindTextures(K,kt.get(K.texture).__webglTexture,kt.get(K.depthTexture).__webglTexture);else if(K.depthBuffer){const Oe=K.depthTexture;if(me.__boundDepthTexture!==Oe){if(Oe!==null&&kt.has(Oe)&&(K.width!==Oe.image.width||K.height!==Oe.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Kt.setupDepthRenderbuffer(K)}}const Ie=K.texture;(Ie.isData3DTexture||Ie.isDataArrayTexture||Ie.isCompressedArrayTexture)&&(ce=!0);const Fe=kt.get(K).__webglFramebuffer;K.isWebGLCubeRenderTarget?(Array.isArray(Fe[lt])?ct=Fe[lt][yt]:ct=Fe[lt],Xt=!0):K.samples>0&&Kt.useMultisampledRTT(K)===!1?ct=kt.get(K).__webglMultisampledFramebuffer:Array.isArray(Fe)?ct=Fe[yt]:ct=Fe,F.copy(K.viewport),Y.copy(K.scissor),G=K.scissorTest}else F.copy(J).multiplyScalar(nt).floor(),Y.copy(ut).multiplyScalar(nt).floor(),G=Ot;if(yt!==0&&(ct=Zu),Pt.bindFramebuffer(it.FRAMEBUFFER,ct)&&Tt&&Pt.drawBuffers(K,ct),Pt.viewport(F),Pt.scissor(Y),Pt.setScissorTest(G),Xt){const me=kt.get(K.texture);it.framebufferTexture2D(it.FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_CUBE_MAP_POSITIVE_X+lt,me.__webglTexture,yt)}else if(ce){const me=lt;for(let Ie=0;Ie<K.textures.length;Ie++){const Fe=kt.get(K.textures[Ie]);it.framebufferTextureLayer(it.FRAMEBUFFER,it.COLOR_ATTACHMENT0+Ie,Fe.__webglTexture,yt,me)}}else if(K!==null&&yt!==0){const me=kt.get(K.texture);it.framebufferTexture2D(it.FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_2D,me.__webglTexture,yt)}D=-1},this.readRenderTargetPixels=function(K,lt,yt,Tt,ct,Xt,ce,xe=0){if(!(K&&K.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let me=kt.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&ce!==void 0&&(me=me[ce]),me){Pt.bindFramebuffer(it.FRAMEBUFFER,me);try{const Ie=K.textures[xe],Fe=Ie.format,Oe=Ie.type;if(!Vt.textureFormatReadable(Fe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Vt.textureTypeReadable(Oe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}lt>=0&&lt<=K.width-Tt&&yt>=0&&yt<=K.height-ct&&(K.textures.length>1&&it.readBuffer(it.COLOR_ATTACHMENT0+xe),it.readPixels(lt,yt,Tt,ct,pe.convert(Fe),pe.convert(Oe),Xt))}finally{const Ie=P!==null?kt.get(P).__webglFramebuffer:null;Pt.bindFramebuffer(it.FRAMEBUFFER,Ie)}}},this.readRenderTargetPixelsAsync=async function(K,lt,yt,Tt,ct,Xt,ce,xe=0){if(!(K&&K.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let me=kt.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&ce!==void 0&&(me=me[ce]),me)if(lt>=0&&lt<=K.width-Tt&&yt>=0&&yt<=K.height-ct){Pt.bindFramebuffer(it.FRAMEBUFFER,me);const Ie=K.textures[xe],Fe=Ie.format,Oe=Ie.type;if(!Vt.textureFormatReadable(Fe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Vt.textureTypeReadable(Oe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const ln=it.createBuffer();it.bindBuffer(it.PIXEL_PACK_BUFFER,ln),it.bufferData(it.PIXEL_PACK_BUFFER,Xt.byteLength,it.STREAM_READ),K.textures.length>1&&it.readBuffer(it.COLOR_ATTACHMENT0+xe),it.readPixels(lt,yt,Tt,ct,pe.convert(Fe),pe.convert(Oe),0);const Nn=P!==null?kt.get(P).__webglFramebuffer:null;Pt.bindFramebuffer(it.FRAMEBUFFER,Nn);const Kn=it.fenceSync(it.SYNC_GPU_COMMANDS_COMPLETE,0);return it.flush(),await rU(it,Kn,4),it.bindBuffer(it.PIXEL_PACK_BUFFER,ln),it.getBufferSubData(it.PIXEL_PACK_BUFFER,0,Xt),it.deleteBuffer(ln),it.deleteSync(Kn),Xt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(K,lt=null,yt=0){const Tt=Math.pow(2,-yt),ct=Math.floor(K.image.width*Tt),Xt=Math.floor(K.image.height*Tt),ce=lt!==null?lt.x:0,xe=lt!==null?lt.y:0;Kt.setTexture2D(K,0),it.copyTexSubImage2D(it.TEXTURE_2D,yt,0,0,ce,xe,ct,Xt),Pt.unbindTexture()};const rl=it.createFramebuffer(),ra=it.createFramebuffer();this.copyTextureToTexture=function(K,lt,yt=null,Tt=null,ct=0,Xt=null){Xt===null&&(ct!==0?(n_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Xt=ct,ct=0):Xt=0);let ce,xe,me,Ie,Fe,Oe,ln,Nn,Kn;const mn=K.isCompressedTexture?K.mipmaps[Xt]:K.image;if(yt!==null)ce=yt.max.x-yt.min.x,xe=yt.max.y-yt.min.y,me=yt.isBox3?yt.max.z-yt.min.z:1,Ie=yt.min.x,Fe=yt.min.y,Oe=yt.isBox3?yt.min.z:0;else{const as=Math.pow(2,-ct);ce=Math.floor(mn.width*as),xe=Math.floor(mn.height*as),K.isDataArrayTexture?me=mn.depth:K.isData3DTexture?me=Math.floor(mn.depth*as):me=1,Ie=0,Fe=0,Oe=0}Tt!==null?(ln=Tt.x,Nn=Tt.y,Kn=Tt.z):(ln=0,Nn=0,Kn=0);const je=pe.convert(lt.format),ve=pe.convert(lt.type);let Gn;lt.isData3DTexture?(Kt.setTexture3D(lt,0),Gn=it.TEXTURE_3D):lt.isDataArrayTexture||lt.isCompressedArrayTexture?(Kt.setTexture2DArray(lt,0),Gn=it.TEXTURE_2D_ARRAY):(Kt.setTexture2D(lt,0),Gn=it.TEXTURE_2D),it.pixelStorei(it.UNPACK_FLIP_Y_WEBGL,lt.flipY),it.pixelStorei(it.UNPACK_PREMULTIPLY_ALPHA_WEBGL,lt.premultiplyAlpha),it.pixelStorei(it.UNPACK_ALIGNMENT,lt.unpackAlignment);const yn=it.getParameter(it.UNPACK_ROW_LENGTH),sn=it.getParameter(it.UNPACK_IMAGE_HEIGHT),ks=it.getParameter(it.UNPACK_SKIP_PIXELS),ui=it.getParameter(it.UNPACK_SKIP_ROWS),oa=it.getParameter(it.UNPACK_SKIP_IMAGES);it.pixelStorei(it.UNPACK_ROW_LENGTH,mn.width),it.pixelStorei(it.UNPACK_IMAGE_HEIGHT,mn.height),it.pixelStorei(it.UNPACK_SKIP_PIXELS,Ie),it.pixelStorei(it.UNPACK_SKIP_ROWS,Fe),it.pixelStorei(it.UNPACK_SKIP_IMAGES,Oe);const vn=K.isDataArrayTexture||K.isData3DTexture,Xi=lt.isDataArrayTexture||lt.isData3DTexture;if(K.isDepthTexture){const as=kt.get(K),Ci=kt.get(lt),Ei=kt.get(as.__renderTarget),bo=kt.get(Ci.__renderTarget);Pt.bindFramebuffer(it.READ_FRAMEBUFFER,Ei.__webglFramebuffer),Pt.bindFramebuffer(it.DRAW_FRAMEBUFFER,bo.__webglFramebuffer);for(let Pi=0;Pi<me;Pi++)vn&&(it.framebufferTextureLayer(it.READ_FRAMEBUFFER,it.COLOR_ATTACHMENT0,kt.get(K).__webglTexture,ct,Oe+Pi),it.framebufferTextureLayer(it.DRAW_FRAMEBUFFER,it.COLOR_ATTACHMENT0,kt.get(lt).__webglTexture,Xt,Kn+Pi)),it.blitFramebuffer(Ie,Fe,ce,xe,ln,Nn,ce,xe,it.DEPTH_BUFFER_BIT,it.NEAREST);Pt.bindFramebuffer(it.READ_FRAMEBUFFER,null),Pt.bindFramebuffer(it.DRAW_FRAMEBUFFER,null)}else if(ct!==0||K.isRenderTargetTexture||kt.has(K)){const as=kt.get(K),Ci=kt.get(lt);Pt.bindFramebuffer(it.READ_FRAMEBUFFER,rl),Pt.bindFramebuffer(it.DRAW_FRAMEBUFFER,ra);for(let Ei=0;Ei<me;Ei++)vn?it.framebufferTextureLayer(it.READ_FRAMEBUFFER,it.COLOR_ATTACHMENT0,as.__webglTexture,ct,Oe+Ei):it.framebufferTexture2D(it.READ_FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_2D,as.__webglTexture,ct),Xi?it.framebufferTextureLayer(it.DRAW_FRAMEBUFFER,it.COLOR_ATTACHMENT0,Ci.__webglTexture,Xt,Kn+Ei):it.framebufferTexture2D(it.DRAW_FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_2D,Ci.__webglTexture,Xt),ct!==0?it.blitFramebuffer(Ie,Fe,ce,xe,ln,Nn,ce,xe,it.COLOR_BUFFER_BIT,it.NEAREST):Xi?it.copyTexSubImage3D(Gn,Xt,ln,Nn,Kn+Ei,Ie,Fe,ce,xe):it.copyTexSubImage2D(Gn,Xt,ln,Nn,Ie,Fe,ce,xe);Pt.bindFramebuffer(it.READ_FRAMEBUFFER,null),Pt.bindFramebuffer(it.DRAW_FRAMEBUFFER,null)}else Xi?K.isDataTexture||K.isData3DTexture?it.texSubImage3D(Gn,Xt,ln,Nn,Kn,ce,xe,me,je,ve,mn.data):lt.isCompressedArrayTexture?it.compressedTexSubImage3D(Gn,Xt,ln,Nn,Kn,ce,xe,me,je,mn.data):it.texSubImage3D(Gn,Xt,ln,Nn,Kn,ce,xe,me,je,ve,mn):K.isDataTexture?it.texSubImage2D(it.TEXTURE_2D,Xt,ln,Nn,ce,xe,je,ve,mn.data):K.isCompressedTexture?it.compressedTexSubImage2D(it.TEXTURE_2D,Xt,ln,Nn,mn.width,mn.height,je,mn.data):it.texSubImage2D(it.TEXTURE_2D,Xt,ln,Nn,ce,xe,je,ve,mn);it.pixelStorei(it.UNPACK_ROW_LENGTH,yn),it.pixelStorei(it.UNPACK_IMAGE_HEIGHT,sn),it.pixelStorei(it.UNPACK_SKIP_PIXELS,ks),it.pixelStorei(it.UNPACK_SKIP_ROWS,ui),it.pixelStorei(it.UNPACK_SKIP_IMAGES,oa),Xt===0&&lt.generateMipmaps&&it.generateMipmap(Gn),Pt.unbindTexture()},this.initRenderTarget=function(K){kt.get(K).__webglFramebuffer===void 0&&Kt.setupRenderTarget(K)},this.initTexture=function(K){K.isCubeTexture?Kt.setTextureCube(K,0):K.isData3DTexture?Kt.setTexture3D(K,0):K.isDataArrayTexture||K.isCompressedArrayTexture?Kt.setTexture2DArray(K,0):Kt.setTexture2D(K,0),Pt.unbindTexture()},this.resetState=function(){q=0,L=0,P=null,Pt.reset(),fe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return kr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=Hn._getDrawingBufferColorSpace(t),e.unpackColorSpace=Hn._getUnpackColorSpace()}}const TB=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:ZT,AddEquation:Kc,AddOperation:aw,AdditiveAnimationBlendMode:rb,AdditiveBlending:oT,AgXToneMapping:cw,AlphaFormat:ib,AlwaysCompare:Mw,AlwaysDepth:n0,AlwaysStencilFunc:hT,AmbientLight:vC,AnimationAction:wC,AnimationClip:l_,AnimationLoader:UO,AnimationMixer:lL,AnimationObjectGroup:rL,AnimationUtils:CO,ArcCurve:qw,ArrayCamera:MC,ArrowHelper:OL,AttachedBindMode:cT,Audio:AC,AudioAnalyser:QO,AudioContext:Ib,AudioListener:YO,AudioLoader:qO,AxesHelper:LL,BackSide:nr,BasicDepthPacking:gw,BasicShadowMap:B2,BatchedMesh:Bw,Bone:pb,BooleanKeyframeTrack:Vf,Box2:yL,Box3:Da,Box3Helper:IL,BoxGeometry:zf,BoxHelper:NL,BufferAttribute:pi,BufferGeometry:_n,BufferGeometryLoader:bC,ByteType:$T,Cache:Xl,Camera:SS,CameraHelper:DL,CanvasTexture:JU,CapsuleGeometry:RS,CatmullRomCurve3:Xw,CineonToneMapping:lw,CircleGeometry:wS,ClampToEdgeWrapping:So,Clock:Ub,Color:Te,ColorKeyframeTrack:Cb,ColorManagement:Hn,CompressedArrayTexture:QU,CompressedCubeTexture:ZU,CompressedTexture:AS,CompressedTextureLoader:OO,ConeGeometry:T_,ConstantAlphaFactor:nw,ConstantColorFactor:tw,Controls:zL,CubeCamera:Iw,CubeReflectionMapping:qu,CubeRefractionMapping:sh,CubeTexture:x_,CubeTextureLoader:LO,CubeUVReflectionMapping:Gp,CubicBezierCurve:vb,CubicBezierCurve3:jw,CubicInterpolant:hC,CullFaceBack:rT,CullFaceFront:V2,CullFaceFrontBack:aI,CullFaceNone:z2,Curve:al,CurvePath:Ww,CustomBlending:F2,CustomToneMapping:uw,CylinderGeometry:E_,Cylindrical:_L,Data3DTexture:vS,DataArrayTexture:yS,DataTexture:Yl,DataTextureLoader:PO,DataUtils:xU,DecrementStencilOp:vI,DecrementWrapStencilOp:xI,DefaultLoadingManager:pC,DepthFormat:Mp,DepthStencilFormat:Ap,DepthTexture:gb,DetachedBindMode:fw,DirectionalLight:yC,DirectionalLightHelper:CL,DiscreteInterpolant:fC,DodecahedronGeometry:CS,DoubleSide:kl,DstAlphaFactor:K2,DstColorFactor:Z2,DynamicCopyUsage:PI,DynamicDrawUsage:DI,DynamicReadUsage:UI,EdgesGeometry:kw,EllipseCurve:DS,EqualCompare:xw,EqualDepth:s0,EqualStencilFunc:MI,EquirectangularReflectionMapping:Yg,EquirectangularRefractionMapping:Wg,Euler:Xr,EventDispatcher:tu,ExternalTexture:_b,ExtrudeGeometry:NS,FileLoader:ju,Float16BufferAttribute:wU,Float32BufferAttribute:Ue,FloatType:xr,Fog:ES,FogExp2:xS,FramebufferTexture:KU,FrontSide:ku,Frustum:Xp,FrustumArray:MS,GLBufferAttribute:dL,GLSL1:VI,GLSL3:fT,GreaterCompare:Ew,GreaterDepth:r0,GreaterEqualCompare:bw,GreaterEqualDepth:a0,GreaterEqualStencilFunc:CI,GreaterStencilFunc:RI,GridHelper:RL,Group:gp,HalfFloatType:kp,HemisphereLight:mC,HemisphereLightHelper:AL,IcosahedronGeometry:IS,ImageBitmapLoader:kO,ImageLoader:u_,ImageUtils:ww,IncrementStencilOp:yI,IncrementWrapStencilOp:SI,InstancedBufferAttribute:Np,InstancedBufferGeometry:TC,InstancedInterleavedBuffer:fL,InstancedMesh:Vw,Int16BufferAttribute:AU,Int32BufferAttribute:RU,Int8BufferAttribute:TU,IntType:hS,InterleavedBuffer:TS,InterleavedBufferAttribute:If,Interpolant:A_,InterpolateDiscrete:Zg,InterpolateLinear:P0,InterpolateSmooth:kv,InterpolationSamplingMode:HI,InterpolationSamplingType:FI,InvertStencilOp:EI,KeepStencilOp:Sf,KeyframeTrack:Eo,LOD:Pw,LatheGeometry:US,Layers:Cp,LessCompare:Sw,LessDepth:i0,LessEqualCompare:ob,LessEqualDepth:Nf,LessEqualStencilFunc:AI,LessStencilFunc:bI,Light:gh,LightProbe:EC,Line:rh,Line3:xL,LineBasicMaterial:ir,LineCurve:Sb,LineCurve3:Yw,LineDashedMaterial:lC,LineLoop:Fw,LineSegments:eu,LinearFilter:bs,LinearInterpolant:wb,LinearMipMapLinearFilter:uI,LinearMipMapNearestFilter:lI,LinearMipmapLinearFilter:ql,LinearMipmapNearestFilter:Ug,LinearSRGBColorSpace:ah,LinearToneMapping:rw,LinearTransfer:$g,Loader:Tr,LoaderUtils:_T,LoadingManager:Db,LoopOnce:dw,LoopPingPong:mw,LoopRepeat:pw,MOUSE:iI,Material:Na,MaterialLoader:FS,MathUtils:sU,Matrix2:zb,Matrix3:pn,Matrix4:tn,MaxEquation:q2,Mesh:ms,MeshBasicMaterial:ph,MeshDepthMaterial:Mb,MeshDistanceMaterial:Ab,MeshLambertMaterial:rC,MeshMatcapMaterial:oC,MeshNormalMaterial:aC,MeshPhongMaterial:iC,MeshPhysicalMaterial:nC,MeshStandardMaterial:bb,MeshToonMaterial:sC,MinEquation:k2,MirroredRepeatWrapping:Qg,MixOperation:sw,MultiplyBlending:uT,MultiplyOperation:v_,NearestFilter:na,NearestMipMapLinearFilter:oI,NearestMipMapNearestFilter:rI,NearestMipmapLinearFilter:pp,NearestMipmapNearestFilter:JT,NeutralToneMapping:hw,NeverCompare:vw,NeverDepth:e0,NeverStencilFunc:TI,NoBlending:Fu,NoColorSpace:Vu,NoToneMapping:jl,NormalAnimationBlendMode:_S,NormalBlending:wf,NotEqualCompare:Tw,NotEqualDepth:o0,NotEqualStencilFunc:wI,NumberKeyframeTrack:r_,Object3D:Wn,ObjectLoader:HO,ObjectSpaceNormalMap:yw,OctahedronGeometry:b_,OneFactor:j2,OneMinusConstantAlphaFactor:iw,OneMinusConstantColorFactor:ew,OneMinusDstAlphaFactor:Q2,OneMinusDstColorFactor:J2,OneMinusSrcAlphaFactor:t0,OneMinusSrcColorFactor:W2,OrthographicCamera:w_,PCFShadowMap:uS,PCFSoftShadowMap:Ig,PMREMGenerator:ST,Path:F0,PerspectiveCamera:Bs,Plane:Wc,PlaneGeometry:jp,PlaneHelper:UL,PointLight:_C,PointLightHelper:bL,Points:Hw,PointsMaterial:mb,PolarGridHelper:wL,PolyhedronGeometry:mh,PositionalAudio:KO,PropertyBinding:jn,PropertyMixer:RC,QuadraticBezierCurve:xb,QuadraticBezierCurve3:Eb,Quaternion:Er,QuaternionKeyframeTrack:R_,QuaternionLinearInterpolant:dC,RED_GREEN_RGTC2_Format:O0,RED_RGTC1_Format:I0,REVISION:lS,RGBADepthPacking:_w,RGBAFormat:Ca,RGBAIntegerFormat:gS,RGBA_ASTC_10x10_Format:A0,RGBA_ASTC_10x5_Format:T0,RGBA_ASTC_10x6_Format:b0,RGBA_ASTC_10x8_Format:M0,RGBA_ASTC_12x10_Format:R0,RGBA_ASTC_12x12_Format:w0,RGBA_ASTC_4x4_Format:m0,RGBA_ASTC_5x4_Format:g0,RGBA_ASTC_5x5_Format:_0,RGBA_ASTC_6x5_Format:y0,RGBA_ASTC_6x6_Format:v0,RGBA_ASTC_8x5_Format:S0,RGBA_ASTC_8x6_Format:x0,RGBA_ASTC_8x8_Format:E0,RGBA_BPTC_Format:C0,RGBA_ETC2_EAC_Format:p0,RGBA_PVRTC_2BPPV1_Format:h0,RGBA_PVRTC_4BPPV1_Format:c0,RGBA_S3TC_DXT1_Format:Lg,RGBA_S3TC_DXT3_Format:Pg,RGBA_S3TC_DXT5_Format:zg,RGBDepthPacking:pI,RGBFormat:sb,RGBIntegerFormat:cI,RGB_BPTC_SIGNED_Format:D0,RGB_BPTC_UNSIGNED_Format:N0,RGB_ETC1_Format:f0,RGB_ETC2_Format:d0,RGB_PVRTC_2BPPV1_Format:u0,RGB_PVRTC_4BPPV1_Format:l0,RGB_S3TC_DXT1_Format:Og,RGDepthPacking:mI,RGFormat:ab,RGIntegerFormat:mS,RawShaderMaterial:eC,Ray:qp,Raycaster:CC,RectAreaLight:SC,RedFormat:pS,RedIntegerFormat:S_,ReinhardToneMapping:ow,RenderTarget:ub,RenderTarget3D:uL,RepeatWrapping:Kg,ReplaceStencilOp:_I,ReverseSubtractEquation:G2,RingGeometry:OS,SIGNED_RED_GREEN_RGTC2_Format:L0,SIGNED_RED_RGTC1_Format:U0,SRGBColorSpace:Ra,SRGBTransfer:li,Scene:fb,ShaderChunk:En,ShaderLib:tl,ShaderMaterial:il,ShadowMaterial:tC,Shape:Df,ShapeGeometry:LS,ShapePath:PL,ShapeUtils:el,ShortType:tb,Skeleton:bS,SkeletonHelper:TL,SkinnedMesh:zw,Source:Zc,Sphere:ia,SphereGeometry:M_,Spherical:gL,SphericalHarmonics3:xC,SplineCurve:Tb,SpotLight:gC,SpotLightHelper:EL,Sprite:Lw,SpriteMaterial:db,SrcAlphaFactor:$v,SrcAlphaSaturateFactor:$2,SrcColorFactor:Y2,StaticCopyUsage:LI,StaticDrawUsage:t_,StaticReadUsage:II,StereoCamera:XO,StreamCopyUsage:zI,StreamDrawUsage:NI,StreamReadUsage:OI,StringKeyframeTrack:Bf,SubtractEquation:H2,SubtractiveBlending:lT,TOUCH:sI,TangentSpaceNormalMap:dh,TetrahedronGeometry:PS,Texture:Qi,TextureLoader:zO,TextureUtils:GL,Timer:pL,TimestampQuery:BI,TorusGeometry:zS,TorusKnotGeometry:VS,Triangle:Sr,TriangleFanDrawMode:dI,TriangleStripDrawMode:fI,TrianglesDrawMode:hI,TubeGeometry:BS,UVMapping:cS,Uint16BufferAttribute:cb,Uint32BufferAttribute:hb,Uint8BufferAttribute:bU,Uint8ClampedBufferAttribute:MU,Uniform:Pb,UniformsGroup:hL,UniformsLib:_e,UniformsUtils:Nw,UnsignedByteType:xo,UnsignedInt101111Type:nb,UnsignedInt248Type:bp,UnsignedInt5999Type:eb,UnsignedIntType:Xu,UnsignedShort4444Type:fS,UnsignedShort5551Type:dS,UnsignedShortType:Tp,VSMShadowMap:$o,Vector2:Jt,Vector3:tt,Vector4:Yn,VectorKeyframeTrack:o_,VideoFrameTexture:WU,VideoTexture:Gw,WebGL3DRenderTarget:hU,WebGLArrayRenderTarget:cU,WebGLCoordinateSystem:kr,WebGLCubeRenderTarget:Uw,WebGLRenderTarget:Jl,WebGLRenderer:zC,WebGLUtils:PC,WebGPUCoordinateSystem:Rp,WebXRController:qv,WireframeGeometry:$w,WrapAroundEnding:Jg,ZeroCurvatureEnding:bf,ZeroFactor:X2,ZeroSlopeEnding:Mf,ZeroStencilOp:gI,createCanvasElement:Rw},Symbol.toStringTag,{value:"Module"}));var OE={exports:{}},LE={},PE={exports:{}},zE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iR;function bB(){if(iR)return zE;iR=1;var i=Hp();function t(y,S){return y===S&&(y!==0||1/y===1/S)||y!==y&&S!==S}var e=typeof Object.is=="function"?Object.is:t,n=i.useState,s=i.useEffect,r=i.useLayoutEffect,u=i.useDebugValue;function f(y,S){var T=S(),R=n({inst:{value:T,getSnapshot:S}}),C=R[0].inst,w=R[1];return r(function(){C.value=T,C.getSnapshot=S,d(C)&&w({inst:C})},[y,T,S]),s(function(){return d(C)&&w({inst:C}),y(function(){d(C)&&w({inst:C})})},[y]),u(T),T}function d(y){var S=y.getSnapshot;y=y.value;try{var T=S();return!e(y,T)}catch{return!0}}function m(y,S){return S()}var _=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:f;return zE.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:_,zE}var sR;function MB(){return sR||(sR=1,PE.exports=bB()),PE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aR;function AB(){if(aR)return LE;aR=1;var i=Hp(),t=MB();function e(m,_){return m===_&&(m!==0||1/m===1/_)||m!==m&&_!==_}var n=typeof Object.is=="function"?Object.is:e,s=t.useSyncExternalStore,r=i.useRef,u=i.useEffect,f=i.useMemo,d=i.useDebugValue;return LE.useSyncExternalStoreWithSelector=function(m,_,y,S,T){var R=r(null);if(R.current===null){var C={hasValue:!1,value:null};R.current=C}else C=R.current;R=f(function(){function M(q){if(!O){if(O=!0,z=q,q=S(q),T!==void 0&&C.hasValue){var L=C.value;if(T(L,q))return V=L}return V=q}if(L=V,n(z,q))return L;var P=S(q);return T!==void 0&&T(L,P)?(z=q,L):(z=q,V=P)}var O=!1,z,V,j=y===void 0?null:y;return[function(){return M(_())},j===null?void 0:function(){return M(j())}]},[_,y,S,T]);var w=s(m,R[0],R[1]);return u(function(){C.hasValue=!0,C.value=w},[w]),d(w),w},LE}var rR;function RB(){return rR||(rR=1,OE.exports=AB()),OE.exports}var wB=RB();const CB=QT(wB),oR=i=>{let t;const e=new Set,n=(m,_)=>{const y=typeof m=="function"?m(t):m;if(!Object.is(y,t)){const S=t;t=_??(typeof y!="object"||y===null)?y:Object.assign({},t,y),e.forEach(T=>T(t,S))}},s=()=>t,f={setState:n,getState:s,getInitialState:()=>d,subscribe:m=>(e.add(m),()=>e.delete(m))},d=t=i(n,s,f);return f},DB=(i=>i?oR(i):oR),{useSyncExternalStoreWithSelector:NB}=CB,IB=i=>i;function UB(i,t=IB,e){const n=NB(i.subscribe,i.getState,i.getInitialState,t,e);return qN.useDebugValue(n),n}const lR=(i,t)=>{const e=DB(i),n=(s,r=t)=>UB(e,s,r);return Object.assign(n,e),n},OB=((i,t)=>i?lR(i,t):lR);var VE={exports:{}},BE={exports:{}},FE={exports:{}},HE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uR;function LB(){return uR||(uR=1,(function(i){function t(k,et){var nt=k.length;k.push(et);t:for(;0<nt;){var ft=nt-1>>>1,wt=k[ft];if(0<s(wt,et))k[ft]=et,k[nt]=wt,nt=ft;else break t}}function e(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var et=k[0],nt=k.pop();if(nt!==et){k[0]=nt;t:for(var ft=0,wt=k.length,J=wt>>>1;ft<J;){var ut=2*(ft+1)-1,Ot=k[ut],Lt=ut+1,ee=k[Lt];if(0>s(Ot,nt))Lt<wt&&0>s(ee,Ot)?(k[ft]=ee,k[Lt]=nt,ft=Lt):(k[ft]=Ot,k[ut]=nt,ft=ut);else if(Lt<wt&&0>s(ee,nt))k[ft]=ee,k[Lt]=nt,ft=Lt;else break t}}return et}function s(k,et){var nt=k.sortIndex-et.sortIndex;return nt!==0?nt:k.id-et.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var u=Date,f=u.now();i.unstable_now=function(){return u.now()-f}}var d=[],m=[],_=1,y=null,S=3,T=!1,R=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function z(k){for(var et=e(m);et!==null;){if(et.callback===null)n(m);else if(et.startTime<=k)n(m),et.sortIndex=et.expirationTime,t(d,et);else break;et=e(m)}}function V(k){if(C=!1,z(k),!R)if(e(d)!==null)R=!0,gt();else{var et=e(m);et!==null&&vt(V,et.startTime-k)}}var j=!1,q=-1,L=5,P=-1;function D(){return!(i.unstable_now()-P<L)}function U(){if(j){var k=i.unstable_now();P=k;var et=!0;try{t:{R=!1,C&&(C=!1,M(q),q=-1),T=!0;var nt=S;try{e:{for(z(k),y=e(d);y!==null&&!(y.expirationTime>k&&D());){var ft=y.callback;if(typeof ft=="function"){y.callback=null,S=y.priorityLevel;var wt=ft(y.expirationTime<=k);if(k=i.unstable_now(),typeof wt=="function"){y.callback=wt,z(k),et=!0;break e}y===e(d)&&n(d),z(k)}else n(d);y=e(d)}if(y!==null)et=!0;else{var J=e(m);J!==null&&vt(V,J.startTime-k),et=!1}}break t}finally{y=null,S=nt,T=!1}et=void 0}}finally{et?F():j=!1}}}var F;if(typeof O=="function")F=function(){O(U)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,G=Y.port2;Y.port1.onmessage=U,F=function(){G.postMessage(null)}}else F=function(){w(U,0)};function gt(){j||(j=!0,F())}function vt(k,et){q=w(function(){k(i.unstable_now())},et)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(k){k.callback=null},i.unstable_continueExecution=function(){R||T||(R=!0,gt())},i.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<k?Math.floor(1e3/k):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_getFirstCallbackNode=function(){return e(d)},i.unstable_next=function(k){switch(S){case 1:case 2:case 3:var et=3;break;default:et=S}var nt=S;S=et;try{return k()}finally{S=nt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(k,et){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var nt=S;S=k;try{return et()}finally{S=nt}},i.unstable_scheduleCallback=function(k,et,nt){var ft=i.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?ft+nt:ft):nt=ft,k){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=nt+wt,k={id:_++,callback:et,priorityLevel:k,startTime:nt,expirationTime:wt,sortIndex:-1},nt>ft?(k.sortIndex=nt,t(m,k),e(d)===null&&k===e(m)&&(C?(M(q),q=-1):C=!0,vt(V,nt-ft))):(k.sortIndex=wt,t(d,k),R||T||(R=!0,gt())),k},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(k){var et=S;return function(){var nt=S;S=et;try{return k.apply(this,arguments)}finally{S=nt}}}})(HE)),HE}var cR;function PB(){return cR||(cR=1,FE.exports=LB()),FE.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hR;function zB(){return hR||(hR=1,(function(i){i.exports=function(t){function e(l,c,g,E){return new fm(l,c,g,E)}function n(){}function s(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return l===null||typeof l!="object"?null:(l=vm&&l[vm]||l["@@iterator"],typeof l=="function"?l:null)}function u(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===gu?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case yc:return"Fragment";case Ur:return"Portal";case ym:return"Profiler";case _m:return"StrictMode";case ad:return"Suspense";case Al:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case so:return(l.displayName||"Context")+".Provider";case Ml:return(l._context.displayName||"Context")+".Consumer";case vc:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Lh:return c=l.displayName||null,c!==null?c:u(l.type)||"Memo";case Or:c=l._payload,l=l._init;try{return u(l(c))}catch{}}return null}function f(l){if(rd===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);rd=c&&c[1]||"",Sm=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rd+l+Sm}function d(l,c){if(!l||Rl)return"";Rl=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(c){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(en){var Se=en}Reflect.construct(l,[],ge)}else{try{ge.call()}catch(en){Se=en}l.call(ge.prototype)}}else{try{throw Error()}catch(en){Se=en}(ge=l())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(en){if(en&&Se&&typeof en.stack=="string")return[en.stack,Se.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=E.DetermineComponentFrameRoot(),Q=I[0],st=I[1];if(Q&&st){var mt=Q.split(`
`),Ft=st.split(`
`);for(A=E=0;E<mt.length&&!mt[E].includes("DetermineComponentFrameRoot");)E++;for(;A<Ft.length&&!Ft[A].includes("DetermineComponentFrameRoot");)A++;if(E===mt.length||A===Ft.length)for(E=mt.length-1,A=Ft.length-1;1<=E&&0<=A&&mt[E]!==Ft[A];)A--;for(;1<=E&&0<=A;E--,A--)if(mt[E]!==Ft[A]){if(E!==1||A!==1)do if(E--,A--,0>A||mt[E]!==Ft[A]){var le=`
`+mt[E].replace(" at new "," at ");return l.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",l.displayName)),le}while(1<=E&&0<=A);break}}}finally{Rl=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?f(g):""}function m(l){switch(l.tag){case 26:case 27:case 5:return f(l.type);case 16:return f("Lazy");case 13:return f("Suspense");case 19:return f("SuspenseList");case 0:case 15:return l=d(l.type,!1),l;case 11:return l=d(l.type.render,!1),l;case 1:return l=d(l.type,!0),l;default:return""}}function _(l){try{var c="";do c+=m(l),l=l.return;while(l);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function y(l){var c=l,g=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(g=c.return),l=c.return;while(l)}return c.tag===3?g:null}function S(l){if(y(l)!==l)throw Error(s(188))}function T(l){var c=l.alternate;if(!c){if(c=y(l),c===null)throw Error(s(188));return c!==l?null:l}for(var g=l,E=c;;){var A=g.return;if(A===null)break;var I=A.alternate;if(I===null){if(E=A.return,E!==null){g=E;continue}break}if(A.child===I.child){for(I=A.child;I;){if(I===g)return S(A),l;if(I===E)return S(A),c;I=I.sibling}throw Error(s(188))}if(g.return!==E.return)g=A,E=I;else{for(var Q=!1,st=A.child;st;){if(st===g){Q=!0,g=A,E=I;break}if(st===E){Q=!0,E=A,g=I;break}st=st.sibling}if(!Q){for(st=I.child;st;){if(st===g){Q=!0,g=I,E=A;break}if(st===E){Q=!0,E=I,g=A;break}st=st.sibling}if(!Q)throw Error(s(189))}}if(g.alternate!==E)throw Error(s(190))}if(g.tag!==3)throw Error(s(188));return g.stateNode.current===g?l:c}function R(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=R(l),c!==null)return c;l=l.sibling}return null}function C(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(c=C(l),c!==null))return c;l=l.sibling}return null}function w(l){return{current:l}}function M(l){0>Ho||(l.current=qh[Ho],qh[Ho]=null,Ho--)}function O(l,c){Ho++,qh[Ho]=l.current,l.current=c}function z(l){return l>>>=0,l===0?32:31-(Xh(l)/_y|0)|0}function V(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function j(l,c){var g=l.pendingLanes;if(g===0)return 0;var E=0,A=l.suspendedLanes,I=l.pingedLanes,Q=l.warmLanes;l=l.finishedLanes!==0;var st=g&134217727;return st!==0?(g=st&~A,g!==0?E=V(g):(I&=st,I!==0?E=V(I):l||(Q=st&~Q,Q!==0&&(E=V(Q))))):(st=g&~A,st!==0?E=V(st):I!==0?E=V(I):l||(Q=g&~Q,Q!==0&&(E=V(Q)))),E===0?0:c!==0&&c!==E&&(c&A)===0&&(A=E&-E,Q=c&-c,A>=Q||A===32&&(Q&4194176)!==0)?c:E}function q(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function L(l,c){switch(l){case 1:case 2:case 4:case 8:return c+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P(){var l=Tc;return Tc<<=1,(Tc&4194176)===0&&(Tc=128),l}function D(){var l=jh;return jh<<=1,(jh&62914560)===0&&(jh=4194304),l}function U(l){for(var c=[],g=0;31>g;g++)c.push(l);return c}function F(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Y(l,c,g,E,A,I){var Q=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var st=l.entanglements,mt=l.expirationTimes,Ft=l.hiddenUpdates;for(g=Q&~g;0<g;){var le=31-pa(g),ge=1<<le;st[le]=0,mt[le]=-1;var Se=Ft[le];if(Se!==null)for(Ft[le]=null,le=0;le<Se.length;le++){var en=Se[le];en!==null&&(en.lane&=-536870913)}g&=~ge}E!==0&&G(l,E,0),I!==0&&A===0&&l.tag!==0&&(l.suspendedLanes|=I&~(Q&~c))}function G(l,c,g){l.pendingLanes|=c,l.suspendedLanes&=~c;var E=31-pa(c);l.entangledLanes|=c,l.entanglements[E]=l.entanglements[E]|1073741824|g&4194218}function gt(l,c){var g=l.entangledLanes|=c;for(l=l.entanglements;g;){var E=31-pa(g),A=1<<E;A&c|l[E]&c&&(l[E]|=c),g&=~A}}function vt(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function k(l){if(ma&&typeof ma.onCommitFiberRoot=="function")try{ma.onCommitFiberRoot(Mc,l,void 0,(l.current.flags&128)===128)}catch{}}function et(l){if(typeof xy=="function"&&Zm(l),ma&&typeof ma.setStrictMode=="function")try{ma.setStrictMode(Mc,l)}catch{}}function nt(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}function ft(l,c){if(typeof l=="object"&&l!==null){var g=Td.get(l);return g!==void 0?g:(c={value:l,source:c,stack:_(c)},Td.set(l,c),c)}return{value:l,source:c,stack:_(c)}}function wt(l,c){yi[Ii++]=Kh,yi[Ii++]=Wh,Wh=l,Kh=c}function J(l,c,g){ka[qa++]=uo,ka[qa++]=cr,ka[qa++]=Lr,Lr=l;var E=uo;l=cr;var A=32-pa(E)-1;E&=~(1<<A),g+=1;var I=32-pa(c)+A;if(30<I){var Q=A-A%5;I=(E&(1<<Q)-1).toString(32),E>>=Q,A-=Q,uo=1<<32-pa(c)+A|g<<A|E,cr=I+l}else uo=1<<I|g<<A|E,cr=l}function ut(l){l.return!==null&&(wt(l,1),J(l,1,0))}function Ot(l){for(;l===Wh;)Wh=yi[--Ii],yi[Ii]=null,Kh=yi[--Ii],yi[Ii]=null;for(;l===Lr;)Lr=ka[--qa],ka[qa]=null,cr=ka[--qa],ka[qa]=null,uo=ka[--qa],ka[qa]=null}function Lt(l,c){O(Pr,c),O(Qh,l),O(hs,null),l=_u(c),M(hs),O(hs,l)}function ee(){M(hs),M(Qh),M(Pr)}function xt(l){l.memoizedState!==null&&O(Ac,l);var c=hs.current,g=Q_(c,l.type);c!==g&&(O(Qh,l),O(hs,g))}function It(l){Qh.current===l&&(M(hs),M(Qh)),Ac.current===l&&(M(Ac),ro?Ke._currentValue=da:Ke._currentValue2=da)}function ae(l){var c=Error(s(418,""));throw it(ft(c,l)),Zh}function de(l,c){if(!Ws)throw Error(s(175));rx(l.stateNode,l.type,l.memoizedProps,c,l)||ae(l)}function Ee(l){for(Us=l.return;Us;)switch(Us.tag){case 3:case 27:hr=!0;return;case 5:case 13:hr=!1;return;default:Us=Us.return}}function Ze(l){if(!Ws||l!==Us)return!1;if(!zn)return Ee(l),zn=!0,!1;var c=!1;if(xs?l.tag!==3&&l.tag!==27&&(l.tag!==5||fy(l.type)&&!Dl(l.type,l.memoizedProps))&&(c=!0):l.tag!==3&&(l.tag!==5||fy(l.type)&&!Dl(l.type,l.memoizedProps))&&(c=!0),c&&Ts&&ae(l),Ee(l),l.tag===13){if(!Ws)throw Error(s(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));Ts=cy(l)}else Ts=Us?Vm(l.stateNode):null;return!0}function bn(){Ws&&(Ts=Us=null,zn=!1)}function it(l){Xa===null?Xa=[l]:Xa.push(l)}function qt(){for(var l=Il,c=Rc=Il=0;c<l;){var g=ja[c];ja[c++]=null;var E=ja[c];ja[c++]=null;var A=ja[c];ja[c++]=null;var I=ja[c];if(ja[c++]=null,E!==null&&A!==null){var Q=E.pending;Q===null?A.next=A:(A.next=Q.next,Q.next=A),E.pending=A}I!==0&&ue(g,A,I)}}function Ht(l,c,g,E){ja[Il++]=l,ja[Il++]=c,ja[Il++]=g,ja[Il++]=E,Rc|=E,l.lanes|=E,l=l.alternate,l!==null&&(l.lanes|=E)}function Vt(l,c,g,E){return Ht(l,c,g,E),kt(l)}function Pt(l,c){return Ht(l,null,null,c),kt(l)}function ue(l,c,g){l.lanes|=g;var E=l.alternate;E!==null&&(E.lanes|=g);for(var A=!1,I=l.return;I!==null;)I.childLanes|=g,E=I.alternate,E!==null&&(E.childLanes|=g),I.tag===22&&(l=I.stateNode,l===null||l._visibility&1||(A=!0)),l=I,I=I.return;A&&c!==null&&l.tag===3&&(I=l.stateNode,A=31-pa(g),I=I.hiddenUpdates,l=I[A],l===null?I[A]=[c]:l.push(c),c.lane=g|536870912)}function kt(l){if(50<wu)throw wu=0,Zs=null,Error(s(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}function Kt(l){l!==xu&&l.next===null&&(xu===null?wc=xu=l:xu=xu.next=l),$h=!0,Jh||(Jh=!0,Dt(Ye))}function ze(l,c){if(!zr&&$h){zr=!0;do for(var g=!1,E=wc;E!==null;){if(l!==0){var A=E.pendingLanes;if(A===0)var I=0;else{var Q=E.suspendedLanes,st=E.pingedLanes;I=(1<<31-pa(42|l)+1)-1,I&=A&~(Q&~st),I=I&201326677?I&201326677|1:I?I|2:0}I!==0&&(g=!0,_t(E,I))}else I=Sn,I=j(E,E===Tn?I:0),(I&3)===0||q(E,I)||(g=!0,_t(E,I));E=E.next}while(g);zr=!1}}function Ye(){$h=Jh=!1;var l=0;Ul!==0&&(Nl()&&(l=Ul),Ul=0);for(var c=Es(),g=null,E=wc;E!==null;){var A=E.next,I=$(E,c);I===0?(E.next=null,g===null?wc=A:g.next=A,A===null&&(xu=g)):(g=E,(l!==0||(I&3)!==0)&&($h=!0)),E=A}ze(l)}function $(l,c){for(var g=l.suspendedLanes,E=l.pingedLanes,A=l.expirationTimes,I=l.pendingLanes&-62914561;0<I;){var Q=31-pa(I),st=1<<Q,mt=A[Q];mt===-1?((st&g)===0||(st&E)!==0)&&(A[Q]=L(st,c)):mt<=c&&(l.expiredLanes|=st),I&=~st}if(c=Tn,g=Sn,g=j(l,l===c?g:0),E=l.callbackNode,g===0||l===c&&si===2||l.cancelPendingCommit!==null)return E!==null&&E!==null&&Yh(E),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||q(l,g)){if(c=g&-g,c===l.callbackPriority)return c;switch(E!==null&&Yh(E),vt(g)){case 2:case 8:g=Sy;break;case 32:g=xd;break;case 268435456:g=Ed;break;default:g=xd}return E=X.bind(null,l),g=bc(g,E),l.callbackPriority=c,l.callbackNode=g,c}return E!==null&&E!==null&&Yh(E),l.callbackPriority=2,l.callbackNode=null,2}function X(l,c){var g=l.callbackNode;if(us()&&l.callbackNode!==g)return null;var E=Sn;return E=j(l,l===Tn?E:0),E===0?null:(Dh(l,E,c),$(l,Es()),l.callbackNode!=null&&l.callbackNode===g?X.bind(null,l):null)}function _t(l,c){if(us())return null;Dh(l,c,!0)}function Dt(l){ji?cd(function(){(Be&6)!==0?bc(Qm,l):l()}):bc(Qm,l)}function Qt(){return Ul===0&&(Ul=P()),Ul}function Ut(l,c){if(tf===null){var g=tf=[];bd=0,ga=Qt(),Ol={status:"pending",value:void 0,then:function(E){g.push(E)}}}return bd++,c.then(De,De),c}function De(){if(--bd===0&&tf!==null){Ol!==null&&(Ol.status="fulfilled");var l=tf;tf=null,ga=0,Ol=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function oe(l,c){var g=[],E={status:"pending",value:null,reason:null,then:function(A){g.push(A)}};return l.then(function(){E.status="fulfilled",E.value=c;for(var A=0;A<g.length;A++)(0,g[A])(c)},function(A){for(E.status="rejected",E.reason=A,A=0;A<g.length;A++)(0,g[A])(void 0)}),E}function be(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Me(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Yt(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ie(l,c,g){var E=l.updateQueue;if(E===null)return null;if(E=E.shared,(Be&2)!==0){var A=E.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),E.pending=c,c=kt(l),ue(l,null,g),c}return Ht(l,E,c,g),kt(l)}function Ce(l,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194176)!==0)){var E=c.lanes;E&=l.pendingLanes,g|=E,c.lanes=g,gt(l,g)}}function pe(l,c){var g=l.updateQueue,E=l.alternate;if(E!==null&&(E=E.updateQueue,g===E)){var A=null,I=null;if(g=g.firstBaseUpdate,g!==null){do{var Q={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};I===null?A=I=Q:I=I.next=Q,g=g.next}while(g!==null);I===null?A=I=c:I=I.next=c}else A=I=c;g={baseState:E.baseState,firstBaseUpdate:A,lastBaseUpdate:I,shared:E.shared,callbacks:E.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=c:l.next=c,g.lastBaseUpdate=c}function fe(){if(Cc){var l=Ol;if(l!==null)throw l}}function ke(l,c,g,E){Cc=!1;var A=l.updateQueue;Go=!1;var I=A.firstBaseUpdate,Q=A.lastBaseUpdate,st=A.shared.pending;if(st!==null){A.shared.pending=null;var mt=st,Ft=mt.next;mt.next=null,Q===null?I=Ft:Q.next=Ft,Q=mt;var le=l.alternate;le!==null&&(le=le.updateQueue,st=le.lastBaseUpdate,st!==Q&&(st===null?le.firstBaseUpdate=Ft:st.next=Ft,le.lastBaseUpdate=mt))}if(I!==null){var ge=A.baseState;Q=0,le=Ft=mt=null,st=I;do{var Se=st.lane&-536870913,en=Se!==st.lane;if(en?(Sn&Se)===Se:(E&Se)===Se){Se!==0&&Se===ga&&(Cc=!0),le!==null&&(le=le.next={lane:0,tag:st.tag,payload:st.payload,callback:null,next:null});t:{var Sa=l,af=st;Se=c;var Cu=g;switch(af.tag){case 1:if(Sa=af.payload,typeof Sa=="function"){ge=Sa.call(Cu,ge,Se);break t}ge=Sa;break t;case 3:Sa.flags=Sa.flags&-65537|128;case 0:if(Sa=af.payload,Se=typeof Sa=="function"?Sa.call(Cu,ge,Se):Sa,Se==null)break t;ge=mu({},ge,Se);break t;case 2:Go=!0}}Se=st.callback,Se!==null&&(l.flags|=64,en&&(l.flags|=8192),en=A.callbacks,en===null?A.callbacks=[Se]:en.push(Se))}else en={lane:Se,tag:st.tag,payload:st.payload,callback:st.callback,next:null},le===null?(Ft=le=en,mt=ge):le=le.next=en,Q|=Se;if(st=st.next,st===null){if(st=A.shared.pending,st===null)break;en=st,st=en.next,en.next=null,A.lastBaseUpdate=en,A.shared.pending=null}}while(!0);le===null&&(mt=ge),A.baseState=mt,A.firstBaseUpdate=Ft,A.lastBaseUpdate=le,I===null&&(A.shared.lanes=0),Qa|=Q,l.lanes=Q,l.memoizedState=ge}}function ot(l,c){if(typeof l!="function")throw Error(s(191,l));l.call(c)}function te(l,c){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)ot(g[l],c)}function re(l,c){if(Ga(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var g=Object.keys(l),E=Object.keys(c);if(g.length!==E.length)return!1;for(E=0;E<g.length;E++){var A=g[E];if(!ef.call(c,A)||!Ga(l[A],c[A]))return!1}return!0}function he(l){return l=l.status,l==="fulfilled"||l==="rejected"}function $t(){}function Bt(l,c,g){switch(g=l[g],g===void 0?l.push(c):g!==c&&(c.then($t,$t),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,l===ei?Error(s(483)):l;default:if(typeof c.status=="string")c.then($t,$t);else{if(l=Tn,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=c,l.status="pending",l.then(function(E){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=E}},function(E){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=E}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,l===ei?Error(s(483)):l}throw Eu=c,ei}}function ye(){if(Eu===null)throw Error(s(459));var l=Eu;return Eu=null,l}function Xe(l){var c=fr;return fr+=1,co===null&&(co=[]),Bt(co,l,c)}function Rn(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function nn(l,c){throw c.$$typeof===gm?Error(s(525)):(l=Object.prototype.toString.call(c),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function ss(l){var c=l._init;return c(l._payload)}function Hs(l){function c(Mt,dt){if(l){var Ct=Mt.deletions;Ct===null?(Mt.deletions=[dt],Mt.flags|=16):Ct.push(dt)}}function g(Mt,dt){if(!l)return null;for(;dt!==null;)c(Mt,dt),dt=dt.sibling;return null}function E(Mt){for(var dt=new Map;Mt!==null;)Mt.key!==null?dt.set(Mt.key,Mt):dt.set(Mt.index,Mt),Mt=Mt.sibling;return dt}function A(Mt,dt){return Mt=Ns(Mt,dt),Mt.index=0,Mt.sibling=null,Mt}function I(Mt,dt,Ct){return Mt.index=Ct,l?(Ct=Mt.alternate,Ct!==null?(Ct=Ct.index,Ct<dt?(Mt.flags|=33554434,dt):Ct):(Mt.flags|=33554434,dt)):(Mt.flags|=1048576,dt)}function Q(Mt){return l&&Mt.alternate===null&&(Mt.flags|=33554434),Mt}function st(Mt,dt,Ct,ne){return dt===null||dt.tag!==6?(dt=bl(Ct,Mt.mode,ne),dt.return=Mt,dt):(dt=A(dt,Ct),dt.return=Mt,dt)}function mt(Mt,dt,Ct,ne){var Pe=Ct.type;return Pe===yc?le(Mt,dt,Ct.props.children,ne,Ct.key):dt!==null&&(dt.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===Or&&ss(Pe)===dt.type)?(dt=A(dt,Ct.props),Rn(dt,Ct),dt.return=Mt,dt):(dt=lr(Ct.type,Ct.key,Ct.props,null,Mt.mode,ne),Rn(dt,Ct),dt.return=Mt,dt)}function Ft(Mt,dt,Ct,ne){return dt===null||dt.tag!==4||dt.stateNode.containerInfo!==Ct.containerInfo||dt.stateNode.implementation!==Ct.implementation?(dt=_c(Ct,Mt.mode,ne),dt.return=Mt,dt):(dt=A(dt,Ct.children||[]),dt.return=Mt,dt)}function le(Mt,dt,Ct,ne,Pe){return dt===null||dt.tag!==7?(dt=Po(Ct,Mt.mode,ne,Pe),dt.return=Mt,dt):(dt=A(dt,Ct),dt.return=Mt,dt)}function ge(Mt,dt,Ct){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return dt=bl(""+dt,Mt.mode,Ct),dt.return=Mt,dt;if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case zo:return Ct=lr(dt.type,dt.key,dt.props,null,Mt.mode,Ct),Rn(Ct,dt),Ct.return=Mt,Ct;case Ur:return dt=_c(dt,Mt.mode,Ct),dt.return=Mt,dt;case Or:var ne=dt._init;return dt=ne(dt._payload),ge(Mt,dt,Ct)}if(wl(dt)||r(dt))return dt=Po(dt,Mt.mode,Ct,null),dt.return=Mt,dt;if(typeof dt.then=="function")return ge(Mt,Xe(dt),Ct);if(dt.$$typeof===so)return ge(Mt,ua(Mt,dt),Ct);nn(Mt,dt)}return null}function Se(Mt,dt,Ct,ne){var Pe=dt!==null?dt.key:null;if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint")return Pe!==null?null:st(Mt,dt,""+Ct,ne);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case zo:return Ct.key===Pe?mt(Mt,dt,Ct,ne):null;case Ur:return Ct.key===Pe?Ft(Mt,dt,Ct,ne):null;case Or:return Pe=Ct._init,Ct=Pe(Ct._payload),Se(Mt,dt,Ct,ne)}if(wl(Ct)||r(Ct))return Pe!==null?null:le(Mt,dt,Ct,ne,null);if(typeof Ct.then=="function")return Se(Mt,dt,Xe(Ct),ne);if(Ct.$$typeof===so)return Se(Mt,dt,ua(Mt,Ct),ne);nn(Mt,Ct)}return null}function en(Mt,dt,Ct,ne,Pe){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Mt=Mt.get(Ct)||null,st(dt,Mt,""+ne,Pe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case zo:return Mt=Mt.get(ne.key===null?Ct:ne.key)||null,mt(dt,Mt,ne,Pe);case Ur:return Mt=Mt.get(ne.key===null?Ct:ne.key)||null,Ft(dt,Mt,ne,Pe);case Or:var hi=ne._init;return ne=hi(ne._payload),en(Mt,dt,Ct,ne,Pe)}if(wl(ne)||r(ne))return Mt=Mt.get(Ct)||null,le(dt,Mt,ne,Pe,null);if(typeof ne.then=="function")return en(Mt,dt,Ct,Xe(ne),Pe);if(ne.$$typeof===so)return en(Mt,dt,Ct,ua(dt,ne),Pe);nn(dt,ne)}return null}function Sa(Mt,dt,Ct,ne){for(var Pe=null,hi=null,Qe=dt,Bn=dt=0,es=null;Qe!==null&&Bn<Ct.length;Bn++){Qe.index>Bn?(es=Qe,Qe=null):es=Qe.sibling;var Fn=Se(Mt,Qe,Ct[Bn],ne);if(Fn===null){Qe===null&&(Qe=es);break}l&&Qe&&Fn.alternate===null&&c(Mt,Qe),dt=I(Fn,dt,Bn),hi===null?Pe=Fn:hi.sibling=Fn,hi=Fn,Qe=es}if(Bn===Ct.length)return g(Mt,Qe),zn&&wt(Mt,Bn),Pe;if(Qe===null){for(;Bn<Ct.length;Bn++)Qe=ge(Mt,Ct[Bn],ne),Qe!==null&&(dt=I(Qe,dt,Bn),hi===null?Pe=Qe:hi.sibling=Qe,hi=Qe);return zn&&wt(Mt,Bn),Pe}for(Qe=E(Qe);Bn<Ct.length;Bn++)es=en(Qe,Mt,Bn,Ct[Bn],ne),es!==null&&(l&&es.alternate!==null&&Qe.delete(es.key===null?Bn:es.key),dt=I(es,dt,Bn),hi===null?Pe=es:hi.sibling=es,hi=es);return l&&Qe.forEach(function(Ko){return c(Mt,Ko)}),zn&&wt(Mt,Bn),Pe}function af(Mt,dt,Ct,ne){if(Ct==null)throw Error(s(151));for(var Pe=null,hi=null,Qe=dt,Bn=dt=0,es=null,Fn=Ct.next();Qe!==null&&!Fn.done;Bn++,Fn=Ct.next()){Qe.index>Bn?(es=Qe,Qe=null):es=Qe.sibling;var Ko=Se(Mt,Qe,Fn.value,ne);if(Ko===null){Qe===null&&(Qe=es);break}l&&Qe&&Ko.alternate===null&&c(Mt,Qe),dt=I(Ko,dt,Bn),hi===null?Pe=Ko:hi.sibling=Ko,hi=Ko,Qe=es}if(Fn.done)return g(Mt,Qe),zn&&wt(Mt,Bn),Pe;if(Qe===null){for(;!Fn.done;Bn++,Fn=Ct.next())Fn=ge(Mt,Fn.value,ne),Fn!==null&&(dt=I(Fn,dt,Bn),hi===null?Pe=Fn:hi.sibling=Fn,hi=Fn);return zn&&wt(Mt,Bn),Pe}for(Qe=E(Qe);!Fn.done;Bn++,Fn=Ct.next())Fn=en(Qe,Mt,Bn,Fn.value,ne),Fn!==null&&(l&&Fn.alternate!==null&&Qe.delete(Fn.key===null?Bn:Fn.key),dt=I(Fn,dt,Bn),hi===null?Pe=Fn:hi.sibling=Fn,hi=Fn);return l&&Qe.forEach(function(Ud){return c(Mt,Ud)}),zn&&wt(Mt,Bn),Pe}function Cu(Mt,dt,Ct,ne){if(typeof Ct=="object"&&Ct!==null&&Ct.type===yc&&Ct.key===null&&(Ct=Ct.props.children),typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case zo:t:{for(var Pe=Ct.key;dt!==null;){if(dt.key===Pe){if(Pe=Ct.type,Pe===yc){if(dt.tag===7){g(Mt,dt.sibling),ne=A(dt,Ct.props.children),ne.return=Mt,Mt=ne;break t}}else if(dt.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===Or&&ss(Pe)===dt.type){g(Mt,dt.sibling),ne=A(dt,Ct.props),Rn(ne,Ct),ne.return=Mt,Mt=ne;break t}g(Mt,dt);break}else c(Mt,dt);dt=dt.sibling}Ct.type===yc?(ne=Po(Ct.props.children,Mt.mode,ne,Ct.key),ne.return=Mt,Mt=ne):(ne=lr(Ct.type,Ct.key,Ct.props,null,Mt.mode,ne),Rn(ne,Ct),ne.return=Mt,Mt=ne)}return Q(Mt);case Ur:t:{for(Pe=Ct.key;dt!==null;){if(dt.key===Pe)if(dt.tag===4&&dt.stateNode.containerInfo===Ct.containerInfo&&dt.stateNode.implementation===Ct.implementation){g(Mt,dt.sibling),ne=A(dt,Ct.children||[]),ne.return=Mt,Mt=ne;break t}else{g(Mt,dt);break}else c(Mt,dt);dt=dt.sibling}ne=_c(Ct,Mt.mode,ne),ne.return=Mt,Mt=ne}return Q(Mt);case Or:return Pe=Ct._init,Ct=Pe(Ct._payload),Cu(Mt,dt,Ct,ne)}if(wl(Ct))return Sa(Mt,dt,Ct,ne);if(r(Ct)){if(Pe=r(Ct),typeof Pe!="function")throw Error(s(150));return Ct=Pe.call(Ct),af(Mt,dt,Ct,ne)}if(typeof Ct.then=="function")return Cu(Mt,dt,Xe(Ct),ne);if(Ct.$$typeof===so)return Cu(Mt,dt,ua(Mt,Ct),ne);nn(Mt,Ct)}return typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint"?(Ct=""+Ct,dt!==null&&dt.tag===6?(g(Mt,dt.sibling),ne=A(dt,Ct),ne.return=Mt,Mt=ne):(g(Mt,dt),ne=bl(Ct,Mt.mode,ne),ne.return=Mt,Mt=ne),Q(Mt)):g(Mt,dt)}return function(Mt,dt,Ct,ne){try{fr=0;var Pe=Cu(Mt,dt,Ct,ne);return co=null,Pe}catch(Qe){if(Qe===ei)throw Qe;var hi=e(29,Qe,null,Mt.mode);return hi.lanes=ne,hi.return=Mt,hi}finally{}}}function br(l,c){l=Vr,O(Ya,l),O(ho,c),Vr=l|c.baseLanes}function Gs(){O(Ya,Vr),O(ho,ho.current)}function Mr(){Vr=Ya.current,M(ho),M(Ya)}function _s(l){var c=l.alternate;O(Yi,Yi.current&1),O(Wa,l),dr===null&&(c===null||ho.current!==null||c.memoizedState!==null)&&(dr=l)}function Ia(l){if(l.tag===22){if(O(Yi,Yi.current),O(Wa,l),dr===null){var c=l.alternate;c!==null&&c.memoizedState!==null&&(dr=l)}}else ws()}function ws(){O(Yi,Yi.current),O(Wa,Wa.current)}function wi(l){M(Wa),dr===l&&(dr=null),M(Yi)}function Zi(l){for(var c=l;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||md(g)||kh(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function on(){throw Error(s(321))}function xi(l,c){if(c===null)return!1;for(var g=0;g<c.length&&g<l.length;g++)if(!Ga(l[g],c[g]))return!1;return!0}function aa(l,c,g,E,A,I){return fo=I,fn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,qe.H=l===null||l.memoizedState===null?Wi:Os,ko=!1,I=g(E,A),ko=!1,vi&&(I=Qu(c,g,E,A)),To(l),I}function To(l){qe.H=Vn;var c=Xn!==null&&Xn.next!==null;if(fo=0,Vi=Xn=fn=null,pr=!1,Ui=0,Dc=null,c)throw Error(s(300));l===null||Bi||(l=l.dependencies,l!==null&&ri(l)&&(Bi=!0))}function Qu(l,c,g,E){fn=l;var A=0;do{if(vi&&(Dc=null),Ui=0,vi=!1,25<=A)throw Error(s(301));if(A+=1,Vi=Xn=null,l.updateQueue!=null){var I=l.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}qe.H=Pl,I=c(g,E)}while(vi);return I}function Zu(){var l=qe.H,c=l.useState()[0];return c=typeof c.then=="function"?Tt(c):c,l=l.useState()[0],(Xn!==null?Xn.memoizedState:null)!==l&&(fn.flags|=1024),c}function rl(){var l=nf!==0;return nf=0,l}function ra(l,c,g){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~g}function K(l){if(pr){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}pr=!1}fo=0,Vi=Xn=fn=null,vi=!1,Ui=nf=0,Dc=null}function lt(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vi===null?fn.memoizedState=Vi=l:Vi=Vi.next=l,Vi}function yt(){if(Xn===null){var l=fn.alternate;l=l!==null?l.memoizedState:null}else l=Xn.next;var c=Vi===null?fn.memoizedState:Vi.next;if(c!==null)Vi=c,Xn=l;else{if(l===null)throw fn.alternate===null?Error(s(467)):Error(s(310));Xn=l,l={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},Vi===null?fn.memoizedState=Vi=l:Vi=Vi.next=l}return Vi}function Tt(l){var c=Ui;return Ui+=1,Dc===null&&(Dc=[]),l=Bt(Dc,l,c),c=fn,(Vi===null?c.memoizedState:Vi.next)===null&&(c=c.alternate,qe.H=c===null||c.memoizedState===null?Wi:Os),l}function ct(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Tt(l);if(l.$$typeof===so)return mi(l)}throw Error(s(438,String(l)))}function Xt(l){var c=null,g=fn.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var E=fn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(c={data:E.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=Ad(),fn.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(l),E=0;E<l;E++)g[E]=K_;return c.index++,g}function ce(l,c){return typeof c=="function"?c(l):c}function xe(l){var c=yt();return me(c,Xn,l)}function me(l,c,g){var E=l.queue;if(E===null)throw Error(s(311));E.lastRenderedReducer=g;var A=l.baseQueue,I=E.pending;if(I!==null){if(A!==null){var Q=A.next;A.next=I.next,I.next=Q}c.baseQueue=A=I,E.pending=null}if(I=l.baseState,A===null)l.memoizedState=I;else{c=A.next;var st=Q=null,mt=null,Ft=c,le=!1;do{var ge=Ft.lane&-536870913;if(ge!==Ft.lane?(Sn&ge)===ge:(fo&ge)===ge){var Se=Ft.revertLane;if(Se===0)mt!==null&&(mt=mt.next={lane:0,revertLane:0,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null}),ge===ga&&(le=!0);else if((fo&Se)===Se){Ft=Ft.next,Se===ga&&(le=!0);continue}else ge={lane:0,revertLane:Ft.revertLane,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null},mt===null?(st=mt=ge,Q=I):mt=mt.next=ge,fn.lanes|=Se,Qa|=Se;ge=Ft.action,ko&&g(I,ge),I=Ft.hasEagerState?Ft.eagerState:g(I,ge)}else Se={lane:ge,revertLane:Ft.revertLane,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null},mt===null?(st=mt=Se,Q=I):mt=mt.next=Se,fn.lanes|=ge,Qa|=ge;Ft=Ft.next}while(Ft!==null&&Ft!==c);if(mt===null?Q=I:mt.next=st,!Ga(I,l.memoizedState)&&(Bi=!0,le&&(g=Ol,g!==null)))throw g;l.memoizedState=I,l.baseState=Q,l.baseQueue=mt,E.lastRenderedState=I}return A===null&&(E.lanes=0),[l.memoizedState,E.dispatch]}function Ie(l){var c=yt(),g=c.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=l;var E=g.dispatch,A=g.pending,I=c.memoizedState;if(A!==null){g.pending=null;var Q=A=A.next;do I=l(I,Q.action),Q=Q.next;while(Q!==A);Ga(I,c.memoizedState)||(Bi=!0),c.memoizedState=I,c.baseQueue===null&&(c.baseState=I),g.lastRenderedState=I}return[I,E]}function Fe(l,c,g){var E=fn,A=yt(),I=zn;if(I){if(g===void 0)throw Error(s(407));g=g()}else g=c();var Q=!Ga((Xn||A).memoizedState,g);if(Q&&(A.memoizedState=g,Bi=!0),A=A.queue,ll(Nn.bind(null,E,A,l),[l]),A.getSnapshot!==c||Q||Vi!==null&&Vi.memoizedState.tag&1){if(E.flags|=2048,Pi(9,ln.bind(null,E,A,g,c),{destroy:void 0},null),Tn===null)throw Error(s(349));I||(fo&60)!==0||Oe(E,c,g)}return g}function Oe(l,c,g){l.flags|=16384,l={getSnapshot:c,value:g},c=fn.updateQueue,c===null?(c=Ad(),fn.updateQueue=c,c.stores=[l]):(g=c.stores,g===null?c.stores=[l]:g.push(l))}function ln(l,c,g,E){c.value=g,c.getSnapshot=E,Kn(c)&&mn(l)}function Nn(l,c,g){return g(function(){Kn(c)&&mn(l)})}function Kn(l){var c=l.getSnapshot;l=l.value;try{var g=c();return!Ga(l,g)}catch{return!0}}function mn(l){var c=Pt(l,2);c!==null&&Ds(c,l,2)}function je(l){var c=lt();if(typeof l=="function"){var g=l;if(l=g(),ko){et(!0);try{g()}finally{et(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ce,lastRenderedState:l},c}function ve(l,c,g,E){return l.baseState=g,me(l,Xn,typeof E=="function"?E:ce)}function Gn(l,c,g,E,A){if(Yr(l))throw Error(s(485));if(l=c.action,l!==null){var I={payload:A,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Q){I.listeners.push(Q)}};qe.T!==null?g(!0):I.isTransition=!1,E(I),g=c.pending,g===null?(I.next=c.pending=I,yn(c,I)):(I.next=g.next,c.pending=g.next=I)}}function yn(l,c){var g=c.action,E=c.payload,A=l.state;if(c.isTransition){var I=qe.T,Q={};qe.T=Q;try{var st=g(A,E),mt=qe.S;mt!==null&&mt(Q,st),sn(l,c,st)}catch(Ft){ui(l,c,Ft)}finally{qe.T=I}}else try{I=g(A,E),sn(l,c,I)}catch(Ft){ui(l,c,Ft)}}function sn(l,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(E){ks(l,c,E)},function(E){return ui(l,c,E)}):ks(l,c,g)}function ks(l,c,g){c.status="fulfilled",c.value=g,oa(c),l.state=g,c=l.pending,c!==null&&(g=c.next,g===c?l.pending=null:(g=g.next,c.next=g,yn(l,g)))}function ui(l,c,g){var E=l.pending;if(l.pending=null,E!==null){E=E.next;do c.status="rejected",c.reason=g,oa(c),c=c.next;while(c!==E)}l.action=null}function oa(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function vn(l,c){return c}function Xi(l,c){if(zn){var g=Tn.formState;if(g!==null){t:{var E=fn;if(zn){if(Ts){var A=ny(Ts,hr);if(A){Ts=Vm(A),E=iy(A);break t}}ae(E)}E=!1}E&&(c=g[0])}}g=lt(),g.memoizedState=g.baseState=c,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:c},g.queue=E,g=$u.bind(null,fn,E),E.dispatch=g,E=je(!1);var I=ru.bind(null,fn,!1,E.queue);return E=lt(),A={state:c,dispatch:null,action:l,pending:null},E.queue=A,g=Gn.bind(null,fn,A,I,g),A.dispatch=g,E.memoizedState=l,[c,g,!1]}function as(l){var c=yt();return Ci(c,Xn,l)}function Ci(l,c,g){c=me(l,c,vn)[0],l=xe(ce)[0],c=typeof c=="object"&&c!==null&&typeof c.then=="function"?Tt(c):c;var E=yt(),A=E.queue,I=A.dispatch;return g!==E.memoizedState&&(fn.flags|=2048,Pi(9,Ei.bind(null,A,g),{destroy:void 0},null)),[c,I,l]}function Ei(l,c){l.action=c}function bo(l){var c=yt(),g=Xn;if(g!==null)return Ci(c,g,l);yt(),c=c.memoizedState,g=yt();var E=g.queue.dispatch;return g.memoizedState=l,[c,E,!1]}function Pi(l,c,g,E){return l={tag:l,create:c,inst:g,deps:E,next:null},c=fn.updateQueue,c===null&&(c=Ad(),fn.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=l.next=l:(E=g.next,g.next=l,l.next=E,c.lastEffect=l),l}function qs(){return yt().memoizedState}function nu(l,c,g,E){var A=lt();fn.flags|=l,A.memoizedState=Pi(1|c,g,{destroy:void 0},E===void 0?null:E)}function ol(l,c,g,E){var A=yt();E=E===void 0?null:E;var I=A.memoizedState.inst;Xn!==null&&E!==null&&xi(E,Xn.memoizedState.deps)?A.memoizedState=Pi(c,g,I,E):(fn.flags|=l,A.memoizedState=Pi(1|c,g,I,E))}function Ju(l,c){nu(8390656,8,l,c)}function ll(l,c){ol(2048,8,l,c)}function _h(l,c){return ol(4,2,l,c)}function Mo(l,c){return ol(4,4,l,c)}function iu(l,c){if(typeof c=="function"){l=l();var g=c(l);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function sr(l,c,g){g=g!=null?g.concat([l]):null,ol(4,4,iu.bind(null,c,l),g)}function su(){}function Ua(l,c){var g=yt();c=c===void 0?null:c;var E=g.memoizedState;return c!==null&&xi(c,E[1])?E[0]:(g.memoizedState=[l,c],l)}function Ao(l,c){var g=yt();c=c===void 0?null:c;var E=g.memoizedState;if(c!==null&&xi(c,E[1]))return E[0];if(E=l(),ko){et(!0);try{l()}finally{et(!1)}}return g.memoizedState=[E,c],E}function ar(l,c,g){return g===void 0||(fo&1073741824)!==0?l.memoizedState=c:(l.memoizedState=g,l=to(),fn.lanes|=l,Qa|=l,g)}function ul(l,c,g,E){return Ga(g,c)?g:ho.current!==null?(l=ar(l,g,E),Ga(l,c)||(Bi=!0),l):(fo&42)===0?(Bi=!0,l.memoizedState=g):(l=to(),fn.lanes|=l,Qa|=l,c)}function au(l,c,g,E,A){var I=$i();Is(I!==0&&8>I?I:8);var Q=qe.T,st={};qe.T=st,ru(l,!1,c,g);try{var mt=A(),Ft=qe.S;if(Ft!==null&&Ft(st,mt),mt!==null&&typeof mt=="object"&&typeof mt.then=="function"){var le=oe(mt,E);Ar(l,c,le,Ys(l))}else Ar(l,c,E,Ys(l))}catch(ge){Ar(l,c,{then:function(){},status:"rejected",reason:ge},Ys())}finally{Is(I),qe.T=Q}}function Ro(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:da,baseState:da,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ce,lastRenderedState:da},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ce,lastRenderedState:g},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function Oa(){return mi(Ke)}function La(){return yt().memoizedState}function cl(){return yt().memoizedState}function ni(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var g=Ys();l=Yt(g);var E=ie(c,l,g);E!==null&&(Ds(E,c,g),Ce(E,c,g)),c={cache:Co()},l.payload=c;return}c=c.return}}function jr(l,c,g){var E=Ys();g={lane:E,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},Yr(l)?Wr(c,g):(g=Vt(l,c,g,E),g!==null&&(Ds(g,l,E),rr(g,c,E)))}function $u(l,c,g){var E=Ys();Ar(l,c,g,E)}function Ar(l,c,g,E){var A={lane:E,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(Yr(l))Wr(c,A);else{var I=l.alternate;if(l.lanes===0&&(I===null||I.lanes===0)&&(I=c.lastRenderedReducer,I!==null))try{var Q=c.lastRenderedState,st=I(Q,g);if(A.hasEagerState=!0,A.eagerState=st,Ga(st,Q))return Ht(l,c,A,0),Tn===null&&qt(),!1}catch{}finally{}if(g=Vt(l,c,A,E),g!==null)return Ds(g,l,E),rr(g,c,E),!0}return!1}function ru(l,c,g,E){if(E={lane:2,revertLane:Qt(),action:E,hasEagerState:!1,eagerState:null,next:null},Yr(l)){if(c)throw Error(s(479))}else c=Vt(l,g,E,2),c!==null&&Ds(c,l,2)}function Yr(l){var c=l.alternate;return l===fn||c!==null&&c===fn}function Wr(l,c){vi=pr=!0;var g=l.pending;g===null?c.next=c:(c.next=g.next,g.next=c),l.pending=c}function rr(l,c,g){if((g&4194176)!==0){var E=c.lanes;E&=l.pendingLanes,g|=E,c.lanes=g,gt(l,g)}}function Ji(l,c,g,E){c=l.memoizedState,g=g(E,c),g=g==null?c:mu({},c,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}function Kr(l,c,g,E,A,I,Q){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(E,I,Q):c.prototype&&c.prototype.isPureReactComponent?!re(g,E)||!re(A,I):!0}function Rr(l,c,g,E){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,E),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,E),c.state!==l&&Rd.enqueueReplaceState(c,c.state,null)}function la(l,c){var g=c;if("ref"in c){g={};for(var E in c)E!=="ref"&&(g[E]=c[E])}if(l=l.defaultProps){g===c&&(g=mu({},g));for(var A in l)g[A]===void 0&&(g[A]=l[A])}return g}function hl(l,c){try{var g=l.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(E){setTimeout(function(){throw E})}}function wo(l,c,g){try{var E=l.onCaughtError;E(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function fl(l,c,g){return g=Yt(g),g.tag=3,g.payload={element:null},g.callback=function(){hl(l,c)},g}function wr(l){return l=Yt(l),l.tag=3,l}function ou(l,c,g,E){var A=g.type.getDerivedStateFromError;if(typeof A=="function"){var I=E.value;l.payload=function(){return A(I)},l.callback=function(){wo(c,g,E)}}var Q=g.stateNode;Q!==null&&typeof Q.componentDidCatch=="function"&&(l.callback=function(){wo(c,g,E),typeof A!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var st=E.stack;this.componentDidCatch(E.value,{componentStack:st!==null?st:""})})}function yh(l,c,g,E,A){if(g.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(c=g.alternate,c!==null&&wn(c,g,A,!0),g=Wa.current,g!==null){switch(g.tag){case 13:return dr===null?fa():g.alternate===null&&Un===0&&(Un=3),g.flags&=-257,g.flags|=65536,g.lanes=A,E===Md?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([E]):c.add(E),id(l,E,A)),!1;case 22:return g.flags|=65536,E===Md?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([E])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([E]):g.add(E)),id(l,E,A)),!1}throw Error(s(435,g.tag))}return id(l,E,A),fa(),!1}if(zn)return c=Wa.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=A,E!==Zh&&(l=Error(s(422),{cause:E}),it(ft(l,g)))):(E!==Zh&&(c=Error(s(423),{cause:E}),it(ft(c,g))),l=l.current.alternate,l.flags|=65536,A&=-A,l.lanes|=A,E=ft(E,g),A=fl(l.stateNode,E,A),pe(l,A),Un!==4&&(Un=2)),!1;var I=Error(s(520),{cause:E});if(I=ft(I,g),Ic===null?Ic=[I]:Ic.push(I),Un!==4&&(Un=2),c===null)return!0;E=ft(E,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,l=A&-A,g.lanes|=l,l=fl(g.stateNode,E,l),pe(g,l),!1;case 1:if(c=g.type,I=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Ja===null||!Ja.has(I))))return g.flags|=65536,A&=-A,g.lanes|=A,A=wr(A),ou(A,l,g,E),pe(g,A),!1}g=g.return}while(g!==null);return!1}function Ti(l,c,g,E){c.child=l===null?$m(c,null,g,E):Ll(c,l.child,g,E)}function vh(l,c,g,E,A){g=g.render;var I=c.ref;if("ref"in E){var Q={};for(var st in E)st!=="ref"&&(Q[st]=E[st])}else Q=E;return rs(c),E=aa(l,c,g,Q,I,A),st=rl(),l!==null&&!Bi?(ra(l,c,A),N(l,c,A)):(zn&&st&&ut(c),c.flags|=1,Ti(l,c,E,A),c.child)}function Sh(l,c,g,E,A){if(l===null){var I=g.type;return typeof I=="function"&&!Oo(I)&&I.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=I,dl(l,c,I,E,A)):(l=lr(g.type,null,E,c,c.mode,A),l.ref=c.ref,l.return=c,c.child=l)}if(I=l.child,!H(l,A)){var Q=I.memoizedProps;if(g=g.compare,g=g!==null?g:re,g(Q,E)&&l.ref===c.ref)return N(l,c,A)}return c.flags|=1,l=Ns(I,E),l.ref=c.ref,l.return=c,c.child=l}function dl(l,c,g,E,A){if(l!==null){var I=l.memoizedProps;if(re(I,E)&&l.ref===c.ref)if(Bi=!1,c.pendingProps=E=I,H(l,A))(l.flags&131072)!==0&&(Bi=!0);else return c.lanes=l.lanes,N(l,c,A)}return ec(l,c,g,E,A)}function tc(l,c,g){var E=c.pendingProps,A=E.children,I=(c.stateNode._pendingVisibility&2)!==0,Q=l!==null?l.memoizedState:null;if(Qr(l,c),E.mode==="hidden"||I){if((c.flags&128)!==0){if(E=Q!==null?Q.baseLanes|g:g,l!==null){for(A=c.child=l.child,I=0;A!==null;)I=I|A.lanes|A.childLanes,A=A.sibling;c.childLanes=I&~E}else c.childLanes=0,c.child=null;return xh(l,c,E,g)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&qf(c,Q!==null?Q.cachePool:null),Q!==null?br(c,Q):Gs(),Ia(c);else return c.lanes=c.childLanes=536870912,xh(l,c,Q!==null?Q.baseLanes|g:g,g)}else Q!==null?(qf(c,Q.cachePool),br(c,Q),ws(),c.memoizedState=null):(l!==null&&qf(c,null),Gs(),ws());return Ti(l,c,A,g),c.child}function xh(l,c,g,E){var A=pl();return A=A===null?null:{parent:ro?Qn._currentValue:Qn._currentValue2,pool:A},c.memoizedState={baseLanes:g,cachePool:A},l!==null&&qf(c,null),Gs(),Ia(c),l!==null&&wn(l,c,E,!0),null}function Qr(l,c){var g=c.ref;if(g===null)l!==null&&l.ref!==null&&(c.flags|=2097664);else{if(typeof g!="function"&&typeof g!="object")throw Error(s(284));(l===null||l.ref!==g)&&(c.flags|=2097664)}}function ec(l,c,g,E,A){return rs(c),g=aa(l,c,g,E,void 0,A),E=rl(),l!==null&&!Bi?(ra(l,c,A),N(l,c,A)):(zn&&E&&ut(c),c.flags|=1,Ti(l,c,g,A),c.child)}function Eh(l,c,g,E,A,I){return rs(c),c.updateQueue=null,g=Qu(c,E,g,A),To(l),E=rl(),l!==null&&!Bi?(ra(l,c,I),N(l,c,I)):(zn&&E&&ut(c),c.flags|=1,Ti(l,c,g,I),c.child)}function Cr(l,c,g,E,A){if(rs(c),c.stateNode===null){var I=Su,Q=g.contextType;typeof Q=="object"&&Q!==null&&(I=mi(Q)),I=new g(E,I),c.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=Rd,c.stateNode=I,I._reactInternals=c,I=c.stateNode,I.props=E,I.state=c.memoizedState,I.refs={},be(c),Q=g.contextType,I.context=typeof Q=="object"&&Q!==null?mi(Q):Su,I.state=c.memoizedState,Q=g.getDerivedStateFromProps,typeof Q=="function"&&(Ji(c,g,Q,E),I.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(Q=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),Q!==I.state&&Rd.enqueueReplaceState(I,I.state,null),ke(c,E,I,A),fe(),I.state=c.memoizedState),typeof I.componentDidMount=="function"&&(c.flags|=4194308),E=!0}else if(l===null){I=c.stateNode;var st=c.memoizedProps,mt=la(g,st);I.props=mt;var Ft=I.context,le=g.contextType;Q=Su,typeof le=="object"&&le!==null&&(Q=mi(le));var ge=g.getDerivedStateFromProps;le=typeof ge=="function"||typeof I.getSnapshotBeforeUpdate=="function",st=c.pendingProps!==st,le||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(st||Ft!==Q)&&Rr(c,I,E,Q),Go=!1;var Se=c.memoizedState;I.state=Se,ke(c,E,I,A),fe(),Ft=c.memoizedState,st||Se!==Ft||Go?(typeof ge=="function"&&(Ji(c,g,ge,E),Ft=c.memoizedState),(mt=Go||Kr(c,g,mt,E,Se,Ft,Q))?(le||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(c.flags|=4194308)):(typeof I.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=E,c.memoizedState=Ft),I.props=E,I.state=Ft,I.context=Q,E=mt):(typeof I.componentDidMount=="function"&&(c.flags|=4194308),E=!1)}else{I=c.stateNode,Me(l,c),Q=c.memoizedProps,le=la(g,Q),I.props=le,ge=c.pendingProps,Se=I.context,Ft=g.contextType,mt=Su,typeof Ft=="object"&&Ft!==null&&(mt=mi(Ft)),st=g.getDerivedStateFromProps,(Ft=typeof st=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Q!==ge||Se!==mt)&&Rr(c,I,E,mt),Go=!1,Se=c.memoizedState,I.state=Se,ke(c,E,I,A),fe();var en=c.memoizedState;Q!==ge||Se!==en||Go||l!==null&&l.dependencies!==null&&ri(l.dependencies)?(typeof st=="function"&&(Ji(c,g,st,E),en=c.memoizedState),(le=Go||Kr(c,g,le,E,Se,en,mt)||l!==null&&l.dependencies!==null&&ri(l.dependencies))?(Ft||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(E,en,mt),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(E,en,mt)),typeof I.componentDidUpdate=="function"&&(c.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof I.componentDidUpdate!="function"||Q===l.memoizedProps&&Se===l.memoizedState||(c.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Q===l.memoizedProps&&Se===l.memoizedState||(c.flags|=1024),c.memoizedProps=E,c.memoizedState=en),I.props=E,I.state=en,I.context=mt,E=le):(typeof I.componentDidUpdate!="function"||Q===l.memoizedProps&&Se===l.memoizedState||(c.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Q===l.memoizedProps&&Se===l.memoizedState||(c.flags|=1024),E=!1)}return I=E,Qr(l,c),E=(c.flags&128)!==0,I||E?(I=c.stateNode,g=E&&typeof g.getDerivedStateFromError!="function"?null:I.render(),c.flags|=1,l!==null&&E?(c.child=Ll(c,l.child,null,A),c.child=Ll(c,null,g,A)):Ti(l,c,g,A),c.memoizedState=I.state,l=c.child):l=N(l,c,A),l}function Th(l,c,g,E){return bn(),c.flags|=256,Ti(l,c,g,E),c.child}function nc(l){return{baseLanes:l,cachePool:z_()}}function ic(l,c,g){return l=l!==null?l.childLanes&~g:0,c&&(l|=va),l}function bh(l,c,g){var E=c.pendingProps,A=!1,I=(c.flags&128)!==0,Q;if((Q=I)||(Q=l!==null&&l.memoizedState===null?!1:(Yi.current&2)!==0),Q&&(A=!0,c.flags&=-129),Q=(c.flags&32)!==0,c.flags&=-33,l===null){if(zn){if(A?_s(c):ws(),zn){var st=Ts,mt;(mt=st)&&(st=ly(st,hr),st!==null?(c.memoizedState={dehydrated:st,treeContext:Lr!==null?{id:uo,overflow:cr}:null,retryLane:536870912},mt=e(18,null,null,0),mt.stateNode=st,mt.return=c,c.child=mt,Us=c,Ts=null,mt=!0):mt=!1),mt||ae(c)}if(st=c.memoizedState,st!==null&&(st=st.dehydrated,st!==null))return kh(st)?c.lanes=16:c.lanes=536870912,null;wi(c)}return st=E.children,E=E.fallback,A?(ws(),A=c.mode,st=ys({mode:"hidden",children:st},A),E=Po(E,A,g,null),st.return=c,E.return=c,st.sibling=E,c.child=st,A=c.child,A.memoizedState=nc(g),A.childLanes=ic(l,Q,g),c.memoizedState=Ls,E):(_s(c),Zr(c,st))}if(mt=l.memoizedState,mt!==null&&(st=mt.dehydrated,st!==null)){if(I)c.flags&256?(_s(c),c.flags&=-257,c=sc(l,c,g)):c.memoizedState!==null?(ws(),c.child=l.child,c.flags|=128,c=null):(ws(),A=E.fallback,st=c.mode,E=ys({mode:"visible",children:E.children},st),A=Po(A,st,g,null),A.flags|=2,E.return=c,A.return=c,E.sibling=A,c.child=E,Ll(c,l.child,null,g),E=c.child,E.memoizedState=nc(g),E.childLanes=ic(l,Q,g),c.memoizedState=Ls,c=A);else if(_s(c),kh(st))Q=ey(st).digest,E=Error(s(419)),E.stack="",E.digest=Q,it({value:E,source:null,stack:null}),c=sc(l,c,g);else if(Bi||wn(l,c,g,!1),Q=(g&l.childLanes)!==0,Bi||Q){if(Q=Tn,Q!==null){if(E=g&-g,(E&42)!==0)E=1;else switch(E){case 2:E=1;break;case 8:E=4;break;case 32:E=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:E=64;break;case 268435456:E=134217728;break;default:E=0}if(E=(E&(Q.suspendedLanes|g))!==0?0:E,E!==0&&E!==mt.retryLane)throw mt.retryLane=E,Pt(l,E),Ds(Q,l,E),Ty}md(st)||fa(),c=sc(l,c,g)}else md(st)?(c.flags|=128,c.child=l.child,c=du.bind(null,l),ax(st,c),c=null):(l=mt.treeContext,Ws&&(Ts=ay(st),Us=c,zn=!0,Xa=null,hr=!1,l!==null&&(ka[qa++]=uo,ka[qa++]=cr,ka[qa++]=Lr,uo=l.id,cr=l.overflow,Lr=c)),c=Zr(c,E.children),c.flags|=4096);return c}return A?(ws(),A=E.fallback,st=c.mode,mt=l.child,I=mt.sibling,E=Ns(mt,{mode:"hidden",children:E.children}),E.subtreeFlags=mt.subtreeFlags&31457280,I!==null?A=Ns(I,A):(A=Po(A,st,g,null),A.flags|=2),A.return=c,E.return=c,E.sibling=A,c.child=E,E=A,A=c.child,st=l.child.memoizedState,st===null?st=nc(g):(mt=st.cachePool,mt!==null?(I=ro?Qn._currentValue:Qn._currentValue2,mt=mt.parent!==I?{parent:I,pool:I}:mt):mt=z_(),st={baseLanes:st.baseLanes|g,cachePool:mt}),A.memoizedState=st,A.childLanes=ic(l,Q,g),c.memoizedState=Ls,E):(_s(c),g=l.child,l=g.sibling,g=Ns(g,{mode:"visible",children:E.children}),g.return=c,g.sibling=null,l!==null&&(Q=c.deletions,Q===null?(c.deletions=[l],c.flags|=16):Q.push(l)),c.child=g,c.memoizedState=null,g)}function Zr(l,c){return c=ys({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function ys(l,c){return sd(l,c,0,null)}function sc(l,c,g){return Ll(c,l.child,null,g),l=Zr(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function Mh(l,c,g){l.lanes|=c;var E=l.alternate;E!==null&&(E.lanes|=c),an(l.return,c,g)}function Dr(l,c,g,E,A){var I=l.memoizedState;I===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:E,tail:g,tailMode:A}:(I.isBackwards=c,I.rendering=null,I.renderingStartTime=0,I.last=E,I.tail=g,I.tailMode=A)}function v(l,c,g){var E=c.pendingProps,A=E.revealOrder,I=E.tail;if(Ti(l,c,E.children,g),E=Yi.current,(E&2)!==0)E=E&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)t:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Mh(l,g,c);else if(l.tag===19)Mh(l,g,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break t;for(;l.sibling===null;){if(l.return===null||l.return===c)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}E&=1}switch(O(Yi,E),A){case"forwards":for(g=c.child,A=null;g!==null;)l=g.alternate,l!==null&&Zi(l)===null&&(A=g),g=g.sibling;g=A,g===null?(A=c.child,c.child=null):(A=g.sibling,g.sibling=null),Dr(c,!1,A,g,I);break;case"backwards":for(g=null,A=c.child,c.child=null;A!==null;){if(l=A.alternate,l!==null&&Zi(l)===null){c.child=A;break}l=A.sibling,A.sibling=g,g=A,A=l}Dr(c,!0,g,null,I);break;case"together":Dr(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function N(l,c,g){if(l!==null&&(c.dependencies=l.dependencies),Qa|=c.lanes,(g&c.childLanes)===0)if(l!==null){if(wn(l,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(s(153));if(c.child!==null){for(l=c.child,g=Ns(l,l.pendingProps),c.child=g,g.return=c;l.sibling!==null;)l=l.sibling,g=g.sibling=Ns(l,l.pendingProps),g.return=c;g.sibling=null}return c.child}function H(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&ri(l)))}function Z(l,c,g){switch(c.tag){case 3:Lt(c,c.stateNode.containerInfo),At(c,Qn,l.memoizedState.cache),bn();break;case 27:case 5:xt(c);break;case 4:Lt(c,c.stateNode.containerInfo);break;case 10:At(c,c.type,c.memoizedProps.value);break;case 13:var E=c.memoizedState;if(E!==null)return E.dehydrated!==null?(_s(c),c.flags|=128,null):(g&c.child.childLanes)!==0?bh(l,c,g):(_s(c),l=N(l,c,g),l!==null?l.sibling:null);_s(c);break;case 19:var A=(l.flags&128)!==0;if(E=(g&c.childLanes)!==0,E||(wn(l,c,g,!1),E=(g&c.childLanes)!==0),A){if(E)return v(l,c,g);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),O(Yi,Yi.current),E)break;return null;case 22:case 23:return c.lanes=0,tc(l,c,g);case 24:At(c,Qn,l.memoizedState.cache)}return N(l,c,g)}function St(l,c,g){if(l!==null)if(l.memoizedProps!==c.pendingProps)Bi=!0;else{if(!H(l,g)&&(c.flags&128)===0)return Bi=!1,Z(l,c,g);Bi=(l.flags&131072)!==0}else Bi=!1,zn&&(c.flags&1048576)!==0&&J(c,Kh,c.index);switch(c.lanes=0,c.tag){case 16:t:{l=c.pendingProps;var E=c.elementType,A=E._init;if(E=A(E._payload),c.type=E,typeof E=="function")Oo(E)?(l=la(E,l),c.tag=1,c=Cr(null,c,E,l,g)):(c.tag=0,c=ec(null,c,E,l,g));else{if(E!=null){if(A=E.$$typeof,A===vc){c.tag=11,c=vh(null,c,E,l,g);break t}else if(A===Lh){c.tag=14,c=Sh(null,c,E,l,g);break t}}throw c=u(E)||E,Error(s(306,c,""))}}return c;case 0:return ec(l,c,c.type,c.pendingProps,g);case 1:return E=c.type,A=la(E,c.pendingProps),Cr(l,c,E,A,g);case 3:t:{if(Lt(c,c.stateNode.containerInfo),l===null)throw Error(s(387));var I=c.pendingProps;A=c.memoizedState,E=A.element,Me(l,c),ke(c,I,null,g);var Q=c.memoizedState;if(I=Q.cache,At(c,Qn,I),I!==A.cache&&bi(c,[Qn],g,!0),fe(),I=Q.element,Ws&&A.isDehydrated)if(A={element:I,isDehydrated:!1,cache:Q.cache},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){c=Th(l,c,I,g);break t}else if(I!==E){E=ft(Error(s(424)),c),it(E),c=Th(l,c,I,g);break t}else for(Ws&&(Ts=sy(c.stateNode.containerInfo),Us=c,zn=!0,Xa=null,hr=!0),g=$m(c,null,I,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(bn(),I===E){c=N(l,c,g);break t}Ti(l,c,I,g)}c=c.child}return c;case 26:if(Ha)return Qr(l,c),l===null?(g=Sd(c.type,null,c.pendingProps,null))?c.memoizedState=g:zn||(c.stateNode=ox(c.type,c.pendingProps,Pr.current,c)):c.memoizedState=Sd(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:if(xs)return xt(c),l===null&&xs&&zn&&(E=c.stateNode=Km(c.type,c.pendingProps,Pr.current,hs.current,!1),Us=c,hr=!0,Ts=gd(E)),E=c.pendingProps.children,l!==null||zn?Ti(l,c,E,g):c.child=Ll(c,null,E,g),Qr(l,c),c.child;case 5:return l===null&&zn&&(dy(c.type,c.pendingProps,hs.current),(A=E=Ts)&&(E=ry(E,c.type,c.pendingProps,hr),E!==null?(c.stateNode=E,Us=c,Ts=gd(E),hr=!1,A=!0):A=!1),A||ae(c)),xt(c),A=c.type,I=c.pendingProps,Q=l!==null?l.memoizedProps:null,E=I.children,Dl(A,I)?E=null:Q!==null&&Dl(A,Q)&&(c.flags|=32),c.memoizedState!==null&&(A=aa(l,c,Zu,null,null,g),ro?Ke._currentValue=A:Ke._currentValue2=A),Qr(l,c),Ti(l,c,E,g),c.child;case 6:return l===null&&zn&&(py(c.pendingProps,hs.current),(l=g=Ts)&&(g=oy(g,c.pendingProps,hr),g!==null?(c.stateNode=g,Us=c,Ts=null,l=!0):l=!1),l||ae(c)),null;case 13:return bh(l,c,g);case 4:return Lt(c,c.stateNode.containerInfo),E=c.pendingProps,l===null?c.child=Ll(c,null,E,g):Ti(l,c,E,g),c.child;case 11:return vh(l,c,c.type,c.pendingProps,g);case 7:return Ti(l,c,c.pendingProps,g),c.child;case 8:return Ti(l,c,c.pendingProps.children,g),c.child;case 12:return Ti(l,c,c.pendingProps.children,g),c.child;case 10:return E=c.pendingProps,At(c,c.type,E.value),Ti(l,c,E.children,g),c.child;case 9:return A=c.type._context,E=c.pendingProps.children,rs(c),A=mi(A),E=E(A),c.flags|=1,Ti(l,c,E,g),c.child;case 14:return Sh(l,c,c.type,c.pendingProps,g);case 15:return dl(l,c,c.type,c.pendingProps,g);case 19:return v(l,c,g);case 22:return tc(l,c,g);case 24:return rs(c),E=mi(Qn),l===null?(A=pl(),A===null&&(A=Tn,I=Co(),A.pooledCache=I,I.refCount++,I!==null&&(A.pooledCacheLanes|=g),A=I),c.memoizedState={parent:E,cache:A},be(c),At(c,Qn,A)):((l.lanes&g)!==0&&(Me(l,c),ke(c,null,null,g),fe()),A=l.memoizedState,I=c.memoizedState,A.parent!==E?(A={parent:E,cache:E},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),At(c,Qn,E)):(E=I.cache,At(c,Qn,E),E!==A.cache&&bi(c,[Qn],g,!0))),Ti(l,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(s(156,c.tag))}function At(l,c,g){ro?(O(_a,c._currentValue),c._currentValue=g):(O(_a,c._currentValue2),c._currentValue2=g)}function se(l){var c=_a.current;ro?l._currentValue=c:l._currentValue2=c,M(_a)}function an(l,c,g){for(;l!==null;){var E=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,E!==null&&(E.childLanes|=c)):E!==null&&(E.childLanes&c)!==c&&(E.childLanes|=c),l===g)break;l=l.return}}function bi(l,c,g,E){var A=l.child;for(A!==null&&(A.return=l);A!==null;){var I=A.dependencies;if(I!==null){var Q=A.child;I=I.firstContext;t:for(;I!==null;){var st=I;I=A;for(var mt=0;mt<c.length;mt++)if(st.context===c[mt]){I.lanes|=g,st=I.alternate,st!==null&&(st.lanes|=g),an(I.return,g,l),E||(Q=null);break t}I=st.next}}else if(A.tag===18){if(Q=A.return,Q===null)throw Error(s(341));Q.lanes|=g,I=Q.alternate,I!==null&&(I.lanes|=g),an(Q,g,l),Q=null}else Q=A.child;if(Q!==null)Q.return=A;else for(Q=A;Q!==null;){if(Q===l){Q=null;break}if(A=Q.sibling,A!==null){A.return=Q.return,Q=A;break}Q=Q.return}A=Q}}function wn(l,c,g,E){l=null;for(var A=c,I=!1;A!==null;){if(!I){if((A.flags&524288)!==0)I=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var Q=A.alternate;if(Q===null)throw Error(s(387));if(Q=Q.memoizedProps,Q!==null){var st=A.type;Ga(A.pendingProps.value,Q.value)||(l!==null?l.push(st):l=[st])}}else if(A===Ac.current){if(Q=A.alternate,Q===null)throw Error(s(387));Q.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(l!==null?l.push(Ke):l=[Ke])}A=A.return}l!==null&&bi(c,l,g,E),c.flags|=262144}function ri(l){for(l=l.firstContext;l!==null;){var c=l.context;if(!Ga(ro?c._currentValue:c._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function rs(l){zl=l,Oi=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function mi(l){return or(zl,l)}function ua(l,c){return zl===null&&rs(l),or(l,c)}function or(l,c){var g=ro?c._currentValue:c._currentValue2;if(c={context:c,memoizedValue:g,next:null},Oi===null){if(l===null)throw Error(s(308));Oi=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else Oi=Oi.next=c;return g}function Co(){return{controller:new by,data:new Map,refCount:0}}function Jr(l){l.refCount--,l.refCount===0&&qo(Tu,function(){l.controller.abort()})}function pl(){var l=Xo.current;return l!==null?l:Tn.pooledCache}function qf(l,c){c===null?O(Xo,Xo.current):O(Xo,c.pool)}function z_(){var l=pl();return l===null?null:{parent:ro?Qn._currentValue:Qn._currentValue2,pool:l}}function Pa(l){l.flags|=4}function em(l,c){if(l!==null&&l.child===c.child)return!1;if((c.flags&16)!==0)return!0;for(l=c.child;l!==null;){if((l.flags&13878)!==0||(l.subtreeFlags&13878)!==0)return!0;l=l.sibling}return!1}function Xf(l,c,g,E){if(Ss)for(g=c.child;g!==null;){if(g.tag===5||g.tag===6)ao(l,g.stateNode);else if(!(g.tag===4||xs&&g.tag===27)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else if(Ba)for(var A=c.child;A!==null;){if(A.tag===5){var I=A.stateNode;g&&E&&(I=Pm(I,A.type,A.memoizedProps)),ao(l,I)}else if(A.tag===6)I=A.stateNode,g&&E&&(I=zm(I,A.memoizedProps)),ao(l,I);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)I=A.child,I!==null&&(I.return=A),Xf(l,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===c)break;for(;A.sibling===null;){if(A.return===null||A.return===c)return;A=A.return}A.sibling.return=A.return,A=A.sibling}}function ac(l,c,g,E){if(Ba)for(var A=c.child;A!==null;){if(A.tag===5){var I=A.stateNode;g&&E&&(I=Pm(I,A.type,A.memoizedProps)),Om(l,I)}else if(A.tag===6)I=A.stateNode,g&&E&&(I=zm(I,A.memoizedProps)),Om(l,I);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)I=A.child,I!==null&&(I.return=A),ac(l,A,!(A.memoizedProps!==null&&A.memoizedProps.mode==="manual"),!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===c)break;for(;A.sibling===null;){if(A.return===null||A.return===c)return;A=A.return}A.sibling.return=A.return,A=A.sibling}}function rc(l,c){if(Ba&&em(l,c)){l=c.stateNode;var g=l.containerInfo,E=pd();ac(E,c,!1,!1),l.pendingChildren=E,Pa(c),ty(g,E)}}function nm(l,c,g,E){if(Ss)l.memoizedProps!==E&&Pa(c);else if(Ba){var A=l.stateNode,I=l.memoizedProps;if((l=em(l,c))||I!==E){var Q=hs.current;I=Um(A,g,I,E,!l,null),I===A?c.stateNode=A:(Vo(I,g,E,Q)&&Pa(c),c.stateNode=I,l?Xf(I,c,!1,!1):Pa(c))}else c.stateNode=A}}function oc(l,c,g){if(Z_(c,g)){if(l.flags|=16777216,!Bo(c,g))if(Nh())l.flags|=8192;else throw Eu=Md,Jm}else l.flags&=-16777217}function im(l,c){if(my(c)){if(l.flags|=16777216,!Ym(c))if(Nh())l.flags|=8192;else throw Eu=Md,Jm}else l.flags&=-16777217}function Ah(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?D():536870912,l.lanes|=c,Yo|=c)}function lu(l,c){if(!zn)switch(l.tailMode){case"hidden":c=l.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var E=null;g!==null;)g.alternate!==null&&(E=g),g=g.sibling;E===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:E.sibling=null}}function gi(l){var c=l.alternate!==null&&l.alternate.child===l.child,g=0,E=0;if(c)for(var A=l.child;A!==null;)g|=A.lanes|A.childLanes,E|=A.subtreeFlags&31457280,E|=A.flags&31457280,A.return=l,A=A.sibling;else for(A=l.child;A!==null;)g|=A.lanes|A.childLanes,E|=A.subtreeFlags,E|=A.flags,A.return=l,A=A.sibling;return l.subtreeFlags|=E,l.childLanes=g,c}function V_(l,c,g){var E=c.pendingProps;switch(Ot(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(c),null;case 1:return gi(c),null;case 3:return g=c.stateNode,E=null,l!==null&&(E=l.memoizedState.cache),c.memoizedState.cache!==E&&(c.flags|=2048),se(Qn),ee(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(Ze(c)?Pa(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Xa!==null&&(No(Xa),Xa=null))),rc(l,c),gi(c),null;case 26:if(Ha){g=c.type;var A=c.memoizedState;return l===null?(Pa(c),A!==null?(gi(c),im(c,A)):(gi(c),oc(c,g,E))):A?A!==l.memoizedState?(Pa(c),gi(c),im(c,A)):(gi(c),c.flags&=-16777217):(Ss?l.memoizedProps!==E&&Pa(c):nm(l,c,g,E),gi(c),oc(c,g,E)),null}case 27:if(xs){if(It(c),g=Pr.current,A=c.type,l!==null&&c.stateNode!=null)Ss?l.memoizedProps!==E&&Pa(c):nm(l,c,A,E);else{if(!E){if(c.stateNode===null)throw Error(s(166));return gi(c),null}l=hs.current,Ze(c)?de(c,l):(l=Km(A,E,g,l,!0),c.stateNode=l,Pa(c))}return gi(c),null}case 5:if(It(c),g=c.type,l!==null&&c.stateNode!=null)nm(l,c,g,E);else{if(!E){if(c.stateNode===null)throw Error(s(166));return gi(c),null}l=hs.current,Ze(c)?de(c,l):(A=Em(g,E,Pr.current,l,c),Xf(A,c,!1,!1),c.stateNode=A,Vo(A,g,E,l)&&Pa(c))}return gi(c),oc(c,c.type,c.pendingProps),null;case 6:if(l&&c.stateNode!=null)g=l.memoizedProps,Ss?g!==E&&Pa(c):Ba&&(g!==E?(c.stateNode=ld(E,Pr.current,hs.current,c),Pa(c)):c.stateNode=l.stateNode);else{if(typeof E!="string"&&c.stateNode===null)throw Error(s(166));if(l=Pr.current,g=hs.current,Ze(c)){if(!Ws)throw Error(s(176));if(l=c.stateNode,g=c.memoizedProps,E=null,A=Us,A!==null)switch(A.tag){case 27:case 5:E=A.memoizedProps}uy(l,g,c,E)||ae(c)}else c.stateNode=ld(E,l,g,c)}return gi(c),null;case 13:if(E=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(A=Ze(c),E!==null&&E.dehydrated!==null){if(l===null){if(!A)throw Error(s(318));if(!Ws)throw Error(s(344));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(s(317));xc(A,c)}else bn(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;gi(c),A=!1}else Xa!==null&&(No(Xa),Xa=null),A=!0;if(!A)return c.flags&256?(wi(c),c):(wi(c),null)}if(wi(c),(c.flags&128)!==0)return c.lanes=g,c;if(g=E!==null,l=l!==null&&l.memoizedState!==null,g){E=c.child,A=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(A=E.alternate.memoizedState.cachePool.pool);var I=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(I=E.memoizedState.cachePool.pool),I!==A&&(E.flags|=2048)}return g!==l&&g&&(c.child.flags|=8192),Ah(c,c.updateQueue),gi(c),null;case 4:return ee(),rc(l,c),l===null&&Mm(c.stateNode.containerInfo),gi(c),null;case 10:return se(c.type),gi(c),null;case 19:if(M(Yi),A=c.memoizedState,A===null)return gi(c),null;if(E=(c.flags&128)!==0,I=A.rendering,I===null)if(E)lu(A,!1);else{if(Un!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(I=Zi(l),I!==null){for(c.flags|=128,lu(A,!1),l=I.updateQueue,c.updateQueue=l,Ah(c,l),c.subtreeFlags=0,l=g,g=c.child;g!==null;)Lo(g,l),g=g.sibling;return O(Yi,Yi.current&1|2),c.child}l=l.sibling}A.tail!==null&&Es()>Ai&&(c.flags|=128,E=!0,lu(A,!1),c.lanes=4194304)}else{if(!E)if(l=Zi(I),l!==null){if(c.flags|=128,E=!0,l=l.updateQueue,c.updateQueue=l,Ah(c,l),lu(A,!0),A.tail===null&&A.tailMode==="hidden"&&!I.alternate&&!zn)return gi(c),null}else 2*Es()-A.renderingStartTime>Ai&&g!==536870912&&(c.flags|=128,E=!0,lu(A,!1),c.lanes=4194304);A.isBackwards?(I.sibling=c.child,c.child=I):(l=A.last,l!==null?l.sibling=I:c.child=I,A.last=I)}return A.tail!==null?(c=A.tail,A.rendering=c,A.tail=c.sibling,A.renderingStartTime=Es(),c.sibling=null,l=Yi.current,O(Yi,E?l&1|2:l&1),c):(gi(c),null);case 22:case 23:return wi(c),Mr(),E=c.memoizedState!==null,l!==null?l.memoizedState!==null!==E&&(c.flags|=8192):E&&(c.flags|=8192),E?(g&536870912)!==0&&(c.flags&128)===0&&(gi(c),c.subtreeFlags&6&&(c.flags|=8192)):gi(c),g=c.updateQueue,g!==null&&Ah(c,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),E=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(E=c.memoizedState.cachePool.pool),E!==g&&(c.flags|=2048),l!==null&&M(Xo),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),se(Qn),gi(c),null;case 25:return null}throw Error(s(156,c.tag))}function B_(l,c){switch(Ot(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return se(Qn),ee(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return It(c),null;case 13:if(wi(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(s(340));bn()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return M(Yi),null;case 4:return ee(),null;case 10:return se(c.type),null;case 22:case 23:return wi(c),Mr(),l!==null&&M(Xo),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return se(Qn),null;case 25:return null;default:return null}}function sm(l,c){switch(Ot(c),c.tag){case 3:se(Qn),ee();break;case 26:case 27:case 5:It(c);break;case 4:ee();break;case 13:wi(c);break;case 19:M(Yi);break;case 10:se(c.type);break;case 22:case 23:wi(c),Mr(),l!==null&&M(Xo);break;case 24:se(Qn)}}function Rh(l,c){try{var g=c.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var A=E.next;g=A;do{if((g.tag&l)===l){E=void 0;var I=g.create,Q=g.inst;E=I(),Q.destroy=E}g=g.next}while(g!==A)}}catch(st){Mn(c,c.return,st)}}function ml(l,c,g){try{var E=c.updateQueue,A=E!==null?E.lastEffect:null;if(A!==null){var I=A.next;E=I;do{if((E.tag&l)===l){var Q=E.inst,st=Q.destroy;if(st!==void 0){Q.destroy=void 0,A=c;var mt=g;try{st()}catch(Ft){Mn(A,mt,Ft)}}}E=E.next}while(E!==I)}}catch(Ft){Mn(c,c.return,Ft)}}function F_(l){var c=l.updateQueue;if(c!==null){var g=l.stateNode;try{te(c,g)}catch(E){Mn(l,l.return,E)}}}function H_(l,c,g){g.props=la(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(E){Mn(l,c,E)}}function uu(l,c){try{var g=l.ref;if(g!==null){var E=l.stateNode;switch(l.tag){case 26:case 27:case 5:var A=Sc(E);break;default:A=E}typeof g=="function"?l.refCleanup=g(A):g.current=A}}catch(I){Mn(l,c,I)}}function _i(l,c){var g=l.ref,E=l.refCleanup;if(g!==null)if(typeof E=="function")try{E()}catch(A){Mn(l,c,A)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(A){Mn(l,c,A)}else g.current=null}function lc(l){var c=l.type,g=l.memoizedProps,E=l.stateNode;try{sx(E,c,g,l)}catch(A){Mn(l,l.return,A)}}function am(l,c,g){try{Cm(l.stateNode,l.type,g,c,l)}catch(E){Mn(l,l.return,E)}}function rm(l){return l.tag===5||l.tag===3||(Ha?l.tag===26:!1)||(xs?l.tag===27:!1)||l.tag===4}function jf(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||rm(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&(!xs||l.tag!==27)&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Yf(l,c,g){var E=l.tag;if(E===5||E===6)l=l.stateNode,c?Nm(g,l,c):J_(g,l);else if(!(E===4||xs&&E===27)&&(l=l.child,l!==null))for(Yf(l,c,g),l=l.sibling;l!==null;)Yf(l,c,g),l=l.sibling}function uc(l,c,g){var E=l.tag;if(E===5||E===6)l=l.stateNode,c?Dm(g,l,c):wm(g,l);else if(!(E===4||xs&&E===27)&&(l=l.child,l!==null))for(uc(l,c,g),l=l.sibling;l!==null;)uc(l,c,g),l=l.sibling}function G_(l,c,g){l=l.containerInfo;try{Lm(l,g)}catch(E){Mn(c,c.return,E)}}function cc(l,c){for(Cl(l.containerInfo),Li=c;Li!==null;)if(l=Li,c=l.child,(l.subtreeFlags&1028)!==0&&c!==null)c.return=l,Li=c;else for(;Li!==null;){l=Li;var g=l.alternate;switch(c=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&g!==null){c=void 0;var E=l,A=g.memoizedProps;g=g.memoizedState;var I=E.stateNode;try{var Q=la(E.type,A,E.elementType===E.type);c=I.getSnapshotBeforeUpdate(Q,g),I.__reactInternalSnapshotBeforeUpdate=c}catch(st){Mn(E,E.return,st)}}break;case 3:(c&1024)!==0&&Ss&&dd(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(s(163))}if(c=l.sibling,c!==null){c.return=l.return,Li=c;break}Li=l.return}return Q=bu,bu=!1,Q}function Wf(l,c,g){var E=g.flags;switch(g.tag){case 0:case 11:case 15:$r(l,g),E&4&&Rh(5,g);break;case 1:if($r(l,g),E&4)if(l=g.stateNode,c===null)try{l.componentDidMount()}catch(st){Mn(g,g.return,st)}else{var A=la(g.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(A,c,l.__reactInternalSnapshotBeforeUpdate)}catch(st){Mn(g,g.return,st)}}E&64&&F_(g),E&512&&uu(g,g.return);break;case 3:if($r(l,g),E&64&&(E=g.updateQueue,E!==null)){if(l=null,g.child!==null)switch(g.child.tag){case 27:case 5:l=Sc(g.child.stateNode);break;case 1:l=g.child.stateNode}try{te(E,l)}catch(st){Mn(g,g.return,st)}}break;case 26:if(Ha){$r(l,g),E&512&&uu(g,g.return);break}case 27:case 5:$r(l,g),c===null&&E&4&&lc(g),E&512&&uu(g,g.return);break;case 12:$r(l,g);break;case 13:$r(l,g),E&4&&gl(l,g);break;case 22:if(A=g.memoizedState!==null||ts,!A){c=c!==null&&c.memoizedState!==null||Mi;var I=ts,Q=Mi;ts=A,(Mi=c)&&!Q?yl(l,g,(g.subtreeFlags&8772)!==0):$r(l,g),ts=I,Mi=Q}E&512&&(g.memoizedProps.mode==="manual"?uu(g,g.return):_i(g,g.return));break;default:$r(l,g)}}function hc(l){var c=l.alternate;c!==null&&(l.alternate=null,hc(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&Am(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function za(l,c,g){for(g=g.child;g!==null;)Kf(l,c,g),g=g.sibling}function Kf(l,c,g){if(ma&&typeof ma.onCommitFiberUnmount=="function")try{ma.onCommitFiberUnmount(Mc,g)}catch{}switch(g.tag){case 26:if(Ha){Mi||_i(g,c),za(l,c,g),g.memoizedState?Gm(g.memoizedState):g.stateNode&&Xm(g.stateNode);break}case 27:if(xs){Mi||_i(g,c);var E=Fi,A=ya;Fi=g.stateNode,za(l,c,g),gy(g.stateNode),Fi=E,ya=A;break}case 5:Mi||_i(g,c);case 6:if(Ss){if(E=Fi,A=ya,Fi=null,za(l,c,g),Fi=E,ya=A,Fi!==null)if(ya)try{zi(Fi,g.stateNode)}catch(I){Mn(g,c,I)}else try{Ks(Fi,g.stateNode)}catch(I){Mn(g,c,I)}}else za(l,c,g);break;case 18:Ss&&Fi!==null&&(ya?Bm(Fi,g.stateNode):hy(Fi,g.stateNode));break;case 4:Ss?(E=Fi,A=ya,Fi=g.stateNode.containerInfo,ya=!0,za(l,c,g),Fi=E,ya=A):(Ba&&G_(g.stateNode,g,pd()),za(l,c,g));break;case 0:case 11:case 14:case 15:Mi||ml(2,g,c),Mi||ml(4,g,c),za(l,c,g);break;case 1:Mi||(_i(g,c),E=g.stateNode,typeof E.componentWillUnmount=="function"&&H_(g,c,E)),za(l,c,g);break;case 21:za(l,c,g);break;case 22:Mi||_i(g,c),Mi=(E=Mi)||g.memoizedState!==null,za(l,c,g),Mi=E;break;default:za(l,c,g)}}function gl(l,c){if(Ws&&c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{yd(l)}catch(g){Mn(c,c.return,g)}}function fc(l){switch(l.tag){case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new Nc),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new Nc),c;default:throw Error(s(435,l.tag))}}function wh(l,c){var g=fc(l);c.forEach(function(E){var A=hm.bind(null,l,E);g.has(E)||(g.add(E),E.then(A,A))})}function Xs(l,c){var g=c.deletions;if(g!==null)for(var E=0;E<g.length;E++){var A=g[E],I=l,Q=c;if(Ss){var st=Q;t:for(;st!==null;){switch(st.tag){case 27:case 5:Fi=st.stateNode,ya=!1;break t;case 3:Fi=st.stateNode.containerInfo,ya=!0;break t;case 4:Fi=st.stateNode.containerInfo,ya=!0;break t}st=st.return}if(Fi===null)throw Error(s(160));Kf(I,Q,A),Fi=null,ya=!1}else Kf(I,Q,A);I=A.alternate,I!==null&&(I.return=null),A.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)_l(c,l),c=c.sibling}function _l(l,c){var g=l.alternate,E=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Xs(c,l),ca(l),E&4&&(ml(3,l,l.return),Rh(3,l),ml(5,l,l.return));break;case 1:Xs(c,l),ca(l),E&512&&(Mi||g===null||_i(g,g.return)),E&64&&ts&&(l=l.updateQueue,l!==null&&(E=l.callbacks,E!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?E:g.concat(E))));break;case 26:if(Ha){var A=Qs;Xs(c,l),ca(l),E&512&&(Mi||g===null||_i(g,g.return)),E&4&&(E=g!==null?g.memoizedState:null,c=l.memoizedState,g===null?c===null?l.stateNode===null?l.stateNode=km(A,l.type,l.memoizedProps,l):qm(A,l.type,l.stateNode):l.stateNode=Hm(A,c,l.memoizedProps):E!==c?(E===null?g.stateNode!==null&&Xm(g.stateNode):Gm(E),c===null?qm(A,l.type,l.stateNode):Hm(A,c,l.memoizedProps)):c===null&&l.stateNode!==null&&am(l,l.memoizedProps,g.memoizedProps));break}case 27:if(xs&&E&4&&l.alternate===null){A=l.stateNode;var I=l.memoizedProps;try{lx(A),ux(l.type,I,A,l)}catch(le){Mn(l,l.return,le)}}case 5:if(Xs(c,l),ca(l),E&512&&(Mi||g===null||_i(g,g.return)),Ss){if(l.flags&32){c=l.stateNode;try{Hh(c)}catch(le){Mn(l,l.return,le)}}E&4&&l.stateNode!=null&&(c=l.memoizedProps,am(l,c,g!==null?g.memoizedProps:c)),E&1024&&(Vl=!0)}break;case 6:if(Xs(c,l),ca(l),E&4&&Ss){if(l.stateNode===null)throw Error(s(162));E=l.memoizedProps,g=g!==null?g.memoizedProps:E,c=l.stateNode;try{$_(c,g,E)}catch(le){Mn(l,l.return,le)}}break;case 3:if(Ha?(jm(),A=Qs,Qs=vd(c.containerInfo),Xs(c,l),Qs=A):Xs(c,l),ca(l),E&4){if(Ss&&Ws&&g!==null&&g.memoizedState.isDehydrated)try{_d(c.containerInfo)}catch(le){Mn(l,l.return,le)}if(Ba){E=c.containerInfo,g=c.pendingChildren;try{Lm(E,g)}catch(le){Mn(l,l.return,le)}}}Vl&&(Vl=!1,om(l));break;case 4:Ha?(g=Qs,Qs=vd(l.stateNode.containerInfo),Xs(c,l),ca(l),Qs=g):(Xs(c,l),ca(l)),E&4&&Ba&&G_(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:Xs(c,l),ca(l);break;case 13:Xs(c,l),ca(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(po=Es()),E&4&&(E=l.updateQueue,E!==null&&(l.updateQueue=null,wh(l,E)));break;case 22:E&512&&(Mi||g===null||_i(g,g.return)),A=l.memoizedState!==null;var Q=g!==null&&g.memoizedState!==null,st=ts,mt=Mi;if(ts=st||A,Mi=mt||Q,Xs(c,l),Mi=mt,ts=st,ca(l),c=l.stateNode,c._current=l,c._visibility&=-3,c._visibility|=c._pendingVisibility&2,E&8192&&(c._visibility=A?c._visibility&-2:c._visibility|1,A&&(c=ts||Mi,g===null||Q||c||dc(l)),Ss&&(l.memoizedProps===null||l.memoizedProps.mode!=="manual"))){t:if(g=null,Ss)for(c=l;;){if(c.tag===5||Ha&&c.tag===26||xs&&c.tag===27){if(g===null){Q=g=c;try{I=Q.stateNode,A?Gh(I):Im(Q.stateNode,Q.memoizedProps)}catch(le){Mn(Q,Q.return,le)}}}else if(c.tag===6){if(g===null){Q=c;try{var Ft=Q.stateNode;A?fd(Ft):Fo(Ft,Q.memoizedProps)}catch(le){Mn(Q,Q.return,le)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break t;for(;c.sibling===null;){if(c.return===null||c.return===l)break t;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}}E&4&&(E=l.updateQueue,E!==null&&(g=E.retryQueue,g!==null&&(E.retryQueue=null,wh(l,g))));break;case 19:Xs(c,l),ca(l),E&4&&(E=l.updateQueue,E!==null&&(l.updateQueue=null,wh(l,E)));break;case 21:break;default:Xs(c,l),ca(l)}}function ca(l){var c=l.flags;if(c&2){try{if(Ss&&(!xs||l.tag!==27)){t:{for(var g=l.return;g!==null;){if(rm(g)){var E=g;break t}g=g.return}throw Error(s(160))}switch(E.tag){case 27:if(xs){var A=E.stateNode,I=jf(l);uc(l,I,A);break}case 5:var Q=E.stateNode;E.flags&32&&(Hh(Q),E.flags&=-33);var st=jf(l);uc(l,st,Q);break;case 3:case 4:var mt=E.stateNode.containerInfo,Ft=jf(l);Yf(l,Ft,mt);break;default:throw Error(s(161))}}}catch(le){Mn(l,l.return,le)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function om(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;om(c),c.tag===5&&c.flags&1024&&ii(c.stateNode),l=l.sibling}}function $r(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Wf(l,c.alternate,c),c=c.sibling}function dc(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:ml(4,c,c.return),dc(c);break;case 1:_i(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&H_(c,c.return,g),dc(c);break;case 26:case 27:case 5:_i(c,c.return),dc(c);break;case 22:_i(c,c.return),c.memoizedState===null&&dc(c);break;default:dc(c)}l=l.sibling}}function yl(l,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var E=c.alternate,A=l,I=c,Q=I.flags;switch(I.tag){case 0:case 11:case 15:yl(A,I,g),Rh(4,I);break;case 1:if(yl(A,I,g),E=I,A=E.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Ft){Mn(E,E.return,Ft)}if(E=I,A=E.updateQueue,A!==null){var st=E.stateNode;try{var mt=A.shared.hiddenCallbacks;if(mt!==null)for(A.shared.hiddenCallbacks=null,A=0;A<mt.length;A++)ot(mt[A],st)}catch(Ft){Mn(E,E.return,Ft)}}g&&Q&64&&F_(I),uu(I,I.return);break;case 26:case 27:case 5:yl(A,I,g),g&&E===null&&Q&4&&lc(I),uu(I,I.return);break;case 12:yl(A,I,g);break;case 13:yl(A,I,g),g&&Q&4&&gl(A,I);break;case 22:I.memoizedState===null&&yl(A,I,g),uu(I,I.return);break;default:yl(A,I,g)}c=c.sibling}}function lm(l,c){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&Jr(g))}function Qf(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Jr(l))}function Do(l,c,g,E){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Zf(l,c,g,E),c=c.sibling}function Zf(l,c,g,E){var A=c.flags;switch(c.tag){case 0:case 11:case 15:Do(l,c,g,E),A&2048&&Rh(9,c);break;case 3:Do(l,c,g,E),A&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Jr(l)));break;case 12:if(A&2048){Do(l,c,g,E),l=c.stateNode;try{var I=c.memoizedProps,Q=I.id,st=I.onPostCommit;typeof st=="function"&&st(Q,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(mt){Mn(c,c.return,mt)}}else Do(l,c,g,E);break;case 23:break;case 22:I=c.stateNode,c.memoizedState!==null?I._visibility&4?Do(l,c,g,E):vl(l,c):I._visibility&4?Do(l,c,g,E):(I._visibility|=4,Cs(l,c,g,E,(c.subtreeFlags&10256)!==0)),A&2048&&lm(c.alternate,c);break;case 24:Do(l,c,g,E),A&2048&&Qf(c.alternate,c);break;default:Do(l,c,g,E)}}function Cs(l,c,g,E,A){for(A=A&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var I=l,Q=c,st=g,mt=E,Ft=Q.flags;switch(Q.tag){case 0:case 11:case 15:Cs(I,Q,st,mt,A),Rh(8,Q);break;case 23:break;case 22:var le=Q.stateNode;Q.memoizedState!==null?le._visibility&4?Cs(I,Q,st,mt,A):vl(I,Q):(le._visibility|=4,Cs(I,Q,st,mt,A)),A&&Ft&2048&&lm(Q.alternate,Q);break;case 24:Cs(I,Q,st,mt,A),A&&Ft&2048&&Qf(Q.alternate,Q);break;default:Cs(I,Q,st,mt,A)}c=c.sibling}}function vl(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=l,E=c,A=E.flags;switch(E.tag){case 22:vl(g,E),A&2048&&lm(E.alternate,E);break;case 24:vl(g,E),A&2048&&Qf(E.alternate,E);break;default:vl(g,E)}c=c.sibling}}function os(l){if(l.subtreeFlags&Mu)for(l=l.child;l!==null;)cu(l),l=l.sibling}function cu(l){switch(l.tag){case 26:os(l),l.flags&Mu&&(l.memoizedState!==null?Wm(Qs,l.memoizedState,l.memoizedProps):Di(l.type,l.memoizedProps));break;case 5:os(l),l.flags&Mu&&Di(l.type,l.memoizedProps);break;case 3:case 4:if(Ha){var c=Qs;Qs=vd(l.stateNode.containerInfo),os(l),Qs=c}else os(l);break;case 22:l.memoizedState===null&&(c=l.alternate,c!==null&&c.memoizedState!==null?(c=Mu,Mu=16777216,os(l),Mu=c):os(l));break;default:os(l)}}function Jf(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function Sl(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var E=c[g];Li=E,xl(E,l)}Jf(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Ch(l),l=l.sibling}function Ch(l){switch(l.tag){case 0:case 11:case 15:Sl(l),l.flags&2048&&ml(9,l,l.return);break;case 3:Sl(l);break;case 12:Sl(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&4&&(l.return===null||l.return.tag!==13)?(c._visibility&=-5,pc(l)):Sl(l);break;default:Sl(l)}}function pc(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var E=c[g];Li=E,xl(E,l)}Jf(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:ml(8,c,c.return),pc(c);break;case 22:g=c.stateNode,g._visibility&4&&(g._visibility&=-5,pc(c));break;default:pc(c)}l=l.sibling}}function xl(l,c){for(;Li!==null;){var g=Li;switch(g.tag){case 0:case 11:case 15:ml(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var E=g.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Jr(g.memoizedState.cache)}if(E=g.child,E!==null)E.return=g,Li=E;else t:for(g=l;Li!==null;){E=Li;var A=E.sibling,I=E.return;if(hc(E),E===g){Li=null;break t}if(A!==null){A.return=I,Li=A;break t}Li=I}}}function $f(l){var c=bm(l);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(s(364));return c}if(l=vu(l),l===null)throw Error(s(362));return l.stateNode.current}function mc(l,c){var g=l.tag;switch(c.$$typeof){case sf:if(l.type===c.value)return!0;break;case Dd:t:{for(c=c.value,l=[l,0],g=0;g<l.length;){var E=l[g++],A=E.tag,I=l[g++],Q=c[I];if(A!==5&&A!==26&&A!==27||!lo(E)){for(;Q!=null&&mc(E,Q);)I++,Q=c[I];if(I===c.length){c=!0;break t}else for(E=E.child;E!==null;)l.push(E,I),E=E.sibling}}c=!1}return c;case Nd:if((g===5||g===26||g===27)&&ix(l.stateNode,c.value))return!0;break;case Zn:if((g===5||g===6||g===26||g===27)&&(l=Fh(l),l!==null&&0<=l.indexOf(c.value)))return!0;break;case In:if((g===5||g===26||g===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function El(l){switch(l.$$typeof){case sf:return"<"+(u(l.value)||"Unknown")+">";case Dd:return":has("+(El(l)||"")+")";case Nd:return'[role="'+l.value+'"]';case Zn:return'"'+l.value+'"';case In:return'[data-testname="'+l.value+'"]';default:throw Error(s(365))}}function k_(l,c){var g=[];l=[l,0];for(var E=0;E<l.length;){var A=l[E++],I=A.tag,Q=l[E++],st=c[Q];if(I!==5&&I!==26&&I!==27||!lo(A)){for(;st!=null&&mc(A,st);)Q++,st=c[Q];if(Q===c.length)g.push(A);else for(A=A.child;A!==null;)l.push(A,Q),A=A.sibling}}return g}function js(l,c){if(!oo)throw Error(s(363));l=$f(l),l=k_(l,c),c=[],l=Array.from(l);for(var g=0;g<l.length;){var E=l[g++],A=E.tag;if(A===5||A===26||A===27)lo(E)||c.push(E.stateNode);else for(E=E.child;E!==null;)l.push(E),E=E.sibling}return c}function Ys(){if((Be&2)!==0&&Sn!==0)return Sn&-Sn;if(qe.T!==null){var l=ga;return l!==0?l:Qt()}return ur()}function to(){va===0&&(va=(Sn&536870912)===0||zn?P():536870912);var l=Wa.current;return l!==null&&(l.flags|=32),va}function Ds(l,c,g){(l===Tn&&si===2||l.cancelPendingCommit!==null)&&(Ir(l,0),Nr(l,Sn,va,!1)),F(l,g),((Be&2)===0||l!==Tn)&&(l===Tn&&((Be&2)===0&&(Br|=g),Un===4&&Nr(l,Sn,va,!1)),Kt(l))}function Dh(l,c,g){if((Be&6)!==0)throw Error(s(327));var E=!g&&(c&60)===0&&(c&l.expiredLanes)===0||q(l,c),A=E?io(l,c):eo(l,c,!0),I=E;do{if(A===0){Ka&&!E&&Nr(l,c,0,!1);break}else if(A===6)Nr(l,c,0,!Jn);else{if(g=l.current.alternate,I&&!q_(g)){A=eo(l,c,!1),I=!1;continue}if(A===2){if(I=c,l.errorRecoveryDisabledLanes&I)var Q=0;else Q=l.pendingLanes&-536870913,Q=Q!==0?Q:Q&536870912?536870912:0;if(Q!==0){c=Q;t:{var st=l;A=Ic;var mt=Ws&&st.current.memoizedState.isDehydrated;if(mt&&(Ir(st,Q).flags|=256),Q=eo(st,Q,!1),Q!==2){if(jo&&!mt){st.errorRecoveryDisabledLanes|=I,Br|=I,A=4;break t}I=Za,Za=A,I!==null&&No(I)}A=Q}if(I=!1,A!==2)continue}}if(A===1){Ir(l,0),Nr(l,c,0,!0);break}t:{switch(E=l,A){case 0:case 1:throw Error(s(345));case 4:if((c&4194176)===c){Nr(E,c,va,!Jn);break t}break;case 2:Za=null;break;case 3:case 5:break;default:throw Error(s(329))}if(E.finishedWork=g,E.finishedLanes=c,(c&62914560)===c&&(I=po+300-Es(),10<I)){if(Nr(E,c,va,!Jn),j(E,0)!==0)break t;E.timeoutHandle=Tm(td.bind(null,E,g,Za,Fr,Uc,c,va,Br,Yo,Jn,2,-0,0),I);break t}td(E,g,Za,Fr,Uc,c,va,Br,Yo,Jn,0,-0,0)}}break}while(!0);Kt(l)}function No(l){Za===null?Za=l:Za.push.apply(Za,l)}function td(l,c,g,E,A,I,Q,st,mt,Ft,le,ge,Se){var en=c.subtreeFlags;if((en&8192||(en&16785408)===16785408)&&(Fa(),cu(c),c=ud(),c!==null)){l.cancelPendingCommit=c(ci.bind(null,l,g,E,A,Q,st,mt,1,ge,Se)),Nr(l,I,Q,!Ft);return}ci(l,g,E,A,Q,st,mt,le,ge,Se)}function q_(l){for(var c=l;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var E=0;E<g.length;E++){var A=g[E],I=A.getSnapshot;A=A.value;try{if(!Ga(I(),A))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Nr(l,c,g,E){c&=~Ps,c&=~Br,l.suspendedLanes|=c,l.pingedLanes&=~c,E&&(l.warmLanes|=c),E=l.expirationTimes;for(var A=c;0<A;){var I=31-pa(A),Q=1<<I;E[I]=-1,A&=~Q}g!==0&&G(l,g,c)}function um(){return(Be&6)===0?(ze(0),!1):!0}function ha(){if(rn!==null){if(si===0)var l=rn.return;else l=rn,Oi=zl=null,K(l),co=null,fr=0,l=rn;for(;l!==null;)sm(l.alternate,l),l=l.return;rn=null}}function Ir(l,c){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;g!==yu&&(l.timeoutHandle=yu,Bh(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),ha(),Tn=l,rn=g=Ns(l.current,null),Sn=c,si=0,Hi=null,Jn=!1,Ka=q(l,c),jo=!1,Yo=va=Ps=Br=Qa=Un=0,Za=Ic=null,Uc=!1,(c&8)!==0&&(c|=c&32);var E=l.entangledLanes;if(E!==0)for(l=l.entanglements,E&=c;0<E;){var A=31-pa(E),I=1<<A;c|=l[A],E&=~I}return Vr=c,qt(),g}function hu(l,c){fn=null,qe.H=Vn,c===ei?(c=ye(),si=3):c===Jm?(c=ye(),si=4):si=c===Ty?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Hi=c,rn===null&&(Un=1,hl(l,ft(c,l.current)))}function Nh(){var l=Wa.current;return l===null?!0:(Sn&4194176)===Sn?dr===null:(Sn&62914560)===Sn||(Sn&536870912)!==0?l===dr:!1}function gc(){var l=qe.H;return qe.H=Vn,l===null?Vn:l}function Va(){var l=qe.A;return qe.A=Cd,l}function fa(){Un=4,Jn||(Sn&4194176)!==Sn&&Wa.current!==null||(Ka=!0),(Qa&134217727)===0&&(Br&134217727)===0||Tn===null||Nr(Tn,Sn,va,!1)}function eo(l,c,g){var E=Be;Be|=2;var A=gc(),I=Va();(Tn!==l||Sn!==c)&&(Fr=null,Ir(l,c)),c=!1;var Q=Un;t:do try{if(si!==0&&rn!==null){var st=rn,mt=Hi;switch(si){case 8:ha(),Q=6;break t;case 3:case 2:case 6:Wa.current===null&&(c=!0);var Ft=si;if(si=0,Hi=null,Tl(l,st,mt,Ft),g&&Ka){Q=0;break t}break;default:Ft=si,si=0,Hi=null,Tl(l,st,mt,Ft)}}no(),Q=Un;break}catch(le){hu(l,le)}while(!0);return c&&l.shellSuspendCounter++,Oi=zl=null,Be=E,qe.H=A,qe.A=I,rn===null&&(Tn=null,Sn=0,qt()),Q}function no(){for(;rn!==null;)cm(rn)}function io(l,c){var g=Be;Be|=2;var E=gc(),A=Va();Tn!==l||Sn!==c?(Fr=null,Ai=Es()+500,Ir(l,c)):Ka=q(l,c);t:do try{if(si!==0&&rn!==null){c=rn;var I=Hi;e:switch(si){case 1:si=0,Hi=null,Tl(l,c,I,1);break;case 2:if(he(I)){si=0,Hi=null,ed(c);break}c=function(){si===2&&Tn===l&&(si=7),Kt(l)},I.then(c,c);break t;case 3:si=7;break t;case 4:si=5;break t;case 7:he(I)?(si=0,Hi=null,ed(c)):(si=0,Hi=null,Tl(l,c,I,7));break;case 5:var Q=null;switch(rn.tag){case 26:Q=rn.memoizedState;case 5:case 27:var st=rn,mt=st.type,Ft=st.pendingProps;if(Q?Ym(Q):Bo(mt,Ft)){si=0,Hi=null;var le=st.sibling;if(le!==null)rn=le;else{var ge=st.return;ge!==null?(rn=ge,Ih(ge)):rn=null}break e}}si=0,Hi=null,Tl(l,c,I,5);break;case 6:si=0,Hi=null,Tl(l,c,I,6);break;case 8:ha(),Un=6;break t;default:throw Error(s(462))}}Io();break}catch(Se){hu(l,Se)}while(!0);return Oi=zl=null,qe.H=E,qe.A=A,Be=g,rn!==null?0:(Tn=null,Sn=0,qt(),Un)}function Io(){for(;rn!==null&&!yy();)cm(rn)}function cm(l){var c=St(l.alternate,l,Vr);l.memoizedProps=l.pendingProps,c===null?Ih(l):rn=c}function ed(l){var c=l,g=c.alternate;switch(c.tag){case 15:case 0:c=Eh(g,c,c.pendingProps,c.type,void 0,Sn);break;case 11:c=Eh(g,c,c.pendingProps,c.type.render,c.ref,Sn);break;case 5:K(c);default:sm(g,c),c=rn=Lo(c,Vr),c=St(g,c,Vr)}l.memoizedProps=l.pendingProps,c===null?Ih(l):rn=c}function Tl(l,c,g,E){Oi=zl=null,K(c),co=null,fr=0;var A=c.return;try{if(yh(l,A,c,g,Sn)){Un=1,hl(l,ft(g,l.current)),rn=null;return}}catch(I){if(A!==null)throw rn=A,I;Un=1,hl(l,ft(g,l.current)),rn=null;return}c.flags&32768?(zn||E===1?l=!0:Ka||(Sn&536870912)!==0?l=!1:(Jn=l=!0,(E===2||E===3||E===6)&&(E=Wa.current,E!==null&&E.tag===13&&(E.flags|=16384))),ls(c,l)):Ih(c)}function Ih(l){var c=l;do{if((c.flags&32768)!==0){ls(c,Jn);return}l=c.return;var g=V_(c.alternate,c,Vr);if(g!==null){rn=g;return}if(c=c.sibling,c!==null){rn=c;return}rn=c=l}while(c!==null);Un===0&&(Un=5)}function ls(l,c){do{var g=B_(l.alternate,l);if(g!==null){g.flags&=32767,rn=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(l=l.sibling,l!==null)){rn=l;return}rn=l=g}while(l!==null);Un=6,rn=null}function ci(l,c,g,E,A,I,Q,st,mt,Ft){var le=qe.T,ge=$i();try{Is(2),qe.T=null,Cn(l,c,g,E,ge,A,I,Q,st,mt,Ft)}finally{qe.T=le,Is(ge)}}function Cn(l,c,g,E,A,I,Q,st){do us();while(Wo!==null);if((Be&6)!==0)throw Error(s(327));var mt=l.finishedWork;if(E=l.finishedLanes,mt===null)return null;if(l.finishedWork=null,l.finishedLanes=0,mt===l.current)throw Error(s(177));l.callbackNode=null,l.callbackPriority=0,l.cancelPendingCommit=null;var Ft=mt.lanes|mt.childLanes;if(Ft|=Rc,Y(l,E,Ft,I,Q,st),l===Tn&&(rn=Tn=null,Sn=0),(mt.subtreeFlags&10256)===0&&(mt.flags&10256)===0||mr||(mr=!0,Id=Ft,Ru=g,Uh(xd,function(){return us(),null})),g=(mt.flags&15990)!==0,(mt.subtreeFlags&15990)!==0||g?(g=qe.T,qe.T=null,I=$i(),Is(2),Q=Be,Be|=4,cc(l,mt),_l(mt,l),xm(l.containerInfo),l.current=mt,Wf(l,mt.alternate,mt),vy(),Be=Q,Is(I),qe.T=g):l.current=mt,mr?(mr=!1,Wo=l,Au=E):Uo(l,Ft),Ft=l.pendingLanes,Ft===0&&(Ja=null),k(mt.stateNode),Kt(l),c!==null)for(A=l.onRecoverableError,mt=0;mt<c.length;mt++)Ft=c[mt],A(Ft.value,{componentStack:Ft.stack});return(Au&3)!==0&&us(),Ft=l.pendingLanes,(E&4194218)!==0&&(Ft&42)!==0?l===Zs?wu++:(wu=0,Zs=l):wu=0,ze(0),null}function Uo(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,Jr(c)))}function us(){if(Wo!==null){var l=Wo,c=Id;Id=0;var g=vt(Au),E=32>g?32:g;g=qe.T;var A=$i();try{if(Is(E),qe.T=null,Wo===null)var I=!1;else{E=Ru,Ru=null;var Q=Wo,st=Au;if(Wo=null,Au=0,(Be&6)!==0)throw Error(s(331));var mt=Be;if(Be|=4,Ch(Q.current),Zf(Q,Q.current,st,E),Be=mt,ze(0,!1),ma&&typeof ma.onPostCommitFiberRoot=="function")try{ma.onPostCommitFiberRoot(Mc,Q)}catch{}I=!0}return I}finally{Is(A),qe.T=g,Uo(l,c)}}return!1}function nd(l,c,g){c=ft(g,c),c=fl(l.stateNode,c,2),l=ie(l,c,2),l!==null&&(F(l,2),Kt(l))}function Mn(l,c,g){if(l.tag===3)nd(l,l,g);else for(;c!==null;){if(c.tag===3){nd(c,l,g);break}else if(c.tag===1){var E=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ja===null||!Ja.has(E))){l=ft(g,l),g=wr(2),E=ie(c,g,2),E!==null&&(ou(g,E,c,l),F(E,2),Kt(E));break}}c=c.return}}function id(l,c,g){var E=l.pingCache;if(E===null){E=l.pingCache=new An;var A=new Set;E.set(c,A)}else A=E.get(c),A===void 0&&(A=new Set,E.set(c,A));A.has(g)||(jo=!0,A.add(g),l=X_.bind(null,l,c,g),c.then(l,l))}function X_(l,c,g){var E=l.pingCache;E!==null&&E.delete(c),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,Tn===l&&(Sn&g)===g&&(Un===4||Un===3&&(Sn&62914560)===Sn&&300>Es()-po?(Be&2)===0&&Ir(l,0):Ps|=g,Yo===Sn&&(Yo=0)),Kt(l)}function fu(l,c){c===0&&(c=D()),l=Pt(l,c),l!==null&&(F(l,c),Kt(l))}function du(l){var c=l.memoizedState,g=0;c!==null&&(g=c.retryLane),fu(l,g)}function hm(l,c){var g=0;switch(l.tag){case 13:var E=l.stateNode,A=l.memoizedState;A!==null&&(g=A.retryLane);break;case 19:E=l.stateNode;break;case 22:E=l.stateNode._retryCache;break;default:throw Error(s(314))}E!==null&&E.delete(c),fu(l,g)}function Uh(l,c){return bc(l,c)}function fm(l,c,g,E){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oo(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Ns(l,c){var g=l.alternate;return g===null?(g=e(l.tag,c,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=c,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&31457280,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,c=l.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function Lo(l,c){l.flags&=31457282;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,c=g.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function lr(l,c,g,E,A,I){var Q=0;if(E=l,typeof l=="function")Oo(l)&&(Q=1);else if(typeof l=="string")Q=Ha&&xs?Fm(l,g,hs.current)?26:Ec(l)?27:5:Ha?Fm(l,g,hs.current)?26:5:xs&&Ec(l)?27:5;else t:switch(l){case yc:return Po(g.children,A,I,c);case _m:Q=8,A|=24;break;case ym:return l=e(12,g,c,A|2),l.elementType=ym,l.lanes=I,l;case ad:return l=e(13,g,c,A),l.elementType=ad,l.lanes=I,l;case Al:return l=e(19,g,c,A),l.elementType=Al,l.lanes=I,l;case Ph:return sd(g,A,I,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case W_:case so:Q=10;break t;case Ml:Q=9;break t;case vc:Q=11;break t;case Lh:Q=14;break t;case Or:Q=16,E=null;break t}Q=29,g=Error(s(130,l===null?"null":typeof l,"")),E=null}return c=e(Q,g,c,A),c.elementType=l,c.type=E,c.lanes=I,c}function Po(l,c,g,E){return l=e(7,l,E,c),l.lanes=g,l}function sd(l,c,g,E){l=e(22,l,E,c),l.elementType=Ph,l.lanes=g;var A={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var I=A._current;if(I===null)throw Error(s(456));if((A._pendingVisibility&2)===0){var Q=Pt(I,2);Q!==null&&(A._pendingVisibility|=2,Ds(Q,I,2))}},attach:function(){var I=A._current;if(I===null)throw Error(s(456));if((A._pendingVisibility&2)!==0){var Q=Pt(I,2);Q!==null&&(A._pendingVisibility&=-3,Ds(Q,I,2))}}};return l.stateNode=A,l}function bl(l,c,g){return l=e(6,l,null,c),l.lanes=g,l}function _c(l,c,g){return c=e(4,l.children!==null?l.children:[],l.key,c),c.lanes=g,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function pu(l,c,g,E,A,I,Q,st){this.tag=1,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=yu,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=U(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=U(0),this.hiddenUpdates=U(null),this.identifierPrefix=E,this.onUncaughtError=A,this.onCaughtError=I,this.onRecoverableError=Q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=st,this.incompleteTransitions=new Map}function cs(l,c,g,E,A,I,Q,st,mt,Ft,le,ge){return l=new pu(l,c,g,Q,st,mt,Ft,ge),c=1,I===!0&&(c|=24),I=e(3,null,null,c),l.current=I,I.stateNode=l,c=Co(),c.refCount++,l.pooledCache=c,c.refCount++,I.memoizedState={element:E,isDehydrated:g,cache:c},be(I),l}function Oh(l){return l?(l=Su,l):Su}function dm(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=T(c),l=l!==null?R(l):null,l===null?null:Sc(l.stateNode)}function j_(l,c,g,E,A,I){A=Oh(A),E.context===null?E.context=A:E.pendingContext=A,E=Yt(c),E.payload={element:g},I=I===void 0?null:I,I!==null&&(E.callback=I),g=ie(l,E,c),g!==null&&(Ds(g,l,c),Ce(g,l,c))}function Y_(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<c?g:c}}function pm(l,c){Y_(l,c),(l=l.alternate)&&Y_(l,c)}var Ve={},mm=Hp(),vs=PB(),mu=Object.assign,gm=Symbol.for("react.element"),zo=Symbol.for("react.transitional.element"),Ur=Symbol.for("react.portal"),yc=Symbol.for("react.fragment"),_m=Symbol.for("react.strict_mode"),ym=Symbol.for("react.profiler"),W_=Symbol.for("react.provider"),Ml=Symbol.for("react.consumer"),so=Symbol.for("react.context"),vc=Symbol.for("react.forward_ref"),ad=Symbol.for("react.suspense"),Al=Symbol.for("react.suspense_list"),Lh=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),Ph=Symbol.for("react.offscreen"),K_=Symbol.for("react.memo_cache_sentinel"),vm=Symbol.iterator,gu=Symbol.for("react.client.reference"),qe=mm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rd,Sm,Rl=!1,wl=Array.isArray,od=t.rendererVersion,zh=t.rendererPackageName,Vh=t.extraDevToolsConfig,Sc=t.getPublicInstance,_u=t.getRootHostContext,Q_=t.getChildHostContext,Cl=t.prepareForCommit,xm=t.resetAfterCommit,Em=t.createInstance,ao=t.appendInitialChild,Vo=t.finalizeInitialChildren,Dl=t.shouldSetTextContent,ld=t.createTextInstance,Tm=t.scheduleTimeout,Bh=t.cancelTimeout,yu=t.noTimeout,ro=t.isPrimaryRenderer;t.warnsIfNotActing;var Ss=t.supportsMutation,Ba=t.supportsPersistence,Ws=t.supportsHydration,bm=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var Mm=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Is=t.setCurrentUpdatePriority,$i=t.getCurrentUpdatePriority,ur=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var Nl=t.shouldAttemptEagerTransition,Am=t.detachDeletedInstance;t.requestPostPaintCallback;var Z_=t.maySuspendCommit,Bo=t.preloadInstance,Fa=t.startSuspendingCommit,Di=t.suspendInstance,ud=t.waitForCommitToBeReady,da=t.NotPendingTransition,Ke=t.HostTransitionContext,ii=t.resetFormInstance;t.bindToConsole;var ji=t.supportsMicrotasks,cd=t.scheduleMicrotask,oo=t.supportsTestSelectors,vu=t.findFiberRoot,hd=t.getBoundingRect,Fh=t.getTextContent,lo=t.isHiddenSubtree,ix=t.matchAccessibilityRole,Ni=t.setFocusIfFocusable,Rm=t.setupIntersectionObserver,wm=t.appendChild,J_=t.appendChildToContainer,$_=t.commitTextUpdate,sx=t.commitMount,Cm=t.commitUpdate,Dm=t.insertBefore,Nm=t.insertInContainerBefore,Ks=t.removeChild,zi=t.removeChildFromContainer,Hh=t.resetTextContent,Gh=t.hideInstance,fd=t.hideTextInstance,Im=t.unhideInstance,Fo=t.unhideTextInstance,dd=t.clearContainer,Um=t.cloneInstance,pd=t.createContainerChildSet,Om=t.appendChildToContainerChildSet,ty=t.finalizeContainerChildren,Lm=t.replaceContainerChildren,Pm=t.cloneHiddenInstance,zm=t.cloneHiddenTextInstance,md=t.isSuspenseInstancePending,kh=t.isSuspenseInstanceFallback,ey=t.getSuspenseInstanceFallbackErrorDetails,ax=t.registerSuspenseInstanceRetry,ny=t.canHydrateFormStateMarker,iy=t.isFormStateMarkerMatching,Vm=t.getNextHydratableSibling,gd=t.getFirstHydratableChild,sy=t.getFirstHydratableChildWithinContainer,ay=t.getFirstHydratableChildWithinSuspenseInstance,ry=t.canHydrateInstance,oy=t.canHydrateTextInstance,ly=t.canHydrateSuspenseInstance,rx=t.hydrateInstance,uy=t.hydrateTextInstance,xc=t.hydrateSuspenseInstance,cy=t.getNextHydratableInstanceAfterSuspenseInstance,_d=t.commitHydratedContainer,yd=t.commitHydratedSuspenseInstance,hy=t.clearSuspenseBoundary,Bm=t.clearSuspenseBoundaryFromContainer,fy=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var dy=t.validateHydratableInstance,py=t.validateHydratableTextInstance,Ha=t.supportsResources,Fm=t.isHostHoistableType,vd=t.getHoistableRoot,Sd=t.getResource,Hm=t.acquireResource,Gm=t.releaseResource,km=t.hydrateHoistable,qm=t.mountHoistable,Xm=t.unmountHoistable,ox=t.createHoistableInstance,jm=t.prepareToCommitHoistables,my=t.mayResourceSuspendCommit,Ym=t.preloadResource,Wm=t.suspendResource,xs=t.supportsSingletons,Km=t.resolveSingletonInstance,lx=t.clearSingleton,ux=t.acquireSingletonInstance,gy=t.releaseSingletonInstance,Ec=t.isHostSingletonType,qh=[],Ho=-1,Su={},pa=Math.clz32?Math.clz32:z,Xh=Math.log,_y=Math.LN2,Tc=128,jh=4194304,bc=vs.unstable_scheduleCallback,Yh=vs.unstable_cancelCallback,yy=vs.unstable_shouldYield,vy=vs.unstable_requestPaint,Es=vs.unstable_now,Qm=vs.unstable_ImmediatePriority,Sy=vs.unstable_UserBlockingPriority,xd=vs.unstable_NormalPriority,Ed=vs.unstable_IdlePriority,xy=vs.log,Zm=vs.unstable_setDisableYieldValue,Mc=null,ma=null,Ga=typeof Object.is=="function"?Object.is:nt,Td=new WeakMap,yi=[],Ii=0,Wh=null,Kh=0,ka=[],qa=0,Lr=null,uo=1,cr="",hs=w(null),Qh=w(null),Pr=w(null),Ac=w(null),Us=null,Ts=null,zn=!1,Xa=null,hr=!1,Zh=Error(s(519)),ja=[],Il=0,Rc=0,wc=null,xu=null,Jh=!1,$h=!1,zr=!1,Ul=0,tf=null,bd=0,ga=0,Ol=null,Go=!1,Cc=!1,ef=Object.prototype.hasOwnProperty,ei=Error(s(460)),Jm=Error(s(474)),Md={then:function(){}},Eu=null,co=null,fr=0,Ll=Hs(!0),$m=Hs(!1),ho=w(null),Ya=w(0),Wa=w(null),dr=null,Yi=w(0),fo=0,fn=null,Xn=null,Vi=null,pr=!1,vi=!1,ko=!1,nf=0,Ui=0,Dc=null,Ey=0,Ad=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Vn={readContext:mi,use:ct,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on};Vn.useCacheRefresh=on,Vn.useMemoCache=on,Vn.useHostTransitionStatus=on,Vn.useFormState=on,Vn.useActionState=on,Vn.useOptimistic=on;var Wi={readContext:mi,use:ct,useCallback:function(l,c){return lt().memoizedState=[l,c===void 0?null:c],l},useContext:mi,useEffect:Ju,useImperativeHandle:function(l,c,g){g=g!=null?g.concat([l]):null,nu(4194308,4,iu.bind(null,c,l),g)},useLayoutEffect:function(l,c){return nu(4194308,4,l,c)},useInsertionEffect:function(l,c){nu(4,2,l,c)},useMemo:function(l,c){var g=lt();c=c===void 0?null:c;var E=l();if(ko){et(!0);try{l()}finally{et(!1)}}return g.memoizedState=[E,c],E},useReducer:function(l,c,g){var E=lt();if(g!==void 0){var A=g(c);if(ko){et(!0);try{g(c)}finally{et(!1)}}}else A=c;return E.memoizedState=E.baseState=A,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:A},E.queue=l,l=l.dispatch=jr.bind(null,fn,l),[E.memoizedState,l]},useRef:function(l){var c=lt();return l={current:l},c.memoizedState=l},useState:function(l){l=je(l);var c=l.queue,g=$u.bind(null,fn,c);return c.dispatch=g,[l.memoizedState,g]},useDebugValue:su,useDeferredValue:function(l,c){var g=lt();return ar(g,l,c)},useTransition:function(){var l=je(!1);return l=au.bind(null,fn,l.queue,!0,!1),lt().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,g){var E=fn,A=lt();if(zn){if(g===void 0)throw Error(s(407));g=g()}else{if(g=c(),Tn===null)throw Error(s(349));(Sn&60)!==0||Oe(E,c,g)}A.memoizedState=g;var I={value:g,getSnapshot:c};return A.queue=I,Ju(Nn.bind(null,E,I,l),[l]),E.flags|=2048,Pi(9,ln.bind(null,E,I,g,c),{destroy:void 0},null),g},useId:function(){var l=lt(),c=Tn.identifierPrefix;if(zn){var g=cr,E=uo;g=(E&~(1<<32-pa(E)-1)).toString(32)+g,c=":"+c+"R"+g,g=nf++,0<g&&(c+="H"+g.toString(32)),c+=":"}else g=Ey++,c=":"+c+"r"+g.toString(32)+":";return l.memoizedState=c},useCacheRefresh:function(){return lt().memoizedState=ni.bind(null,fn)}};Wi.useMemoCache=Xt,Wi.useHostTransitionStatus=Oa,Wi.useFormState=Xi,Wi.useActionState=Xi,Wi.useOptimistic=function(l){var c=lt();c.memoizedState=c.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=ru.bind(null,fn,!0,g),g.dispatch=c,[l,c]};var Os={readContext:mi,use:ct,useCallback:Ua,useContext:mi,useEffect:ll,useImperativeHandle:sr,useInsertionEffect:_h,useLayoutEffect:Mo,useMemo:Ao,useReducer:xe,useRef:qs,useState:function(){return xe(ce)},useDebugValue:su,useDeferredValue:function(l,c){var g=yt();return ul(g,Xn.memoizedState,l,c)},useTransition:function(){var l=xe(ce)[0],c=yt().memoizedState;return[typeof l=="boolean"?l:Tt(l),c]},useSyncExternalStore:Fe,useId:La};Os.useCacheRefresh=cl,Os.useMemoCache=Xt,Os.useHostTransitionStatus=Oa,Os.useFormState=as,Os.useActionState=as,Os.useOptimistic=function(l,c){var g=yt();return ve(g,Xn,l,c)};var Pl={readContext:mi,use:ct,useCallback:Ua,useContext:mi,useEffect:ll,useImperativeHandle:sr,useInsertionEffect:_h,useLayoutEffect:Mo,useMemo:Ao,useReducer:Ie,useRef:qs,useState:function(){return Ie(ce)},useDebugValue:su,useDeferredValue:function(l,c){var g=yt();return Xn===null?ar(g,l,c):ul(g,Xn.memoizedState,l,c)},useTransition:function(){var l=Ie(ce)[0],c=yt().memoizedState;return[typeof l=="boolean"?l:Tt(l),c]},useSyncExternalStore:Fe,useId:La};Pl.useCacheRefresh=cl,Pl.useMemoCache=Xt,Pl.useHostTransitionStatus=Oa,Pl.useFormState=bo,Pl.useActionState=bo,Pl.useOptimistic=function(l,c){var g=yt();return Xn!==null?ve(g,Xn,l,c):(g.baseState=l,[l,g.queue.dispatch])};var Rd={isMounted:function(l){return(l=l._reactInternals)?y(l)===l:!1},enqueueSetState:function(l,c,g){l=l._reactInternals;var E=Ys(),A=Yt(E);A.payload=c,g!=null&&(A.callback=g),c=ie(l,A,E),c!==null&&(Ds(c,l,E),Ce(c,l,E))},enqueueReplaceState:function(l,c,g){l=l._reactInternals;var E=Ys(),A=Yt(E);A.tag=1,A.payload=c,g!=null&&(A.callback=g),c=ie(l,A,E),c!==null&&(Ds(c,l,E),Ce(c,l,E))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var g=Ys(),E=Yt(g);E.tag=2,c!=null&&(E.callback=c),c=ie(l,E,g),c!==null&&(Ds(c,l,g),Ce(c,l,g))}},tg=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ty=Error(s(461)),Bi=!1,Ls={dehydrated:null,treeContext:null,retryLane:0},_a=w(null),zl=null,Oi=null,by=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(g,E){l.push(E)}};this.abort=function(){c.aborted=!0,l.forEach(function(g){return g()})}},qo=vs.unstable_scheduleCallback,Tu=vs.unstable_NormalPriority,Qn={$$typeof:so,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},wd=qe.S;qe.S=function(l,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&Ut(l,c),wd!==null&&wd(l,c)};var Xo=w(null),ts=!1,Mi=!1,Vl=!1,Nc=typeof WeakSet=="function"?WeakSet:Set,Li=null,bu=!1,Fi=null,ya=!1,Qs=null,Mu=8192,Cd={getCacheForType:function(l){var c=mi(Qn),g=c.data.get(l);return g===void 0&&(g=l(),c.data.set(l,g)),g}},sf=0,Dd=1,Nd=2,In=3,Zn=4;if(typeof Symbol=="function"&&Symbol.for){var dn=Symbol.for;sf=dn("selector.component"),Dd=dn("selector.has_pseudo_class"),Nd=dn("selector.role"),In=dn("selector.test_id"),Zn=dn("selector.text")}var An=typeof WeakMap=="function"?WeakMap:Map,Be=0,Tn=null,rn=null,Sn=0,si=0,Hi=null,Jn=!1,Ka=!1,jo=!1,Vr=0,Un=0,Qa=0,Br=0,Ps=0,va=0,Yo=0,Ic=null,Za=null,Uc=!1,po=0,Ai=1/0,Fr=null,Ja=null,mr=!1,Wo=null,Au=0,Id=0,Ru=null,wu=0,Zs=null;return Ve.attemptContinuousHydration=function(l){if(l.tag===13){var c=Pt(l,67108864);c!==null&&Ds(c,l,67108864),pm(l,67108864)}},Ve.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var c=Ys(),g=Pt(l,c);g!==null&&Ds(g,l,c),pm(l,c)}},Ve.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var c=V(l.pendingLanes);if(c!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;c;){var g=1<<31-pa(c);l.entanglements[1]|=g,c&=~g}Kt(l),(Be&6)===0&&(Ai=Es()+500,ze(0))}}break;case 13:c=Pt(l,2),c!==null&&Ds(c,l,2),um(),pm(l,2)}},Ve.batchedUpdates=function(l,c){return l(c)},Ve.createComponentSelector=function(l){return{$$typeof:sf,value:l}},Ve.createContainer=function(l,c,g,E,A,I,Q,st,mt,Ft){return cs(l,c,!1,null,g,E,I,Q,st,mt,Ft,null)},Ve.createHasPseudoClassSelector=function(l){return{$$typeof:Dd,value:l}},Ve.createHydrationContainer=function(l,c,g,E,A,I,Q,st,mt,Ft,le,ge,Se){return l=cs(g,E,!0,l,A,I,st,mt,Ft,le,ge,Se),l.context=Oh(null),g=l.current,E=Ys(),A=Yt(E),A.callback=c??null,ie(g,A,E),l.current.lanes=E,F(l,E),Kt(l),l},Ve.createPortal=function(l,c,g){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ur,key:E==null?null:""+E,children:l,containerInfo:c,implementation:g}},Ve.createRoleSelector=function(l){return{$$typeof:Nd,value:l}},Ve.createTestNameSelector=function(l){return{$$typeof:In,value:l}},Ve.createTextSelector=function(l){return{$$typeof:Zn,value:l}},Ve.defaultOnCaughtError=function(l){console.error(l)},Ve.defaultOnRecoverableError=function(l){tg(l)},Ve.defaultOnUncaughtError=function(l){tg(l)},Ve.deferredUpdates=function(l){var c=qe.T,g=$i();try{return Is(32),qe.T=null,l()}finally{Is(g),qe.T=c}},Ve.discreteUpdates=function(l,c,g,E,A){var I=qe.T,Q=$i();try{return Is(2),qe.T=null,l(c,g,E,A)}finally{Is(Q),qe.T=I,Be===0&&(Ai=Es()+500)}},Ve.findAllNodes=js,Ve.findBoundingRects=function(l,c){if(!oo)throw Error(s(363));c=js(l,c),l=[];for(var g=0;g<c.length;g++)l.push(hd(c[g]));for(c=l.length-1;0<c;c--){g=l[c];for(var E=g.x,A=E+g.width,I=g.y,Q=I+g.height,st=c-1;0<=st;st--)if(c!==st){var mt=l[st],Ft=mt.x,le=Ft+mt.width,ge=mt.y,Se=ge+mt.height;if(E>=Ft&&I>=ge&&A<=le&&Q<=Se){l.splice(c,1);break}else if(E!==Ft||g.width!==mt.width||Se<I||ge>Q){if(!(I!==ge||g.height!==mt.height||le<E||Ft>A)){Ft>E&&(mt.width+=Ft-E,mt.x=E),le<A&&(mt.width=A-Ft),l.splice(c,1);break}}else{ge>I&&(mt.height+=ge-I,mt.y=I),Se<Q&&(mt.height=Q-ge),l.splice(c,1);break}}}return l},Ve.findHostInstance=dm,Ve.findHostInstanceWithNoPortals=function(l){return l=T(l),l=l!==null?C(l):null,l===null?null:Sc(l.stateNode)},Ve.findHostInstanceWithWarning=function(l){return dm(l)},Ve.flushPassiveEffects=us,Ve.flushSyncFromReconciler=function(l){var c=Be;Be|=1;var g=qe.T,E=$i();try{if(Is(2),qe.T=null,l)return l()}finally{Is(E),qe.T=g,Be=c,(Be&6)===0&&ze(0)}},Ve.flushSyncWork=um,Ve.focusWithin=function(l,c){if(!oo)throw Error(s(363));for(l=$f(l),c=k_(l,c),c=Array.from(c),l=0;l<c.length;){var g=c[l++],E=g.tag;if(!lo(g)){if((E===5||E===26||E===27)&&Ni(g.stateNode))return!0;for(g=g.child;g!==null;)c.push(g),g=g.sibling}}return!1},Ve.getFindAllNodesFailureDescription=function(l,c){if(!oo)throw Error(s(363));var g=0,E=[];l=[$f(l),0];for(var A=0;A<l.length;){var I=l[A++],Q=I.tag,st=l[A++],mt=c[st];if((Q!==5&&Q!==26&&Q!==27||!lo(I))&&(mc(I,mt)&&(E.push(El(mt)),st++,st>g&&(g=st)),st<c.length))for(I=I.child;I!==null;)l.push(I,st),I=I.sibling}if(g<c.length){for(l=[];g<c.length;g++)l.push(El(c[g]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},Ve.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return Sc(l.child.stateNode);default:return l.child.stateNode}},Ve.injectIntoDevTools=function(){var l={bundleType:0,version:od,rendererPackageName:zh,currentDispatcherRef:qe,findFiberByHostInstance:bm,reconcilerVersion:"19.0.0"};if(Vh!==null&&(l.rendererConfig=Vh),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)l=!0;else{try{Mc=c.inject(l),ma=c}catch{}l=!!c.checkDCE}}return l},Ve.isAlreadyRendering=function(){return!1},Ve.observeVisibleRects=function(l,c,g,E){if(!oo)throw Error(s(363));l=js(l,c);var A=Rm(l,g,E).disconnect;return{disconnect:function(){A()}}},Ve.shouldError=function(){return null},Ve.shouldSuspend=function(){return!1},Ve.startHostTransition=function(l,c,g,E){if(l.tag!==5)throw Error(s(476));var A=Ro(l).queue;au(l,A,c,da,g===null?n:function(){var I=Ro(l).next.queue;return Ar(l,I,{},Ys()),g(E)})},Ve.updateContainer=function(l,c,g,E){var A=c.current,I=Ys();return j_(A,I,l,c,g,E),I},Ve.updateContainerSync=function(l,c,g,E){return c.tag===0&&us(),j_(c.current,2,l,c,g,E),2},Ve},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(BE)),BE.exports}var fR;function VB(){return fR||(fR=1,VE.exports=zB()),VE.exports}var BB=VB();const FB=QT(BB);var GE={exports:{}},kE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dR;function HB(){return dR||(dR=1,(function(i){function t(k,et){var nt=k.length;k.push(et);t:for(;0<nt;){var ft=nt-1>>>1,wt=k[ft];if(0<s(wt,et))k[ft]=et,k[nt]=wt,nt=ft;else break t}}function e(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var et=k[0],nt=k.pop();if(nt!==et){k[0]=nt;t:for(var ft=0,wt=k.length,J=wt>>>1;ft<J;){var ut=2*(ft+1)-1,Ot=k[ut],Lt=ut+1,ee=k[Lt];if(0>s(Ot,nt))Lt<wt&&0>s(ee,Ot)?(k[ft]=ee,k[Lt]=nt,ft=Lt):(k[ft]=Ot,k[ut]=nt,ft=ut);else if(Lt<wt&&0>s(ee,nt))k[ft]=ee,k[Lt]=nt,ft=Lt;else break t}}return et}function s(k,et){var nt=k.sortIndex-et.sortIndex;return nt!==0?nt:k.id-et.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var u=Date,f=u.now();i.unstable_now=function(){return u.now()-f}}var d=[],m=[],_=1,y=null,S=3,T=!1,R=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function z(k){for(var et=e(m);et!==null;){if(et.callback===null)n(m);else if(et.startTime<=k)n(m),et.sortIndex=et.expirationTime,t(d,et);else break;et=e(m)}}function V(k){if(C=!1,z(k),!R)if(e(d)!==null)R=!0,gt();else{var et=e(m);et!==null&&vt(V,et.startTime-k)}}var j=!1,q=-1,L=5,P=-1;function D(){return!(i.unstable_now()-P<L)}function U(){if(j){var k=i.unstable_now();P=k;var et=!0;try{t:{R=!1,C&&(C=!1,M(q),q=-1),T=!0;var nt=S;try{e:{for(z(k),y=e(d);y!==null&&!(y.expirationTime>k&&D());){var ft=y.callback;if(typeof ft=="function"){y.callback=null,S=y.priorityLevel;var wt=ft(y.expirationTime<=k);if(k=i.unstable_now(),typeof wt=="function"){y.callback=wt,z(k),et=!0;break e}y===e(d)&&n(d),z(k)}else n(d);y=e(d)}if(y!==null)et=!0;else{var J=e(m);J!==null&&vt(V,J.startTime-k),et=!1}}break t}finally{y=null,S=nt,T=!1}et=void 0}}finally{et?F():j=!1}}}var F;if(typeof O=="function")F=function(){O(U)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,G=Y.port2;Y.port1.onmessage=U,F=function(){G.postMessage(null)}}else F=function(){w(U,0)};function gt(){j||(j=!0,F())}function vt(k,et){q=w(function(){k(i.unstable_now())},et)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(k){k.callback=null},i.unstable_continueExecution=function(){R||T||(R=!0,gt())},i.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<k?Math.floor(1e3/k):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_getFirstCallbackNode=function(){return e(d)},i.unstable_next=function(k){switch(S){case 1:case 2:case 3:var et=3;break;default:et=S}var nt=S;S=et;try{return k()}finally{S=nt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(k,et){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var nt=S;S=k;try{return et()}finally{S=nt}},i.unstable_scheduleCallback=function(k,et,nt){var ft=i.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?ft+nt:ft):nt=ft,k){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=nt+wt,k={id:_++,callback:et,priorityLevel:k,startTime:nt,expirationTime:wt,sortIndex:-1},nt>ft?(k.sortIndex=nt,t(m,k),e(d)===null&&k===e(m)&&(C?(M(q),q=-1):C=!0,vt(V,nt-ft))):(k.sortIndex=wt,t(d,k),R||T||(R=!0,gt())),k},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(k){var et=S;return function(){var nt=S;S=et;try{return k.apply(this,arguments)}finally{S=nt}}}})(kE)),kE}var pR;function GB(){return pR||(pR=1,GE.exports=HB()),GE.exports}var mR=GB();function Bb(i,t,e){if(!i)return;if(e(i)===!0)return i;let n=t?i.return:i.child;for(;n;){const s=Bb(n,t,e);if(s)return s;n=t?null:n.sibling}}function VC(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const Fb=VC(Ae.createContext(null));class BC extends Ae.Component{render(){return Ae.createElement(Fb.Provider,{value:this._reactInternals},this.props.children)}}function FC(){const i=Ae.useContext(Fb);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=Ae.useId();return Ae.useMemo(()=>{for(const e of[i,i?.alternate]){if(!e)continue;const n=Bb(e,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(n)return n}},[i,t])}const kB=Symbol.for("react.context"),qB=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===kB;function XB(){const i=FC(),[t]=Ae.useState(()=>new Map);t.clear();let e=i;for(;e;){const n=e.type;qB(n)&&n!==Fb&&!t.has(n)&&t.set(n,Ae.use(VC(n))),e=e.return}return t}function jB(){const i=XB();return Ae.useMemo(()=>Array.from(i.keys()).reduce((t,e)=>n=>Ae.createElement(t,null,Ae.createElement(e.Provider,{...n,value:i.get(e)})),t=>Ae.createElement(BC,{...t})),[i])}function HC(i){let t=i.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const GC=i=>i&&i.isOrthographicCamera,YB=i=>i&&i.hasOwnProperty("current"),WB=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),C_=((i,t)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?Ae.useLayoutEffect:Ae.useEffect;function kC(i){const t=Ae.useRef(i);return C_(()=>void(t.current=i),[i]),t}function KB(){const i=FC(),t=jB();return Ae.useMemo(()=>({children:e})=>{const s=!!Bb(i,!0,r=>r.type===Ae.StrictMode)?Ae.StrictMode:Ae.Fragment;return ht.jsx(s,{children:ht.jsx(t,{children:e})})},[i,t])}function QB({set:i}){return C_(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const ZB=(i=>(i=class extends Ae.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function qC(i){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],e),i[1]):i}function op(i){var t;return(t=i.__r3f)==null?void 0:t.root.getState()}const Gi={obj:i=>i===Object(i)&&!Gi.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,t,{arrays:e="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof t||!!i!=!!t)return!1;if(Gi.str(i)||Gi.num(i)||Gi.boo(i))return i===t;const r=Gi.obj(i);if(r&&n==="reference")return i===t;const u=Gi.arr(i);if(u&&e==="reference")return i===t;if((u||r)&&i===t)return!0;let f;for(f in i)if(!(f in t))return!1;if(r&&e==="shallow"&&n==="shallow"){for(f in s?t:i)if(!Gi.equ(i[f],t[f],{strict:s,objects:"reference"}))return!1}else for(f in s?t:i)if(i[f]!==t[f])return!1;if(Gi.und(f)){if(u&&i.length===0&&t.length===0||r&&Object.keys(i).length===0&&Object.keys(t).length===0)return!0;if(i!==t)return!1}return!0}};function JB(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const t in i){const e=i[t];e?.type!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const XC=["children","key","ref"];function $B(i){const t={};for(const e in i)XC.includes(e)||(t[e]=i[e]);return t}function H0(i,t,e,n){const s=i;let r=s?.__r3f;return r||(r={root:t,type:e,parent:null,children:[],props:$B(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function c_(i,t){let e=i[t];if(!t.includes("-"))return{root:i,key:t,target:e};e=i;for(const s of t.split("-")){var n;t=s,i=e,e=(n=e)==null?void 0:n[t]}return{root:i,key:t,target:e}}const gR=/-\d+$/;function G0(i,t){if(Gi.str(t.props.attach)){if(gR.test(t.props.attach)){const s=t.props.attach.replace(gR,""),{root:r,key:u}=c_(i.object,s);Array.isArray(r[u])||(r[u]=[])}const{root:e,key:n}=c_(i.object,t.props.attach);t.previousAttach=e[n],e[n]=t.object}else Gi.fun(t.props.attach)&&(t.previousAttach=t.props.attach(i.object,t.object))}function k0(i,t){if(Gi.str(t.props.attach)){const{root:e,key:n}=c_(i.object,t.props.attach),s=t.previousAttach;s===void 0?delete e[n]:e[n]=s}else t.previousAttach==null||t.previousAttach(i.object,t.object);delete t.previousAttach}const ET=[...XC,"args","dispose","attach","object","onUpdate","dispose"],_R=new Map;function t5(i){let t=_R.get(i.constructor);try{t||(t=new i.constructor,_R.set(i.constructor,t))}catch{}return t}function e5(i,t){const e={};for(const n in t)if(!ET.includes(n)&&!Gi.equ(t[n],i.props[n])){e[n]=t[n];for(const s in t)s.startsWith(`${n}-`)&&(e[s]=t[s])}for(const n in i.props){if(ET.includes(n)||t.hasOwnProperty(n))continue;const{root:s,key:r}=c_(i.object,n);if(s.constructor&&s.constructor.length===0){const u=t5(s);Gi.und(u)||(e[r]=u[r])}else e[r]=0}return e}const n5=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],i5=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Qc(i,t){var e;const n=i.__r3f,s=n&&HC(n).getState(),r=n?.eventCount;for(const f in t){let d=t[f];if(ET.includes(f))continue;if(n&&i5.test(f)){typeof d=="function"?n.handlers[f]=d:delete n.handlers[f],n.eventCount=Object.keys(n.handlers).length;continue}if(d===void 0)continue;let{root:m,key:_,target:y}=c_(i,f);if(y instanceof Cp&&d instanceof Cp)y.mask=d.mask;else if(y instanceof Te&&WB(d))y.set(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof y.copy=="function"&&d!=null&&d.constructor&&y.constructor===d.constructor)y.copy(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&Array.isArray(d))typeof y.fromArray=="function"?y.fromArray(d):y.set(...d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof d=="number")typeof y.setScalar=="function"?y.setScalar(d):y.set(d);else{var u;m[_]=d,s&&!s.linear&&n5.includes(_)&&(u=m[_])!=null&&u.isTexture&&m[_].format===Ca&&m[_].type===xo&&(m[_].colorSpace=Ra)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(e=n.object)!=null&&e.isObject3D&&r!==n.eventCount){const f=n.object,d=s.internal.interaction.indexOf(f);d>-1&&s.internal.interaction.splice(d,1),n.eventCount&&f.raycast!==null&&s.internal.interaction.push(f)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Wp(n),i}function Wp(i){var t;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const e=(t=i.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function s5(i,t){i.manual||(GC(i)?(i.left=t.width/-2,i.right=t.width/2,i.top=t.height/2,i.bottom=t.height/-2):i.aspect=t.width/t.height,i.updateProjectionMatrix())}const yr=i=>i?.isObject3D;function Ov(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function jC(i,t,e,n){const s=e.get(t);s&&(e.delete(t),e.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function a5(i,t){const{internal:e}=i.getState();e.interaction=e.interaction.filter(n=>n!==t),e.initialHits=e.initialHits.filter(n=>n!==t),e.hovered.forEach((n,s)=>{(n.eventObject===t||n.object===t)&&e.hovered.delete(s)}),e.capturedMap.forEach((n,s)=>{jC(e.capturedMap,t,n,s)})}function r5(i){function t(d){const{internal:m}=i.getState(),_=d.offsetX-m.initialClick[0],y=d.offsetY-m.initialClick[1];return Math.round(Math.sqrt(_*_+y*y))}function e(d){return d.filter(m=>["Move","Over","Enter","Out","Leave"].some(_=>{var y;return(y=m.__r3f)==null?void 0:y.handlers["onPointer"+_]}))}function n(d,m){const _=i.getState(),y=new Set,S=[],T=m?m(_.internal.interaction):_.internal.interaction;for(let M=0;M<T.length;M++){const O=op(T[M]);O&&(O.raycaster.camera=void 0)}_.previousRoot||_.events.compute==null||_.events.compute(d,_);function R(M){const O=op(M);if(!O||!O.events.enabled||O.raycaster.camera===null)return[];if(O.raycaster.camera===void 0){var z;O.events.compute==null||O.events.compute(d,O,(z=O.previousRoot)==null?void 0:z.getState()),O.raycaster.camera===void 0&&(O.raycaster.camera=null)}return O.raycaster.camera?O.raycaster.intersectObject(M,!0):[]}let C=T.flatMap(R).sort((M,O)=>{const z=op(M.object),V=op(O.object);return!z||!V?M.distance-O.distance:V.events.priority-z.events.priority||M.distance-O.distance}).filter(M=>{const O=Ov(M);return y.has(O)?!1:(y.add(O),!0)});_.events.filter&&(C=_.events.filter(C,_));for(const M of C){let O=M.object;for(;O;){var w;(w=O.__r3f)!=null&&w.eventCount&&S.push({...M,eventObject:O}),O=O.parent}}if("pointerId"in d&&_.internal.capturedMap.has(d.pointerId))for(let M of _.internal.capturedMap.get(d.pointerId).values())y.has(Ov(M.intersection))||S.push(M.intersection);return S}function s(d,m,_,y){if(d.length){const S={stopped:!1};for(const T of d){let R=op(T.object);if(R||T.object.traverseAncestors(C=>{const w=op(C);if(w)return R=w,!1}),R){const{raycaster:C,pointer:w,camera:M,internal:O}=R,z=new tt(w.x,w.y,0).unproject(M),V=D=>{var U,F;return(U=(F=O.capturedMap.get(D))==null?void 0:F.has(T.eventObject))!=null?U:!1},j=D=>{const U={intersection:T,target:m.target};O.capturedMap.has(D)?O.capturedMap.get(D).set(T.eventObject,U):O.capturedMap.set(D,new Map([[T.eventObject,U]])),m.target.setPointerCapture(D)},q=D=>{const U=O.capturedMap.get(D);U&&jC(O.capturedMap,T.eventObject,U,D)};let L={};for(let D in m){let U=m[D];typeof U!="function"&&(L[D]=U)}let P={...T,...L,pointer:w,intersections:d,stopped:S.stopped,delta:_,unprojectedPoint:z,ray:C.ray,camera:M,stopPropagation(){const D="pointerId"in m&&O.capturedMap.get(m.pointerId);if((!D||D.has(T.eventObject))&&(P.stopped=S.stopped=!0,O.hovered.size&&Array.from(O.hovered.values()).find(U=>U.eventObject===T.eventObject))){const U=d.slice(0,d.indexOf(T));r([...U,T])}},target:{hasPointerCapture:V,setPointerCapture:j,releasePointerCapture:q},currentTarget:{hasPointerCapture:V,setPointerCapture:j,releasePointerCapture:q},nativeEvent:m};if(y(P),S.stopped===!0)break}}}return d}function r(d){const{internal:m}=i.getState();for(const _ of m.hovered.values())if(!d.length||!d.find(y=>y.object===_.object&&y.index===_.index&&y.instanceId===_.instanceId)){const S=_.eventObject.__r3f;if(m.hovered.delete(Ov(_)),S!=null&&S.eventCount){const T=S.handlers,R={..._,intersections:d};T.onPointerOut==null||T.onPointerOut(R),T.onPointerLeave==null||T.onPointerLeave(R)}}}function u(d,m){for(let _=0;_<m.length;_++){const y=m[_].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(d)}}function f(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return m=>{const{internal:_}=i.getState();"pointerId"in m&&_.capturedMap.has(m.pointerId)&&requestAnimationFrame(()=>{_.capturedMap.has(m.pointerId)&&(_.capturedMap.delete(m.pointerId),r([]))})}}return function(_){const{onPointerMissed:y,internal:S}=i.getState();S.lastEvent.current=_;const T=d==="onPointerMove",R=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",w=n(_,T?e:void 0),M=R?t(_):0;d==="onPointerDown"&&(S.initialClick=[_.offsetX,_.offsetY],S.initialHits=w.map(z=>z.eventObject)),R&&!w.length&&M<=2&&(u(_,S.interaction),y&&y(_)),T&&r(w);function O(z){const V=z.eventObject,j=V.__r3f;if(!(j!=null&&j.eventCount))return;const q=j.handlers;if(T){if(q.onPointerOver||q.onPointerEnter||q.onPointerOut||q.onPointerLeave){const L=Ov(z),P=S.hovered.get(L);P?P.stopped&&z.stopPropagation():(S.hovered.set(L,z),q.onPointerOver==null||q.onPointerOver(z),q.onPointerEnter==null||q.onPointerEnter(z))}q.onPointerMove==null||q.onPointerMove(z)}else{const L=q[d];L?(!R||S.initialHits.includes(V))&&(u(_,S.interaction.filter(P=>!S.initialHits.includes(P))),L(z)):R&&S.initialHits.includes(V)&&u(_,S.interaction.filter(P=>!S.initialHits.includes(P)))}}s(w,_,M,O)}}return{handlePointer:f}}const yR=i=>!!(i!=null&&i.render),YC=Ae.createContext(null),o5=(i,t)=>{const e=OB((f,d)=>{const m=new tt,_=new tt,y=new tt;function S(M=d().camera,O=_,z=d().size){const{width:V,height:j,top:q,left:L}=z,P=V/j;O.isVector3?y.copy(O):y.set(...O);const D=M.getWorldPosition(m).distanceTo(y);if(GC(M))return{width:V/M.zoom,height:j/M.zoom,top:q,left:L,factor:1,distance:D,aspect:P};{const U=M.fov*Math.PI/180,F=2*Math.tan(U/2)*D,Y=F*(V/j);return{width:Y,height:F,top:q,left:L,factor:V/Y,distance:D,aspect:P}}}let T;const R=M=>f(O=>({performance:{...O.performance,current:M}})),C=new Jt;return{set:f,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>i(d(),M),advance:(M,O)=>t(M,O,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Ub,pointer:C,mouse:C,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=d();T&&clearTimeout(T),M.performance.current!==M.performance.min&&R(M.performance.min),T=setTimeout(()=>R(d().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:S},setEvents:M=>f(O=>({...O,events:{...O.events,...M}})),setSize:(M,O,z=0,V=0)=>{const j=d().camera,q={width:M,height:O,top:z,left:V};f(L=>({size:q,viewport:{...L.viewport,...S(j,_,q)}}))},setDpr:M=>f(O=>{const z=qC(M);return{viewport:{...O.viewport,dpr:z,initialDpr:O.viewport.initialDpr||z}}}),setFrameloop:(M="always")=>{const O=d().clock;O.stop(),O.elapsedTime=0,M!=="never"&&(O.start(),O.elapsedTime=0),f(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:Ae.createRef(),active:!1,frames:0,priority:0,subscribe:(M,O,z)=>{const V=d().internal;return V.priority=V.priority+(O>0?1:0),V.subscribers.push({ref:M,priority:O,store:z}),V.subscribers=V.subscribers.sort((j,q)=>j.priority-q.priority),()=>{const j=d().internal;j!=null&&j.subscribers&&(j.priority=j.priority-(O>0?1:0),j.subscribers=j.subscribers.filter(q=>q.ref!==M))}}}}}),n=e.getState();let s=n.size,r=n.viewport.dpr,u=n.camera;return e.subscribe(()=>{const{camera:f,size:d,viewport:m,gl:_,set:y}=e.getState();if(d.width!==s.width||d.height!==s.height||m.dpr!==r){s=d,r=m.dpr,s5(f,d),m.dpr>0&&_.setPixelRatio(m.dpr);const S=typeof HTMLCanvasElement<"u"&&_.domElement instanceof HTMLCanvasElement;_.setSize(d.width,d.height,S)}f!==u&&(u=f,y(S=>({viewport:{...S.viewport,...S.viewport.getCurrentViewport(f)}})))}),e.subscribe(f=>i(f)),e};function WC(){const i=Ae.useContext(YC);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function l5(i=e=>e,t){return WC()(i,t)}function u5(i,t=0){const e=WC(),n=e.getState().internal.subscribe,s=kC(i);return C_(()=>n(s,t,e),[t,n,e]),null}function c5(i){const t=FB(i);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Ae.version}),t}const KC=0,Up={},h5=/^three(?=[A-Z])/,GS=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let f5=0;const d5=i=>typeof i=="function";function p5(i){if(d5(i)){const t=`${f5++}`;return Up[t]=i,t}else Object.assign(Up,i)}function QC(i,t){const e=GS(i),n=Up[e];if(i!=="primitive"&&!n)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function m5(i,t,e){var n;return i=GS(i)in Up?i:i.replace(h5,""),QC(i,t),i==="primitive"&&(n=t.object)!=null&&n.__r3f&&delete t.object.__r3f,H0(t.object,e,i,t)}function g5(i){if(!i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?k0(i.parent,i):yr(i.object)&&(i.object.visible=!1),i.isHidden=!0,Wp(i)}}function ZC(i){if(i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?G0(i.parent,i):yr(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,Wp(i)}}function Hb(i,t,e){const n=t.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!t.object){var s,r;const u=Up[GS(t.type)];t.object=(s=t.props.object)!=null?s:new u(...(r=t.props.args)!=null?r:[]),t.object.__r3f=t}if(Qc(t.object,t.props),t.props.attach)G0(i,t);else if(yr(t.object)&&yr(i.object)){const u=i.object.children.indexOf(e?.object);if(e&&u!==-1){const f=i.object.children.indexOf(t.object);if(f!==-1){i.object.children.splice(f,1);const d=f<u?u-1:u;i.object.children.splice(d,0,t.object)}else t.object.parent=i.object,i.object.children.splice(u,0,t.object),t.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:t.object})}else i.object.add(t.object)}for(const u of t.children)Hb(t,u);Wp(t)}}function qE(i,t){t&&(t.parent=i,i.children.push(t),Hb(i,t))}function vR(i,t,e){if(!t||!e)return;t.parent=i;const n=i.children.indexOf(e);n!==-1?i.children.splice(n,0,t):i.children.push(t),Hb(i,t,e)}function JC(i){if(typeof i.dispose=="function"){const t=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():mR.unstable_scheduleCallback(mR.unstable_IdlePriority,t)}}function TT(i,t,e){if(!t)return;t.parent=null;const n=i.children.indexOf(t);n!==-1&&i.children.splice(n,1),t.props.attach?k0(i,t):yr(t.object)&&yr(i.object)&&(i.object.remove(t.object),a5(HC(t),t.object));const s=t.props.dispose!==null&&e!==!1;for(let r=t.children.length-1;r>=0;r--){const u=t.children[r];TT(t,u,s)}t.children.length=0,delete t.object.__r3f,s&&t.type!=="primitive"&&t.object.type!=="Scene"&&JC(t.object),e===void 0&&Wp(t)}function _5(i,t){for(const e of[i,i.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const n=e.ref(t);typeof n=="function"&&(e.refCleanup=n)}else e.ref&&(e.ref.current=t)}const jv=[];function y5(){for(const[e]of jv){const n=e.parent;if(n){e.props.attach?k0(n,e):yr(e.object)&&yr(n.object)&&n.object.remove(e.object);for(const s of e.children)s.props.attach?k0(e,s):yr(s.object)&&yr(e.object)&&e.object.remove(s.object)}e.isHidden&&ZC(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&JC(e.object)}for(const[e,n,s]of jv){e.props=n;const r=e.parent;if(r){var i,t;const u=Up[GS(e.type)];e.object=(i=e.props.object)!=null?i:new u(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,_5(s,e.object),Qc(e.object,e.props),e.props.attach?G0(r,e):yr(e.object)&&yr(r.object)&&r.object.add(e.object);for(const f of e.children)f.props.attach?G0(e,f):yr(f.object)&&yr(e.object)&&e.object.add(f.object);Wp(e)}}jv.length=0}const XE=()=>{},SR={};let Lv=KC;const v5=0,S5=4,bT=c5({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:m5,removeChild:TT,appendChild:qE,appendInitialChild:qE,insertBefore:vR,appendChildToContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||qE(e,t)},removeChildFromContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||TT(e,t)},insertInContainerBefore(i,t,e){const n=i.getState().scene.__r3f;!t||!e||!n||vR(n,t,e)},getRootHostContext:()=>SR,getChildHostContext:()=>SR,commitUpdate(i,t,e,n,s){var r,u,f;QC(t,n);let d=!1;if((i.type==="primitive"&&e.object!==n.object||((r=n.args)==null?void 0:r.length)!==((u=e.args)==null?void 0:u.length)||(f=n.args)!=null&&f.some((_,y)=>{var S;return _!==((S=e.args)==null?void 0:S[y])}))&&(d=!0),d)jv.push([i,{...n},s]);else{const _=e5(i,n);Object.keys(_).length&&(Object.assign(i.props,_),Qc(i.object,_))}(s.sibling===null||(s.flags&S5)===v5)&&y5()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i?.object,prepareForCommit:()=>null,preparePortalMount:i=>H0(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:g5,unhideInstance:ZC,createTextInstance:XE,hideTextInstance:XE,unhideTextInstance:XE,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:Ae.createContext(null),setCurrentUpdatePriority(i){Lv=i},getCurrentUpdatePriority(){return Lv},resolveUpdatePriority(){var i;if(Lv!==KC)return Lv;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Gv.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Gv.ContinuousEventPriority;default:return Gv.DefaultEventPriority}},resetFormInstance(){}}),Of=new Map,lp={objects:"shallow",strict:!1};function x5(i,t){if(!t&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:e,height:n,top:s,left:r}=i.parentElement.getBoundingClientRect();return{width:e,height:n,top:s,left:r}}else if(!t&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function E5(i){const t=Of.get(i),e=t?.fiber,n=t?.store;t&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=n||o5(RT,ER),u=e||bT.createContainer(r,Gv.ConcurrentRoot,null,!1,null,"",s,s,s,null);t||Of.set(i,{fiber:u,store:r});let f,d,m=!1,_=null;return{async configure(y={}){let S;_=new Promise(J=>S=J);let{gl:T,size:R,scene:C,events:w,onCreated:M,shadows:O=!1,linear:z=!1,flat:V=!1,legacy:j=!1,orthographic:q=!1,frameloop:L="always",dpr:P=[1,2],performance:D,raycaster:U,camera:F,onPointerMissed:Y}=y,G=r.getState(),gt=G.gl;if(!G.gl){const J={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},ut=typeof T=="function"?await T(J):T;yR(ut)?gt=ut:gt=new zC({...J,...T}),G.set({gl:gt})}let vt=G.raycaster;vt||G.set({raycaster:vt=new CC});const{params:k,...et}=U||{};if(Gi.equ(et,vt,lp)||Qc(vt,{...et}),Gi.equ(k,vt.params,lp)||Qc(vt,{params:{...vt.params,...k}}),!G.camera||G.camera===d&&!Gi.equ(d,F,lp)){d=F;const J=F?.isCamera,ut=J?F:q?new w_(0,0,0,0,.1,1e3):new Bs(75,0,.1,1e3);J||(ut.position.z=5,F&&(Qc(ut,F),ut.manual||("aspect"in F||"left"in F||"right"in F||"bottom"in F||"top"in F)&&(ut.manual=!0,ut.updateProjectionMatrix())),!G.camera&&!(F!=null&&F.rotation)&&ut.lookAt(0,0,0)),G.set({camera:ut}),vt.camera=ut}if(!G.scene){let J;C!=null&&C.isScene?(J=C,H0(J,r,"",{})):(J=new fb,H0(J,r,"",{}),C&&Qc(J,C)),G.set({scene:J})}w&&!G.events.handlers&&G.set({events:w(r)});const nt=x5(i,R);if(Gi.equ(nt,G.size,lp)||G.setSize(nt.width,nt.height,nt.top,nt.left),P&&G.viewport.dpr!==qC(P)&&G.setDpr(P),G.frameloop!==L&&G.setFrameloop(L),G.onPointerMissed||G.set({onPointerMissed:Y}),D&&!Gi.equ(D,G.performance,lp)&&G.set(J=>({performance:{...J.performance,...D}})),!G.xr){var ft;const J=(Lt,ee)=>{const xt=r.getState();xt.frameloop!=="never"&&ER(Lt,!0,xt,ee)},ut=()=>{const Lt=r.getState();Lt.gl.xr.enabled=Lt.gl.xr.isPresenting,Lt.gl.xr.setAnimationLoop(Lt.gl.xr.isPresenting?J:null),Lt.gl.xr.isPresenting||RT(Lt)},Ot={connect(){const Lt=r.getState().gl;Lt.xr.addEventListener("sessionstart",ut),Lt.xr.addEventListener("sessionend",ut)},disconnect(){const Lt=r.getState().gl;Lt.xr.removeEventListener("sessionstart",ut),Lt.xr.removeEventListener("sessionend",ut)}};typeof((ft=gt.xr)==null?void 0:ft.addEventListener)=="function"&&Ot.connect(),G.set({xr:Ot})}if(gt.shadowMap){const J=gt.shadowMap.enabled,ut=gt.shadowMap.type;if(gt.shadowMap.enabled=!!O,Gi.boo(O))gt.shadowMap.type=Ig;else if(Gi.str(O)){var wt;const Ot={basic:B2,percentage:uS,soft:Ig,variance:$o};gt.shadowMap.type=(wt=Ot[O])!=null?wt:Ig}else Gi.obj(O)&&Object.assign(gt.shadowMap,O);(J!==gt.shadowMap.enabled||ut!==gt.shadowMap.type)&&(gt.shadowMap.needsUpdate=!0)}return Hn.enabled=!j,m||(gt.outputColorSpace=z?ah:Ra,gt.toneMapping=V?jl:ZT),G.legacy!==j&&G.set(()=>({legacy:j})),G.linear!==z&&G.set(()=>({linear:z})),G.flat!==V&&G.set(()=>({flat:V})),T&&!Gi.fun(T)&&!yR(T)&&!Gi.equ(T,gt,lp)&&Qc(gt,T),f=M,m=!0,S(),this},render(y){return!m&&!_&&this.configure(),_.then(()=>{bT.updateContainer(ht.jsx(T5,{store:r,children:y,onCreated:f,rootElement:i}),u,null,()=>{})}),r},unmount(){$C(i)}}}function T5({store:i,children:t,onCreated:e,rootElement:n}){return C_(()=>{const s=i.getState();s.set(r=>({internal:{...r.internal,active:!0}})),e&&e(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),ht.jsx(YC.Provider,{value:i,children:t})}function $C(i,t){const e=Of.get(i),n=e?.fiber;if(n){const s=e?.store.getState();s&&(s.internal.active=!1),bT.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var r,u,f,d;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(u=r.renderLists)==null||u.dispose==null||u.dispose(),(f=s.gl)==null||f.forceContextLoss==null||f.forceContextLoss(),(d=s.gl)!=null&&d.xr&&s.xr.disconnect(),JB(s.scene),Of.delete(i)}catch{}},500)})}}const b5=new Set,M5=new Set,A5=new Set;function jE(i,t){if(i.size)for(const{callback:e}of i.values())e(t)}function Hg(i,t){switch(i){case"before":return jE(b5,t);case"after":return jE(M5,t);case"tail":return jE(A5,t)}}let YE,WE;function MT(i,t,e){let n=t.clock.getDelta();t.frameloop==="never"&&typeof i=="number"&&(n=i-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=i),YE=t.internal.subscribers;for(let s=0;s<YE.length;s++)WE=YE[s],WE.ref.current(WE.store.getState(),n,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let q0=!1,AT=!1,KE,xR,up;function t3(i){xR=requestAnimationFrame(t3),q0=!0,KE=0,Hg("before",i),AT=!0;for(const e of Of.values()){var t;up=e.store.getState(),up.internal.active&&(up.frameloop==="always"||up.internal.frames>0)&&!((t=up.gl.xr)!=null&&t.isPresenting)&&(KE+=MT(i,up))}if(AT=!1,Hg("after",i),KE===0)return Hg("tail",i),q0=!1,cancelAnimationFrame(xR)}function RT(i,t=1){var e;if(!i)return Of.forEach(n=>RT(n.store.getState(),t));(e=i.gl.xr)!=null&&e.isPresenting||!i.internal.active||i.frameloop==="never"||(t>1?i.internal.frames=Math.min(60,i.internal.frames+t):AT?i.internal.frames=2:i.internal.frames=1,q0||(q0=!0,requestAnimationFrame(t3)))}function ER(i,t=!0,e,n){if(t&&Hg("before",i),e)MT(i,e,n);else for(const s of Of.values())MT(i,s.store.getState());t&&Hg("after",i)}const QE={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function R5(i){const{handlePointer:t}=r5(i);return{priority:1,enabled:!0,compute(e,n,s){n.pointer.set(e.offsetX/n.size.width*2-1,-(e.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(QE).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var e;const{events:n,internal:s}=i.getState();(e=s.lastEvent)!=null&&e.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:e=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(r=>({events:{...r.events,connected:e}})),s.handlers)for(const r in s.handlers){const u=s.handlers[r],[f,d]=QE[r];e.addEventListener(f,u,{passive:d})}},disconnect:()=>{const{set:e,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const r=n.handlers[s],[u]=QE[s];n.connected.removeEventListener(u,r)}e(s=>({events:{...s.events,connected:void 0}}))}}}}function TR(i,t){let e;return(...n)=>{window.clearTimeout(e),e=window.setTimeout(()=>i(...n),t)}}function w5({debounce:i,scroll:t,polyfill:e,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,u]=Ae.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),f=Ae.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),d=i?typeof i=="number"?i:i.scroll:null,m=i?typeof i=="number"?i:i.resize:null,_=Ae.useRef(!1);Ae.useEffect(()=>(_.current=!0,()=>void(_.current=!1)));const[y,S,T]=Ae.useMemo(()=>{const M=()=>{if(!f.current.element)return;const{left:O,top:z,width:V,height:j,bottom:q,right:L,x:P,y:D}=f.current.element.getBoundingClientRect(),U={left:O,top:z,width:V,height:j,bottom:q,right:L,x:P,y:D};f.current.element instanceof HTMLElement&&n&&(U.height=f.current.element.offsetHeight,U.width=f.current.element.offsetWidth),Object.freeze(U),_.current&&!I5(f.current.lastBounds,U)&&u(f.current.lastBounds=U)};return[M,m?TR(M,m):M,d?TR(M,d):M]},[u,n,d,m]);function R(){f.current.scrollContainers&&(f.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",T,!0)),f.current.scrollContainers=null),f.current.resizeObserver&&(f.current.resizeObserver.disconnect(),f.current.resizeObserver=null),f.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",f.current.orientationHandler))}function C(){f.current.element&&(f.current.resizeObserver=new s(T),f.current.resizeObserver.observe(f.current.element),t&&f.current.scrollContainers&&f.current.scrollContainers.forEach(M=>M.addEventListener("scroll",T,{capture:!0,passive:!0})),f.current.orientationHandler=()=>{T()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",f.current.orientationHandler))}const w=M=>{!M||M===f.current.element||(R(),f.current.element=M,f.current.scrollContainers=e3(M),C())};return D5(T,!!t),C5(S),Ae.useEffect(()=>{R(),C()},[t,T,S]),Ae.useEffect(()=>R,[]),[w,r,y]}function C5(i){Ae.useEffect(()=>{const t=i;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[i])}function D5(i,t){Ae.useEffect(()=>{if(t){const e=i;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[i,t])}function e3(i){const t=[];if(!i||i===document.body)return t;const{overflow:e,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[e,n,s].some(r=>r==="auto"||r==="scroll")&&t.push(i),[...t,...e3(i.parentElement)]}const N5=["x","y","top","bottom","left","right","width","height"],I5=(i,t)=>N5.every(e=>i[e]===t[e]);function U5({ref:i,children:t,fallback:e,resize:n,style:s,gl:r,events:u=R5,eventSource:f,eventPrefix:d,shadows:m,linear:_,flat:y,legacy:S,orthographic:T,frameloop:R,dpr:C,performance:w,raycaster:M,camera:O,scene:z,onPointerMissed:V,onCreated:j,...q}){Ae.useMemo(()=>p5(TB),[]);const L=KB(),[P,D]=w5({scroll:!0,debounce:{scroll:50,resize:0},...n}),U=Ae.useRef(null),F=Ae.useRef(null);Ae.useImperativeHandle(i,()=>U.current);const Y=kC(V),[G,gt]=Ae.useState(!1),[vt,k]=Ae.useState(!1);if(G)throw G;if(vt)throw vt;const et=Ae.useRef(null);C_(()=>{const ft=U.current;if(D.width>0&&D.height>0&&ft){et.current||(et.current=E5(ft));async function wt(){await et.current.configure({gl:r,scene:z,events:u,shadows:m,linear:_,flat:y,legacy:S,orthographic:T,frameloop:R,dpr:C,performance:w,raycaster:M,camera:O,size:D,onPointerMissed:(...J)=>Y.current==null?void 0:Y.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(f?YB(f)?f.current:f:F.current),d&&J.setEvents({compute:(ut,Ot)=>{const Lt=ut[d+"X"],ee=ut[d+"Y"];Ot.pointer.set(Lt/Ot.size.width*2-1,-(ee/Ot.size.height)*2+1),Ot.raycaster.setFromCamera(Ot.pointer,Ot.camera)}}),j?.(J)}}),et.current.render(ht.jsx(L,{children:ht.jsx(ZB,{set:k,children:ht.jsx(Ae.Suspense,{fallback:ht.jsx(QB,{set:gt}),children:t??null})})}))}wt()}}),Ae.useEffect(()=>{const ft=U.current;if(ft)return()=>$C(ft)},[]);const nt=f?"none":"auto";return ht.jsx("div",{ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:nt,...s},...q,children:ht.jsx("div",{ref:P,style:{width:"100%",height:"100%"},children:ht.jsx("canvas",{ref:U,style:{display:"block"},children:e})})})}function O5(i){return ht.jsx(BC,{children:ht.jsx(U5,{...i})})}const L5=i=>(i=i.replace("#",""),[parseInt(i.slice(0,2),16)/255,parseInt(i.slice(2,4),16)/255,parseInt(i.slice(4,6),16)/255]),P5=`
varying vec2 vUv;
varying vec3 vPosition;
void main() {
  vPosition = position;
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,z5=`
varying vec2 vUv;
varying vec3 vPosition;
uniform float uTime;
uniform vec3  uColor;
uniform float uSpeed;
uniform float uScale;
uniform float uRotation;
uniform float uNoiseIntensity;
const float e = 2.71828182845904523536;
float noise(vec2 texCoord) {
  float G = e;
  vec2  r = (G * sin(G * texCoord));
  return fract(r.x * r.y * (1.0 + texCoord.x));
}
vec2 rotateUvs(vec2 uv, float angle) {
  float c = cos(angle);
  float s = sin(angle);
  mat2  rot = mat2(c, -s, s, c);
  return rot * uv;
}
void main() {
  float rnd        = noise(gl_FragCoord.xy);
  vec2  uv         = rotateUvs(vUv * uScale, uRotation);
  vec2  tex        = uv * uScale;
  float tOffset    = uSpeed * uTime;
  tex.y += 0.03 * sin(8.0 * tex.x - tOffset);
  float pattern = 0.6 +
                  0.4 * sin(5.0 * (tex.x + tex.y +
                                   cos(3.0 * tex.x + 5.0 * tex.y) +
                                   0.02 * tOffset) +
                           sin(20.0 * (tex.x + tex.y - 0.1 * tOffset)));
  vec4 col = vec4(uColor, 1.0) * vec4(pattern) - rnd / 15.0 * uNoiseIntensity;
  col.a = 1.0;
  gl_FragColor = col;
}
`,n3=Ae.forwardRef(function({uniforms:t},e){const{viewport:n}=l5();return Ae.useLayoutEffect(()=>{e.current&&e.current.scale.set(n.width,n.height,1)},[e,n]),u5((s,r)=>{e.current.material.uniforms.uTime.value+=.1*r}),ht.jsxs("mesh",{ref:e,children:[ht.jsx("planeGeometry",{args:[1,1,1,1]}),ht.jsx("shaderMaterial",{uniforms:t,vertexShader:P5,fragmentShader:z5})]})});n3.displayName="SilkPlane";const V5=({speed:i=5,scale:t=1,color:e="#7B7481",noiseIntensity:n=1.5,rotation:s=0})=>{const r=Ae.useRef(),u=Ae.useMemo(()=>({uSpeed:{value:i},uScale:{value:t},uNoiseIntensity:{value:n},uColor:{value:new Te(...L5(e))},uRotation:{value:s},uTime:{value:0}}),[i,t,n,e,s]);return ht.jsx(O5,{dpr:[1,2],frameloop:"always",children:ht.jsx(n3,{ref:r,uniforms:u})})};function B5(){const i=Ae.useRef(null),t=Ae.useRef(null),e=Ae.useRef(null);Ae.useEffect(()=>{setTimeout(()=>{i.current&&i.current.classList.add("blur-in")},100),setTimeout(()=>{t.current&&t.current.classList.add("blur-in")},400),setTimeout(()=>{e.current&&e.current.classList.add("blur-in")},700)},[]);const n=()=>{const s=document.querySelector("#réservation");s&&s.scrollIntoView({behavior:"smooth"})};return ht.jsxs("div",{className:"hero-container",children:[ht.jsx("div",{className:"hero-background",children:ht.jsx(V5,{speed:5,scale:1,color:"#c39e74",noiseIntensity:1,rotation:0})}),ht.jsxs("div",{className:"hero-content",children:[ht.jsx("h1",{ref:i,className:"hero-title hero-animate",children:"Shiynelly Lashes"}),ht.jsx("p",{ref:t,className:"hero-subtitle hero-animate",children:"Révélez la beauté de votre regard avec nos extensions de cils sur mesure"}),ht.jsx("button",{ref:e,className:"hero-cta hero-animate",onClick:n,children:"Prendre Rendez-vous"})]})]})}const F5=({children:i,className:t="",spotlightColor:e="rgba(0, 229, 255, 0.2)"})=>{const n=Ae.useRef(null),s=r=>{const u=n.current.getBoundingClientRect(),f=r.clientX-u.left,d=r.clientY-u.top;n.current.style.setProperty("--mouse-x",`${f}px`),n.current.style.setProperty("--mouse-y",`${d}px`),n.current.style.setProperty("--spotlight-color",e)};return ht.jsx("div",{ref:n,onMouseMove:s,className:`card-spotlight ${t}`,children:i})};function H5(){const[i,t]=Ae.useState({}),[e,n]=Ae.useState(!1),s=Ae.useRef(null);Ae.useEffect(()=>{const u=new IntersectionObserver(([f])=>{f.isIntersecting&&(n(!0),u.unobserve(f.target))},{threshold:.3});return s.current&&u.observe(s.current),()=>u.disconnect()},[]);const r=u=>{t(f=>({...f,[u]:!f[u]}))};return ht.jsx("section",{id:"nosprestations",ref:s,children:ht.jsxs("div",{className:`prestations-container ${e?"fade-in-up":""}`,children:[ht.jsx("h2",{children:"Nos Prestations"}),ht.jsx("div",{className:"prestations-grid",children:$N.map((u,f)=>ht.jsx(F5,{className:"prestation-card",spotlightColor:"rgba(195, 158, 116, 0.5)",children:ht.jsxs("div",{className:"prestation-content",children:[ht.jsx("h3",{children:u.title}),ht.jsx("p",{className:"prestation-description",children:u.description}),ht.jsx("span",{className:"prestation-price",children:u.price}),ht.jsxs("button",{className:`result-toggle ${i[f]?"active":""}`,onClick:()=>r(f),children:["Résultat",ht.jsx("i",{className:`fas fa-arrow-down arrow-icon ${i[f]?"rotated":""}`})]}),ht.jsx("div",{className:`result-content-wrapper ${i[f]?"show":""}`,children:ht.jsx("div",{className:"result-text",children:u.result})})]})},f))})]})})}class D_{constructor(t=0,e="Network Error"){this.status=t,this.text=e}}const G5=()=>{if(!(typeof localStorage>"u"))return{get:i=>Promise.resolve(localStorage.getItem(i)),set:(i,t)=>Promise.resolve(localStorage.setItem(i,t)),remove:i=>Promise.resolve(localStorage.removeItem(i))}},ta={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:G5()},Gb=i=>i?typeof i=="string"?{publicKey:i}:i.toString()==="[object Object]"?i:{}:{},k5=(i,t="https://api.emailjs.com")=>{if(!i)return;const e=Gb(i);ta.publicKey=e.publicKey,ta.blockHeadless=e.blockHeadless,ta.storageProvider=e.storageProvider,ta.blockList=e.blockList,ta.limitRate=e.limitRate,ta.origin=e.origin||t},i3=async(i,t,e={})=>{const n=await fetch(ta.origin+i,{method:"POST",headers:e,body:t}),s=await n.text(),r=new D_(n.status,s);if(n.ok)return r;throw r},s3=(i,t,e)=>{if(!i||typeof i!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e||typeof e!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},q5=i=>{if(i&&i.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},a3=i=>i.webdriver||!i.languages||i.languages.length===0,r3=()=>new D_(451,"Unavailable For Headless Browser"),X5=(i,t)=>{if(!Array.isArray(i))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},j5=i=>!i.list?.length||!i.watchVariable,Y5=(i,t)=>i instanceof FormData?i.get(t):i[t],o3=(i,t)=>{if(j5(i))return!1;X5(i.list,i.watchVariable);const e=Y5(t,i.watchVariable);return typeof e!="string"?!1:i.list.includes(e)},l3=()=>new D_(403,"Forbidden"),W5=(i,t)=>{if(typeof i!="number"||i<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},K5=async(i,t,e)=>{const n=Number(await e.get(i)||0);return t-Date.now()+n},u3=async(i,t,e)=>{if(!t.throttle||!e)return!1;W5(t.throttle,t.id);const n=t.id||i;return await K5(n,t.throttle,e)>0?!0:(await e.set(n,Date.now().toString()),!1)},c3=()=>new D_(429,"Too Many Requests"),Q5=async(i,t,e,n)=>{const s=Gb(n),r=s.publicKey||ta.publicKey,u=s.blockHeadless||ta.blockHeadless,f=s.storageProvider||ta.storageProvider,d={...ta.blockList,...s.blockList},m={...ta.limitRate,...s.limitRate};return u&&a3(navigator)?Promise.reject(r3()):(s3(r,i,t),q5(e),e&&o3(d,e)?Promise.reject(l3()):await u3(location.pathname,m,f)?Promise.reject(c3()):i3("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:r,service_id:i,template_id:t,template_params:e}),{"Content-type":"application/json"}))},Z5=i=>{if(!i||i.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},J5=i=>typeof i=="string"?document.querySelector(i):i,$5=async(i,t,e,n)=>{const s=Gb(n),r=s.publicKey||ta.publicKey,u=s.blockHeadless||ta.blockHeadless,f=ta.storageProvider||s.storageProvider,d={...ta.blockList,...s.blockList},m={...ta.limitRate,...s.limitRate};if(u&&a3(navigator))return Promise.reject(r3());const _=J5(e);s3(r,i,t),Z5(_);const y=new FormData(_);return o3(d,y)?Promise.reject(l3()):await u3(location.pathname,m,f)?Promise.reject(c3()):(y.append("lib_version","4.4.1"),y.append("service_id",i),y.append("template_id",t),y.append("user_id",r),i3("/api/v1.0/email/send-form",y))},bR={init:k5,send:Q5,sendForm:$5,EmailJSResponseStatus:D_},t6=()=>{};var MR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=function(i){const t=[];let e=0;for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},e6=function(i){const t=[];let e=0,n=0;for(;e<i.length;){const s=i[e++];if(s<128)t[n++]=String.fromCharCode(s);else if(s>191&&s<224){const r=i[e++];t[n++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=i[e++],u=i[e++],f=i[e++],d=((s&7)<<18|(r&63)<<12|(u&63)<<6|f&63)-65536;t[n++]=String.fromCharCode(55296+(d>>10)),t[n++]=String.fromCharCode(56320+(d&1023))}else{const r=i[e++],u=i[e++];t[n++]=String.fromCharCode((s&15)<<12|(r&63)<<6|u&63)}}return t.join("")},f3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<i.length;s+=3){const r=i[s],u=s+1<i.length,f=u?i[s+1]:0,d=s+2<i.length,m=d?i[s+2]:0,_=r>>2,y=(r&3)<<4|f>>4;let S=(f&15)<<2|m>>6,T=m&63;d||(T=64,u||(S=64)),n.push(e[_],e[y],e[S],e[T])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(h3(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):e6(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<i.length;){const r=e[i.charAt(s++)],f=s<i.length?e[i.charAt(s)]:0;++s;const m=s<i.length?e[i.charAt(s)]:64;++s;const y=s<i.length?e[i.charAt(s)]:64;if(++s,r==null||f==null||m==null||y==null)throw new n6;const S=r<<2|f>>4;if(n.push(S),m!==64){const T=f<<4&240|m>>2;if(n.push(T),y!==64){const R=m<<6&192|y;n.push(R)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class n6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i6=function(i){const t=h3(i);return f3.encodeByteArray(t,!0)},X0=function(i){return i6(i).replace(/\./g,"")},s6=function(i){try{return f3.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=()=>a6().__FIREBASE_DEFAULTS__,o6=()=>{if(typeof process>"u"||typeof MR>"u")return;const i=MR.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},l6=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&s6(i[1]);return t&&JSON.parse(t)},kb=()=>{try{return t6()||r6()||o6()||l6()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},u6=i=>kb()?.emulatorHosts?.[i],c6=i=>{const t=u6(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},d3=()=>kb()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function f6(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",s=i.iat||0,r=i.sub||i.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...i};return[X0(JSON.stringify(e)),X0(JSON.stringify(u)),""].join(".")}const Gg={};function p6(){const i={prod:[],emulator:[]};for(const t of Object.keys(Gg))Gg[t]?i.emulator.push(t):i.prod.push(t);return i}function m6(i){let t=document.getElementById(i),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),e=!0),{created:e,element:t}}let AR=!1;function g6(i,t){if(typeof window>"u"||typeof document>"u"||!qb(window.location.host)||Gg[i]===t||Gg[i]||AR)return;Gg[i]=t;function e(S){return`__firebase__banner__${S}`}const n="__firebase__banner",r=p6().prod.length>0;function u(){const S=document.getElementById(n);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function d(S,T){S.setAttribute("width","24"),S.setAttribute("id",T),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{AR=!0,u()},S}function _(S,T){S.setAttribute("id",T),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function y(){const S=m6(n),T=e("text"),R=document.getElementById(T)||document.createElement("span"),C=e("learnmore"),w=document.getElementById(C)||document.createElement("a"),M=e("preprendIcon"),O=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const z=S.element;f(z),_(w,C);const V=m();d(O,M),z.append(O,R,w,V),document.body.appendChild(z)}r?(R.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y6(){const i=kb()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v6(){return!y6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S6(){try{return typeof indexedDB=="object"}catch{return!1}}function x6(){return new Promise((i,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="FirebaseError";class Kp extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=E6,Object.setPrototypeOf(this,Kp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,p3.prototype.create)}}class p3{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},s=`${this.service}/${t}`,r=this.errors[t],u=r?T6(r,n):"Error",f=`${this.serviceName}: ${u} (${s}).`;return new Kp(s,f,n)}}function T6(i,t){return i.replace(b6,(e,n)=>{const s=t[n];return s!=null?String(s):`<${n}?>`})}const b6=/\{\$([^}]+)}/g;function j0(i,t){if(i===t)return!0;const e=Object.keys(i),n=Object.keys(t);for(const s of e){if(!n.includes(s))return!1;const r=i[s],u=t[s];if(RR(r)&&RR(u)){if(!j0(r,u))return!1}else if(r!==u)return!1}for(const s of n)if(!e.includes(s))return!1;return!0}function RR(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(i){return i&&i._delegate?i._delegate:i}class h_{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new h6;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),n=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(R6(t))try{this.getOrInitializeService({instanceIdentifier:Ef})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const r=this.getOrInitializeService({instanceIdentifier:s});n.resolve(r)}catch{}}}}clearInstance(t=Ef){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ef){return this.instances.has(t)}getOptions(t=Ef){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(r);n===f&&u.resolve(s)}return s}onInit(t,e){const n=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(n)??new Set;s.add(t),this.onInitCallbacks.set(n,s);const r=this.instances.get(n);return r&&t(r,n),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const s of n)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:A6(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Ef){return this.component?this.component.multipleInstances?t:Ef:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function A6(i){return i===Ef?void 0:i}function R6(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new M6(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(qn||(qn={}));const C6={debug:qn.DEBUG,verbose:qn.VERBOSE,info:qn.INFO,warn:qn.WARN,error:qn.ERROR,silent:qn.SILENT},D6=qn.INFO,N6={[qn.DEBUG]:"log",[qn.VERBOSE]:"log",[qn.INFO]:"info",[qn.WARN]:"warn",[qn.ERROR]:"error"},I6=(i,t,...e)=>{if(t<i.logLevel)return;const n=new Date().toISOString(),s=N6[t];if(s)console[s](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class m3{constructor(t){this.name=t,this._logLevel=D6,this._logHandler=I6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?C6[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qn.DEBUG,...t),this._logHandler(this,qn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qn.VERBOSE,...t),this._logHandler(this,qn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qn.INFO,...t),this._logHandler(this,qn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qn.WARN,...t),this._logHandler(this,qn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qn.ERROR,...t),this._logHandler(this,qn.ERROR,...t)}}const U6=(i,t)=>t.some(e=>i instanceof e);let wR,CR;function O6(){return wR||(wR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function L6(){return CR||(CR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g3=new WeakMap,wT=new WeakMap,_3=new WeakMap,ZE=new WeakMap,Xb=new WeakMap;function P6(i){const t=new Promise((e,n)=>{const s=()=>{i.removeEventListener("success",r),i.removeEventListener("error",u)},r=()=>{e($c(i.result)),s()},u=()=>{n(i.error),s()};i.addEventListener("success",r),i.addEventListener("error",u)});return t.then(e=>{e instanceof IDBCursor&&g3.set(e,i)}).catch(()=>{}),Xb.set(t,i),t}function z6(i){if(wT.has(i))return;const t=new Promise((e,n)=>{const s=()=>{i.removeEventListener("complete",r),i.removeEventListener("error",u),i.removeEventListener("abort",u)},r=()=>{e(),s()},u=()=>{n(i.error||new DOMException("AbortError","AbortError")),s()};i.addEventListener("complete",r),i.addEventListener("error",u),i.addEventListener("abort",u)});wT.set(i,t)}let CT={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return wT.get(i);if(t==="objectStoreNames")return i.objectStoreNames||_3.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return $c(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function V6(i){CT=i(CT)}function B6(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=i.call(JE(this),t,...e);return _3.set(n,t.sort?t.sort():[t]),$c(n)}:L6().includes(i)?function(...t){return i.apply(JE(this),t),$c(g3.get(this))}:function(...t){return $c(i.apply(JE(this),t))}}function F6(i){return typeof i=="function"?B6(i):(i instanceof IDBTransaction&&z6(i),U6(i,O6())?new Proxy(i,CT):i)}function $c(i){if(i instanceof IDBRequest)return P6(i);if(ZE.has(i))return ZE.get(i);const t=F6(i);return t!==i&&(ZE.set(i,t),Xb.set(t,i)),t}const JE=i=>Xb.get(i);function H6(i,t,{blocked:e,upgrade:n,blocking:s,terminated:r}={}){const u=indexedDB.open(i,t),f=$c(u);return n&&u.addEventListener("upgradeneeded",d=>{n($c(u.result),d.oldVersion,d.newVersion,$c(u.transaction),d)}),e&&u.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),f.then(d=>{r&&d.addEventListener("close",()=>r()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const G6=["get","getKey","getAll","getAllKeys","count"],k6=["put","add","delete","clear"],$E=new Map;function DR(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if($E.get(t))return $E.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,s=k6.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(s||G6.includes(e)))return;const r=async function(u,...f){const d=this.transaction(u,s?"readwrite":"readonly");let m=d.store;return n&&(m=m.index(f.shift())),(await Promise.all([m[e](...f),s&&d.done]))[0]};return $E.set(t,r),r}V6(i=>({...i,get:(t,e,n)=>DR(t,e)||i.get(t,e,n),has:(t,e)=>!!DR(t,e)||i.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(X6(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function X6(i){return i.getComponent()?.type==="VERSION"}const DT="@firebase/app",NR="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new m3("@firebase/app"),j6="@firebase/app-compat",Y6="@firebase/analytics-compat",W6="@firebase/analytics",K6="@firebase/app-check-compat",Q6="@firebase/app-check",Z6="@firebase/auth",J6="@firebase/auth-compat",$6="@firebase/database",tF="@firebase/data-connect",eF="@firebase/database-compat",nF="@firebase/functions",iF="@firebase/functions-compat",sF="@firebase/installations",aF="@firebase/installations-compat",rF="@firebase/messaging",oF="@firebase/messaging-compat",lF="@firebase/performance",uF="@firebase/performance-compat",cF="@firebase/remote-config",hF="@firebase/remote-config-compat",fF="@firebase/storage",dF="@firebase/storage-compat",pF="@firebase/firestore",mF="@firebase/ai",gF="@firebase/firestore-compat",_F="firebase",yF="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="[DEFAULT]",vF={[DT]:"fire-core",[j6]:"fire-core-compat",[W6]:"fire-analytics",[Y6]:"fire-analytics-compat",[Q6]:"fire-app-check",[K6]:"fire-app-check-compat",[Z6]:"fire-auth",[J6]:"fire-auth-compat",[$6]:"fire-rtdb",[tF]:"fire-data-connect",[eF]:"fire-rtdb-compat",[nF]:"fire-fn",[iF]:"fire-fn-compat",[sF]:"fire-iid",[aF]:"fire-iid-compat",[rF]:"fire-fcm",[oF]:"fire-fcm-compat",[lF]:"fire-perf",[uF]:"fire-perf-compat",[cF]:"fire-rc",[hF]:"fire-rc-compat",[fF]:"fire-gcs",[dF]:"fire-gcs-compat",[pF]:"fire-fst",[gF]:"fire-fst-compat",[mF]:"fire-vertex","fire-js":"fire-js",[_F]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=new Map,SF=new Map,IT=new Map;function IR(i,t){try{i.container.addComponent(t)}catch(e){Yu.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function W0(i){const t=i.name;if(IT.has(t))return Yu.debug(`There were multiple attempts to register component ${t}.`),!1;IT.set(t,i);for(const e of Y0.values())IR(e,i);for(const e of SF.values())IR(e,i);return!0}function xF(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}function EF(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},th=new p3("app","Firebase",TF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(t,e,n){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new h_("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw th.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=yF;function y3(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const n={name:NT,automaticDataCollectionEnabled:!0,...t},s=n.name;if(typeof s!="string"||!s)throw th.create("bad-app-name",{appName:String(s)});if(e||(e=d3()),!e)throw th.create("no-options");const r=Y0.get(s);if(r){if(j0(e,r.options)&&j0(n,r.config))return r;throw th.create("duplicate-app",{appName:s})}const u=new w6(s);for(const d of IT.values())u.addComponent(d);const f=new bF(e,n,u);return Y0.set(s,f),f}function AF(i=NT){const t=Y0.get(i);if(!t&&i===NT&&d3())return y3();if(!t)throw th.create("no-app",{appName:i});return t}function vp(i,t,e){let n=vF[i]??i;e&&(n+=`-${e}`);const s=n.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const u=[`Unable to register library "${n}" with version "${t}":`];s&&u.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&r&&u.push("and"),r&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Yu.warn(u.join(" "));return}W0(new h_(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF="firebase-heartbeat-database",wF=1,f_="firebase-heartbeat-store";let tT=null;function v3(){return tT||(tT=H6(RF,wF,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(f_)}catch(e){console.warn(e)}}}}).catch(i=>{throw th.create("idb-open",{originalErrorMessage:i.message})})),tT}async function CF(i){try{const e=(await v3()).transaction(f_),n=await e.objectStore(f_).get(S3(i));return await e.done,n}catch(t){if(t instanceof Kp)Yu.warn(t.message);else{const e=th.create("idb-get",{originalErrorMessage:t?.message});Yu.warn(e.message)}}}async function UR(i,t){try{const n=(await v3()).transaction(f_,"readwrite");await n.objectStore(f_).put(t,S3(i)),await n.done}catch(e){if(e instanceof Kp)Yu.warn(e.message);else{const n=th.create("idb-set",{originalErrorMessage:e?.message});Yu.warn(n.message)}}}function S3(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=1024,NF=30;class IF{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new OF(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=OR();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>NF){const s=LF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Yu.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=OR(),{heartbeatsToSend:e,unsentEntries:n}=UF(this._heartbeatsCache.heartbeats),s=X0(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Yu.warn(t),""}}}function OR(){return new Date().toISOString().substring(0,10)}function UF(i,t=DF){const e=[];let n=i.slice();for(const s of i){const r=e.find(u=>u.agent===s.agent);if(r){if(r.dates.push(s.date),LR(e)>t){r.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),LR(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class OF{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return S6()?x6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await CF(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return UR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return UR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function LR(i){return X0(JSON.stringify({version:2,heartbeats:i})).length}function LF(i){if(i.length===0)return-1;let t=0,e=i[0].date;for(let n=1;n<i.length;n++)i[n].date<e&&(e=i[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(i){W0(new h_("platform-logger",t=>new q6(t),"PRIVATE")),W0(new h_("heartbeat",t=>new IF(t),"PRIVATE")),vp(DT,NR,i),vp(DT,NR,"esm2020"),vp("fire-js","")}PF("");var zF="firebase",VF="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vp(zF,VF,"app");var PR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eh,x3;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(L,P){function D(){}D.prototype=P.prototype,L.F=P.prototype,L.prototype=new D,L.prototype.constructor=L,L.D=function(U,F,Y){for(var G=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)G[gt-2]=arguments[gt];return P.prototype[F].apply(U,G)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(n,e),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(L,P,D){D||(D=0);const U=Array(16);if(typeof P=="string")for(var F=0;F<16;++F)U[F]=P.charCodeAt(D++)|P.charCodeAt(D++)<<8|P.charCodeAt(D++)<<16|P.charCodeAt(D++)<<24;else for(F=0;F<16;++F)U[F]=P[D++]|P[D++]<<8|P[D++]<<16|P[D++]<<24;P=L.g[0],D=L.g[1],F=L.g[2];let Y=L.g[3],G;G=P+(Y^D&(F^Y))+U[0]+3614090360&4294967295,P=D+(G<<7&4294967295|G>>>25),G=Y+(F^P&(D^F))+U[1]+3905402710&4294967295,Y=P+(G<<12&4294967295|G>>>20),G=F+(D^Y&(P^D))+U[2]+606105819&4294967295,F=Y+(G<<17&4294967295|G>>>15),G=D+(P^F&(Y^P))+U[3]+3250441966&4294967295,D=F+(G<<22&4294967295|G>>>10),G=P+(Y^D&(F^Y))+U[4]+4118548399&4294967295,P=D+(G<<7&4294967295|G>>>25),G=Y+(F^P&(D^F))+U[5]+1200080426&4294967295,Y=P+(G<<12&4294967295|G>>>20),G=F+(D^Y&(P^D))+U[6]+2821735955&4294967295,F=Y+(G<<17&4294967295|G>>>15),G=D+(P^F&(Y^P))+U[7]+4249261313&4294967295,D=F+(G<<22&4294967295|G>>>10),G=P+(Y^D&(F^Y))+U[8]+1770035416&4294967295,P=D+(G<<7&4294967295|G>>>25),G=Y+(F^P&(D^F))+U[9]+2336552879&4294967295,Y=P+(G<<12&4294967295|G>>>20),G=F+(D^Y&(P^D))+U[10]+4294925233&4294967295,F=Y+(G<<17&4294967295|G>>>15),G=D+(P^F&(Y^P))+U[11]+2304563134&4294967295,D=F+(G<<22&4294967295|G>>>10),G=P+(Y^D&(F^Y))+U[12]+1804603682&4294967295,P=D+(G<<7&4294967295|G>>>25),G=Y+(F^P&(D^F))+U[13]+4254626195&4294967295,Y=P+(G<<12&4294967295|G>>>20),G=F+(D^Y&(P^D))+U[14]+2792965006&4294967295,F=Y+(G<<17&4294967295|G>>>15),G=D+(P^F&(Y^P))+U[15]+1236535329&4294967295,D=F+(G<<22&4294967295|G>>>10),G=P+(F^Y&(D^F))+U[1]+4129170786&4294967295,P=D+(G<<5&4294967295|G>>>27),G=Y+(D^F&(P^D))+U[6]+3225465664&4294967295,Y=P+(G<<9&4294967295|G>>>23),G=F+(P^D&(Y^P))+U[11]+643717713&4294967295,F=Y+(G<<14&4294967295|G>>>18),G=D+(Y^P&(F^Y))+U[0]+3921069994&4294967295,D=F+(G<<20&4294967295|G>>>12),G=P+(F^Y&(D^F))+U[5]+3593408605&4294967295,P=D+(G<<5&4294967295|G>>>27),G=Y+(D^F&(P^D))+U[10]+38016083&4294967295,Y=P+(G<<9&4294967295|G>>>23),G=F+(P^D&(Y^P))+U[15]+3634488961&4294967295,F=Y+(G<<14&4294967295|G>>>18),G=D+(Y^P&(F^Y))+U[4]+3889429448&4294967295,D=F+(G<<20&4294967295|G>>>12),G=P+(F^Y&(D^F))+U[9]+568446438&4294967295,P=D+(G<<5&4294967295|G>>>27),G=Y+(D^F&(P^D))+U[14]+3275163606&4294967295,Y=P+(G<<9&4294967295|G>>>23),G=F+(P^D&(Y^P))+U[3]+4107603335&4294967295,F=Y+(G<<14&4294967295|G>>>18),G=D+(Y^P&(F^Y))+U[8]+1163531501&4294967295,D=F+(G<<20&4294967295|G>>>12),G=P+(F^Y&(D^F))+U[13]+2850285829&4294967295,P=D+(G<<5&4294967295|G>>>27),G=Y+(D^F&(P^D))+U[2]+4243563512&4294967295,Y=P+(G<<9&4294967295|G>>>23),G=F+(P^D&(Y^P))+U[7]+1735328473&4294967295,F=Y+(G<<14&4294967295|G>>>18),G=D+(Y^P&(F^Y))+U[12]+2368359562&4294967295,D=F+(G<<20&4294967295|G>>>12),G=P+(D^F^Y)+U[5]+4294588738&4294967295,P=D+(G<<4&4294967295|G>>>28),G=Y+(P^D^F)+U[8]+2272392833&4294967295,Y=P+(G<<11&4294967295|G>>>21),G=F+(Y^P^D)+U[11]+1839030562&4294967295,F=Y+(G<<16&4294967295|G>>>16),G=D+(F^Y^P)+U[14]+4259657740&4294967295,D=F+(G<<23&4294967295|G>>>9),G=P+(D^F^Y)+U[1]+2763975236&4294967295,P=D+(G<<4&4294967295|G>>>28),G=Y+(P^D^F)+U[4]+1272893353&4294967295,Y=P+(G<<11&4294967295|G>>>21),G=F+(Y^P^D)+U[7]+4139469664&4294967295,F=Y+(G<<16&4294967295|G>>>16),G=D+(F^Y^P)+U[10]+3200236656&4294967295,D=F+(G<<23&4294967295|G>>>9),G=P+(D^F^Y)+U[13]+681279174&4294967295,P=D+(G<<4&4294967295|G>>>28),G=Y+(P^D^F)+U[0]+3936430074&4294967295,Y=P+(G<<11&4294967295|G>>>21),G=F+(Y^P^D)+U[3]+3572445317&4294967295,F=Y+(G<<16&4294967295|G>>>16),G=D+(F^Y^P)+U[6]+76029189&4294967295,D=F+(G<<23&4294967295|G>>>9),G=P+(D^F^Y)+U[9]+3654602809&4294967295,P=D+(G<<4&4294967295|G>>>28),G=Y+(P^D^F)+U[12]+3873151461&4294967295,Y=P+(G<<11&4294967295|G>>>21),G=F+(Y^P^D)+U[15]+530742520&4294967295,F=Y+(G<<16&4294967295|G>>>16),G=D+(F^Y^P)+U[2]+3299628645&4294967295,D=F+(G<<23&4294967295|G>>>9),G=P+(F^(D|~Y))+U[0]+4096336452&4294967295,P=D+(G<<6&4294967295|G>>>26),G=Y+(D^(P|~F))+U[7]+1126891415&4294967295,Y=P+(G<<10&4294967295|G>>>22),G=F+(P^(Y|~D))+U[14]+2878612391&4294967295,F=Y+(G<<15&4294967295|G>>>17),G=D+(Y^(F|~P))+U[5]+4237533241&4294967295,D=F+(G<<21&4294967295|G>>>11),G=P+(F^(D|~Y))+U[12]+1700485571&4294967295,P=D+(G<<6&4294967295|G>>>26),G=Y+(D^(P|~F))+U[3]+2399980690&4294967295,Y=P+(G<<10&4294967295|G>>>22),G=F+(P^(Y|~D))+U[10]+4293915773&4294967295,F=Y+(G<<15&4294967295|G>>>17),G=D+(Y^(F|~P))+U[1]+2240044497&4294967295,D=F+(G<<21&4294967295|G>>>11),G=P+(F^(D|~Y))+U[8]+1873313359&4294967295,P=D+(G<<6&4294967295|G>>>26),G=Y+(D^(P|~F))+U[15]+4264355552&4294967295,Y=P+(G<<10&4294967295|G>>>22),G=F+(P^(Y|~D))+U[6]+2734768916&4294967295,F=Y+(G<<15&4294967295|G>>>17),G=D+(Y^(F|~P))+U[13]+1309151649&4294967295,D=F+(G<<21&4294967295|G>>>11),G=P+(F^(D|~Y))+U[4]+4149444226&4294967295,P=D+(G<<6&4294967295|G>>>26),G=Y+(D^(P|~F))+U[11]+3174756917&4294967295,Y=P+(G<<10&4294967295|G>>>22),G=F+(P^(Y|~D))+U[2]+718787259&4294967295,F=Y+(G<<15&4294967295|G>>>17),G=D+(Y^(F|~P))+U[9]+3951481745&4294967295,L.g[0]=L.g[0]+P&4294967295,L.g[1]=L.g[1]+(F+(G<<21&4294967295|G>>>11))&4294967295,L.g[2]=L.g[2]+F&4294967295,L.g[3]=L.g[3]+Y&4294967295}n.prototype.v=function(L,P){P===void 0&&(P=L.length);const D=P-this.blockSize,U=this.C;let F=this.h,Y=0;for(;Y<P;){if(F==0)for(;Y<=D;)s(this,L,Y),Y+=this.blockSize;if(typeof L=="string"){for(;Y<P;)if(U[F++]=L.charCodeAt(Y++),F==this.blockSize){s(this,U),F=0;break}}else for(;Y<P;)if(U[F++]=L[Y++],F==this.blockSize){s(this,U),F=0;break}}this.h=F,this.o+=P},n.prototype.A=function(){var L=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);L[0]=128;for(var P=1;P<L.length-8;++P)L[P]=0;P=this.o*8;for(var D=L.length-8;D<L.length;++D)L[D]=P&255,P/=256;for(this.v(L),L=Array(16),P=0,D=0;D<4;++D)for(let U=0;U<32;U+=8)L[P++]=this.g[D]>>>U&255;return L};function r(L,P){var D=f;return Object.prototype.hasOwnProperty.call(D,L)?D[L]:D[L]=P(L)}function u(L,P){this.h=P;const D=[];let U=!0;for(let F=L.length-1;F>=0;F--){const Y=L[F]|0;U&&Y==P||(D[F]=Y,U=!1)}this.g=D}var f={};function d(L){return-128<=L&&L<128?r(L,function(P){return new u([P|0],P<0?-1:0)}):new u([L|0],L<0?-1:0)}function m(L){if(isNaN(L)||!isFinite(L))return y;if(L<0)return w(m(-L));const P=[];let D=1;for(let U=0;L>=D;U++)P[U]=L/D|0,D*=4294967296;return new u(P,0)}function _(L,P){if(L.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(L.charAt(0)=="-")return w(_(L.substring(1),P));if(L.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=m(Math.pow(P,8));let U=y;for(let Y=0;Y<L.length;Y+=8){var F=Math.min(8,L.length-Y);const G=parseInt(L.substring(Y,Y+F),P);F<8?(F=m(Math.pow(P,F)),U=U.j(F).add(m(G))):(U=U.j(D),U=U.add(m(G)))}return U}var y=d(0),S=d(1),T=d(16777216);i=u.prototype,i.m=function(){if(C(this))return-w(this).m();let L=0,P=1;for(let D=0;D<this.g.length;D++){const U=this.i(D);L+=(U>=0?U:4294967296+U)*P,P*=4294967296}return L},i.toString=function(L){if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(R(this))return"0";if(C(this))return"-"+w(this).toString(L);const P=m(Math.pow(L,6));var D=this;let U="";for(;;){const F=V(D,P).g;D=M(D,F.j(P));let Y=((D.g.length>0?D.g[0]:D.h)>>>0).toString(L);if(D=F,R(D))return Y+U;for(;Y.length<6;)Y="0"+Y;U=Y+U}},i.i=function(L){return L<0?0:L<this.g.length?this.g[L]:this.h};function R(L){if(L.h!=0)return!1;for(let P=0;P<L.g.length;P++)if(L.g[P]!=0)return!1;return!0}function C(L){return L.h==-1}i.l=function(L){return L=M(this,L),C(L)?-1:R(L)?0:1};function w(L){const P=L.g.length,D=[];for(let U=0;U<P;U++)D[U]=~L.g[U];return new u(D,~L.h).add(S)}i.abs=function(){return C(this)?w(this):this},i.add=function(L){const P=Math.max(this.g.length,L.g.length),D=[];let U=0;for(let F=0;F<=P;F++){let Y=U+(this.i(F)&65535)+(L.i(F)&65535),G=(Y>>>16)+(this.i(F)>>>16)+(L.i(F)>>>16);U=G>>>16,Y&=65535,G&=65535,D[F]=G<<16|Y}return new u(D,D[D.length-1]&-2147483648?-1:0)};function M(L,P){return L.add(w(P))}i.j=function(L){if(R(this)||R(L))return y;if(C(this))return C(L)?w(this).j(w(L)):w(w(this).j(L));if(C(L))return w(this.j(w(L)));if(this.l(T)<0&&L.l(T)<0)return m(this.m()*L.m());const P=this.g.length+L.g.length,D=[];for(var U=0;U<2*P;U++)D[U]=0;for(U=0;U<this.g.length;U++)for(let F=0;F<L.g.length;F++){const Y=this.i(U)>>>16,G=this.i(U)&65535,gt=L.i(F)>>>16,vt=L.i(F)&65535;D[2*U+2*F]+=G*vt,O(D,2*U+2*F),D[2*U+2*F+1]+=Y*vt,O(D,2*U+2*F+1),D[2*U+2*F+1]+=G*gt,O(D,2*U+2*F+1),D[2*U+2*F+2]+=Y*gt,O(D,2*U+2*F+2)}for(L=0;L<P;L++)D[L]=D[2*L+1]<<16|D[2*L];for(L=P;L<2*P;L++)D[L]=0;return new u(D,0)};function O(L,P){for(;(L[P]&65535)!=L[P];)L[P+1]+=L[P]>>>16,L[P]&=65535,P++}function z(L,P){this.g=L,this.h=P}function V(L,P){if(R(P))throw Error("division by zero");if(R(L))return new z(y,y);if(C(L))return P=V(w(L),P),new z(w(P.g),w(P.h));if(C(P))return P=V(L,w(P)),new z(w(P.g),P.h);if(L.g.length>30){if(C(L)||C(P))throw Error("slowDivide_ only works with positive integers.");for(var D=S,U=P;U.l(L)<=0;)D=j(D),U=j(U);var F=q(D,1),Y=q(U,1);for(U=q(U,2),D=q(D,2);!R(U);){var G=Y.add(U);G.l(L)<=0&&(F=F.add(D),Y=G),U=q(U,1),D=q(D,1)}return P=M(L,F.j(P)),new z(F,P)}for(F=y;L.l(P)>=0;){for(D=Math.max(1,Math.floor(L.m()/P.m())),U=Math.ceil(Math.log(D)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),Y=m(D),G=Y.j(P);C(G)||G.l(L)>0;)D-=U,Y=m(D),G=Y.j(P);R(Y)&&(Y=S),F=F.add(Y),L=M(L,G)}return new z(F,L)}i.B=function(L){return V(this,L).h},i.and=function(L){const P=Math.max(this.g.length,L.g.length),D=[];for(let U=0;U<P;U++)D[U]=this.i(U)&L.i(U);return new u(D,this.h&L.h)},i.or=function(L){const P=Math.max(this.g.length,L.g.length),D=[];for(let U=0;U<P;U++)D[U]=this.i(U)|L.i(U);return new u(D,this.h|L.h)},i.xor=function(L){const P=Math.max(this.g.length,L.g.length),D=[];for(let U=0;U<P;U++)D[U]=this.i(U)^L.i(U);return new u(D,this.h^L.h)};function j(L){const P=L.g.length+1,D=[];for(let U=0;U<P;U++)D[U]=L.i(U)<<1|L.i(U-1)>>>31;return new u(D,L.h)}function q(L,P){const D=P>>5;P%=32;const U=L.g.length-D,F=[];for(let Y=0;Y<U;Y++)F[Y]=P>0?L.i(Y+D)>>>P|L.i(Y+D+1)<<32-P:L.i(Y+D);return new u(F,L.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,x3=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,eh=u}).apply(typeof PR<"u"?PR:typeof self<"u"?self:typeof window<"u"?window:{});var Pv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E3,Cg,T3,Yv,UT,b3,M3,A3;(function(){var i,t=Object.defineProperty;function e(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pv=="object"&&Pv];for(var N=0;N<v.length;++N){var H=v[N];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}var n=e(this);function s(v,N){if(N)t:{var H=n;v=v.split(".");for(var Z=0;Z<v.length-1;Z++){var St=v[Z];if(!(St in H))break t;H=H[St]}v=v[v.length-1],Z=H[v],N=N(Z),N!=Z&&N!=null&&t(H,v,{configurable:!0,writable:!0,value:N})}}s("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(v){return v||function(N){var H=[],Z;for(Z in N)Object.prototype.hasOwnProperty.call(N,Z)&&H.push([Z,N[Z]]);return H}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},u=this||self;function f(v){var N=typeof v;return N=="object"&&v!=null||N=="function"}function d(v,N,H){return v.call.apply(v.bind,arguments)}function m(v,N,H){return m=d,m.apply(null,arguments)}function _(v,N){var H=Array.prototype.slice.call(arguments,1);return function(){var Z=H.slice();return Z.push.apply(Z,arguments),v.apply(this,Z)}}function y(v,N){function H(){}H.prototype=N.prototype,v.Z=N.prototype,v.prototype=new H,v.prototype.constructor=v,v.Ob=function(Z,St,At){for(var se=Array(arguments.length-2),an=2;an<arguments.length;an++)se[an-2]=arguments[an];return N.prototype[St].apply(Z,se)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function T(v){const N=v.length;if(N>0){const H=Array(N);for(let Z=0;Z<N;Z++)H[Z]=v[Z];return H}return[]}function R(v,N){for(let Z=1;Z<arguments.length;Z++){const St=arguments[Z];var H=typeof St;if(H=H!="object"?H:St?Array.isArray(St)?"array":H:"null",H=="array"||H=="object"&&typeof St.length=="number"){H=v.length||0;const At=St.length||0;v.length=H+At;for(let se=0;se<At;se++)v[H+se]=St[se]}else v.push(St)}}class C{constructor(N,H){this.i=N,this.j=H,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function w(v){u.setTimeout(()=>{throw v},0)}function M(){var v=L;let N=null;return v.g&&(N=v.g,v.g=v.g.next,v.g||(v.h=null),N.next=null),N}class O{constructor(){this.h=this.g=null}add(N,H){const Z=z.get();Z.set(N,H),this.h?this.h.next=Z:this.g=Z,this.h=Z}}var z=new C(()=>new V,v=>v.reset());class V{constructor(){this.next=this.g=this.h=null}set(N,H){this.h=N,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let j,q=!1,L=new O,P=()=>{const v=Promise.resolve(void 0);j=()=>{v.then(D)}};function D(){for(var v;v=M();){try{v.h.call(v.g)}catch(H){w(H)}var N=z;N.j(v),N.h<100&&(N.h++,v.next=N.g,N.g=v)}q=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(v,N){this.type=v,this.g=this.target=N,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var Y=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var v=!1,N=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const H=()=>{};u.addEventListener("test",H,N),u.removeEventListener("test",H,N)}catch{}return v})();function G(v){return/^[\s\xa0]*$/.test(v)}function gt(v,N){F.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,N)}y(gt,F),gt.prototype.init=function(v,N){const H=this.type=v.type,Z=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=N,N=v.relatedTarget,N||(H=="mouseover"?N=v.fromElement:H=="mouseout"&&(N=v.toElement)),this.relatedTarget=N,Z?(this.clientX=Z.clientX!==void 0?Z.clientX:Z.pageX,this.clientY=Z.clientY!==void 0?Z.clientY:Z.pageY,this.screenX=Z.screenX||0,this.screenY=Z.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&gt.Z.h.call(this)},gt.prototype.h=function(){gt.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var vt="closure_listenable_"+(Math.random()*1e6|0),k=0;function et(v,N,H,Z,St){this.listener=v,this.proxy=null,this.src=N,this.type=H,this.capture=!!Z,this.ha=St,this.key=++k,this.da=this.fa=!1}function nt(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function ft(v,N,H){for(const Z in v)N.call(H,v[Z],Z,v)}function wt(v,N){for(const H in v)N.call(void 0,v[H],H,v)}function J(v){const N={};for(const H in v)N[H]=v[H];return N}const ut="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ot(v,N){let H,Z;for(let St=1;St<arguments.length;St++){Z=arguments[St];for(H in Z)v[H]=Z[H];for(let At=0;At<ut.length;At++)H=ut[At],Object.prototype.hasOwnProperty.call(Z,H)&&(v[H]=Z[H])}}function Lt(v){this.src=v,this.g={},this.h=0}Lt.prototype.add=function(v,N,H,Z,St){const At=v.toString();v=this.g[At],v||(v=this.g[At]=[],this.h++);const se=xt(v,N,Z,St);return se>-1?(N=v[se],H||(N.fa=!1)):(N=new et(N,this.src,At,!!Z,St),N.fa=H,v.push(N)),N};function ee(v,N){const H=N.type;if(H in v.g){var Z=v.g[H],St=Array.prototype.indexOf.call(Z,N,void 0),At;(At=St>=0)&&Array.prototype.splice.call(Z,St,1),At&&(nt(N),v.g[H].length==0&&(delete v.g[H],v.h--))}}function xt(v,N,H,Z){for(let St=0;St<v.length;++St){const At=v[St];if(!At.da&&At.listener==N&&At.capture==!!H&&At.ha==Z)return St}return-1}var It="closure_lm_"+(Math.random()*1e6|0),ae={};function de(v,N,H,Z,St){if(Array.isArray(N)){for(let At=0;At<N.length;At++)de(v,N[At],H,Z,St);return null}return H=ue(H),v&&v[vt]?v.J(N,H,f(Z)?!!Z.capture:!1,St):Ee(v,N,H,!1,Z,St)}function Ee(v,N,H,Z,St,At){if(!N)throw Error("Invalid event type");const se=f(St)?!!St.capture:!!St;let an=Vt(v);if(an||(v[It]=an=new Lt(v)),H=an.add(N,H,Z,se,At),H.proxy)return H;if(Z=Ze(),H.proxy=Z,Z.src=v,Z.listener=H,v.addEventListener)Y||(St=se),St===void 0&&(St=!1),v.addEventListener(N.toString(),Z,St);else if(v.attachEvent)v.attachEvent(qt(N.toString()),Z);else if(v.addListener&&v.removeListener)v.addListener(Z);else throw Error("addEventListener and attachEvent are unavailable.");return H}function Ze(){function v(H){return N.call(v.src,v.listener,H)}const N=Ht;return v}function bn(v,N,H,Z,St){if(Array.isArray(N))for(var At=0;At<N.length;At++)bn(v,N[At],H,Z,St);else Z=f(Z)?!!Z.capture:!!Z,H=ue(H),v&&v[vt]?(v=v.i,At=String(N).toString(),At in v.g&&(N=v.g[At],H=xt(N,H,Z,St),H>-1&&(nt(N[H]),Array.prototype.splice.call(N,H,1),N.length==0&&(delete v.g[At],v.h--)))):v&&(v=Vt(v))&&(N=v.g[N.toString()],v=-1,N&&(v=xt(N,H,Z,St)),(H=v>-1?N[v]:null)&&it(H))}function it(v){if(typeof v!="number"&&v&&!v.da){var N=v.src;if(N&&N[vt])ee(N.i,v);else{var H=v.type,Z=v.proxy;N.removeEventListener?N.removeEventListener(H,Z,v.capture):N.detachEvent?N.detachEvent(qt(H),Z):N.addListener&&N.removeListener&&N.removeListener(Z),(H=Vt(N))?(ee(H,v),H.h==0&&(H.src=null,N[It]=null)):nt(v)}}}function qt(v){return v in ae?ae[v]:ae[v]="on"+v}function Ht(v,N){if(v.da)v=!0;else{N=new gt(N,this);const H=v.listener,Z=v.ha||v.src;v.fa&&it(v),v=H.call(Z,N)}return v}function Vt(v){return v=v[It],v instanceof Lt?v:null}var Pt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ue(v){return typeof v=="function"?v:(v[Pt]||(v[Pt]=function(N){return v.handleEvent(N)}),v[Pt])}function kt(){U.call(this),this.i=new Lt(this),this.M=this,this.G=null}y(kt,U),kt.prototype[vt]=!0,kt.prototype.removeEventListener=function(v,N,H,Z){bn(this,v,N,H,Z)};function Kt(v,N){var H,Z=v.G;if(Z)for(H=[];Z;Z=Z.G)H.push(Z);if(v=v.M,Z=N.type||N,typeof N=="string")N=new F(N,v);else if(N instanceof F)N.target=N.target||v;else{var St=N;N=new F(Z,v),Ot(N,St)}St=!0;let At,se;if(H)for(se=H.length-1;se>=0;se--)At=N.g=H[se],St=ze(At,Z,!0,N)&&St;if(At=N.g=v,St=ze(At,Z,!0,N)&&St,St=ze(At,Z,!1,N)&&St,H)for(se=0;se<H.length;se++)At=N.g=H[se],St=ze(At,Z,!1,N)&&St}kt.prototype.N=function(){if(kt.Z.N.call(this),this.i){var v=this.i;for(const N in v.g){const H=v.g[N];for(let Z=0;Z<H.length;Z++)nt(H[Z]);delete v.g[N],v.h--}}this.G=null},kt.prototype.J=function(v,N,H,Z){return this.i.add(String(v),N,!1,H,Z)},kt.prototype.K=function(v,N,H,Z){return this.i.add(String(v),N,!0,H,Z)};function ze(v,N,H,Z){if(N=v.i.g[String(N)],!N)return!0;N=N.concat();let St=!0;for(let At=0;At<N.length;++At){const se=N[At];if(se&&!se.da&&se.capture==H){const an=se.listener,bi=se.ha||se.src;se.fa&&ee(v.i,se),St=an.call(bi,Z)!==!1&&St}}return St&&!Z.defaultPrevented}function Ye(v,N){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=m(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:u.setTimeout(v,N||0)}function $(v){v.g=Ye(()=>{v.g=null,v.i&&(v.i=!1,$(v))},v.l);const N=v.h;v.h=null,v.m.apply(null,N)}class X extends U{constructor(N,H){super(),this.m=N,this.l=H,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:$(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _t(v){U.call(this),this.h=v,this.g={}}y(_t,U);var Dt=[];function Qt(v){ft(v.g,function(N,H){this.g.hasOwnProperty(H)&&it(N)},v),v.g={}}_t.prototype.N=function(){_t.Z.N.call(this),Qt(this)},_t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ut=u.JSON.stringify,De=u.JSON.parse,oe=class{stringify(v){return u.JSON.stringify(v,void 0)}parse(v){return u.JSON.parse(v,void 0)}};function be(){}function Me(){}var Yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ie(){F.call(this,"d")}y(ie,F);function Ce(){F.call(this,"c")}y(Ce,F);var pe={},fe=null;function ke(){return fe=fe||new kt}pe.Ia="serverreachability";function ot(v){F.call(this,pe.Ia,v)}y(ot,F);function te(v){const N=ke();Kt(N,new ot(N))}pe.STAT_EVENT="statevent";function re(v,N){F.call(this,pe.STAT_EVENT,v),this.stat=N}y(re,F);function he(v){const N=ke();Kt(N,new re(N,v))}pe.Ja="timingevent";function $t(v,N){F.call(this,pe.Ja,v),this.size=N}y($t,F);function Bt(v,N){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){v()},N)}function ye(){this.g=!0}ye.prototype.ua=function(){this.g=!1};function Xe(v,N,H,Z,St,At){v.info(function(){if(v.g)if(At){var se="",an=At.split("&");for(let wn=0;wn<an.length;wn++){var bi=an[wn].split("=");if(bi.length>1){const ri=bi[0];bi=bi[1];const rs=ri.split("_");se=rs.length>=2&&rs[1]=="type"?se+(ri+"="+bi+"&"):se+(ri+"=redacted&")}}}else se=null;else se=At;return"XMLHTTP REQ ("+Z+") [attempt "+St+"]: "+N+`
`+H+`
`+se})}function Rn(v,N,H,Z,St,At,se){v.info(function(){return"XMLHTTP RESP ("+Z+") [ attempt "+St+"]: "+N+`
`+H+`
`+At+" "+se})}function nn(v,N,H,Z){v.info(function(){return"XMLHTTP TEXT ("+N+"): "+Hs(v,H)+(Z?" "+Z:"")})}function ss(v,N){v.info(function(){return"TIMEOUT: "+N})}ye.prototype.info=function(){};function Hs(v,N){if(!v.g)return N;if(!N)return null;try{const At=JSON.parse(N);if(At){for(v=0;v<At.length;v++)if(Array.isArray(At[v])){var H=At[v];if(!(H.length<2)){var Z=H[1];if(Array.isArray(Z)&&!(Z.length<1)){var St=Z[0];if(St!="noop"&&St!="stop"&&St!="close")for(let se=1;se<Z.length;se++)Z[se]=""}}}}return Ut(At)}catch{return N}}var br={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mr;function _s(){}y(_s,be),_s.prototype.g=function(){return new XMLHttpRequest},Mr=new _s;function Ia(v){return encodeURIComponent(String(v))}function ws(v){var N=1;v=v.split(":");const H=[];for(;N>0&&v.length;)H.push(v.shift()),N--;return v.length&&H.push(v.join(":")),H}function wi(v,N,H,Z){this.j=v,this.i=N,this.l=H,this.S=Z||1,this.V=new _t(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zi}function Zi(){this.i=null,this.g="",this.h=!1}var on={},xi={};function aa(v,N,H){v.M=1,v.A=ks(je(N)),v.u=H,v.R=!0,To(v,null)}function To(v,N){v.F=Date.now(),ra(v),v.B=je(v.A);var H=v.B,Z=v.S;Array.isArray(Z)||(Z=[String(Z)]),ll(H.i,"t",Z),v.C=0,H=v.j.L,v.h=new Zi,v.g=ic(v.j,H?N:null,!v.u),v.P>0&&(v.O=new X(m(v.Y,v,v.g),v.P)),N=v.V,H=v.g,Z=v.ba;var St="readystatechange";Array.isArray(St)||(St&&(Dt[0]=St.toString()),St=Dt);for(let At=0;At<St.length;At++){const se=de(H,St[At],Z||N.handleEvent,!1,N.h||N);if(!se)break;N.g[se.key]=se}N=v.J?J(v.J):{},v.u?(v.v||(v.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,N)):(v.v="GET",v.g.ea(v.B,v.v,null,N)),te(),Xe(v.i,v.v,v.B,v.l,v.S,v.u)}wi.prototype.ba=function(v){v=v.target;const N=this.O;N&&rr(v)==3?N.j():this.Y(v)},wi.prototype.Y=function(v){try{if(v==this.g)t:{const an=rr(this.g),bi=this.g.ya(),wn=this.g.ca();if(!(an<3)&&(an!=3||this.g&&(this.h.h||this.g.la()||Ji(this.g)))){this.K||an!=4||bi==7||(bi==8||wn<=0?te(3):te(2)),lt(this);var N=this.g.ca();this.X=N;var H=Qu(this);if(this.o=N==200,Rn(this.i,this.v,this.B,this.l,this.S,an,N),this.o){if(this.U&&!this.L){e:{if(this.g){var Z,St=this.g;if((Z=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Z)){var At=Z;break e}}At=null}if(v=At)nn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ct(this,v);else{this.o=!1,this.m=3,he(12),Tt(this),yt(this);break t}}if(this.R){v=!0;let ri;for(;!this.K&&this.C<H.length;)if(ri=rl(this,H),ri==xi){an==4&&(this.m=4,he(14),v=!1),nn(this.i,this.l,null,"[Incomplete Response]");break}else if(ri==on){this.m=4,he(15),nn(this.i,this.l,H,"[Invalid Chunk]"),v=!1;break}else nn(this.i,this.l,ri,null),ct(this,ri);if(Zu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||H.length!=0||this.h.h||(this.m=1,he(16),v=!1),this.o=this.o&&v,!v)nn(this.i,this.l,H,"[Invalid Chunked Response]"),Tt(this),yt(this);else if(H.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),tc(se),se.P=!0,he(11))}}else nn(this.i,this.l,H,null),ct(this,H);an==4&&Tt(this),this.o&&!this.K&&(an==4?ec(this.j,this):(this.o=!1,ra(this)))}else Kr(this.g),N==400&&H.indexOf("Unknown SID")>0?(this.m=3,he(12)):(this.m=0,he(13)),Tt(this),yt(this)}}}catch{}finally{}};function Qu(v){if(!Zu(v))return v.g.la();const N=Ji(v.g);if(N==="")return"";let H="";const Z=N.length,St=rr(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return Tt(v),yt(v),"";v.h.i=new u.TextDecoder}for(let At=0;At<Z;At++)v.h.h=!0,H+=v.h.i.decode(N[At],{stream:!(St&&At==Z-1)});return N.length=0,v.h.g+=H,v.C=0,v.h.g}function Zu(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function rl(v,N){var H=v.C,Z=N.indexOf(`
`,H);return Z==-1?xi:(H=Number(N.substring(H,Z)),isNaN(H)?on:(Z+=1,Z+H>N.length?xi:(N=N.slice(Z,Z+H),v.C=Z+H,N)))}wi.prototype.cancel=function(){this.K=!0,Tt(this)};function ra(v){v.T=Date.now()+v.H,K(v,v.H)}function K(v,N){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Bt(m(v.aa,v),N)}function lt(v){v.D&&(u.clearTimeout(v.D),v.D=null)}wi.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(ss(this.i,this.B),this.M!=2&&(te(),he(17)),Tt(this),this.m=2,yt(this)):K(this,this.T-v)};function yt(v){v.j.I==0||v.K||ec(v.j,v)}function Tt(v){lt(v);var N=v.O;N&&typeof N.dispose=="function"&&N.dispose(),v.O=null,Qt(v.V),v.g&&(N=v.g,v.g=null,N.abort(),N.dispose())}function ct(v,N){try{var H=v.j;if(H.I!=0&&(H.g==v||Ie(H.h,v))){if(!v.L&&Ie(H.h,v)&&H.I==3){try{var Z=H.Ba.g.parse(N)}catch{Z=null}if(Array.isArray(Z)&&Z.length==3){var St=Z;if(St[0]==0){t:if(!H.v){if(H.g)if(H.g.F+3e3<v.F)Qr(H),wo(H);else break t;dl(H),he(18)}}else H.xa=St[1],0<H.xa-H.K&&St[2]<37500&&H.F&&H.A==0&&!H.C&&(H.C=Bt(m(H.Va,H),6e3));me(H.h)<=1&&H.ta&&(H.ta=void 0)}else Cr(H,11)}else if((v.L||H.g==v)&&Qr(H),!G(N))for(St=H.Ba.g.parse(N),N=0;N<St.length;N++){let wn=St[N];const ri=wn[0];if(!(ri<=H.K))if(H.K=ri,wn=wn[1],H.I==2)if(wn[0]=="c"){H.M=wn[1],H.ba=wn[2];const rs=wn[3];rs!=null&&(H.ka=rs,H.j.info("VER="+H.ka));const mi=wn[4];mi!=null&&(H.za=mi,H.j.info("SVER="+H.za));const ua=wn[5];ua!=null&&typeof ua=="number"&&ua>0&&(Z=1.5*ua,H.O=Z,H.j.info("backChannelRequestTimeoutMs_="+Z)),Z=H;const or=v.g;if(or){const Co=or.g?or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Co){var At=Z.h;At.g||Co.indexOf("spdy")==-1&&Co.indexOf("quic")==-1&&Co.indexOf("h2")==-1||(At.j=At.l,At.g=new Set,At.h&&(Fe(At,At.h),At.h=null))}if(Z.G){const Jr=or.g?or.g.getResponseHeader("X-HTTP-Session-Id"):null;Jr&&(Z.wa=Jr,sn(Z.J,Z.G,Jr))}}H.I=3,H.l&&H.l.ra(),H.aa&&(H.T=Date.now()-v.F,H.j.info("Handshake RTT: "+H.T+"ms")),Z=H;var se=v;if(Z.na=nc(Z,Z.L?Z.ba:null,Z.W),se.L){Oe(Z.h,se);var an=se,bi=Z.O;bi&&(an.H=bi),an.D&&(lt(an),ra(an)),Z.g=se}else Sh(Z);H.i.length>0&&wr(H)}else wn[0]!="stop"&&wn[0]!="close"||Cr(H,7);else H.I==3&&(wn[0]=="stop"||wn[0]=="close"?wn[0]=="stop"?Cr(H,7):hl(H):wn[0]!="noop"&&H.l&&H.l.qa(wn),H.A=0)}}te(4)}catch{}}var Xt=class{constructor(v,N){this.g=v,this.map=N}};function ce(v){this.l=v||10,u.PerformanceNavigationTiming?(v=u.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xe(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function me(v){return v.h?1:v.g?v.g.size:0}function Ie(v,N){return v.h?v.h==N:v.g?v.g.has(N):!1}function Fe(v,N){v.g?v.g.add(N):v.h=N}function Oe(v,N){v.h&&v.h==N?v.h=null:v.g&&v.g.has(N)&&v.g.delete(N)}ce.prototype.cancel=function(){if(this.i=ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function ln(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let N=v.i;for(const H of v.g.values())N=N.concat(H.G);return N}return T(v.i)}var Nn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kn(v,N){if(v){v=v.split("&");for(let H=0;H<v.length;H++){const Z=v[H].indexOf("=");let St,At=null;Z>=0?(St=v[H].substring(0,Z),At=v[H].substring(Z+1)):St=v[H],N(St,At?decodeURIComponent(At.replace(/\+/g," ")):"")}}}function mn(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;v instanceof mn?(this.l=v.l,ve(this,v.j),this.o=v.o,this.g=v.g,Gn(this,v.u),this.h=v.h,yn(this,_h(v.i)),this.m=v.m):v&&(N=String(v).match(Nn))?(this.l=!1,ve(this,N[1]||"",!0),this.o=ui(N[2]||""),this.g=ui(N[3]||"",!0),Gn(this,N[4]),this.h=ui(N[5]||"",!0),yn(this,N[6]||"",!0),this.m=ui(N[7]||"")):(this.l=!1,this.i=new Pi(null,this.l))}mn.prototype.toString=function(){const v=[];var N=this.j;N&&v.push(oa(N,Xi,!0),":");var H=this.g;return(H||N=="file")&&(v.push("//"),(N=this.o)&&v.push(oa(N,Xi,!0),"@"),v.push(Ia(H).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),H=this.u,H!=null&&v.push(":",String(H))),(H=this.h)&&(this.g&&H.charAt(0)!="/"&&v.push("/"),v.push(oa(H,H.charAt(0)=="/"?Ci:as,!0))),(H=this.i.toString())&&v.push("?",H),(H=this.m)&&v.push("#",oa(H,bo)),v.join("")},mn.prototype.resolve=function(v){const N=je(this);let H=!!v.j;H?ve(N,v.j):H=!!v.o,H?N.o=v.o:H=!!v.g,H?N.g=v.g:H=v.u!=null;var Z=v.h;if(H)Gn(N,v.u);else if(H=!!v.h){if(Z.charAt(0)!="/")if(this.g&&!this.h)Z="/"+Z;else{var St=N.h.lastIndexOf("/");St!=-1&&(Z=N.h.slice(0,St+1)+Z)}if(St=Z,St==".."||St==".")Z="";else if(St.indexOf("./")!=-1||St.indexOf("/.")!=-1){Z=St.lastIndexOf("/",0)==0,St=St.split("/");const At=[];for(let se=0;se<St.length;){const an=St[se++];an=="."?Z&&se==St.length&&At.push(""):an==".."?((At.length>1||At.length==1&&At[0]!="")&&At.pop(),Z&&se==St.length&&At.push("")):(At.push(an),Z=!0)}Z=At.join("/")}else Z=St}return H?N.h=Z:H=v.i.toString()!=="",H?yn(N,_h(v.i)):H=!!v.m,H&&(N.m=v.m),N};function je(v){return new mn(v)}function ve(v,N,H){v.j=H?ui(N,!0):N,v.j&&(v.j=v.j.replace(/:$/,""))}function Gn(v,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);v.u=N}else v.u=null}function yn(v,N,H){N instanceof Pi?(v.i=N,iu(v.i,v.l)):(H||(N=oa(N,Ei)),v.i=new Pi(N,v.l))}function sn(v,N,H){v.i.set(N,H)}function ks(v){return sn(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function ui(v,N){return v?N?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function oa(v,N,H){return typeof v=="string"?(v=encodeURI(v).replace(N,vn),H&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function vn(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Xi=/[#\/\?@]/g,as=/[#\?:]/g,Ci=/[#\?]/g,Ei=/[#\?@]/g,bo=/#/g;function Pi(v,N){this.h=this.g=null,this.i=v||null,this.j=!!N}function qs(v){v.g||(v.g=new Map,v.h=0,v.i&&Kn(v.i,function(N,H){v.add(decodeURIComponent(N.replace(/\+/g," ")),H)}))}i=Pi.prototype,i.add=function(v,N){qs(this),this.i=null,v=Mo(this,v);let H=this.g.get(v);return H||this.g.set(v,H=[]),H.push(N),this.h+=1,this};function nu(v,N){qs(v),N=Mo(v,N),v.g.has(N)&&(v.i=null,v.h-=v.g.get(N).length,v.g.delete(N))}function ol(v,N){return qs(v),N=Mo(v,N),v.g.has(N)}i.forEach=function(v,N){qs(this),this.g.forEach(function(H,Z){H.forEach(function(St){v.call(N,St,Z,this)},this)},this)};function Ju(v,N){qs(v);let H=[];if(typeof N=="string")ol(v,N)&&(H=H.concat(v.g.get(Mo(v,N))));else for(v=Array.from(v.g.values()),N=0;N<v.length;N++)H=H.concat(v[N]);return H}i.set=function(v,N){return qs(this),this.i=null,v=Mo(this,v),ol(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[N]),this.h+=1,this},i.get=function(v,N){return v?(v=Ju(this,v),v.length>0?String(v[0]):N):N};function ll(v,N,H){nu(v,N),H.length>0&&(v.i=null,v.g.set(Mo(v,N),T(H)),v.h+=H.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],N=Array.from(this.g.keys());for(let Z=0;Z<N.length;Z++){var H=N[Z];const St=Ia(H);H=Ju(this,H);for(let At=0;At<H.length;At++){let se=St;H[At]!==""&&(se+="="+Ia(H[At])),v.push(se)}}return this.i=v.join("&")};function _h(v){const N=new Pi;return N.i=v.i,v.g&&(N.g=new Map(v.g),N.h=v.h),N}function Mo(v,N){return N=String(N),v.j&&(N=N.toLowerCase()),N}function iu(v,N){N&&!v.j&&(qs(v),v.i=null,v.g.forEach(function(H,Z){const St=Z.toLowerCase();Z!=St&&(nu(this,Z),ll(this,St,H))},v)),v.j=N}function sr(v,N){const H=new ye;if(u.Image){const Z=new Image;Z.onload=_(Ua,H,"TestLoadImage: loaded",!0,N,Z),Z.onerror=_(Ua,H,"TestLoadImage: error",!1,N,Z),Z.onabort=_(Ua,H,"TestLoadImage: abort",!1,N,Z),Z.ontimeout=_(Ua,H,"TestLoadImage: timeout",!1,N,Z),u.setTimeout(function(){Z.ontimeout&&Z.ontimeout()},1e4),Z.src=v}else N(!1)}function su(v,N){const H=new ye,Z=new AbortController,St=setTimeout(()=>{Z.abort(),Ua(H,"TestPingServer: timeout",!1,N)},1e4);fetch(v,{signal:Z.signal}).then(At=>{clearTimeout(St),At.ok?Ua(H,"TestPingServer: ok",!0,N):Ua(H,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(St),Ua(H,"TestPingServer: error",!1,N)})}function Ua(v,N,H,Z,St){try{St&&(St.onload=null,St.onerror=null,St.onabort=null,St.ontimeout=null),Z(H)}catch{}}function Ao(){this.g=new oe}function ar(v){this.i=v.Sb||null,this.h=v.ab||!1}y(ar,be),ar.prototype.g=function(){return new ul(this.i,this.h)};function ul(v,N){kt.call(this),this.H=v,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(ul,kt),i=ul.prototype,i.open=function(v,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=N,this.readyState=1,Oa(this)},i.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(N.body=v),(this.H||u).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ro(this)),this.readyState=0},i.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;au(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function au(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}i.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var N=v.value?v.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!v.done}))&&(this.response=this.responseText+=N)}v.done?Ro(this):Oa(this),this.readyState==3&&au(this)}},i.Oa=function(v){this.g&&(this.response=this.responseText=v,Ro(this))},i.Na=function(v){this.g&&(this.response=v,Ro(this))},i.ga=function(){this.g&&Ro(this)};function Ro(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Oa(v)}i.setRequestHeader=function(v,N){this.A.append(v,N)},i.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],N=this.h.entries();for(var H=N.next();!H.done;)H=H.value,v.push(H[0]+": "+H[1]),H=N.next();return v.join(`\r
`)};function Oa(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function La(v){let N="";return ft(v,function(H,Z){N+=Z,N+=":",N+=H,N+=`\r
`}),N}function cl(v,N,H){t:{for(Z in H){var Z=!1;break t}Z=!0}Z||(H=La(H),typeof v=="string"?H!=null&&Ia(H):sn(v,N,H))}function ni(v){kt.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(ni,kt);var jr=/^https?$/i,$u=["POST","PUT"];i=ni.prototype,i.Fa=function(v){this.H=v},i.ea=function(v,N,H,Z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);N=N?N.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mr.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(N,String(v),!0),this.B=!1}catch(At){Ar(this,At);return}if(v=H||"",H=new Map(this.headers),Z)if(Object.getPrototypeOf(Z)===Object.prototype)for(var St in Z)H.set(St,Z[St]);else if(typeof Z.keys=="function"&&typeof Z.get=="function")for(const At of Z.keys())H.set(At,Z.get(At));else throw Error("Unknown input type for opt_headers: "+String(Z));Z=Array.from(H.keys()).find(At=>At.toLowerCase()=="content-type"),St=u.FormData&&v instanceof u.FormData,!(Array.prototype.indexOf.call($u,N,void 0)>=0)||Z||St||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[At,se]of H)this.g.setRequestHeader(At,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(At){Ar(this,At)}};function Ar(v,N){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=N,v.o=5,ru(v),Wr(v)}function ru(v){v.A||(v.A=!0,Kt(v,"complete"),Kt(v,"error"))}i.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,Kt(this,"complete"),Kt(this,"abort"),Wr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wr(this,!0)),ni.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Yr(this):this.Xa())},i.Xa=function(){Yr(this)};function Yr(v){if(v.h&&typeof r<"u"){if(v.v&&rr(v)==4)setTimeout(v.Ca.bind(v),0);else if(Kt(v,"readystatechange"),rr(v)==4){v.h=!1;try{const At=v.ca();t:switch(At){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break t;default:N=!1}var H;if(!(H=N)){var Z;if(Z=At===0){let se=String(v.D).match(Nn)[1]||null;!se&&u.self&&u.self.location&&(se=u.self.location.protocol.slice(0,-1)),Z=!jr.test(se?se.toLowerCase():"")}H=Z}if(H)Kt(v,"complete"),Kt(v,"success");else{v.o=6;try{var St=rr(v)>2?v.g.statusText:""}catch{St=""}v.l=St+" ["+v.ca()+"]",ru(v)}}finally{Wr(v)}}}}function Wr(v,N){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const H=v.g;v.g=null,N||Kt(v,"ready");try{H.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function rr(v){return v.g?v.g.readyState:0}i.ca=function(){try{return rr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(v){if(this.g){var N=this.g.responseText;return v&&N.indexOf(v)==0&&(N=N.substring(v.length)),De(N)}};function Ji(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Kr(v){const N={};v=(v.g&&rr(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let Z=0;Z<v.length;Z++){if(G(v[Z]))continue;var H=ws(v[Z]);const St=H[0];if(H=H[1],typeof H!="string")continue;H=H.trim();const At=N[St]||[];N[St]=At,At.push(H)}wt(N,function(Z){return Z.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(v,N,H){return H&&H.internalChannelParams&&H.internalChannelParams[v]||N}function la(v){this.za=0,this.i=[],this.j=new ye,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rr("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rr("baseRetryDelayMs",5e3,v),this.Za=Rr("retryDelaySeedMs",1e4,v),this.Ta=Rr("forwardChannelMaxRetries",2,v),this.va=Rr("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new ce(v&&v.concurrentRequestLimit),this.Ba=new Ao,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=la.prototype,i.ka=8,i.I=1,i.connect=function(v,N,H,Z){he(0),this.W=v,this.H=N||{},H&&Z!==void 0&&(this.H.OSID=H,this.H.OAID=Z),this.F=this.X,this.J=nc(this,null,this.W),wr(this)};function hl(v){if(fl(v),v.I==3){var N=v.V++,H=je(v.J);if(sn(H,"SID",v.M),sn(H,"RID",N),sn(H,"TYPE","terminate"),Ti(v,H),N=new wi(v,v.j,N),N.M=2,N.A=ks(je(H)),H=!1,u.navigator&&u.navigator.sendBeacon)try{H=u.navigator.sendBeacon(N.A.toString(),"")}catch{}!H&&u.Image&&(new Image().src=N.A,H=!0),H||(N.g=ic(N.j,null),N.g.ea(N.A)),N.F=Date.now(),ra(N)}Th(v)}function wo(v){v.g&&(tc(v),v.g.cancel(),v.g=null)}function fl(v){wo(v),v.v&&(u.clearTimeout(v.v),v.v=null),Qr(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&u.clearTimeout(v.m),v.m=null)}function wr(v){if(!xe(v.h)&&!v.m){v.m=!0;var N=v.Ea;j||P(),q||(j(),q=!0),L.add(N,v),v.D=0}}function ou(v,N){return me(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=N.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Bt(m(v.Ea,v,N),Eh(v,v.D)),v.D++,!0)}i.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const St=new wi(this,this.j,v);let At=this.o;if(this.U&&(At?(At=J(At),Ot(At,this.U)):At=this.U),this.u!==null||this.R||(St.J=At,At=null),this.S)t:{for(var N=0,H=0;H<this.i.length;H++){e:{var Z=this.i[H];if("__data__"in Z.map&&(Z=Z.map.__data__,typeof Z=="string")){Z=Z.length;break e}Z=void 0}if(Z===void 0)break;if(N+=Z,N>4096){N=H;break t}if(N===4096||H===this.i.length-1){N=H+1;break t}}N=1e3}else N=1e3;N=vh(this,St,N),H=je(this.J),sn(H,"RID",v),sn(H,"CVER",22),this.G&&sn(H,"X-HTTP-Session-Id",this.G),Ti(this,H),At&&(this.R?N="headers="+Ia(La(At))+"&"+N:this.u&&cl(H,this.u,At)),Fe(this.h,St),this.Ra&&sn(H,"TYPE","init"),this.S?(sn(H,"$req",N),sn(H,"SID","null"),St.U=!0,aa(St,H,null)):aa(St,H,N),this.I=2}}else this.I==3&&(v?yh(this,v):this.i.length==0||xe(this.h)||yh(this))};function yh(v,N){var H;N?H=N.l:H=v.V++;const Z=je(v.J);sn(Z,"SID",v.M),sn(Z,"RID",H),sn(Z,"AID",v.K),Ti(v,Z),v.u&&v.o&&cl(Z,v.u,v.o),H=new wi(v,v.j,H,v.D+1),v.u===null&&(H.J=v.o),N&&(v.i=N.G.concat(v.i)),N=vh(v,H,1e3),H.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Fe(v.h,H),aa(H,Z,N)}function Ti(v,N){v.H&&ft(v.H,function(H,Z){sn(N,Z,H)}),v.l&&ft({},function(H,Z){sn(N,Z,H)})}function vh(v,N,H){H=Math.min(v.i.length,H);const Z=v.l?m(v.l.Ka,v.l,v):null;t:{var St=v.i;let an=-1;for(;;){const bi=["count="+H];an==-1?H>0?(an=St[0].g,bi.push("ofs="+an)):an=0:bi.push("ofs="+an);let wn=!0;for(let ri=0;ri<H;ri++){var At=St[ri].g;const rs=St[ri].map;if(At-=an,At<0)an=Math.max(0,St[ri].g-100),wn=!1;else try{At="req"+At+"_"||"";try{var se=rs instanceof Map?rs:Object.entries(rs);for(const[mi,ua]of se){let or=ua;f(ua)&&(or=Ut(ua)),bi.push(At+mi+"="+encodeURIComponent(or))}}catch(mi){throw bi.push(At+"type="+encodeURIComponent("_badmap")),mi}}catch{Z&&Z(rs)}}if(wn){se=bi.join("&");break t}}se=void 0}return v=v.i.splice(0,H),N.G=v,se}function Sh(v){if(!v.g&&!v.v){v.Y=1;var N=v.Da;j||P(),q||(j(),q=!0),L.add(N,v),v.A=0}}function dl(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Bt(m(v.Da,v),Eh(v,v.A)),v.A++,!0)}i.Da=function(){if(this.v=null,xh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Bt(m(this.Wa,this),v)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,he(10),wo(this),xh(this))};function tc(v){v.B!=null&&(u.clearTimeout(v.B),v.B=null)}function xh(v){v.g=new wi(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var N=je(v.na);sn(N,"RID","rpc"),sn(N,"SID",v.M),sn(N,"AID",v.K),sn(N,"CI",v.F?"0":"1"),!v.F&&v.ia&&sn(N,"TO",v.ia),sn(N,"TYPE","xmlhttp"),Ti(v,N),v.u&&v.o&&cl(N,v.u,v.o),v.O&&(v.g.H=v.O);var H=v.g;v=v.ba,H.M=1,H.A=ks(je(N)),H.u=null,H.R=!0,To(H,v)}i.Va=function(){this.C!=null&&(this.C=null,wo(this),dl(this),he(19))};function Qr(v){v.C!=null&&(u.clearTimeout(v.C),v.C=null)}function ec(v,N){var H=null;if(v.g==N){Qr(v),tc(v),v.g=null;var Z=2}else if(Ie(v.h,N))H=N.G,Oe(v.h,N),Z=1;else return;if(v.I!=0){if(N.o)if(Z==1){H=N.u?N.u.length:0,N=Date.now()-N.F;var St=v.D;Z=ke(),Kt(Z,new $t(Z,H)),wr(v)}else Sh(v);else if(St=N.m,St==3||St==0&&N.X>0||!(Z==1&&ou(v,N)||Z==2&&dl(v)))switch(H&&H.length>0&&(N=v.h,N.i=N.i.concat(H)),St){case 1:Cr(v,5);break;case 4:Cr(v,10);break;case 3:Cr(v,6);break;default:Cr(v,2)}}}function Eh(v,N){let H=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(H*=2),H*N}function Cr(v,N){if(v.j.info("Error code "+N),N==2){var H=m(v.bb,v),Z=v.Ua;const St=!Z;Z=new mn(Z||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ve(Z,"https"),ks(Z),St?sr(Z.toString(),H):su(Z.toString(),H)}else he(2);v.I=0,v.l&&v.l.pa(N),Th(v),fl(v)}i.bb=function(v){v?(this.j.info("Successfully pinged google.com"),he(2)):(this.j.info("Failed to ping google.com"),he(1))};function Th(v){if(v.I=0,v.ja=[],v.l){const N=ln(v.h);(N.length!=0||v.i.length!=0)&&(R(v.ja,N),R(v.ja,v.i),v.h.i.length=0,T(v.i),v.i.length=0),v.l.oa()}}function nc(v,N,H){var Z=H instanceof mn?je(H):new mn(H);if(Z.g!="")N&&(Z.g=N+"."+Z.g),Gn(Z,Z.u);else{var St=u.location;Z=St.protocol,N=N?N+"."+St.hostname:St.hostname,St=+St.port;const At=new mn(null);Z&&ve(At,Z),N&&(At.g=N),St&&Gn(At,St),H&&(At.h=H),Z=At}return H=v.G,N=v.wa,H&&N&&sn(Z,H,N),sn(Z,"VER",v.ka),Ti(v,Z),Z}function ic(v,N,H){if(N&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=v.Aa&&!v.ma?new ni(new ar({ab:H})):new ni(v.ma),N.Fa(v.L),N}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function bh(){}i=bh.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Zr(){}Zr.prototype.g=function(v,N){return new ys(v,N)};function ys(v,N){kt.call(this),this.g=new la(N),this.l=v,this.h=N&&N.messageUrlParams||null,v=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(v?v["X-WebChannel-Content-Type"]=N.messageContentType:v={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(v?v["X-WebChannel-Client-Profile"]=N.sa:v={"X-WebChannel-Client-Profile":N.sa}),this.g.U=v,(v=N&&N.Qb)&&!G(v)&&(this.g.u=v),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!G(N)&&(this.g.G=N,v=this.h,v!==null&&N in v&&(v=this.h,N in v&&delete v[N])),this.j=new Dr(this)}y(ys,kt),ys.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ys.prototype.close=function(){hl(this.g)},ys.prototype.o=function(v){var N=this.g;if(typeof v=="string"){var H={};H.__data__=v,v=H}else this.v&&(H={},H.__data__=Ut(v),v=H);N.i.push(new Xt(N.Ya++,v)),N.I==3&&wr(N)},ys.prototype.N=function(){this.g.l=null,delete this.j,hl(this.g),delete this.g,ys.Z.N.call(this)};function sc(v){ie.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var N=v.__sm__;if(N){t:{for(const H in N){v=H;break t}v=void 0}(this.i=v)&&(v=this.i,N=N!==null&&v in N?N[v]:void 0),this.data=N}else this.data=v}y(sc,ie);function Mh(){Ce.call(this),this.status=1}y(Mh,Ce);function Dr(v){this.g=v}y(Dr,bh),Dr.prototype.ra=function(){Kt(this.g,"a")},Dr.prototype.qa=function(v){Kt(this.g,new sc(v))},Dr.prototype.pa=function(v){Kt(this.g,new Mh)},Dr.prototype.oa=function(){Kt(this.g,"b")},Zr.prototype.createWebChannel=Zr.prototype.g,ys.prototype.send=ys.prototype.o,ys.prototype.open=ys.prototype.m,ys.prototype.close=ys.prototype.close,A3=function(){return new Zr},M3=function(){return ke()},b3=pe,UT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,Yv=br,Gs.COMPLETE="complete",T3=Gs,Me.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",kt.prototype.listen=kt.prototype.J,Cg=Me,ni.prototype.listenOnce=ni.prototype.K,ni.prototype.getLastError=ni.prototype.Ha,ni.prototype.getLastErrorCode=ni.prototype.ya,ni.prototype.getStatus=ni.prototype.ca,ni.prototype.getResponseJson=ni.prototype.La,ni.prototype.getResponseText=ni.prototype.la,ni.prototype.send=ni.prototype.ea,ni.prototype.setWithCredentials=ni.prototype.Fa,E3=ni}).apply(typeof Pv<"u"?Pv:typeof self<"u"?self:typeof window<"u"?window:{});const zR="@firebase/firestore",VR="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Aa.UNAUTHENTICATED=new Aa(null),Aa.GOOGLE_CREDENTIALS=new Aa("google-credentials-uid"),Aa.FIRST_PARTY=new Aa("first-party-uid"),Aa.MOCK_USER=new Aa("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qp="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=new m3("@firebase/firestore");function cp(){return Lf.logLevel}function Re(i,...t){if(Lf.logLevel<=qn.DEBUG){const e=t.map(jb);Lf.debug(`Firestore (${Qp}): ${i}`,...e)}}function Wu(i,...t){if(Lf.logLevel<=qn.ERROR){const e=t.map(jb);Lf.error(`Firestore (${Qp}): ${i}`,...e)}}function Lp(i,...t){if(Lf.logLevel<=qn.WARN){const e=t.map(jb);Lf.warn(`Firestore (${Qp}): ${i}`,...e)}}function jb(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(i,t,e){let n="Unexpected state";typeof t=="string"?n=t:e=t,R3(i,n,e)}function R3(i,t,e){let n=`FIRESTORE (${Qp}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(e!==void 0)try{n+=" CONTEXT: "+JSON.stringify(e)}catch{n+=" CONTEXT: "+e}throw Wu(n),new Error(n)}function ai(i,t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,i||R3(t,s,n)}function hn(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Kp{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class BF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Aa.UNAUTHENTICATED)))}shutdown(){}}class FF{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class HF{constructor(t){this.t=t,this.currentUser=Aa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ai(this.o===void 0,42304);let n=this.i;const s=d=>this.i!==n?(n=this.i,e(d)):Promise.resolve();let r=new nh;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new nh,t.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const d=r;t.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},f=d=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new nh)}}),0),u()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((n=>this.i!==t?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ai(typeof n.accessToken=="string",31837,{l:n}),new w3(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ai(t===null||typeof t=="string",2055,{h:t}),new Aa(t)}}class GF{constructor(t,e,n){this.P=t,this.T=e,this.I=n,this.type="FirstParty",this.user=Aa.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kF{constructor(t,e,n){this.P=t,this.T=e,this.I=n}getToken(){return Promise.resolve(new GF(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Aa.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class BR{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qF{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,EF(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){ai(this.o===void 0,3512);const n=r=>{r.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const u=r.token!==this.m;return this.m=r.token,Re("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?e(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable((()=>n(r)))};const s=r=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>s(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new BR(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(ai(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new BR(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=XF(40);for(let r=0;r<s.length;++r)n.length<20&&s[r]<e&&(n+=t.charAt(s[r]%62))}return n}}function Ln(i,t){return i<t?-1:i>t?1:0}function OT(i,t){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++){const s=i.charAt(n),r=t.charAt(n);if(s!==r)return eT(s)===eT(r)?Ln(s,r):eT(s)?1:-1}return Ln(i.length,t.length)}const jF=55296,YF=57343;function eT(i){const t=i.charCodeAt(0);return t>=jF&&t<=YF}function Pp(i,t,e){return i.length===t.length&&i.every(((n,s)=>e(n,t[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="__name__";class Gl{constructor(t,e,n){e===void 0?e=0:e>t.length&&$e(637,{offset:e,range:t.length}),n===void 0?n=t.length-e:n>t.length-e&&$e(1746,{length:n,range:t.length-e}),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return Gl.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Gl?t.forEach((n=>{e.push(n)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=Gl.compareSegments(t.get(s),e.get(s));if(r!==0)return r}return Ln(t.length,e.length)}static compareSegments(t,e){const n=Gl.isNumericId(t),s=Gl.isNumericId(e);return n&&!s?-1:!n&&s?1:n&&s?Gl.extractNumericId(t).compare(Gl.extractNumericId(e)):OT(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return eh.fromString(t.substring(4,t.length-2))}}class Si extends Gl{construct(t,e,n){return new Si(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new we(Wt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((s=>s.length>0)))}return new Si(e)}static emptyPath(){return new Si([])}}const WF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ea extends Gl{construct(t,e,n){return new ea(t,e,n)}static isValidIdentifier(t){return WF.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ea.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===FR}static keyField(){return new ea([FR])}static fromServerFormat(t){const e=[];let n="",s=0;const r=()=>{if(n.length===0)throw new we(Wt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let u=!1;for(;s<t.length;){const f=t[s];if(f==="\\"){if(s+1===t.length)throw new we(Wt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new we(Wt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=d,s+=2}else f==="`"?(u=!u,s++):f!=="."||u?(n+=f,s++):(r(),s++)}if(r(),u)throw new we(Wt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ea(e)}static emptyPath(){return new ea([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this.path=t}static fromPath(t){return new Ge(Si.fromString(t))}static fromName(t){return new Ge(Si.fromString(t).popFirst(5))}static empty(){return new Ge(Si.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Si.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Si.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ge(new Si(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(i,t,e){if(!e)throw new we(Wt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function KF(i,t,e,n){if(t===!0&&n===!0)throw new we(Wt.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function HR(i){if(!Ge.isDocumentKey(i))throw new we(Wt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function GR(i){if(Ge.isDocumentKey(i))throw new we(Wt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function D3(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function kS(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=(function(n){return n.constructor?n.constructor.name:null})(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":$e(12329,{type:typeof i})}function K0(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new we(Wt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=kS(i);throw new we(Wt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(i,t){const e={typeString:i};return t&&(e.value=t),e}function N_(i,t){if(!D3(i))throw new we(Wt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const n in t)if(t[n]){const s=t[n].typeString,r="value"in t[n]?{value:t[n].value}:void 0;if(!(n in i)){e=`JSON missing required field: '${n}'`;break}const u=i[n];if(s&&typeof u!==s){e=`JSON field '${n}' must be a ${s}.`;break}if(r!==void 0&&u!==r.value){e=`Expected '${n}' field to equal '${r.value}'`;break}}if(e)throw new we(Wt.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=-62135596800,qR=1e6;class Ri{static now(){return Ri.fromMillis(Date.now())}static fromDate(t){return Ri.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*qR);return new Ri(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new we(Wt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new we(Wt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<kR)throw new we(Wt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new we(Wt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qR}_compareTo(t){return this.seconds===t.seconds?Ln(this.nanoseconds,t.nanoseconds):Ln(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ri._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(N_(t,Ri._jsonSchema))return new Ri(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-kR;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ri._jsonSchemaVersion="firestore/timestamp/1.0",Ri._jsonSchema={type:gs("string",Ri._jsonSchemaVersion),seconds:gs("number"),nanoseconds:gs("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{static fromTimestamp(t){return new un(t)}static min(){return new un(new Ri(0,0))}static max(){return new un(new Ri(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=-1;function QF(i,t){const e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,s=un.fromTimestamp(n===1e9?new Ri(e+1,0):new Ri(e,n));return new oh(s,Ge.empty(),t)}function ZF(i){return new oh(i.readTime,i.key,d_)}class oh{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new oh(un.min(),Ge.empty(),d_)}static max(){return new oh(un.max(),Ge.empty(),d_)}}function JF(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=Ge.comparator(i.documentKey,t.documentKey),e!==0?e:Ln(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zp(i){if(i.code!==Wt.FAILED_PRECONDITION||i.message!==$F)throw i;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Zt(((n,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(n,s)},this.catchCallback=r=>{this.wrapFailure(e,r).next(n,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Zt?e:Zt.resolve(e)}catch(e){return Zt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Zt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Zt.reject(e)}static resolve(t){return new Zt(((e,n)=>{e(t)}))}static reject(t){return new Zt(((e,n)=>{n(t)}))}static waitFor(t){return new Zt(((e,n)=>{let s=0,r=0,u=!1;t.forEach((f=>{++s,f.next((()=>{++r,u&&r===s&&e()}),(d=>n(d)))})),u=!0,r===s&&e()}))}static or(t){let e=Zt.resolve(!1);for(const n of t)e=e.next((s=>s?Zt.resolve(s):n()));return e}static forEach(t,e){const n=[];return t.forEach(((s,r)=>{n.push(e.call(this,s,r))})),this.waitFor(n)}static mapArray(t,e){return new Zt(((n,s)=>{const r=t.length,u=new Array(r);let f=0;for(let d=0;d<r;d++){const m=d;e(t[m]).next((_=>{u[m]=_,++f,f===r&&n(u)}),(_=>s(_)))}}))}static doWhile(t,e){return new Zt(((n,s)=>{const r=()=>{t()===!0?e().next((()=>{r()}),s):n()};r()}))}}function eH(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Jp(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>e.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}qS.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=-1;function XS(i){return i==null}function Q0(i){return i===0&&1/i==-1/0}function nH(i){return typeof i=="number"&&Number.isInteger(i)&&!Q0(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3="";function iH(i){let t="";for(let e=0;e<i.length;e++)t.length>0&&(t=XR(t)),t=sH(i.get(e),t);return XR(t)}function sH(i,t){let e=t;const n=i.length;for(let s=0;s<n;s++){const r=i.charAt(s);switch(r){case"\0":e+="";break;case N3:e+="";break;default:e+=r}}return e}function XR(i){return i+N3+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Ff(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function I3(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(t,e){this.comparator=t,this.root=e||$s.EMPTY}insert(t,e){return new qi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,$s.BLACK,null,null))}remove(t){return new qi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$s.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return e+n.left.size;s<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new zv(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new zv(this.root,t,this.comparator,!1)}getReverseIterator(){return new zv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new zv(this.root,t,this.comparator,!0)}}class zv{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class $s{constructor(t,e,n,s,r){this.key=t,this.value=e,this.color=n??$s.RED,this.left=s??$s.EMPTY,this.right=r??$s.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,s,r){return new $s(t??this.key,e??this.value,n??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let s=this;const r=n(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,e,n),null):r===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $s.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return $s.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,$s.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,$s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw $e(27949);return t+(this.isRed()?0:1)}}$s.EMPTY=null,$s.RED=!0,$s.BLACK=!1;$s.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(t,e,n,s,r){return this}insert(t,e,n){return new $s(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(t){this.comparator=t,this.data=new qi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new YR(this.data.getIterator())}getIteratorFrom(t){return new YR(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((n=>{e=e.add(n)})),e}isEqual(t){if(!(t instanceof Ms)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,r=n.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ms(this.comparator);return e.data=t,e}}class YR{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t){this.fields=t,t.sort(ea.comparator)}static empty(){return new nl([])}unionWith(t){let e=new Ms(ea.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new nl(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Pp(this.fields,t.fields,((e,n)=>e.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new U3("Invalid base64 string: "+r):r}})(t);return new sa(e)}static fromUint8Array(t){const e=(function(s){let r="";for(let u=0;u<s.length;++u)r+=String.fromCharCode(s[u]);return r})(t);return new sa(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ln(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}sa.EMPTY_BYTE_STRING=new sa("");const aH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lh(i){if(ai(!!i,39018),typeof i=="string"){let t=0;const e=aH.exec(i);if(ai(!!e,46558,{timestamp:i}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:is(i.seconds),nanos:is(i.nanos)}}function is(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function uh(i){return typeof i=="string"?sa.fromBase64String(i):sa.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3="server_timestamp",L3="__type__",P3="__previous_value__",z3="__local_write_time__";function Kb(i){return(i?.mapValue?.fields||{})[L3]?.stringValue===O3}function jS(i){const t=i.mapValue.fields[P3];return Kb(t)?jS(t):t}function p_(i){const t=lh(i.mapValue.fields[z3].timestampValue);return new Ri(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(t,e,n,s,r,u,f,d,m,_){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=s,this.ssl=r,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=_}}const Z0="(default)";class m_{constructor(t,e){this.projectId=t,this.database=e||Z0}static empty(){return new m_("","")}get isDefaultDatabase(){return this.database===Z0}isEqual(t){return t instanceof m_&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3="__type__",oH="__max__",Vv={mapValue:{}},B3="__vector__",J0="value";function ch(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Kb(i)?4:uH(i)?9007199254740991:lH(i)?10:11:$e(28295,{value:i})}function $l(i,t){if(i===t)return!0;const e=ch(i);if(e!==ch(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return p_(i).isEqual(p_(t));case 3:return(function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const u=lh(s.timestampValue),f=lh(r.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(i,t);case 5:return i.stringValue===t.stringValue;case 6:return(function(s,r){return uh(s.bytesValue).isEqual(uh(r.bytesValue))})(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return(function(s,r){return is(s.geoPointValue.latitude)===is(r.geoPointValue.latitude)&&is(s.geoPointValue.longitude)===is(r.geoPointValue.longitude)})(i,t);case 2:return(function(s,r){if("integerValue"in s&&"integerValue"in r)return is(s.integerValue)===is(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const u=is(s.doubleValue),f=is(r.doubleValue);return u===f?Q0(u)===Q0(f):isNaN(u)&&isNaN(f)}return!1})(i,t);case 9:return Pp(i.arrayValue.values||[],t.arrayValue.values||[],$l);case 10:case 11:return(function(s,r){const u=s.mapValue.fields||{},f=r.mapValue.fields||{};if(jR(u)!==jR(f))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(f[d]===void 0||!$l(u[d],f[d])))return!1;return!0})(i,t);default:return $e(52216,{left:i})}}function g_(i,t){return(i.values||[]).find((e=>$l(e,t)))!==void 0}function zp(i,t){if(i===t)return 0;const e=ch(i),n=ch(t);if(e!==n)return Ln(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return Ln(i.booleanValue,t.booleanValue);case 2:return(function(r,u){const f=is(r.integerValue||r.doubleValue),d=is(u.integerValue||u.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(i,t);case 3:return WR(i.timestampValue,t.timestampValue);case 4:return WR(p_(i),p_(t));case 5:return OT(i.stringValue,t.stringValue);case 6:return(function(r,u){const f=uh(r),d=uh(u);return f.compareTo(d)})(i.bytesValue,t.bytesValue);case 7:return(function(r,u){const f=r.split("/"),d=u.split("/");for(let m=0;m<f.length&&m<d.length;m++){const _=Ln(f[m],d[m]);if(_!==0)return _}return Ln(f.length,d.length)})(i.referenceValue,t.referenceValue);case 8:return(function(r,u){const f=Ln(is(r.latitude),is(u.latitude));return f!==0?f:Ln(is(r.longitude),is(u.longitude))})(i.geoPointValue,t.geoPointValue);case 9:return KR(i.arrayValue,t.arrayValue);case 10:return(function(r,u){const f=r.fields||{},d=u.fields||{},m=f[J0]?.arrayValue,_=d[J0]?.arrayValue,y=Ln(m?.values?.length||0,_?.values?.length||0);return y!==0?y:KR(m,_)})(i.mapValue,t.mapValue);case 11:return(function(r,u){if(r===Vv.mapValue&&u===Vv.mapValue)return 0;if(r===Vv.mapValue)return 1;if(u===Vv.mapValue)return-1;const f=r.fields||{},d=Object.keys(f),m=u.fields||{},_=Object.keys(m);d.sort(),_.sort();for(let y=0;y<d.length&&y<_.length;++y){const S=OT(d[y],_[y]);if(S!==0)return S;const T=zp(f[d[y]],m[_[y]]);if(T!==0)return T}return Ln(d.length,_.length)})(i.mapValue,t.mapValue);default:throw $e(23264,{he:e})}}function WR(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return Ln(i,t);const e=lh(i),n=lh(t),s=Ln(e.seconds,n.seconds);return s!==0?s:Ln(e.nanos,n.nanos)}function KR(i,t){const e=i.values||[],n=t.values||[];for(let s=0;s<e.length&&s<n.length;++s){const r=zp(e[s],n[s]);if(r)return r}return Ln(e.length,n.length)}function Vp(i){return LT(i)}function LT(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(e){const n=lh(e);return`time(${n.seconds},${n.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(e){return uh(e).toBase64()})(i.bytesValue):"referenceValue"in i?(function(e){return Ge.fromName(e).toString()})(i.referenceValue):"geoPointValue"in i?(function(e){return`geo(${e.latitude},${e.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(e){let n="[",s=!0;for(const r of e.values||[])s?s=!1:n+=",",n+=LT(r);return n+"]"})(i.arrayValue):"mapValue"in i?(function(e){const n=Object.keys(e.fields||{}).sort();let s="{",r=!0;for(const u of n)r?r=!1:s+=",",s+=`${u}:${LT(e.fields[u])}`;return s+"}"})(i.mapValue):$e(61005,{value:i})}function Wv(i){switch(ch(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=jS(i);return t?16+Wv(t):16;case 5:return 2*i.stringValue.length;case 6:return uh(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,r)=>s+Wv(r)),0)})(i.arrayValue);case 10:case 11:return(function(n){let s=0;return Ff(n.fields,((r,u)=>{s+=r.length+Wv(u)})),s})(i.mapValue);default:throw $e(13486,{value:i})}}function QR(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function PT(i){return!!i&&"integerValue"in i}function Qb(i){return!!i&&"arrayValue"in i}function ZR(i){return!!i&&"nullValue"in i}function JR(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Kv(i){return!!i&&"mapValue"in i}function lH(i){return(i?.mapValue?.fields||{})[V3]?.stringValue===B3}function kg(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return Ff(i.mapValue.fields,((e,n)=>t.mapValue.fields[e]=kg(n))),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=kg(i.arrayValue.values[e]);return t}return{...i}}function uH(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===oH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t){this.value=t}static empty(){return new yo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Kv(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=kg(e)}setAll(t){let e=ea.emptyPath(),n={},s=[];t.forEach(((u,f)=>{if(!e.isImmediateParentOf(f)){const d=this.getFieldsMap(e);this.applyChanges(d,n,s),n={},s=[],e=f.popLast()}u?n[f.lastSegment()]=kg(u):s.push(f.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,s)}delete(t){const e=this.field(t.popLast());Kv(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return $l(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let s=e.mapValue.fields[t.get(n)];Kv(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,n){Ff(e,((s,r)=>t[s]=r));for(const s of n)delete t[s]}clone(){return new yo(kg(this.value))}}function F3(i){const t=[];return Ff(i.fields,((e,n)=>{const s=new ea([e]);if(Kv(n)){const r=F3(n.mapValue).fields;if(r.length===0)t.push(s);else for(const u of r)t.push(s.child(u))}else t.push(s)})),new nl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(t,e,n,s,r,u,f){this.key=t,this.documentType=e,this.version=n,this.readTime=s,this.createTime=r,this.data=u,this.documentState=f}static newInvalidDocument(t){return new wa(t,0,un.min(),un.min(),un.min(),yo.empty(),0)}static newFoundDocument(t,e,n,s){return new wa(t,1,e,un.min(),n,s,0)}static newNoDocument(t,e){return new wa(t,2,e,un.min(),un.min(),yo.empty(),0)}static newUnknownDocument(t,e){return new wa(t,3,e,un.min(),un.min(),yo.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(un.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=un.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof wa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new wa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(t,e){this.position=t,this.inclusive=e}}function $R(i,t,e){let n=0;for(let s=0;s<i.position.length;s++){const r=t[s],u=i.position[s];if(r.field.isKeyField()?n=Ge.comparator(Ge.fromName(u.referenceValue),e.key):n=zp(u,e.data.field(r.field)),r.dir==="desc"&&(n*=-1),n!==0)break}return n}function t2(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!$l(i.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(t,e="asc"){this.field=t,this.dir=e}}function cH(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{}class ps extends H3{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new fH(t,e,n):e==="array-contains"?new mH(t,n):e==="in"?new gH(t,n):e==="not-in"?new _H(t,n):e==="array-contains-any"?new yH(t,n):new ps(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new dH(t,n):new pH(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(zp(e,this.value)):e!==null&&ch(this.value)===ch(e)&&this.matchesComparison(zp(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sl extends H3{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new sl(t,e)}matches(t){return G3(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function G3(i){return i.op==="and"}function k3(i){return hH(i)&&G3(i)}function hH(i){for(const t of i.filters)if(t instanceof sl)return!1;return!0}function zT(i){if(i instanceof ps)return i.field.canonicalString()+i.op.toString()+Vp(i.value);if(k3(i))return i.filters.map((t=>zT(t))).join(",");{const t=i.filters.map((e=>zT(e))).join(",");return`${i.op}(${t})`}}function q3(i,t){return i instanceof ps?(function(n,s){return s instanceof ps&&n.op===s.op&&n.field.isEqual(s.field)&&$l(n.value,s.value)})(i,t):i instanceof sl?(function(n,s){return s instanceof sl&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((r,u,f)=>r&&q3(u,s.filters[f])),!0):!1})(i,t):void $e(19439)}function X3(i){return i instanceof ps?(function(e){return`${e.field.canonicalString()} ${e.op} ${Vp(e.value)}`})(i):i instanceof sl?(function(e){return e.op.toString()+" {"+e.getFilters().map(X3).join(" ,")+"}"})(i):"Filter"}class fH extends ps{constructor(t,e,n){super(t,e,n),this.key=Ge.fromName(n.referenceValue)}matches(t){const e=Ge.comparator(t.key,this.key);return this.matchesComparison(e)}}class dH extends ps{constructor(t,e){super(t,"in",e),this.keys=j3("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class pH extends ps{constructor(t,e){super(t,"not-in",e),this.keys=j3("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function j3(i,t){return(t.arrayValue?.values||[]).map((e=>Ge.fromName(e.referenceValue)))}class mH extends ps{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Qb(e)&&g_(e.arrayValue,this.value)}}class gH extends ps{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&g_(this.value.arrayValue,e)}}class _H extends ps{constructor(t,e){super(t,"not-in",e)}matches(t){if(g_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!g_(this.value.arrayValue,e)}}class yH extends ps{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Qb(e)||!e.arrayValue.values)&&e.arrayValue.values.some((n=>g_(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(t,e=null,n=[],s=[],r=null,u=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=s,this.limit=r,this.startAt=u,this.endAt=f,this.Te=null}}function e2(i,t=null,e=[],n=[],s=null,r=null,u=null){return new vH(i,t,e,n,s,r,u)}function Zb(i){const t=hn(i);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((n=>zT(n))).join(","),e+="|ob:",e+=t.orderBy.map((n=>(function(r){return r.field.canonicalString()+r.dir})(n))).join(","),XS(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((n=>Vp(n))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((n=>Vp(n))).join(",")),t.Te=e}return t.Te}function Jb(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!cH(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!q3(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!t2(i.startAt,t.startAt)&&t2(i.endAt,t.endAt)}function VT(i){return Ge.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(t,e=null,n=[],s=[],r=null,u="F",f=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=s,this.limit=r,this.limitType=u,this.startAt=f,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SH(i,t,e,n,s,r,u,f){return new I_(i,t,e,n,s,r,u,f)}function Y3(i){return new I_(i)}function n2(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function W3(i){return i.collectionGroup!==null}function qg(i){const t=hn(i);if(t.Ie===null){t.Ie=[];const e=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Ms(ea.comparator);return u.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new tS(r,n))})),e.has(ea.keyField().canonicalString())||t.Ie.push(new tS(ea.keyField(),n))}return t.Ie}function Wl(i){const t=hn(i);return t.Ee||(t.Ee=xH(t,qg(i))),t.Ee}function xH(i,t){if(i.limitType==="F")return e2(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map((s=>{const r=s.dir==="desc"?"asc":"desc";return new tS(s.field,r)}));const e=i.endAt?new $0(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new $0(i.startAt.position,i.startAt.inclusive):null;return e2(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function BT(i,t){const e=i.filters.concat([t]);return new I_(i.path,i.collectionGroup,i.explicitOrderBy.slice(),e,i.limit,i.limitType,i.startAt,i.endAt)}function FT(i,t,e){return new I_(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function YS(i,t){return Jb(Wl(i),Wl(t))&&i.limitType===t.limitType}function K3(i){return`${Zb(Wl(i))}|lt:${i.limitType}`}function hp(i){return`Query(target=${(function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map((s=>X3(s))).join(", ")}]`),XS(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Vp(s))).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Vp(s))).join(",")),`Target(${n})`})(Wl(i))}; limitType=${i.limitType})`}function WS(i,t){return t.isFoundDocument()&&(function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):Ge.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)})(i,t)&&(function(n,s){for(const r of qg(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0})(i,t)&&(function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0})(i,t)&&(function(n,s){return!(n.startAt&&!(function(u,f,d){const m=$R(u,f,d);return u.inclusive?m<=0:m<0})(n.startAt,qg(n),s)||n.endAt&&!(function(u,f,d){const m=$R(u,f,d);return u.inclusive?m>=0:m>0})(n.endAt,qg(n),s))})(i,t)}function EH(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Q3(i){return(t,e)=>{let n=!1;for(const s of qg(i)){const r=TH(s,t,e);if(r!==0)return r;n=n||s.field.isKeyField()}return 0}}function TH(i,t,e){const n=i.field.isKeyField()?Ge.comparator(t.key,e.key):(function(r,u,f){const d=u.data.field(r),m=f.data.field(r);return d!==null&&m!==null?zp(d,m):$e(42886)})(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return $e(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[s,r]of n)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return n.length===1?delete this.inner[e]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Ff(this.inner,((e,n)=>{for(const[s,r]of n)t(s,r)}))}isEmpty(){return I3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH=new qi(Ge.comparator);function Ku(){return bH}const Z3=new qi(Ge.comparator);function Dg(...i){let t=Z3;for(const e of i)t=t.insert(e.key,e);return t}function J3(i){let t=Z3;return i.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Rf(){return Xg()}function $3(){return Xg()}function Xg(){return new Hf((i=>i.toString()),((i,t)=>i.isEqual(t)))}const MH=new qi(Ge.comparator),AH=new Ms(Ge.comparator);function Pn(...i){let t=AH;for(const e of i)t=t.add(e);return t}const RH=new Ms(Ln);function wH(){return RH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Q0(t)?"-0":t}}function tD(i){return{integerValue:""+i}}function CH(i,t){return nH(t)?tD(t):$b(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this._=void 0}}function DH(i,t,e){return i instanceof eS?(function(s,r){const u={fields:{[L3]:{stringValue:O3},[z3]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Kb(r)&&(r=jS(r)),r&&(u.fields[P3]=r),{mapValue:u}})(e,t):i instanceof __?nD(i,t):i instanceof y_?iD(i,t):(function(s,r){const u=eD(s,r),f=i2(u)+i2(s.Ae);return PT(u)&&PT(s.Ae)?tD(f):$b(s.serializer,f)})(i,t)}function NH(i,t,e){return i instanceof __?nD(i,t):i instanceof y_?iD(i,t):e}function eD(i,t){return i instanceof nS?(function(n){return PT(n)||(function(r){return!!r&&"doubleValue"in r})(n)})(t)?t:{integerValue:0}:null}class eS extends KS{}class __ extends KS{constructor(t){super(),this.elements=t}}function nD(i,t){const e=sD(t);for(const n of i.elements)e.some((s=>$l(s,n)))||e.push(n);return{arrayValue:{values:e}}}class y_ extends KS{constructor(t){super(),this.elements=t}}function iD(i,t){let e=sD(t);for(const n of i.elements)e=e.filter((s=>!$l(s,n)));return{arrayValue:{values:e}}}class nS extends KS{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function i2(i){return is(i.integerValue||i.doubleValue)}function sD(i){return Qb(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function IH(i,t){return i.field.isEqual(t.field)&&(function(n,s){return n instanceof __&&s instanceof __||n instanceof y_&&s instanceof y_?Pp(n.elements,s.elements,$l):n instanceof nS&&s instanceof nS?$l(n.Ae,s.Ae):n instanceof eS&&s instanceof eS})(i.transform,t.transform)}class UH{constructor(t,e){this.version=t,this.transformResults=e}}class Gu{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Gu}static exists(t){return new Gu(void 0,t)}static updateTime(t){return new Gu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Qv(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class QS{}function aD(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new oD(i.key,Gu.none()):new U_(i.key,i.data,Gu.none());{const e=i.data,n=yo.empty();let s=new Ms(ea.comparator);for(let r of t.fields)if(!s.has(r)){let u=e.field(r);u===null&&r.length>1&&(r=r.popLast(),u=e.field(r)),u===null?n.delete(r):n.set(r,u),s=s.add(r)}return new Gf(i.key,n,new nl(s.toArray()),Gu.none())}}function OH(i,t,e){i instanceof U_?(function(s,r,u){const f=s.value.clone(),d=a2(s.fieldTransforms,r,u.transformResults);f.setAll(d),r.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(i,t,e):i instanceof Gf?(function(s,r,u){if(!Qv(s.precondition,r))return void r.convertToUnknownDocument(u.version);const f=a2(s.fieldTransforms,r,u.transformResults),d=r.data;d.setAll(rD(s)),d.setAll(f),r.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(i,t,e):(function(s,r,u){r.convertToNoDocument(u.version).setHasCommittedMutations()})(0,t,e)}function jg(i,t,e,n){return i instanceof U_?(function(r,u,f,d){if(!Qv(r.precondition,u))return f;const m=r.value.clone(),_=r2(r.fieldTransforms,d,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(i,t,e,n):i instanceof Gf?(function(r,u,f,d){if(!Qv(r.precondition,u))return f;const m=r2(r.fieldTransforms,d,u),_=u.data;return _.setAll(rD(r)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((y=>y.field)))})(i,t,e,n):(function(r,u,f){return Qv(r.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(i,t,e)}function LH(i,t){let e=null;for(const n of i.fieldTransforms){const s=t.data.field(n.field),r=eD(n.transform,s||null);r!=null&&(e===null&&(e=yo.empty()),e.set(n.field,r))}return e||null}function s2(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Pp(n,s,((r,u)=>IH(r,u)))})(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class U_ extends QS{constructor(t,e,n,s=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gf extends QS{constructor(t,e,n,s,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function rD(i){const t=new Map;return i.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const n=i.data.field(e);t.set(e,n)}})),t}function a2(i,t,e){const n=new Map;ai(i.length===e.length,32656,{Re:e.length,Ve:i.length});for(let s=0;s<e.length;s++){const r=i[s],u=r.transform,f=t.data.field(r.field);n.set(r.field,NH(u,f,e[s]))}return n}function r2(i,t,e){const n=new Map;for(const s of i){const r=s.transform,u=e.data.field(s.field);n.set(s.field,DH(r,u,t))}return n}class oD extends QS{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PH extends QS{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(t,e,n,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&OH(r,t,n[s])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=jg(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=jg(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=$3();return this.mutations.forEach((s=>{const r=t.get(s.key),u=r.overlayedDocument;let f=this.applyToLocalView(u,r.mutatedFields);f=e.has(s.key)?null:f;const d=aD(u,f);d!==null&&n.set(s.key,d),u.isValidDocument()||u.convertToNoDocument(un.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Pn())}isEqual(t){return this.batchId===t.batchId&&Pp(this.mutations,t.mutations,((e,n)=>s2(e,n)))&&Pp(this.baseMutations,t.baseMutations,((e,n)=>s2(e,n)))}}class t1{constructor(t,e,n,s){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=s}static from(t,e,n){ai(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let s=(function(){return MH})();const r=t.mutations;for(let u=0;u<r.length;u++)s=s.insert(r[u].key,n[u].version);return new t1(t,e,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ds,kn;function FH(i){switch(i){case Wt.OK:return $e(64938);case Wt.CANCELLED:case Wt.UNKNOWN:case Wt.DEADLINE_EXCEEDED:case Wt.RESOURCE_EXHAUSTED:case Wt.INTERNAL:case Wt.UNAVAILABLE:case Wt.UNAUTHENTICATED:return!1;case Wt.INVALID_ARGUMENT:case Wt.NOT_FOUND:case Wt.ALREADY_EXISTS:case Wt.PERMISSION_DENIED:case Wt.FAILED_PRECONDITION:case Wt.ABORTED:case Wt.OUT_OF_RANGE:case Wt.UNIMPLEMENTED:case Wt.DATA_LOSS:return!0;default:return $e(15467,{code:i})}}function lD(i){if(i===void 0)return Wu("GRPC error has no .code"),Wt.UNKNOWN;switch(i){case ds.OK:return Wt.OK;case ds.CANCELLED:return Wt.CANCELLED;case ds.UNKNOWN:return Wt.UNKNOWN;case ds.DEADLINE_EXCEEDED:return Wt.DEADLINE_EXCEEDED;case ds.RESOURCE_EXHAUSTED:return Wt.RESOURCE_EXHAUSTED;case ds.INTERNAL:return Wt.INTERNAL;case ds.UNAVAILABLE:return Wt.UNAVAILABLE;case ds.UNAUTHENTICATED:return Wt.UNAUTHENTICATED;case ds.INVALID_ARGUMENT:return Wt.INVALID_ARGUMENT;case ds.NOT_FOUND:return Wt.NOT_FOUND;case ds.ALREADY_EXISTS:return Wt.ALREADY_EXISTS;case ds.PERMISSION_DENIED:return Wt.PERMISSION_DENIED;case ds.FAILED_PRECONDITION:return Wt.FAILED_PRECONDITION;case ds.ABORTED:return Wt.ABORTED;case ds.OUT_OF_RANGE:return Wt.OUT_OF_RANGE;case ds.UNIMPLEMENTED:return Wt.UNIMPLEMENTED;case ds.DATA_LOSS:return Wt.DATA_LOSS;default:return $e(39323,{code:i})}}(kn=ds||(ds={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GH=new eh([4294967295,4294967295],0);function o2(i){const t=HH().encode(i),e=new x3;return e.update(t),new Uint8Array(e.digest())}function l2(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new eh([e,n],0),new eh([s,r],0)]}class e1{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Ng(`Invalid padding: ${e}`);if(n<0)throw new Ng(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Ng(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new Ng(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=eh.fromNumber(this.ge)}ye(t,e,n){let s=t.add(e.multiply(eh.fromNumber(n)));return s.compare(GH)===1&&(s=new eh([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=o2(t),[n,s]=l2(e);for(let r=0;r<this.hashCount;r++){const u=this.ye(n,s,r);if(!this.we(u))return!1}return!0}static create(t,e,n){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),u=new e1(r,s,e);return n.forEach((f=>u.insert(f))),u}insert(t){if(this.ge===0)return;const e=o2(t),[n,s]=l2(e);for(let r=0;r<this.hashCount;r++){const u=this.ye(n,s,r);this.Se(u)}}Se(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Ng extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(t,e,n,s,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const s=new Map;return s.set(t,O_.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new ZS(un.min(),s,new qi(Ln),Ku(),Pn())}}class O_{constructor(t,e,n,s,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new O_(n,e,Pn(),Pn(),Pn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t,e,n,s){this.be=t,this.removedTargetIds=e,this.key=n,this.De=s}}class uD{constructor(t,e){this.targetId=t,this.Ce=e}}class cD{constructor(t,e,n=sa.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=s}}class u2{constructor(){this.ve=0,this.Fe=c2(),this.Me=sa.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Pn(),e=Pn(),n=Pn();return this.Fe.forEach(((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:n=n.add(s);break;default:$e(38017,{changeType:r})}})),new O_(this.Me,this.xe,t,e,n)}qe(){this.Oe=!1,this.Fe=c2()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ai(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class kH{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ku(),this.Je=Bv(),this.He=Bv(),this.Ye=new qi(Ln)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const n=this.nt(e);switch(t.state){case 0:this.rt(e)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),n.Le(t.resumeToken));break;default:$e(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((n,s)=>{this.rt(s)&&e(s)}))}st(t){const e=t.targetId,n=t.Ce.count,s=this.ot(e);if(s){const r=s.target;if(VT(r))if(n===0){const u=new Ge(r.path);this.et(e,u,wa.newNoDocument(u,un.min()))}else ai(n===1,20013,{expectedCount:n});else{const u=this._t(e);if(u!==n){const f=this.ut(t),d=f?this.ct(f,t,u):1;if(d!==0){this.it(e);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,m)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:r=0}=e;let u,f;try{u=uh(n).toUint8Array()}catch(d){if(d instanceof U3)return Lp("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new e1(u,s,r)}catch(d){return Lp(d instanceof Ng?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.ge===0?null:f}ct(t,e,n){return e.Ce.count===n-this.Pt(t,e.targetId)?0:2}Pt(t,e){const n=this.Ge.getRemoteKeysForTarget(e);let s=0;return n.forEach((r=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${r.path.canonicalString()}`;t.mightContain(f)||(this.et(e,r,null),s++)})),s}Tt(t){const e=new Map;this.ze.forEach(((r,u)=>{const f=this.ot(u);if(f){if(r.current&&VT(f.target)){const d=new Ge(f.target.path);this.It(d).has(u)||this.Et(u,d)||this.et(u,d,wa.newNoDocument(d,t))}r.Be&&(e.set(u,r.ke()),r.qe())}}));let n=Pn();this.He.forEach(((r,u)=>{let f=!0;u.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(n=n.add(r))})),this.je.forEach(((r,u)=>u.setReadTime(t)));const s=new ZS(t,e,this.Ye,this.je,n);return this.je=Ku(),this.Je=Bv(),this.He=Bv(),this.Ye=new qi(Ln),s}Xe(t,e){if(!this.rt(t))return;const n=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,n),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,n){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,e)?s.Qe(e,1):s.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),n&&(this.je=this.je.insert(e,n))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new u2,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Ms(Ln),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Ms(Ln),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||Re("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new u2),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Bv(){return new qi(Ge.comparator)}function c2(){return new qi(Ge.comparator)}const qH={asc:"ASCENDING",desc:"DESCENDING"},XH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jH={and:"AND",or:"OR"};class YH{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function HT(i,t){return i.useProto3Json||XS(t)?t:{value:t}}function iS(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function hD(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function WH(i,t){return iS(i,t.toTimestamp())}function Kl(i){return ai(!!i,49232),un.fromTimestamp((function(e){const n=lh(e);return new Ri(n.seconds,n.nanos)})(i))}function n1(i,t){return GT(i,t).canonicalString()}function GT(i,t){const e=(function(s){return new Si(["projects",s.projectId,"databases",s.database])})(i).child("documents");return t===void 0?e:e.child(t)}function fD(i){const t=Si.fromString(i);return ai(_D(t),10190,{key:t.toString()}),t}function kT(i,t){return n1(i.databaseId,t.path)}function nT(i,t){const e=fD(t);if(e.get(1)!==i.databaseId.projectId)throw new we(Wt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new we(Wt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new Ge(pD(e))}function dD(i,t){return n1(i.databaseId,t)}function KH(i){const t=fD(i);return t.length===4?Si.emptyPath():pD(t)}function qT(i){return new Si(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function pD(i){return ai(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function h2(i,t,e){return{name:kT(i,t),fields:e.value.mapValue.fields}}function QH(i,t){let e;if("targetChange"in t){t.targetChange;const n=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:$e(39313,{state:m})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=(function(m,_){return m.useProto3Json?(ai(_===void 0||typeof _=="string",58123),sa.fromBase64String(_||"")):(ai(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),sa.fromUint8Array(_||new Uint8Array))})(i,t.targetChange.resumeToken),u=t.targetChange.cause,f=u&&(function(m){const _=m.code===void 0?Wt.UNKNOWN:lD(m.code);return new we(_,m.message||"")})(u);e=new cD(n,s,r,f||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const s=nT(i,n.document.name),r=Kl(n.document.updateTime),u=n.document.createTime?Kl(n.document.createTime):un.min(),f=new yo({mapValue:{fields:n.document.fields}}),d=wa.newFoundDocument(s,r,u,f),m=n.targetIds||[],_=n.removedTargetIds||[];e=new Zv(m,_,d.key,d)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const s=nT(i,n.document),r=n.readTime?Kl(n.readTime):un.min(),u=wa.newNoDocument(s,r),f=n.removedTargetIds||[];e=new Zv([],f,u.key,u)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const s=nT(i,n.document),r=n.removedTargetIds||[];e=new Zv([],r,s,null)}else{if(!("filter"in t))return $e(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:s=0,unchangedNames:r}=n,u=new BH(s,r),f=n.targetId;e=new uD(f,u)}}return e}function ZH(i,t){let e;if(t instanceof U_)e={update:h2(i,t.key,t.value)};else if(t instanceof oD)e={delete:kT(i,t.key)};else if(t instanceof Gf)e={update:h2(i,t.key,t.data),updateMask:r8(t.fieldMask)};else{if(!(t instanceof PH))return $e(16599,{Vt:t.type});e={verify:kT(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((n=>(function(r,u){const f=u.transform;if(f instanceof eS)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof __)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof y_)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof nS)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw $e(20930,{transform:u.transform})})(0,n)))),t.precondition.isNone||(e.currentDocument=(function(s,r){return r.updateTime!==void 0?{updateTime:WH(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:$e(27497)})(i,t.precondition)),e}function JH(i,t){return i&&i.length>0?(ai(t!==void 0,14353),i.map((e=>(function(s,r){let u=s.updateTime?Kl(s.updateTime):Kl(r);return u.isEqual(un.min())&&(u=Kl(r)),new UH(u,s.transformResults||[])})(e,t)))):[]}function $H(i,t){return{documents:[dD(i,t.path)]}}function t8(i,t){const e={structuredQuery:{}},n=t.path;let s;t.collectionGroup!==null?(s=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=dD(i,s);const r=(function(m){if(m.length!==0)return gD(sl.create(m,"and"))})(t.filters);r&&(e.structuredQuery.where=r);const u=(function(m){if(m.length!==0)return m.map((_=>(function(S){return{field:fp(S.field),direction:i8(S.dir)}})(_)))})(t.orderBy);u&&(e.structuredQuery.orderBy=u);const f=HT(i,t.limit);return f!==null&&(e.structuredQuery.limit=f),t.startAt&&(e.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(t.endAt)),{ft:e,parent:s}}function e8(i){let t=KH(i.parent);const e=i.structuredQuery,n=e.from?e.from.length:0;let s=null;if(n>0){ai(n===1,65062);const _=e.from[0];_.allDescendants?s=_.collectionId:t=t.child(_.collectionId)}let r=[];e.where&&(r=(function(y){const S=mD(y);return S instanceof sl&&k3(S)?S.getFilters():[S]})(e.where));let u=[];e.orderBy&&(u=(function(y){return y.map((S=>(function(R){return new tS(dp(R.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(S)))})(e.orderBy));let f=null;e.limit&&(f=(function(y){let S;return S=typeof y=="object"?y.value:y,XS(S)?null:S})(e.limit));let d=null;e.startAt&&(d=(function(y){const S=!!y.before,T=y.values||[];return new $0(T,S)})(e.startAt));let m=null;return e.endAt&&(m=(function(y){const S=!y.before,T=y.values||[];return new $0(T,S)})(e.endAt)),SH(t,s,u,r,f,"F",d,m)}function n8(i,t){const e=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:s})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function mD(i){return i.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=dp(e.unaryFilter.field);return ps.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=dp(e.unaryFilter.field);return ps.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dp(e.unaryFilter.field);return ps.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=dp(e.unaryFilter.field);return ps.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}})(i):i.fieldFilter!==void 0?(function(e){return ps.create(dp(e.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(e){return sl.create(e.compositeFilter.filters.map((n=>mD(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return $e(1026)}})(e.compositeFilter.op))})(i):$e(30097,{filter:i})}function i8(i){return qH[i]}function s8(i){return XH[i]}function a8(i){return jH[i]}function fp(i){return{fieldPath:i.canonicalString()}}function dp(i){return ea.fromServerFormat(i.fieldPath)}function gD(i){return i instanceof ps?(function(e){if(e.op==="=="){if(JR(e.value))return{unaryFilter:{field:fp(e.field),op:"IS_NAN"}};if(ZR(e.value))return{unaryFilter:{field:fp(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(JR(e.value))return{unaryFilter:{field:fp(e.field),op:"IS_NOT_NAN"}};if(ZR(e.value))return{unaryFilter:{field:fp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fp(e.field),op:s8(e.op),value:e.value}}})(i):i instanceof sl?(function(e){const n=e.getFilters().map((s=>gD(s)));return n.length===1?n[0]:{compositeFilter:{op:a8(e.op),filters:n}}})(i):$e(54877,{filter:i})}function r8(i){const t=[];return i.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function _D(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(t,e,n,s,r=un.min(),u=un.min(),f=sa.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(t){return new Jc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Jc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Jc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Jc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(t){this.yt=t}}function l8(i){const t=e8({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?FT(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(){this.Cn=new c8}addToCollectionParentIndex(t,e){return this.Cn.add(e),Zt.resolve()}getCollectionParents(t,e){return Zt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return Zt.resolve()}deleteFieldIndex(t,e){return Zt.resolve()}deleteAllFieldIndexes(t){return Zt.resolve()}createTargetIndexes(t,e){return Zt.resolve()}getDocumentsMatchingTarget(t,e){return Zt.resolve(null)}getIndexType(t,e){return Zt.resolve(0)}getFieldIndexes(t,e){return Zt.resolve([])}getNextCollectionGroupToUpdate(t){return Zt.resolve(null)}getMinOffset(t,e){return Zt.resolve(oh.min())}getMinOffsetFromCollectionGroup(t,e){return Zt.resolve(oh.min())}updateCollectionGroup(t,e,n){return Zt.resolve()}updateIndexEntries(t,e){return Zt.resolve()}}class c8{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e]||new Ms(Si.comparator),r=!s.has(n);return this.index[e]=s.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e];return s&&s.has(n)}getEntries(t){return(this.index[t]||new Ms(Si.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yD=41943040;class vr{static withCacheSize(t){return new vr(t,vr.DEFAULT_COLLECTION_PERCENTILE,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr.DEFAULT_COLLECTION_PERCENTILE=10,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vr.DEFAULT=new vr(yD,vr.DEFAULT_COLLECTION_PERCENTILE,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vr.DISABLED=new vr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Bp(0)}static cr(){return new Bp(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="LruGarbageCollector",h8=1048576;function p2([i,t],[e,n]){const s=Ln(i,e);return s===0?Ln(t,n):s}class f8{constructor(t){this.Ir=t,this.buffer=new Ms(p2),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const n=this.buffer.last();p2(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}}get maxValue(){return this.buffer.last()[0]}}class d8{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Re(d2,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Jp(e)?Re(d2,"Ignoring IndexedDB error during garbage collection: ",e):await Zp(e)}await this.Vr(3e5)}))}}class p8{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((n=>Math.floor(e/100*n)))}nthSequenceNumber(t,e){if(e===0)return Zt.resolve(qS.ce);const n=new f8(e);return this.mr.forEachTarget(t,(s=>n.Ar(s.sequenceNumber))).next((()=>this.mr.pr(t,(s=>n.Ar(s))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.mr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),Zt.resolve(f2)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f2):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let n,s,r,u,f,d,m;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,u=Date.now(),this.nthSequenceNumber(t,s)))).next((y=>(n=y,f=Date.now(),this.removeTargets(t,n,e)))).next((y=>(r=y,d=Date.now(),this.removeOrphanedDocuments(t,n)))).next((y=>(m=Date.now(),cp()<=qn.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(f-u)+`ms
	Removed ${r} targets in `+(d-f)+`ms
	Removed ${y} documents in `+(m-d)+`ms
Total Duration: ${m-_}ms`),Zt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:y}))))}}function m8(i,t){return new p8(i,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(){this.changes=new Hf((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,wa.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?Zt.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(t,e,n,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=s}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(n=s,this.remoteDocumentCache.getEntry(t,e)))).next((s=>(n!==null&&jg(n.mutation,s,nl.empty(),Ri.now()),s)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.getLocalViewOfDocuments(t,n,Pn()).next((()=>n))))}getLocalViewOfDocuments(t,e,n=Pn()){const s=Rf();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,n).next((r=>{let u=Dg();return r.forEach(((f,d)=>{u=u.insert(f,d.overlayedDocument)})),u}))))}getOverlayedDocuments(t,e){const n=Rf();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Pn())))}populateOverlays(t,e,n){const s=[];return n.forEach((r=>{e.has(r)||s.push(r)})),this.documentOverlayCache.getOverlays(t,s).next((r=>{r.forEach(((u,f)=>{e.set(u,f)}))}))}computeViews(t,e,n,s){let r=Ku();const u=Xg(),f=(function(){return Xg()})();return e.forEach(((d,m)=>{const _=n.get(m.key);s.has(m.key)&&(_===void 0||_.mutation instanceof Gf)?r=r.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),jg(_.mutation,m,_.mutation.getFieldMask(),Ri.now())):u.set(m.key,nl.empty())})),this.recalculateAndSaveOverlays(t,r).next((d=>(d.forEach(((m,_)=>u.set(m,_))),e.forEach(((m,_)=>f.set(m,new _8(_,u.get(m)??null)))),f)))}recalculateAndSaveOverlays(t,e){const n=Xg();let s=new qi(((u,f)=>u-f)),r=Pn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((u=>{for(const f of u)f.keys().forEach((d=>{const m=e.get(d);if(m===null)return;let _=n.get(d)||nl.empty();_=f.applyToLocalView(m,_),n.set(d,_);const y=(s.get(f.batchId)||Pn()).add(d);s=s.insert(f.batchId,y)}))})).next((()=>{const u=[],f=s.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),m=d.key,_=d.value,y=$3();_.forEach((S=>{if(!r.has(S)){const T=aD(e.get(S),n.get(S));T!==null&&y.set(S,T),r=r.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(t,m,y))}return Zt.waitFor(u)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.recalculateAndSaveOverlays(t,n)))}getDocumentsMatchingQuery(t,e,n,s){return(function(u){return Ge.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):W3(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,s):this.getDocumentsMatchingCollectionQuery(t,e,n,s)}getNextDocuments(t,e,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,s).next((r=>{const u=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,s-r.size):Zt.resolve(Rf());let f=d_,d=r;return u.next((m=>Zt.forEach(m,((_,y)=>(f<y.largestBatchId&&(f=y.largestBatchId),r.get(_)?Zt.resolve():this.remoteDocumentCache.getEntry(t,_).next((S=>{d=d.insert(_,S)}))))).next((()=>this.populateOverlays(t,m,r))).next((()=>this.computeViews(t,d,m,Pn()))).next((_=>({batchId:f,changes:J3(_)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ge(e)).next((n=>{let s=Dg();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,s){const r=e.collectionGroup;let u=Dg();return this.indexManager.getCollectionParents(t,r).next((f=>Zt.forEach(f,(d=>{const m=(function(y,S){return new I_(S,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(e,d.child(r));return this.getDocumentsMatchingCollectionQuery(t,m,n,s).next((_=>{_.forEach(((y,S)=>{u=u.insert(y,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(t,e,n,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((u=>(r=u,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,s)))).next((u=>{r.forEach(((d,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,wa.newInvalidDocument(_)))}));let f=Dg();return u.forEach(((d,m)=>{const _=r.get(d);_!==void 0&&jg(_.mutation,m,nl.empty(),Ri.now()),WS(e,m)&&(f=f.insert(d,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return Zt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(s){return{id:s.id,version:s.version,createTime:Kl(s.createTime)}})(e)),Zt.resolve()}getNamedQuery(t,e){return Zt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(s){return{name:s.name,query:l8(s.bundledQuery),readTime:Kl(s.readTime)}})(e)),Zt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(){this.overlays=new qi(Ge.comparator),this.qr=new Map}getOverlay(t,e){return Zt.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Rf();return Zt.forEach(e,(s=>this.getOverlay(t,s).next((r=>{r!==null&&n.set(s,r)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((s,r)=>{this.St(t,e,r)})),Zt.resolve()}removeOverlaysForBatchId(t,e,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(n)),Zt.resolve()}getOverlaysForCollection(t,e,n){const s=Rf(),r=e.length+1,u=new Ge(e.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const d=f.getNext().value,m=d.getKey();if(!e.isPrefixOf(m.path))break;m.path.length===r&&d.largestBatchId>n&&s.set(d.getKey(),d)}return Zt.resolve(s)}getOverlaysForCollectionGroup(t,e,n,s){let r=new qi(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===e&&m.largestBatchId>n){let _=r.get(m.largestBatchId);_===null&&(_=Rf(),r=r.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const f=Rf(),d=r.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,_)=>f.set(m,_))),!(f.size()>=s)););return Zt.resolve(f)}St(t,e,n){const s=this.overlays.get(n.key);if(s!==null){const u=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new VH(e,n));let r=this.qr.get(e);r===void 0&&(r=Pn(),this.qr.set(e,r)),this.qr.set(e,r.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(){this.sessionToken=sa.EMPTY_BYTE_STRING}getSessionToken(t){return Zt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Zt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.Qr=new Ms(Vs.$r),this.Ur=new Ms(Vs.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const n=new Vs(t,e);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,e){t.forEach((n=>this.addReference(n,e)))}removeReference(t,e){this.Gr(new Vs(t,e))}zr(t,e){t.forEach((n=>this.removeReference(n,e)))}jr(t){const e=new Ge(new Si([])),n=new Vs(e,t),s=new Vs(e,t+1),r=[];return this.Ur.forEachInRange([n,s],(u=>{this.Gr(u),r.push(u.key)})),r}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new Ge(new Si([])),n=new Vs(e,t),s=new Vs(e,t+1);let r=Pn();return this.Ur.forEachInRange([n,s],(u=>{r=r.add(u.key)})),r}containsKey(t){const e=new Vs(t,0),n=this.Qr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class Vs{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return Ge.comparator(t.key,e.key)||Ln(t.Yr,e.Yr)}static Kr(t,e){return Ln(t.Yr,e.Yr)||Ge.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Ms(Vs.$r)}checkEmpty(t){return Zt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new zH(r,e,n,s);this.mutationQueue.push(u);for(const f of s)this.Zr=this.Zr.add(new Vs(f.key,r)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return Zt.resolve(u)}lookupMutationBatch(t,e){return Zt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,s=this.ei(n),r=s<0?0:s;return Zt.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Zt.resolve(this.mutationQueue.length===0?Wb:this.tr-1)}getAllMutationBatches(t){return Zt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Vs(e,0),s=new Vs(e,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([n,s],(u=>{const f=this.Xr(u.Yr);r.push(f)})),Zt.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Ms(Ln);return e.forEach((s=>{const r=new Vs(s,0),u=new Vs(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,u],(f=>{n=n.add(f.Yr)}))})),Zt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,s=n.length+1;let r=n;Ge.isDocumentKey(r)||(r=r.child(""));const u=new Vs(new Ge(r),0);let f=new Ms(Ln);return this.Zr.forEachWhile((d=>{const m=d.key.path;return!!n.isPrefixOf(m)&&(m.length===s&&(f=f.add(d.Yr)),!0)}),u),Zt.resolve(this.ti(f))}ti(t){const e=[];return t.forEach((n=>{const s=this.Xr(n);s!==null&&e.push(s)})),e}removeMutationBatch(t,e){ai(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Zt.forEach(e.mutations,(s=>{const r=new Vs(s.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Zr=n}))}ir(t){}containsKey(t,e){const n=new Vs(e,0),s=this.Zr.firstAfterOrEqual(n);return Zt.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,Zt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(t){this.ri=t,this.docs=(function(){return new qi(Ge.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,s=this.docs.get(n),r=s?s.size:0,u=this.ri(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:u}),this.size+=u-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Zt.resolve(n?n.document.mutableCopy():wa.newInvalidDocument(e))}getEntries(t,e){let n=Ku();return e.forEach((s=>{const r=this.docs.get(s);n=n.insert(s,r?r.document.mutableCopy():wa.newInvalidDocument(s))})),Zt.resolve(n)}getDocumentsMatchingQuery(t,e,n,s){let r=Ku();const u=e.path,f=new Ge(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:m,value:{document:_}}=d.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||JF(ZF(_),n)<=0||(s.has(_.key)||WS(e,_))&&(r=r.insert(_.key,_.mutableCopy()))}return Zt.resolve(r)}getAllFromCollectionGroup(t,e,n,s){$e(9500)}ii(t,e){return Zt.forEach(this.docs,(n=>e(n)))}newChangeBuffer(t){return new b8(this)}getSize(t){return Zt.resolve(this.size)}}class b8 extends g8{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?e.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(n)})),Zt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(t){this.persistence=t,this.si=new Hf((e=>Zb(e)),Jb),this.lastRemoteSnapshotVersion=un.min(),this.highestTargetId=0,this.oi=0,this._i=new i1,this.targetCount=0,this.ai=Bp.ur()}forEachTarget(t,e){return this.si.forEach(((n,s)=>e(s))),Zt.resolve()}getLastRemoteSnapshotVersion(t){return Zt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Zt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Zt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.oi&&(this.oi=e),Zt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Bp(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,Zt.resolve()}updateTargetData(t,e){return this.Pr(e),Zt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,Zt.resolve()}removeTargets(t,e,n){let s=0;const r=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=e&&n.get(f.targetId)===null&&(this.si.delete(u),r.push(this.removeMatchingKeysForTargetId(t,f.targetId)),s++)})),Zt.waitFor(r).next((()=>s))}getTargetCount(t){return Zt.resolve(this.targetCount)}getTargetData(t,e){const n=this.si.get(e)||null;return Zt.resolve(n)}addMatchingKeys(t,e,n){return this._i.Wr(e,n),Zt.resolve()}removeMatchingKeys(t,e,n){this._i.zr(e,n);const s=this.persistence.referenceDelegate,r=[];return s&&e.forEach((u=>{r.push(s.markPotentiallyOrphaned(t,u))})),Zt.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),Zt.resolve()}getMatchingKeysForTargetId(t,e){const n=this._i.Hr(e);return Zt.resolve(n)}containsKey(t,e){return Zt.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(t,e){this.ui={},this.overlays={},this.ci=new qS(0),this.li=!1,this.li=!0,this.hi=new x8,this.referenceDelegate=t(this),this.Pi=new M8(this),this.indexManager=new u8,this.remoteDocumentCache=(function(s){return new T8(s)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new o8(e),this.Ii=new v8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new S8,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.ui[t.toKey()];return n||(n=new E8(e,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,n){Re("MemoryPersistence","Starting transaction:",t);const s=new A8(this.ci.next());return this.referenceDelegate.Ei(),n(s).next((r=>this.referenceDelegate.di(s).next((()=>r)))).toPromise().then((r=>(s.raiseOnCommittedEvent(),r)))}Ai(t,e){return Zt.or(Object.values(this.ui).map((n=>()=>n.containsKey(t,e))))}}class A8 extends tH{constructor(t){super(),this.currentSequenceNumber=t}}class s1{constructor(t){this.persistence=t,this.Ri=new i1,this.Vi=null}static mi(t){return new s1(t)}get fi(){if(this.Vi)return this.Vi;throw $e(60996)}addReference(t,e,n){return this.Ri.addReference(n,e),this.fi.delete(n.toString()),Zt.resolve()}removeReference(t,e,n){return this.Ri.removeReference(n,e),this.fi.add(n.toString()),Zt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),Zt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((s=>this.fi.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((s=>{s.forEach((r=>this.fi.add(r.toString())))})).next((()=>n.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Zt.forEach(this.fi,(n=>{const s=Ge.fromPath(n);return this.gi(t,s).next((r=>{r||e.removeEntry(s,un.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((n=>{n?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return Zt.or([()=>Zt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class sS{constructor(t,e){this.persistence=t,this.pi=new Hf((n=>iH(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=m8(this,e)}static mi(t,e){return new sS(t,e)}Ei(){}di(t){return Zt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((n=>e.next((s=>n+s))))}wr(t){let e=0;return this.pr(t,(n=>{e++})).next((()=>e))}pr(t,e){return Zt.forEach(this.pi,((n,s)=>this.br(t,n,s).next((r=>r?Zt.resolve():e(s)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(t,(u=>this.br(t,u,e).next((f=>{f||(n++,r.removeEntry(u,un.min()))})))).next((()=>r.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),Zt.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),Zt.resolve()}removeReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),Zt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),Zt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Wv(t.data.value)),e}br(t,e,n){return Zt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.pi.get(e);return Zt.resolve(s!==void 0&&s>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(t,e,n,s){this.targetId=t,this.fromCache=e,this.Es=n,this.ds=s}static As(t,e){let n=Pn(),s=Pn();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new a1(t,e.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return v6()?8:eH(_6())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,n,s){const r={result:null};return this.ys(t,e).next((u=>{r.result=u})).next((()=>{if(!r.result)return this.ws(t,e,s,n).next((u=>{r.result=u}))})).next((()=>{if(r.result)return;const u=new R8;return this.Ss(t,e,u).next((f=>{if(r.result=f,this.Vs)return this.bs(t,e,u,f.size)}))})).next((()=>r.result))}bs(t,e,n,s){return n.documentReadCount<this.fs?(cp()<=qn.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",hp(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Zt.resolve()):(cp()<=qn.DEBUG&&Re("QueryEngine","Query:",hp(e),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(cp()<=qn.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",hp(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Wl(e))):Zt.resolve())}ys(t,e){if(n2(e))return Zt.resolve(null);let n=Wl(e);return this.indexManager.getIndexType(t,n).next((s=>s===0?null:(e.limit!==null&&s===1&&(e=FT(e,null,"F"),n=Wl(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const u=Pn(...r);return this.ps.getDocuments(t,u).next((f=>this.indexManager.getMinOffset(t,n).next((d=>{const m=this.Ds(e,f);return this.Cs(e,m,u,d.readTime)?this.ys(t,FT(e,null,"F")):this.vs(t,m,e,d)}))))})))))}ws(t,e,n,s){return n2(e)||s.isEqual(un.min())?Zt.resolve(null):this.ps.getDocuments(t,n).next((r=>{const u=this.Ds(e,r);return this.Cs(e,u,n,s)?Zt.resolve(null):(cp()<=qn.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hp(e)),this.vs(t,u,e,QF(s,d_)).next((f=>f)))}))}Ds(t,e){let n=new Ms(Q3(t));return e.forEach(((s,r)=>{WS(t,r)&&(n=n.add(r))})),n}Cs(t,e,n,s){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const r=t.limitType==="F"?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(t,e,n){return cp()<=qn.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",hp(e)),this.ps.getDocumentsMatchingQuery(t,e,oh.min(),n)}vs(t,e,n,s){return this.ps.getDocumentsMatchingQuery(t,n,s).next((r=>(e.forEach((u=>{r=r.insert(u.key,u)})),r)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="LocalStore",C8=3e8;class D8{constructor(t,e,n,s){this.persistence=t,this.Fs=e,this.serializer=s,this.Ms=new qi(Ln),this.xs=new Hf((r=>Zb(r)),Jb),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new y8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function N8(i,t,e,n){return new D8(i,t,e,n)}async function SD(i,t){const e=hn(i);return await e.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return e.mutationQueue.getAllMutationBatches(n).next((r=>(s=r,e.Bs(t),e.mutationQueue.getAllMutationBatches(n)))).next((r=>{const u=[],f=[];let d=Pn();for(const m of s){u.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}for(const m of r){f.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}return e.localDocuments.getDocuments(n,d).next((m=>({Ls:m,removedBatchIds:u,addedBatchIds:f})))}))}))}function I8(i,t){const e=hn(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=t.batch.keys(),r=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,d,m,_){const y=m.batch,S=y.keys();let T=Zt.resolve();return S.forEach((R=>{T=T.next((()=>_.getEntry(d,R))).next((C=>{const w=m.docVersions.get(R);ai(w!==null,48541),C.version.compareTo(w)<0&&(y.applyToRemoteDocument(C,m),C.isValidDocument()&&(C.setReadTime(m.commitVersion),_.addEntry(C)))}))})),T.next((()=>f.mutationQueue.removeMutationBatch(d,y)))})(e,n,t,r).next((()=>r.apply(n))).next((()=>e.mutationQueue.performConsistencyCheck(n))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(n,s,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(f){let d=Pn();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(d=d.add(f.batch.mutations[m].key));return d})(t)))).next((()=>e.localDocuments.getDocuments(n,s)))}))}function xD(i){const t=hn(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function U8(i,t){const e=hn(i),n=t.snapshotVersion;let s=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const u=e.Ns.newChangeBuffer({trackRemovals:!0});s=e.Ms;const f=[];t.targetChanges.forEach(((_,y)=>{const S=s.get(y);if(!S)return;f.push(e.Pi.removeMatchingKeys(r,_.removedDocuments,y).next((()=>e.Pi.addMatchingKeys(r,_.addedDocuments,y))));let T=S.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(y)!==null?T=T.withResumeToken(sa.EMPTY_BYTE_STRING,un.min()).withLastLimboFreeSnapshotVersion(un.min()):_.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(_.resumeToken,n)),s=s.insert(y,T),(function(C,w,M){return C.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=C8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(S,T,_)&&f.push(e.Pi.updateTargetData(r,T))}));let d=Ku(),m=Pn();if(t.documentUpdates.forEach((_=>{t.resolvedLimboDocuments.has(_)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(r,_))})),f.push(O8(r,u,t.documentUpdates).next((_=>{d=_.ks,m=_.qs}))),!n.isEqual(un.min())){const _=e.Pi.getLastRemoteSnapshotVersion(r).next((y=>e.Pi.setTargetsMetadata(r,r.currentSequenceNumber,n)));f.push(_)}return Zt.waitFor(f).next((()=>u.apply(r))).next((()=>e.localDocuments.getLocalViewOfDocuments(r,d,m))).next((()=>d))})).then((r=>(e.Ms=s,r)))}function O8(i,t,e){let n=Pn(),s=Pn();return e.forEach((r=>n=n.add(r))),t.getEntries(i,n).next((r=>{let u=Ku();return e.forEach(((f,d)=>{const m=r.get(f);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(f)),d.isNoDocument()&&d.version.isEqual(un.min())?(t.removeEntry(f,d.readTime),u=u.insert(f,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(d),u=u.insert(f,d)):Re(r1,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",d.version)})),{ks:u,qs:s}}))}function L8(i,t){const e=hn(i);return e.persistence.runTransaction("Get next mutation batch","readonly",(n=>(t===void 0&&(t=Wb),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t))))}function P8(i,t){const e=hn(i);return e.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return e.Pi.getTargetData(n,t).next((r=>r?(s=r,Zt.resolve(s)):e.Pi.allocateTargetId(n).next((u=>(s=new Jc(t,u,"TargetPurposeListen",n.currentSequenceNumber),e.Pi.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=e.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(n.targetId,n),e.xs.set(t,n.targetId)),n}))}async function XT(i,t,e){const n=hn(i),s=n.Ms.get(t),r=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",r,(u=>n.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Jp(u))throw u;Re(r1,`Failed to update sequence numbers for target ${t}: ${u}`)}n.Ms=n.Ms.remove(t),n.xs.delete(s.target)}function m2(i,t,e){const n=hn(i);let s=un.min(),r=Pn();return n.persistence.runTransaction("Execute query","readwrite",(u=>(function(d,m,_){const y=hn(d),S=y.xs.get(_);return S!==void 0?Zt.resolve(y.Ms.get(S)):y.Pi.getTargetData(m,_)})(n,u,Wl(t)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(u,f.targetId).next((d=>{r=d}))})).next((()=>n.Fs.getDocumentsMatchingQuery(u,t,e?s:un.min(),e?r:Pn()))).next((f=>(z8(n,EH(t),f),{documents:f,Qs:r})))))}function z8(i,t,e){let n=i.Os.get(t)||un.min();e.forEach(((s,r)=>{r.readTime.compareTo(n)>0&&(n=r.readTime)})),i.Os.set(t,n)}class g2{constructor(){this.activeTargetIds=wH()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class V8{constructor(){this.Mo=new g2,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,n){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new g2,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="ConnectivityMonitor";class y2{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Re(_2,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Re(_2,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fv=null;function jT(){return Fv===null?Fv=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fv++,"0x"+Fv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="RestConnection",F8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class H8{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===Z0?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(t,e,n,s,r){const u=jT(),f=this.zo(t,e.toUriEncodedString());Re(iT,`Sending RPC '${t}' ${u}:`,f,n);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,r);const{host:m}=new URL(f),_=qb(m);return this.Jo(t,f,d,n,_).then((y=>(Re(iT,`Received RPC '${t}' ${u}: `,y),y)),(y=>{throw Lp(iT,`RPC '${t}' ${u} failed with error: `,y,"url: ",f,"request:",n),y}))}Ho(t,e,n,s,r,u){return this.Go(t,e,n,s,r)}jo(t,e,n){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qp})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((s,r)=>t[r]=s)),n&&n.headers.forEach(((s,r)=>t[r]=s))}zo(t,e){const n=F8[t];return`${this.Uo}/v1/${e}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="WebChannelConnection";class k8 extends H8{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,n,s,r){const u=jT();return new Promise(((f,d)=>{const m=new E3;m.setWithCredentials(!0),m.listenOnce(T3.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Yv.NO_ERROR:const y=m.getResponseJson();Re(Ma,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(y)),f(y);break;case Yv.TIMEOUT:Re(Ma,`RPC '${t}' ${u} timed out`),d(new we(Wt.DEADLINE_EXCEEDED,"Request time out"));break;case Yv.HTTP_ERROR:const S=m.getStatus();if(Re(Ma,`RPC '${t}' ${u} failed with status:`,S,"response text:",m.getResponseText()),S>0){let T=m.getResponseJson();Array.isArray(T)&&(T=T[0]);const R=T?.error;if(R&&R.status&&R.message){const C=(function(M){const O=M.toLowerCase().replace(/_/g,"-");return Object.values(Wt).indexOf(O)>=0?O:Wt.UNKNOWN})(R.status);d(new we(C,R.message))}else d(new we(Wt.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new we(Wt.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{l_:t,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Re(Ma,`RPC '${t}' ${u} completed.`)}}));const _=JSON.stringify(s);Re(Ma,`RPC '${t}' ${u} sending request:`,s),m.send(e,"POST",_,n,15)}))}T_(t,e,n){const s=jT(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],u=A3(),f=M3(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,e,n),d.encodeInitMessageHeaders=!0;const _=r.join("");Re(Ma,`Creating RPC '${t}' stream ${s}: ${_}`,d);const y=u.createWebChannel(_,d);this.I_(y);let S=!1,T=!1;const R=new G8({Yo:w=>{T?Re(Ma,`Not sending because RPC '${t}' stream ${s} is closed:`,w):(S||(Re(Ma,`Opening RPC '${t}' stream ${s} transport.`),y.open(),S=!0),Re(Ma,`RPC '${t}' stream ${s} sending:`,w),y.send(w))},Zo:()=>y.close()}),C=(w,M,O)=>{w.listen(M,(z=>{try{O(z)}catch(V){setTimeout((()=>{throw V}),0)}}))};return C(y,Cg.EventType.OPEN,(()=>{T||(Re(Ma,`RPC '${t}' stream ${s} transport opened.`),R.o_())})),C(y,Cg.EventType.CLOSE,(()=>{T||(T=!0,Re(Ma,`RPC '${t}' stream ${s} transport closed`),R.a_(),this.E_(y))})),C(y,Cg.EventType.ERROR,(w=>{T||(T=!0,Lp(Ma,`RPC '${t}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),R.a_(new we(Wt.UNAVAILABLE,"The operation could not be completed")))})),C(y,Cg.EventType.MESSAGE,(w=>{if(!T){const M=w.data[0];ai(!!M,16349);const O=M,z=O?.error||O[0]?.error;if(z){Re(Ma,`RPC '${t}' stream ${s} received error:`,z);const V=z.status;let j=(function(P){const D=ds[P];if(D!==void 0)return lD(D)})(V),q=z.message;j===void 0&&(j=Wt.INTERNAL,q="Unknown error status: "+V+" with message "+z.message),T=!0,R.a_(new we(j,q)),y.close()}else Re(Ma,`RPC '${t}' stream ${s} received:`,M),R.u_(M)}})),C(f,b3.STAT_EVENT,(w=>{w.stat===UT.PROXY?Re(Ma,`RPC '${t}' stream ${s} detected buffering proxy`):w.stat===UT.NOPROXY&&Re(Ma,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function sT(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(i){return new YH(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(t,e,n=1e3,s=1.5,r=6e4){this.Mi=t,this.timerId=e,this.d_=n,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-n);s>0&&Re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="PersistentStream";class TD{constructor(t,e,n,s,r,u,f,d){this.Mi=t,this.S_=n,this.b_=s,this.connection=r,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ED(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===Wt.RESOURCE_EXHAUSTED?(Wu(e.toString()),Wu("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===Wt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.D_===e&&this.G_(n,s)}),(n=>{t((()=>{const s=new we(Wt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)}))}))}G_(t,e){const n=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{n((()=>this.z_(s)))})),this.stream.onMessage((s=>{n((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Re(v2,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(Re(v2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class q8 extends TD{constructor(t,e,n,s,r,u){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,s,u),this.serializer=r}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=QH(this.serializer,t),n=(function(r){if(!("targetChange"in r))return un.min();const u=r.targetChange;return u.targetIds&&u.targetIds.length?un.min():u.readTime?Kl(u.readTime):un.min()})(t);return this.listener.H_(e,n)}Y_(t){const e={};e.database=qT(this.serializer),e.addTarget=(function(r,u){let f;const d=u.target;if(f=VT(d)?{documents:$H(r,d)}:{query:t8(r,d).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=hD(r,u.resumeToken);const m=HT(r,u.expectedCount);m!==null&&(f.expectedCount=m)}else if(u.snapshotVersion.compareTo(un.min())>0){f.readTime=iS(r,u.snapshotVersion.toTimestamp());const m=HT(r,u.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,t);const n=n8(this.serializer,t);n&&(e.labels=n),this.q_(e)}Z_(t){const e={};e.database=qT(this.serializer),e.removeTarget=t,this.q_(e)}}class X8 extends TD{constructor(t,e,n,s,r,u){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,s,u),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return ai(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ai(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ai(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=JH(t.writeResults,t.commitTime),n=Kl(t.commitTime);return this.listener.na(n,e)}ra(){const t={};t.database=qT(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((n=>ZH(this.serializer,n)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{}class Y8 extends j8{constructor(t,e,n,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new we(Wt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,u])=>this.connection.Go(t,GT(e,n),s,r,u))).catch((r=>{throw r.name==="FirebaseError"?(r.code===Wt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new we(Wt.UNKNOWN,r.toString())}))}Ho(t,e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(t,GT(e,n),s,u,f,r))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Wt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new we(Wt.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class W8{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wu(e),this.aa=!1):Re("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="RemoteStore";class K8{constructor(t,e,n,s,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((u=>{n.enqueueAndForget((async()=>{kf(this)&&(Re(Pf,"Restarting streams for network reachability change."),await(async function(d){const m=hn(d);m.Ea.add(4),await L_(m),m.Ra.set("Unknown"),m.Ea.delete(4),await $S(m)})(this))}))})),this.Ra=new W8(n,s)}}async function $S(i){if(kf(i))for(const t of i.da)await t(!0)}async function L_(i){for(const t of i.da)await t(!1)}function bD(i,t){const e=hn(i);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),c1(e)?u1(e):$p(e).O_()&&l1(e,t))}function o1(i,t){const e=hn(i),n=$p(e);e.Ia.delete(t),n.O_()&&MD(e,t),e.Ia.size===0&&(n.O_()?n.L_():kf(e)&&e.Ra.set("Unknown"))}function l1(i,t){if(i.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(un.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}$p(i).Y_(t)}function MD(i,t){i.Va.Ue(t),$p(i).Z_(t)}function u1(i){i.Va=new kH({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),$p(i).start(),i.Ra.ua()}function c1(i){return kf(i)&&!$p(i).x_()&&i.Ia.size>0}function kf(i){return hn(i).Ea.size===0}function AD(i){i.Va=void 0}async function Q8(i){i.Ra.set("Online")}async function Z8(i){i.Ia.forEach(((t,e)=>{l1(i,t)}))}async function J8(i,t){AD(i),c1(i)?(i.Ra.ha(t),u1(i)):i.Ra.set("Unknown")}async function $8(i,t,e){if(i.Ra.set("Online"),t instanceof cD&&t.state===2&&t.cause)try{await(async function(s,r){const u=r.cause;for(const f of r.targetIds)s.Ia.has(f)&&(await s.remoteSyncer.rejectListen(f,u),s.Ia.delete(f),s.Va.removeTarget(f))})(i,t)}catch(n){Re(Pf,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await aS(i,n)}else if(t instanceof Zv?i.Va.Ze(t):t instanceof uD?i.Va.st(t):i.Va.tt(t),!e.isEqual(un.min()))try{const n=await xD(i.localStore);e.compareTo(n)>=0&&await(function(r,u){const f=r.Va.Tt(u);return f.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const _=r.Ia.get(m);_&&r.Ia.set(m,_.withResumeToken(d.resumeToken,u))}})),f.targetMismatches.forEach(((d,m)=>{const _=r.Ia.get(d);if(!_)return;r.Ia.set(d,_.withResumeToken(sa.EMPTY_BYTE_STRING,_.snapshotVersion)),MD(r,d);const y=new Jc(_.target,d,m,_.sequenceNumber);l1(r,y)})),r.remoteSyncer.applyRemoteEvent(f)})(i,e)}catch(n){Re(Pf,"Failed to raise snapshot:",n),await aS(i,n)}}async function aS(i,t,e){if(!Jp(t))throw t;i.Ea.add(1),await L_(i),i.Ra.set("Offline"),e||(e=()=>xD(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Re(Pf,"Retrying IndexedDB access"),await e(),i.Ea.delete(1),await $S(i)}))}function RD(i,t){return t().catch((e=>aS(i,e,t)))}async function tx(i){const t=hn(i),e=hh(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Wb;for(;t9(t);)try{const s=await L8(t.localStore,n);if(s===null){t.Ta.length===0&&e.L_();break}n=s.batchId,e9(t,s)}catch(s){await aS(t,s)}wD(t)&&CD(t)}function t9(i){return kf(i)&&i.Ta.length<10}function e9(i,t){i.Ta.push(t);const e=hh(i);e.O_()&&e.X_&&e.ea(t.mutations)}function wD(i){return kf(i)&&!hh(i).x_()&&i.Ta.length>0}function CD(i){hh(i).start()}async function n9(i){hh(i).ra()}async function i9(i){const t=hh(i);for(const e of i.Ta)t.ea(e.mutations)}async function s9(i,t,e){const n=i.Ta.shift(),s=t1.from(n,t,e);await RD(i,(()=>i.remoteSyncer.applySuccessfulWrite(s))),await tx(i)}async function a9(i,t){t&&hh(i).X_&&await(async function(n,s){if((function(u){return FH(u)&&u!==Wt.ABORTED})(s.code)){const r=n.Ta.shift();hh(n).B_(),await RD(n,(()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s))),await tx(n)}})(i,t),wD(i)&&CD(i)}async function S2(i,t){const e=hn(i);e.asyncQueue.verifyOperationInProgress(),Re(Pf,"RemoteStore received new credentials");const n=kf(e);e.Ea.add(3),await L_(e),n&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await $S(e)}async function r9(i,t){const e=hn(i);t?(e.Ea.delete(2),await $S(e)):t||(e.Ea.add(2),await L_(e),e.Ra.set("Unknown"))}function $p(i){return i.ma||(i.ma=(function(e,n,s){const r=hn(e);return r.sa(),new q8(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(i.datastore,i.asyncQueue,{Xo:Q8.bind(null,i),t_:Z8.bind(null,i),r_:J8.bind(null,i),H_:$8.bind(null,i)}),i.da.push((async t=>{t?(i.ma.B_(),c1(i)?u1(i):i.Ra.set("Unknown")):(await i.ma.stop(),AD(i))}))),i.ma}function hh(i){return i.fa||(i.fa=(function(e,n,s){const r=hn(e);return r.sa(),new X8(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:n9.bind(null,i),r_:a9.bind(null,i),ta:i9.bind(null,i),na:s9.bind(null,i)}),i.da.push((async t=>{t?(i.fa.B_(),await tx(i)):(await i.fa.stop(),i.Ta.length>0&&(Re(Pf,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(t,e,n,s,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=s,this.removalCallback=r,this.deferred=new nh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,s,r){const u=Date.now()+n,f=new h1(t,e,u,s,r);return f.start(n),f}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(Wt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function f1(i,t){if(Wu("AsyncQueue",`${t}: ${i}`),Jp(i))return new we(Wt.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{static emptySet(t){return new Sp(t.comparator)}constructor(t){this.comparator=t?(e,n)=>t(e,n)||Ge.comparator(e.key,n.key):(e,n)=>Ge.comparator(e.key,n.key),this.keyedMap=Dg(),this.sortedSet=new qi(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Sp)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,r=n.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new Sp;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this.ga=new qi(Ge.comparator)}track(t){const e=t.doc.key,n=this.ga.get(e);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(e,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(e):t.type===1&&n.type===2?this.ga=this.ga.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):$e(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Fp{constructor(t,e,n,s,r,u,f,d,m){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=r,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(t,e,n,s,r){const u=[];return e.forEach((f=>{u.push({type:0,doc:f})})),new Fp(t,e,Sp.emptySet(e),u,n,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&YS(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==n[s].type||!e[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class l9{constructor(){this.queries=E2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const s=hn(e),r=s.queries;s.queries=E2(),r.forEach(((u,f)=>{for(const d of f.Sa)d.onError(n)}))})(this,new we(Wt.ABORTED,"Firestore shutting down"))}}function E2(){return new Hf((i=>K3(i)),YS)}async function u9(i,t){const e=hn(i);let n=3;const s=t.query;let r=e.queries.get(s);r?!r.ba()&&t.Da()&&(n=2):(r=new o9,n=t.Da()?0:1);try{switch(n){case 0:r.wa=await e.onListen(s,!0);break;case 1:r.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(u){const f=f1(u,`Initialization of query '${hp(t.query)}' failed`);return void t.onError(f)}e.queries.set(s,r),r.Sa.push(t),t.va(e.onlineState),r.wa&&t.Fa(r.wa)&&d1(e)}async function c9(i,t){const e=hn(i),n=t.query;let s=3;const r=e.queries.get(n);if(r){const u=r.Sa.indexOf(t);u>=0&&(r.Sa.splice(u,1),r.Sa.length===0?s=t.Da()?0:1:!r.ba()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function h9(i,t){const e=hn(i);let n=!1;for(const s of t){const r=s.query,u=e.queries.get(r);if(u){for(const f of u.Sa)f.Fa(s)&&(n=!0);u.wa=s}}n&&d1(e)}function f9(i,t,e){const n=hn(i),s=n.queries.get(t);if(s)for(const r of s.Sa)r.onError(e);n.queries.delete(t)}function d1(i){i.Ca.forEach((t=>{t.next()}))}var YT,T2;(T2=YT||(YT={})).Ma="default",T2.Cache="cache";class d9{constructor(t,e,n){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const s of t.docChanges)s.type!==3&&n.push(s);t=new Fp(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const n=e!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Fp.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==YT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(t){this.key=t}}class ND{constructor(t){this.key=t}}class p9{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pn(),this.mutatedKeys=Pn(),this.eu=Q3(t),this.tu=new Sp(this.eu)}get nu(){return this.Ya}ru(t,e){const n=e?e.iu:new x2,s=e?e.tu:this.tu;let r=e?e.mutatedKeys:this.mutatedKeys,u=s,f=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((_,y)=>{const S=s.get(_),T=WS(this.query,y)?y:null,R=!!S&&this.mutatedKeys.has(S.key),C=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let w=!1;S&&T?S.data.isEqual(T.data)?R!==C&&(n.track({type:3,doc:T}),w=!0):this.su(S,T)||(n.track({type:2,doc:T}),w=!0,(d&&this.eu(T,d)>0||m&&this.eu(T,m)<0)&&(f=!0)):!S&&T?(n.track({type:0,doc:T}),w=!0):S&&!T&&(n.track({type:1,doc:S}),w=!0,(d||m)&&(f=!0)),w&&(T?(u=u.add(T),r=C?r.add(_):r.delete(_)):(u=u.delete(_),r=r.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),r=r.delete(_.key),n.track({type:1,doc:_})}return{tu:u,iu:n,Cs:f,mutatedKeys:r}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,s){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const u=t.iu.ya();u.sort(((_,y)=>(function(T,R){const C=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Rt:w})}};return C(T)-C(R)})(_.type,y.type)||this.eu(_.doc,y.doc))),this.ou(n),s=s??!1;const f=e&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,m=d!==this.Za;return this.Za=d,u.length!==0||m?{snapshot:new Fp(this.query,t.tu,r,u,t.mutatedKeys,d===0,m,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new x2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Pn(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const e=[];return t.forEach((n=>{this.Xa.has(n)||e.push(new ND(n))})),this.Xa.forEach((n=>{t.has(n)||e.push(new DD(n))})),e}cu(t){this.Ya=t.Qs,this.Xa=Pn();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Fp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const p1="SyncEngine";class m9{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class g9{constructor(t){this.key=t,this.hu=!1}}class _9{constructor(t,e,n,s,r,u){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Hf((f=>K3(f)),YS),this.Iu=new Map,this.Eu=new Set,this.du=new qi(Ge.comparator),this.Au=new Map,this.Ru=new i1,this.Vu={},this.mu=new Map,this.fu=Bp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function y9(i,t,e=!0){const n=zD(i);let s;const r=n.Tu.get(t);return r?(n.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await ID(n,t,e,!0),s}async function v9(i,t){const e=zD(i);await ID(e,t,!0,!1)}async function ID(i,t,e,n){const s=await P8(i.localStore,Wl(t)),r=s.targetId,u=i.sharedClientState.addLocalQueryTarget(r,e);let f;return n&&(f=await S9(i,t,r,u==="current",s.resumeToken)),i.isPrimaryClient&&e&&bD(i.remoteStore,s),f}async function S9(i,t,e,n,s){i.pu=(y,S,T)=>(async function(C,w,M,O){let z=w.view.ru(M);z.Cs&&(z=await m2(C.localStore,w.query,!1).then((({documents:L})=>w.view.ru(L,z))));const V=O&&O.targetChanges.get(w.targetId),j=O&&O.targetMismatches.get(w.targetId)!=null,q=w.view.applyChanges(z,C.isPrimaryClient,V,j);return M2(C,w.targetId,q.au),q.snapshot})(i,y,S,T);const r=await m2(i.localStore,t,!0),u=new p9(t,r.Qs),f=u.ru(r.documents),d=O_.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",s),m=u.applyChanges(f,i.isPrimaryClient,d);M2(i,e,m.au);const _=new m9(t,e,u);return i.Tu.set(t,_),i.Iu.has(e)?i.Iu.get(e).push(t):i.Iu.set(e,[t]),m.snapshot}async function x9(i,t,e){const n=hn(i),s=n.Tu.get(t),r=n.Iu.get(s.targetId);if(r.length>1)return n.Iu.set(s.targetId,r.filter((u=>!YS(u,t)))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await XT(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),e&&o1(n.remoteStore,s.targetId),WT(n,s.targetId)})).catch(Zp)):(WT(n,s.targetId),await XT(n.localStore,s.targetId,!0))}async function E9(i,t){const e=hn(i),n=e.Tu.get(t),s=e.Iu.get(n.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),o1(e.remoteStore,n.targetId))}async function T9(i,t,e){const n=D9(i);try{const s=await(function(u,f){const d=hn(u),m=Ri.now(),_=f.reduce(((T,R)=>T.add(R.key)),Pn());let y,S;return d.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let R=Ku(),C=Pn();return d.Ns.getEntries(T,_).next((w=>{R=w,R.forEach(((M,O)=>{O.isValidDocument()||(C=C.add(M))}))})).next((()=>d.localDocuments.getOverlayedDocuments(T,R))).next((w=>{y=w;const M=[];for(const O of f){const z=LH(O,y.get(O.key).overlayedDocument);z!=null&&M.push(new Gf(O.key,z,F3(z.value.mapValue),Gu.exists(!0)))}return d.mutationQueue.addMutationBatch(T,m,M,f)})).next((w=>{S=w;const M=w.applyToLocalDocumentSet(y,C);return d.documentOverlayCache.saveOverlays(T,w.batchId,M)}))})).then((()=>({batchId:S.batchId,changes:J3(y)})))})(n.localStore,t);n.sharedClientState.addPendingMutation(s.batchId),(function(u,f,d){let m=u.Vu[u.currentUser.toKey()];m||(m=new qi(Ln)),m=m.insert(f,d),u.Vu[u.currentUser.toKey()]=m})(n,s.batchId,e),await P_(n,s.changes),await tx(n.remoteStore)}catch(s){const r=f1(s,"Failed to persist write");e.reject(r)}}async function UD(i,t){const e=hn(i);try{const n=await U8(e.localStore,t);t.targetChanges.forEach(((s,r)=>{const u=e.Au.get(r);u&&(ai(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.hu=!0:s.modifiedDocuments.size>0?ai(u.hu,14607):s.removedDocuments.size>0&&(ai(u.hu,42227),u.hu=!1))})),await P_(e,n,t)}catch(n){await Zp(n)}}function b2(i,t,e){const n=hn(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const s=[];n.Tu.forEach(((r,u)=>{const f=u.view.va(t);f.snapshot&&s.push(f.snapshot)})),(function(u,f){const d=hn(u);d.onlineState=f;let m=!1;d.queries.forEach(((_,y)=>{for(const S of y.Sa)S.va(f)&&(m=!0)})),m&&d1(d)})(n.eventManager,t),s.length&&n.Pu.H_(s),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function b9(i,t,e){const n=hn(i);n.sharedClientState.updateQueryState(t,"rejected",e);const s=n.Au.get(t),r=s&&s.key;if(r){let u=new qi(Ge.comparator);u=u.insert(r,wa.newNoDocument(r,un.min()));const f=Pn().add(r),d=new ZS(un.min(),new Map,new qi(Ln),u,f);await UD(n,d),n.du=n.du.remove(r),n.Au.delete(t),m1(n)}else await XT(n.localStore,t,!1).then((()=>WT(n,t,e))).catch(Zp)}async function M9(i,t){const e=hn(i),n=t.batch.batchId;try{const s=await I8(e.localStore,t);LD(e,n,null),OD(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await P_(e,s)}catch(s){await Zp(s)}}async function A9(i,t,e){const n=hn(i);try{const s=await(function(u,f){const d=hn(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return d.mutationQueue.lookupMutationBatch(m,f).next((y=>(ai(y!==null,37113),_=y.keys(),d.mutationQueue.removeMutationBatch(m,y)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,_,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>d.localDocuments.getDocuments(m,_)))}))})(n.localStore,t);LD(n,t,e),OD(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await P_(n,s)}catch(s){await Zp(s)}}function OD(i,t){(i.mu.get(t)||[]).forEach((e=>{e.resolve()})),i.mu.delete(t)}function LD(i,t,e){const n=hn(i);let s=n.Vu[n.currentUser.toKey()];if(s){const r=s.get(t);r&&(e?r.reject(e):r.resolve(),s=s.remove(t)),n.Vu[n.currentUser.toKey()]=s}}function WT(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const n of i.Iu.get(t))i.Tu.delete(n),e&&i.Pu.yu(n,e);i.Iu.delete(t),i.isPrimaryClient&&i.Ru.jr(t).forEach((n=>{i.Ru.containsKey(n)||PD(i,n)}))}function PD(i,t){i.Eu.delete(t.path.canonicalString());const e=i.du.get(t);e!==null&&(o1(i.remoteStore,e),i.du=i.du.remove(t),i.Au.delete(e),m1(i))}function M2(i,t,e){for(const n of e)n instanceof DD?(i.Ru.addReference(n.key,t),R9(i,n)):n instanceof ND?(Re(p1,"Document no longer in limbo: "+n.key),i.Ru.removeReference(n.key,t),i.Ru.containsKey(n.key)||PD(i,n.key)):$e(19791,{wu:n})}function R9(i,t){const e=t.key,n=e.path.canonicalString();i.du.get(e)||i.Eu.has(n)||(Re(p1,"New document in limbo: "+e),i.Eu.add(n),m1(i))}function m1(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const e=new Ge(Si.fromString(t)),n=i.fu.next();i.Au.set(n,new g9(e)),i.du=i.du.insert(e,n),bD(i.remoteStore,new Jc(Wl(Y3(e.path)),n,"TargetPurposeLimboResolution",qS.ce))}}async function P_(i,t,e){const n=hn(i),s=[],r=[],u=[];n.Tu.isEmpty()||(n.Tu.forEach(((f,d)=>{u.push(n.pu(d,t,e).then((m=>{if((m||e)&&n.isPrimaryClient){const _=m?!m.fromCache:e?.targetChanges.get(d.targetId)?.current;n.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(m){s.push(m);const _=a1.As(d.targetId,m);r.push(_)}})))})),await Promise.all(u),n.Pu.H_(s),await(async function(d,m){const _=hn(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>Zt.forEach(m,(S=>Zt.forEach(S.Es,(T=>_.persistence.referenceDelegate.addReference(y,S.targetId,T))).next((()=>Zt.forEach(S.ds,(T=>_.persistence.referenceDelegate.removeReference(y,S.targetId,T)))))))))}catch(y){if(!Jp(y))throw y;Re(r1,"Failed to update sequence numbers: "+y)}for(const y of m){const S=y.targetId;if(!y.fromCache){const T=_.Ms.get(S),R=T.snapshotVersion,C=T.withLastLimboFreeSnapshotVersion(R);_.Ms=_.Ms.insert(S,C)}}})(n.localStore,r))}async function w9(i,t){const e=hn(i);if(!e.currentUser.isEqual(t)){Re(p1,"User change. New user:",t.toKey());const n=await SD(e.localStore,t);e.currentUser=t,(function(r,u){r.mu.forEach((f=>{f.forEach((d=>{d.reject(new we(Wt.CANCELLED,u))}))})),r.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await P_(e,n.Ls)}}function C9(i,t){const e=hn(i),n=e.Au.get(t);if(n&&n.hu)return Pn().add(n.key);{let s=Pn();const r=e.Iu.get(t);if(!r)return s;for(const u of r){const f=e.Tu.get(u);s=s.unionWith(f.view.nu)}return s}}function zD(i){const t=hn(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=UD.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=C9.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=b9.bind(null,t),t.Pu.H_=h9.bind(null,t.eventManager),t.Pu.yu=f9.bind(null,t.eventManager),t}function D9(i){const t=hn(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=M9.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=A9.bind(null,t),t}class rS{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=JS(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return N8(this.persistence,new w8,t.initialUser,this.serializer)}Cu(t){return new vD(s1.mi,this.serializer)}Du(t){return new V8}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rS.provider={build:()=>new rS};class N9 extends rS{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){ai(this.persistence.referenceDelegate instanceof sS,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new d8(n,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?vr.withCacheSize(this.cacheSizeBytes):vr.DEFAULT;return new vD((n=>sS.mi(n,e)),this.serializer)}}class KT{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>b2(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=w9.bind(null,this.syncEngine),await r9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new l9})()}createDatastore(t){const e=JS(t.databaseInfo.databaseId),n=(function(r){return new k8(r)})(t.databaseInfo);return(function(r,u,f,d){return new Y8(r,u,f,d)})(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return(function(n,s,r,u,f){return new K8(n,s,r,u,f)})(this.localStore,this.datastore,t.asyncQueue,(e=>b2(this.syncEngine,e,0)),(function(){return y2.v()?new y2:new B8})())}createSyncEngine(t,e){return(function(s,r,u,f,d,m,_){const y=new _9(s,r,u,f,d,m);return _&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const n=hn(e);Re(Pf,"RemoteStore shutting down."),n.Ea.add(5),await L_(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}KT.provider={build:()=>new KT};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Wu("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="FirestoreClient";class U9{constructor(t,e,n,s,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=s,this.user=Aa.UNAUTHENTICATED,this.clientId=Yb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,(async u=>{Re(fh,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(n,(u=>(Re(fh,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new nh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=f1(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function aT(i,t){i.asyncQueue.verifyOperationInProgress(),Re(fh,"Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener((async s=>{n.isEqual(s)||(await SD(t.localStore,s),n=s)})),t.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=t}async function A2(i,t){i.asyncQueue.verifyOperationInProgress();const e=await O9(i);Re(fh,"Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener((n=>S2(t.remoteStore,n))),i.setAppCheckTokenChangeListener(((n,s)=>S2(t.remoteStore,s))),i._onlineComponents=t}async function O9(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Re(fh,"Using user provided OfflineComponentProvider");try{await aT(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(s){return s.name==="FirebaseError"?s.code===Wt.FAILED_PRECONDITION||s.code===Wt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(e))throw e;Lp("Error using user provided cache. Falling back to memory cache: "+e),await aT(i,new rS)}}else Re(fh,"Using default OfflineComponentProvider"),await aT(i,new N9(void 0));return i._offlineComponents}async function VD(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Re(fh,"Using user provided OnlineComponentProvider"),await A2(i,i._uninitializedComponentsProvider._online)):(Re(fh,"Using default OnlineComponentProvider"),await A2(i,new KT))),i._onlineComponents}function L9(i){return VD(i).then((t=>t.syncEngine))}async function P9(i){const t=await VD(i),e=t.eventManager;return e.onListen=y9.bind(null,t.syncEngine),e.onUnlisten=x9.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=v9.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=E9.bind(null,t.syncEngine),e}function z9(i,t,e={}){const n=new nh;return i.asyncQueue.enqueueAndForget((async()=>(function(r,u,f,d,m){const _=new I9({next:S=>{_.Nu(),u.enqueueAndForget((()=>c9(r,y))),S.fromCache&&d.source==="server"?m.reject(new we(Wt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),y=new d9(f,_,{includeMetadataChanges:!0,qa:!0});return u9(r,y)})(await P9(i),i.asyncQueue,t,e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="firestore.googleapis.com",w2=!0;class C2{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new we(Wt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FD,this.ssl=w2}else this.host=t.host,this.ssl=t.ssl??w2;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=yD;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<h8)throw new we(Wt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}KF("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BD(t.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new we(Wt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new we(Wt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new we(Wt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ex{constructor(t,e,n,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(Wt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new we(Wt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C2(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new BF;switch(n.type){case"firstParty":return new kF(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new we(Wt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const n=R2.get(e);n&&(Re("ComponentProvider","Removing Datastore"),R2.delete(e),n.terminate())})(this),Promise.resolve()}}function V9(i,t,e,n={}){i=K0(i,ex);const s=qb(t),r=i._getSettings(),u={...r,emulatorOptions:i._getEmulatorOptions()},f=`${t}:${e}`;s&&(f6(`https://${f}`),g6("Firestore",!0)),r.host!==FD&&r.host!==f&&Lp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...r,host:f,ssl:s,emulatorOptions:n};if(!j0(d,u)&&(i._setSettings(d),n.mockUserToken)){let m,_;if(typeof n.mockUserToken=="string")m=n.mockUserToken,_=Aa.MOCK_USER;else{m=d6(n.mockUserToken,i._app?.options.projectId);const y=n.mockUserToken.sub||n.mockUserToken.user_id;if(!y)throw new we(Wt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Aa(y)}i._authCredentials=new FF(new w3(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new tm(this.firestore,t,this._query)}}class Fs{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ih(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Fs(this.firestore,t,this._key)}toJSON(){return{type:Fs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,n){if(N_(e,Fs._jsonSchema))return new Fs(t,n||null,new Ge(Si.fromString(e.referencePath)))}}Fs._jsonSchemaVersion="firestore/documentReference/1.0",Fs._jsonSchema={type:gs("string",Fs._jsonSchemaVersion),referencePath:gs("string")};class ih extends tm{constructor(t,e,n){super(t,e,Y3(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Fs(this.firestore,null,new Ge(t))}withConverter(t){return new ih(this.firestore,t,this._path)}}function D2(i,t,...e){if(i=Op(i),C3("collection","path",t),i instanceof ex){const n=Si.fromString(t,...e);return GR(n),new ih(i,null,n)}{if(!(i instanceof Fs||i instanceof ih))throw new we(Wt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Si.fromString(t,...e));return GR(n),new ih(i.firestore,null,n)}}function B9(i,t,...e){if(i=Op(i),arguments.length===1&&(t=Yb.newId()),C3("doc","path",t),i instanceof ex){const n=Si.fromString(t,...e);return HR(n),new Fs(i,null,new Ge(n))}{if(!(i instanceof Fs||i instanceof ih))throw new we(Wt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Si.fromString(t,...e));return HR(n),new Fs(i.firestore,i instanceof ih?i.converter:null,new Ge(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="AsyncQueue";class I2{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ED(this,"async_queue_retry"),this._c=()=>{const n=sT();n&&Re(N2,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const e=sT();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=sT();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new nh;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Jp(t))throw t;Re(N2,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((n=>{throw this.nc=n,this.rc=!1,Wu("INTERNAL UNHANDLED ERROR: ",U2(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=e,e}enqueueAfterDelay(t,e,n){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const s=h1.createAndSchedule(this,t,e,n,(r=>this.hc(r)));return this.tc.push(s),s}uc(){this.nc&&$e(47125,{Pc:U2(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,n)=>e.targetTimeMs-n.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function U2(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}class g1 extends ex{constructor(t,e,n,s){super(t,e,n,s),this.type="firestore",this._queue=new I2,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new I2(t),this._firestoreClient=void 0,await t}}}function F9(i,t){const e=typeof i=="object"?i:AF(),n=typeof i=="string"?i:Z0,s=xF(e,"firestore").getImmediate({identifier:n});if(!s._initialized){const r=c6("firestore");r&&V9(s,...r)}return s}function HD(i){if(i._terminated)throw new we(Wt.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||H9(i),i._firestoreClient}function H9(i){const t=i._freezeSettings(),e=(function(s,r,u,f){return new rH(s,r,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,BD(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,t);i._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new U9(i._authCredentials,i._appCheckCredentials,i._queue,e,i._componentsProvider&&(function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new vo(sa.fromBase64String(t))}catch(e){throw new we(Wt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new vo(sa.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:vo._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(N_(t,vo._jsonSchema))return vo.fromBase64String(t.bytes)}}vo._jsonSchemaVersion="firestore/bytes/1.0",vo._jsonSchema={type:gs("string",vo._jsonSchemaVersion),bytes:gs("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new we(Wt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ea(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new we(Wt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new we(Wt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ln(this._lat,t._lat)||Ln(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ql._jsonSchemaVersion}}static fromJSON(t){if(N_(t,Ql._jsonSchema))return new Ql(t.latitude,t.longitude)}}Ql._jsonSchemaVersion="firestore/geoPoint/1.0",Ql._jsonSchema={type:gs("string",Ql._jsonSchemaVersion),latitude:gs("number"),longitude:gs("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(n,s){if(n.length!==s.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==s[r])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Zl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(N_(t,Zl._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Zl(t.vectorValues);throw new we(Wt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zl._jsonSchemaVersion="firestore/vectorValue/1.0",Zl._jsonSchema={type:gs("string",Zl._jsonSchemaVersion),vectorValues:gs("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9=/^__.*__$/;class k9{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new Gf(t,this.data,this.fieldMask,e,this.fieldTransforms):new U_(t,this.data,e,this.fieldTransforms)}}function kD(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{Ac:i})}}class y1{constructor(t,e,n,s,r,u){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new y1({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),n=this.Vc({path:e,fc:!1});return n.gc(t),n}yc(t){const e=this.path?.child(t),n=this.Vc({path:e,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return oS(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(kD(this.Ac)&&G9.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class q9{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||JS(t)}Cc(t,e,n,s=!1){return new y1({Ac:t,methodName:e,Dc:n,path:ea.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qD(i){const t=i._freezeSettings(),e=JS(i._databaseId);return new q9(i._databaseId,!!t.ignoreUndefinedProperties,e)}function X9(i,t,e,n,s,r={}){const u=i.Cc(r.merge||r.mergeFields?2:0,t,e,s);YD("Data must be an object, but it was:",u,n);const f=XD(n,u);let d,m;if(r.merge)d=new nl(u.fieldMask),m=u.fieldTransforms;else if(r.mergeFields){const _=[];for(const y of r.mergeFields){const S=Y9(t,y,e);if(!u.contains(S))throw new we(Wt.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);K9(_,S)||_.push(S)}d=new nl(_),m=u.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,m=u.fieldTransforms;return new k9(new yo(f),d,m)}function j9(i,t,e,n=!1){return v1(e,i.Cc(n?4:3,t))}function v1(i,t){if(jD(i=Op(i)))return YD("Unsupported field value:",t,i),XD(i,t);if(i instanceof GD)return(function(n,s){if(!kD(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)})(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(n,s){const r=[];let u=0;for(const f of n){let d=v1(f,s.wc(u));d==null&&(d={nullValue:"NULL_VALUE"}),r.push(d),u++}return{arrayValue:{values:r}}})(i,t)}return(function(n,s){if((n=Op(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return CH(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Ri.fromDate(n);return{timestampValue:iS(s.serializer,r)}}if(n instanceof Ri){const r=new Ri(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:iS(s.serializer,r)}}if(n instanceof Ql)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof vo)return{bytesValue:hD(s.serializer,n._byteString)};if(n instanceof Fs){const r=s.databaseId,u=n.firestore._databaseId;if(!u.isEqual(r))throw s.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:n1(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Zl)return(function(u,f){return{mapValue:{fields:{[V3]:{stringValue:B3},[J0]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw f.Sc("VectorValues must only contain numeric values.");return $b(f.serializer,m)}))}}}}}})(n,s);throw s.Sc(`Unsupported field value: ${kS(n)}`)})(i,t)}function XD(i,t){const e={};return I3(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ff(i,((n,s)=>{const r=v1(s,t.mc(n));r!=null&&(e[n]=r)})),{mapValue:{fields:e}}}function jD(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ri||i instanceof Ql||i instanceof vo||i instanceof Fs||i instanceof GD||i instanceof Zl)}function YD(i,t,e){if(!jD(e)||!D3(e)){const n=kS(e);throw n==="an object"?t.Sc(i+" a custom object"):t.Sc(i+" "+n)}}function Y9(i,t,e){if((t=Op(t))instanceof _1)return t._internalPath;if(typeof t=="string")return WD(i,t);throw oS("Field path arguments must be of type string or ",i,!1,void 0,e)}const W9=new RegExp("[~\\*/\\[\\]]");function WD(i,t,e){if(t.search(W9)>=0)throw oS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new _1(...t.split("."))._internalPath}catch{throw oS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function oS(i,t,e,n,s){const r=n&&!n.isEmpty(),u=s!==void 0;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(r||u)&&(d+=" (found",r&&(d+=` in field ${n}`),u&&(d+=` in document ${s}`),d+=")"),new we(Wt.INVALID_ARGUMENT,f+i+d)}function K9(i,t){return i.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(t,e,n,s,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Fs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Q9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(S1("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class Q9 extends KD{data(){return super.data()}}function S1(i,t){return typeof t=="string"?WD(i,t):t instanceof _1?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new we(Wt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class x1{}class J9 extends x1{}function $9(i,t,...e){let n=[];t instanceof x1&&n.push(t),n=n.concat(e),(function(r){const u=r.filter((d=>d instanceof E1)).length,f=r.filter((d=>d instanceof nx)).length;if(u>1||u>0&&f>0)throw new we(Wt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)i=s._apply(i);return i}class nx extends J9{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new nx(t,e,n)}_apply(t){const e=this._parse(t);return QD(t._query,e),new tm(t.firestore,t.converter,BT(t._query,e))}_parse(t){const e=qD(t.firestore);return(function(r,u,f,d,m,_,y){let S;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new we(Wt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){L2(y,_);const R=[];for(const C of y)R.push(O2(d,r,C));S={arrayValue:{values:R}}}else S=O2(d,r,y)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||L2(y,_),S=j9(f,u,y,_==="in"||_==="not-in");return ps.create(m,_,S)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function tG(i,t,e){const n=t,s=S1("where",i);return nx._create(s,n,e)}class E1 extends x1{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new E1(t,e)}_parse(t){const e=this._queryConstraints.map((n=>n._parse(t))).filter((n=>n.getFilters().length>0));return e.length===1?e[0]:sl.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(s,r){let u=s;const f=r.getFlattenedFilters();for(const d of f)QD(u,d),u=BT(u,d)})(t._query,e),new tm(t.firestore,t.converter,BT(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function O2(i,t,e){if(typeof(e=Op(e))=="string"){if(e==="")throw new we(Wt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!W3(t)&&e.indexOf("/")!==-1)throw new we(Wt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const n=t.path.child(Si.fromString(e));if(!Ge.isDocumentKey(n))throw new we(Wt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return QR(i,new Ge(n))}if(e instanceof Fs)return QR(i,e._key);throw new we(Wt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kS(e)}.`)}function L2(i,t){if(!Array.isArray(i)||i.length===0)throw new we(Wt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function QD(i,t){const e=(function(s,r){for(const u of s)for(const f of u.getFlattenedFilters())if(r.indexOf(f.op)>=0)return f.op;return null})(i.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new we(Wt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new we(Wt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class eG{convertValue(t,e="none"){switch(ch(t)){case 0:return null;case 1:return t.booleanValue;case 2:return is(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(uh(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw $e(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Ff(t,((s,r)=>{n[s]=this.convertValue(r,e)})),n}convertVectorValue(t){const e=t.fields?.[J0].arrayValue?.values?.map((n=>is(n.doubleValue)));return new Zl(e)}convertGeoPoint(t){return new Ql(is(t.latitude),is(t.longitude))}convertArray(t,e){return(t.values||[]).map((n=>this.convertValue(n,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=jS(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(p_(t));default:return null}}convertTimestamp(t){const e=lh(t);return new Ri(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Si.fromString(t);ai(_D(n),9688,{name:t});const s=new m_(n.get(1),n.get(3)),r=new Ge(n.popFirst(5));return s.isEqual(e)||Wu(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nG(i,t,e){let n;return n=i?i.toFirestore(t):t,n}class Hv{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class xp extends KD{constructor(t,e,n,s,r,u){super(t,e,n,s,u),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Jv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(S1("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(Wt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=xp._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}xp._jsonSchemaVersion="firestore/documentSnapshot/1.0",xp._jsonSchema={type:gs("string",xp._jsonSchemaVersion),bundleSource:gs("string","DocumentSnapshot"),bundleName:gs("string"),bundle:gs("string")};class Jv extends xp{data(t={}){return super.data(t)}}class Ep{constructor(t,e,n,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Hv(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Jv(this._firestore,this._userDataWriter,n.key,n,new Hv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new we(Wt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(s,r){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((f=>{const d=new Jv(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Hv(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>r||f.type!==3)).map((f=>{const d=new Jv(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Hv(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,_=-1;return f.type!==0&&(m=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:iG(f.type),doc:d,oldIndex:m,newIndex:_}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(Wt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ep._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Yb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],n=[],s=[];return this.docs.forEach((r=>{r._document!==null&&(e.push(r._document),n.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function iG(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:i})}}Ep._jsonSchemaVersion="firestore/querySnapshot/1.0",Ep._jsonSchema={type:gs("string",Ep._jsonSchemaVersion),bundleSource:gs("string","QuerySnapshot"),bundleName:gs("string"),bundle:gs("string")};class sG extends eG{constructor(t){super(),this.firestore=t}convertBytes(t){return new vo(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Fs(this.firestore,null,e)}}function aG(i){i=K0(i,tm);const t=K0(i.firestore,g1),e=HD(t),n=new sG(t);return Z9(i._query),z9(e,i._query).then((s=>new Ep(t,n,i,s)))}function rG(i,t){const e=K0(i.firestore,g1),n=B9(i),s=nG(i.converter,t);return oG(e,[X9(qD(i.firestore),"addDoc",n._key,s,i.converter!==null,{}).toMutation(n._key,Gu.exists(!1))]).then((()=>n))}function oG(i,t){return(function(n,s){const r=new nh;return n.asyncQueue.enqueueAndForget((async()=>T9(await L9(n),s,r))),r.promise})(HD(i),t)}(function(t,e=!0){(function(s){Qp=s})(MF),W0(new h_("firestore",((n,{instanceIdentifier:s,options:r})=>{const u=n.getProvider("app").getImmediate(),f=new g1(new HF(n.getProvider("auth-internal")),new qF(u,n.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new we(Wt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new m_(m.options.projectId,_)})(u,s),u);return r={useFetchStreams:e,...r},f._setSettings(r),f}),"PUBLIC").setMultipleInstances(!0)),vp(zR,VR,t),vp(zR,VR,"esm2020")})();const lG={apiKey:"AIzaSyCyYlEomkWIQ-dQeT5-zrLlL_YP-2iFW08",authDomain:"shiynelly-lashes.firebaseapp.com",projectId:"shiynelly-lashes",storageBucket:"shiynelly-lashes.firebasestorage.app",messagingSenderId:"753067897077",appId:"1:753067897077:web:6478e1936121d108ec55bc"},uG=y3(lG),P2=F9(uG);function cG(){const i=Ae.useRef(),[t,e]=Ae.useState({prenom:"",nom:"",email:"",telephone:"",service:"",date:"",heure:"",commentaires:""}),[n,s]=Ae.useState([]),[r,u]=Ae.useState(!1),f=async(C,w,M)=>{try{const[O,z]=w.split(":").map(Number),V=O*60+z,j=V+M,q=$9(D2(P2,"reservations"),tG("date","==",C)),L=await aG(q);for(const P of L.docs){const D=P.data(),[U,F]=D.heure.split(":").map(Number),Y=U*60+F,G=Y+D.duration;if(V>=Y&&V<G||j>Y&&j<=G||V<=Y&&j>=G)return!1}return!0}catch(O){return console.error("Erreur lors de la vérification de disponibilité:",O),!1}},d=async(C,w)=>{if(!w)return;const M=[],O=540,z=720,V=780,j=1140,q=[];for(let L=O;L+C<=z;L+=30){const P=Math.floor(L/60),D=L%60;q.push(`${P.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`)}for(let L=V;L+C<=j;L+=30){const P=Math.floor(L/60),D=L%60;q.push(`${P.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`)}for(const L of q)await f(w,L,C)&&M.push(L);return M},m=async C=>{const w=C.target.value,M=dg.find(O=>O.id===w);if(e({...t,service:w,heure:""}),s([]),M&&t.date){const O=await d(M.duration,t.date);s(O)}},_=async C=>{const{name:w,value:M}=C.target;if(w==="date"&&M){if(!y(M)){alert("Veuillez sélectionner uniquement un samedi ou un dimanche");return}if(t.service){const O=dg.find(V=>V.id===t.service),z=await d(O.duration,M);s(z)}}e({...t,[w]:M})},y=C=>{const M=new Date(C+"T00:00:00").getDay();return M===0||M===6},S=async C=>{if(C.preventDefault(),!y(t.date)){alert("Veuillez choisir un samedi ou un dimanche");return}u(!0);const w=dg.find(O=>O.id===t.service);if(!await f(t.date,t.heure,w.duration)){alert("Désolé, ce créneau vient d'être réservé. Veuillez en choisir un autre."),u(!1);const O=await d(w.duration,t.date);s(O);return}try{await rG(D2(P2,"reservations"),{prenom:t.prenom,nom:t.nom,email:t.email,telephone:t.telephone,service:w.name,serviceId:t.service,date:t.date,heure:t.heure,duration:w.duration,commentaires:t.commentaires,timestamp:new Date});const O={to_name:t.prenom,from_name:`${t.prenom} ${t.nom}`,client_email:t.email,client_phone:t.telephone,service_name:`${w.name} - ${w.price}`,appointment_date:new Date(t.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),appointment_time:t.heure,comments:t.commentaires||"Aucun",address:"60 bd Pasteur 94260 - Sonner à Demoniere, prendre le 2ème ascenseur près des escaliers, sortir à gauche, sonner porte L",instructions:"Venez avec les cils propres et démaquillés. Attention : présence de deux chats au domicile."};await bR.send("service_4t9ude2","template_z26jqp7",O,"vSn8lOsAhAksc03kS"),await bR.send("service_4t9ude2","template_8smxy0b",O,"vSn8lOsAhAksc03kS"),alert("Rendez-vous confirmé! Vous allez recevoir un email de confirmation."),e({prenom:"",nom:"",email:"",telephone:"",service:"",date:"",heure:"",commentaires:""}),s([])}catch(O){console.error("Erreur:",O),alert("Une erreur est survenue. Veuillez réessayer.")}finally{u(!1)}},T=()=>new Date().toISOString().split("T")[0],R=()=>{const C=new Date;return C.setMonth(C.getMonth()+3),C.toISOString().split("T")[0]};return ht.jsx("div",{className:"booking-container",id:"reservation",children:ht.jsxs("form",{ref:i,onSubmit:S,className:"booking-form",children:[ht.jsxs("div",{className:"form-row",children:[ht.jsxs("div",{className:"form-group",children:[ht.jsx("label",{htmlFor:"prenom",children:"Prénom "}),ht.jsx("input",{type:"text",id:"prenom",name:"prenom",value:t.prenom,onChange:_,required:!0})]}),ht.jsxs("div",{className:"form-group",children:[ht.jsx("label",{htmlFor:"nom",children:"Nom "}),ht.jsx("input",{type:"text",id:"nom",name:"nom",value:t.nom,onChange:_,required:!0})]})]}),ht.jsxs("div",{className:"form-group",children:[ht.jsx("label",{htmlFor:"email",children:"Email "}),ht.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:_,required:!0})]}),ht.jsxs("div",{className:"form-group",children:[ht.jsx("label",{htmlFor:"telephone",children:"Téléphone "}),ht.jsx("input",{type:"tel",id:"telephone",name:"telephone",value:t.telephone,onChange:_,required:!0})]}),ht.jsxs("div",{className:"form-group",children:[ht.jsxs("label",{htmlFor:"service",children:[ht.jsx("i",{className:"fas fa-sparkles"})," Service souhaité"]}),ht.jsxs("div",{className:"select-wrapper",children:[ht.jsxs("select",{id:"service",name:"service",value:t.service,onChange:m,required:!0,children:[ht.jsx("option",{value:"",children:"Choisir un service"}),dg.map(C=>ht.jsxs("option",{value:C.id,children:[C.name," - ",C.price]},C.id))]}),ht.jsx("i",{className:"fas fa-chevron-down select-arrow"})]}),t.service&&ht.jsx("p",{className:"service-description",children:dg.find(C=>C.id===t.service)?.description})]}),ht.jsxs("div",{className:"form-group",children:[ht.jsxs("label",{htmlFor:"date",children:[ht.jsx("i",{className:"far fa-calendar-alt"})," Date souhaitée (Week-end uniquement)"]}),ht.jsxs("div",{className:"date-input-container",children:[ht.jsx("input",{type:"date",id:"date",name:"date",value:t.date,onChange:_,min:T(),max:R(),className:"weekend-only-date",required:!0}),ht.jsx("i",{className:"fas date-calendar-icon"})]}),t.date&&!y(t.date)&&ht.jsxs("p",{className:"error-message",children:[ht.jsx("i",{className:"fas fa-exclamation-circle"})," Uniquement samedi ou dimanche"]})]}),ht.jsx("div",{className:"form-row",children:ht.jsxs("div",{className:"form-group",children:[ht.jsxs("label",{htmlFor:"heure",children:[ht.jsx("i",{className:"far fa-clock"})," Heure préférée"]}),ht.jsxs("div",{className:"select-wrapper",children:[ht.jsxs("select",{id:"heure",name:"heure",value:t.heure,onChange:_,disabled:!t.service||!t.date||n.length===0,required:!0,children:[ht.jsx("option",{value:"",children:t.date?t.service?n.length===0?"Aucun créneau disponible":"Choisir un créneau":"Choisir d'abord un service":"Choisir d'abord une date"}),n.map(C=>ht.jsx("option",{value:C,children:C},C))]}),ht.jsx("i",{className:"fas fa-chevron-down select-arrow"})]})]})}),ht.jsxs("div",{className:"form-group",children:[ht.jsx("label",{htmlFor:"commentaires",children:"Commentaires ou demandes spéciales"}),ht.jsx("textarea",{id:"commentaires",name:"commentaires",value:t.commentaires,onChange:_,rows:"4",placeholder:"Première fois ? Allergies ? Préférences particulières ?"})]}),ht.jsxs("div",{className:"info-box",children:[ht.jsxs("h4",{children:[ht.jsx("i",{className:"fas fa-info-circle"})," Informations importantes :"]}),ht.jsxs("ul",{children:[ht.jsx("li",{children:"Venez avec les cils propres et démaquillés"}),ht.jsx("li",{children:"Attention : présence de deux chats au domicile"})]})]}),ht.jsx("button",{type:"submit",className:"submit-button",disabled:r,children:r?ht.jsxs(ht.Fragment,{children:[ht.jsx("i",{className:"fas fa-spinner fa-spin"})," Envoi en cours..."]}):ht.jsxs(ht.Fragment,{children:[ht.jsx("i",{className:"far fa-calendar-check"})," Confirmer le Rendez-vous"]})})]})})}function hG(){const[i,t]=Ae.useState(!1),e=Ae.useRef(null);return Ae.useEffect(()=>{const n=new IntersectionObserver(([s])=>{s.isIntersecting&&(t(!0),n.unobserve(s.target))},{threshold:.3});return e.current&&n.observe(e.current),()=>n.disconnect()},[]),ht.jsx("section",{id:"réservation",ref:e,children:ht.jsxs("div",{className:`reservation-container ${i?"fade-in-up":""}`,children:[ht.jsx("h2",{children:"Réservation"}),ht.jsx(cG,{})]})})}function fG(){const i=Ae.useRef(null),[t,e]=Ae.useState(!1);return Ae.useEffect(()=>{const n=()=>{if(!i.current)return;const s=i.current.getBoundingClientRect().top,r=window.innerHeight;if(s<=r*.8){e(!0);const u=document.querySelector(".section-before-footer");u&&u.classList.add("slide-up")}};return window.addEventListener("scroll",n),n(),()=>{window.removeEventListener("scroll",n)}},[]),ht.jsx("section",{id:"contact",children:ht.jsx("footer",{ref:i,className:`footer ${t?"footer-visible":""}`,children:ht.jsxs("div",{className:"footer-content",children:[ht.jsxs("div",{className:"footer-main",children:[ht.jsxs("div",{className:"footer-section",children:[ht.jsx("h3",{className:"footer-logo",children:"Shiynelly Lashes"}),ht.jsx("p",{className:"footer-tagline",children:"Extensions de cils professionnelles"}),ht.jsxs("div",{className:"footer-social",children:[ht.jsx("a",{href:"https://www.instagram.com/shiynellylashes/",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",children:ht.jsx("i",{className:"fab fa-instagram"})}),ht.jsx("a",{href:"https://www.tiktok.com/@shiynellylashes",target:"_blank",rel:"noopener noreferrer","aria-label":"TikTok",children:ht.jsx("i",{className:"fab fa-tiktok"})})]})]}),ht.jsxs("div",{className:"footer-section",children:[ht.jsx("h4",{children:"Navigation"}),ht.jsxs("ul",{children:[ht.jsx("li",{children:ht.jsx("a",{href:"/",children:"Accueil"})}),ht.jsx("li",{children:ht.jsx("a",{href:"#nosprestations",children:"Nos Prestations"})}),ht.jsx("li",{children:ht.jsx("a",{href:"#contact",children:"Contact"})}),ht.jsx("li",{children:ht.jsx("a",{href:"#réservation",children:"Réservation"})})]})]}),ht.jsxs("div",{className:"footer-section",children:[ht.jsx("h4",{children:"Services"}),ht.jsxs("ul",{children:[ht.jsx("li",{children:ht.jsx("a",{href:"#nosprestations",children:"Cils à Cils"})}),ht.jsx("li",{children:ht.jsx("a",{href:"#nosprestations",children:"Pose Whispy"})}),ht.jsx("li",{children:ht.jsx("a",{href:"#nosprestations",children:"Pose Russe"})}),ht.jsx("li",{children:ht.jsx("a",{href:"#nosprestations",children:"Clusters"})}),ht.jsx("li",{children:ht.jsx("a",{href:"#nosprestations",children:"Dépose"})})]})]}),ht.jsxs("div",{className:"footer-section",children:[ht.jsx("h4",{children:"Contact"}),ht.jsxs("ul",{className:"footer-contact",children:[ht.jsxs("li",{children:[ht.jsx("i",{className:"fas fa-map-marker-alt"}),ht.jsx("span",{children:"94260 Fresnes, France"})]}),ht.jsxs("li",{children:[ht.jsx("i",{className:"fas fa-envelope"}),ht.jsx("a",{href:"mailto:studiobynelly@gmail.com",className:"email-link",children:ht.jsx("span",{children:"studiobynelly@gmail.com"})})]})]})]})]}),ht.jsxs("div",{className:"footer-bottom",children:[ht.jsx("p",{children:"© 2025 Unix Creative Studio. Tous droits réservés."}),ht.jsxs("div",{className:"footer-legal",children:[ht.jsx("a",{href:"https://mixed-stoat-359.notion.site/Terms-and-Conditions-28788674cf3280a286eaf731367bed4b?source=copy_link",children:"Mentions légales"}),ht.jsx("span",{children:"•"}),ht.jsx("a",{href:"https://mixed-stoat-359.notion.site/Privacy-Policy-28788674cf3280b3a03dd515020f46f2?source=copy_link",children:"Politique de confidentialité"})]})]})]})})})}function dG(){return ht.jsxs(ht.Fragment,{children:[ht.jsx(tI,{}),ht.jsx(B5,{}),ht.jsx(H5,{}),ht.jsx(hG,{}),ht.jsx(fG,{})]})}ZN.createRoot(document.getElementById("root")).render(ht.jsx(Ae.StrictMode,{children:ht.jsx(dG,{})}));
